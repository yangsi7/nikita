{"at":"2026-01-17T21:16:25.866561","root":".","tree":[".","\u251c\u2500\u2500 docs/","\u2502   \u251c\u2500\u2500 architecture/","\u2502   \u251c\u2500\u2500 decisions/","\u2502   \u251c\u2500\u2500 game/","\u2502   \u251c\u2500\u2500 guides/","\u2502   \u251c\u2500\u2500 screenshots/","\u2502   \u251c\u2500\u2500 verification/","\u2502   \u2514\u2500\u2500 README.md","\u251c\u2500\u2500 docs-to-process/","... (truncated)"],"stats":{"total_files":519,"total_directories":209,"fully_parsed":{"python":466,"typescript":43,"shell":1},"listed_only":{"shell":1,"json":7,"css":1},"markdown_files":189},"f":{"nikita/agents/voice/elevenlabs_client.py":["p",["get_elevenlabs_client:528:(api_key:str | None = None,)>ElevenLabsConversationsClient::"],{"TranscriptTurn":["50",[]],"ConversationMetadata":["62",[]],"ConversationAnalysis":["74",[]],"ConversationSummary":["84",[]],"ConversationDetail":["101",[]],"ConversationListResponse":["117",[]],"AgentConversationConfig":["126",[]],"AgentConfig":["140",["system_prompt:151:(self)>str | None::Extract system prompt from conversation config.","first_message:158:(self)>str | None::Extract first message from conversation config.","voice_id:165:(self)>str | None::Extract voice ID from TTS config.","llm_model:172:(self)>str | None::Extract LLM model from config."]],"ElevenLabsConversationsClient":["179",["__init__:207:(self, api_key:str | None = None, timeout:float = 30.0,)::","_headers:220:(self)>dict[str, str]::Build request headers.","list_conversations:235:async (self, agent_id:str | None = None, limit:int = 30, cursor:str | None = None, call_start_after_unix:int | None = None, call_start_before_unix:int | None = None, include_summary:bool = False,)>ConversationListResponse:_headers:","get_conversation:302:async (self, conversation_id:str,)>ConversationDetail:_headers:","get_agent_config:375:async (self, agent_id:str,)>AgentConfig:_headers:","to_transcript_data:422:(self, detail:ConversationDetail,)>TranscriptData::","get_latest_conversation:461:async (self, agent_id:str, user_id:str | None = None,)>ConversationDetail | None:get_conversation,list_conversations:","save_transcript_to_file:483:async (self, conversation_id:str, output_path:str,)>str:get_conversation:"]]}],"nikita/behavioral/detector.py":["p",{"SituationDetector":["21",["detect:50:(self, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", user_id:str | None = None,)>SituationContext:_build_metadata,_detect_situation_type:","_detect_situation_type:119:(self, conflict_state:str, hours_since_last:float, local_hour:int,)>SituationType:_is_after_gap,_is_conflict_active,_is_evening,_is_morning:","_is_conflict_active:151:(self, conflict_state:str)>bool::","_is_after_gap:162:(self, hours_since_last:float)>bool::","_is_long_gap:173:(self, hours_since_last:float)>bool::","_is_morning:184:(self, local_hour:int)>bool::","_is_evening:196:(self, local_hour:int)>bool::","_build_metadata:213:(self, situation_type:SituationType, conflict_state:str, hours_since_last:float,)>dict:_is_long_gap:","map_conflict_to_situation:235:(self, conflict_state:str)>SituationType:_is_conflict_active:","calculate_time_since_last:252:(self, last_message_at:datetime | None, current_time:datetime | None = None,)>float::"]]}],"nikita/behavioral/engine.py":["p",{"MetaInstructionEngine":["23",["__init__:55:(self, max_instructions:int = 5, detector:SituationDetector | None = None, selector:InstructionSelector | None = None,)::","get_instructions_for_context:78:(self, user_id:str | UUID | None = None, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", last_message_at:datetime | None = None, max_instructions:int | None = None,)>str:format_for_prompt:","detect_situation:144:(self, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", user_id:str | None = None,)>SituationContext::","select_instructions:175:(self, context:SituationContext, max_instructions:int | None = None,)>InstructionSet::","format_for_prompt:190:(self, instruction_set:InstructionSet)>str:format_for_prompt:","get_situation_summary:204:(self, context:SituationContext)>dict[str, Any]::","get_all_situations:225:(self)>list[SituationType]::","clear_caches:233:(self)>None::"]]}],"nikita/behavioral/models.py":["p",{"SituationContext":["44",[]],"MetaInstruction":["100",["conditions_none_to_dict:134:(cls, v:Any)>dict[str, Any]::Convert None to empty dict for conditions field.","applies_to_context:147:(self, context:SituationContext)>bool::"]],"InstructionSet":["192",["by_category:205:(self)>dict[SituationCategory, list[MetaInstruction]]::","format_for_prompt:218:(self)>str:by_category:"]]}],"nikita/behavioral/selector.py":["p",{"InstructionSelector":["33",["__init__:45:(self, instructions_path:Path | None = None, max_instructions:int = 5,)::","instruction_library:57:(self)>dict[str, list[dict[str, Any]]]:_load_instructions:Lazy-load and cache instruction library.","_load_instructions:63:(self)>dict[str, list[dict[str, Any]]]::","select:85:(self, context:SituationContext, max_instructions:int | None = None,)>InstructionSet:_parse_instruction:","_parse_instruction:139:(self, raw:dict[str, Any], situation_type:SituationType,)>MetaInstruction::","get_instructions_for_situation:166:(self, situation_type:SituationType,)>list[MetaInstruction]:_parse_instruction:","evaluate_conditions:192:(self, instruction:MetaInstruction, context:SituationContext,)>bool::","clear_cache:206:(self)>None::Clear the instruction library cache (for testing/reloading)."]]}],"nikita/conflicts/breakup.py":["p",["get_breakup_manager:314:()>BreakupManager::"],{"ThresholdResult":["31",[]],"BreakupResult":["51",[]],"BreakupManager":["67",["__init__:122:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","check_threshold:136:(self, user_id:str, relationship_score:int,)>ThresholdResult::","trigger_breakup:193:(self, user_id:str, reason:str = \"threshold\", conflict_type:str | None = None,)>BreakupResult:_get_breakup_message:","get_warning_message:220:(self)>str::","_get_breakup_message:229:(self, conflict_type:str | None = None)>str::","get_relationship_status:252:(self, user_id:str, relationship_score:int,)>dict[str, Any]:check_threshold:","check_and_process:283:(self, user_id:str, relationship_score:int,)>tuple[ThresholdResult, BreakupResult | None]:check_threshold,trigger_breakup:"]]}],"nikita/conflicts/detector.py":["p",{"DetectionContext":["19",[]],"DetectionResult":["41",["has_triggers:55:(self)>bool::Check if any triggers were detected.","highest_severity:60:(self)>float::Get the highest severity among detected triggers."]],"TriggerDetector":["67",["__init__:105:(self, store:ConflictStore | None = None, llm_enabled:bool = True,):_get_detection_prompt:","_get_detection_prompt:124:(self)>str::Get the system prompt for LLM-based detection."]]}],"nikita/conflicts/escalation.py":["p",["get_escalation_manager:294:()>EscalationManager::"],{"EscalationResult":["22",[]],"EscalationManager":["39",["__init__:52:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","check_escalation:62:(self, conflict:ActiveConflict)>EscalationResult:_check_natural_resolution,_get_escalation_threshold,_get_next_level,_get_time_in_level:","escalate:111:(self, conflict:ActiveConflict)>EscalationResult:_get_next_level:","acknowledge:134:(self, conflict:ActiveConflict)>bool::","_check_natural_resolution:159:(self, conflict:ActiveConflict)>bool:_get_natural_resolution_probability,_get_time_in_level:","_get_natural_resolution_probability:190:(self, level:EscalationLevel)>float::","_get_time_in_level:206:(self, conflict:ActiveConflict)>timedelta::","_get_escalation_threshold:218:(self, level:EscalationLevel)>timedelta | None::","_get_next_level:239:(self, current:EscalationLevel)>EscalationLevel | None::","get_escalation_timeline:255:(self, conflict:ActiveConflict)>dict[str, Any]:_get_escalation_threshold,_get_natural_resolution_probability,_get_time_in_level:"]]}],"nikita/conflicts/generator.py":["p",["get_conflict_generator:341:()>ConflictGenerator::"],{"GenerationContext":["25",[]],"GenerationResult":["43",[]],"ConflictGenerator":["59",["__init__:96:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","generate:110:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>GenerationResult:_calculate_severity,_check_should_skip,_prioritize_triggers,_select_conflict_type:","_check_should_skip:170:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>str | None::","_prioritize_triggers:197:(self, triggers:list[ConflictTrigger],)>list[ConflictTrigger]::","_select_conflict_type:219:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>ConflictType::","_calculate_severity:259:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>float::","should_generate_conflict:312:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>tuple[bool, str]:_check_should_skip,_prioritize_triggers:"]]}],"nikita/conflicts/models.py":["p",["get_conflict_config:220:()>ConflictConfig::","trigger_to_conflict_type:239:(trigger_type:TriggerType)>ConflictType::"],{"ConflictTrigger":["50",["validate_severity:71:(cls, v:float)>float::Clamp severity to valid range 0.0-1.0."]],"ActiveConflict":["76",["validate_severity:110:(cls, v:float)>float::Clamp severity to valid range 0.0-1.0."]],"ConflictConfig":["115",[]],"ConflictSummary":["189",["resolution_rate:209:(self)>float::Calculate resolution rate."]]}],"nikita/conflicts/resolution.py":["p",["get_resolution_manager:397:()>ResolutionManager::"],{"ResolutionContext":["35",[]],"ResolutionEvaluation":["51",[]],"ResolutionManager":["70",["__init__:105:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None, llm_enabled:bool = True,):_get_evaluation_prompt:","_get_evaluation_prompt:126:(self)>str::Get the system prompt for LLM evaluation."]]}],"nikita/conflicts/store.py":["p",["get_conflict_store:406:()>ConflictStore::"],{"ConflictStore":["24",["__init__:31:(self)::Initialize conflict store with in-memory storage.","create_trigger:47:(self, user_id:str, trigger_type:TriggerType, severity:float, context:dict[str, Any] | None = None, user_messages:list[str] | None = None,)>ConflictTrigger::","get_trigger:77:(self, trigger_id:str)>ConflictTrigger | None::","get_user_triggers:92:(self, user_id:str, since:datetime | None = None,)>list[ConflictTrigger]::","delete_trigger:114:(self, trigger_id:str)>bool::","create_conflict:140:(self, user_id:str, conflict_type:ConflictType, severity:float, trigger_ids:list[str] | None = None,)>ActiveConflict::","get_conflict:170:(self, conflict_id:str)>ActiveConflict | None::","get_active_conflict:181:(self, user_id:str)>ActiveConflict | None::","get_user_conflicts:201:(self, user_id:str, resolved:bool | None = None,)>list[ActiveConflict]::","update_conflict:227:(self, conflict_id:str, **updates:Any,)>ActiveConflict | None::","escalate_conflict:253:(self, conflict_id:str, new_level:EscalationLevel,)>ActiveConflict | None:update_conflict:","resolve_conflict:273:(self, conflict_id:str, resolution_type:ResolutionType,)>ActiveConflict | None:update_conflict:","increment_resolution_attempts:292:(self, conflict_id:str,)>ActiveConflict | None:update_conflict:","reduce_severity:314:(self, conflict_id:str, reduction:float,)>ActiveConflict | None:update_conflict:","get_conflict_summary:333:(self, user_id:str)>ConflictSummary:get_active_conflict,get_user_conflicts:","count_consecutive_unresolved_crises:362:(self, user_id:str)>int:get_user_conflicts:","clear_user_data:385:(self, user_id:str)>None::"]]}],"nikita/context/composer.py":["p",["get_prompt_composer:250:()>HierarchicalPromptComposer::","compose_hierarchical_prompt:270:(user_id:UUID, chapter::EmotionalState | None = None, package:ContextPackage | None = None, current_time:datetime | None = None, last_interaction:datetime | None = None, conversation_active:bool = False,)>ComposedPrompt:compose,get_prompt_composer:"],{"HierarchicalPromptComposer":["27",["__init__:41:(self)>None::Initialize HierarchicalPromptComposer.","compose:57:(self, user_id:UUID, chapter:int, emotional_state:EmotionalState | None = None, package:ContextPackage | None = None, current_time:datetime | None = None, last_interaction:datetime | None = None, conversation_active:bool = False,)>ComposedPrompt:_compose_layer5,_compose_layer6,_estimate_tokens,compose:","_compose_layer5:164:(self, package:ContextPackage | None)>str | None::","_compose_layer6:211:(self)>str | None::"]]}],"nikita/context/layers/base_personality.py":["p",["get_layer1_loader:169:()>Layer1Loader::","get_base_personality_prompt:181:()>str:get_layer1_loader:"],{"Layer1Loader":["24",["__init__:37:(self, config_path:Path | None = None)>None::","config:48:(self)>dict[str, Any]::","prompt:70:(self)>str:_generate_fallback_prompt:","version:84:(self)>str::Get the config version.","token_estimate:89:(self)>int::Get the estimated token count.","get_identity:93:(self)>dict[str, Any]::Get Nikita's core identity.","get_traits:97:(self)>dict[str, Any]::Get Nikita's personality traits.","get_values:101:(self)>list[str]::Get Nikita's core values.","get_speaking_style:105:(self)>dict[str, Any]::Get Nikita's speaking style preferences.","get_backstory:109:(self)>dict[str, Any]::Get Nikita's backstory elements.","get_boundaries:113:(self)>dict[str, Any]::Get Nikita's boundaries and limits.","validate:117:(self)>tuple[bool, list[str]]::","_generate_fallback_prompt:151:(self)>str:get_identity:Generate a minimal fallback prompt if template missing."]]}],"nikita/context/layers/chapter.py":["p",["get_layer2_composer:262:()>Layer2Composer::","compose_chapter_layer:274:(chapter:int)>str::"],{"Layer2Composer":["174",["__init__:184:(self)>None::Initialize Layer2Composer.","compose:188:(self, chapter:int)>str::","get_chapter_name:206:(self, chapter:int)>str::","get_chapter_config:220:(self, chapter:int)>dict[str, Any]::","token_estimate:247:(self)>int::Estimate token count for average chapter prompt."]]}],"nikita/context/layers/context_injection.py":["p",["get_layer5_injector:235:()>Layer5Injector::","inject_context:247:(package:ContextPackage | None)>str | None::"],{"Layer5Injector":["30",["__init__:56:(self, max_user_facts:int = MAX_USER_FACTS, max_relationship_events:int = MAX_RELATIONSHIP_EVENTS, max_active_threads:int = MAX_ACTIVE_THREADS, max_week_summaries:int = MAX_WEEK_SUMMARIES, max_life_events:int = MAX_LIFE_EVENTS,)>None::","inject:72:(self, package:ContextPackage | None)>str | None:_format_active_threads,_format_life_events,_format_relationship_events,_format_user_facts,_format_week_summaries:","_format_user_facts:128:(self, facts:list[str])>str | None::","_format_active_threads:144:(self, threads:list[Any])>str | None::","_format_relationship_events:173:(self, events:list[str])>str | None::","_format_week_summaries:189:(self, summaries:list[str])>str | None::","_format_life_events:205:(self, events:list[str])>str | None::","token_estimate:222:(self)>int::"]]}],"nikita/context/layers/emotional_state.py":["p",["get_layer3_composer:352:()>Layer3Composer::","compose_emotional_state_layer:366:(state:EmotionalState | EmotionalStateModel | None = None,)>str::"],{"Layer3Composer":["36",["__init__:49:(self)>None::Initialize Layer3Composer.","compose:56:(self, state:EmotionalState | EmotionalStateModel | None = None,)>str:_describe_conflict_state,_get_behavioral_impact,_get_conflict_state,_get_energy_label,_get_mood_label,describe_state:","_get_conflict_state:112:(self, state:EmotionalState | EmotionalStateModel,)>ConflictState::","_describe_conflict_state:126:(self, conflict:ConflictState)>str::","get_default_state:144:(self)>EmotionalState::","describe_state:155:(self, state:EmotionalState | EmotionalStateModel,)>dict[str, str]:_describe_arousal,_describe_dominance,_describe_intimacy,_describe_valence:","_describe_arousal:171:(self, value:float)>str::Describe arousal level.","_describe_valence:180:(self, value:float)>str::Describe valence level.","_describe_dominance:189:(self, value:float)>str::Describe dominance level.","_describe_intimacy:198:(self, value:float)>str::Describe intimacy level.","_get_mood_label:207:(self, state:EmotionalState | EmotionalStateModel)>str:_is_neutral:Get a single-word mood label based on state.","_get_energy_label:235:(self, arousal:float)>str::Get energy level label.","_is_neutral:244:(self, state:EmotionalState | EmotionalStateModel)>bool::Check if state is roughly neutral.","_get_behavioral_impact:257:(self, state:EmotionalState | EmotionalStateModel, conflict_state:ConflictState = ConflictState.NONE,)>str:_get_conflict_behavioral_impacts:","_get_conflict_behavioral_impacts:304:(self, conflict:ConflictState)>list[str]::","token_estimate:342:(self)>int::Estimate token count for emotional state prompt."]]}],"nikita/context/layers/on_the_fly.py":["p",["get_layer6_handler:292:()>Layer6Handler::"],{"PromptModification":["31",[]],"Layer6Handler":["75",["__init__:87:(self)>None::Initialize Layer6Handler.","detect_triggers:95:(self, message:str, current_mood:str = \"neutral\",)>list[PromptModification]::","apply_modification:158:(self, current_prompt:str, modification:PromptModification,)>str::","retrieve_memory:185:async (self, user_id:UUID, query:str, num_results:int = 3,)>str | None:_get_memory_client:","_get_memory_client:211:async (self, user_id:UUID)>Any::","process_modification:238:async (self, user_id:UUID, current_prompt:str, modification:PromptModification,)>str:apply_modification,retrieve_memory:","compose_static:260:(self)>str::"]]}],"nikita/context/layers/situation.py":["p",["get_layer4_computer:232:()>Layer4Computer::","detect_and_compose_situation:248:(current_time:datetime | None = None, last_interaction::bool = False,)>str:detect_and_compose,get_layer4_computer:"],{"Layer4Computer":["111",["__init__:122:(self)>None::Initialize Layer4Computer.","detect_situation:131:(self, current_time:datetime, last_interaction:datetime | None, conversation_active:bool = False,)>SituationType::","compose:169:(self, situation:SituationType)>str::","detect_and_compose:186:(self, current_time:datetime, last_interaction:datetime | None, conversation_active:bool = False,)>str:compose,detect_situation:","get_situation_hints:204:(self, situation:SituationType)>dict[str, Any]::","token_estimate:222:(self)>int::Estimate token count for situational prompt."]]}],"nikita/context/package.py":["p",{"EmotionalState":["17",["to_description:49:(self)>str::Generate natural language description of emotional state."]],"ActiveThread":["86",[]],"ContextPackage":["95",["limit_user_facts:173:(cls, v:list[str])>list[str]::Ensure user_facts doesn't exceed 20 items.","limit_relationship_events:179:(cls, v:list[str])>list[str]::Ensure relationship_events doesn't exceed 10 items.","limit_week_summaries:185:(cls, v:list[str])>list[str]::Ensure week_summaries doesn't exceed 7 items.","limit_life_events:191:(cls, v:list[str])>list[str]::Ensure life_events_today doesn't exceed 3 items (AC-T015.3).","is_expired:195:(self)>bool::Check if the package has expired.","get_token_estimate:199:(self)>int::"]],"ComposedPrompt":["217",[]],"ProcessingResult":["240",["add_step:251:(self, step_name:str)>None::Mark a step as completed.","add_error:255:(self, error:str)>None::Record an error."]]}],"nikita/context/store.py":["p",["get_package_store:189:(session:AsyncSession | None = None)>PackageStore::","set_default_package_store:217:(store:PackageStore)>None::"],{"PackageStore":["23",["__init__:30:(self, session:AsyncSession)>None::","get:38:async (self, user_id:UUID)>ContextPackage | None::","set:81:async (self, user_id:UUID, package:ContextPackage, ttl_hours:int = 24,)>None::","delete:123:async (self, user_id:UUID)>bool:delete:","cleanup_expired:145:async (self)>int:delete:","exists:164:async (self, user_id:UUID)>bool:get:"]]}],"nikita/context/validation.py":["p",["get_token_validator:242:()>TokenValidator::","count_tokens:254:(text:str)>int::","validate_prompt:266:(prompt:str)>ValidationResult::"],{"ValidationResult":["43",[]],"TokenValidator":["63",["__init__:79:(self, max_tokens:int = DEFAULT_MAX_TOKENS, layer_budgets:dict[str, int] | None = None,)>None::","count_tokens:96:(self, text:str)>int::","validate:114:(self, prompt:str)>ValidationResult:count_tokens:","validate_breakdown:133:(self, layer_breakdown:dict[str, int])>ValidationResult::","truncate:157:(self, text:str, max_tokens:int, add_marker:bool = False,)>str:count_tokens:","truncate_layers:199:(self, layers:dict[str, str], max_total:int | None = None,)>dict[str, str]:count_tokens,truncate:","get_layer_budgets:229:(self)>dict[str, int]::"]]}],"nikita/db/models/context_package.py":["p",{"ContextPackageModel":["16",[]]}],"nikita/db/models/scheduled_touchpoint.py":["p",{"ScheduledTouchpoint":["23",["is_pending:137:(self)>bool::Check if touchpoint is still pending delivery.","is_due:142:(self)>bool::Check if touchpoint is due for delivery."]]}],"nikita/emotional_state/computer.py":["p",["get_state_computer:404:()>StateComputer::"],{"LifeEventImpact":["64",[]],"StateComputer":["73",["__init__:153:(self)>None::Initialize StateComputer.","compute:166:(self, user_id:UUID, current_state:EmotionalStateModel | None = None, timestamp:datetime | None = None, life_events:list[LifeEventImpact] | None = None, conversation_tones:list[ConversationTone] | None = None, chapter:int = 1, relationship_score:float = 0.5,)>EmotionalStateModel:_apply_conversation_deltas,_apply_life_event_deltas,_apply_relationship_modifier,_compute_base_state:","_compute_base_state:232:(self, timestamp:datetime)>dict[str, float]:_clamp,_compute_base_state:","_apply_life_event_deltas:291:(self, events:list[LifeEventImpact])>dict[str, float]:_apply_life_event_deltas:","_apply_conversation_deltas:325:(self, tones:list[ConversationTone])>dict[str, float]::","_apply_relationship_modifier:359:(self, chapter:int, relationship_score:float)>dict[str, float]:_apply_relationship_modifier:","_clamp:395:(value:float, min_val:float = 0.0, max_val:float = 1.0)>float::Clamp value to range."]]}],"nikita/emotional_state/conflict.py":["p",["get_conflict_detector:362:()>ConflictDetector::"],{"ConflictDetector":["22",["__init__:102:(self)>None::Initialize ConflictDetector.","detect_conflict_state:110:(self, state:EmotionalStateModel, previous_state:EmotionalStateModel | None = None,)>ConflictState:_can_transition,_get_severity,detect_conflict_state:","can_transition_to:168:(self, current_state:ConflictState, target_state:ConflictState,)>bool:_can_transition:","_can_transition:187:(self, current:ConflictState, target:ConflictState,)>bool::Internal transition validation.","_get_severity:195:(self, state:ConflictState)>int::Get severity level for a conflict state.","apply_transition:207:(self, state:EmotionalStateModel, target:ConflictState, trigger:str | None = None,)>EmotionalStateModel:_can_transition:","check_escalation:233:(self, state:EmotionalStateModel, previous_state:EmotionalStateModel | None = None,)>tuple[bool, ConflictState | None, str | None]:_can_transition,_find_intermediate_state,_get_trigger_reason,detect_conflict_state:","check_de_escalation:270:(self, state:EmotionalStateModel, positive_interaction:bool = False,)>tuple[bool, ConflictState | None, str | None]::","_find_intermediate_state:321:(self, current:ConflictState, target:ConflictState,)>ConflictState | None:_get_severity:Find intermediate state for invalid direct transition.","_get_trigger_reason:345:(self, state:EmotionalStateModel, target:ConflictState,)>str::Get human-readable trigger reason for transition."]]}],"nikita/emotional_state/models.py":["p",{"EmotionalStateModel":["34",["validate_conflict_state:119:(cls, v:str | ConflictState)>ConflictState::Validate and convert conflict_state to enum.","validate_conflict_timestamps:131:(self)>\"EmotionalStateModel\"::Ensure conflict_started_at is set when in conflict.","to_description:140:(self)>str::Generate natural language description of emotional state.","apply_deltas:190:(self, arousal_delta:float = 0.0, valence_delta:float = 0.0, dominance_delta:float = 0.0, intimacy_delta:float = 0.0,)>\"EmotionalStateModel\"::","set_conflict:224:(self, conflict_state:ConflictState, trigger:str | None = None,)>\"EmotionalStateModel\"::","model_dump_for_db:255:(self)>dict[str, Any]::Convert to database-compatible dictionary.","from_db_row:278:(cls, row:dict[str, Any])>\"EmotionalStateModel\"::Create instance from database row."]]}],"nikita/emotional_state/recovery.py":["p",["get_recovery_manager:403:()>RecoveryManager::"],{"RecoveryResult":["38",[]],"RecoveryManager":["47",["__init__:95:(self)>None::Initialize RecoveryManager.","can_recover:103:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL,)>bool:can_recover:","apply_recovery:135:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL, intensity:float = 1.0,)>tuple[EmotionalStateModel, RecoveryResult]:_get_de_escalated_state,apply_recovery,can_recover:","calculate_recovery_rate:216:(self, approach:RecoveryApproach, conflict_state:ConflictState,)>float::","apply_decay_recovery:247:(self, state:EmotionalStateModel, current_time:datetime | None = None,)>tuple[EmotionalStateModel, RecoveryResult]:_get_de_escalated_state:","_get_de_escalated_state:341:(self, current:ConflictState)>ConflictState::","get_estimated_recovery_time:363:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL,)>timedelta:calculate_recovery_rate:"]]}],"nikita/emotional_state/store.py":["p",["get_state_store:354:()>StateStore::"],{"StateStore":["28",["__init__:36:(self, session_factory:Callable | None = None)>None::","get_current_state:46:async (self, user_id:UUID)>EmotionalStateModel | None:_row_to_state:","get_state:70:async (self, state_id:UUID)>EmotionalStateModel | None:_row_to_state:","save_state:94:async (self, state:EmotionalStateModel)>EmotionalStateModel::","update_state:134:async (self, user_id:UUID, arousal:float | None = None, valence:float | None = None, dominance:float | None = None, intimacy:float | None = None, conflict_state:ConflictState | None = None, conflict_trigger:str | None = None, ignored_message_count:int | None = None,)>EmotionalStateModel | None:get_current_state,save_state:","get_state_history:219:async (self, user_id:UUID, days:int = 7, limit:int = 100,)>list[EmotionalStateModel]:_row_to_state:","get_conflict_history:254:async (self, user_id:UUID, days:int = 30,)>list[EmotionalStateModel]:_row_to_state:","delete_state:285:async (self, state_id:UUID)>bool::","delete_user_states:305:async (self, user_id:UUID)>int::","_row_to_state:327:(self, row:dict[str, Any])>EmotionalStateModel::"]]}],"nikita/life_simulation/__init__.py":["p",["__getattr__:51:(name:str)::Lazy import for components."]],"nikita/life_simulation/entity_manager.py":["p",["load_entity_config:37:()>dict[str, list[dict[str, str]]]:_get_default_entities_config:","_get_default_entities_config:53:()>dict[str, list[dict[str, str]]]::","get_default_entities:72:()>list[dict[str, Any]]:load_entity_config:","get_entity_manager:317:()>EntityManager::"],{"EntityManager":["105",["__init__:121:(self, store:EventStore | None = None)>None::","seed_entities:129:async (self, user_id:UUID)>list[NikitaEntity]::","get_entities_by_type:167:async (self, user_id:UUID, entity_type:EntityType)>list[NikitaEntity]:get_entities_by_type:","get_all_entities:179:async (self, user_id:UUID)>list[NikitaEntity]::","get_colleagues:190:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_friends:197:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_places:204:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_projects:211:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","add_entity:218:async (self, entity:NikitaEntity)>NikitaEntity::","entity_exists:229:async (self, user_id:UUID, name:str)>bool:entity_exists:","get_entity_names:241:async (self, user_id:UUID)>dict[EntityType, list[str]]::","get_entity_context:263:async (self, user_id:UUID)>str::"]]}],"nikita/life_simulation/event_generator.py":["p",["get_event_generator:332:()>EventGenerator::"],{"GeneratedEvent":["36",[]],"GeneratedEventList":["49",[]],"EventGenerator":["55",["__init__:72:(self, entity_manager:EntityManager | None = None, llm_client:Any | None = None,)>None::","generate_events_for_day:88:async (self, user_id:UUID, event_date:date, active_arcs:list[NarrativeArc] | None = None, recent_events:list[LifeEvent] | None = None,)>list[LifeEvent]:_build_generation_prompt,_call_llm,_convert_to_life_events:","_build_generation_prompt:130:(self, event_date:date, entity_names:dict[str, list[str]], active_arcs:list[NarrativeArc], recent_events:list[LifeEvent],)>str::"]]}],"nikita/life_simulation/models.py":["p",{"EmotionalImpact":["112",["to_dict:123:(self)>dict[str, float]::Convert to dictionary."]],"LifeEvent":["133",["validate_event_type_matches_domain:157:(cls, v:EventType, info:Any)>EventType::Ensure event_type is valid for the domain.","model_dump_for_db:166:(self)>dict[str, Any]:to_dict:Convert to database-compatible dictionary."]],"NarrativeArc":["184",["model_dump_for_db:203:(self)>dict[str, Any]::Convert to database-compatible dictionary."]],"NikitaEntity":["220",["model_dump_for_db:235:(self)>dict[str, Any]::Convert to database-compatible dictionary."]]}],"nikita/life_simulation/mood_calculator.py":["p",["get_mood_calculator:188:()>MoodCalculator::"],{"MoodState":["21",["to_dict:36:(self)>dict[str, float]::Convert to dictionary.","__post_init__:45:(self)::Clamp values to valid range."]],"MoodCalculator":["53",["__init__:71:(self, base_mood:MoodState | None = None)::","compute_from_events:81:(self, events:list[LifeEvent], decay_previous:bool = False)>MoodState::","compute_from_event:128:(self, event:LifeEvent)>MoodState:compute_from_events:","describe_mood:139:(self, mood:MoodState)>str::"]]}],"nikita/life_simulation/narrative_manager.py":["p",["get_narrative_manager:377:()>NarrativeArcManager::"],{"ArcProgressUpdate":["93",[]],"NarrativeArcManager":["101",["__init__:126:(self, store:EventStore | None = None)>None::","create_arc:140:async (self, user_id:UUID, arc_type:str, entities:list[str] | None = None, initial_state:str | None = None,)>NarrativeArc:_generate_initial_state:","progress_arc:181:async (self, arc_id:UUID, new_state:str,)>bool::","resolve_arc:203:async (self, arc_id:UUID, outcome:str, final_state:str | None = None,)>bool::","get_active_arcs:232:async (self, user_id:UUID)>list[NarrativeArc]:get_active_arcs:","check_arc_resolution:245:async (self, arc:NarrativeArc, days_active:int | None = None)>tuple[bool, str | None]::","maybe_resolve_arcs:282:async (self, user_id:UUID)>list[tuple[NarrativeArc, str]]:check_arc_resolution,get_active_arcs,resolve_arc:","maybe_create_arc:306:async (self, user_id:UUID, domain:EventDomain | None = None,)>NarrativeArc | None:create_arc,get_active_arcs:","_generate_initial_state:346:(self, arc_type:str, entities:list[str])>str::"]]}],"nikita/life_simulation/simulator.py":["p",["get_life_simulator:337:()>LifeSimulator::"],{"LifeSimulator":["31",["__init__:61:(self, store:EventStore | None = None, entity_manager:EntityManager | None = None, event_generator:EventGenerator | None = None, narrative_manager:NarrativeArcManager | None = None, mood_calculator:MoodCalculator | None = None,)>None::","initialize_user:77:async (self, user_id:UUID)>bool::","generate_next_day_events:102:async (self, user_id:UUID, target_date:date | None = None,)>list[LifeEvent]:get_active_arcs,get_recent_events,initialize_user:","get_today_events:165:async (self, user_id:UUID, max_events:int = 5,)>list[LifeEvent]::","get_recent_events:187:async (self, user_id:UUID, days:int = 7,)>list[LifeEvent]:get_recent_events:","get_current_mood:203:async (self, user_id:UUID, lookback_days:int = 3,)>MoodState:get_recent_events:","get_active_arcs:218:async (self, user_id:UUID)>list[NarrativeArc]:get_active_arcs:","get_events_for_context:234:async (self, user_id:UUID, max_today:int = 3, max_recent:int = 5,)>dict[str, Any]:_format_arc,_format_event,_summarize_mood,get_active_arcs,get_current_mood,get_recent_events,get_today_events:","_format_event:275:(self, event:LifeEvent)>str::","_format_arc:287:(self, arc:NarrativeArc)>str::","_summarize_mood:299:(self, mood:MoodState)>str::"]]}],"nikita/life_simulation/store.py":["p",["get_event_store:518:()>EventStore::"],{"EventStore":["36",["__init__:45:(self, session_factory:Callable | None = None)>None::","save_event:55:async (self, event:LifeEvent)>LifeEvent::","save_events:84:async (self, events:list[LifeEvent])>list[LifeEvent]:save_event:","get_event:97:async (self, event_id:UUID)>LifeEvent | None:_row_to_event:","get_events_for_date:120:async (self, user_id:UUID, event_date:date)>list[LifeEvent]:_row_to_event:","get_recent_events:150:async (self, user_id:UUID, days:int = 7)>list[LifeEvent]:_row_to_event:","get_events_by_domain:181:async (self, user_id:UUID, domain:EventDomain, days:int = 7)>list[LifeEvent]:_row_to_event:","delete_old_events:211:async (self, user_id:UUID, days_to_keep:int = 7)>int::","save_arc:235:async (self, arc:NarrativeArc)>NarrativeArc::","get_active_arcs:264:async (self, user_id:UUID)>list[NarrativeArc]:_row_to_arc:","update_arc_status:290:async (self, arc_id:UUID, status:ArcStatus, resolved_at:datetime | None = None,)>bool::","update_arc_state:317:async (self, arc_id:UUID, current_state:str)>bool::","save_entity:341:async (self, entity:NikitaEntity)>NikitaEntity::","save_entities:364:async (self, entities:list[NikitaEntity])>list[NikitaEntity]:save_entity:","get_entities:377:async (self, user_id:UUID)>list[NikitaEntity]:_row_to_entity:","get_entities_by_type:399:async (self, user_id:UUID, entity_type:EntityType)>list[NikitaEntity]:_row_to_entity:","entity_exists:421:async (self, user_id:UUID, name:str)>bool::","_row_to_event:444:(self, row:dict[str, Any])>LifeEvent::Convert database row to LifeEvent.","_row_to_arc:471:(self, row:dict[str, Any])>NarrativeArc::Convert database row to NarrativeArc.","_row_to_entity:501:(self, row:dict[str, Any])>NikitaEntity::Convert database row to NikitaEntity."]]}],"nikita/onboarding/handoff.py":["p",["generate_first_nikita_message:178:(profile:UserOnboardingProfile, user_name::generate:"],{"HandoffResult":["30",[]],"FirstMessageGenerator":["117",["generate:124:(self, profile:UserOnboardingProfile, user_name:str = \"you\")>str::"]],"HandoffManager":["193",["__init__:202:(self)>None::Initialize the manager.","execute_handoff:213:async (self, user_id:UUID, telegram_id:int, profile:UserOnboardingProfile, call_id:str | None = None, user_name:str = \"friend\",)>HandoffResult:_generate_profile_summary,_send_first_message,generate:","transition:279:async (self, user_id:UUID, call_id:str, profile:UserOnboardingProfile, user_name:str = \"friend\",)>HandoffResult:_generate_profile_summary,_get_user_telegram_id,_send_first_message,_update_user_status,execute_handoff,generate,transition:","_generate_profile_summary:347:(self, profile:UserOnboardingProfile)>str::Generate a summary of the profile for Nikita's context.","_update_user_status:375:async (self, user_id:UUID, status:OnboardingStatus, call_id:str,)>None::","_get_user_telegram_id:397:async (self, user_id:UUID)>int | None::Get user's Telegram ID from database.","_send_first_message:413:async (self, telegram_id:int, message:str,)>dict[str, Any]::"]]}],"nikita/onboarding/meta_nikita.py":["p",{"TTSSettings":["31",[]],"MetaNikitaConfig":["307",["__init__:318:(self, agent_id:str | None = None, voice_id:str | None = None,)::","get_agent_config:333:(self, user_id:UUID, user_name:str = \"friend\",)>dict[str, Any]:_personalize_first_message:","_personalize_first_message:366:(self, user_name:str)>str::Personalize first message with user's name if known."]]}],"nikita/onboarding/models.py":["p",{"UserOnboardingProfile":["76",["validate_darkness_level:132:(cls, v:int)>int::","validate_pacing_weeks:143:(cls, v:int)>int::","is_complete:152:(self)>bool::","to_context_dict:159:(self)>dict[str, Any]::","get_darkness_description:177:(self)>str::Get human-readable description of darkness level.","get_pacing_description:188:(self)>str::Get human-readable description of pacing."]],"ProfileFieldUpdate":["195",["validate_field_name:206:(cls, v:str)>str::Validate field_name is a valid profile field."]],"OnboardingCallRequest":["223",[]],"OnboardingCallResponse":["231",[]]}],"nikita/onboarding/preference_config.py":["p",["get_darkness_config:218:(level:int)>DarknessLevelConfig::","get_pacing_config:238:(weeks:int)>PacingConfig::","get_conversation_style_config:258:(style:ConversationStyle)>ConversationStyleConfig::Get conversation style configuration."],{"DarknessLevelConfig":["23",[]],"PacingConfig":["41",[]],"ConversationStyleConfig":["57",[]],"BehavioralConfig":["70",[]],"ConfigurationResult":["81",[]],"PreferenceConfigurator":["265",["__init__:272:(self)>None::Initialize the configurator.","configure:282:(self, user_id:UUID, darkness_level:int | None = None, pacing_weeks:int | None = None, conversation_style:ConversationStyle | None = None,)>ConfigurationResult:configure:","get_preferences:341:(self, user_id:UUID)>UserOnboardingProfile::Get user's preference profile.","get_conversation_style_config:348:(self, user_id:UUID)>ConversationStyleConfig:get_conversation_style_config,get_preferences:Get conversation style configuration for user.","get_behavioral_config:354:(self, user_id:UUID)>BehavioralConfig:get_conversation_style_config,get_darkness_config,get_pacing_config,get_preferences:Get combined behavioral configuration for user.","to_dict:374:(self, user_id:UUID)>dict[str, Any]:get_preferences:Convert preferences to dictionary."]]}],"nikita/onboarding/profile_collector.py":["p",["extract_timezone_from_location:351:(location:str)>str | None::","extract_hobbies:380:(text:str)>list[str]::","infer_personality_type:415:(text:str)>PersonalityType::"],{"CollectionResult":["149",[]],"TimezoneValidator":["158",["is_valid:161:(self, timezone:str)>bool::Check if timezone is in known list.","get_known_timezones:167:(self)>set[str]::Return set of known timezone strings."]],"ProfileCollector":["172",["__init__:179:(self)>None::Initialize the collector.","collect:186:(self, user_id:UUID, field:ProfileField, value:Any)>CollectionResult:_set_field,_validate_and_process,collect:","_validate_and_process:228:(self, field:ProfileField, value:Any)>Any::Validate and process a field value.","_set_field:263:(self, profile:UserOnboardingProfile, field:ProfileField, value:Any)>None::Set a field value on the profile.","get_profile:282:(self, user_id:UUID)>UserOnboardingProfile:get_profile:","is_complete:299:(self, user_id:UUID)>bool:get_profile:Check if profile has all required fields.","get_missing_fields:313:(self, user_id:UUID)>set[ProfileField]:get_profile:Get set of missing required fields.","get_completeness_percentage:327:(self, user_id:UUID)>float:get_profile:Calculate profile completeness as percentage."]]}],"nikita/onboarding/server_tools.py":["p",{"OnboardingToolRequest":["45",[]],"OnboardingToolResponse":["53",[]],"OnboardingServerToolHandler":["62",["__init__:69:(self, session:AsyncSession | None = None)>None::","_get_session:80:async (self)>AsyncSession::Get a database session.","handle_request:87:async (self, request:OnboardingToolRequest)>OnboardingToolResponse:collect_profile,complete_onboarding,configure_preferences,end_call:","collect_profile:134:async (self, user_id:UUID, field_name:str, value:str,)>OnboardingToolResponse:_get_or_create_profile,_persist_profile_to_db:","configure_preferences:212:async (self, user_id:UUID, darkness_level:int | None = None, pacing_weeks:int | None = None, conversation_style:str | None = None,)>OnboardingToolResponse:_get_or_create_profile,_persist_profile_to_db:","complete_onboarding:288:async (self, user_id:UUID, call_id:str, notes:str | None = None,)>OnboardingToolResponse:_get_or_create_profile,_trigger_handoff,complete_onboarding:","end_call:348:async (self, user_id:UUID, reason:str = \"onboarding_complete\",)>OnboardingToolResponse::","_get_or_create_profile:373:(self, user_id:UUID)>UserOnboardingProfile::Get existing in-memory profile or create a new one.","_persist_profile_to_db:382:async (self, user_id:UUID, profile:UserOnboardingProfile)>None::","_trigger_handoff:400:async (self, user_id:UUID, profile:UserOnboardingProfile)>None::"]]}],"nikita/onboarding/voice_flow.py":["p",{"OnboardingState":["36",["can_proceed_to:54:(self, next_state:str)>bool::Check if transition to next_state is valid."]],"VoiceOnboardingFlow":["59",["__init__:69:(self)>None::Initialize the flow.","is_already_onboarded:76:async (self, user_id:UUID)>bool:_get_user_onboarding_status:","should_start_onboarding:92:async (self, user_id:UUID)>bool:_get_user_onboarding_status,is_already_onboarded:","get_phone_request_message:112:(self)>str::","is_valid_phone:127:(self, phone:str)>bool::","normalize_phone:146:(self, phone:str)>str::Normalize phone number to E.164-ish format.","process_phone_input:157:async (self, user_id:UUID, phone:str)>dict[str, Any]:_save_phone_number,_update_state,get_ready_confirmation_message,is_valid_phone,normalize_phone:","get_ready_confirmation_message:198:(self)>str::","is_confirmation:215:(self, text:str)>bool::","is_deferral:229:(self, text:str)>bool::","process_ready_response:244:async (self, user_id:UUID, response:str)>dict[str, Any]:_get_onboarding_state,_initiate_call,_save_deferred_state,is_confirmation,is_deferral:","initiate_onboarding_call:311:async (self, user_id:UUID, phone:str, user_name:str = \"friend\")>dict[str, Any]:_call_elevenlabs,_update_onboarding_status,_update_state:","handle_message:371:async (self, user_id:UUID, text:str)>dict[str, Any]:_get_onboarding_state,process_phone_input,process_ready_response:","get_current_step_message:403:async (self, user_id:UUID)>str:_get_onboarding_state,get_phone_request_message,get_ready_confirmation_message:","can_resume_onboarding:435:async (self, user_id:UUID)>bool:_get_onboarding_state:Check if user has deferred onboarding to resume.","resume_onboarding:440:async (self, user_id:UUID)>dict[str, Any]:_update_state,get_ready_confirmation_message:Resume deferred onboarding.","handle_onboard_command:448:async (self, user_id:UUID)>dict[str, Any]:can_resume_onboarding,get_phone_request_message,is_already_onboarded,resume_onboarding:Handle /onboard command to resume deferred onboarding.","_get_user_onboarding_status:466:async (self, user_id:UUID)>OnboardingStatus | None::Get user's onboarding status from database.","_get_onboarding_state:471:async (self, user_id:UUID)>OnboardingState | None::Get user's current onboarding state.","_update_state:481:async (self, user_id:UUID, new_state:str, phone_number:str | None = None, call_id:str | None = None,)>None::Update user's onboarding state.","_save_phone_number:497:async (self, user_id:UUID, phone:str)>None::Save phone number to database.","_save_deferred_state:502:async (self, user_id:UUID)>None:_update_state:Save deferred state.","_update_onboarding_status:509:async (self, user_id:UUID, status:OnboardingStatus)>None::Update user's onboarding status in database.","_initiate_call:514:async (self, user_id:UUID, phone:str)>dict[str, Any]:initiate_onboarding_call:Internal call initiation wrapper.","_call_elevenlabs:520:async (self, phone:str, agent_config:dict[str, Any])>dict[str, Any]::Call ElevenLabs API to initiate call."]]}],"nikita/post_processing/adapter.py":["p",["process_conversations:57:async (session:AsyncSession, conversation_ids::_get_first_error,_get_stage_reached:","_get_stage_reached:141:(result:ProcessingResult)>str::Get the last successfully completed stage.","_get_first_error:149:(result:ProcessingResult)>str | None::Get the first error message from failed steps."],{"AdapterResult":["31",[]]}],"nikita/post_processing/graph_updater.py":["p",["get_graph_updater:188:()>GraphUpdater::"],{"GraphUpdater":["21",["__init__:36:(self, memory_client_factory:Callable | None = None,)>None::","update:50:async (self, user_id:UUID, conversation_id:UUID, transcript:list[dict[str, str]] | None = None,)>tuple[int, int]:_process_assistant_message,_process_user_message:","_process_user_message:100:async (self, memory:NikitaMemory, content:str, conversation_id:UUID,)>None::","_process_assistant_message:132:async (self, memory:NikitaMemory, content:str, conversation_id:UUID,)>None::","add_user_fact:156:async (self, user_id:UUID, fact:str, confidence:float = 0.8,)>None:add_user_fact:","add_relationship_event:172:async (self, user_id:UUID, description:str, event_type:str = \"general\",)>None::"]]}],"nikita/post_processing/layer_composer.py":["p",["get_layer_composer:552:()>LayerComposer::"],{"LayerComposer":["52",["__init__:84:(self, session_factory:Callable | None = None, layer2_composer:Any | None = None, layer3_composer:Any | None = None, layer4_computer:Any | None = None, layer5_injector:Any | None = None, life_simulator:Any | None = None, state_computer:StateComputer | None = None,)>None::","layer2_composer:105:(self)>Any::Get Layer 2 composer (lazy load).","layer3_composer:112:(self)>Any::Get Layer 3 composer (lazy load).","layer4_computer:119:(self)>Any::Get Layer 4 computer (lazy load).","layer5_injector:126:(self)>Any::Get Layer 5 injector (lazy load).","life_simulator:133:(self)>Any::Get LifeSimulator (lazy load).","state_computer:142:(self)>StateComputer::","compose:154:async (self, user_id:UUID,)>ContextPackage:_compute_emotional_state,_create_minimal_package,_get_life_events,_get_relationship_events,_get_time_of_day,_get_today_summary,_get_user_facts,_get_week_summaries,_hours_since,compose:","_create_minimal_package:260:(self, user_id:UUID)>ContextPackage::","_compute_emotional_state:280:async (self, user_id:UUID, user:Any,)>EmotionalStateModel::","_get_time_of_day:344:(self, dt:datetime)>str::","_hours_since:363:(self, past:datetime, now:datetime)>float::","_get_user_facts:376:async (self, user_id:UUID)>list[str]::","_get_relationship_events:389:async (self, user_id:UUID)>list[str]::","_get_today_summary:407:async (self, summary_repo:DailySummaryRepository, user_id:UUID, now:datetime,)>str | None::","_get_week_summaries:431:async (self, summary_repo:DailySummaryRepository, user_id:UUID, now:datetime,)>list[str]::","_get_nikita_state:458:async (self, thought_repo:NikitaThoughtRepository, user_id:UUID,)>tuple[EmotionalState, float]::","_get_life_events:499:async (self, thought_repo:NikitaThoughtRepository, user_id:UUID,)>list[str]::"]]}],"nikita/post_processing/pipeline.py":["p",["get_post_processing_pipeline:611:()>PostProcessingPipeline::"],{"ProcessingStep":["49",["mark_running:68:(self)>None::Mark step as running.","mark_completed:73:(self, metadata:dict[str, Any] | None = None)>None::Mark step as completed.","mark_failed:80:(self, error:str)>None::Mark step as failed.","mark_skipped:86:(self, reason:str)>None::Mark step as skipped."]],"ProcessingResult":["94",["failed_steps:116:(self)>list[ProcessingStep]::Get list of failed steps.","completed_steps:121:(self)>list[ProcessingStep]::Get list of completed steps.","partial_success:126:(self)>bool::True if some steps completed despite failures."]],"PostProcessingPipeline":["131",["__init__:165:(self, graph_updater:Any | None = None, summary_generator:Any | None = None, life_simulator:Any | None = None, state_computer:Any | None = None, conflict_generator:Any | None = None, touchpoint_scheduler:Any | None = None, layer_composer:Any | None = None, package_store:PackageStore | None = None,)>None::","graph_updater:188:(self)>Any::Get graph updater (lazy load).","summary_generator:197:(self)>Any::Get summary generator (lazy load).","life_simulator:206:(self)>Any::Get life simulator (lazy load).","state_computer:215:(self)>Any::Get emotional state computer (lazy load) - Spec 023.","conflict_generator:224:(self)>Any::Get conflict generator (lazy load) - Spec 027.","touchpoint_scheduler:233:(self)>Any::Get touchpoint scheduler (lazy load) - Spec 025.","layer_composer:242:(self)>Any::Get layer composer (lazy load).","package_store:251:(self)>PackageStore::Get package store (lazy load).","process:262:async (self, user_id:UUID, conversation_id:UUID, transcript:list[dict[str, str]] | None = None,)>ProcessingResult:_run_conflict_check,_run_emotional_state_update,_run_graph_update,_run_layer_composition,_run_life_simulation,_run_package_storage,_run_summary_generation,_run_touchpoint_scheduling:","_run_graph_update:350:async (self, user_id:UUID, conversation_id:UUID, transcript:list[dict[str, str]] | None, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:Run graph update step.","_run_summary_generation:371:async (self, user_id:UUID, conversation_id:UUID, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:Run summary generation step.","_run_life_simulation:390:async (self, user_id:UUID, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:","_run_emotional_state_update:409:async (self, user_id:UUID, transcript:list[dict[str, str]] | None, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:","_run_conflict_check:470:async (self, user_id:UUID, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:","_run_touchpoint_scheduling:529:async (self, user_id:UUID, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:","_run_layer_composition:579:async (self, user_id:UUID, step:ProcessingStep,)>ContextPackage | None:mark_completed,mark_failed,mark_running:Run layer composition step.","_run_package_storage:596:async (self, user_id:UUID, package:ContextPackage, step:ProcessingStep,)>None:mark_completed,mark_failed,mark_running:Run package storage step."]]}],"nikita/post_processing/summary_generator.py":["p",["get_summary_generator:331:()>SummaryGenerator::"],{"SummaryGenerator":["25",["__init__:39:(self, session_factory:Callable | None = None,)>None::","generate:52:async (self, user_id:UUID, conversation_id:UUID,)>tuple[bool, bool]:_update_daily_summary,_update_weekly_summary:","_update_daily_summary:105:async (self, summary_repo:DailySummaryRepository, conversation_repo:ConversationRepository, user_id:UUID, summary_date:date, conversation:Any,)>bool:_count_conversations_today,_detect_emotional_tone,_generate_summary_text:","_update_weekly_summary:159:async (self, summary_repo:DailySummaryRepository, user_id:UUID, week_end:date,)>bool::","_count_conversations_today:221:async (self, conversation_repo:ConversationRepository, user_id:UUID, summary_date:date,)>int::","_generate_summary_text:242:(self, conversation:Any)>str::","_detect_emotional_tone:258:(self, conversation:Any)>str::","generate_daily:275:async (self, user_id:UUID, summary_date:date | None = None,)>bool::"]]}],"nikita/post_processing/trigger.py":["p",["is_pipeline_enabled:25:()>bool::","trigger_pipeline:39:async (user_id:UUID, conversation_id::list[dict[str, str]] | None = None,)>ProcessingResult | None:is_pipeline_enabled:","trigger_pipeline_background:102:async (user_id:UUID, conversation_id::list[dict[str, str]] | None = None,)>None:trigger_pipeline:","add_pipeline_trigger_to_background_tasks:127:(background_tasks:any, user_id::UUID, transcript:list[dict[str, str]] | None = None,)>None:add_pipeline_trigger_to_background_tasks,close_conversation,is_pipeline_enabled:"]],"nikita/text_patterns/emoji_processor.py":["p",{"EmojiProcessor":["13",["__init__:39:(self, config:EmojiConfig | None = None)::","process:51:(self, text:str, context:EmojiContext = EmojiContext.NEUTRAL,)>tuple[str, int]:_add_emoji,_count_emojis,_validate_existing_emojis:","_validate_existing_emojis:75:(self, text:str)>tuple[str, int]:_count_emojis:","_count_emojis:116:(self, text:str)>int::","_add_emoji:136:(self, text:str, context:EmojiContext,)>tuple[str, int]::","validate_only:161:(self, text:str)>tuple[str, bool]:_validate_existing_emojis:"]]}],"nikita/text_patterns/length_adjuster.py":["p",{"LengthAdjuster":["16",["__init__:32:(self, configs:dict[MessageContext, LengthConfig] | None = None)::","adjust:44:(self, text:str, context:MessageContext = MessageContext.CASUAL,)>str:_get_config,_truncate:","_get_config:70:(self, context:MessageContext)>LengthConfig::","_truncate:83:(self, text:str, max_chars:int)>str::","get_target_length:127:(self, context:MessageContext)>tuple[int, int]:_get_config:","is_within_bounds:139:(self, text:str, context:MessageContext)>bool:_get_config:"]]}],"nikita/text_patterns/message_splitter.py":["p",{"MessageSplitter":["13",["__init__:26:(self, config:SplitConfig | None = None)::","split:34:(self, text:str)>list[SplitMessage]:_calculate_delay,_find_split_points:","_find_split_points:60:(self, text:str)>list[str]:_merge_short_sentences,_split_at_markers,split:","_merge_short_sentences:78:(self, sentences:list[str])>list[str]::","_split_at_markers:108:(self, text:str)>list[str]:_force_split,split:","_force_split:156:(self, text:str)>list[str]:split:","_calculate_delay:188:(self)>int::","should_split:197:(self, text:str)>bool::","get_total_delay:208:(self, messages:list[SplitMessage])>int::"]]}],"nikita/text_patterns/models.py":["p",["get_length_config:177:(context:MessageContext)>LengthConfig::Get length configuration for a context."],{"EmojiConfig":["33",["validate_emoji_list:77:(cls, v:list[str])>list[str]::Ensure emoji lists are not empty.","validate_contexts:85:(cls, v:dict[str, list[str]])>dict[str, list[str]]::Ensure contexts have valid emojis.","get_all_allowed:94:(self)>list[str]::Get all allowed emojis and emoticons.","get_context_emojis:98:(self, context:EmojiContext)>list[str]::Get emojis appropriate for a context."]],"LengthConfig":["103",["validate_max_greater_than_min:134:(cls, v:int, info)>int::Ensure max_chars >= min_chars."]],"SplitConfig":["182",["validate_delay_range:213:(cls, v:tuple[int, int])>tuple[int, int]::Ensure delay range is valid."]],"PunctuationConfig":["223",[]],"SplitMessage":["262",[]],"TextPatternResult":["284",["message_count:323:(self)>int::Get the number of output messages.","get_messages_for_sending:327:(self)>list[tuple[str, int]]::Get messages as (content, delay_ms) tuples for sending."]]}],"nikita/text_patterns/processor.py":["p",{"TextPatternProcessor":["28",["__init__:53:(self, emoji_config:EmojiConfig | None = None, split_config:SplitConfig | None = None, punctuation_config:PunctuationConfig | None = None, length_configs:dict[MessageContext, LengthConfig] | None = None,)::","process:117:(self, text:str, context:MessageContext | None = None, emoji_context:EmojiContext | None = None,)>TextPatternResult:_context_to_emoji_context,_detect_context,process:","_detect_context:161:(self, text:str)>MessageContext::","_context_to_emoji_context:186:(self, context:MessageContext)>EmojiContext::","process_for_sending:208:(self, text:str, context:MessageContext | None = None,)>list[tuple[str, int]]:process:","from_yaml_config:228:(cls, emoji_path:str | None = None, patterns_path:str | None = None,)>\"TextPatternProcessor\"::"]]}],"nikita/text_patterns/punctuation.py":["p",{"PunctuationProcessor":["13",["__init__:29:(self, config:PunctuationConfig | None = None)::","apply:37:(self, text:str, is_casual:bool = True)>str:_add_trailing_dots,_apply_lowercase,_normalize_laugh:","_apply_lowercase:63:(self, text:str)>str::","_add_trailing_dots:84:(self, text:str)>str::","_normalize_laugh:105:(self, text:str)>str::","add_exclamation:129:(self, text:str, force:bool = False)>str::","ensure_ending_punctuation:154:(self, text:str)>str::"]]}],"nikita/touchpoints/engine.py":["p",["deliver_due_touchpoints:446:async (session:\"AsyncSession\")>list[DeliveryResult]::"],{"DeliveryResult":["39",["__init__:49:(self, touchpoint_id:UUID, success:bool, delivered_at:datetime | None = None, error:str | None = None, skipped_reason:str | None = None,)::"]],"TouchpointEngine":["65",["__init__:85:(self, session:\"AsyncSession\", config:TouchpointConfig | None = None, min_gap_minutes:int | None = None,)::","deliver_due_touchpoints:103:async (self)>list[DeliveryResult]:_deliver_single:","_deliver_single:135:async (self, touchpoint:ScheduledTouchpoint)>DeliveryResult:_evaluate_silence,_generate_message,_send_telegram_message,_should_skip_for_dedup:","_should_skip_for_dedup:189:async (self, touchpoint:ScheduledTouchpoint)>bool::","_evaluate_silence:219:async (self, touchpoint:ScheduledTouchpoint)>SilenceDecision:_check_conflict_active,_load_emotional_state:","_load_emotional_state:242:async (self, user_id:UUID)>dict[str, Any] | None::","_check_conflict_active:260:async (self, user_id:UUID)>bool::","_generate_message:274:async (self, touchpoint:ScheduledTouchpoint)>str::","_send_telegram_message:291:async (self, touchpoint:ScheduledTouchpoint)>bool:_get_chat_id:","_get_chat_id:318:async (self, user_id:UUID)>int | None::","evaluate_and_schedule_for_user:341:async (self, user_id:UUID, current_time:datetime | None = None,)>ScheduledTouchpoint | None:_compute_delivery_time,_compute_hours_since_contact:","_compute_hours_since_contact:402:(self, user)>float::","_compute_delivery_time:421:(self, trigger_context:TriggerContext, current_time:datetime,)>datetime::"]]}],"nikita/touchpoints/generator.py":["p",["generate_touchpoint_message:302:async (session:\"AsyncSession\", user_id::TriggerContext, life_event:str | None = None, emotional_state:dict[str, Any] | None = None, recent_summary:str | None = None,)>str:generate:"],{"MessageGenerator":["26",["__init__:36:(self, session:\"AsyncSession\"):_load_template:","_load_template:62:(self)>None:_get_default_template:Load proactive message template.","_get_default_template:70:(self)>str::Get default template if file not found."]]}],"nikita/touchpoints/models.py":["p",["get_config_for_chapter:140:(chapter:int)>TouchpointConfig::"],{"TriggerContext":["32",["validate_time_slot_value:57:(cls, v:str | None)>str | None::Validate time_slot values.","validate_time_slot_required:64:(self)>\"TriggerContext\"::Validate time_slot is required for TIME triggers.","to_dict:70:(self)>dict[str, Any]::Convert to dictionary for storage."]],"TouchpointConfig":["75",["validate_rate_max:102:(cls, v:float, info)>float::Ensure max >= min."]],"ScheduledTouchpoint":["152",["id:184:(self)>UUID::Alias for touchpoint_id for convenience.","chapter:189:(self)>int::Get chapter from trigger context.","is_due:194:(self)>bool::Check if touchpoint is due for delivery.","mark_delivered:200:(self)>\"ScheduledTouchpoint\"::Mark touchpoint as delivered.","mark_skipped:209:(self, reason:str)>\"ScheduledTouchpoint\"::Mark touchpoint as strategically skipped."]]}],"nikita/touchpoints/scheduler.py":["p",["get_hours_since_interaction:352:(last_interaction_at:datetime | None, current_time:::"],{"TouchpointScheduler":["24",["__init__:37:(self, default_config:TouchpointConfig | None = None)::","get_config:45:(self, chapter:int)>TouchpointConfig::","evaluate_user:64:(self, user_id:UUID, chapter:int, user_timezone:str = \"UTC\", last_interaction_at:datetime | None = None, current_time:datetime | None = None, recent_touchpoints:list[ScheduledTouchpoint] | None = None,)>list[TriggerContext]:_can_trigger_after_recent,_evaluate_gap_trigger,_evaluate_time_trigger,get_config:","_can_trigger_after_recent:118:(self, config:TouchpointConfig, recent_touchpoints:list[ScheduledTouchpoint], current_time:datetime,)>bool::","_evaluate_time_trigger:151:(self, chapter:int, user_timezone:str, current_time:datetime, config:TouchpointConfig,)>TriggerContext | None:_get_current_time_slot,_get_initiation_rate,_get_user_local_time,_should_trigger:","_evaluate_gap_trigger:189:(self, chapter:int, last_interaction_at:datetime, current_time:datetime, config:TouchpointConfig,)>TriggerContext | None:_get_initiation_rate,_should_trigger:","evaluate_event_trigger:226:(self, chapter:int, event_id:str, event_type:str, event_description:str, importance:float = 0.5, emotional_intensity:float = 0.5, emotional_state:dict[str, Any] | None = None,)>TriggerContext | None:_get_initiation_rate,_should_trigger,get_config:","schedule:269:(self, user_id:UUID, trigger_context:TriggerContext, delivery_delay_minutes:int = 0, message_content:str = \"\",)>ScheduledTouchpoint::","_get_user_local_time:291:(self, utc_time:datetime, user_timezone:str)>datetime::","_get_current_time_slot:310:(self, hour:int, config:TouchpointConfig)>str | None::","_get_initiation_rate:326:(self, config:TouchpointConfig)>float::","_should_trigger:337:(self, probability:float)>bool::"]]}],"nikita/touchpoints/silence.py":["p",["should_apply_silence:259:(chapter:int, emotional_state::bool = False,)>SilenceDecision:apply_strategic_silence:"],{"SilenceDecision":["31",[]],"StrategicSilence":["46",["__init__:71:(self, custom_rates:dict[int, float] | None = None)::","apply_strategic_silence:85:(self, chapter:int, emotional_state:dict[str, Any] | None = None, conflict_active:bool = False, random_seed:int | None = None,)>SilenceDecision:_compute_emotional_modifier:","_compute_emotional_modifier:157:(self, emotional_state:dict[str, Any] | None)>float::","get_silence_rate:197:(self, chapter:int)>float::","should_skip_for_emotional_state:210:(self, emotional_state:dict[str, Any] | None)>bool::","record_skip:234:(self, decision:SilenceDecision, touchpoint_id:str | None = None,)>dict[str, Any]::"]]}],"nikita/touchpoints/store.py":["p",{"TouchpointStore":["22",["__init__:31:(self, session:AsyncSession)::","create:49:async (self, touchpoint:ScheduledTouchpoint | None = None, *, user_id:UUID | None = None, trigger_type:TriggerType | None = None, trigger_context:dict | None = None, delivery_at:datetime | None = None, chapter:int | None = None, message_content:str | None = None,)>ScheduledTouchpoint:_to_pydantic:","get:107:async (self, touchpoint_id:UUID)>ScheduledTouchpoint | None:_to_pydantic:","get_due_touchpoints:124:async (self, limit:int = 50)>list[ScheduledTouchpoint]:_to_pydantic:","get_user_touchpoints:153:async (self, user_id:UUID, since:datetime | None = None, include_delivered:bool = False,)>list[ScheduledTouchpoint]:_to_pydantic:","get_recent_touchpoints:186:async (self, user_id:UUID, since:datetime | None = None, hours:float = 24.0, exclude_id:UUID | None = None,)>list[ScheduledTouchpoint]:get_user_touchpoints:","mark_delivered:212:async (self, touchpoint_id:UUID)>ScheduledTouchpoint | None:_to_pydantic:","mark_skipped:237:async (self, touchpoint_id:UUID, reason:str,)>ScheduledTouchpoint | None:_to_pydantic:","mark_failed:262:async (self, touchpoint_id:UUID,)>ScheduledTouchpoint | None:_to_pydantic:","delete:284:async (self, touchpoint_id:UUID)>bool:delete:","count_pending:304:async (self, user_id:UUID | None = None)>int::","_to_pydantic:328:(self, db_model:ScheduledTouchpointDB)>ScheduledTouchpoint::"]]}],"portal/sr/app/admin/prompts/page.tsx":["t",["PromptsViewingPage:10:()::","formatDate:23:(dateStr:string | null)::","formatTokens:28:(count:number)::"]],"portal/sr/app/admin/text/page.tsx":["t",["TextMonitoringPage:15:()::","formatDate:24:(dateStr:string)::"]],"portal/sr/app/admin/voice/page.tsx":["t",["VoiceMonitoringPage:15:()::","formatDuration:26:(seconds:number | null)::","formatDate:33:(dateStr:string)::","formatUnixTime:37:(unix:number)::"]],"portal/sr/app/api/voice/[...slug]/route.ts":["t",["GET:7:async (request:NextRequest, { params }::Promise<{ slug:string[] }> })::","POST:32:async (request:NextRequest, { params }::Promise<{ slug:string[] }> })::"]],"portal/sr/app/test/voice/page.tsx":["t",["VoiceTestPage:26:()::"]],"s/configure_meta_nikita_tools.py":["p",["get_api_key:31:()>str::","build_tools_config:48:()>list[dict]::","get_current_agent_config:274:async (client:httpx.AsyncClient, api_key:::Fetch current agent configuration.","update_agent_tools:285:async (client:httpx.AsyncClient, api_key::list[dict])>dict::Update agent with new tools configuration.","update_agent_prompt_and_first_message:317:async (client:httpx.AsyncClient, api_key:::Update agent system prompt and first message.","add_dynamic_variables:417:async (client:httpx.AsyncClient, api_key:::Add dynamic variables to the agent configuration.","main:454:async ():add_dynamic_variables,build_tools_config,get_api_key,get_current_agent_config,update_agent_prompt_and_first_message,update_agent_tools:"]],"s/test-voice-api.sh":["s",["run_test:0:()::"]],"s/verify-voice-call.py":["p",["format_markdown:593:(report:VerificationReport)>str::Format report as markdown.","main:665:async ()::"],{"CheckResult":["42",[]],"DatabaseChecks":["52",["all_passed:64:(self)>bool::Check if all database checks passed."]],"Neo4jChecks":["77",["all_passed:85:(self)>bool::Check if all Neo4j checks passed."]],"ElevenLabsChecks":["92",["all_passed:99:(self)>bool::Check if all ElevenLabs checks passed."]],"VerificationReport":["106",["overall_status:118:(self)>str::Get overall verification status.","to_dict:126:(self)>dict[str, Any]::Convert to dictionary for JSON output."]],"VoiceCallVerifier":["166",["__init__:169:(self, user_id:str, session_id:str | None = None)::","verify_all:184:async (self)>VerificationReport:_verify_database,_verify_elevenlabs,_verify_neo4j:Run all verification checks.","_verify_database:201:async (self)>None:_check_conversation,_check_engagement,_check_metrics,_check_score_history,_check_user_exists:Run database verification checks.","_check_user_exists:228:async (self, session)>None::Check if user exists and was recently updated.","_check_metrics:279:async (self, session)>None::Check user metrics exist and values.","_check_conversation:311:async (self, session)>None::Check conversation was stored.","_check_score_history:368:async (self, session)>None::Check score history was recorded.","_check_engagement:407:async (self, session)>None::Check engagement state.","_verify_neo4j:437:async (self)>None::Run Neo4j verification checks.","_verify_elevenlabs:508:async (self)>None::Run ElevenLabs API verification checks."]]}],"t/agents/voice/conftest.py":["p",["user_chapter_1:33:()>MagicMock::","user_chapter_3:53:()>MagicMock::","user_chapter_5:73:()>MagicMock::","user_boss_fight:93:()>MagicMock::","user_game_over:113:()>MagicMock::","transcript_positive:138:()>TranscriptData::","transcript_negative:187:()>TranscriptData::","transcript_fact_rich:229:()>TranscriptData::","transcript_empty:280:()>TranscriptData::","transcript_short:292:()>TranscriptData::","mock_settings:325:()>MagicMock::","mock_db_session:346:()>AsyncMock::","mock_elevenlabs_conversation_response:365:()>dict[str, Any]::","mock_elevenlabs_agent_config:407:()>dict[str, Any]::","mock_elevenlabs_client:431:(mock_elevenlabs_conversation_response, mock_elevenlabs_agent_config)>MagicMock::","mock_memory_client:523:()>MagicMock::","patch_settings:550:(mock_settings)::","patch_elevenlabs_client:557:(mock_elevenlabs_client)::","patch_memory_client:571:(mock_memory_client)::"]],"t/agents/voice/test_call_lifecycle_e2e.py":["p",{"TestCallInitiation":["35",["voice_service:39:(self, mock_settings)::Get VoiceService instance.","test_initiate_creates_session:46:async (self, voice_service, user_chapter_3, mock_settings)::Test that call initiation creates a session with valid ID.","test_initiate_loads_user_context:70:async (self, voice_service, user_chapter_3)::AC-T006.4: Loads user context for initial greeting customization.","test_initiate_returns_valid_config:92:async (self, voice_service, user_chapter_3, mock_settings)::Test that initiation returns complete ElevenLabs config.","test_initiate_sets_dynamic_variables:116:async (self, voice_service, user_chapter_3)::Test that dynamic variables are properly set for prompt interpolation."]],"TestServerTools":["142",["tool_handler:146:(self, mock_settings)::Get ServerToolHandler instance.","test_server_tool_get_context:153:async (self, tool_handler, user_chapter_3, mock_memory_client)::Test GET_CONTEXT returns user context for conversation.","test_server_tool_get_memory:189:async (self, tool_handler, user_chapter_3, mock_memory_client)::Test GET_MEMORY queries Graphiti for relevant memories.","test_server_tool_score_turn:218:async (self, tool_handler, user_chapter_3)::Test SCORE_TURN analyzes conversation exchange.","test_server_tool_update_memory:269:async (self, tool_handler, user_chapter_3, mock_memory_client)::Test UPDATE_MEMORY stores new facts to Graphiti.","test_server_tool_hmac_validation:291:(self, mock_settings)::AC-T012.2: Validates signed token for user_id.","test_server_tool_timeout_handling:326:async (self, tool_handler, user_chapter_3):slow_operation:T072: Server tools handle timeouts gracefully.","slow_operation:332:async ()::"]],"TestEndCall":["345",["voice_service:349:(self, mock_settings)::Get VoiceService instance.","test_end_call_triggers_scoring:356:async (self, voice_service, user_chapter_3, transcript_positive)::AC-T022.2: End call calls VoiceCallScorer.score_call().","test_end_call_updates_last_interaction:420:async (self, voice_service, user_chapter_3)::AC-T022.4: Updates last_interaction_at.","test_end_call_cleans_session:469:async (self, voice_service, user_chapter_3)::Test that end_call removes session from internal storage.","test_end_call_returns_score_details:526:async (self, voice_service, user_chapter_3)::AC-T022.3: Returns CallResult with scoring summary."]],"TestWebhookProcessing":["584",["test_webhook_call_ended_event:588:async (self, mock_settings, user_chapter_3)::Test processing of call_ended webhook event.","test_webhook_validates_agent_id:620:async (self, mock_settings)::Test that webhook validates agent_id matches expected."]]}],"t/agents/voice/test_prompt_persona_correctness.py":["p",{"TestDynamicVariableInjection":["29",["dynamic_vars_builder:33:(self)::Get DynamicVariablesBuilder instance.","voice_context_chapter_1:38:(self, user_chapter_1)::Voice context for chapter 1 user.","voice_context_chapter_5:54:(self, user_chapter_5)::Voice context for chapter 5 user.","test_dynamic_variables_chapter_specific:71:(self, dynamic_vars_builder, voice_context_chapter_1)::Test that dynamic variables reflect chapter-specific values.","test_dynamic_variables_mood_calculation:82:(self, dynamic_vars_builder, voice_context_chapter_5)::Test that mood is correctly calculated and set.","test_dynamic_variables_energy_calculation:91:(self, dynamic_vars_builder, voice_context_chapter_5)::Test that energy level is correctly set.","test_dynamic_variables_context_includes_topics:99:(self, dynamic_vars_builder, voice_context_chapter_1)::Test that recent topics are included in dynamic variables.","test_dynamic_variables_context_includes_threads:108:(self, dynamic_vars_builder, voice_context_chapter_1)::Test that open threads are included in dynamic variables.","test_dynamic_variables_secret_hidden:116:(self, dynamic_vars_builder, voice_context_chapter_1)::Test that secret variables are populated but prefixed."]],"TestPersonaConsistency":["127",["voice_config:131:(self, mock_settings)::Get VoiceAgentConfig instance.","test_persona_stays_nikita_across_chapters:135:(self, voice_config)::Test that prompt always includes Nikita identity.","test_persona_uses_correct_tone_for_chapter_1:150:(self, voice_config)::Test chapter 1 uses reserved/guarded tone.","test_persona_uses_correct_tone_for_chapter_3:164:(self, voice_config)::Test chapter 3 uses playful/flirty tone.","test_persona_uses_correct_tone_for_chapter_5:178:(self, voice_config)::Test chapter 5 uses intimate/loving tone.","test_persona_references_user_name:192:(self, voice_config)::Test that prompt includes user's name."]],"TestContextBuilding":["207",["test_context_building_with_memory_integration:210:(self, mock_memory_client)::Test that memory client context is available for prompt building."]],"TestSystemPromptStructure":["221",["voice_config:225:(self, mock_settings)::Get VoiceAgentConfig instance.","test_system_prompt_has_required_sections:229:(self, voice_config)::Test that prompt has all required sections.","test_system_prompt_includes_vice_adjustments:251:(self, voice_config)::Test that vice preferences modify the prompt.","test_fallback_prompt_quality:269:(self, voice_config)::Test that prompt works even with minimal input."]]}],"t/agents/voice/test_scoring_pipeline_e2e.py":["p",{"TestTurnScoring":["30",["scorer:34:(self)::Get VoiceCallScorer instance.","positive_context:39:(self, user_chapter_3)::Conversation context for positive call.","test_score_turn_analyzes_sentiment:50:async (self, scorer, positive_context)::Test that scoring analyzes sentiment of conversation turns.","test_score_turn_updates_running_total:89:async (self, scorer, positive_context)::Test that multiple turns accumulate into running total.","test_score_turn_respects_chapter_weights:127:async (self, scorer):capture_context:Test that chapter context influences scoring.","capture_context:151:async (transcript, context)::"]],"TestCallScoring":["191",["scorer:195:(self)::Get VoiceCallScorer instance.","call_context:200:(self, user_chapter_3)::Standard call context.","test_call_scoring_computes_aggregate:211:async (self, scorer, transcript_positive, call_context)::Test that call scoring produces single aggregate score.","test_call_scoring_applies_engagement_multiplier:251:async (self, scorer):capture_engagement:Test that engagement state affects scoring.","capture_engagement:271:async (transcript, context)::","test_call_scoring_updates_user_metrics:309:async (self, scorer, mock_db_session, user_chapter_3)::Test that apply_score updates user metrics in database."]],"TestScorePersistence":["372",["scorer:376:(self)::Get VoiceCallScorer instance.","test_score_history_created:381:async (self, scorer, user_chapter_3)::AC-FR006-003: Score history logged with source='voice_call'.","test_score_history_has_component_deltas:443:async (self, scorer, user_chapter_3)::Test that score history includes component delta breakdown.","test_score_changes_reflected_in_user:510:async (self, scorer, user_chapter_3):track_commit:Test that score changes are committed and reflected in user record.","track_commit:555:async ()::"]]}],"t/api/routes/test_admin_text.py":["p",{"TestTextConversationList":["25",["app:29:(self)::Create isolated test app.","client:36:(self, app)::Create test client.","mock_admin_auth:41:(self)::Mock admin authentication to pass.","mock_text_conversations:51:(self)::Create mock text conversation data.","test_list_text_conversations_pagination:73:(self, client, mock_admin_auth, mock_text_conversations)::AC-FR001-001: Paginated list with 50 per page default.","test_list_text_conversations_filter_by_user:92:(self, client, mock_admin_auth)::AC-FR001-002: Filter by user_id parameter.","test_list_text_conversations_filter_by_status:112:(self, client, mock_admin_auth)::AC-FR001-003: Filter by status=processed.","test_list_text_conversations_filter_boss_fights:131:(self, client, mock_admin_auth)::AC-FR001-004: Filter by boss_fight_only=true.","test_list_text_conversations_offset_pagination:150:(self, client, mock_admin_auth)::AC-FR001-005: Pagination via offset parameter."]],"TestTextConversationDetail":["170",["app:174:(self)::Create isolated test app.","client:181:(self, app)::Create test client.","mock_admin_auth:186:(self)::Mock admin authentication to pass.","test_text_conversation_detail_success:195:(self, client, mock_admin_auth)::AC-FR002-001: Messages displayed with role, content, timestamp.","test_text_conversation_detail_404:236:(self, client, mock_admin_auth)::AC-FR002-003: 404 for non-existent conversation.","test_text_conversation_detail_includes_messages:254:(self, client, mock_admin_auth)::AC-FR002-001: All messages displayed.","test_text_conversation_detail_includes_analysis:297:(self, client, mock_admin_auth)::AC-FR002-002: Message analysis data included.","test_text_conversation_detail_boss_fight_indicator:342:(self, client, mock_admin_auth)::AC-FR002-005: Boss fight indicator displayed."]],"TestTextStats":["381",["app:385:(self)::Create isolated test app.","client:392:(self, app)::Create test client.","mock_admin_auth:397:(self)::Mock admin authentication to pass.","test_text_stats_returns_aggregations:406:(self, client, mock_admin_auth)::AC-FR003-001: total_conversations_24h/7d/30d displayed.","test_text_stats_boss_fights_24h:435:(self, client, mock_admin_auth)::AC-FR003-002: boss_fights_24h displayed.","test_text_stats_counts_by_chapter:451:(self, client, mock_admin_auth)::AC-FR003-003: conversations_by_chapter distribution displayed.","test_text_stats_counts_by_status:470:(self, client, mock_admin_auth)::AC-FR003-004: processing_stats by status displayed."]],"TestPipelineStatus":["490",["app:494:(self)::Create isolated test app.","client:501:(self, app)::Create test client.","mock_admin_auth:506:(self)::Mock admin authentication to pass.","test_pipeline_status_success:515:(self, client, mock_admin_auth)::AC-FR004-001: All 9 stages displayed with completion status.","test_pipeline_status_404:555:(self, client, mock_admin_auth)::AC-FR004-005: 404 for non-existent conversation.","test_pipeline_status_shows_9_stages:573:(self, client, mock_admin_auth)::AC-FR004-001: All 9 stages are returned.","test_pipeline_status_counts_threads_thoughts:606:(self, client, mock_admin_auth)::AC-FR004-003 & AC-FR004-004: threads_created and thoughts_created displayed."]],"TestThreadsList":["646",["app:650:(self)::Create isolated test app.","client:657:(self, app)::Create test client.","mock_admin_auth:662:(self)::Mock admin authentication to pass.","test_threads_list_pagination:671:(self, client, mock_admin_auth)::AC-FR005-001: Paginated thread list displays.","test_threads_list_filter_by_user:704:(self, client, mock_admin_auth)::AC-FR005-002: Filter by user_id parameter.","test_threads_list_filter_active_only:724:(self, client, mock_admin_auth)::AC-FR005-003: Filter by active_only=true."]],"TestThoughtsList":["744",["app:748:(self)::Create isolated test app.","client:755:(self, app)::Create test client.","mock_admin_auth:760:(self)::Mock admin authentication to pass.","test_thoughts_list_pagination:769:(self, client, mock_admin_auth)::AC-FR006-001: Paginated thought list displays.","test_thoughts_list_filter_by_user:799:(self, client, mock_admin_auth)::AC-FR006-002: Filter by user_id parameter."]],"TestTextEndpointsAuth":["820",["app:824:(self)::Create isolated test app.","client:831:(self, app)::Create test client.","test_text_conversations_requires_admin_auth:835:(self, client)::All text endpoints require admin authentication.","test_text_conversation_detail_requires_admin_auth:840:(self, client)::Text detail requires admin authentication.","test_text_stats_requires_admin_auth:845:(self, client)::Text stats requires admin authentication.","test_pipeline_status_requires_admin_auth:850:(self, client)::Pipeline status requires admin authentication.","test_threads_list_requires_admin_auth:855:(self, client)::Threads list requires admin authentication.","test_thoughts_list_requires_admin_auth:860:(self, client)::Thoughts list requires admin authentication."]]}],"t/api/routes/test_admin_voice.py":["p",{"TestVoiceConversationList":["24",["app:28:(self)::Create isolated test app.","client:35:(self, app)::Create test client.","mock_admin_auth:40:(self)::Mock admin authentication to pass.","mock_voice_conversations:50:(self)::Create mock voice conversation data.","test_list_voice_conversations_pagination:71:(self, client, mock_admin_auth, mock_voice_conversations)::AC-FR001-001: Paginated list with 50 per page default.","test_list_voice_conversations_filter_by_user:93:(self, client, mock_admin_auth)::AC-FR001-002: Filter by user_id parameter.","test_list_voice_conversations_filter_by_status:113:(self, client, mock_admin_auth)::AC-FR001-003: Filter by status=processed.","test_list_voice_conversations_offset_pagination:132:(self, client, mock_admin_auth)::AC-FR001-004: Pagination via offset parameter."]],"TestVoiceConversationDetail":["152",["app:156:(self)::Create isolated test app.","client:163:(self, app)::Create test client.","mock_admin_auth:168:(self)::Mock admin authentication to pass.","test_voice_conversation_detail_success:177:(self, client, mock_admin_auth)::AC-FR002-001: Transcript messages with role and content.","test_voice_conversation_detail_404:217:(self, client, mock_admin_auth)::AC-FR002-003: 404 for non-existent conversation.","test_voice_conversation_detail_includes_transcript:236:(self, client, mock_admin_auth)::AC-FR002-001: Transcript messages displayed.","test_voice_conversation_detail_emotional_tone:276:(self, client, mock_admin_auth)::AC-FR002-004: Emotional tone displayed when extracted."]],"TestVoiceStats":["314",["app:318:(self)::Create isolated test app.","client:325:(self, app)::Create test client.","mock_admin_auth:330:(self)::Mock admin authentication to pass.","test_voice_stats_returns_aggregations:339:(self, client, mock_admin_auth)::AC-FR003-001: total_calls_24h/7d/30d displayed.","test_voice_stats_counts_by_chapter:368:(self, client, mock_admin_auth)::AC-FR003-002: calls_by_chapter distribution displayed.","test_voice_stats_counts_by_status:387:(self, client, mock_admin_auth)::AC-FR003-003: calls_by_status distribution displayed."]],"TestElevenLabsList":["407",["app:411:(self)::Create isolated test app.","client:418:(self, app)::Create test client.","mock_admin_auth:423:(self)::Mock admin authentication to pass.","test_elevenlabs_list_success:432:(self, client, mock_admin_auth)::AC-FR004-001: Recent calls from ElevenLabs API.","test_elevenlabs_list_api_error:459:(self, client, mock_admin_auth)::AC-FR004-002: 500 error on API failure."]],"TestElevenLabsDetail":["477",["app:481:(self)::Create isolated test app.","client:488:(self, app)::Create test client.","mock_admin_auth:493:(self)::Mock admin authentication to pass.","test_elevenlabs_detail_success:502:(self, client, mock_admin_auth)::AC-FR005-001: Full transcript with tool calls.","test_elevenlabs_detail_includes_tool_calls:529:(self, client, mock_admin_auth)::AC-FR005-001: Transcript includes tool calls when present.","test_elevenlabs_detail_includes_cost:560:(self, client, mock_admin_auth)::AC-FR005-002: Cost displayed when available."]],"TestVoiceEndpointsAuth":["587",["app:591:(self)::Create isolated test app.","client:598:(self, app)::Create test client.","test_voice_conversations_requires_admin_auth:602:(self, client)::All voice endpoints require admin authentication.","test_voice_conversation_detail_requires_admin_auth:607:(self, client)::Voice detail requires admin authentication.","test_voice_stats_requires_admin_auth:612:(self, client)::Voice stats requires admin authentication.","test_elevenlabs_list_requires_admin_auth:617:(self, client)::ElevenLabs list requires admin authentication.","test_elevenlabs_detail_requires_admin_auth:622:(self, client)::ElevenLabs detail requires admin authentication."]]}],"t/behavioral/test_detection.py":["p",{"TestSituationDetector":["19",["detector:23:(self)::Create detector instance.","test_detector_exists:27:(self, detector)::AC-T005.1: SituationDetector class exists.","test_detect_returns_situation_context:32:(self, detector)::AC-T005.2: detect() returns SituationContext.","test_detect_with_all_parameters:39:(self, detector)::AC-T005.3: Handles multiple situation types.","test_detect_stores_context_values:55:(self, detector)::detect() stores all context values correctly."]],"TestSituationClassification":["74",["detector:78:(self)::Create detector instance.","test_situations_are_mutually_exclusive:82:(self, detector)::AC-T006.1: Only one situation type returned.","test_priority_conflict_highest:94:(self, detector)::AC-T006.2: CONFLICT has highest priority.","test_priority_after_gap_second:103:(self, detector)::AC-T006.2: AFTER_GAP has second highest priority.","test_priority_morning_third:112:(self, detector)::AC-T006.2: MORNING has third priority (over EVENING).","test_priority_evening_fourth:121:(self, detector)::AC-T006.2: EVENING has fourth priority.","test_priority_mid_conversation_default:130:(self, detector)::AC-T006.2: MID_CONVERSATION is the default."]],"TestTimeBasedDetection":["140",["detector:144:(self)::Create detector instance.","test_morning_detection_start:148:(self, detector)::AC-T007.1: Morning starts at 6am.","test_morning_detection_end:153:(self, detector)::AC-T007.1: Morning ends at 11am (inclusive).","test_morning_detection_mid:158:(self, detector)::AC-T007.1: Morning at 9am.","test_not_morning_before_6am:163:(self, detector)::AC-T007.1: 5am is NOT morning.","test_not_morning_after_11am:168:(self, detector)::AC-T007.1: 12pm is NOT morning.","test_evening_detection_start:173:(self, detector)::AC-T007.2: Evening starts at 6pm (18:00).","test_evening_detection_end:178:(self, detector)::AC-T007.2: Evening ends at 10pm (22:00, inclusive).","test_evening_detection_mid:183:(self, detector)::AC-T007.2: Evening at 8pm (20:00).","test_not_evening_before_6pm:188:(self, detector)::AC-T007.2: 5pm is NOT evening.","test_not_evening_after_10pm:193:(self, detector)::AC-T007.2: 11pm is NOT evening.","test_afternoon_is_mid_conversation:198:(self, detector)::Afternoon hours (12-17) result in MID_CONVERSATION.","test_night_is_mid_conversation:204:(self, detector)::Night hours (23, 0-5) result in MID_CONVERSATION.","test_defaults_to_utc_hour:210:(self, detector)::AC-T007.3: Defaults to UTC hour when not provided."]],"TestGapDetection":["219",["detector:223:(self)::Create detector instance.","test_gap_6_hours_triggers_after_gap:227:(self, detector)::AC-T008.1: Gap of exactly 6 hours triggers AFTER_GAP.","test_gap_over_6_hours_triggers_after_gap:232:(self, detector)::AC-T008.1: Gap > 6 hours triggers AFTER_GAP.","test_gap_under_6_hours_no_trigger:237:(self, detector)::AC-T008.1: Gap < 6 hours does NOT trigger AFTER_GAP.","test_long_gap_metadata:242:(self, detector)::AC-T008.2: Gap > 24 hours sets is_long_gap in metadata.","test_medium_gap_metadata:249:(self, detector)::AC-T008.2: Gap 6-24 hours has is_long_gap=False.","test_calculate_time_since_last_message:256:(self, detector)::AC-T008.3: Calculate hours since last message.","test_calculate_time_since_last_no_previous:265:(self, detector)::AC-T008.3: Returns 0 if no previous message.","test_calculate_time_since_last_naive_datetime:270:(self, detector)::AC-T008.3: Handles naive datetimes by assuming UTC."]],"TestConflictDetection":["279",["detector:283:(self)::Create detector instance.","test_passive_aggressive_is_conflict:287:(self, detector)::AC-T009.1: passive_aggressive triggers CONFLICT.","test_cold_is_conflict:293:(self, detector)::AC-T009.1: cold triggers CONFLICT.","test_vulnerable_is_conflict:299:(self, detector)::AC-T009.1: vulnerable triggers CONFLICT.","test_explosive_is_conflict:305:(self, detector)::AC-T009.1: explosive triggers CONFLICT.","test_none_is_not_conflict:311:(self, detector)::AC-T009.1: none is NOT conflict.","test_map_conflict_to_situation:316:(self, detector)::AC-T009.2: Map conflict_state to situation type.","test_conflict_case_insensitive:327:(self, detector)::AC-T009.1: Conflict detection is case-insensitive."]],"TestPriorityEdgeCases":["336",["detector:340:(self)::Create detector instance.","test_conflict_beats_everything:344:(self, detector)::CONFLICT beats all other conditions.","test_gap_beats_time_based:353:(self, detector)::AFTER_GAP beats time-based detection.","test_morning_beats_evening_in_overlap:362:(self, detector)::Morning and evening don't overlap (hours are disjoint)."]],"TestMetadataGeneration":["372",["detector:376:(self)::Create detector instance.","test_conflict_metadata:380:(self, detector)::Conflict situations include subtype in metadata.","test_gap_metadata:386:(self, detector)::Gap situations include gap info in metadata.","test_morning_no_special_metadata:393:(self, detector)::Morning situations have minimal metadata.","test_mid_conversation_minimal_metadata:400:(self, detector)::MID_CONVERSATION has empty metadata."]]}],"t/behavioral/test_engine.py":["p",{"TestMetaInstructionEngine":["26",["engine:30:(self)::Create engine instance.","test_engine_exists:34:(self, engine)::AC-T015.1: MetaInstructionEngine class exists.","test_engine_has_detector:39:(self, engine)::Engine has SituationDetector.","test_engine_has_selector:44:(self, engine)::Engine has InstructionSelector.","test_get_instructions_for_context_main_method:49:(self, engine)::AC-T015.2: get_instructions_for_context() is main method.","test_get_instructions_returns_formatted_string:60:(self, engine)::AC-T015.2: Returns formatted string for prompt.","test_caches_instruction_library:71:(self, engine)::AC-T015.3: Caches instruction library.","test_clear_caches:79:(self, engine)::clear_caches() clears selector cache."]],"TestGetInstructionsForContext":["91",["engine:95:(self)::Create engine instance.","test_detects_morning_situation:99:(self, engine)::Morning hour results in morning instructions.","test_detects_conflict_situation:111:(self, engine)::Conflict state results in conflict instructions.","test_detects_gap_situation:122:(self, engine)::Long gap results in gap instructions.","test_uses_last_message_at_timestamp:133:(self, engine)::Can calculate hours from last_message_at timestamp.","test_max_instructions_configurable:147:(self, engine)::max_instructions limits output.","test_user_id_accepted:164:(self, engine)::User ID parameter accepted."]],"TestDetectSituation":["174",["engine:178:(self)::Create engine instance.","test_returns_situation_context:182:(self, engine)::Returns SituationContext object.","test_detects_correct_situation:193:(self, engine)::Detects correct situation type."]],"TestSelectInstructions":["211",["engine:215:(self)::Create engine instance.","test_returns_instruction_set:219:(self, engine)::Returns InstructionSet object.","test_respects_max_instructions:226:(self, engine)::Respects max_instructions parameter."]],"TestFormatForPrompt":["234",["engine:238:(self)::Create engine instance.","test_format_returns_string:242:(self, engine)::AC-T016.1: format_for_prompt() returns string.","test_format_groups_by_category:260:(self, engine)::AC-T016.2: Groups instructions by category.","test_format_clean_readable:287:(self, engine)::AC-T016.3: Clean, readable format.","test_format_empty_set:308:(self, engine)::Empty instruction set returns empty string."]],"TestGetSituationSummary":["320",["engine:324:(self)::Create engine instance.","test_returns_dict:328:(self, engine)::Returns dictionary.","test_includes_all_fields:342:(self, engine)::Includes all relevant fields."]],"TestIntegration":["365",["engine:369:(self)::Create engine instance.","test_full_pipeline_context_to_format:373:(self, engine)::AC-T017.1: Full pipeline from context to formatted output.","test_different_situations_different_outputs:394:(self, engine)::AC-T017.2: Different situations produce different outputs.","test_mid_conversation_works:421:(self, engine)::AC-T017.3: MID_CONVERSATION (default) works.","test_all_situations_produce_output:435:(self, engine)::Each situation type produces valid output."]],"TestConstructorConfiguration":["450",["test_default_max_instructions:453:(self)::Default max_instructions is 5.","test_custom_max_instructions:458:(self)::Custom max_instructions respected.","test_custom_detector:463:(self)::Custom detector can be injected.","test_custom_selector:469:(self)::Custom selector can be injected."]],"TestGetAllSituations":["476",["test_returns_all_situation_types:479:(self)::Returns all SituationType enum values."]]}],"t/behavioral/test_integration.py":["p",{"TestHierarchicalPromptIntegration":["18",["engine:22:(self)::Create engine instance.","test_post_processing_can_call_engine:26:(self, engine)::AC-T018.1: PostProcessingPipeline can call MetaInstructionEngine.","test_instructions_storable_in_context_package:47:(self, engine)::AC-T018.2: Instructions can be stored in ContextPackage.situation_hints.","test_layer4_can_use_formatted_instructions:64:(self, engine)::AC-T018.3: Layer 4 can use formatted instructions."]],"TestE2EConversationFlow":["86",["engine:90:(self)::Create engine instance.","test_full_pipeline_conversation_to_prompt:94:(self, engine)::AC-T019.1: Full pipeline from conversation context to prompt.","test_instructions_affect_response_style:129:(self, engine)::AC-T019.2: Verify instructions would affect response style.","test_conflict_instructions_work:154:(self, engine)::AC-T019.3: Verify conflict instructions work correctly."]],"TestQualityMetrics":["173",["engine:177:(self)::Create engine instance.","test_response_variability:181:(self, engine)::AC-T020.1: Test response variability (CV > 0.3).","test_personality_consistency:211:(self, engine)::AC-T020.2: Test personality consistency across situations.","test_no_exact_templates_in_responses:240:(self, engine)::AC-T020.3: Test no exact templates in responses."]],"TestConflictIntegration":["270",["engine:274:(self)::Create engine instance.","test_conflict_priority_over_time_based:278:(self, engine)::Conflict takes priority over time-based situations.","test_conflict_priority_over_gap:294:(self, engine)::Conflict takes priority over gap situation.","test_conflict_instructions_by_subtype:302:(self, engine)::Each conflict subtype gets appropriate instructions."]],"TestContextPackageIntegration":["325",["engine:329:(self)::Create engine instance.","test_situational_data_format:333:(self, engine)::Output matches expected ContextPackage format.","test_summary_for_logging:358:(self, engine)::Summary format suitable for logging/analytics."]]}],"t/behavioral/test_models.py":["p",{"TestSituationType":["26",["test_all_situation_types_exist:29:(self)::All expected situation types should exist.","test_situation_type_count:37:(self)::Should have exactly 5 situation types."]],"TestSituationCategory":["42",["test_all_categories_exist:45:(self)::All expected categories should exist.","test_category_count:52:(self)::Should have exactly 4 categories."]],"TestSituationContext":["57",["test_default_context:60:(self)::Default context should have reasonable defaults.","test_context_with_values:72:(self)::Context should accept custom values.","test_context_validates_hours:94:(self)::Hours since last message cannot be negative.","test_context_validates_hour_range:99:(self)::User local hour must be 0-23.","test_context_validates_chapter_range:107:(self)::Chapter must be 1-5.","test_context_validates_relationship_score:115:(self)::Relationship score must be 0-100.","test_context_detected_at_auto_set:123:(self)::detected_at should be automatically set."]],"TestMetaInstruction":["130",["test_basic_instruction:133:(self)::Basic instruction should be created.","test_instruction_with_conditions:148:(self)::Instruction with conditions should be created.","test_instruction_validates_priority:167:(self)::Priority must be 1-10.","test_instruction_validates_min_length:187:(self)::Instruction text must be at least 10 characters.","test_instruction_validates_weight:197:(self)::Weight must be 0.0-2.0."]],"TestMetaInstructionConditions":["209",["base_context:213:(self)::Base context for condition testing.","test_no_conditions_applies:222:(self, base_context)::Instruction with no conditions should apply.","test_chapter_min_applies:233:(self, base_context)::chapter_min condition should work.","test_chapter_max_applies:248:(self, base_context)::chapter_max condition should work.","test_relationship_score_min_applies:263:(self, base_context)::relationship_score_min condition should work.","test_conflict_states_applies:278:(self, base_context)::conflict_states condition should work.","test_engagement_states_applies:293:(self, base_context)::engagement_states condition should work.","test_multiple_conditions_all_must_pass:308:(self, base_context)::Multiple conditions must all pass."]],"TestInstructionSet":["329",["sample_instructions:333:(self)::Sample instructions for testing.","test_by_category_groups_correctly:359:(self, sample_instructions)::by_category() should group instructions.","test_format_for_prompt:374:(self, sample_instructions)::format_for_prompt() should produce readable output.","test_format_empty_set:390:(self)::Empty instruction set should return empty string."]],"TestYAMLLoading":["401",["test_situations_yaml_loads:404:(self)::situations.yaml should load correctly.","test_situations_have_priorities:416:(self)::Each situation should have a priority.","test_instructions_yaml_loads:425:(self)::instructions.yaml should load correctly.","test_instructions_have_required_fields:436:(self)::Each instruction should have required fields.","test_instructions_use_directional_language:447:(self)::Instructions should use directional language.","test_each_situation_has_minimum_instructions:473:(self)::Each situation should have 3-5 instructions."]]}],"t/behavioral/test_selection.py":["p",{"TestInstructionSelector":["22",["selector:26:(self)::Create selector instance.","context_morning:31:(self)::Morning context for testing.","test_selector_exists:41:(self, selector)::AC-T011.1: InstructionSelector class exists.","test_select_returns_instruction_set:46:(self, selector, context_morning)::AC-T011.2: select() returns InstructionSet.","test_loads_from_yaml:53:(self, selector)::AC-T011.3: Loads from instruction library YAML.","test_select_returns_meta_instructions:63:(self, selector, context_morning)::AC-T011.4: Returns list of MetaInstruction objects.","test_select_filters_by_situation:71:(self, selector)::Selected instructions match the situation type."]],"TestPrioritySelection":["88",["selector:92:(self)::Create selector instance.","test_sorted_by_priority:96:(self, selector)::AC-T012.1: Instructions sorted by priority (1 = highest).","test_default_max_instructions:105:(self, selector)::AC-T012.2: Default returns up to 5 instructions.","test_configurable_max_instructions:112:(self, selector)::AC-T012.2: max_instructions is configurable.","test_constructor_max_instructions:124:(self)::AC-T012.2: max_instructions configurable in constructor.","test_priority_1_selected_first:132:(self, selector)::Priority 1 instructions appear before priority 2."]],"TestConditionEvaluation":["141",["selector:145:(self)::Create selector instance.","test_chapter_min_filter:149:(self, selector)::AC-T013.2: chapter_min condition filters correctly.","test_chapter_max_filter:175:(self, selector)::AC-T013.2: chapter_max condition filters correctly.","test_relationship_score_min_filter:198:(self, selector)::AC-T013.2: relationship_score_min filters correctly.","test_conflict_states_filter:220:(self, selector)::AC-T013.2: conflict_states condition filters correctly.","test_non_applicable_filtered_out:242:(self, selector)::AC-T013.3: Non-applicable instructions filtered out.","test_evaluate_conditions_method:256:(self, selector)::AC-T013.1: evaluate_conditions method exists."]],"TestGetInstructionsForSituation":["271",["selector:275:(self)::Create selector instance.","test_returns_all_instructions:279:(self, selector)::Returns all instructions without condition filtering.","test_returns_correct_type:286:(self, selector)::All returned instructions have correct situation type."]],"TestCaching":["294",["test_lazy_loading:297:(self)::Instruction library is loaded lazily.","test_cache_reused:310:(self)::Library is cached and reused.","test_clear_cache:319:(self)::clear_cache() forces reload."]],"TestInstructionSetOutput":["336",["selector:340:(self)::Create selector instance.","test_instruction_set_has_context:344:(self, selector)::InstructionSet contains the original context.","test_instruction_set_format_for_prompt:357:(self, selector)::InstructionSet can be formatted for prompt.","test_instruction_set_by_category:369:(self, selector)::InstructionSet groups instructions by category."]]}],"t/conflicts/test_breakup.py":["p",["store:40:()::","config:46:()::","manager:52:(store, config)::"],{"TestBreakupRiskEnum":["62",["test_all_risk_levels_exist:65:(self)::All 4 risk levels should exist.","test_risk_from_string:72:(self)::Risk can be created from string."]],"TestThresholdResult":["83",["test_threshold_result_defaults:86:(self)::ThresholdResult has sensible defaults.","test_threshold_result_full:96:(self)::ThresholdResult can have all fields set."]],"TestBreakupResult":["115",["test_breakup_result_defaults:118:(self)::BreakupResult has sensible defaults.","test_breakup_result_triggered:126:(self)::BreakupResult can represent triggered breakup."]],"TestScoreBasedThreshold":["143",["test_healthy_score_no_risk:146:(self, manager)::Score >= 50 has no risk.","test_high_score_no_risk:154:(self, manager)::High score (75) has no risk.","test_warning_threshold_19:161:(self, manager)::Score 19 triggers warning (< 20).","test_warning_threshold_15:168:(self, manager)::Score 15 triggers warning (but not critical).","test_critical_threshold_14:175:(self, manager)::Score 14 triggers critical (< 15).","test_breakup_threshold_9:182:(self, manager)::Score 9 triggers breakup (< 10).","test_breakup_threshold_0:188:(self, manager)::Score 0 triggers breakup."]],"TestCrisisBasedThreshold":["200",["test_no_crises_healthy:203:(self, manager)::No consecutive crises is healthy.","test_one_crisis_ok:209:(self, manager, store)::One consecutive crisis doesn't trigger breakup.","test_two_crises_ok:224:(self, manager, store)::Two consecutive crises doesn't trigger breakup.","test_three_crises_triggers_breakup:239:(self, manager, store)::Three consecutive crises triggers breakup.","test_resolved_crises_dont_count:256:(self, manager, store)::Resolved crises don't count toward consecutive."]],"TestBreakupTriggering":["279",["test_trigger_breakup_returns_result:282:(self, manager)::trigger_breakup returns a BreakupResult.","test_trigger_breakup_with_conflict_type:293:(self, manager)::Breakup message can be based on conflict type.","test_trigger_breakup_resolves_active_conflict:305:(self, manager, store)::Triggering breakup resolves any active conflict.","test_trigger_breakup_no_active_conflict:324:(self, manager)::Can trigger breakup even without active conflict."]],"TestWarningMessages":["338",["test_get_warning_message_returns_string:341:(self, manager)::get_warning_message returns a non-empty string.","test_warning_messages_variety:347:(self, manager)::Multiple calls can return different messages.","test_warning_messages_theme:358:(self, manager)::Warning messages express relationship concern."]],"TestBreakupMessages":["375",["test_breakup_messages_by_type:378:(self, manager)::Breakup messages exist for each conflict type.","test_general_fallback:389:(self, manager)::Unknown conflict type falls back to general messages.","test_no_conflict_type_uses_general:399:(self, manager)::No conflict type uses general messages."]],"TestRelationshipStatus":["414",["test_status_healthy:417:(self, manager)::Healthy relationship status.","test_status_warning:427:(self, manager)::Warning relationship status.","test_status_critical:436:(self, manager)::Critical relationship status.","test_status_includes_thresholds:445:(self, manager, config)::Status includes threshold configuration.","test_status_includes_conflict_summary:452:(self, manager, store)::Status includes conflict summary.","test_status_active_conflict:471:(self, manager, store)::Status shows when there's an active conflict."]],"TestCheckAndProcess":["489",["test_check_and_process_healthy:492:(self, manager)::Healthy score returns only threshold result.","test_check_and_process_triggers_breakup:502:(self, manager)::Low score returns both results.","test_check_and_process_crisis_breakup:515:(self, manager, store)::Three crises triggers breakup via check_and_process."]],"TestGlobalManager":["541",["test_get_breakup_manager_returns_instance:544:(self)::get_breakup_manager() returns a BreakupManager.","test_get_breakup_manager_singleton:549:(self)::get_breakup_manager() returns same instance."]],"TestEdgeCases":["565",["test_exactly_at_warning_threshold:568:(self, manager, config)::Score exactly at warning threshold (20) is NOT warning.","test_one_below_warning_threshold:573:(self, manager, config)::Score one below warning threshold triggers warning.","test_exactly_at_breakup_threshold:578:(self, manager, config)::Score exactly at breakup threshold (10) is NOT breakup.","test_one_below_breakup_threshold:584:(self, manager, config)::Score one below breakup threshold triggers breakup.","test_negative_score_breakup:589:(self, manager)::Negative score (theoretically) still triggers breakup.","test_max_score_healthy:594:(self, manager)::Max score (100) is healthy.","test_score_priority_over_crises:599:(self, manager, store)::Score-based breakup takes priority in reason."]]}],"t/conflicts/test_detection.py":["p",["store:29:()::","detector:35:(store)::","detector_with_llm:41:(store)::","basic_context:50:()::"],{"TestDetectionContext":["63",["test_create_basic_context:66:(self)::Test creating a basic context.","test_create_full_context:77:(self)::Test creating context with all fields.","test_chapter_bounds:95:(self)::Test chapter validation bounds."]],"TestDetectionResult":["110",["test_empty_result:113:(self)::Test empty detection result.","test_result_with_triggers:120:(self)::Test result with triggers.","test_highest_severity_multiple:131:(self)::Test highest severity with multiple triggers."]],"TestTriggerDetector":["157",["test_create_detector:160:(self, store)::Test creating a detector.","test_detect_sync_no_triggers:166:(self, detector, basic_context)::Test sync detection with no triggers.","test_chapter_sensitivity_applied:172:(self, detector)::Test that chapter sensitivity affects severity."]],"TestDismissiveDetection":["198",["test_short_message_detected:201:(self, detector)::Test detection of short messages.","test_single_word_higher_severity:214:(self, detector)::Test that single word has higher severity than multi-word short.","test_very_short_highest_severity:235:(self, detector)::Test that 1-3 char messages have highest severity.","test_consecutive_short_detected:247:(self, detector)::Test detection of consecutive short messages.","test_normal_message_no_dismissive:265:(self, detector)::Test that normal messages don't trigger dismissive."]],"TestNeglectDetection":["280",["test_long_gap_detected:283:(self, detector)::Test detection of long time gaps.","test_no_neglect_recent_interaction:297:(self, detector)::Test no neglect for recent interaction.","test_gap_severity_increases_with_time:312:(self, detector)::Test that gap severity increases with longer gaps.","test_short_session_detected:336:(self, detector)::Test detection of short conversation sessions.","test_no_neglect_first_interaction:354:(self, detector)::Test no neglect when last_interaction is None."]],"TestJealousyDetection":["375",["test_friend_mention_detected:378:(self, detector)::Test detection of friend mentions.","test_ex_mention_detected:390:(self, detector)::Test detection of ex mentions.","test_date_mention_detected:402:(self, detector)::Test detection of date mentions.","test_attractive_mention_detected:414:(self, detector)::Test detection of attractive person mentions.","test_multiple_keywords_higher_severity:426:(self, detector)::Test that multiple keywords increase severity.","test_no_jealousy_normal_message:448:(self, detector)::Test no jealousy for normal messages."]],"TestBoundaryDetection":["464",["test_sexual_keyword_detected:467:(self, detector)::Test detection of sexual keywords.","test_come_over_detected:479:(self, detector)::Test detection of 'come over' requests.","test_early_chapter_higher_severity:491:(self, detector)::Test that early chapters have higher boundary sensitivity.","test_no_boundary_normal_message:514:(self, detector)::Test no boundary for normal messages."]],"TestChapterSensitivity":["530",["test_chapter_1_multiplier:533:(self, detector)::Test chapter 1 has 1.5x multiplier.","test_chapter_3_baseline:545:(self, detector)::Test chapter 3 has 1.0x multiplier (baseline).","test_chapter_5_reduced:556:(self, detector)::Test chapter 5 has 0.8x multiplier."]],"TestAsyncDetection":["571",["test_detect_async_basic:575:async (self, detector, basic_context)::Test async detection.","test_detect_async_stores_triggers:582:async (self, detector, store)::Test that async detection stores triggers.","test_detect_async_multiple_trigger_types:596:async (self, detector)::Test detection of multiple trigger types at once."]],"TestEdgeCases":["615",["test_empty_message:618:(self, detector)::Test handling of empty message.","test_whitespace_only_message:629:(self, detector)::Test handling of whitespace-only message.","test_very_long_message:639:(self, detector)::Test handling of very long message.","test_special_characters:649:(self, detector)::Test handling of special characters.","test_case_insensitive_keywords:659:(self, detector)::Test that keyword matching is case insensitive."]]}],"t/conflicts/test_escalation.py":["p",["store:33:()::","manager:39:(store)::","subtle_conflict:45:(store)::","direct_conflict:55:(store)::","crisis_conflict:67:(store)::","old_subtle_conflict:79:(store)::"],{"TestEscalationResult":["95",["test_default_result:98:(self)::Test default escalation result.","test_escalated_result:106:(self)::Test escalated result.","test_natural_resolution_result:116:(self)::Test natural resolution result."]],"TestEscalationManagerCreation":["128",["test_create_manager:131:(self, store)::Test creating a manager.","test_create_with_custom_config:137:(self, store)::Test creating with custom config."]],"TestEscalationTimeline":["149",["test_subtle_escalation_threshold:152:(self, manager)::Test SUBTLE level has 2-6h escalation threshold.","test_direct_escalation_threshold:159:(self, manager)::Test DIRECT level has 12-24h escalation threshold.","test_crisis_no_escalation:166:(self, manager)::Test CRISIS level has no further escalation.","test_escalation_not_yet_due:171:(self, manager, subtle_conflict)::Test no escalation when time not met.","test_escalation_due:178:(self, manager, old_subtle_conflict)::Test escalation when threshold exceeded.","test_subtle_to_direct_escalation:184:(self, manager, store)::Test escalation from SUBTLE to DIRECT.","test_direct_to_crisis_escalation:204:(self, manager, store)::Test escalation from DIRECT to CRISIS."]],"TestNaturalResolution":["229",["test_subtle_natural_resolution_probability:232:(self, manager)::Test SUBTLE level has 30% natural resolution.","test_direct_natural_resolution_probability:237:(self, manager)::Test DIRECT level has 10% natural resolution.","test_crisis_no_natural_resolution:242:(self, manager)::Test CRISIS level has 0% natural resolution.","test_natural_resolution_possible:247:(self, manager, store)::Test that natural resolution can occur.","test_natural_resolution_updates_store:266:(self, manager, store)::Test that natural resolution updates the store."]],"TestAcknowledgment":["290",["test_acknowledge_resets_timer:293:(self, manager, store, subtle_conflict)::Test that acknowledgment resets escalation timer.","test_acknowledge_increments_attempts:304:(self, manager, store, subtle_conflict)::Test that acknowledgment increments resolution attempts.","test_acknowledge_resolved_conflict_fails:313:(self, manager, store)::Test that acknowledging resolved conflict fails."]],"TestForceEscalation":["330",["test_force_escalate_subtle:333:(self, manager, store, subtle_conflict)::Test force escalation from SUBTLE.","test_force_escalate_direct:339:(self, manager, store, direct_conflict)::Test force escalation from DIRECT.","test_force_escalate_crisis_fails:345:(self, manager, crisis_conflict)::Test force escalation from CRISIS fails.","test_force_escalate_resolved_fails:351:(self, manager, store)::Test force escalation of resolved conflict fails."]],"TestCheckEscalation":["369",["test_check_resolved_conflict:372:(self, manager, store)::Test checking resolved conflict.","test_check_crisis_no_escalation:387:(self, manager, crisis_conflict)::Test checking CRISIS level conflict.","test_check_returns_time_until:393:(self, manager, subtle_conflict)::Test that check returns time until escalation."]],"TestTimelineInformation":["403",["test_get_timeline_active:406:(self, manager, subtle_conflict)::Test getting timeline for active conflict.","test_get_timeline_resolved:416:(self, manager, store)::Test getting timeline for resolved conflict.","test_get_timeline_crisis:430:(self, manager, crisis_conflict)::Test getting timeline for CRISIS conflict."]],"TestNextLevel":["442",["test_subtle_next_is_direct:445:(self, manager)::Test SUBTLE \u2192 DIRECT.","test_direct_next_is_crisis:450:(self, manager)::Test DIRECT \u2192 CRISIS.","test_crisis_next_is_none:455:(self, manager)::Test CRISIS \u2192 None."]],"TestGlobalManager":["464",["test_get_escalation_manager_returns_instance:467:(self)::Test that get_escalation_manager returns instance.","test_get_escalation_manager_same_instance:472:(self)::Test that same instance is returned."]],"TestEdgeCases":["482",["test_time_in_level_uses_correct_reference:485:(self, manager, store)::Test that time in level uses correct reference time.","test_natural_resolution_deterministic:510:(self, manager, store)::Test that natural resolution is deterministic per conflict-hour."]]}],"t/conflicts/test_generation.py":["p",["store:34:()::","generator:40:(store)::","basic_context:46:()::","dismissive_trigger:56:()::","jealousy_trigger:66:()::","boundary_trigger:76:()::","trust_trigger:86:()::"],{"TestGenerationContext":["98",["test_create_basic_context:101:(self)::Test creating a basic context.","test_create_full_context:108:(self)::Test creating context with all fields."]],"TestGenerationResult":["134",["test_empty_result:137:(self)::Test result when no conflict generated.","test_result_with_conflict:144:(self)::Test result with generated conflict."]],"TestConflictGenerator":["171",["test_create_generator:174:(self, store)::Test creating a generator.","test_generate_no_triggers:180:(self, generator, basic_context)::Test generation with no triggers.","test_generate_single_trigger:186:(self, generator, basic_context, jealousy_trigger)::Test generation with single trigger.","test_generate_multiple_triggers:195:(self, generator, basic_context, dismissive_trigger, jealousy_trigger)::Test generation with multiple triggers.","test_generate_stores_conflict:203:(self, generator, store, basic_context, jealousy_trigger)::Test that generated conflict is stored."]],"TestTriggerPrioritization":["217",["test_low_severity_filtered:220:(self, generator, basic_context)::Test that low severity triggers are filtered.","test_highest_severity_prioritized:231:(self, generator, basic_context)::Test that highest severity trigger is prioritized.","test_max_three_triggers:250:(self, generator, basic_context)::Test that at most 3 triggers are used."]],"TestSeverityCalculation":["268",["test_severity_based_on_trigger_type:271:(self, generator, basic_context)::Test severity varies by trigger type.","test_low_relationship_increases_severity:298:(self, generator, jealousy_trigger)::Test that low relationship score increases severity.","test_recent_conflicts_increase_severity:324:(self, generator, jealousy_trigger)::Test that recent conflicts increase severity.","test_later_chapters_reduce_severity:361:(self, generator, jealousy_trigger)::Test that later chapters slightly reduce severity."]],"TestConflictTypeSelection":["390",["test_trigger_maps_to_conflict_type:393:(self, generator, basic_context)::Test that triggers map to correct conflict types.","test_higher_priority_type_selected:421:(self, generator, basic_context)::Test that higher priority conflict types are selected.","test_avoids_same_type_in_succession:440:(self, generator)::Test that same conflict type is avoided if recent."]],"TestCooldownAndSkip":["479",["test_cooldown_prevents_conflict:482:(self, generator, jealousy_trigger)::Test that cooldown period prevents new conflicts.","test_after_cooldown_allows_conflict:494:(self, generator, jealousy_trigger)::Test that conflicts are allowed after cooldown.","test_high_relationship_prevents_minor_conflict:505:(self, generator)::Test that high relationship prevents minor conflicts.","test_high_relationship_allows_major_conflict:521:(self, generator, trust_trigger)::Test that high severity conflicts bypass high relationship protection.","test_existing_conflict_prevents_new:531:(self, generator, store, jealousy_trigger)::Test that existing active conflict prevents new one."]],"TestShouldGenerateConflict":["553",["test_should_generate_true:556:(self, generator, basic_context, jealousy_trigger)::Test should_generate returns true when conditions met.","test_should_generate_false_no_triggers:562:(self, generator, basic_context)::Test should_generate returns false with no triggers.","test_should_generate_false_existing_conflict:568:(self, generator, store, jealousy_trigger)::Test should_generate returns false with existing conflict."]],"TestGlobalGenerator":["584",["test_get_conflict_generator_returns_instance:587:(self)::Test that get_conflict_generator returns instance.","test_get_conflict_generator_same_instance:592:(self)::Test that same instance is returned."]],"TestEdgeCases":["602",["test_empty_trigger_list:605:(self, generator, basic_context)::Test handling empty trigger list.","test_all_triggers_below_threshold:610:(self, generator, basic_context)::Test when all triggers are below threshold.","test_severity_clamped_to_one:623:(self, generator)::Test that severity is clamped to 1.0 max."]]}],"t/conflicts/test_infrastructure.py":["p",{"TestModuleStructure":["30",["test_module_imports:33:(self)::AC-T001.1: Module imports work.","test_models_importable:41:(self)::AC-T001.2: Models are importable.","test_store_importable:52:(self)::Store is importable."]],"TestTriggerType":["58",["test_all_trigger_types_defined:61:(self)::All trigger types are defined.","test_trigger_type_values:69:(self)::Trigger types have correct values."]],"TestConflictType":["74",["test_all_conflict_types_defined:77:(self)::All conflict types are defined.","test_conflict_type_values:84:(self)::Conflict types have correct values."]],"TestEscalationLevel":["89",["test_all_levels_defined:92:(self)::All escalation levels are defined.","test_level_order:98:(self)::Levels are in correct order."]],"TestResolutionType":["104",["test_all_resolution_types_defined:107:(self)::All resolution types are defined."]],"TestConflictTrigger":["115",["test_create_trigger:118:(self)::AC-T002.1: ConflictTrigger model works.","test_trigger_defaults:130:(self)::Trigger has sensible defaults.","test_trigger_with_context:142:(self)::Trigger accepts context.","test_severity_validation:155:(self)::AC-T002.3: Severity is validated."]],"TestActiveConflict":["173",["test_create_conflict:176:(self)::AC-T002.2: ActiveConflict model works.","test_conflict_defaults:190:(self)::Conflict has sensible defaults.","test_conflict_with_all_fields:206:(self)::Conflict accepts all fields."]],"TestConflictConfig":["230",["test_default_config:233:(self)::Default config has correct values.","test_escalation_times:241:(self)::Escalation times are correct.","test_natural_resolution_probabilities:248:(self)::Natural resolution probabilities are correct.","test_severity_ranges:256:(self)::Severity ranges are defined."]],"TestConflictSummary":["266",["test_summary_defaults:269:(self)::Summary has correct defaults.","test_resolution_rate:278:(self)::Resolution rate calculated correctly.","test_resolution_rate_zero_conflicts:288:(self)::Resolution rate is 1.0 with no conflicts."]],"TestTriggerToConflictMapping":["294",["test_dismissive_maps_to_attention:297:(self)::Dismissive triggers map to attention conflicts.","test_neglect_maps_to_attention:301:(self)::Neglect triggers map to attention conflicts.","test_jealousy_maps_to_jealousy:305:(self)::Jealousy triggers map to jealousy conflicts.","test_boundary_maps_to_boundary:309:(self)::Boundary triggers map to boundary conflicts.","test_trust_maps_to_trust:313:(self)::Trust triggers map to trust conflicts."]],"TestConflictStore":["318",["store:322:(self)::Create fresh store for each test.","test_create_trigger:326:(self, store)::AC-T004.1: Create trigger works.","test_get_trigger:338:(self, store)::Get trigger works.","test_get_trigger_not_found:349:(self, store)::Get trigger returns None for missing.","test_get_user_triggers:353:(self, store)::Get user triggers works.","test_get_user_triggers_since:362:(self, store)::Get user triggers filters by time.","test_delete_trigger:375:(self, store)::Delete trigger works.","test_delete_trigger_not_found:381:(self, store)::Delete returns False for missing.","test_create_conflict:385:(self, store)::AC-T004.3: Create conflict works.","test_get_conflict:397:(self, store)::Get conflict works.","test_get_conflict_not_found:408:(self, store)::Get conflict returns None for missing.","test_get_active_conflict:412:(self, store)::AC-T004.2: Get active conflict works.","test_get_active_conflict_none:425:(self, store)::Get active conflict returns None when all resolved.","test_get_user_conflicts:432:(self, store)::Get user conflicts works.","test_get_user_conflicts_filtered:441:(self, store)::Get user conflicts filters by resolved.","test_update_conflict:453:(self, store)::Update conflict works.","test_escalate_conflict:460:(self, store)::Escalate conflict works.","test_resolve_conflict:471:(self, store)::AC-T004.4: Resolve conflict works.","test_increment_resolution_attempts:482:(self, store)::Increment resolution attempts works.","test_reduce_severity:493:(self, store)::Reduce severity works.","test_reduce_severity_minimum_zero:500:(self, store)::Reduce severity doesn't go below zero.","test_get_conflict_summary:507:(self, store)::Get conflict summary works.","test_count_consecutive_unresolved_crises:524:(self, store)::Count consecutive unresolved crises works.","test_clear_user_data:541:(self, store)::Clear user data works."]],"TestGlobalStore":["552",["test_get_conflict_store_returns_instance:555:(self)::get_conflict_store returns instance.","test_get_conflict_store_same_instance:560:(self)::get_conflict_store returns same instance."]]}],"t/conflicts/test_integration.py":["p",["store:36:()::","config:42:()::","detector:48:(store)::","generator:54:(store, config)::","escalation_mgr:60:(store, config)::","resolution_mgr:66:(store, config)::","breakup_mgr:72:(store, config)::"],{"TestFullLifecycle":["82",["test_detect_generate_resolve_happy_path:87:(self, store, detector, generator, resolution_mgr)::Happy path: Detect trigger \u2192 Generate conflict \u2192 Resolve successfully.","test_detect_generate_escalate_resolve:126:(self, store, detector, generator, escalation_mgr, resolution_mgr)::Conflict escalates before resolution.","test_poor_resolution_leads_to_escalation:166:(self, store, detector, generator, escalation_mgr, resolution_mgr)::Poor resolution attempts lead to escalation."]],"TestBreakupScenarios":["190",["test_low_score_triggers_breakup:193:(self, store, breakup_mgr)::Score below threshold triggers breakup.","test_three_crises_triggers_breakup:205:(self, store, breakup_mgr)::Three consecutive crises trigger breakup.","test_resolved_crises_prevent_breakup:226:(self, store, breakup_mgr, resolution_mgr)::Resolving crises prevents breakup."]],"TestEscalationTimeline":["256",["test_check_escalation_timeline:259:(self, store, escalation_mgr)::Get escalation timeline for a conflict.","test_acknowledge_resets_timer:274:(self, store, escalation_mgr)::Acknowledging a conflict resets the escalation timer."]],"TestConflictPipeline":["296",["test_chapter_sensitivity_affects_detection:299:(self, store, detector, config)::Chapter affects trigger detection sensitivity.","test_relationship_score_affects_generation:324:(self, store, generator)::Relationship score affects conflict severity."]],"TestStoreIntegration":["359",["test_store_summary_updates:362:(self, store, generator, resolution_mgr)::Conflict summary updates correctly through lifecycle.","test_multiple_users_isolated:382:(self, store, breakup_mgr)::Different users have isolated conflict data."]],"TestEdgeCases":["401",["test_multiple_triggers_same_message:404:(self, detector, store)::Message with multiple trigger types.","test_no_trigger_in_neutral_message:423:(self, detector, store)::Neutral message doesn't trigger conflict.","test_cooldown_prevents_rapid_conflicts:435:(self, store, generator)::Cooldown prevents generating conflicts too quickly."]]}],"t/conflicts/test_resolution.py":["p",["store:39:()::","config:45:()::","manager:51:(store, config)::","active_conflict:57:(store)::"],{"TestResolutionQualityEnum":["72",["test_all_quality_levels_exist:75:(self)::All 5 quality levels should exist.","test_quality_from_string:83:(self)::Quality can be created from string."]],"TestResolutionContext":["94",["test_context_creation:97:(self, active_conflict)::Context can be created with required fields.","test_context_with_history:107:(self, active_conflict)::Context can track previous attempts."]],"TestResolutionEvaluation":["124",["test_evaluation_defaults:127:(self)::Evaluation has sensible defaults.","test_evaluation_full:137:(self)::Evaluation can have all fields."]],"TestRuleBasedEvaluation":["155",["test_excellent_apology:158:(self, manager, active_conflict)::Sincere apology with understanding = EXCELLENT.","test_good_apology:168:(self, manager, active_conflict)::Thoughtful apology = GOOD.","test_adequate_acknowledgment:178:(self, manager, active_conflict)::Minimal acknowledgment = ADEQUATE.","test_poor_dismissive:188:(self, manager, active_conflict)::Dismissive response = POOR.","test_poor_short_message:198:(self, manager, active_conflict)::Very short message = POOR.","test_harmful_blaming:207:(self, manager, active_conflict)::Blaming response = HARMFUL.","test_harmful_gaslighting:217:(self, manager, active_conflict)::Gaslighting response = HARMFUL.","test_longer_message_without_keywords_adequate:226:(self, manager, active_conflict)::Longer message without clear indicators = ADEQUATE."]],"TestResolutionTypeDetermination":["241",["test_excellent_gives_full_resolution:244:(self, manager, active_conflict)::EXCELLENT quality = FULL resolution.","test_good_gives_partial_resolution:254:(self, manager, active_conflict)::GOOD quality = PARTIAL resolution.","test_adequate_gives_partial_resolution:264:(self, manager, active_conflict)::ADEQUATE quality = PARTIAL resolution.","test_poor_gives_failed_resolution:274:(self, manager, active_conflict)::POOR quality = FAILED resolution.","test_harmful_gives_failed_resolution:284:(self, manager, active_conflict)::HARMFUL quality = FAILED resolution."]],"TestEscalationLevelMultipliers":["300",["test_subtle_level_full_multiplier:303:(self, manager, store)::SUBTLE level has 1.0 multiplier.","test_direct_level_reduced_multiplier:320:(self, manager, store)::DIRECT level has 0.8 multiplier.","test_crisis_level_lowest_multiplier:340:(self, manager, store)::CRISIS level has 0.5 multiplier.","test_crisis_only_excellent_resolves_fully:360:(self, manager, store)::At CRISIS level, only EXCELLENT quality resolves fully."]],"TestSeverityReductionMapping":["394",["test_excellent_full_reduction:397:(self, manager, active_conflict)::EXCELLENT = 1.0 (full) severity reduction.","test_good_moderate_reduction:406:(self, manager, active_conflict)::GOOD = 0.6 severity reduction.","test_adequate_small_reduction:415:(self, manager, active_conflict)::ADEQUATE = 0.3 severity reduction.","test_poor_no_reduction:424:(self, manager, active_conflict)::POOR = 0.0 severity reduction.","test_harmful_negative_reduction:433:(self, manager, active_conflict)::HARMFUL = -0.2 (increases severity)."]],"TestResolveMethod":["448",["test_resolve_reduces_severity:451:(self, manager, store, active_conflict)::resolve() reduces conflict severity.","test_resolve_full_marks_resolved:468:(self, manager, store, active_conflict)::FULL resolution marks conflict as resolved.","test_resolve_harmful_increases_severity:482:(self, manager, store, active_conflict)::HARMFUL response increases severity.","test_resolve_increments_attempts:498:(self, manager, store, active_conflict)::Each resolution attempt increments counter.","test_resolve_nonexistent_returns_none:515:(self, manager)::Resolving nonexistent conflict returns None.","test_resolve_already_resolved_returns_none:527:(self, manager, store, active_conflict)::Can't resolve already resolved conflict.","test_partial_resolution_at_zero_severity_resolves:542:(self, manager, store)::Partial resolution that reduces severity to 0 resolves conflict."]],"TestGlobalManager":["570",["test_get_resolution_manager_returns_instance:573:(self, monkeypatch)::get_resolution_manager() returns a ResolutionManager.","test_get_resolution_manager_singleton:584:(self, monkeypatch)::get_resolution_manager() returns same instance."]],"TestAsyncEvaluation":["602",["test_async_evaluate_falls_back_to_rules:606:async (self, store, config)::async evaluate falls back to rules when LLM disabled.","test_async_evaluate_with_llm_error_falls_back:626:async (self, store, config)::async evaluate falls back to rules on LLM error."]]}],"t/context/test_composer.py":["p",{"TestHierarchicalPromptComposer":["28",["test_init_default:31:(self)::AC-T013.1: Composer initializes properly.","test_compose_returns_composed_prompt:36:(self)::AC-T013.2: compose() returns ComposedPrompt.","test_compose_with_package:52:(self)::AC-T013.3: Loads context package and injects into prompt.","test_compose_without_package_graceful_degradation:93:(self)::AC-T013.4: Graceful degradation when package unavailable.","test_compose_includes_all_layers:111:(self)::AC-T013.1: Composer includes all 6 layers when available.","test_layer_breakdown_has_names_and_tokens:128:(self)::AC-T013.5: Logs layer breakdown for debugging.","test_token_count_is_sum_of_layers:145:(self)::AC-T013.5: Token count is sum of layer token counts.","test_compose_different_chapters:161:(self)::AC-T013.1: Different chapters produce different prompts.","test_compose_different_emotional_states:180:(self)::AC-T013.1: Different emotional states affect prompt.","test_compose_validates_chapter:204:(self)::AC-T013.1: Validates chapter input."]],"TestComposerModuleFunctions":["225",["test_get_prompt_composer_singleton:228:(self)::AC-T013.1: get_prompt_composer returns singleton.","test_compose_convenience:235:(self)::AC-T013.1: Convenience function works."]]}],"t/context/test_composer_integration.py":["p",{"TestFullCompositionWithPackage":["33",["test_compose_with_complete_package:36:(self)::Full composition with all package fields populated.","test_compose_with_minimal_package:112:(self)::Composition with package containing only essential fields.","test_different_chapters_affect_composition:135:(self)::Different chapters produce distinct prompts."]],"TestDegradationScenarios":["154",["test_compose_without_package:157:(self)::Composition works without context package.","test_compose_without_emotional_state:174:(self)::Composition handles missing emotional state.","test_compose_with_expired_package:190:(self)::Composition handles expired package gracefully.","test_degraded_flag_set_on_layer_failure:213:(self)::Degraded flag set when layer fails to compose.","test_composition_produces_nikita_content:229:(self)::Degraded composition still contains Nikita's personality."]],"TestLayer6Modifications":["245",["test_detect_mood_shift_in_message:248:(self)::Layer 6 detects mood shifts in user messages.","test_detect_memory_retrieval_trigger:262:(self)::Layer 6 detects memory retrieval needs.","test_apply_mood_shift_to_prompt:274:(self)::Layer 6 applies mood shift to current prompt.","test_process_memory_retrieval_modification:292:async (self)::Layer 6 processes memory retrieval with Graphiti mock.","test_compose_static_layer6:319:(self)::Layer 6 static section is included."]],"TestTokenBudgetCompliance":["330",["test_total_tokens_within_budget:333:(self)::Total composition stays within 4000 token budget.","test_layer_breakdown_sums_correctly:371:(self)::Layer breakdown token sum matches total."]],"TestEndToEndFlow":["390",["test_morning_conversation_flow:393:(self)::Simulate morning conversation start.","test_continuing_conversation_flow:415:(self)::Simulate continuing an active conversation.","test_reconnecting_after_gap:435:(self)::Simulate reconnecting after time apart."]]}],"t/context/test_composer_performance.py":["p",["create_realistic_package:25:(user_id)>ContextPackage::"],{"TestContextInjectionPerformance":["86",["test_composition_p99_under_150ms:89:(self):create_realistic_package:Full composition P99 should be under 150ms.","test_layer5_injection_p99_under_50ms:127:(self):create_realistic_package:Layer 5 injection P99 should be under 50ms."]],"TestPackageLoadPerformance":["153",["test_package_creation_p99_under_50ms:156:(self):create_realistic_package:Package creation (in-memory) P99 should be under 50ms.","test_package_serialization_p99_under_20ms:180:(self):create_realistic_package:Package JSON serialization P99 should be under 20ms."]],"TestRealisticDataSizes":["206",["test_with_maximum_expected_data:209:(self)::Test with maximum expected data sizes.","test_with_empty_data:252:(self)::Test with minimal/empty data (worst case for missing context)."]],"TestLayerPerformance":["274",["test_layer1_cached_access:277:(self)::Layer 1 (base personality) should be cached and fast.","test_layer2_composition:298:(self)::Layer 2 (chapter) composition performance.","test_layer3_composition:318:(self)::Layer 3 (emotional state) composition performance.","test_layer4_detection_and_composition:339:(self)::Layer 4 (situation) detection and composition performance.","test_layer6_trigger_detection:364:(self)::Layer 6 trigger detection performance."]]}],"t/context/test_layer1.py":["p",{"TestLayer1Loader":["20",["test_init_default_path:23:(self)::AC-T005.1: Loader initializes with default config path.","test_init_custom_path:28:(self, tmp_path)::AC-T005.1: Loader accepts custom config path.","test_load_config_from_default:34:(self)::AC-T005.1: Loads config from default path.","test_config_cached:44:(self)::AC-T005.2: Config is cached after first load.","test_prompt_cached:55:(self)::AC-T005.2: Prompt is cached after first load.","test_prompt_contains_nikita:66:(self)::AC-T005.1: Prompt contains Nikita's identity.","test_token_estimate_in_budget:74:(self)::AC-T005.3: Token estimate is within budget (~2000).","test_version_property:82:(self)::AC-T005.1: Version property returns config version.","test_get_identity:89:(self)::AC-T005.1: get_identity returns identity section.","test_get_traits:98:(self)::AC-T005.1: get_traits returns traits section.","test_get_values:108:(self)::AC-T005.1: get_values returns list of values.","test_get_speaking_style:117:(self)::AC-T005.1: get_speaking_style returns style preferences.","test_get_backstory:125:(self)::AC-T005.1: get_backstory returns backstory elements.","test_get_boundaries:133:(self)::AC-T005.1: get_boundaries returns boundaries.","test_validate_success:141:(self)::AC-T005.1: validate returns True for valid config.","test_validate_missing_section:149:(self, tmp_path)::AC-T005.1: validate catches missing sections.","test_file_not_found:161:(self, tmp_path)::AC-T005.1: Raises FileNotFoundError for missing file."]],"TestLayer1ModuleFunctions":["169",["test_get_layer1_loader_singleton:172:(self)::AC-T005.2: get_layer1_loader returns singleton.","test_get_base_personality_prompt:179:(self)::AC-T005.1: get_base_personality_prompt returns prompt."]],"TestLayer1FallbackPrompt":["188",["test_fallback_prompt_generated:191:(self, tmp_path)::AC-T005.1: Fallback prompt generated when template missing."]]}],"t/context/test_layer2.py":["p",{"TestLayer2Composer":["18",["test_init_default:21:(self)::AC-T007.1: Composer initializes properly.","test_compose_chapter_1:26:(self)::AC-T007.2, AC-T007.3: Compose chapter 1 prompt.","test_compose_chapter_2:37:(self)::AC-T007.2, AC-T007.3: Compose chapter 2 prompt.","test_compose_chapter_3:47:(self)::AC-T007.2, AC-T007.3: Compose chapter 3 prompt.","test_compose_chapter_4:57:(self)::AC-T007.2, AC-T007.3: Compose chapter 4 prompt.","test_compose_chapter_5:67:(self)::AC-T007.2, AC-T007.3: Compose chapter 5 prompt.","test_invalid_chapter_0:77:(self)::AC-T007.2: Invalid chapter 0 raises ValueError.","test_invalid_chapter_6:83:(self)::AC-T007.2: Invalid chapter 6 raises ValueError.","test_invalid_chapter_negative:89:(self)::AC-T007.2: Negative chapter raises ValueError.","test_token_estimate_within_budget:95:(self)::AC-T007.4: Token estimate is within budget (~300).","test_includes_intimacy_level:105:(self)::AC-T007.3: Output includes intimacy level.","test_includes_disclosure_patterns:116:(self)::AC-T007.3: Output includes disclosure patterns.","test_includes_behaviors:127:(self)::AC-T007.3: Output includes behaviors.","test_chapter_progression_changes:138:(self)::AC-T007.3: Different chapters have different prompts.","test_get_chapter_name:147:(self)::AC-T007.1: Get chapter name from number.","test_get_chapter_config:156:(self)::AC-T007.1: Get chapter config with all required fields."]],"TestLayer2ModuleFunctions":["167",["test_get_layer2_composer_singleton:170:(self)::AC-T007.1: get_layer2_composer returns singleton.","test_compose_convenience:177:(self)::AC-T007.1: Convenience function works."]]}],"t/context/test_layer3.py":["p",{"TestLayer3Composer":["20",["test_init_default:23:(self)::AC-T008.1: Composer initializes properly.","test_compose_neutral_state:28:(self)::AC-T008.2, AC-T008.3: Compose with neutral emotional state.","test_compose_high_arousal:43:(self)::AC-T008.2: Compose with high arousal state.","test_compose_low_arousal:56:(self)::AC-T008.2: Compose with low arousal state.","test_compose_positive_valence:69:(self)::AC-T008.2: Compose with positive valence.","test_compose_negative_valence:82:(self)::AC-T008.2: Compose with negative valence.","test_compose_high_dominance:95:(self)::AC-T008.2: Compose with high dominance.","test_compose_low_dominance:108:(self)::AC-T008.2: Compose with low dominance.","test_compose_high_intimacy:121:(self)::AC-T008.2: Compose with high intimacy.","test_compose_low_intimacy:134:(self)::AC-T008.2: Compose with low intimacy.","test_token_estimate_within_budget:147:(self)::AC-T008.5: Token estimate is within budget (~150).","test_default_neutral_state:159:(self)::AC-T008.3: Default state is neutral (0.5 all dimensions).","test_compose_with_none_returns_neutral:169:(self)::AC-T008.3: Composing with None returns neutral state prompt.","test_interface_for_spec023:181:(self)::AC-T008.4: Interface ready for Spec 023 integration."]],"TestLayer3ModuleFunctions":["200",["test_get_layer3_composer_singleton:203:(self)::AC-T008.1: get_layer3_composer returns singleton.","test_compose_convenience:210:(self)::AC-T008.1: Convenience function works."]]}],"t/context/test_layer4.py":["p",{"TestSituationType":["22",["test_situation_types_exist:25:(self)::AC-T009.2: All situation types defined.","test_situation_types_are_enum:32:(self)::AC-T009.2: SituationType is an enum."]],"TestLayer4Computer":["37",["test_init_default:40:(self)::AC-T009.1: Computer initializes properly.","test_detect_morning:45:(self)::AC-T009.2: Detect morning situation (5-11am).","test_detect_evening:59:(self)::AC-T009.2: Detect evening situation (6-11pm).","test_detect_after_gap:73:(self)::AC-T009.2: Detect after-gap situation (>4 hours since last).","test_detect_mid_conversation:86:(self)::AC-T009.2: Detect mid-conversation (active conv, <15 min since last).","test_compose_morning:99:(self)::AC-T009.3: Compose morning situational prompt.","test_compose_evening:111:(self)::AC-T009.3: Compose evening situational prompt.","test_compose_after_gap:123:(self)::AC-T009.3: Compose after-gap situational prompt.","test_compose_mid_conversation:135:(self)::AC-T009.3: Compose mid-conversation situational prompt.","test_token_estimate_within_budget:147:(self)::AC-T009.4: Token estimate is within budget (~150).","test_detect_and_compose:159:(self)::AC-T009.1, AC-T009.3: Full detection and composition flow.","test_different_situations_different_prompts:173:(self)::AC-T009.3: Each situation has unique prompt.","test_get_situation_hints:181:(self)::AC-T009.3: Get structured hints for each situation.","test_mid_conversation_priority_over_time:192:(self)::AC-T009.2: Mid-conversation takes priority over time-based situations."]],"TestLayer4ModuleFunctions":["208",["test_get_layer4_computer_singleton:211:(self)::AC-T009.1: get_layer4_computer returns singleton.","test_convenience_detection:218:(self)::AC-T009.1: Convenience function works."]]}],"t/context/test_layer5.py":["p",{"TestLayer5Injector":["25",["test_init_default:28:(self)::AC-T014.1: Injector initializes properly.","test_inject_with_full_package:33:(self)::AC-T014.1, AC-T014.2: Injects all context from package.","test_inject_with_empty_package:70:(self)::AC-T014.1: Handles package with minimal content.","test_inject_returns_none_when_no_package:86:(self)::AC-T014.1: Returns None when package is None.","test_formats_user_facts:94:(self)::AC-T014.2: Formats user_facts correctly.","test_formats_relationship_events:113:(self)::AC-T014.2: Formats relationship_events correctly.","test_formats_active_threads:131:(self)::AC-T014.2: Formats active_threads correctly.","test_formats_summaries:161:(self)::AC-T014.2: Formats today_summary and week_summaries.","test_formats_life_events:180:(self)::AC-T014.2: Formats life_events_today.","test_token_count_within_budget:197:(self)::AC-T014.3: Token count within budget (~500).","test_limits_user_facts:230:(self)::AC-T014.2: Limits user_facts to reasonable count.","test_limits_active_threads:249:(self)::AC-T014.2: Limits active_threads to reasonable count."]],"TestLayer5ModuleFunctions":["276",["test_get_layer5_injector_singleton:279:(self)::AC-T014.1: get_layer5_injector returns singleton.","test_injector_has_token_estimate:286:(self)::AC-T014.3: Injector provides token estimate property."]]}],"t/context/test_layer6.py":["p",{"TestModificationType":["25",["test_modification_types_exist:28:(self)::AC-T015.2: All modification types defined.","test_modification_types_are_enum:33:(self)::AC-T015.2: ModificationType is an enum."]],"TestPromptModification":["38",["test_prompt_modification_creation:41:(self)::AC-T015.1: PromptModification can be created."]],"TestLayer6Handler":["54",["test_init_default:57:(self)::AC-T015.1: Handler initializes properly.","test_detect_mood_shift:62:(self)::AC-T015.2: Detects mood shift triggers.","test_detect_memory_retrieval:75:(self)::AC-T015.2: Detects memory retrieval triggers.","test_detect_no_triggers:88:(self)::AC-T015.2: Returns empty list when no triggers.","test_apply_mood_shift:100:(self)::AC-T015.2: Applies mood shift modification.","test_retrieve_memory:119:async (self)::AC-T015.3: Retrieves memory via Graphiti.","test_retrieve_memory_no_results:141:async (self)::AC-T015.3: Handles no memory results gracefully.","test_process_modification_mood_shift:160:async (self)::AC-T015.1: Full process for mood shift.","test_process_modification_memory_retrieval:179:async (self)::AC-T015.1, AC-T015.3: Full process for memory retrieval.","test_compose_layer6_stub:206:(self)::AC-T015.1: Provides static Layer 6 section.","test_token_estimate:217:(self)::AC-T015.4: Has reasonable token estimate."]],"TestLayer6ModuleFunctions":["226",["test_get_layer6_handler_singleton:229:(self)::AC-T015.1: get_layer6_handler returns singleton.","test_handler_has_required_methods:236:(self)::AC-T015.1: Handler has all required methods."]]}],"t/context/test_package.py":["p",{"TestEmotionalState":["24",["test_default_values:27:(self)::All dimensions default to 0.5 (neutral).","test_valid_range:35:(self)::Dimensions must be between 0.0 and 1.0.","test_invalid_range_raises:41:(self)::Values outside 0-1 range should raise validation error.","test_to_description_high_energy:48:(self)::High arousal generates 'energetic' description.","test_to_description_low_energy:57:(self)::Low arousal generates 'tired' description."]],"TestActiveThread":["65",["test_basic_thread:68:(self)::Create a basic active thread.","test_thread_with_all_fields:75:(self)::Create thread with all fields populated."]],"TestContextPackage":["89",["test_required_fields_only:92:(self)::AC-T002.1: Create package with only user_id.","test_all_spec_fields_present:102:(self)::AC-T002.1: All fields from spec are present.","test_json_serialization:139:(self)::AC-T002.2: Serialization to JSON.","test_json_deserialization:159:(self)::AC-T002.2: Deserialization from JSON.","test_required_user_id:178:(self)::AC-T002.3: user_id is required.","test_user_facts_limit:183:(self)::AC-T002.3: user_facts limited to 20 items.","test_relationship_events_limit:191:(self)::AC-T002.3: relationship_events limited to 10 items.","test_week_summaries_limit:199:(self)::AC-T002.3: week_summaries limited to 7 items.","test_life_events_today_limit:207:(self)::AC-T015.3: life_events_today limited to 3 items (top by importance).","test_is_expired:217:(self)::Test expiration check.","test_token_estimate:231:(self)::Test token estimation."]],"TestComposedPrompt":["245",["test_basic_prompt:248:(self)::Create a basic composed prompt.","test_degraded_prompt:261:(self)::Create a degraded prompt (fallback mode)."]],"TestProcessingResult":["273",["test_successful_result:276:(self)::Create a successful processing result.","test_add_step:291:(self)::Test adding steps.","test_add_error:299:(self)::Test adding errors."]]}],"t/context/test_store.py":["p",["mock_session:22:()::","sample_package:29:()::"],{"TestPackageStoreInit":["41",["test_init_with_session:44:(self, mock_session)::AC-T003.1: Store initializes with session."]],"TestPackageStoreGet":["50",["test_get_returns_none_when_not_found:54:async (self, mock_session)::AC-T003.1: get() returns None when no package exists.","test_get_returns_package_when_found:68:async (self, mock_session, sample_package)::AC-T003.1: get() returns package when found.","test_get_latency_under_50ms:86:async (self, mock_session, sample_package)::AC-T003.4: get() completes in <50ms (mocked)."]],"TestPackageStoreSet":["105",["test_set_stores_package:109:async (self, mock_session, sample_package)::AC-T003.1: set() stores package.","test_set_with_custom_ttl:118:async (self, mock_session, sample_package)::AC-T003.3: set() supports custom TTL.","test_set_default_ttl_24h:128:async (self, mock_session, sample_package)::AC-T003.3: Default TTL is 24 hours."]],"TestPackageStoreDelete":["143",["test_delete_returns_true_when_deleted:147:async (self, mock_session)::AC-T003.1: delete() returns True when package deleted.","test_delete_returns_false_when_not_found:160:async (self, mock_session)::AC-T003.1: delete() returns False when no package existed."]],"TestPackageStoreCleanup":["172",["test_cleanup_expired_returns_count:176:async (self, mock_session)::AC-T003.3: cleanup_expired() removes expired packages."]],"TestPackageStoreExists":["189",["test_exists_returns_true_when_found:193:async (self, mock_session)::AC-T003.1: exists() returns True when package exists.","test_exists_returns_false_when_not_found:205:async (self, mock_session)::AC-T003.1: exists() returns False when no package."]]}],"t/context/test_token_validator.py":["p",{"TestTokenValidator":["18",["test_init_default:21:(self)::AC-T016.1: Validator initializes properly.","test_init_with_custom_budget:26:(self)::AC-T016.2: Validator accepts custom token budget.","test_count_tokens_simple:31:(self)::AC-T016.1: Counts tokens for simple text.","test_count_tokens_empty:42:(self)::AC-T016.1: Handles empty string.","test_count_tokens_long_text:50:(self)::AC-T016.1: Counts tokens for longer text.","test_validate_within_budget:63:(self)::AC-T016.2: Validates prompt within budget.","test_validate_exceeds_budget:75:(self)::AC-T016.2: Detects when prompt exceeds budget.","test_validate_exactly_at_budget:88:(self)::AC-T016.2: Handles prompt at exactly the budget.","test_truncate_text:101:(self)::AC-T016.3: Truncates text to fit budget.","test_truncate_preserves_short_text:113:(self)::AC-T016.3: Short text is not truncated.","test_truncate_adds_marker:123:(self)::AC-T016.3: Truncated text gets marker.","test_validate_layer_breakdown:134:(self)::AC-T016.2: Validates individual layer token counts.","test_validate_breakdown_exceeds_budget:152:(self)::AC-T016.2: Detects breakdown exceeding budget.","test_truncate_layers_to_fit:170:(self)::AC-T016.3: Truncates layers proportionally to fit budget.","test_layer_budgets:189:(self)::AC-T016.2: Provides layer-specific budgets."]],"TestValidationResult":["201",["test_validation_result_valid:204:(self)::ValidationResult for valid prompt.","test_validation_result_invalid:216:(self)::ValidationResult for invalid prompt.","test_validation_result_truncated:228:(self)::ValidationResult after truncation."]],"TestTokenValidatorModuleFunctions":["243",["test_get_token_validator_singleton:246:(self)::AC-T016.1: get_token_validator returns singleton.","test_default_budget:253:(self)::AC-T016.2: Default budget is 4000."]]}],"t/e2e/test_conversation_cycle.py":["p",{"TestConversationCycleE2E":["33",["user_id:37:(self)::Generate test user ID.","conversation_id:42:(self)::Generate test conversation ID.","sample_transcript:47:(self)::Create sample conversation transcript.","mock_graph_updater:58:(self)::Create mock graph updater.","mock_summary_generator:65:(self)::Create mock summary generator.","mock_layer_composer:72:(self, user_id)::Create mock layer composer.","mock_package_store:87:(self)::Create mock package store.","test_full_conversation_cycle:104:async (self, user_id, conversation_id, sample_transcript, mock_graph_updater, mock_summary_generator, mock_layer_composer, mock_package_store,)::","test_context_package_used_in_second_conversation:161:async (self, user_id, conversation_id, mock_graph_updater, mock_summary_generator, mock_layer_composer, mock_package_store,)::","test_graceful_degradation_when_package_missing:193:async (self, user_id, mock_package_store,)::","test_pipeline_trigger_integration:215:async (self, user_id, conversation_id, sample_transcript,)::Test trigger_pipeline function integrates with pipeline correctly.","test_background_trigger_exception_handling:253:async (self, user_id, conversation_id,)::Test background trigger handles exceptions gracefully.","test_partial_pipeline_failure_continues:275:async (self, user_id, conversation_id, sample_transcript, mock_graph_updater, mock_summary_generator, mock_layer_composer, mock_package_store,)::Test pipeline continues despite partial failures."]],"TestConversationCycleWithFeatureFlag":["304",["test_pipeline_disabled_skips_processing:308:async (self)::When feature flag is disabled, pipeline doesn't run.","test_pipeline_enabled_runs_processing:325:async (self)::When feature flag is enabled, pipeline runs."]]}],"t/e2e/test_life_simulation_cycle.py":["p",{"TestLifeSimulationCycleE2E":["33",["user_id:37:(self)::Generate test user ID.","conversation_id:42:(self)::Generate test conversation ID.","sample_events:47:(self, user_id)::Create sample life events for Nikita.","mock_graph_updater:104:(self)::Create mock graph updater.","mock_summary_generator:111:(self)::Create mock summary generator.","mock_package_store:118:(self)::Create mock package store.","test_conversation_triggers_event_generation:133:async (self, user_id, conversation_id, sample_events, mock_graph_updater, mock_summary_generator, mock_package_store,)::","test_next_conversation_has_events_in_context:188:async (self, user_id, sample_events,)::","test_events_referenced_naturally_in_responses:235:async (self, user_id, sample_events,)::"]],"TestMoodAffectsConversation":["271",["user_id:275:(self)::Generate test user ID.","test_positive_events_improve_mood:280:async (self, user_id)::Positive life events improve Nikita's mood for conversation.","test_negative_events_lower_mood:321:async (self, user_id)::Negative life events lower Nikita's mood for conversation.","test_mixed_events_balanced_mood:360:async (self, user_id)::Mix of events creates balanced mood."]],"TestEventGenerationTiming":["416",["user_id:420:(self)::Generate test user ID.","test_events_generated_for_next_day:425:async (self, user_id)::Events are generated for the next day after conversation.","test_existing_events_not_regenerated:460:async (self, user_id)::If events already exist for a day, don't regenerate."]]}],"t/emotional_state/test_computation.py":["p",["user_id:35:()::","computer:41:()::"],{"TestBaseStateCalculation":["46",["test_morning_increases_arousal:49:(self, computer)::AC-T005.2: Morning should increase arousal.","test_night_decreases_arousal:57:(self, computer)::AC-T005.2: Night should decrease arousal.","test_late_night_low_arousal:65:(self, computer)::Late night (2 AM) should have lowest arousal.","test_weekend_increases_valence:72:(self, computer)::AC-T005.3: Weekend should increase valence.","test_friday_anticipation:80:(self, computer)::Friday should have anticipation boost.","test_weekday_neutral_valence:97:(self, computer)::Weekday should have neutral valence.","test_all_dimensions_returned:106:(self, computer)::Base state should return all 4 dimensions.","test_values_clamped_to_range:116:(self, computer)::All values should be in 0.0-1.0 range."]],"TestLifeEventDeltas":["131",["test_positive_event_increases_valence:134:(self, computer)::Positive event should increase valence.","test_negative_event_decreases_valence:145:(self, computer)::Negative event should decrease valence.","test_multiple_events_combined:156:(self, computer)::Multiple events should be combined.","test_deltas_clamped:168:(self, computer)::Deltas should be clamped to prevent extreme swings.","test_empty_events_no_change:180:(self, computer)::Empty events list should return zero deltas."]],"TestConversationDeltas":["190",["test_supportive_increases_valence_intimacy:193:(self, computer)::AC-T007.4: Supportive tone increases valence and intimacy.","test_dismissive_decreases_valence_intimacy:201:(self, computer)::AC-T007.4: Dismissive tone decreases valence and intimacy.","test_romantic_increases_intimacy:209:(self, computer)::Romantic tone should increase intimacy significantly.","test_cold_decreases_intimacy:217:(self, computer)::Cold tone should decrease intimacy.","test_playful_increases_arousal:225:(self, computer)::Playful tone should increase arousal.","test_anxious_increases_arousal_decreases_dominance:233:(self, computer)::Anxious tone affects arousal and dominance.","test_neutral_no_effect:241:(self, computer)::Neutral tone should have minimal effect.","test_multiple_tones_combined:249:(self, computer)::Multiple tones should be combined.","test_conversation_deltas_clamped:257:(self, computer)::Conversation deltas should be clamped."]],"TestRelationshipModifier":["267",["test_chapter_1_lower_intimacy:270:(self, computer)::AC-T008.2: Chapter 1 has lower baseline intimacy.","test_chapter_5_higher_intimacy:277:(self, computer)::AC-T008.2: Chapter 5 has higher baseline intimacy.","test_high_score_positive_valence:284:(self, computer)::AC-T008.3: High relationship score increases valence.","test_low_score_negative_valence:290:(self, computer)::AC-T008.3: Low relationship score decreases valence.","test_neutral_score_no_valence_change:296:(self, computer)::Neutral score (0.5) should have no valence effect."]],"TestStateComputerOrchestration":["303",["test_compute_with_no_inputs:306:(self, computer, user_id)::Should compute base state with no additional inputs.","test_compute_with_current_state:316:(self, computer, user_id)::Should modify existing state.","test_compute_with_life_events:335:(self, computer, user_id)::Should apply life event deltas.","test_compute_with_conversation_tones:346:(self, computer, user_id)::Should apply conversation tone deltas.","test_compute_with_relationship_modifier:355:(self, computer, user_id)::Should apply relationship modifiers.","test_compute_combines_all_sources:367:(self, computer, user_id)::AC-T009.2: Should combine all sources.","test_compute_preserves_conflict_state:380:(self, computer, user_id)::Should preserve conflict state from current.","test_compute_clamps_all_dimensions:393:(self, computer, user_id)::AC-T009.3: All dimensions should be clamped to 0.0-1.0.","test_compute_with_specific_timestamp:409:(self, computer, user_id)::Should use provided timestamp for base state."]],"TestGetStateComputer":["420",["test_returns_state_computer:423:(self)::Should return StateComputer instance.","test_singleton_same_instance:428:(self)::Should return same instance."]]}],"t/emotional_state/test_conflict.py":["p",["user_id:28:()::","detector:34:()::"],{"TestConflictDetectorClass":["39",["test_has_threshold_maps:42:(self, detector)::AC-T011.1: Should have threshold maps.","test_has_detect_method:50:(self, detector)::AC-T011.2: Should have detect_conflict_state method.","test_supports_four_conflict_states:55:(self, detector)::AC-T011.3: Should support 4 conflict states.","test_has_valid_transitions:59:(self, detector)::Should have valid transitions map."]],"TestPassiveAggressiveDetection":["66",["test_no_ignored_messages:69:(self, detector, user_id)::Should not detect passive-aggressive with 0 ignored messages.","test_one_ignored_message:78:(self, detector, user_id)::Should not detect passive-aggressive with 1 ignored message.","test_two_ignored_messages_triggers:87:(self, detector, user_id)::AC-T012.1: Should detect passive-aggressive with 2+ ignored messages.","test_many_ignored_messages:96:(self, detector, user_id)::Should detect passive-aggressive with many ignored messages."]],"TestColdDetection":["107",["test_high_valence_not_cold:110:(self, detector, user_id)::Should not detect cold with high valence.","test_neutral_valence_not_cold:119:(self, detector, user_id)::Should not detect cold with neutral valence.","test_threshold_valence_not_cold:128:(self, detector, user_id)::Should not detect cold at exactly 0.3 valence.","test_low_valence_triggers_cold:137:(self, detector, user_id)::AC-T012.2: Should detect cold with valence < 0.3.","test_very_low_valence:146:(self, detector, user_id)::Should detect cold with very low valence."]],"TestVulnerableDetection":["157",["test_no_intimacy_drop:160:(self, detector, user_id)::Should not detect vulnerable without intimacy drop.","test_small_intimacy_drop:168:(self, detector, user_id)::Should not detect vulnerable with small intimacy drop.","test_threshold_intimacy_drop:176:(self, detector, user_id)::AC-T012.3: Should detect vulnerable with intimacy drop >= 0.2.","test_large_intimacy_drop:184:(self, detector, user_id)::Should detect vulnerable with large intimacy drop."]],"TestExplosiveDetection":["193",["test_high_arousal_only_not_explosive:196:(self, detector, user_id)::Should not detect explosive with only high arousal.","test_low_valence_only_not_explosive:206:(self, detector, user_id)::Should not detect explosive with only low valence.","test_explosive_requires_both_conditions:216:(self, detector, user_id)::AC-T012.4: Should detect explosive with arousal >= 0.8 AND valence < 0.3.","test_explosive_boundary_conditions:228:(self, detector, user_id)::Should not detect explosive at exactly boundary.","test_explosive_requires_valid_transition:240:(self, detector, user_id)::Should not jump to explosive from NONE."]],"TestStateTransitions":["253",["test_none_to_passive_aggressive_valid:256:(self, detector)::Can transition from NONE to PASSIVE_AGGRESSIVE.","test_none_to_cold_valid:262:(self, detector)::Can transition from NONE to COLD.","test_none_to_vulnerable_valid:266:(self, detector)::Can transition from NONE to VULNERABLE.","test_none_to_explosive_invalid:270:(self, detector)::AC-T013.2: Cannot jump from NONE to EXPLOSIVE.","test_cold_to_explosive_valid:276:(self, detector)::Can escalate from COLD to EXPLOSIVE.","test_vulnerable_to_explosive_valid:280:(self, detector)::Can escalate from VULNERABLE to EXPLOSIVE.","test_explosive_to_none_invalid:286:(self, detector)::Cannot de-escalate directly from EXPLOSIVE to NONE.","test_explosive_to_cold_valid:292:(self, detector)::AC-T013.3: Can de-escalate from EXPLOSIVE to COLD.","test_cold_to_none_valid:296:(self, detector)::Can de-escalate from COLD to NONE.","test_same_state_valid:300:(self, detector)::Staying in same state is valid."]],"TestApplyTransition":["306",["test_apply_valid_transition:309:(self, detector, user_id)::Should apply valid transition.","test_apply_invalid_transition_raises:323:(self, detector, user_id)::Should raise ValueError for invalid transition."]],"TestCheckEscalation":["334",["test_no_escalation_needed:337:(self, detector, user_id)::Should not escalate when no conflict detected.","test_escalation_detected:352:(self, detector, user_id)::Should detect escalation when triggers met.","test_escalation_from_cold_to_explosive:366:(self, detector, user_id)::Should escalate from cold to explosive when conditions met."]],"TestCheckDeEscalation":["381",["test_no_de_escalation_from_none:384:(self, detector, user_id)::Should not de-escalate from NONE.","test_de_escalation_from_explosive:395:(self, detector, user_id)::Should de-escalate from EXPLOSIVE with positive interaction.","test_de_escalation_from_cold:410:(self, detector, user_id)::Should de-escalate from COLD with positive interaction and high valence.","test_de_escalation_from_vulnerable:425:(self, detector, user_id)::Should de-escalate from VULNERABLE with support.","test_de_escalation_from_passive_aggressive:440:(self, detector, user_id)::Should de-escalate from PASSIVE_AGGRESSIVE with engagement.","test_no_de_escalation_without_positive_interaction:455:(self, detector, user_id)::Should not de-escalate without positive interaction (in most cases)."]],"TestGetConflictDetector":["471",["test_returns_conflict_detector:474:(self)::Should return ConflictDetector instance.","test_singleton_same_instance:479:(self)::Should return same instance."]],"TestSeverityOrder":["486",["test_severity_order_exists:489:(self, detector)::Should have severity order.","test_none_is_lowest_severity:494:(self, detector)::NONE should be lowest severity.","test_explosive_is_highest_severity:498:(self, detector)::EXPLOSIVE should be highest severity.","test_get_severity_method:502:(self, detector)::Should get correct severity levels."]],"TestTriggerReasons":["508",["test_passive_aggressive_trigger_reason:511:(self, detector, user_id)::Should generate passive-aggressive trigger reason.","test_cold_trigger_reason:518:(self, detector, user_id)::Should generate cold trigger reason.","test_explosive_trigger_reason:524:(self, detector, user_id)::Should generate explosive trigger reason."]]}],"t/emotional_state/test_integration.py":["p",{"TestLayer3ComposerEmotionalStateModel":["30",["test_compose_with_emotional_state_model_no_conflict:33:(self)::Should compose without conflict state section when NONE.","test_compose_with_passive_aggressive_conflict:57:(self)::Should show passive aggressive conflict state and behaviors.","test_compose_with_cold_conflict:80:(self)::Should show cold conflict state and behaviors.","test_compose_with_vulnerable_conflict:102:(self)::Should show vulnerable conflict state and behaviors.","test_compose_with_explosive_conflict:124:(self)::Should show explosive conflict state and behaviors.","test_compose_backwards_compatible_with_emotional_state:146:(self)::Should still work with simple EmotionalState from package.py.","test_compose_with_none_uses_default:165:(self)::Should use default neutral state when None passed."]],"TestLayer3ComposerConflictBehaviors":["176",["test_conflict_behavior_overrides_arousal_impact:179:(self)::In conflict, conflict behaviors should replace arousal impacts.","test_no_conflict_uses_standard_behaviors:201:(self)::Without conflict, should use standard emotional impacts."]],"TestLayer3ComposerConvenienceFunction":["221",["test_convenience_function_accepts_emotional_state_model:224:(self)::compose_emotional_state_layer should accept EmotionalStateModel.","test_convenience_function_accepts_none:238:(self)::compose_emotional_state_layer should accept None."]],"TestLayer3ComposerSingleton":["245",["test_get_layer3_composer_returns_same_instance:248:(self)::Should return singleton instance."]],"TestLayerComposerStateComputerIntegration":["256",["mock_user:260:(self)::Create mock user.","test_layer_composer_calls_state_computer:269:async (self, mock_user)::AC-T019.1: LayerComposer should call StateComputer.compute().","test_layer_composer_passes_life_events_to_state_computer:314:async (self, mock_user)::StateComputer should receive life events from LifeSimulator.","test_layer_composer_fallback_on_state_computer_error:359:async (self, mock_user)::Should use fallback when StateComputer fails."]],"TestContextPackageConflictState":["386",["test_situation_hints_includes_conflict_state:390:async (self)::AC-T019.3: situation_hints should include conflict_state.","test_nikita_mood_populated_from_state_computer:485:async (self)::AC-T019.2: nikita_mood should be populated from StateComputer."]],"TestLifeSimulatorIntegration":["580",["mock_user:584:(self)::Create mock user.","test_life_event_emotional_impact_converted_correctly:593:async (self, mock_user)::AC-T020.2: Events with emotional_impact should be processed correctly.","test_multiple_life_events_converted:639:async (self, mock_user)::AC-T020.1: Multiple LifeSimulator events should feed into StateComputer.","test_life_event_without_emotional_impact_ignored:689:async (self, mock_user)::Events without emotional_impact should be skipped.","test_life_simulator_error_handled_gracefully:728:async (self, mock_user)::Should continue without events if LifeSimulator fails.","test_empty_life_events_handled:756:async (self, mock_user)::Should handle empty event list correctly."]],"TestStateComputerLifeEventProcessing":["783",["test_state_computer_applies_single_event_impact:786:(self)::StateComputer should apply life event deltas to emotional state.","test_state_computer_applies_multiple_event_impacts:813:(self)::StateComputer should sum deltas from multiple events.","test_state_computer_clamps_extreme_deltas:838:(self)::StateComputer should clamp extreme cumulative deltas."]],"TestE2EPipeline":["869",["state_computer:873:(self)::Create real StateComputer.","conflict_detector:879:(self)::Create real ConflictDetector.","recovery_manager:885:(self)::Create real RecoveryManager.","test_full_pipeline_events_to_state_to_context:892:(self, state_computer, conflict_detector)::AC-T021.1: Full pipeline from events \u2192 state \u2192 context.","test_conversation_tone_affects_emotional_state:938:(self, state_computer)::AC-T021.2: Conversation tone should affect emotional state.","test_state_computation_deterministic:964:(self, state_computer)::AC-T021.3: Same inputs should produce same state (determinism)."]],"TestStateStore":["1002",["test_state_model_serializes_to_db:1005:(self)::State should serialize for database storage.","test_state_model_deserializes_from_db:1029:(self)::State should deserialize from database row."]],"TestEventStateCorrelation":["1063",["test_positive_events_improve_state:1066:(self)::Positive life events should improve emotional state.","test_negative_events_worsen_state:1095:(self)::Negative life events should worsen emotional state.","test_chapter_progression_affects_intimacy:1119:(self)::Higher chapters should have higher baseline intimacy."]],"TestConflictDetectionAccuracy":["1142",["detector:1146:(self)::Create ConflictDetector.","test_low_valence_triggers_cold_conflict:1151:(self, detector)::Low valence should trigger COLD conflict.","test_high_arousal_low_valence_triggers_explosive:1167:(self, detector)::High arousal + low valence should trigger EXPLOSIVE conflict.","test_normal_state_no_conflict:1185:(self, detector)::Normal balanced state should have no conflict.","test_ignored_messages_trigger_passive_aggressive:1201:(self, detector)::2+ ignored messages should trigger PASSIVE_AGGRESSIVE."]],"TestRecoveryMechanics":["1219",["manager:1223:(self)::Create RecoveryManager.","test_apology_enables_recovery:1228:(self, manager)::Apology approach should enable recovery from conflict.","test_dismissive_blocks_recovery:1251:(self, manager)::Dismissive approach should block recovery.","test_full_recovery_clears_conflict:1269:(self, manager)::Full recovery should clear conflict state.","test_no_conflict_no_recovery_needed:1296:(self, manager)::Should detect when no recovery is needed."]]}],"t/emotional_state/test_models.py":["p",{"TestConflictState":["27",["test_conflict_state_values:30:(self)::ConflictState should have 5 distinct states.","test_conflict_state_count:38:(self)::Should have exactly 5 conflict states.","test_conflict_state_from_string:42:(self)::ConflictState should be creatable from string."]],"TestEmotionalStateModelCreation":["49",["user_id:53:(self)::Generate test user ID.","test_create_with_defaults:57:(self, user_id)::Should create with default values (0.5 for all dimensions).","test_create_with_custom_dimensions:70:(self, user_id)::Should create with custom dimension values.","test_create_with_conflict_state:85:(self, user_id)::Should create with conflict state and auto-set timestamp.","test_conflict_state_from_string:97:(self, user_id)::Should accept conflict_state as string.","test_invalid_conflict_state_defaults_to_none:106:(self, user_id)::Invalid conflict_state string should default to NONE.","test_state_id_auto_generated:115:(self, user_id)::state_id should be auto-generated if not provided.","test_timestamps_auto_set:120:(self, user_id)::Timestamps should be auto-set to now."]],"TestEmotionalStateModelValidation":["130",["user_id:134:(self)::Generate test user ID.","test_arousal_below_zero_rejected:138:(self, user_id)::Arousal below 0.0 should be rejected.","test_arousal_above_one_rejected:144:(self, user_id)::Arousal above 1.0 should be rejected.","test_valence_below_zero_rejected:150:(self, user_id)::Valence below 0.0 should be rejected.","test_valence_above_one_rejected:156:(self, user_id)::Valence above 1.0 should be rejected.","test_dominance_below_zero_rejected:162:(self, user_id)::Dominance below 0.0 should be rejected.","test_dominance_above_one_rejected:168:(self, user_id)::Dominance above 1.0 should be rejected.","test_intimacy_below_zero_rejected:174:(self, user_id)::Intimacy below 0.0 should be rejected.","test_intimacy_above_one_rejected:180:(self, user_id)::Intimacy above 1.0 should be rejected.","test_boundary_values_accepted:186:(self, user_id)::Boundary values 0.0 and 1.0 should be accepted.","test_ignored_message_count_non_negative:206:(self, user_id)::ignored_message_count should not be negative."]],"TestEmotionalStateModelConflictValidation":["213",["user_id:217:(self)::Generate test user ID.","test_conflict_started_at_auto_set_when_in_conflict:221:(self, user_id)::conflict_started_at should be auto-set when entering conflict.","test_conflict_started_at_cleared_when_none:231:(self, user_id)::conflict_started_at should be cleared when conflict is NONE."]],"TestApplyDeltas":["253",["user_id:257:(self)::Generate test user ID.","base_state:262:(self, user_id)::Create a base state at midpoint values.","test_apply_positive_deltas:272:(self, base_state)::Should apply positive deltas correctly.","test_apply_negative_deltas:286:(self, base_state)::Should apply negative deltas correctly.","test_deltas_clamped_to_max:300:(self, base_state)::Deltas should be clamped at 1.0 max.","test_deltas_clamped_to_min:310:(self, base_state)::Deltas should be clamped at 0.0 min.","test_apply_deltas_preserves_conflict_state:320:(self, user_id)::apply_deltas should preserve conflict state.","test_apply_deltas_preserves_ids:333:(self, base_state)::apply_deltas should preserve state_id and user_id.","test_apply_deltas_updates_timestamp:340:(self, base_state)::apply_deltas should update last_updated timestamp."]],"TestSetConflict":["347",["user_id:351:(self)::Generate test user ID.","neutral_state:356:(self, user_id)::Create a neutral state with no conflict.","test_set_conflict_state:360:(self, neutral_state)::Should set conflict state correctly.","test_set_conflict_none_clears_fields:371:(self, user_id)::Setting conflict to NONE should clear related fields.","test_set_conflict_preserves_dimensions:385:(self, user_id)::set_conflict should preserve emotional dimensions."]],"TestToDescription":["403",["user_id:407:(self)::Generate test user ID.","test_low_arousal_description:411:(self, user_id)::Low arousal should describe as tired/low-energy.","test_high_arousal_description:417:(self, user_id)::High arousal should describe as energetic.","test_low_valence_description:423:(self, user_id)::Low valence should describe as negative mood.","test_high_valence_description:429:(self, user_id)::High valence should describe as positive mood.","test_conflict_state_in_description:435:(self, user_id)::Conflict state should be included in description.","test_explosive_conflict_description:444:(self, user_id)::Explosive conflict should mention upset."]],"TestDatabaseSerialization":["454",["user_id:458:(self)::Generate test user ID.","test_model_dump_for_db:462:(self, user_id)::Should convert to database-compatible dict.","test_from_db_row:490:(self, user_id)::Should create instance from database row.","test_roundtrip_serialization:519:(self, user_id)::Should survive roundtrip through DB format."]]}],"t/emotional_state/test_recovery.py":["p",["user_id:30:()::","manager:36:()::"],{"TestRecoveryManagerClass":["41",["test_has_can_recover_method:44:(self, manager)::AC-T015.2: Should have can_recover method.","test_has_apply_recovery_method:49:(self, manager)::AC-T015.3: Should have apply_recovery method.","test_has_approach_rates:54:(self, manager)::Should have approach rates configured.","test_has_decay_rates:60:(self, manager)::Should have decay rates configured."]],"TestCanRecover":["66",["test_cannot_recover_from_none:69:(self, manager, user_id)::Should not recover from NONE state.","test_can_recover_from_conflict:77:(self, manager, user_id)::Should allow recovery from conflict state.","test_cannot_recover_with_dismissive:85:(self, manager, user_id)::Should block recovery with dismissive approach.","test_can_recover_with_apologetic:93:(self, manager, user_id)::Should allow recovery with apologetic approach.","test_can_recover_with_validating:101:(self, manager, user_id)::Should allow recovery with validating approach.","test_can_recover_with_defensive:109:(self, manager, user_id)::Should allow (but hard) recovery with defensive approach."]],"TestApplyRecovery":["119",["test_apply_recovery_with_apologetic:122:(self, manager, user_id)::Should apply recovery with apologetic approach.","test_apply_recovery_blocked_by_dismissive:135:(self, manager, user_id)::Should block recovery with dismissive approach.","test_apply_recovery_updates_progress:148:(self, manager, user_id)::Should update recovery progress in metadata.","test_apply_recovery_accumulates_progress:160:(self, manager, user_id)::Should accumulate progress across multiple interactions.","test_apply_recovery_de_escalates_when_threshold_met:172:(self, manager, user_id)::Should de-escalate when threshold is met.","test_apply_recovery_de_escalates_explosive_to_cold:189:(self, manager, user_id)::Should de-escalate EXPLOSIVE to COLD, not directly to NONE.","test_apply_recovery_intensity_affects_amount:206:(self, manager, user_id)::Should scale recovery by intensity."]],"TestRecoveryRateCalculation":["219",["test_apologetic_fastest_recovery:222:(self, manager)::AC-T016.2: Apology = fastest recovery.","test_validating_fast_recovery:233:(self, manager)::AC-T016.2: Validation = fast recovery.","test_dismissive_no_recovery:244:(self, manager)::AC-T016.3: Dismissive = no recovery.","test_defensive_minimal_recovery:252:(self, manager)::Defensive = minimal recovery.","test_explosive_harder_to_recover:263:(self, manager)::Explosive state should be harder to recover from.","test_rate_depends_on_approach:274:(self, manager)::AC-T016.1: Recovery rate depends on user's approach."]],"TestDecayBasedRecovery":["293",["test_no_decay_from_none:296:(self, manager, user_id)::Should not decay from NONE state.","test_no_decay_during_cooldown:307:(self, manager, user_id)::Should not decay during cooldown period.","test_decay_after_cooldown:321:(self, manager, user_id)::Should apply decay after cooldown period.","test_decay_rate_configurable_per_state:336:(self, manager)::AC-T017.2: Decay rate configurable per conflict state.","test_explosive_slowest_decay:344:(self, manager)::AC-T017.1: Explosive should have slowest decay (needs 6+ days).","test_passive_aggressive_fastest_decay:354:(self, manager)::Passive-aggressive should have fastest decay (2-3 days).","test_decay_updates_metadata:363:(self, manager, user_id)::Should update decay metadata.","test_full_decay_recovery_after_days:379:(self, manager, user_id)::Should fully recover after enough days of decay."]],"TestDeEscalationPaths":["402",["test_explosive_de_escalates_to_cold:405:(self, manager)::EXPLOSIVE should de-escalate to COLD.","test_cold_de_escalates_to_none:410:(self, manager)::COLD should de-escalate to NONE.","test_vulnerable_de_escalates_to_none:415:(self, manager)::VULNERABLE should de-escalate to NONE.","test_passive_aggressive_de_escalates_to_none:420:(self, manager)::PASSIVE_AGGRESSIVE should de-escalate to NONE.","test_none_stays_none:425:(self, manager)::NONE should stay NONE."]],"TestEstimatedRecoveryTime":["431",["test_no_time_from_none:434:(self, manager, user_id)::Should return zero time from NONE.","test_faster_with_apologetic:445:(self, manager, user_id)::Should estimate faster recovery with apologetic approach.","test_dismissive_falls_back_to_decay:457:(self, manager, user_id)::Should use decay estimate for dismissive approach."]],"TestGetRecoveryManager":["470",["test_returns_recovery_manager:473:(self)::Should return RecoveryManager instance.","test_singleton_same_instance:478:(self)::Should return same instance."]],"TestRecoveryResult":["485",["test_default_values:488:(self)::Should have sensible defaults.","test_custom_values:497:(self)::Should accept custom values."]]}],"t/emotional_state/test_store.py":["p",["user_id:55:()::","mock_session:61:()::","mock_session_factory:70:(mock_session):factory:","store:79:(mock_session_factory)::"],{"MockMappings":["30",["__init__:33:(self, rows:list[dict[str, Any]] | None = None)::","first:36:(self)>dict[str, Any] | None::","all:39:(self)>list[dict[str, Any]]::"]],"MockResult":["43",["__init__:46:(self, rows:list[dict[str, Any]] | None = None, rowcount:int = 0)::","mappings:50:(self)>MockMappings::"]],"TestStateStoreGetCurrentState":["84",["test_get_current_state_returns_latest:88:async (self, store, mock_session, user_id)::Should return the most recent state for a user.","test_get_current_state_returns_none_if_not_found:117:async (self, store, mock_session, user_id)::Should return None if no state exists for user.","test_get_current_state_handles_conflict_state:126:async (self, store, mock_session, user_id)::Should properly deserialize conflict states."]],"TestStateStoreSaveState":["156",["test_save_state_inserts_new_record:160:async (self, store, mock_session, user_id)::Should insert a new state record.","test_save_state_with_conflict:177:async (self, store, mock_session, user_id)::Should save state with conflict information.","test_save_state_with_metadata:193:async (self, store, mock_session, user_id)::Should save state with metadata."]],"TestStateStoreUpdateState":["207",["test_update_state_creates_if_not_exists:211:async (self, store, mock_session, user_id)::Should create new state if none exists.","test_update_state_modifies_existing:233:async (self, store, mock_session, user_id)::Should update existing state.","test_update_state_partial_update:270:async (self, store, mock_session, user_id)::Should only update specified fields."]],"TestStateStoreHistory":["307",["test_get_state_history:311:async (self, store, mock_session, user_id)::Should return historical states.","test_get_conflict_history:354:async (self, store, mock_session, user_id)::Should return only states with conflict."]],"TestStateStoreDelete":["382",["test_delete_state:386:async (self, store, mock_session)::Should delete a specific state.","test_delete_state_not_found:397:async (self, store, mock_session)::Should return False if state not found.","test_delete_user_states:407:async (self, store, mock_session, user_id)::Should delete all states for a user."]],"TestStateStoreGetState":["416",["test_get_state_by_id:420:async (self, store, mock_session)::Should retrieve state by ID.","test_get_state_not_found:449:async (self, store, mock_session)::Should return None if state not found."]],"TestGetStateStore":["458",["test_get_state_store_returns_instance:461:(self)::Should return StateStore instance.","test_get_state_store_singleton:466:(self)::Should return same instance on multiple calls."]]}],"t/life_simulation/test_entity_manager.py":["p",{"TestEntityManager":["22",["mock_store:26:(self)::Create mock EventStore.","manager:37:(self, mock_store)::Create manager with mock store.","user_id:42:(self)::Test user ID.","test_seed_entities_creates_defaults:49:async (self, manager, mock_store, user_id)::Seed entities creates default set for new user.","test_seed_entities_skips_existing:61:async (self, manager, mock_store, user_id)::Seed entities skips if user already has entities.","test_seed_entities_includes_colleagues:78:async (self, manager, mock_store, user_id)::Seed data includes multiple colleagues.","test_seed_entities_includes_friends:89:async (self, manager, mock_store, user_id)::Seed data includes friends.","test_seed_entities_includes_places:100:async (self, manager, mock_store, user_id)::Seed data includes recurring places.","test_seed_entities_includes_projects:111:async (self, manager, mock_store, user_id)::Seed data includes projects.","test_get_entities_by_type_colleagues:124:async (self, manager, mock_store, user_id)::Get entities by type returns matching entities.","test_get_colleagues_convenience_method:143:async (self, manager, mock_store, user_id)::get_colleagues() is a convenience wrapper.","test_get_friends_convenience_method:154:async (self, manager, mock_store, user_id)::get_friends() is a convenience wrapper.","test_get_places_convenience_method:165:async (self, manager, mock_store, user_id)::get_places() is a convenience wrapper.","test_get_projects_convenience_method:176:async (self, manager, mock_store, user_id)::get_projects() is a convenience wrapper.","test_get_all_entities:189:async (self, manager, mock_store, user_id)::Get all entities returns full list.","test_add_entity:202:async (self, manager, mock_store, user_id)::Add entity saves to store.","test_entity_exists:217:async (self, manager, mock_store, user_id)::Check if entity exists delegates to store.","test_entity_not_exists:227:async (self, manager, mock_store, user_id)::Check non-existent entity returns False.","test_get_entity_names:236:async (self, manager, mock_store, user_id)::Get entity names grouped by type.","test_get_entity_context_empty:252:async (self, manager, mock_store, user_id)::Get entity context for user with no entities.","test_get_entity_context_with_entities:261:async (self, manager, mock_store, user_id)::Get entity context formats as natural language."]],"TestDefaultEntities":["281",["test_default_entities_not_empty:284:(self)::Default entities list has content.","test_default_entities_have_all_types:288:(self)::Default entities cover all entity types.","test_default_entities_have_descriptions:296:(self)::All default entities have descriptions.","test_default_entities_have_relationships:302:(self)::All default entities have relationship context."]],"TestGetEntityManager":["309",["test_singleton_pattern:312:(self)::get_entity_manager returns same instance."]]}],"t/life_simulation/test_event_generator.py":["p",{"TestEventGenerator":["32",["mock_entity_manager:36:(self)::Create mock EntityManager.","mock_llm_response:50:(self)::Create mock LLM response with 3 events.","mock_llm_client:88:(self, mock_llm_response)::Create mock LLM client.","generator:93:(self, mock_entity_manager, mock_llm_client)::Create generator with mocks.","user_id:101:(self)::Test user ID.","test_generate_events_returns_list:108:async (self, generator, user_id)::Generate events returns a list of LifeEvent objects.","test_generate_events_returns_3_to_5:116:async (self, generator, user_id)::Generate events returns 3-5 events (AC-T009.2).","test_generate_events_sets_user_id:123:async (self, generator, user_id)::Generated events have correct user_id.","test_generate_events_sets_date:131:async (self, generator, user_id)::Generated events have correct date.","test_events_distributed_across_domains:142:async (self, generator, user_id)::Events are distributed across domains (AC-T009.3).","test_events_have_valid_domains:151:async (self, generator, user_id)::All events have valid domains.","test_events_have_valid_event_types:159:async (self, generator, user_id)::All events have valid event types.","test_events_distributed_across_time:167:async (self, generator, user_id)::Events are distributed across times of day.","test_events_reference_known_entities:178:async (self, generator, user_id)::Events reference known entities (AC-T009.4).","test_work_events_reference_colleagues:187:async (self, generator, user_id)::Work events may reference colleagues.","test_events_have_emotional_impact:200:async (self, generator, user_id)::Events have emotional impact computed (AC-T009.5).","test_emotional_impact_within_bounds:209:async (self, generator, user_id)::Emotional impact values are within valid bounds.","test_events_have_importance:219:async (self, generator, user_id)::Events have importance scores.","test_build_prompt_includes_date:228:(self, generator)::Prompt includes the event date.","test_build_prompt_includes_entities:241:(self, generator)::Prompt includes known entities.","test_build_prompt_includes_arcs:262:(self, generator, user_id)::Prompt includes active narrative arcs.","test_build_prompt_includes_valid_event_types:283:(self, generator)::Prompt includes valid event types for each domain."]],"TestGeneratedEventConversion":["297",["generator:301:(self)::Create generator with mocks.","user_id:309:(self)::Test user ID.","test_convert_valid_event:313:(self, generator, user_id)::Convert valid generated event to LifeEvent.","test_convert_invalid_domain_fallback:341:(self, generator, user_id)::Invalid domain falls back to PERSONAL.","test_convert_invalid_event_type_fallback:366:(self, generator, user_id)::Invalid event type falls back to first type for domain.","test_convert_emotional_scaling:394:(self, generator, user_id)::Emotional values are scaled to delta range."]],"TestGetEventGenerator":["423",["test_singleton_pattern:426:(self)::get_event_generator returns same instance."]]}],"t/life_simulation/test_integration.py":["p",{"TestFullEventGenerationPipeline":["29",["test_pipeline_generates_events_and_stores:33:async (self)::Full pipeline: generate events, store, retrieve.","test_pipeline_handles_existing_events:112:async (self)::Pipeline returns existing events instead of regenerating.","test_pipeline_with_narrative_arcs:147:async (self)::Pipeline includes active arcs in event generation."]],"TestContextPackagePopulation":["189",["mock_session_context:193:(self):__aenter__,__aexit__,__init__:Create mock session context manager.","__init__:197:(self, session)::","__aenter__:200:async (self)::","__aexit__:203:async (self, exc_type, exc_val, exc_tb)::","mock_layer_composers:209:(self)::Create mock layer composers.","test_context_package_gets_life_events:229:async (self, mock_session_context, mock_layer_composers):mock_session_context:LayerComposer populates life_events_today from LifeSimulator.","test_context_package_limits_to_top_3:313:async (self, mock_session_context, mock_layer_composers):mock_session_context:LayerComposer gets top 3 events by importance."]],"TestMoodDerivation":["383",["test_mood_derived_from_recent_events:387:async (self)::LifeSimulator derives mood from recent events.","test_mood_summarized_as_natural_language:429:async (self)::LifeSimulator generates mood summary.","mock_session_context:458:(self):__aenter__,__aexit__,__init__:Create mock session context manager.","__init__:462:(self, session)::","__aenter__:465:async (self)::","__aexit__:468:async (self, exc_type, exc_val, exc_tb)::","mock_layer_composers:474:(self)::Create mock layer composers.","test_context_package_mood_from_simulator:494:async (self, mock_session_context, mock_layer_composers):mock_session_context:"]],"TestPipelineIntegrationWithLifeSimulation":["569",["test_full_pipeline_includes_life_simulation_step:573:async (self)::PostProcessingPipeline includes life simulation step."]]}],"t/life_simulation/test_models.py":["p",{"TestEventDomain":["29",["test_all_domains_exist:32:(self)::All three domains exist.","test_domain_count:38:(self)::Exactly 3 domains."]],"TestEventType":["43",["test_work_event_types:46:(self)::Work domain has correct event types.","test_social_event_types:57:(self)::Social domain has correct event types.","test_personal_event_types:67:(self)::Personal domain has correct event types."]],"TestEmotionalImpact":["79",["test_default_values:82:(self)::Default impact is zero.","test_valid_positive_impact:90:(self)::Positive impacts within bounds.","test_valid_negative_impact:101:(self)::Negative impacts within bounds.","test_arousal_out_of_bounds:111:(self)::Arousal delta must be within -0.3 to 0.3.","test_intimacy_out_of_bounds:116:(self)::Intimacy delta must be within -0.1 to 0.1.","test_to_dict:121:(self)::Convert to dictionary."]],"TestLifeEvent":["130",["user_id:134:(self)::Test user ID.","test_create_work_event:138:(self, user_id)::Create a work domain event.","test_create_social_event:154:(self, user_id)::Create a social domain event.","test_create_personal_event:168:(self, user_id)::Create a personal domain event.","test_event_type_domain_validation:181:(self, user_id)::Event type must match domain (AC-T002.3).","test_description_min_length:194:(self, user_id)::Description must be at least 10 characters.","test_importance_bounds:206:(self, user_id)::Importance must be between 0.0 and 1.0.","test_default_importance:219:(self, user_id)::Default importance is 0.5.","test_event_id_auto_generated:231:(self, user_id)::Event ID is auto-generated if not provided.","test_model_dump_for_db:243:(self, user_id)::Convert to database-compatible dictionary."]],"TestNarrativeArc":["262",["user_id:266:(self)::Test user ID.","test_create_arc:270:(self, user_id)::Create a narrative arc.","test_arc_status_transitions:285:(self, user_id)::Arc status can be updated.","test_arc_type_min_length:298:(self, user_id)::Arc type must be at least 3 characters.","test_model_dump_for_db:308:(self, user_id)::Convert to database-compatible dictionary."]],"TestNikitaEntity":["322",["user_id:326:(self)::Test user ID.","test_create_colleague:330:(self, user_id)::Create a colleague entity.","test_create_friend:342:(self, user_id)::Create a friend entity.","test_create_place:353:(self, user_id)::Create a place entity.","test_create_project:363:(self, user_id)::Create a project entity.","test_name_required:373:(self, user_id)::Name is required.","test_model_dump_for_db:382:(self, user_id)::Convert to database-compatible dictionary."]],"TestTimeOfDay":["395",["test_all_times_exist:398:(self)::All four times of day exist."]],"TestArcStatus":["406",["test_all_statuses_exist:409:(self)::All arc statuses exist."]]}],"t/life_simulation/test_mood_calculator.py":["p",{"TestMoodState":["29",["test_default_values:32:(self)::Default mood is neutral (0.5).","test_custom_values:40:(self)::Custom mood values are accepted.","test_clamping_high:46:(self)::Values above 1.0 are clamped.","test_clamping_low:52:(self)::Values below 0.0 are clamped.","test_to_dict:58:(self)::Convert to dictionary."]],"TestMoodCalculator":["68",["calculator:72:(self)::Create calculator instance.","user_id:77:(self)::Test user ID.","bad_meeting_event:82:(self, user_id)::Create bad meeting event (negative valence).","coffee_with_friend_event:101:(self, user_id)::Create coffee with friend event (positive valence).","gym_event:119:(self, user_id)::Create gym event (positive arousal and valence).","test_empty_events_returns_neutral:135:(self, calculator)::Empty event list returns neutral mood (AC-T005.2).","test_single_negative_event:143:(self, calculator, bad_meeting_event)::Single negative event lowers valence (AC-T005.4).","test_single_positive_event:153:(self, calculator, coffee_with_friend_event)::Single positive event raises valence (AC-T005.4).","test_multiple_events_cumulative:163:(self, calculator, bad_meeting_event, coffee_with_friend_event, gym_event)::Multiple events have cumulative effect (AC-T005.4).","test_mood_dimensions_exist:177:(self, calculator, gym_event)::All 4 mood dimensions are returned (AC-T005.3).","test_compute_from_single_event:186:(self, calculator, gym_event)::compute_from_event convenience method works.","test_clamping_prevents_overflow:191:(self, calculator, user_id)::Cumulative deltas are clamped to valid range.","test_clamping_prevents_underflow:217:(self, calculator, user_id)::Cumulative negative deltas are clamped.","test_custom_base_mood:239:(self, user_id)::Calculator can use custom base mood."]],"TestMoodDescriptions":["259",["calculator:263:(self)::Create calculator instance.","test_describe_neutral:267:(self, calculator)::Neutral mood description.","test_describe_happy_energetic:273:(self, calculator)::Happy and energetic mood description.","test_describe_tired_upset:280:(self, calculator)::Tired and upset mood description.","test_describe_confident:287:(self, calculator)::Confident mood description.","test_describe_guarded:293:(self, calculator)::Guarded mood description."]],"TestGetMoodCalculator":["300",["test_singleton_pattern:303:(self)::get_mood_calculator returns same instance."]]}],"t/life_simulation/test_narrative_manager.py":["p",{"TestNarrativeArcManager":["29",["mock_store:33:(self)::Create mock EventStore.","manager:43:(self, mock_store)::Create manager with mock store.","user_id:48:(self)::Test user ID.","test_create_arc_returns_arc:55:async (self, manager, user_id)::Create arc returns NarrativeArc object.","test_create_arc_sets_type:63:async (self, manager, user_id)::Create arc sets correct arc type.","test_create_arc_sets_domain:70:async (self, manager, user_id)::Create arc sets domain from arc type config.","test_create_arc_sets_entities:77:async (self, manager, user_id)::Create arc sets provided entities.","test_create_arc_generates_initial_state:85:async (self, manager, user_id)::Create arc generates initial state if not provided.","test_create_arc_uses_provided_state:93:async (self, manager, user_id)::Create arc uses provided initial state.","test_create_arc_sets_possible_outcomes:102:async (self, manager, user_id)::Create arc sets possible outcomes from config.","test_create_arc_sets_active_status:110:async (self, manager, user_id)::Create arc starts with ACTIVE status.","test_create_arc_saves_to_store:117:async (self, manager, mock_store, user_id)::Create arc saves to store.","test_progress_arc_updates_state:126:async (self, manager, mock_store)::Progress arc updates state in store.","test_progress_arc_returns_false_on_failure:137:async (self, manager, mock_store)::Progress arc returns False if store update fails.","test_resolve_arc_updates_status:149:async (self, manager, mock_store)::Resolve arc updates status to RESOLVED.","test_resolve_arc_sets_resolved_at:162:async (self, manager, mock_store)::Resolve arc sets resolved_at timestamp.","test_resolve_arc_updates_final_state:173:async (self, manager, mock_store)::Resolve arc updates final state if provided.","test_resolve_arc_without_final_state:184:async (self, manager, mock_store)::Resolve arc works without final state.","test_check_resolution_returns_tuple:196:async (self, manager, user_id)::Check resolution returns (bool, outcome) tuple.","test_check_resolution_new_arc_unlikely:213:async (self, manager, user_id)::New arcs are unlikely to resolve immediately.","test_check_resolution_old_arc_likely:235:async (self, manager, user_id)::Old arcs are likely to resolve.","test_resolution_outcome_matches_config:257:async (self, manager, user_id)::Resolution outcomes come from arc type config.","test_get_active_arcs:278:async (self, manager, mock_store, user_id)::Get active arcs delegates to store.","test_maybe_resolve_arcs_checks_all:290:async (self, manager, mock_store, user_id)::Maybe resolve arcs checks all active arcs.","test_maybe_create_arc_respects_limit:311:async (self, manager, mock_store, user_id)::Maybe create arc respects 3 active arcs limit.","test_maybe_create_arc_filters_by_domain:323:async (self, manager, mock_store, user_id)::Maybe create arc can filter by domain."]],"TestArcTypes":["335",["test_arc_types_not_empty:338:(self)::Arc types are defined.","test_arc_types_have_domain:342:(self)::All arc types have a domain.","test_arc_types_have_outcomes:347:(self)::All arc types have outcomes.","test_arc_types_have_weights:353:(self)::All arc types have outcome weights.","test_arc_type_weights_sum_to_one:359:(self)::Outcome weights approximately sum to 1.","test_work_arcs_exist:365:(self)::Work domain arcs exist.","test_social_arcs_exist:372:(self)::Social domain arcs exist.","test_personal_arcs_exist:379:(self)::Personal domain arcs exist."]],"TestGetNarrativeManager":["387",["test_singleton_pattern:390:(self)::get_narrative_manager returns same instance."]]}],"t/life_simulation/test_quality.py":["p",{"TestEventDiversity":["35",["user_id:39:(self)::Generate test user ID.","diverse_events:44:(self, user_id)::Create a week of diverse events covering all domains.","test_all_domains_represented:146:(self, diverse_events)::Verify all three domains are represented in the event set.","test_no_domain_empty_more_than_two_days:153:(self, diverse_events)::AC-T018.1: No domain should be empty for more than 2 consecutive days.","test_events_distributed_across_time_of_day:180:(self, diverse_events)::Events should be distributed across morning, afternoon, evening.","test_simulator_generates_diverse_events:187:async (self, user_id)::LifeSimulator should generate events across all domains."]],"TestEntityConsistency":["257",["user_id:261:(self)::Generate test user ID.","sample_entities:266:(self, user_id)::Create sample entities for Nikita.","test_events_reference_known_entities:298:(self, user_id, sample_entities)::Events should reference entities from the known entity pool.","test_entity_names_in_description:319:(self, user_id, sample_entities)::Entity names should appear in event descriptions when referenced.","test_entity_type_matches_domain:337:(self, sample_entities)::Entity types should generally match event domains.","test_entity_manager_provides_consistent_entities:353:async (self, user_id, sample_entities)::EntityManager should return consistent entity set."]],"TestNarrativeArcProgression":["370",["user_id:374:(self)::Generate test user ID.","sample_arc:379:(self, user_id)::Create a sample narrative arc.","test_arc_has_required_fields:393:(self, sample_arc)::Narrative arcs should have all required fields.","test_arc_state_transitions:402:(self, sample_arc)::Arc states should follow valid transitions.","test_arc_has_entities:416:(self, sample_arc)::Arcs should have associated entities.","test_arc_progresses_over_time:421:async (self, user_id, sample_arc)::Arcs should progress toward resolution over time.","test_arc_resolution:436:async (self, user_id, sample_arc)::Arcs should be able to resolve with an outcome.","test_resolved_arc_has_outcome:450:(self, user_id)::Resolved arcs should have an outcome in possible_outcomes.","test_narrative_manager_creates_new_arcs:469:async (self, user_id)::NarrativeArcManager should be able to create new arcs.","test_active_arcs_retrieved_correctly:491:async (self, user_id, sample_arc)::Active arcs should be retrievable for a user."]]}],"t/life_simulation/test_simulator.py":["p",{"TestLifeSimulatorInitialization":["34",["test_creates_with_defaults:37:(self)::LifeSimulator creates with default singletons.","test_accepts_custom_dependencies:47:(self)::LifeSimulator accepts custom dependencies."]],"TestInitializeUser":["70",["mock_store:74:(self)::Create mock store.","mock_entity_manager:81:(self)::Create mock entity manager.","simulator:88:(self, mock_store, mock_entity_manager)::Create simulator with mocks.","user_id:96:(self)::Test user ID.","test_initialize_new_user:101:async (self, simulator, mock_store, mock_entity_manager, user_id)::Initialize user seeds entities for new users.","test_initialize_existing_user:109:async (self, simulator, mock_store, user_id)::Initialize user returns False for existing users."]],"TestGenerateNextDayEvents":["118",["user_id:122:(self)::Test user ID.","mock_event:127:(self, user_id)::Create mock event.","mock_store:144:(self, mock_event)::Create mock store.","mock_entity_manager:154:(self)::Create mock entity manager.","mock_event_generator:161:(self, mock_event)::Create mock event generator.","mock_narrative_manager:168:(self)::Create mock narrative manager.","simulator:177:(self, mock_store, mock_entity_manager, mock_event_generator, mock_narrative_manager)::Create simulator with mocks.","test_generates_events:187:async (self, simulator, user_id, mock_event)::Generate next day events returns events.","test_uses_specified_date:195:async (self, simulator, mock_event_generator, user_id)::Generate events uses specified date.","test_defaults_to_tomorrow:205:async (self, simulator, mock_event_generator, user_id)::Generate events defaults to tomorrow.","test_skips_if_events_exist:213:async (self, simulator, mock_store, mock_event, user_id)::Generate events skips if events already exist.","test_initializes_new_user:222:async (self, simulator, mock_store, mock_entity_manager, user_id)::Generate events initializes new users.","test_passes_active_arcs:231:async (self, simulator, mock_store, mock_narrative_manager, mock_event_generator, user_id)::Generate events passes active arcs to generator.","test_passes_recent_events:242:async (self, simulator, mock_store, mock_event_generator, mock_event, user_id)::Generate events passes recent events for continuity.","test_saves_events:252:async (self, simulator, mock_store, mock_event, user_id)::Generate events saves to store.","test_maybe_resolves_arcs:259:async (self, simulator, mock_narrative_manager, user_id)::Generate events may resolve narrative arcs.","test_maybe_creates_new_arc:266:async (self, simulator, mock_narrative_manager, user_id)::Generate events may create new narrative arc."]],"TestGetTodayEvents":["273",["user_id:277:(self)::Test user ID.","mock_events:282:(self, user_id)::Create mock events with varying importance.","mock_store:321:(self, mock_events)::Create mock store.","simulator:328:(self, mock_store)::Create simulator with mock.","test_returns_today_events:333:async (self, simulator, user_id, mock_events)::Get today events returns events for today.","test_sorts_by_importance:340:async (self, simulator, user_id)::Get today events sorts by importance descending.","test_respects_max_events:349:async (self, simulator, user_id)::Get today events respects max_events limit."]],"TestGetCurrentMood":["358",["user_id:362:(self)::Test user ID.","mock_events:367:(self, user_id)::Create events with emotional impact.","mock_store:384:(self, mock_events)::Create mock store.","mock_mood_calculator:391:(self)::Create mock mood calculator.","simulator:400:(self, mock_store, mock_mood_calculator)::Create simulator with mocks.","test_returns_mood_state:405:async (self, simulator, user_id)::Get current mood returns MoodState.","test_uses_lookback_days:412:async (self, simulator, mock_store, user_id)::Get current mood uses specified lookback days."]],"TestGetEventsForContext":["419",["user_id:423:(self)::Test user ID.","mock_today_events:428:(self, user_id)::Create today's events.","mock_recent_events:445:(self, user_id, mock_today_events)::Create recent events including today and yesterday.","mock_arc:461:(self, user_id)::Create mock arc.","mock_store:473:(self, mock_today_events, mock_recent_events)::Create mock store.","mock_narrative_manager:481:(self, mock_arc)::Create mock narrative manager.","mock_mood_calculator:488:(self)::Create mock mood calculator.","simulator:497:(self, mock_store, mock_narrative_manager, mock_mood_calculator)::Create simulator with mocks.","test_returns_context_dict:506:async (self, simulator, user_id)::Get events for context returns dict.","test_formats_today_events:517:async (self, simulator, user_id)::Today events are formatted as strings.","test_excludes_today_from_recent:525:async (self, simulator, user_id)::Recent events exclude today's events.","test_formats_active_arcs:534:async (self, simulator, user_id)::Active arcs are formatted as strings.","test_includes_mood_summary:543:async (self, simulator, user_id)::Context includes mood summary."]],"TestMoodSummary":["552",["simulator:556:(self)::Create simulator.","test_positive_valence:560:(self, simulator)::High valence returns 'feeling good'.","test_negative_valence:568:(self, simulator)::Low valence returns 'a bit down'.","test_high_arousal:576:(self, simulator)::High arousal returns 'energetic'.","test_low_arousal:584:(self, simulator)::Low arousal returns 'tired'.","test_high_dominance:592:(self, simulator)::High dominance returns 'confident'.","test_low_dominance:600:(self, simulator)::Low dominance returns 'uncertain'."]],"TestGetLifeSimulator":["609",["test_singleton_pattern:612:(self)::get_life_simulator returns same instance."]]}],"t/life_simulation/test_store.py":["p",{"TestEventStore":["29",["mock_session:33:(self)::Create mock database session.","mock_session_factory:41:(self, mock_session):__aenter__,__aexit__,factory:Create mock session factory.","__aenter__:45:async (self)::","__aexit__:48:async (self, exc_type, exc_val, exc_tb)::","factory:51:()::","store:57:(self, mock_session_factory)::Create store with mock session.","user_id:62:(self)::Test user ID.","sample_event:67:(self, user_id)::Create sample life event.","sample_arc:81:(self, user_id)::Create sample narrative arc.","sample_entity:93:(self, user_id)::Create sample entity.","test_save_event:106:async (self, store, mock_session, sample_event)::Save event executes insert.","test_save_events:115:async (self, store, mock_session, user_id)::Save multiple events.","test_get_event:142:async (self, store, mock_session, sample_event)::Get single event by ID (AC-T004.2).","test_get_event_not_found:170:async (self, store, mock_session)::Get event returns None if not found.","test_get_events_for_date:183:async (self, store, mock_session, user_id)::Get events for specific date (AC-T004.2).","test_get_recent_events:229:async (self, store, mock_session, user_id)::Get events from last 7 days (AC-T004.3).","test_get_events_by_domain:245:async (self, store, mock_session, user_id)::Get events filtered by domain.","test_delete_old_events:260:async (self, store, mock_session, user_id)::Delete events older than specified days.","test_save_arc:274:async (self, store, mock_session, sample_arc)::Save narrative arc.","test_get_active_arcs:283:async (self, store, mock_session, user_id)::Get active narrative arcs.","test_update_arc_status:311:async (self, store, mock_session)::Update arc status.","test_update_arc_state:328:async (self, store, mock_session)::Update arc current state.","test_save_entity:344:async (self, store, mock_session, sample_entity)::Save entity.","test_save_entities:352:async (self, store, mock_session, user_id)::Save multiple entities.","test_get_entities:372:async (self, store, mock_session, user_id)::Get all entities for user.","test_get_entities_by_type:396:async (self, store, mock_session, user_id)::Get entities filtered by type.","test_entity_exists:411:async (self, store, mock_session, user_id)::Check if entity exists.","test_entity_not_exists:422:async (self, store, mock_session, user_id)::Check entity doesn't exist."]],"TestGetEventStore":["433",["test_singleton_pattern:436:(self)::get_event_store returns same instance."]]}],"t/onboarding/test_e2e.py":["p",{"TestFullOnboardingE2E":["48",["user_id:52:(self)::Generate test user ID.","voice_flow:57:(self)::Create voice flow instance.","profile_collector:62:(self)::Create profile collector instance.","preference_configurator:67:(self)::Create preference configurator instance.","handoff_manager:72:(self)::Create handoff manager instance.","test_full_flow_telegram_to_call:81:async (self, user_id, voice_flow,)>None::AC-T030.1: Full onboarding E2E (Telegram -> Voice -> First Message).","test_profile_collection_during_call:111:async (self, user_id, profile_collector,)>None::AC-T030.2: Test profile completeness during call.","test_preference_configuration_during_call:158:async (self, user_id, preference_configurator,)>None::AC-T030.3: Test preference configuration during call.","test_handoff_to_nikita:198:async (self, user_id, handoff_manager,)>None::AC-T030.4: Test handoff to Nikita."]],"TestE2EServerToolIntegration":["244",["handler:248:(self)::Create server tool handler.","test_server_tool_profile_collection_flow:253:async (self, handler)>None::E2E: Server tools collect profile during call.","test_server_tool_completes_onboarding:298:async (self, handler)>None::E2E: Server tool completes onboarding and triggers handoff."]],"TestQualityMetrics":["344",["test_onboarding_completion_rate_calculation:347:(self)>None::AC-T031.1: Measure onboarding completion rate.","test_profile_completeness_score:359:(self)>None::AC-T031.3: Measure profile completeness.","test_partial_profile_completeness:397:(self)>None::Test partial profile completeness score.","test_average_call_duration_tracking:433:(self)>None::AC-T031.2: Measure average call duration.","test_first_message_quality_check:450:(self)>None::Test first message meets quality standards.","test_message_variety_across_profiles:469:(self)>None::Test messages vary appropriately by profile."]],"TestE2EEdgeCases":["491",["test_user_defers_then_returns:495:async (self)>None::Test user defers onboarding then returns later.","test_minimal_profile_handoff:518:async (self)>None::Test handoff works with minimal profile data.","test_invalid_preference_rejected:546:async (self)>None::Test invalid preferences are rejected gracefully.","test_darkness_level_boundaries:561:(self)>None::Test all darkness level boundaries work.","test_pacing_boundaries:574:(self)>None::Test all pacing options work."]],"TestOnboardingResilience":["589",["test_call_failure_recovery:593:async (self)>None::Test system handles call initiation failure.","test_handoff_partial_failure:616:async (self)>None::Test handoff handles message send failure.","test_profile_collector_handles_invalid_fields:644:(self)>None::Test profile collector handles invalid field values."]]}],"t/onboarding/test_handoff.py":["p",{"TestHandoffManager":["32",["manager:36:(self)>HandoffManager::Create manager instance.","test_transition_success:41:async (self, manager:HandoffManager)>None::AC-T026.2: transition() completes handoff.","test_transition_sets_onboarded_status:72:async (self, manager:HandoffManager)>None::AC-T026.3: Transition updates user to onboarded.","test_transition_generates_first_message:95:async (self, manager:HandoffManager)>None::AC-T026.3: Transition triggers first Nikita message.","test_transition_handles_send_failure:122:async (self, manager:HandoffManager)>None::AC-T026.3: Handles message send failure gracefully.","test_transition_returns_handoff_result:142:async (self, manager:HandoffManager)>None::AC-T026.2: transition() returns HandoffResult."]],"TestFirstMessageGenerator":["165",["generator:169:(self)>FirstMessageGenerator::Create generator instance.","test_generate_uses_profile_info:173:(self, generator:FirstMessageGenerator)>None::AC-T027.3: Uses collected profile info.","test_generate_references_onboarding:187:(self, generator:FirstMessageGenerator)>None::AC-T027.2: References onboarding naturally.","test_generate_personalized_greeting:198:(self, generator:FirstMessageGenerator)>None::AC-T027.1: Personalized first message.","test_generate_adapts_to_darkness_level:211:(self, generator:FirstMessageGenerator)>None::AC-T027.1: Message tone adapts to darkness level.","test_generate_message_variants:224:(self, generator:FirstMessageGenerator)>None::AC-T027.1: Can generate multiple variants."]],"TestGenerateFirstNikitaMessage":["235",["test_generates_non_empty_message:238:(self)>None::Basic message generation.","test_includes_user_name:247:(self)>None::Message can reference user name.","test_adapts_to_profile:256:(self)>None::Message adapts based on profile."]],"TestUserStatusUpdate":["269",["manager:273:(self)>HandoffManager::Create manager instance.","test_mark_user_onboarded:278:async (self, manager:HandoffManager)>None::AC-T028.1: Mark user as onboarded.","test_set_onboarded_at_timestamp:298:async (self, manager:HandoffManager)>None::AC-T028.2: Set onboarded_at timestamp.","test_store_onboarding_call_id:318:async (self, manager:HandoffManager)>None::AC-T028.3: Store onboarding_call_id."]],"TestHandoffIntegration":["339",["manager:343:(self)>HandoffManager::Create manager instance.","test_full_handoff_flow:348:async (self, manager:HandoffManager)>None::AC-T029.2: Full handoff integration.","test_handoff_with_minimal_profile:385:async (self, manager:HandoffManager)>None::Handoff works with minimal profile.","test_handoff_summary_generation:406:async (self, manager:HandoffManager)>None::Handoff can generate summary of onboarding."]]}],"t/onboarding/test_infrastructure.py":["p",{"TestModuleStructure":["36",["test_module_exists:39:(self)>None::AC-T001.1: Module exists at nikita/onboarding/__init__.py.","test_module_exports_enums:45:(self)>None::AC-T001.2: Module exports required enums.","test_module_exports_models:61:(self)>None::AC-T001.2: Module exports required models."]],"TestOnboardingStatus":["69",["test_all_statuses_defined:72:(self)>None::Verify all expected statuses exist.","test_status_is_string_enum:81:(self)>None::Verify status values are strings."]],"TestPersonalityType":["86",["test_all_types_defined:89:(self)>None::Verify all personality types exist."]],"TestConversationStyle":["96",["test_all_styles_defined:99:(self)>None::Verify all conversation styles exist."]],"TestDarknessLevel":["106",["test_all_levels_defined:109:(self)>None::Verify all darkness levels exist (1-5).","test_levels_are_int:117:(self)>None::Verify levels are integers."]],"TestPacingWeeks":["122",["test_all_options_defined:125:(self)>None::Verify pacing options exist (4 and 8)."]],"TestUserOnboardingProfile":["131",["test_default_values:134:(self)>None::AC-T002.1: Model has correct defaults.","test_full_profile_creation:149:(self)>None::AC-T002.1: Model accepts all fields.","test_darkness_level_validation_valid_range:176:(self)>None::AC-T002.2: Accepts darkness_level 1-5.","test_darkness_level_validation_too_low:182:(self)>None::AC-T002.2: Rejects darkness_level < 1.","test_darkness_level_validation_too_high:188:(self)>None::AC-T002.2: Rejects darkness_level > 5.","test_pacing_weeks_validation_4:194:(self)>None::AC-T002.3: Accepts pacing_weeks=4.","test_pacing_weeks_validation_8:199:(self)>None::AC-T002.3: Accepts pacing_weeks=8.","test_pacing_weeks_validation_invalid:204:(self)>None::AC-T002.3: Rejects pacing_weeks not in {4, 8}.","test_is_complete_empty_profile:211:(self)>None::is_complete returns False for empty profile.","test_is_complete_partial_profile:216:(self)>None::is_complete returns False when missing required fields.","test_is_complete_full_profile:224:(self)>None::is_complete returns True when required fields are set.","test_to_context_dict:232:(self)>None::to_context_dict returns proper format for prompts.","test_to_context_dict_empty_profile:256:(self)>None::to_context_dict handles None values.","test_get_darkness_description:265:(self)>None::get_darkness_description returns readable text.","test_get_pacing_description:276:(self)>None::get_pacing_description returns readable text."]],"TestProfileFieldUpdate":["285",["test_valid_field_names:288:(self)>None::Valid field names are accepted.","test_invalid_field_name:304:(self)>None::Invalid field names are rejected.","test_value_can_be_any_type:310:(self)>None::Value field accepts any type."]],"TestOnboardingCallModels":["322",["test_call_request:325:(self)>None::OnboardingCallRequest accepts required fields.","test_call_request_default_language:336:(self)>None::OnboardingCallRequest defaults to English.","test_call_response_success:344:(self)>None::OnboardingCallResponse for successful call.","test_call_response_failure:354:(self)>None::OnboardingCallResponse for failed call."]],"TestModelSerialization":["365",["test_profile_to_json:368:(self)>None::UserOnboardingProfile serializes to JSON.","test_profile_from_json:380:(self)>None::UserOnboardingProfile deserializes from dict.","test_profile_with_enum_string:396:(self)>None::Profile accepts enum values as strings."]]}],"t/onboarding/test_meta_nikita.py":["p",{"TestMetaNikitaConfig":["25",["test_config_initialization:28:(self)>None::AC-T005.1: Config initializes correctly.","test_agent_id_configured:33:(self)>None::AC-T005.4: Agent ID is documented in config.","test_voice_id_different_from_nikita:39:(self)>None::AC-T005.2: Voice is distinct from Nikita.","test_tts_settings:45:(self)>None::AC-T005.3: TTS settings are configured."]],"TestVoiceSettings":["52",["test_stability_dynamic_seductive:55:(self)>None::AC-T006.1: Voice is dynamic and seductive (lower stability).","test_speed_normal_pace:61:(self)>None::AC-T006.1: Speech at normal pace.","test_similarity_boost_moderate:65:(self)>None::AC-T006.2: Similarity boost for consistent voice."]],"TestSystemPrompt":["70",["test_persona_exists:73:(self)>None::AC-T007.1: System prompt exists.","test_persona_identifies_as_gatekeeper:78:(self)>None::AC-T007.1: Meta-Nikita identifies as underground game hostess/gatekeeper.","test_persona_mentions_nikita:83:(self)>None::AC-T007.2: Mentions introducing Nikita.","test_persona_covers_profile_collection:87:(self)>None::AC-T007.2: Covers profile collection.","test_persona_covers_preferences:96:(self)>None::AC-T007.2: Covers experience configuration.","test_persona_covers_handoff:104:(self)>None::AC-T007.2: Covers handoff to Nikita.","test_persona_not_flirtatious:110:(self)>None::AC-T006.1: Persona is NOT flirtatious (distinct from Nikita).","test_persona_is_confident_gatekeeper:127:(self)>None::AC-T007.1: Persona is confident, direct gatekeeper.","test_persona_bans_ai_language:135:(self)>None::Persona explicitly bans AI/artificial/bot language.","test_persona_has_elevenlabs_headers:144:(self)>None::Prompt uses ElevenLabs-recommended markdown headers.","test_persona_has_error_recovery:151:(self)>None::Prompt includes error recovery guidance.","test_persona_has_tool_instructions:158:(self)>None::Prompt includes tool usage instructions in # Tools section."]],"TestFirstMessage":["166",["test_first_message_exists:169:(self)>None::AC-T007.4: First message is configured.","test_first_message_is_intriguing:174:(self)>None::AC-T007.4: First message is intriguing and direct.","test_first_message_establishes_stakes:180:(self)>None::AC-T007.4: First message establishes game stakes."]],"TestAgentConfigGeneration":["190",["test_get_agent_config:193:(self)>None::AC-T005.2: Agent config is ElevenLabs-compatible.","test_agent_config_has_prompt:204:(self)>None::AC-T007.1: Config includes system prompt.","test_agent_config_has_first_message:214:(self)>None::AC-T007.4: Config includes first message.","test_agent_config_has_tts_settings:222:(self)>None::AC-T005.3: Config includes TTS settings.","test_agent_config_includes_user_name:232:(self)>None::AC-T007.4: Config includes user name in dynamic variables.","test_agent_config_includes_user_id:239:(self)>None::Config includes user_id for server tools."]],"TestServerToolsConfig":["250",["test_get_server_tools_config:253:(self)>None::Server tools are configured for profile collection.","test_collect_profile_tool_defined:262:(self)>None::collect_profile server tool is defined.","test_configure_preferences_tool_defined:270:(self)>None::configure_preferences server tool is defined.","test_complete_onboarding_tool_defined:278:(self)>None::complete_onboarding server tool is defined.","test_tools_have_descriptions:286:(self)>None::All server tools have descriptions.","test_tools_have_parameters:295:(self)>None::Server tools have parameter definitions.","test_tools_have_enhanced_descriptions:304:(self)>None::Server tool descriptions include WHEN/HOW/ERROR guidance.","test_end_call_tool_defined:314:(self)>None::end_call server tool is defined for clean hang-up."]],"TestConversationFlow":["323",["test_conversation_stages_defined:326:(self)>None::Conversation stages are defined for flow.","test_introduction_stage:333:(self)>None::Introduction stage is first.","test_profile_stage:341:(self)>None::Profile collection stage exists.","test_preferences_stage:349:(self)>None::Preferences stage exists.","test_handoff_stage:357:(self)>None::Handoff stage is last."]]}],"t/onboarding/test_preferences.py":["p",{"TestPreferenceConfigurator":["26",["configurator:30:(self)>PreferenceConfigurator::Create configurator instance.","test_configure_darkness_level:34:(self, configurator:PreferenceConfigurator)>None::AC-T022.2: configure() sets darkness level.","test_configure_pacing:47:(self, configurator:PreferenceConfigurator)>None::AC-T022.2: configure() sets pacing.","test_configure_conversation_style:60:(self, configurator:PreferenceConfigurator)>None::AC-T022.2: configure() sets conversation style.","test_configure_multiple_preferences:73:(self, configurator:PreferenceConfigurator)>None::AC-T022.3: Can configure multiple preferences at once.","test_configure_returns_result:90:(self, configurator:PreferenceConfigurator)>None::AC-T022.2: configure() returns result with applied settings.","test_configure_invalid_darkness:102:(self, configurator:PreferenceConfigurator)>None::AC-T022.3: Invalid darkness level rejected.","test_configure_invalid_pacing:114:(self, configurator:PreferenceConfigurator)>None::AC-T022.3: Invalid pacing rejected.","test_configure_updates_existing:126:(self, configurator:PreferenceConfigurator)>None::AC-T022.3: Can update existing preferences.","test_preferences_isolated_between_users:136:(self, configurator:PreferenceConfigurator)>None::AC-T022.1: Each user has separate preferences."]],"TestDarknessLevelMapping":["148",["test_level_1_vanilla:151:(self)>None::AC-T023.2: Level 1 = vanilla (wholesome).","test_level_2_mild:161:(self)>None::AC-T023.1: Level 2 = mild edge.","test_level_3_default:170:(self)>None::AC-T023.1: Level 3 = default balanced.","test_level_4_edgy:179:(self)>None::AC-T023.1: Level 4 = edgy.","test_level_5_noir:189:(self)>None::AC-T023.2: Level 5 = full noir.","test_darkness_config_has_description:201:(self)>None::AC-T023.3: Each level has description.","test_darkness_config_behavioral_traits:208:(self)>None::AC-T023.1: Config maps to behavioral traits.","test_invalid_darkness_level_raises:216:(self)>None::AC-T023.1: Invalid level raises ValueError."]],"TestPacingConfiguration":["225",["test_4_weeks_intense:228:(self)>None::AC-T024.1: 4 weeks = intense pacing.","test_8_weeks_relaxed:237:(self)>None::AC-T024.2: 8 weeks = relaxed pacing.","test_pacing_affects_decay_rate:246:(self)>None::AC-T024.1-2: Pacing affects decay rate.","test_pacing_affects_touchpoint_frequency:254:(self)>None::AC-T024.1-2: Pacing affects touchpoint frequency.","test_invalid_pacing_raises:262:(self)>None::AC-T024.3: Invalid pacing raises ValueError."]],"TestConversationStyleConfig":["268",["configurator:272:(self)>PreferenceConfigurator::Create configurator instance.","test_listener_style:276:(self, configurator:PreferenceConfigurator)>None::Listener style: more questions, less sharing.","test_sharer_style:288:(self, configurator:PreferenceConfigurator)>None::Sharer style: more sharing, fewer questions.","test_balanced_style_default:300:(self, configurator:PreferenceConfigurator)>None::Balanced style is default."]],"TestPreferenceIntegration":["310",["configurator:314:(self)>PreferenceConfigurator::Create configurator instance.","test_full_preference_configuration:318:(self, configurator:PreferenceConfigurator)>None::Configure all preferences for a user.","test_get_behavioral_config:337:(self, configurator:PreferenceConfigurator)>None::Get combined behavioral configuration.","test_preference_to_dict:354:(self, configurator:PreferenceConfigurator)>None::Preferences can be serialized to dict."]]}],"t/onboarding/test_profile_collection.py":["p",{"TestProfileCollector":["27",["collector:31:(self)>ProfileCollector::Create collector instance.","test_collect_single_field:35:(self, collector:ProfileCollector)>None::AC-T018.2: collect() method stores single field.","test_collect_multiple_fields:45:(self, collector:ProfileCollector)>None::AC-T018.2: collect() works for multiple fields.","test_get_profile_new_user:58:(self, collector:ProfileCollector)>None::AC-T018.3: get_profile() returns empty profile for new user.","test_get_profile_returns_complete_profile:68:(self, collector:ProfileCollector)>None::AC-T018.3: get_profile() returns all collected data.","test_collect_overwrites_existing:90:(self, collector:ProfileCollector)>None::AC-T018.2: Subsequent collect() overwrites previous value.","test_collect_returns_collection_result:100:(self, collector:ProfileCollector)>None::AC-T018.2: collect() returns result with status.","test_profiles_isolated_between_users:111:(self, collector:ProfileCollector)>None::AC-T018.1: Each user has separate profile."]],"TestStructuredExtraction":["123",["test_extract_timezone_from_city:126:(self)>None::AC-T019.1: Extract timezone from city name.","test_extract_timezone_from_country:132:(self)>None::AC-T019.1: Extract timezone from country.","test_extract_timezone_case_insensitive:138:(self)>None::AC-T019.1: Extraction is case-insensitive.","test_extract_timezone_unknown_location:143:(self)>None::AC-T019.1: Unknown location returns None.","test_extract_hobbies_from_text:148:(self)>None::AC-T019.2: Extract hobbies as list from text.","test_extract_hobbies_comma_separated:155:(self)>None::AC-T019.2: Extract comma-separated hobbies.","test_extract_hobbies_handles_and:163:(self)>None::AC-T019.2: Handles 'and' separator.","test_extract_hobbies_empty_input:169:(self)>None::AC-T019.2: Empty input returns empty list.","test_infer_personality_introvert:174:(self)>None::AC-T019.3: Infer introvert from conversation clues.","test_infer_personality_extrovert:181:(self)>None::AC-T019.3: Infer extrovert from conversation clues.","test_infer_personality_ambivert_default:188:(self)>None::AC-T019.3: Default to ambivert if unclear.","test_infer_personality_empty_text:194:(self)>None::AC-T019.3: Empty text defaults to ambivert."]],"TestTimezoneValidator":["199",["validator:203:(self)>TimezoneValidator::Create validator instance.","test_validate_known_timezone:207:(self, validator:TimezoneValidator)>None::AC-T020.1: Known timezone passes validation.","test_validate_unknown_timezone:214:(self, validator:TimezoneValidator)>None::AC-T020.1: Unknown timezone fails validation.","test_get_known_timezones:220:(self, validator:TimezoneValidator)>None::AC-T020.1: Can retrieve list of known timezones."]],"TestDarknessLevelValidation":["228",["collector:232:(self)>ProfileCollector::Create collector instance.","test_valid_darkness_levels:236:(self, collector:ProfileCollector)>None::AC-T020.2: Valid levels 1-5 accepted.","test_invalid_darkness_level_too_low:243:(self, collector:ProfileCollector)>None::AC-T020.2: Level 0 rejected.","test_invalid_darkness_level_too_high:250:(self, collector:ProfileCollector)>None::AC-T020.2: Level 6+ rejected.","test_invalid_darkness_level_negative:256:(self, collector:ProfileCollector)>None::AC-T020.2: Negative level rejected."]],"TestPacingValidation":["263",["collector:267:(self)>ProfileCollector::Create collector instance.","test_valid_pacing_4_weeks:271:(self, collector:ProfileCollector)>None::AC-T020.3: 4 weeks accepted.","test_valid_pacing_8_weeks:277:(self, collector:ProfileCollector)>None::AC-T020.3: 8 weeks accepted.","test_invalid_pacing_other_values:283:(self, collector:ProfileCollector)>None::AC-T020.3: Other values rejected."]],"TestGracefulErrorHandling":["291",["collector:295:(self)>ProfileCollector::Create collector instance.","test_collect_handles_none_value:299:(self, collector:ProfileCollector)>None::AC-T020.3: None value handled gracefully.","test_collect_handles_empty_string:306:(self, collector:ProfileCollector)>None::AC-T020.3: Empty string handled gracefully.","test_collect_trims_whitespace:312:(self, collector:ProfileCollector)>None::AC-T020.3: Whitespace trimmed.","test_collect_hobbies_filters_empty:319:(self, collector:ProfileCollector)>None::AC-T020.3: Empty hobby entries filtered."]],"TestProfileCompleteness":["327",["collector:331:(self)>ProfileCollector::Create collector instance.","test_is_complete_minimal:335:(self, collector:ProfileCollector)>None::Profile with required fields is complete.","test_is_complete_missing_required:344:(self, collector:ProfileCollector)>None::Profile missing required fields is incomplete.","test_get_missing_fields:351:(self, collector:ProfileCollector)>None::Can retrieve list of missing required fields.","test_completeness_percentage:364:(self, collector:ProfileCollector)>None::Can calculate profile completeness percentage."]]}],"t/onboarding/test_server_tools.py":["p",{"TestOnboardingToolRequest":["32",["test_request_with_field_name_value:35:(self)>None::AC-T009.2: Accepts field_name and value.","test_request_with_preferences:45:(self)>None::AC-T010.2: Accepts preference parameters.","test_request_complete_onboarding:58:(self)>None::AC-T011.1: complete_onboarding request."]],"TestOnboardingToolResponse":["68",["test_success_response:71:(self)>None::Response indicates success.","test_error_response:76:(self)>None::Response indicates error.","test_response_with_data:84:(self)>None::Response can include data."]],"TestOnboardingServerToolHandler":["94",["handler:98:(self)>OnboardingServerToolHandler::Create handler with mocked dependencies.","mock_user_repo:103:(self)>MagicMock::Mock user repository."]],"TestCollectProfile":["108",["handler:112:(self)>OnboardingServerToolHandler::Create handler.","test_collect_timezone:117:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores timezone correctly.","test_collect_occupation:138:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores occupation correctly.","test_collect_hobbies_single:157:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores single hobby correctly.","test_collect_hobbies_multiple:176:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores multiple hobbies from comma-separated.","test_collect_personality_type:195:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores personality type correctly.","test_collect_hangout_spots:214:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Stores hangout spots correctly.","test_collect_invalid_field:233:async (self, handler:OnboardingServerToolHandler)>None::AC-T009.3: Rejects invalid field names."]],"TestConfigurePreferences":["247",["handler:251:(self)>OnboardingServerToolHandler::Create handler.","test_configure_darkness_level:256:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.2: Accepts darkness_level.","test_configure_pacing_4_weeks:274:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.2: Accepts pacing_weeks=4.","test_configure_pacing_8_weeks:292:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.2: Accepts pacing_weeks=8.","test_configure_conversation_style:310:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.2: Accepts conversation_style.","test_configure_multiple_preferences:328:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.2: Accepts multiple preferences at once.","test_configure_darkness_level_invalid_low:350:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.3: Validates darkness_level >= 1.","test_configure_darkness_level_invalid_high:366:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.3: Validates darkness_level <= 5.","test_configure_pacing_invalid:382:async (self, handler:OnboardingServerToolHandler)>None::AC-T010.3: Validates pacing_weeks in {4, 8}."]],"TestCompleteOnboarding":["398",["handler:402:(self)>OnboardingServerToolHandler::Create handler.","test_complete_sets_onboarded_at:407:async (self, handler:OnboardingServerToolHandler)>None::AC-T011.2: Marks user as onboarded with timestamp.","test_complete_triggers_handoff:444:async (self, handler:OnboardingServerToolHandler)>None::AC-T011.3: Triggers handoff process.","test_complete_with_notes:479:async (self, handler:OnboardingServerToolHandler)>None::AC-T011.1: Accepts optional notes.","test_complete_returns_summary:512:async (self, handler:OnboardingServerToolHandler)>None::Response includes profile summary."]],"TestHandleRequest":["551",["handler:555:(self)>OnboardingServerToolHandler::Create handler.","test_handle_collect_profile_request:560:async (self, handler:OnboardingServerToolHandler)>None::Routes collect_profile requests correctly.","test_handle_configure_preferences_request:575:async (self, handler:OnboardingServerToolHandler)>None::Routes configure_preferences requests correctly.","test_handle_complete_onboarding_request:590:async (self, handler:OnboardingServerToolHandler)>None::Routes complete_onboarding requests correctly.","test_handle_unknown_tool:605:async (self, handler:OnboardingServerToolHandler)>None::Returns error for unknown tool."]]}],"t/onboarding/test_telegram_flow.py":["p",{"TestOnboardingState":["25",["test_default_state:28:(self)>None::Default state is AWAITING_PHONE.","test_state_transitions:33:(self)>None::State can transition through flow.","test_phone_stored:41:(self)>None::Phone number is stored."]],"TestVoiceOnboardingFlow":["47",["flow:51:(self)>VoiceOnboardingFlow::Create flow instance."]],"TestOnboardingStatusCheck":["56",["flow:60:(self)>VoiceOnboardingFlow::Create flow instance.","test_check_already_onboarded:65:async (self, flow:VoiceOnboardingFlow)>None::AC-T013.1: Detects already onboarded user.","test_check_not_onboarded:78:async (self, flow:VoiceOnboardingFlow)>None::AC-T013.3: Detects user needing onboarding.","test_skip_onboarding_if_done:90:async (self, flow:VoiceOnboardingFlow)>None::AC-T013.2: Skips onboarding flow if completed."]],"TestPhoneCollection":["102",["flow:106:(self)>VoiceOnboardingFlow::Create flow instance.","test_request_phone_message:111:async (self, flow:VoiceOnboardingFlow)>None::AC-T014.1: Generates phone request message.","test_validate_phone_format_valid:119:async (self, flow:VoiceOnboardingFlow)>None::AC-T014.2: Accepts valid phone formats.","test_validate_phone_format_invalid:129:async (self, flow:VoiceOnboardingFlow)>None::AC-T014.2: Rejects invalid phone formats.","test_store_phone_number:139:async (self, flow:VoiceOnboardingFlow)>None::AC-T014.3: Stores phone number.","test_store_invalid_phone_error:153:async (self, flow:VoiceOnboardingFlow)>None::AC-T014.4: Returns error for invalid phone."]],"TestReadyConfirmation":["163",["flow:167:(self)>VoiceOnboardingFlow::Create flow instance.","test_get_confirmation_message:172:async (self, flow:VoiceOnboardingFlow)>None::AC-T015.1: Asks user if ready.","test_process_yes_response:180:async (self, flow:VoiceOnboardingFlow)>None::AC-T015.2: 'yes' triggers call.","test_process_confirmation_variants:201:async (self, flow:VoiceOnboardingFlow)>None::AC-T015.2: Various yes variants trigger call.","test_process_not_now_response:209:async (self, flow:VoiceOnboardingFlow)>None::AC-T015.3: 'not now' defers.","test_defer_variants:218:async (self, flow:VoiceOnboardingFlow)>None::AC-T015.3: Various defer variants recognized."]],"TestCallInitiation":["226",["flow:230:(self)>VoiceOnboardingFlow::Create flow instance.","test_initiate_call_success:235:async (self, flow:VoiceOnboardingFlow)>None::AC-T016.1: Initiates call via ElevenLabs.","test_initiate_call_uses_meta_nikita:249:async (self, flow:VoiceOnboardingFlow)>None::AC-T016.2: Uses Meta-Nikita agent.","test_initiate_call_failure_handled:264:async (self, flow:VoiceOnboardingFlow)>None::AC-T016.3: Handles call failures gracefully.","test_updates_status_on_call_start:278:async (self, flow:VoiceOnboardingFlow)>None::Call initiation updates user onboarding status."]],"TestFlowOrchestration":["292",["flow:296:(self)>VoiceOnboardingFlow::Create flow instance.","test_handle_message_when_awaiting_phone:301:async (self, flow:VoiceOnboardingFlow)>None::Routes to phone collection when awaiting phone.","test_handle_message_when_awaiting_confirmation:318:async (self, flow:VoiceOnboardingFlow)>None::Routes to confirmation when awaiting ready response.","test_get_current_step_message:337:async (self, flow:VoiceOnboardingFlow)>None::Returns appropriate message for current step.","test_complete_flow_end_to_end:350:async (self, flow:VoiceOnboardingFlow)>None::Full flow from phone to call initiation."]],"TestDeferredOnboarding":["369",["flow:373:(self)>VoiceOnboardingFlow::Create flow instance.","test_defer_saves_state:378:async (self, flow:VoiceOnboardingFlow)>None::Deferring saves state for later.","test_can_resume_deferred:391:async (self, flow:VoiceOnboardingFlow)>None::Deferred onboarding can be resumed.","test_onboard_command_resumes:407:async (self, flow:VoiceOnboardingFlow)>None::User can use /onboard to resume."]]}],"t/post_processing/test_graph_updater.py":["p",{"TestGraphUpdater":["20",["mock_memory:24:(self)::Create mock memory client.","mock_memory_factory:33:(self, mock_memory):factory:Create mock memory factory.","factory:35:async (user_id:str)::","test_update_with_transcript:40:async (self, mock_memory_factory, mock_memory)::AC-T021.3: Extracts facts from conversation.","test_update_without_transcript:69:async (self, mock_memory_factory, mock_memory)::Update with no transcript returns zeros.","test_update_empty_transcript:86:async (self, mock_memory_factory, mock_memory)::Update with empty transcript returns zeros.","test_process_user_message:102:async (self, mock_memory_factory, mock_memory)::AC-T021.2: Updates user_graph with user messages.","test_process_assistant_message:126:async (self, mock_memory_factory, mock_memory)::AC-T021.2: Updates relationship_graph with assistant messages.","test_add_user_fact:150:async (self, mock_memory_factory, mock_memory)::add_user_fact method works correctly.","test_add_relationship_event:167:async (self, mock_memory_factory, mock_memory)::add_relationship_event method works correctly.","test_error_handling_continues:184:async (self, mock_memory_factory, mock_memory)::Errors in one message don't stop processing of others."]],"TestGetGraphUpdater":["215",["test_singleton_pattern:218:(self)::get_graph_updater returns same instance."]]}],"t/post_processing/test_pipeline.py":["p",["mock_session_context:39:async ()::","create_mock_session_maker:45:():session_context,session_maker:","create_mock_user_repo:72:()::","get_pipeline_patches:83:():create_mock_session_maker,create_mock_user_repo:"],{"TestProcessingStep":["124",["test_step_initial_state:127:(self)::Step starts in PENDING state.","test_mark_running:136:(self)::mark_running sets status and timestamp.","test_mark_completed:146:(self)::mark_completed sets status and timestamp.","test_mark_failed:157:(self)::mark_failed sets status and error message.","test_mark_skipped:168:(self)::mark_skipped sets status and reason."]],"TestProcessingResult":["178",["test_result_initial_state:181:(self)::Result starts with empty steps.","test_failed_steps_property:193:(self)::failed_steps returns only failed steps.","test_completed_steps_property:211:(self)::completed_steps returns only completed steps.","test_partial_success_property:229:(self)::partial_success is True when some steps pass and some fail."]],"TestPostProcessingPipeline":["247",["mock_db_session:251:(self):create_mock_session_maker:Mock database session to prevent real DB calls in pipeline steps.","mock_graph_updater:284:(self)::Create mock graph updater.","mock_summary_generator:291:(self)::Create mock summary generator.","mock_life_simulator:298:(self)::Create mock life simulator.","mock_layer_composer:305:(self)::Create mock layer composer.","mock_package_store:316:(self)::Create mock package store.","mock_state_computer:323:(self)::Create mock state computer (Spec 023).","mock_conflict_generator:338:(self)::Create mock conflict generator (Spec 027).","mock_touchpoint_scheduler:348:(self)::Create mock touchpoint scheduler (Spec 025).","test_process_success:366:async (self, mock_db_session, mock_graph_updater, mock_summary_generator, mock_life_simulator, mock_state_computer, mock_conflict_generator, mock_touchpoint_scheduler, mock_layer_composer, mock_package_store,)::AC-T020.2: process() runs all steps in sequence.","test_process_returns_result:411:async (self, mock_db_session, mock_graph_updater, mock_summary_generator, mock_life_simulator, mock_state_computer, mock_conflict_generator, mock_touchpoint_scheduler, mock_layer_composer, mock_package_store,)::AC-T020.3: Returns ProcessingResult with step status.","test_process_partial_failure:450:async (self, mock_db_session, mock_graph_updater, mock_summary_generator, mock_life_simulator, mock_state_computer, mock_conflict_generator, mock_touchpoint_scheduler, mock_layer_composer, mock_package_store,)::AC-T020.4: Error handling with partial completion support.","test_process_layer_composer_failure_skips_storage:492:async (self, mock_db_session, mock_graph_updater, mock_summary_generator, mock_life_simulator, mock_state_computer, mock_conflict_generator, mock_touchpoint_scheduler, mock_layer_composer, mock_package_store,)::When layer composer fails, storage is skipped.","test_process_step_metadata:530:async (self, mock_db_session, mock_graph_updater, mock_summary_generator, mock_life_simulator, mock_state_computer, mock_conflict_generator, mock_touchpoint_scheduler, mock_layer_composer, mock_package_store,)::Steps capture metadata from processing."]],"TestGetPostProcessingPipeline":["556",["test_singleton_pattern:559:(self)::get_post_processing_pipeline returns same instance."]],"TestPipelineIntegration":["571",["test_full_pipeline_execution:575:async (self):get_pipeline_patches:AC-T025.2: Test full pipeline execution with mocks.","test_partial_failure_handling:652:async (self):get_pipeline_patches:AC-T025.3: Test partial failure handling.","test_package_storage_verification:723:async (self):get_pipeline_patches:AC-T025.4: Test package storage verification."]],"TestLifeSimulationStep":["794",["test_pipeline_calls_life_simulator:798:async (self):get_pipeline_patches:AC-T014.1: PostProcessingPipeline calls LifeSimulator.","test_events_generated_after_conversation:863:async (self):get_pipeline_patches:AC-T014.2: Events generated after each conversation.","test_life_simulation_error_does_not_fail_pipeline:933:async (self):get_pipeline_patches:AC-T014.3: Errors logged but don't fail pipeline."]]}],"t/post_processing/test_trigger.py":["p",{"TestIsPipelineEnabled":["22",["test_returns_true_by_default:25:(self)::AC-T024.4: Pipeline is enabled by default.","test_returns_false_when_disabled:33:(self)::AC-T024.4: Feature flag can disable pipeline."]],"TestTriggerPipeline":["42",["test_trigger_when_enabled:46:async (self)::AC-T024.2: Pipeline runs when enabled.","test_trigger_when_disabled:75:async (self)::Pipeline doesn't run when disabled.","test_trigger_with_transcript:89:async (self)::Pipeline receives transcript when provided.","test_trigger_handles_exception:119:async (self)::AC-T024.3: Logs and handles exceptions."]],"TestTriggerPipelineBackground":["139",["test_background_catches_exceptions:143:async (self)::Background wrapper catches all exceptions."]],"TestAddPipelineTriggerToBackgroundTasks":["158",["test_adds_task_when_enabled:161:(self)::AC-T024.1: Adds task to BackgroundTasks when enabled.","test_does_not_add_when_disabled:176:(self)::Doesn't add task when pipeline disabled.","test_passes_transcript:191:(self)::Transcript is passed to background task."]]}],"t/text_patterns/test_emoji.py":["p",{"TestEmojiProcessor":["17",["test_process_returns_tuple:20:(self)::AC-T005.1: process() returns (text, count) tuple.","test_process_adds_emoji_probabilistically:30:(self)::AC-T005.2: process() may add emoji based on probability.","test_process_loads_config:44:(self)::AC-T005.3: Loads approved list from config.","test_default_processor:60:(self)::AC-T005.4: Default processor works."]],"TestContextBasedSelection":["69",["test_flirtation_context:72:(self)::AC-T006.1: Flirtation context uses appropriate emojis.","test_sarcasm_context:91:(self)::AC-T006.1: Sarcasm context uses appropriate emojis.","test_affection_context:107:(self)::AC-T006.1: Affection context uses appropriate emojis.","test_probability_based_selection:123:(self)::AC-T006.2: Selection is probability-based.","test_zero_probability:146:(self)::AC-T006.3: Zero probability never adds emojis."]],"TestEmojiValidation":["156",["test_max_emojis_enforced:159:(self)::AC-T007.1: Max 2 emojis per message enforced.","test_sequential_emojis_removed:172:(self)::AC-T007.2: No sequential emojis (\ud83d\ude02\ud83d\ude02) allowed.","test_unapproved_emojis_removed:182:(self)::AC-T007.3: Only approved emojis allowed.","test_approved_emojis_kept:195:(self)::Approved emojis are kept.","test_classic_emoticons_allowed:206:(self)::Classic emoticons are allowed."]],"TestEmojiProcessorHelpers":["217",["test_count_emojis:220:(self)::_count_emojis counts correctly.","test_add_emoji_at_end:233:(self)::_add_emoji adds at appropriate position.","test_add_emoji_without_punctuation:247:(self)::_add_emoji handles text without punctuation.","test_validate_only_no_changes:259:(self)::validate_only returns changed=False when no changes needed."]],"TestEmojiEdgeCases":["270",["test_empty_text:273:(self)::Empty text handled correctly.","test_text_with_newlines:281:(self)::Text with newlines handled correctly.","test_text_with_special_chars:289:(self)::Text with special chars handled correctly.","test_unicode_handling:297:(self)::Unicode text handled correctly."]]}],"t/text_patterns/test_infrastructure.py":["p",{"TestModuleStructure":["28",["test_module_imports:31:(self)::AC-T001.1: Module imports work.","test_module_file_structure:55:(self)::AC-T001.2: Module files exist."]],"TestEmojiConfig":["73",["test_default_config:76:(self)::AC-T002.1: Default EmojiConfig is valid.","test_custom_config:85:(self)::EmojiConfig accepts custom values.","test_empty_emoji_list_rejected:97:(self)::AC-T002.3: Empty emoji list raises error.","test_empty_emoticons_rejected:102:(self)::Empty emoticon list raises error.","test_empty_context_emojis_rejected:107:(self)::Empty context emoji list raises error.","test_max_per_message_bounds:112:(self)::Max per message has bounds.","test_selection_probability_bounds:120:(self)::Selection probability is 0-1.","test_get_all_allowed:128:(self)::get_all_allowed returns combined list.","test_get_context_emojis:136:(self)::get_context_emojis returns appropriate emojis."]],"TestLengthConfig":["148",["test_default_config:151:(self)::Default LengthConfig is valid.","test_custom_config:160:(self)::LengthConfig accepts custom values.","test_max_less_than_min_rejected:173:(self)::max_chars must be >= min_chars.","test_pre_defined_configs:178:(self)::Pre-defined configs exist for all contexts.","test_casual_config:186:(self)::Casual config matches spec.","test_emotional_config:192:(self)::Emotional config matches spec.","test_deep_config:198:(self)::Deep config matches spec."]],"TestSplitConfig":["205",["test_default_config:208:(self)::Default SplitConfig is valid.","test_split_markers:217:(self)::Split markers include expected words.","test_invalid_delay_range:225:(self)::Invalid delay range raises error."]],"TestPunctuationConfig":["234",["test_default_config:237:(self)::Default PunctuationConfig is valid.","test_lol_variants:245:(self)::lol_variants contains expected values.","test_haha_variants:252:(self)::haha_variants contains expected values."]],"TestSplitMessage":["260",["test_basic_message:263:(self)::SplitMessage can be created.","test_defaults:271:(self)::SplitMessage has sensible defaults."]],"TestTextPatternResult":["279",["test_basic_result:282:(self)::TextPatternResult can be created.","test_message_count_property:298:(self)::message_count returns correct value.","test_get_messages_for_sending:311:(self)::get_messages_for_sending returns tuples.","test_empty_messages_fallback:325:(self)::Empty messages returns processed_text."]],"TestYamlConfigLoading":["337",["config_base:341:(self)::Get config data directory path.","test_emoji_yaml_exists:345:(self, config_base)::AC-T003.1: emojis.yaml exists.","test_patterns_yaml_exists:349:(self, config_base)::AC-T003.2: patterns.yaml exists.","test_emoji_yaml_loadable:353:(self, config_base)::emojis.yaml is valid YAML.","test_patterns_yaml_loadable:363:(self, config_base)::patterns.yaml is valid YAML.","test_emoji_yaml_valid_config:372:(self, config_base)::emojis.yaml creates valid EmojiConfig.","test_patterns_yaml_length_config:391:(self, config_base)::AC-T003.3: Length configuration per context.","test_patterns_yaml_splitting_config:406:(self, config_base)::Splitting configuration is valid.","test_patterns_yaml_punctuation_config:417:(self, config_base)::AC-T003.4: Punctuation configuration is valid."]],"TestMessageContext":["429",["test_all_contexts:432:(self)::All expected contexts exist."]],"TestEmojiContext":["441",["test_all_contexts:444:(self)::All expected emoji contexts exist."]]}],"t/text_patterns/test_integration.py":["p",{"TestTextPatternProcessor":["26",["test_process_returns_result:29:(self)::AC-T020.1: process() returns TextPatternResult.","test_process_applies_all_patterns:36:(self)::AC-T020.2: process() applies all patterns in order.","test_process_returns_messages:48:(self)::AC-T020.3: process() returns messages list.","test_default_processor:57:(self)::AC-T020.4: Default processor works without config."]],"TestContextDetection":["66",["test_detect_casual:69:(self)::Casual context detected for simple messages.","test_detect_emotional:76:(self)::Emotional context detected for feeling words.","test_detect_flirty:83:(self)::Flirty context detected for romantic words.","test_detect_conflict:90:(self)::Conflict context detected for angry words.","test_detect_deep:97:(self)::Deep context detected for relationship words.","test_context_override:104:(self)::Context can be overridden."]],"TestEmojiContextMapping":["115",["test_casual_maps_to_neutral:118:(self)::Casual maps to neutral emoji context.","test_flirty_maps_to_flirtation:125:(self)::Flirty maps to flirtation emoji context.","test_conflict_maps_to_sarcasm:132:(self)::Conflict maps to sarcasm emoji context."]],"TestProcessForSending":["140",["test_returns_tuples:143:(self)::Returns list of (content, delay) tuples.","test_first_message_no_delay:155:(self)::First message has zero delay.","test_tuples_have_content_and_delay:162:(self)::Tuples have string content and int delay."]],"TestYamlConfig":["172",["test_from_yaml_config_creates_processor:175:(self, tmp_path)::from_yaml_config creates processor."]],"TestE2EPipeline":["217",["test_full_pipeline_casual:220:(self)::Full pipeline for casual message.","test_full_pipeline_emotional:231:(self)::Full pipeline for emotional message.","test_full_pipeline_long_message:242:(self)::Full pipeline for long message that should split.","test_pipeline_preserves_meaning:255:(self)::Pipeline preserves core meaning."]],"TestQualityMetrics":["266",["test_emoji_density_in_range:269:(self)::AC-T023.1: Emoji density 0.5-1.5 per 100 chars.","test_split_rate_reasonable:297:(self)::AC-T023.2: Split rate is reasonable.","test_no_sequential_emojis:321:(self)::AC-T023.3: No sequential emojis in output."]],"TestTextAgentIntegration":["347",["test_integration_point_exists:350:(self)::AC-T021.1: Integration point method exists.","test_integration_returns_sendable_format:358:(self)::AC-T021.2: Returns format suitable for sending.","test_integration_with_context:371:(self)::AC-T021.3: Integration works with context override."]],"TestEdgeCases":["383",["test_empty_text:386:(self)::Empty text handled.","test_whitespace_only:394:(self)::Whitespace text handled.","test_unicode_text:401:(self)::Unicode text handled.","test_newlines_handled:408:(self)::Newlines in text handled.","test_special_characters:415:(self)::Special characters preserved.","test_very_long_text:423:(self)::Very long text handled."]]}],"t/text_patterns/test_length.py":["p",{"TestLengthAdjuster":["16",["test_adjust_returns_string:19:(self)::AC-T009.1: adjust() returns string.","test_within_bounds_unchanged:26:(self)::AC-T009.2: Text within bounds is unchanged.","test_loads_config:36:(self)::AC-T009.3: Loads length config.","test_default_adjuster:53:(self)::AC-T009.4: Default adjuster works."]],"TestContextLengthTargets":["61",["test_casual_10_50_chars:64:(self)::AC-T010.1: casual: 10-50 chars.","test_emotional_100_300_chars:71:(self)::AC-T010.2: emotional: 100-300 chars.","test_conflict_50_150_chars:78:(self)::AC-T010.3: conflict: 50-150 chars.","test_deep_150_400_chars:85:(self)::AC-T010.4: deep: 150-400 chars.","test_flirty_config:92:(self)::AC-T010.5: Flirty config exists."]],"TestTruncation":["100",["test_truncate_at_sentence:103:(self)::AC-T011.1: Truncate at natural break points.","test_never_cut_mid_word:114:(self)::AC-T011.2: Never cut mid-word.","test_preserve_meaning:125:(self)::AC-T011.3: Preserve meaning in truncation.","test_add_ellipsis:135:(self)::Ellipsis added when cutting mid-thought."]],"TestLengthHelpers":["145",["test_get_target_length:148:(self)::get_target_length returns correct range.","test_is_within_bounds_true:160:(self)::is_within_bounds returns True for valid length.","test_is_within_bounds_false_too_long:168:(self)::is_within_bounds returns False when too long.","test_is_within_bounds_false_too_short:176:(self)::is_within_bounds returns False when too short."]],"TestLengthEdgeCases":["185",["test_empty_text:188:(self)::Empty text returns empty.","test_exact_max_length:195:(self)::Text at exact max length is unchanged.","test_one_char_over:205:(self)::Text 1 char over is truncated.","test_short_text_not_padded:217:(self)::Short text is not padded.","test_text_with_unicode:227:(self)::Unicode text handled correctly.","test_truncate_single_long_word:236:(self)::Single very long word truncated gracefully."]]}],"t/text_patterns/test_punctuation.py":["p",{"TestPunctuationProcessor":["16",["test_apply_returns_string:19:(self)::AC-T017.1: apply() returns string.","test_apply_modifies_text:26:(self)::AC-T017.2: apply() modifies punctuation.","test_lowercase_preference:39:(self)::AC-T017.3: Handles lowercase preference.","test_default_processor:49:(self)::AC-T017.4: Default processor works."]],"TestQuirkPatterns":["57",["test_trailing_dots:60:(self)::AC-T018.1: Trailing dots '...' usage.","test_trailing_dots_skipped_when_question:72:(self)::Trailing dots skipped for questions.","test_lol_variants:85:(self)::AC-T018.2: 'lol' variants normalized.","test_haha_variants:107:(self)::AC-T018.2: 'haha' variants normalized.","test_exclamation_sparingly:126:(self)::AC-T018.3: Exclamation points used sparingly."]],"TestLowercaseApplication":["141",["test_preserves_standalone_i:144:(self)::Standalone 'I' preserved.","test_preserves_im:157:(self)::'I'm' preserved.","test_non_casual_not_lowercased:170:(self)::Non-casual messages not lowercased."]],"TestAddExclamation":["181",["test_force_exclamation:184:(self)::Force adds exclamation.","test_replaces_period:191:(self)::Replaces existing period.","test_no_double_punctuation:198:(self)::Doesn't double up punctuation."]],"TestEnsureEndingPunctuation":["209",["test_adds_period:212:(self)::Adds period if missing.","test_preserves_existing:219:(self)::Preserves existing punctuation.","test_empty_text:227:(self)::Empty text returns empty."]],"TestPunctuationEdgeCases":["234",["test_empty_text:237:(self)::Empty text returns empty.","test_whitespace_only:244:(self)::Whitespace handled.","test_special_chars:251:(self)::Special chars preserved.","test_unicode_text:260:(self)::Unicode text handled.","test_multiple_sentences:271:(self)::Multiple sentences handled."]]}],"t/text_patterns/test_splitting.py":["p",{"TestMessageSplitter":["16",["test_split_returns_list:19:(self)::AC-T013.1: split() returns list of SplitMessage.","test_short_message_not_split:27:(self)::AC-T013.2: Short messages stay as single message.","test_configurable_threshold:38:(self)::AC-T013.3: Threshold is configurable.","test_default_splitter:49:(self)::AC-T013.4: Default splitter works."]],"TestBreakPointDetection":["57",["test_sentence_boundary_split:60:(self)::AC-T014.2: Prefer sentence boundaries.","test_marker_word_split:73:(self)::AC-T014.1: Split at marker words (but, and, etc.).","test_minimum_split_length:84:(self)::AC-T014.3: Minimum split length enforced.","test_merge_short_sentences:96:(self)::Short sentences merged together."]],"TestDelayCalculation":["107",["test_delay_in_range:110:(self)::AC-T015.1: Delays within configured range.","test_first_message_no_delay:120:(self)::First message has zero delay.","test_delays_have_variability:130:(self)::AC-T015.2: Slight variability in delays.","test_split_messages_have_delays:140:(self)::AC-T015.3: Split messages include delays."]],"TestSplitMessageObject":["152",["test_message_has_content:155:(self)::Message has content field.","test_message_has_index:162:(self)::Message has index field.","test_message_has_delay:172:(self)::Message has delay_ms field."]],"TestSplitterHelpers":["180",["test_should_split_true:183:(self)::should_split returns True for long text.","test_should_split_false:191:(self)::should_split returns False for short text.","test_get_total_delay:199:(self)::get_total_delay returns sum of delays."]],"TestSplitEdgeCases":["213",["test_empty_text:216:(self)::Empty text returns single empty message.","test_whitespace_only:224:(self)::Whitespace-only text handled.","test_single_long_word:231:(self)::Single very long word handled.","test_text_with_newlines:241:(self)::Text with newlines handled.","test_unicode_text:250:(self)::Unicode text handled.","test_many_short_words:260:(self)::Many short words handled.","test_force_split_at_threshold:271:(self)::_force_split works when no natural breaks."]]}],"t/touchpoints/test_delivery.py":["p",["mock_session:33:()::","mock_store:42:()::","mock_scheduler:48:()::","mock_generator:54:()::","mock_silence:60:()::","sample_touchpoint:66:()::","engine_with_mocks:83:(mock_session, mock_store, mock_scheduler, mock_generator, mock_silence)::"],{"TestTouchpointEngineClass":["109",["test_engine_exists:112:(self, mock_session)::AC-T021.1: TouchpointEngine class exists.","test_engine_has_session:121:(self, engine_with_mocks, mock_session)::Engine stores session.","test_engine_has_config:125:(self, engine_with_mocks)::Engine has config.","test_engine_has_min_gap:130:(self, engine_with_mocks)::Engine has min_gap_minutes."]],"TestDeliverDueTouchpoints":["135",["test_deliver_processes_queue:139:async (self, engine_with_mocks, sample_touchpoint)::AC-T021.2: deliver_due_touchpoints() processes queue.","test_deliver_empty_queue:158:async (self, engine_with_mocks)::Empty queue returns empty results.","test_deliver_handles_error_gracefully:167:async (self, engine_with_mocks, sample_touchpoint)::AC-T021.3: Handles errors gracefully."]],"TestDeliverySingleTouchpoint":["183",["test_successful_delivery:187:async (self, engine_with_mocks, sample_touchpoint)::Successful delivery marks as delivered.","test_skipped_for_silence:203:async (self, engine_with_mocks, sample_touchpoint)::Touchpoint skipped for strategic silence.","test_telegram_failure_marks_failed:218:async (self, engine_with_mocks, sample_touchpoint)::Telegram failure marks touchpoint for retry."]],"TestTelegramDelivery":["240",["test_send_uses_existing_bot:244:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.1: Use existing TelegramBot.send_message().","test_no_chat_id_fails:265:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.2: Fails if no chat_id found.","test_telegram_exception_returns_false:274:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.3: Handle send failures."]],"TestDeduplication":["293",["test_skip_if_recent_touchpoint:297:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.1: Check recent touchpoints before scheduling.","test_proceed_if_no_recent:323:async (self, engine_with_mocks, sample_touchpoint)::Proceed if no recent touchpoints.","test_min_gap_respected:338:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.2: Minimum gap between touchpoints.","test_excludes_self_from_dedup:366:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.3: Exclude current touchpoint from dedup check."]],"TestPhasECoverage":["382",["test_engine_module_importable:385:(self)::AC-T025.1: Engine module importable.","test_engine_in_package_exports:397:(self)::Engine exported from package.","test_delivery_result_repr:409:(self)::DeliveryResult has useful repr.","test_convenience_function:433:async (self, mock_session)::Convenience function works."]],"TestEngineScheduling":["453",["test_evaluate_and_schedule:457:async (self, engine_with_mocks)::Engine can evaluate and schedule for user.","test_skip_if_recent_contact:486:async (self, engine_with_mocks)::Skip scheduling if recent touchpoint exists.","test_skip_if_not_eligible:499:async (self, engine_with_mocks)::Skip scheduling if user not eligible."]],"TestDeliveryTimeComputation":["521",["test_time_trigger_immediate:524:(self, engine_with_mocks)::TIME triggers deliver immediately.","test_event_trigger_delayed:536:(self, engine_with_mocks)::EVENT triggers have small delay.","test_gap_trigger_soon:551:(self, engine_with_mocks)::GAP triggers deliver soon."]]}],"t/touchpoints/test_e2e.py":["p",{"TestFullPipelineE2E":["26",["test_time_trigger_to_delivery:30:async (self)::Full pipeline: morning slot \u2192 schedule \u2192 generate \u2192 deliver.","test_event_trigger_to_delivery:55:async (self)::Full pipeline: life event \u2192 schedule \u2192 generate \u2192 deliver.","test_gap_trigger_to_delivery:75:async (self)::Full pipeline: 48h gap \u2192 schedule \u2192 generate \u2192 deliver.","test_strategic_silence_blocks_delivery:101:async (self)::Strategic silence should block delivery when activated.","test_conflict_blocks_delivery:132:async (self)::Active conflict should always block delivery.","test_deduplication_prevents_double_message:145:async (self)::Deduplication should prevent messages too close together."]],"TestQualityMetrics":["179",["test_initiation_rate_within_target:182:(self)::Initiation rate should be 20-30% over simulated period.","test_chapter_rates_progressive:208:(self)::Higher chapters should have higher initiation rates.","test_gap_triggers_increase_with_time:236:(self)::Gap-based triggers should exist for extended absences."]],"TestTimeBasedTouchpoints":["261",["test_morning_slot_detection:264:(self)::Morning slot (8-10am) should be detected.","test_evening_slot_detection:281:(self)::Evening slot (7-9pm) should be detected.","test_outside_slots_no_time_trigger:298:(self)::Hours outside slots should not produce time-based triggers."]],"TestEventBasedTouchpoints":["316",["test_high_importance_events_trigger:319:(self)::High importance events (>0.7) should be more likely to trigger.","test_emotional_events_trigger_more:353:(self)::Emotional events should trigger more often."]],"TestMessageDiversity":["390",["test_different_triggers_different_context:394:async (self)::Different trigger types should produce different contexts.","test_chapter_affects_message_style:424:async (self)::Different chapters should have different behavioral context."]],"TestDeliveryResultTracking":["441",["test_successful_delivery_result:444:(self)::Successful delivery should have correct attributes.","test_skipped_delivery_result:457:(self)::Skipped delivery should have reason.","test_failed_delivery_result:469:(self)::Failed delivery should have error.","test_delivery_result_repr:481:(self)::Result repr should be informative."]]}],"t/touchpoints/test_generation.py":["p",["mock_session:27:()::","mock_user:33:()::","mock_agent_class:42:()::","generator:54:(mock_session, mock_agent_class)::"],{"TestMessageGeneratorClass":["67",["test_generator_exists:70:(self, generator)::AC-T012.1: MessageGenerator class exists.","test_generator_has_session:74:(self, generator, mock_session)::Generator stores session.","test_generator_has_agent:78:(self, generator)::Generator has Haiku agent.","test_generator_loads_template:82:(self, generator)::Generator loads template."]],"TestGenerateMethod":["88",["test_generate_returns_string:92:async (self, generator, mock_user)::AC-T012.2: generate() returns string content.","test_generate_with_life_event:115:async (self, generator, mock_user)::Generate with life event context."]],"TestMetaPromptIntegration":["145",["test_uses_haiku_agent:148:(self, generator)::AC-T013.1: Uses Haiku agent like MetaPromptService.","test_passes_trigger_context:154:async (self, generator, mock_user)::AC-T013.2: Passes trigger context for personalization.","test_uses_proactive_template:179:(self, generator)::AC-T013.3: Uses proactive message template."]],"TestLifeEventContext":["190",["test_loads_life_event:194:async (self, generator, mock_user)::AC-T014.1: Loads relevant life event from trigger_context.","test_includes_event_in_prompt:221:async (self, generator, mock_user)::AC-T014.2: Includes event description in prompt."]],"TestEmotionalStateContext":["252",["test_format_emotional_state_positive:255:(self, generator)::AC-T015.2: High valence affects message tone.","test_format_emotional_state_negative:268:(self, generator)::AC-T015.2: Low valence affects message tone.","test_format_emotional_state_neutral:281:(self, generator)::Neutral emotional state.","test_emotional_state_in_prompt:294:async (self, generator, mock_user)::AC-T015.3: Emotional state included in generation prompt."]],"TestMoodComputation":["328",["test_compute_mood_gap_trigger:331:(self, generator)::Gap trigger has specific mood.","test_compute_mood_morning:342:(self, generator)::Morning slot has optimistic mood.","test_compute_mood_evening:353:(self, generator)::Evening slot has relaxed mood.","test_compute_mood_from_emotional_state:364:(self, generator)::Mood from emotional state overrides defaults.","test_compute_energy_morning:380:(self, generator)::Morning has waking up energy.","test_compute_energy_evening:391:(self, generator)::Evening has winding down energy.","test_compute_energy_event:402:(self, generator)::Event trigger has high energy."]],"TestTemplate":["421",["test_template_file_exists:424:(self)::Template file should exist.","test_template_has_placeholders:428:(self, generator)::Template has required placeholders.","test_format_template:436:(self, generator)::Template formatting replaces placeholders."]],"TestConvenienceFunction":["464",["test_convenience_function_exists:467:(self)::Convenience function is importable."]],"TestPhaseCCoverage":["480",["test_generator_module_importable:483:(self, mock_agent_class)::AC-T016.1: Generator module importable.","test_generator_in_package_exports:493:(self, mock_agent_class)::Generator exported from package.","test_template_exists:500:(self)::Template file exists.","test_all_trigger_types_handled:506:(self, generator)::All trigger types handled in mood/energy computation."]]}],"t/touchpoints/test_infrastructure.py":["p",{"TestModuleStructure":["30",["test_module_exists:33:(self)::AC-T001.1: Module can be imported.","test_exports_models:39:(self)::Module exports expected model classes.","test_submodules_exist:53:(self)::AC-T001.2: Submodules can be imported."]],"TestTriggerType":["67",["test_trigger_types_exist:70:(self)::AC-T002.3: All trigger types defined.","test_enum_membership:76:(self)::Enum values can be checked."]],"TestTriggerContext":["83",["test_time_trigger_context:86:(self)::AC-T002.2: TriggerContext for time triggers.","test_event_trigger_context:97:(self)::TriggerContext for event triggers.","test_gap_trigger_context:108:(self)::TriggerContext for gap triggers.","test_time_slot_validation:117:(self)::Time slot validation for TIME triggers.","test_time_slot_required_for_time_trigger:130:(self)::Time slot is required for TIME triggers.","test_emotional_state_default:135:(self)::Emotional state defaults to empty dict."]],"TestTouchpointConfig":["144",["test_default_config:147:(self)::AC-T002.2: Default config values.","test_custom_config:154:(self)::Custom config values.","test_rate_max_validation:165:(self)::Max rate must be >= min rate.","test_time_slot_hours:173:(self)::Time slot hour defaults.","test_gap_config:181:(self)::Gap configuration defaults."]],"TestChapterConfigs":["188",["test_all_chapters_have_config:191:(self)::All 5 chapters have configs.","test_chapter_1_config:196:(self)::Chapter 1 config (FR-002).","test_chapter_2_config:203:(self)::Chapter 2 config (FR-002).","test_chapter_3_plus_config:210:(self)::Chapters 3-5 config (FR-002).","test_get_config_for_chapter:218:(self)::get_config_for_chapter helper.","test_get_config_for_invalid_chapter:223:(self)::Invalid chapter falls back to chapter 1."]],"TestScheduledTouchpoint":["229",["test_create_touchpoint:232:(self)::AC-T002.1: ScheduledTouchpoint creation.","test_touchpoint_id_auto_generated:254:(self)::Touchpoint ID is auto-generated.","test_is_due_property:267:(self)::is_due property works correctly.","test_is_due_respects_delivered:287:(self)::is_due returns False if already delivered.","test_is_due_respects_skipped:298:(self)::is_due returns False if skipped.","test_mark_delivered:309:(self)::mark_delivered method works.","test_mark_skipped:324:(self)::mark_skipped method works."]],"TestTouchpointStore":["345",["mock_session:349:(self)::Create mock AsyncSession.","store:358:(self, mock_session)::Create TouchpointStore with mock session.","sample_touchpoint:365:(self)::Create sample touchpoint for testing.","test_create_touchpoint:381:async (self, store, mock_session, sample_touchpoint)::AC-T004.1: Create operation works.","test_store_has_crud_methods:390:async (self, store)::AC-T004.1: CRUD methods exist.","test_get_due_touchpoints_method_exists:399:async (self, store)::AC-T004.2: get_due_touchpoints method exists.","test_mark_delivered_method_exists:405:async (self, store)::AC-T004.3: mark_delivered method exists.","test_get_user_touchpoints_method_exists:411:async (self, store)::AC-T004.4: get_user_touchpoints method exists.","test_get_recent_touchpoints_method_exists:417:async (self, store)::get_recent_touchpoints for deduplication exists.","test_count_pending_method_exists:423:async (self, store)::count_pending helper exists."]],"TestPhaseACoverage":["434",["test_models_module_coverage:437:(self)::All model classes are tested.","test_store_module_coverage:456:(self)::Store module is importable.","test_db_model_coverage:462:(self)::Database model is importable."]]}],"t/touchpoints/test_scheduling.py":["p",{"TestTouchpointSchedulerClass":["38",["test_scheduler_exists:41:(self)::AC-T006.1: TouchpointScheduler class exists.","test_scheduler_has_default_config:46:(self)::Scheduler has default config.","test_scheduler_with_custom_config:52:(self)::Scheduler accepts custom default config.","test_get_config_for_chapter:61:(self)::Scheduler retrieves chapter-specific config."]],"TestScheduleMethod":["69",["test_schedule_creates_touchpoint:72:(self)::AC-T006.2: schedule() creates touchpoint.","test_schedule_with_delay:93:(self)::Schedule with delivery delay."]],"TestEvaluateUser":["116",["test_evaluate_user_returns_list:119:(self)::AC-T006.3: evaluate_user returns list of triggers.","test_evaluate_user_empty_when_no_triggers:137:(self)::Returns empty list when no triggers apply."]],"TestTimeTriggers":["158",["test_morning_slot_detection:161:(self)::AC-T007.1: Morning slot detection (8-10am).","test_evening_slot_detection:173:(self)::AC-T007.2: Evening slot detection (7-9pm).","test_outside_time_slots:185:(self)::Returns None when outside time slots.","test_probability_check:197:(self)::AC-T007.3: Probability check per slot.","test_timezone_handling:209:(self)::AC-T007.4: Timezone handling from user profile.","test_invalid_timezone_fallback:224:(self)::Invalid timezone falls back to UTC.","test_time_trigger_evaluation:233:(self)::Time trigger evaluation integrates all components."]],"TestEventTriggers":["258",["test_event_trigger_basic:261:(self)::AC-T008.1: Event trigger creation.","test_high_importance_events:279:(self)::AC-T008.2: High-importance events more likely to trigger.","test_emotional_events:319:(self)::AC-T008.3: Emotional events (upset, excited) trigger more often.","test_event_includes_emotional_state:358:(self)::Event trigger can include emotional state snapshot."]],"TestGapTriggers":["385",["test_gap_detection:388:(self)::AC-T009.1: Detect gaps > 24 hours without contact.","test_no_gap_trigger_within_24h:408:(self)::No gap trigger if < 24 hours.","test_gap_trigger_context_includes_hours:426:(self)::Gap trigger includes hours_since_contact.","test_get_hours_since_interaction_utility:445:(self)::Utility function calculates hours correctly.","test_get_hours_since_interaction_none:453:(self)::Returns infinity if no last interaction."]],"TestChapterAwareRates":["464",["test_rates_from_config:467:(self)::AC-T010.1: Load rates from config.","test_chapter_1_rates:476:(self)::AC-T010.2: Chapter 1: 15-20%.","test_chapter_2_rates:482:(self)::AC-T010.2: Chapter 2: 20-25%.","test_chapter_3_plus_rates:488:(self)::AC-T010.2: Chapter 3+: 25-30%.","test_rate_lookup_per_chapter:495:(self)::AC-T010.3: Rate lookup per user's current chapter.","test_rate_calculation_within_bounds:504:(self)::AC-T010.4: Rate calculation stays within bounds."]],"TestDeduplication":["523",["test_no_trigger_if_recent_delivered:526:(self)::No trigger if recently delivered touchpoint exists.","test_no_trigger_if_pending_exists:553:(self)::No trigger if pending (undelivered, not skipped) touchpoint exists.","test_allows_trigger_after_min_gap:580:(self)::Allows trigger if last touchpoint was long enough ago."]],"TestPhaseBCoverage":["616",["test_scheduler_module_importable:619:(self)::AC-T011.1: Scheduler module importable.","test_all_trigger_types_covered:629:(self)::All trigger types have tests.","test_chapter_configs_complete:639:(self)::All chapter configs defined and tested."]]}],"t/touchpoints/test_silence.py":["p",{"TestStrategicSilenceClass":["25",["test_silence_class_exists:28:(self)::AC-T017.1: StrategicSilence class exists.","test_apply_strategic_silence_method_exists:33:(self)::AC-T017.1: apply_strategic_silence() method exists.","test_default_rates_defined:39:(self)::Default rates for chapters 1-5.","test_custom_rates:46:(self)::Can provide custom rates."]],"TestSilenceDecision":["53",["test_decision_with_skip:56:(self)::Decision when skipping.","test_decision_without_skip:68:(self)::Decision when proceeding."]],"TestSilenceRates":["81",["test_chapter_1_rate:84:(self)::AC-T017.2: Chapter 1 = 10% silence.","test_chapter_3_rate:90:(self)::AC-T017.2: Chapter 3 = 15% silence.","test_chapter_5_rate:96:(self)::AC-T017.2: Chapter 5 = 20% silence.","test_rates_within_range:102:(self)::All rates within 10-20% range.","test_unknown_chapter_fallback:109:(self)::Unknown chapter uses default."]],"TestSkipRecording":["116",["test_record_skip_with_skip:119:(self)::AC-T017.3: Skip recorded with reason.","test_record_skip_without_skip:138:(self)::Record when not skipping."]],"TestEmotionalStateIntegration":["159",["test_very_upset_always_skips:162:(self)::AC-T018.1: More silence when upset (valence < 0.3).","test_neutral_mood_no_automatic_skip:170:(self)::Neutral mood doesn't automatically skip.","test_happy_mood_no_automatic_skip:177:(self)::Happy mood doesn't automatically skip.","test_conflict_always_skips:184:(self)::AC-T018.2: More silence in conflict states.","test_emotional_modifier_increases_with_low_valence:196:(self)::AC-T018.3: Silence rate modulated by emotional state.","test_high_arousal_with_low_valence_increases_modifier:216:(self)::Agitated state (high arousal + low valence) increases silence.","test_low_dominance_increases_modifier:230:(self)::Low dominance (vulnerable) increases silence slightly.","test_no_emotional_state_returns_neutral_modifier:244:(self)::No emotional state gives modifier of 1.0."]],"TestRandomSkipFactor":["256",["test_random_factor_produces_skips:259:(self)::AC-T019.1: Random factor adds unpredictability.","test_not_purely_deterministic:273:(self)::AC-T019.2: Not purely deterministic.","test_different_seeds_different_results:287:(self)::Different seeds can produce different results.","test_same_seed_same_result:301:(self)::Same seed produces same result (for testing)."]],"TestRandomValueTracking":["312",["test_random_value_in_decision:315:(self)::Random value stored in decision.","test_probability_used_in_decision:324:(self)::Probability used stored in decision."]],"TestPhaseDCoverage":["339",["test_silence_module_importable:342:(self)::AC-T020.1: Silence module importable.","test_all_silence_reasons_exist:356:(self)::All silence reasons defined.","test_convenience_function:364:(self)::Convenience function works.","test_convenience_function_with_emotional_state:371:(self)::Convenience function handles emotional state.","test_convenience_function_with_conflict:380:(self)::Convenience function handles conflict."]],"TestSilenceIntegration":["396",["test_full_flow_neutral_proceed:399:(self)::Full flow: neutral state, proceed.","test_full_flow_upset_skip:414:(self)::Full flow: upset state, skip.","test_full_flow_conflict_skip:427:(self)::Full flow: conflict state, skip.","test_silence_rate_capped_at_50_percent:439:(self)::Silence rate capped at 50% even with high modifier (in normal path).","test_all_chapters_produce_valid_decisions:458:(self)::All chapters produce valid decisions."]]}],"nikita/agents/text/__init__.py":["p",["get_memory_client:22:async (user_id:str)>\"NikitaMemory\"::Lazy wrapper for get_memory_client to avoid import-time errors.","get_user_by_id:36:async (user_id:UUID)>\"User | None\"::","get_nikita_agent_for_user:58:async (user_id:UUID)>tuple[Agent[NikitaDeps, str], NikitaDeps]::"],{"UserNotFoundError":["28",["__init__:31:(self, user_id:UUID):__init__:"]]}],"nikita/agents/text/agent.py":["p",["_create_nikita_agent:33:()>Agent[NikitaDeps, str]:add_chapter_behavior,add_personalized_context,note_user_fact,recall_memory:","get_nikita_agent:147:()>Agent[NikitaDeps, str]:_create_nikita_agent:","build_system_prompt:183:async (memory:\"NikitaMemory | None\", user::str,)>str:_build_system_prompt_legacy:","_build_system_prompt_legacy:229:async (memory:\"NikitaMemory | None\", user::str,)>str:build_system_prompt:","generate_response:267:async (deps:NikitaDeps, user_message::add_personalized_context,build_system_prompt:"],{"_AgentProxy":["160",["_real_agent:166:(self)>Agent[NikitaDeps, str]:get_nikita_agent:","__getattr__:171:(self, name:str)::"]]}],"nikita/agents/text/deps.py":["p",{"NikitaDeps":["17",["chapter:40:(self)>int::"]]}],"nikita/agents/text/facts.py":["p",{"ExtractedFact":["15",[]],"FactExtractor":["67",["__init__:85:(self, min_confidence:float = 0.5)::","extract_facts:99:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]:_call_llm_for_extraction,_deduplicate_facts:","_call_llm_for_extraction:132:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]::","_deduplicate_facts:156:(self, new_facts:list[ExtractedFact], existing_facts:list[str],)>list[ExtractedFact]::"]]}],"nikita/agents/text/handler.py":["p",["_get_nikita_agent_for_user:26:()::","_generate_response:32:()::","get_nikita_agent_for_user:39:async (user_id:UUID)::Wrapper for lazy import.","generate_response:45:async (deps, message:str)::Wrapper for lazy import.","store_pending_response:85:async (user_id:UUID, response::datetime, response_id:UUID,)>None::"],{"ResponseDecision":["54",[]],"MessageHandler":["106",["__init__:135:(self, timer:Optional[ResponseTimer] = None, skip_decision:Optional[SkipDecision] = None, fact_extractor:Optional[FactExtractor] = None,)::","handle:152:async (self, user_id:UUID, message:str)>ResponseDecision:generate_response,get_nikita_agent_for_user,store_pending_response:"]]}],"nikita/agents/text/skip.py":["p",{"SkipDecision":["32",["__init__:53:(self)::Initialize the SkipDecision tracker.","should_skip:57:(self, chapter:int)>bool::","reset:89:(self)>None::Reset the skip tracker state."]]}],"nikita/agents/text/timing.py":["p",{"ResponseTimer":["42",["__init__:58:(self, jitter_factor:float = 0.1)::","calculate_delay:67:(self, chapter:int)>int::","calculate_delay_human_readable:120:(self, chapter:int)>str:calculate_delay:"]]}],"nikita/agents/text/tools.py":["p",["format_memory_results:17:(results:list[dict[str, Any]])>str::","recall_memory:57:async (ctx:RunContext[NikitaDeps], query::format_memory_results:","note_user_fact:79:async (ctx:RunContext[NikitaDeps], fact::float)>str::"]],"nikita/agents/voice/__init__.py":["p",["get_voice_service:54:()>\"VoiceService\"::","get_elevenlabs_client:60:()>\"ElevenLabsClient\"::","get_server_tool_handler:66:()>\"ServerToolHandler\"::","get_tts_config_service:72:()>\"TTSConfigService\"::","get_dynamic_variables_builder:78:()>\"DynamicVariablesBuilder\"::"]],"nikita/agents/voice/availability.py":["p",["get_availability_service:133:()>CallAvailability::"],{"CallAvailability":["44",["get_availability_rate:51:(self, user:\"User\")>float::","is_available:63:(self, user:\"User\")>tuple[bool, str]:get_availability_rate:","check_cooldown:112:(self, user:\"User\")>tuple[bool, int | None]::"]]}],"nikita/agents/voice/config.py":["p",{"VoiceAgentConfig":["86",["__init__:95:(self, settings:\"Settings\")::","generate_system_prompt:111:(self, user_id:UUID, chapter:int, vices:list, user_name:str = \"friend\", relationship_score:float = 50.0,)>str::","get_agent_config:158:(self, user:\"User\")>dict[str, Any]:_get_chapter_tts_settings,_get_first_message,generate_system_prompt:","_get_chapter_tts_settings:216:(self, chapter:int)>TTSSettings::Get TTS settings based on chapter (FR-016).","_get_first_message:227:(self, chapter:int, user_name:str | None)>str::Get chapter-appropriate first message."]]}],"nikita/agents/voice/context.py":["p",["get_dynamic_variables_builder:430:()>DynamicVariablesBuilder::","get_conversation_config_builder:440:(settings:\"Settings\",)>ConversationConfigBuilder::Get conversation config builder with settings.","build_dynamic_variables:449:async (user:\"User\", signed_token::build_from_user,get_dynamic_variables_builder:"],{"DynamicVariablesBuilder":["35",["build_from_context:47:(self, context:VoiceContext, session_token:str | None = None,)>DynamicVariables:_compute_nikita_activity,_get_day_of_week:","build_from_user:94:(self, user:\"User\", session_token:str | None = None,)>DynamicVariables:_compute_nikita_activity,_compute_nikita_energy,_get_day_of_week,_get_time_of_day:","_get_time_of_day:158:(self, hour:int)>str::","_get_day_of_week:178:(self)>str::","_compute_nikita_activity:187:(self, time_of_day:str, day_of_week:str)>str::","_compute_nikita_energy:216:(self, time_of_day:str)>str::"]],"ConversationConfigBuilder":["237",["__init__:247:(self, settings:\"Settings\")::","build_config:262:async (self, user:\"User\", mood:NikitaMood | None = None, session_token:str | None = None,)>ConversationConfig:_generate_system_prompt,_get_first_message,build_from_user:","_generate_system_prompt:299:async (self, user:\"User\")>str:_generate_fallback_prompt:","_generate_fallback_prompt:328:(self, user:\"User\")>str:_get_relationship_score:","_get_relationship_score:355:(self, user:\"User\")>float::Get relationship score from user metrics.","_get_first_message:365:(self, chapter:int, user_name:str | None,)>str::","to_elevenlabs_format:386:(self, config:ConversationConfig)>dict[str, Any]::"]]}],"nikita/agents/voice/deps.py":["p",{"VoiceAgentDeps":["25",["user_id:59:(self)>UUID::Get the user's ID.","chapter:64:(self)>int::Get the user's current chapter.","relationship_score:69:(self)>float::Get the user's current relationship score.","is_voice_available:76:(self)>bool::"]]}],"nikita/agents/voice/inbound.py":["p",["get_inbound_handler:510:()>InboundCallHandler::","get_session_manager:518:()>VoiceSessionManager::"],{"VoiceSessionManager":["40",["__init__:52:(self)::Initialize session manager with empty session store.","create_session:56:(self, session_id:str, user_id:UUID)>dict[str, Any]::","get_session:77:(self, session_id:str)>dict[str, Any] | None::","handle_disconnect:88:(self, session_id:str)>None::","attempt_recovery:103:(self, session_id:str)>bool:finalize_session:","finalize_session:143:(self, session_id:str)>None::"]],"InboundCallHandler":["157",["__init__:166:(self)::Initialize inbound call handler.","_generate_signed_token:170:(self, user_id:str, session_id:str)>str::","handle_incoming_call:197:async (self, phone_number:str)>dict[str, Any]:_build_context,_check_availability,_generate_signed_token,_get_conversation_config_override,_get_default_dynamic_variables,_lookup_user_by_phone,create_session:","_lookup_user_by_phone:293:async (self, phone_number:str)>\"User | None\"::","_check_availability:312:async (self, user:\"User\")>tuple[bool, str]::","_build_context:330:async (self, user:\"User\", signed_token:str | None = None)>dict[str, Any]::","_get_default_dynamic_variables:344:(self, signed_token:str)>dict[str, str]::","_get_conversation_config_override:382:async (self, user:\"User\")>dict[str, Any]:_generate_fallback_prompt,_get_first_message:","_generate_fallback_prompt:424:(self, user:\"User\")>str:_get_relationship_score:","_get_relationship_score:453:(self, user:\"User\")>float::Get relationship score from user metrics.","_get_first_message:459:(self, user:\"User\")>str::","_get_tts_config:480:(self, user:\"User\")>dict[str, Any]::"]]}],"nikita/agents/voice/models.py":["p",{"ServerToolRequest":["63",[]],"ServerToolResponse":["83",[]],"TranscriptEntry":["112",[]],"TranscriptData":["131",[]],"TurnScore":["148",[]],"CallScore":["161",[]],"VoiceContext":["200",[]],"CallResult":["243",[]],"TTSSettings":["277",[]],"DynamicVariables":["313",["to_dict:350:(self)>dict[str, str]::Convert to dict for ElevenLabs API, filtering secrets.","to_dict_with_secrets:358:(self)>dict[str, str]::Convert to dict including secrets (for server-side use)."]],"ConversationConfig":["368",[]],"VoiceSession":["412",[]]}],"nikita/agents/voice/scheduling.py":["p",["get_voice_scheduler:370:()>VoiceEventScheduler::","get_delivery_handler:378:()>EventDeliveryHandler::"],{"VoiceEventScheduler":["39",["get_chapter_delay:48:(self, user:\"User\")>int::","schedule_follow_up:72:async (self, user_id:UUID, event_type:str, content:dict[str, Any], delay_seconds:int, source_conversation_id:UUID | None = None, platform:str = \"voice\",)>\"ScheduledEvent\":_create_event:","schedule_voice_call:108:async (self, user_id:UUID, delay_hours:float, prompt:str, source_platform:str | None = None, source_conversation_id:UUID | None = None,)>\"ScheduledEvent\":_create_event:","schedule_telegram_message:157:async (self, user_id:UUID, telegram_id:int, text:str, delay_seconds:int, source_conversation_id:UUID | None = None,)>\"ScheduledEvent\":_create_event:","_create_event:200:async (self, user_id:UUID, event_type:str, content:dict[str, Any], scheduled_at:datetime, source_conversation_id:UUID | None, platform:str,)>\"ScheduledEvent\"::"]],"EventDeliveryHandler":["242",["deliver:250:async (self, event:\"ScheduledEvent\")>bool:_deliver_telegram_event,_deliver_voice_event,_mark_delivered:","_deliver_voice_event:277:async (self, event:\"ScheduledEvent\")>bool::","_deliver_telegram_event:308:async (self, event:\"ScheduledEvent\")>bool::","_mark_delivered:342:async (self, event:\"ScheduledEvent\")>None::"]]}],"nikita/agents/voice/scoring.py":["p",{"CallScore":["32",[]],"VoiceCallScorer":["46",["__init__:53:(self)::Initialize the voice call scorer.","score_call:64:async (self, user_id:UUID, session_id:str, transcript:list[tuple[str, str]], context:ConversationContext, duration_seconds:int = 0,)>CallScore::","apply_score:129:async (self, user_id:UUID, call_score:CallScore,)>Decimal:score_call:"]]}],"nikita/agents/voice/server_tools.py":["p",["with_timeout_fallback:38:(timeout_seconds:float = 2.0, fallback_data::decorator,wrapper:","get_server_tool_handler:827:()>ServerToolHandler::"],{"ServerToolHandler":["87",["__init__:94:(self, settings:\"Settings\")::","handle:103:async (self, request:ServerToolRequest)>ServerToolResponse:_get_context,_get_memory,_score_turn,_update_memory:","_validate_token:157:(self, token:str)>tuple[str, str]::","_get_context:205:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]:_add_humanization_context,_compute_nikita_activity,_compute_nikita_energy,_compute_nikita_mood,_query_graph:","_query_graph:335:async (graph_type:str, limit:int = 50)>list[str]::Query a specific graph type and extract fact strings.","_compute_nikita_mood:487:(self, chapter:int, engagement_state:str, relationship_score:float)>str::","_compute_nikita_activity:522:(self, time_of_day:str, day_of_week:str)>str::","_compute_nikita_energy:551:(self, time_of_day:str)>str::","_add_humanization_context:573:async (self, user_id:UUID, context:dict[str, Any])>dict[str, Any]::","_get_memory:666:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::","_score_turn:722:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::","_update_memory:792:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::"]]}],"nikita/agents/voice/service.py":["p",["get_voice_service:653:()>VoiceService::"],{"VoiceService":["41",["__init__:48:(self, settings:\"Settings\")::","initiate_call:58:async (self, user_id:UUID)>dict[str, Any]:_build_dynamic_variables,_generate_session_id,_generate_signed_token,_get_first_message,_get_tts_settings,_load_context,_load_user,_log_call_started:","_load_user:160:async (self, user_id:UUID)>\"User | None\"::","_load_context:187:async (self, user:\"User\")>VoiceContext:_compute_nikita_energy,_compute_nikita_mood,_compute_time_of_day,_enrich_from_memory,_get_user_name:","_enrich_from_memory:233:async (self, user_id:UUID, context:VoiceContext)>None::Enrich context with memory from Graphiti.","_get_user_name:256:(self, user:\"User\")>str::Extract user name from onboarding_profile, user.name, or return default.","_compute_nikita_mood:267:(self, user:\"User\")>NikitaMood::Compute Nikita's mood based on user state.","_compute_nikita_energy:290:(self)>str::Compute Nikita's energy level based on time.","_compute_time_of_day:301:(self)>str::Get current time of day label.","_generate_session_id:312:(self)>str::Generate unique session ID.","_generate_signed_token:316:(self, user_id:str, session_id:str)>str::","_log_call_started:336:async (self, user_id:UUID, session_id:str)>None::Log call started event to database.","_build_dynamic_variables:341:(self, context:VoiceContext)>DynamicVariables::Build dynamic variables for ElevenLabs prompt interpolation.","_get_tts_settings:356:(self, chapter:int, mood:NikitaMood)>TTSSettings::Get TTS settings based on chapter and mood (FR-016, FR-017).","_get_first_message:380:(self, context:VoiceContext)>str::","get_context_with_text_history:422:async (self, user_id:str,)>dict[str, Any]::","search_user_memory:452:async (self, user_id:str, query:str, source_filter:str | None = None,)>list[dict[str, Any]]::","format_text_history_for_voice:485:async (self, user_id:str,)>dict[str, Any]:get_context_with_text_history:","get_session:529:(self, session_id:str)>dict | None::Get session data by ID.","end_session:533:(self, session_id:str)>None::End and remove a session.","end_call:545:async (self, user_id:UUID, session_id:str, transcript:list[tuple[str, str]] | None = None, duration_seconds:int = 0,)>dict[str, Any]:_load_user,end_session:"]]}],"nikita/agents/voice/transcript.py":["p",["get_transcript_manager:328:(session:\"AsyncSession | None\" = None,)>TranscriptManager::"],{"TranscriptManager":["27",["__init__:34:(self, session:\"AsyncSession | None\")::","fetch_transcript:45:async (self, conversation_id:str,)>TranscriptData | None::","persist_transcript:72:async (self, user_id:UUID, transcript:TranscriptData,)>dict[str, Any]::","convert_to_exchange_pairs:124:(self, transcript:TranscriptData,)>list[tuple[str, str]]::","extract_facts:150:async (self, transcript:TranscriptData,)>list[dict[str, str]]:_extract_facts_via_llm:","_extract_facts_via_llm:174:async (self, transcript_text:str,)>list[dict[str, str]]::","store_fact:194:async (self, user_id:UUID, session_id:str, fact:str, category:str | None = None,)>None::","store_facts_batch:225:async (self, user_id:UUID, session_id:str, facts:list[dict[str, str]],)>dict[str, Any]:store_fact:","generate_summary:261:async (self, transcript:TranscriptData,)>str | None:_summarize_via_llm:","_summarize_via_llm:283:async (self, transcript_text:str,)>str::","format_for_text_agent:301:(self, transcript_summary:str, duration_seconds:int,)>str::"]]}],"nikita/agents/voice/tts_config.py":["p",["get_tts_config_service:166:()>TTSConfigService::"],{"TTSConfigService":["65",["__init__:72:(self)::Initialize TTS config service.","get_chapter_settings:77:(self, chapter:int)>TTSSettings::","get_mood_modulation:88:(self, mood:NikitaMood)>TTSSettings::","get_final_settings:103:(self, chapter:int, mood:NikitaMood | None = None,)>TTSSettings:_blend_settings,get_chapter_settings,get_mood_modulation:","_blend_settings:136:(self, primary:TTSSettings, secondary:TTSSettings, weight:float = 0.5,)>TTSSettings::"]]}],"nikita/api/dependencies/auth.py":["p",["get_current_user_id:19:async (credentials:HTTPAuthorizationCredentials = Depends(security),)>UUID::","_is_admin_email:95:(email:str)>bool::","get_current_admin_user:120:async (credentials:HTTPAuthorizationCredentials = Depends(security),)>UUID::"]],"nikita/api/main.py":["p",["lifespan:30:async (app:FastAPI)>AsyncGenerator[None, None]::Application lifespan handler with proper DB initialization.","create_app:76:()>FastAPI:health,root:"]],"nikita/api/routes/admin.py":["p",["get_current_admin_user_id:46:async (session:Annotated[AsyncSession, Depends(get_async_session)],)>UUID::","list_users:66:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 1, page_size:int = 50,)::List all users (paginated, admin only).","get_user_detail:100:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get full user detail (admin only).","get_user_metrics:128:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user metrics (admin only).","get_user_engagement:149:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user engagement state (admin only).","get_user_vices:183:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user vice preferences (admin only).","get_user_conversations:206:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)], page:int = 1, page_size:int = 20,)::Get user conversations (admin only).","set_user_score:245:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set user score (admin only).","set_user_chapter:275:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set user chapter (admin only).","set_game_status:300:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set game status (admin only).","set_engagement_state:327:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set engagement state (admin only).","reset_boss_attempts:367:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Reset boss attempts to 0 (admin only).","clear_engagement_history:390:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Clear engagement history (admin only).","list_prompts:420:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 1, page_size:int = 50, user_id:UUID | None = None, template:str | None = None,)::","get_prompt_detail:440:async (prompt_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get prompt detail (admin only).","get_system_health:455:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::Get system health status (admin only).","get_admin_stats:489:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::Get admin overview statistics."]],"nikita/api/routes/admin_debug.py":["p",["get_system_overview:86:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","get_job_status:188:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","list_debug_users:278:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=1, ge=1), page_size:int = Query(default=50, ge=1, le=100), game_status:str | None = Query(default=None), chapter:int | None = Query(default=None, ge=1, le=5),)::","get_debug_user_detail:349:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_user_state_machines:423:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","test_neo4j_integration:510:async (user_id:str, admin_user_id:::","list_user_prompts:586:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)], limit:int = Query(default=10, ge=1, le=50),)::","get_latest_prompt:627:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","preview_next_prompt:673:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","list_voice_conversations:726:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0), user_id:UUID | None = Query(default=None, description=\"Filter by user ID\"), status:str | None = Query(default=None, description=\"Filter by status\"),)::","get_voice_conversation_detail:798:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_voice_stats:854:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","list_elevenlabs_calls:917:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], limit::str | None = Query(default=None, description=\"Pagination cursor\"), include_summary:bool = Query(default=False, description=\"Include transcript summaries\"),)::","get_elevenlabs_call_detail:970:async (conversation_id:str, admin_user_id:::","list_text_conversations:1027:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0), user_id:UUID | None = Query(default=None, description=\"Filter by user ID\"), status:str | None = Query(default=None, description=\"Filter by status\"), boss_fight_only:bool = Query(default=False, description=\"Only show boss fights\"),)::","get_text_conversation_detail:1094:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_text_stats:1152:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","get_pipeline_status:1224:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","list_threads:1327:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::UUID | None = Query(default=None, description=\"Filter by user ID\"), active_only:bool = Query(default=False, description=\"Only show active threads\"), limit:int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0),)::","list_thoughts:1377:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::UUID | None = Query(default=None, description=\"Filter by user ID\"), limit:int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0),)::"]],"nikita/api/routes/onboarding.py":["p",["get_db_session:77:async ()>AsyncSession::","get_user_repo:84:async (session:AsyncSession = Depends(get_db_session))>UserRepository::Get user repository.","get_onboarding_handler:93:()>OnboardingServerToolHandler::","get_onboarding_status:124:async (user_id:UUID, user_repo:::Get user's onboarding status.","initiate_onboarding:166:async (user_id:UUID, request::UserRepository = Depends(get_user_repo),)>InitiateOnboardingResponse::Initiate an onboarding voice call.","handle_server_tool:245:async (request:OnboardingToolRequest, handler:::Handle an onboarding server tool request.","handle_webhook:284:async (request:Request, elevenlabs_signature::UserRepository = Depends(get_user_repo),)>dict[str, Any]::Handle ElevenLabs webhook for onboarding calls.","handle_onboarding_pre_call:367:async (request:Request, user_repo:::","skip_onboarding:456:async (user_id:UUID, user_repo:::Skip onboarding for a user."],{"InitiateOnboardingRequest":["41",[]],"InitiateOnboardingResponse":["47",[]],"OnboardingStatusResponse":["59",[]],"ErrorResponse":["68",[]]}],"nikita/api/routes/portal.py":["p",["get_user_stats:44:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::","get_user_metrics:91:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get 4 hidden metrics with weights.","get_engagement_state:111:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get engagement state and recent transitions.","get_vice_preferences:154:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get discovered vice preferences.","get_score_history:175:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 30,)::Get score history for charts.","get_daily_summaries:204:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 30,)::Get daily summaries list.","get_conversations:230:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 1, page_size:int = 20,)::Get paginated conversation list.","get_conversation_detail:263:async (conversation_id:UUID, user_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get full conversation detail (read-only).","get_decay_status:298:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get decay warning and projection."]],"nikita/api/routes/tasks.py":["p",["_get_task_secret:27:()>str | None::","verify_task_secret:35:async (authorization:str | None = Header(None, alias=\"Authorization\"),)>None::","apply_daily_decay:61:async (_:None = Depends(verify_task_secret),)::","deliver_pending_messages:127:async (_:None = Depends(verify_task_secret),)::","generate_daily_summaries:282:async (summary_repo:SummaryRepoDep, _:::","cleanup_expired_registrations:473:async (_:None = Depends(verify_task_secret),)::","process_stale_conversations:513:async (_:None = Depends(verify_task_secret),)::","deliver_scheduled_touchpoints:594:async (_:None = Depends(verify_task_secret),)::"]],"nikita/api/routes/telegram.py":["p",["_get_bot_from_state:85:(request:Request)>TelegramBot::","get_telegram_auth:112:async (user_repo:UserRepoDep, pending_repo:::","get_command_handler:139:async (user_repo:UserRepoDep, telegram_auth::BotDep, profile_repo:ProfileRepoDep, onboarding_repo:OnboardingStateRepoDep,)>CommandHandler::","get_message_handler:174:async (user_repo:UserRepoDep, conversation_repo::ProfileRepoDep, backstory_repo:BackstoryRepoDep, bot:BotDep,)>MessageHandler::","get_registration_handler:217:async (telegram_auth:TelegramAuthDep, bot:::","get_venue_cache_repo:238:async (session=Depends(get_async_session),)>VenueCacheRepository::","get_venue_research_service:248:async (venue_cache_repo:VenueCacheRepository = Depends(get_venue_cache_repo),)>VenueResearchService::","get_backstory_generator:263:async ()>BackstoryGeneratorService::","get_persona_adaptation:275:async ()>PersonaAdaptationService::","get_onboarding_handler:297:async (bot:BotDep, onboarding_repo::ProfileRepoDep, user_repo:UserRepoDep, backstory_repo:BackstoryRepoDep, vice_repo:ViceRepoDep, venue_research:VenueResearchService = Depends(get_venue_research_service), backstory_gen:BackstoryGeneratorService = Depends(get_backstory_generator), persona_adapt:PersonaAdaptationService = Depends(get_persona_adaptation),)>OnboardingHandler::","get_otp_handler:343:async (telegram_auth:TelegramAuthDep, bot::PendingRegistrationRepoDep, onboarding_handler:OnboardingHandlerDep, profile_repo:ProfileRepoDep, user_repo:UserRepoDep,)>OTPVerificationHandler::","create_telegram_router:379:(bot:TelegramBot)>APIRouter::"],{"WebhookResponse":["60",[]],"SetWebhookRequest":["66",["validate_https:73:(cls, v:str)>str::Validate that URL uses HTTPS."]]}],"nikita/api/routes/voice.py":["p",["check_availability:99:async (user_id:UUID)>AvailabilityResponse::","get_signed_url:185:async (user_id:UUID)>dict::Generate ElevenLabs signed URL for frontend widget with full personalization.","initiate_call:277:async (request:InitiateCallRequest)>InitiateCallResponse::","_validate_signed_token:345:(token:str)>tuple[str, str]::","handle_server_tool:408:async (request:ServerToolAPIRequest)>ServerToolAPIResponse::","verify_elevenlabs_signature:484:(payload:str, signature_header::str)>bool::","_process_webhook_event:531:async (event_data:dict)>dict::","handle_webhook:832:async (request:Request, elevenlabs_signature::_process_webhook_event,verify_elevenlabs_signature:","handle_pre_call:960:async (request:PreCallRequest, elevenlabs_signature:::"],{"InitiateCallRequest":["34",[]],"InitiateCallResponse":["40",[]],"ErrorResponse":["60",[]],"AvailabilityResponse":["66",[]],"ServerToolAPIRequest":["326",[]],"ServerToolAPIResponse":["334",[]],"WebhookResponse":["470",[]],"PreCallRequest":["897",[]],"PreCallResponse":["910",[]]}],"nikita/api/schemas/admin.py":["p",{"AdminUserListItem":["10",[]],"AdminUserDetailResponse":["24",[]],"AdminSetScoreRequest":["40",[]],"AdminSetChapterRequest":["47",[]],"AdminSetGameStatusRequest":["54",[]],"AdminSetEngagementStateRequest":["63",[]],"AdminResetResponse":["72",[]],"GeneratedPromptResponse":["79",[]],"GeneratedPromptsResponse":["92",[]],"AdminHealthResponse":["101",[]],"AdminStatsResponse":["111",[]]}],"nikita/api/schemas/admin_debug.py":["p",{"GameStatusDistribution":["21",[]],"ChapterDistribution":["30",[]],"EngagementDistribution":["40",[]],"ActiveUserCounts":["51",[]],"SystemOverviewResponse":["59",[]],"JobExecutionStatus":["74",[]],"JobStatusResponse":["86",[]],"UserListItem":["98",[]],"UserListResponse":["112",[]],"UserTimingInfo":["126",[]],"UserNextActions":["138",[]],"UserDetailResponse":["148",[]],"EngagementStateInfo":["179",[]],"ChapterStateInfo":["191",[]],"ViceInfo":["203",[]],"ViceProfileInfo":["212",[]],"StateMachinesResponse":["220",[]],"PromptListItem":["234",[]],"PromptListResponse":["248",[]],"PromptDetailResponse":["260",[]],"VoiceConversationListItem":["287",[]],"VoiceConversationListResponse":["303",[]],"TranscriptEntryResponse":["311",[]],"VoiceConversationDetailResponse":["319",[]],"ElevenLabsCallListItem":["340",[]],"ElevenLabsCallListResponse":["354",[]],"ElevenLabsTranscriptTurn":["362",[]],"ElevenLabsCallDetailResponse":["372",[]],"VoiceStatsResponse":["387",[]],"TextConversationListItem":["404",[]],"TextConversationListResponse":["421",[]],"MessageResponse":["429",[]],"TextConversationDetailResponse":["438",[]],"PipelineStageStatus":["460",[]],"PipelineStatusResponse":["469",[]],"TextStatsResponse":["483",[]],"ThreadListItem":["497",[]],"ThreadListResponse":["510",[]],"ThoughtListItem":["517",[]],"ThoughtListResponse":["527",[]]}],"nikita/api/schemas/conversation.py":["p",{"MessageRequest":["11",[]],"MessageResponse":["18",[]],"ConversationMessage":["27",[]],"ConversationResponse":["36",[]],"ConversationSummary":["52",[]]}],"nikita/api/schemas/game.py":["p",{"ScoreHistoryResponse":["11",[]],"DailySummaryResponse":["24",[]],"GameStateResponse":["40",[]],"BossEncounterResponse":["62",[]],"VicePreferenceResponse":["73",[]]}],"nikita/api/schemas/portal.py":["p",{"UserMetricsResponse":["9",[]],"UserStatsResponse":["26",[]],"EngagementTransition":["42",[]],"EngagementResponse":["51",[]],"VicePreferenceResponse":["63",[]],"DecayStatusResponse":["72",[]],"ScoreHistoryPoint":["83",[]],"ScoreHistoryResponse":["92",[]],"DailySummaryResponse":["99",[]],"ConversationMessage":["112",[]],"ConversationListItem":["120",[]],"ConversationDetailResponse":["132",[]],"ConversationsResponse":["147",[]],"UserSettingsResponse":["156",[]],"LinkCodeResponse":["164",[]],"SuccessResponse":["172",[]]}],"nikita/api/schemas/user.py":["p",{"UserCreate":["10",[]],"UserResponse":["18",[]],"UserStatsResponse":["32",[]],"ScorePointResponse":["44",[]],"UserMetricsResponse":["51",[]]}],"nikita/config/elevenlabs.py":["p",["get_elevenlabs_config:63:()>ElevenLabsConfig::","get_agent_id:83:(chapter:int = 1, mood::bool = False, is_onboarding:bool = False,)>str:get_agents_dict,get_elevenlabs_config:"],{"ElevenLabsConfig":["9",["get_agents_dict:45:(self)>dict[str, str]::Get all agent IDs as a dictionary."]]}],"nikita/config/experiments.py":["p",["deep_merge:35:(base:dict[str, Any], overlay::deep_merge:"],{"ConfigurationError":["29",[]],"ExperimentLoader":["67",["__init__:76:(self, base_path:Path | str | None = None)::","experiment_name:92:(self)>str | None::Get the current experiment name from env var.","load_experiment_config:96:(self)>dict[str, Any]:_load_experiment_with_inheritance:","_get_experiment_path:112:(self, name:str | None = None)>Path::","_load_experiment_with_inheritance:126:(self, name:str, visited:set[str])>dict[str, Any]:_get_experiment_path,_list_available_experiments,_load_experiment_with_inheritance,deep_merge:","_list_available_experiments:176:(self)>list[str]::"]]}],"nikita/config/loader.py":["p",["get_config:172:()>ConfigLoader::"],{"ConfigurationError":["26",[]],"ConfigLoader":["32",["__new__:44:(cls)>\"ConfigLoader\":__new__:Ensure only one instance exists (singleton pattern).","__init__:50:(self)>None:_load_all_configs:Load all YAML configs on first initialization.","_load_yaml:59:(self, filename:str)>dict[str, Any]::Load a YAML file from the config directory.","_load_all_configs:68:(self)>None:_load_yaml:Load and validate all configuration files.","get_chapter:102:(self, chapter_num:int)>ChapterDefinition::","get_boss_threshold:118:(self, chapter_num:int)>Decimal:get_chapter:","get_decay_rate:130:(self, chapter_num:int)>Decimal::","get_grace_period:143:(self, chapter_num:int)>timedelta::","get_daily_cap:157:(self, chapter_num:int)>Decimal::"]]}],"nikita/config/prompt_loader.py":["p",["get_prompt_loader:188:()>PromptLoader::"],{"MissingVariableError":["21",["__init__:24:(self, variable_name:str, template_path:str | None = None):__init__:"]],"PromptLoader":["33",["__init__:46:(self, base_path:Path | str | None = None)::","load:62:(self, path:str | Path)>str:_resolve_path:","render:91:(self, path:str | Path, **kwargs:Any)>str:_substitute_variables,load:","cache_clear:108:(self)>None::Clear all cached prompts.","_resolve_path:112:(self, path:str | Path)>Path::","_substitute_variables:138:(self, content:str, variables:dict[str, Any], template_path:str)>str:_get_nested_value,replace_match:","replace_match:153:(match:re.Match)>str:_get_nested_value:","_get_nested_value:165:(self, var_name:str, variables:dict[str, Any])>Any::"]]}],"nikita/config/schemas.py":["p",{"ScoreRange":["14",["validate_range:21:(self)>\"ScoreRange\"::"]],"GameSettings":["27",[]],"SessionSettings":["37",[]],"GameConfig":["44",[]],"DayRange":["56",["validate_range:63:(self)>\"DayRange\"::"]],"ChapterDefinition":["69",[]],"BossDefinition":["78",[]],"ChaptersConfig":["86",["validate_chapters:93:(self)>\"ChaptersConfig\"::"]],"MetricWeights":["128",["validate_weights_sum:137:(self)>\"MetricWeights\"::"]],"MetricStartingValues":["144",[]],"DeltaRange":["153",[]],"MetricsSettings":["160",[]],"QualityModifier":["168",[]],"EngagementMultipliers":["175",[]],"ScoringConfig":["186",[]],"DecaySchedule":["199",[]],"DecayConfig":["206",["validate_chapters:215:(self)>\"DecayConfig\"::"]],"EngagementStateDefinition":["233",[]],"CalibrationTolerance":["242",[]],"CalibrationSettings":["250",[]],"TransitionRules":["257",[]],"EngagementConfig":["266",["validate_states:275:(self)>\"EngagementConfig\"::"]],"ViceCategoryDefinition":["296",[]],"ViceIntensityLevel":["305",[]],"ViceDiscoverySettings":["312",[]],"VicesConfig":["320",["validate_categories:328:(self)>\"VicesConfig\"::"]],"AvailabilityWindow":["346",[]],"ChapterResponseTiming":["355",[]],"CronSchedules":["363",[]],"ScheduleConfig":["371",[]]}],"nikita/config/settings.py":["p",["get_settings:145:()>Settings::"],{"Settings":["10",["admin_emails:137:(self)>list[str]::Parse comma-separated admin emails into list."]]}],"nikita/context/post_processor.py":["p",["process_conversations:646:async (session:AsyncSession, conversation_ids::process_conversation:"],{"PipelineResult":["36",[]],"ExtractionResult":["54",[]],"PostProcessor":["76",["__init__:92:(self, session:AsyncSession, llm_model:str = \"claude-sonnet-4-5-20250929\",)>None::","_get_extraction_agent:111:(self)>Agent:_get_extraction_system_prompt:Get or create the extraction agent.","_get_extraction_system_prompt:120:(self)>str::Get system prompt for extraction agent."]]}],"nikita/context/session_detector.py":["p",["detect_stale_sessions:132:async (session:AsyncSession, timeout_minutes::int = 50,)>list[UUID]:detect_and_queue:"],{"SessionDetector":["24",["__init__:38:(self, session:AsyncSession, timeout_minutes:int = TEXT_SESSION_TIMEOUT_MINUTES,)>None::","get_stale_sessions:52:async (self, limit:int = 50,)>list[UUID]::","mark_for_processing:84:async (self, conversation_id:UUID,)>bool::","detect_and_queue:104:async (self, limit:int = 50,)>list[UUID]:get_stale_sessions,mark_for_processing:"]]}],"nikita/context/template_generator.py":["p",["generate_system_prompt:504:async (session:AsyncSession, user_id::generate_prompt:"],{"TemplateContext":["33",[]],"TemplateGenerator":["62",["__init__:69:(self, session:AsyncSession)>None::","generate_prompt:82:async (self, user_id:UUID)>str:generate_system_prompt:","generate_prompt_legacy:110:async (self, user_id:UUID)>str:_layer1_core_identity,_layer2_current_moment,_layer3_relationship_state,_layer4_conversation_history,_layer5_knowledge_inner_life,_layer6_response_guidelines,_load_context,generate_prompt:","_load_context:138:async (self, user_id:UUID)>TemplateContext::","_layer1_core_identity:243:(self)>str::"]]}],"nikita/context/utils/token_counter.py":["p",["_get_encoder:19:()>tiktoken.Encoding::","count_tokens:28:(text:str)>int::"],{"TokenCounter":["52",["__init__:58:(self, budget:int = 4000):_get_encoder:","count:67:(self, text:str)>int:count_tokens:","count_multiple:78:(self, texts:list[str])>int:count_tokens:","fits_budget:89:(self, text:str, margin:int = 0)>bool:count_tokens:","remaining:101:(self, used:int)>int::","truncate_to_budget:112:(self, text:str, margin:int = 100)>str:count_tokens:"]]}],"nikita/db/database.py":["p",["get_async_engine:21:()::","get_session_maker:53:()>async_sessionmaker[AsyncSession]:get_async_engine:","get_async_session:67:async ()>AsyncGenerator[AsyncSession, None]:get_session_maker:","_get_supabase_sync_client:84:()::","get_supabase_client:90:async ()>AsyncClient:_get_supabase_sync_client:","get_pool_status:96:()>dict:get_async_engine:"]],"nikita/db/dependencies.py":["p",["get_user_repo:37:async (session:AsyncSessionDep,)>AsyncGenerator[UserRepository, None]::","get_metrics_repo:51:async (session:AsyncSessionDep,)>AsyncGenerator[UserMetricsRepository, None]::","get_conversation_repo:65:async (session:AsyncSessionDep,)>AsyncGenerator[ConversationRepository, None]::","get_score_history_repo:79:async (session:AsyncSessionDep,)>AsyncGenerator[ScoreHistoryRepository, None]::","get_vice_repo:93:async (session:AsyncSessionDep,)>AsyncGenerator[VicePreferenceRepository, None]::","get_summary_repo:107:async (session:AsyncSessionDep,)>AsyncGenerator[DailySummaryRepository, None]::","get_pending_registration_repo:121:async (session:AsyncSessionDep,)>AsyncGenerator[PendingRegistrationRepository, None]::","get_onboarding_state_repo:147:async (session:AsyncSessionDep,)>AsyncGenerator[OnboardingStateRepository, None]::","get_profile_repo:161:async (session:AsyncSessionDep,)>AsyncGenerator[ProfileRepository, None]::","get_backstory_repo:181:async (session:AsyncSessionDep,)>AsyncGenerator[BackstoryRepository, None]::"]],"nikita/db/migrations/env.py":["p",["get_url:36:()>str::","run_migrations_offline:42:()>None:get_url:","do_run_migrations:65:(connection:Connection)>None::Run migrations with given connection.","run_async_migrations:73:async ()>None:get_url:","run_migrations_online:98:()>None:run_async_migrations:"]],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["p",["upgrade:28:()>None::","downgrade:300:()>None::: Reversible)."]],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["p",["upgrade:25:()>None::","downgrade:125:()>None::"]],"nikita/db/migrations/versions/20251128_0003_fix_message_embeddings.py":["p",["upgrade:30:()>None::","downgrade:92:()>None::"]],"nikita/db/migrations/versions/20251128_0004_rls_performance.py":["p",["upgrade:27:()>None::","downgrade:100:()>None::"]],"nikita/db/migrations/versions/20251128_0005_consolidate_policies.py":["p",["upgrade:28:()>None::","downgrade:84:()>None::"]],"nikita/db/migrations/versions/20251128_0006_extensions_pending_reg.py":["p",["upgrade:30:()>None::","downgrade:128:()>None::"]],"nikita/db/migrations/versions/20251205_0007_rate_limits_table.py":["p",["upgrade:30:()>None::","downgrade:84:()>None::"]],"nikita/db/models/base.py":["p",["utc_now:45:()>datetime::"],{"Base":["11",[]],"TimestampMixin":["19",[]],"UUIDMixin":["35",[]]}],"nikita/db/models/context.py":["p",{"ConversationThread":["61",[]],"NikitaThought":["123",["is_active:183:(self)>bool::Check if thought is still active (not used, not expired)."]]}],"nikita/db/models/conversation.py":["p",{"Conversation":["31",["add_message:135:(self, role:str, content:str, analysis:dict[str, Any] | None = None,)>None::Add a message to the conversation.","message_count:148:(self)>int::Get total number of messages."]],"MessageEmbedding":["153",[]]}],"nikita/db/models/engagement.py":["p",{"EngagementState":["29",[]],"EngagementHistory":["102",[]]}],"nikita/db/models/game.py":["p",{"ScoreHistory":["19",[]],"DailySummary":["69",["score_change:124:(self)>Decimal | None::Calculate net score change for the day."]]}],"nikita/db/models/generated_prompt.py":["p",{"GeneratedPrompt":["19",[]]}],"nikita/db/models/job_execution.py":["p",{"JobExecution":["36",[]]}],"nikita/db/models/pending_registration.py":["p",{"PendingRegistration":["22",["is_expired:92:(self)>bool::"]]}],"nikita/db/models/profile.py":["p",{"UserProfile":["55",[]],"UserBackstory":["120",[]],"VenueCache":["188",["is_expired:240:(self)>bool::"]],"OnboardingState":["256",["get_current_step:308:(self)>OnboardingStep::Get current step as enum.","set_step:312:(self, step:OnboardingStep)>None::Set current step from enum.","is_complete:316:(self)>bool::Check if onboarding is complete."]]}],"nikita/db/models/rate_limit.py":["p",{"RateLimit":["13",[]]}],"nikita/db/models/scheduled_event.py":["p",{"ScheduledEvent":["51",["is_pending:176:(self)>bool::Check if event is still pending delivery.","is_due:181:(self)>bool::Check if event is due for delivery.","can_retry:186:(self)>bool::Check if event can be retried (max 3 attempts)."]]}],"nikita/db/models/user.py":["p",{"User":["36",[]],"UserMetrics":["202",["calculate_composite_score:245:(self)>Decimal::"]],"UserVicePreference":["259",[]]}],"nikita/db/repositories/base.py":["p",{"BaseRepository":["18",["__init__:37:(self, session:AsyncSession, model_class:type[ModelT])>None::","get_by_telegram_id:32:async (self, telegram_id:int)>User | None::","session:48:(self)>AsyncSession:session:","get:58:async (self, id:UUID)>ModelT | None:get:","create:69:async (self, entity:ModelT)>ModelT::","update:83:async (self, entity:ModelT)>ModelT:create,get,session:","delete:99:async (self, entity:ModelT)>None:delete:","delete_by_id:108:async (self, id:UUID)>bool:delete,get:"]]}],"nikita/db/repositories/conversation_repository.py":["p",{"ConversationRepository":["18",["__init__:25:(self, session:AsyncSession)>None:__init__:Initialize ConversationRepository.","create_conversation:36:async (self, user_id:UUID, platform:str, started_at:datetime | None = None, is_boss_fight:bool = False, chapter_at_time:int | None = None,)>Conversation::","append_message:65:async (self, conversation_id:UUID, role:str, content:str, analysis:dict[str, Any] | None = None,)>Conversation::","get_recent:96:async (self, user_id:UUID, limit:int = 10,)>list[Conversation]::","search:119:async (self, user_id:UUID, query:str,)>list[Conversation]:search:","close_conversation:151:async (self, conversation_id:UUID, score_delta:Decimal | None = None,)>Conversation::","get_stale_active_conversations:184:async (self, timeout_minutes:int = 15, max_attempts:int = 3, limit:int = 50,)>list[Conversation]::","mark_processing:213:async (self, conversation_id:UUID,)>Conversation::","mark_processed:243:async (self, conversation_id:UUID, summary:str | None = None, emotional_tone:str | None = None, extracted_entities:dict[str, Any] | None = None,)>Conversation::","mark_failed:280:async (self, conversation_id:UUID,)>Conversation::","update_last_message_at:306:async (self, conversation_id:UUID,)>Conversation::","update_score_delta:335:async (self, conversation_id:UUID, score_delta:Decimal,)>Conversation::","get_active_conversation:368:async (self, user_id:UUID,)>Conversation | None::","get_processed_conversations:393:async (self, user_id:UUID, days:int = 7, limit:int = 50,)>list[Conversation]::"]]}],"nikita/db/repositories/engagement_repository.py":["p",{"EngagementStateRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize EngagementStateRepository.","get_by_user_id:26:async (self, user_id:UUID)>EngagementState | None::","get_recent_transitions:41:async (self, user_id:UUID, limit:int = 10)>list[EngagementHistory]::"]]}],"nikita/db/repositories/generated_prompt_repository.py":["p",{"GeneratedPromptRepository":["14",["__init__:20:(self, session:AsyncSession)>None:__init__:Initialize GeneratedPromptRepository.","create_log:33:async (self, user_id:UUID, prompt_content:str, token_count:int, generation_time_ms:float, meta_prompt_template:str, conversation_id:UUID | None = None, context_snapshot:dict[str, Any] | None = None,)>GeneratedPrompt::","get_by_user_id:66:async (self, user_id:UUID, limit:int = 50)>list[GeneratedPrompt]::","get_by_template:87:async (self, template:str, limit:int = 50)>list[GeneratedPrompt]::","get_recent_by_user_id:108:async (self, user_id:UUID, limit:int = 10)>list[GeneratedPrompt]::","get_latest_by_user_id:131:async (self, user_id:UUID)>GeneratedPrompt | None::"]]}],"nikita/db/repositories/job_execution_repository.py":["p",{"JobExecutionRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize JobExecutionRepository.","get_latest_by_job_name:26:async (self, job_name:str)>JobExecution | None::","get_recent_executions:49:async (self, job_name:str | None = None, status:str | None = None, limit:int = 20,)>list[JobExecution]::","start_execution:71:async (self, job_name:str)>JobExecution::","complete_execution:94:async (self, execution_id:UUID, result:dict | None = None,)>JobExecution::","fail_execution:127:async (self, execution_id:UUID, result:dict | None = None,)>JobExecution::"]]}],"nikita/db/repositories/metrics_repository.py":["p",{"UserMetricsRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize UserMetricsRepository.","get_by_user_id:26:async (self, user_id:UUID)>UserMetrics | None::","update_metrics:46:async (self, user_id:UUID, intimacy_delta:Decimal = Decimal(\"0\"), passion_delta:Decimal = Decimal(\"0\"), trust_delta:Decimal = Decimal(\"0\"), secureness_delta:Decimal = Decimal(\"0\"),)>UserMetrics:_clamp,get_by_user_id:","calculate_composite:77:async (self, user_id:UUID)>Decimal:get_by_user_id:","_clamp:96:(value:Decimal)>Decimal::Clamp value between 0 and 100."]]}],"nikita/db/repositories/pending_registration_repository.py":["p",{"PendingRegistrationRepository":["17",["__init__:29:(self, session:AsyncSession)>None::","session:38:(self)>AsyncSession::Access the database session.","store:49:async (self, telegram_id:int, email:str, chat_id:int | None = None, otp_state:str = \"pending\", expires_at:datetime | None = None,)>PendingRegistration::","get:95:async (self, telegram_id:int)>PendingRegistration | None::","get_email:113:async (self, telegram_id:int)>str | None:get:","get_by_email:127:async (self, email:str)>PendingRegistration | None::","get_by_email_any:146:async (self, email:str)>PendingRegistration | None::","delete:166:async (self, telegram_id:int)>bool:delete:","increment_attempts:181:async (self, telegram_id:int)>int::","cleanup_expired:212:async (self)>int:delete:"]]}],"nikita/db/repositories/profile_repository.py":["p",{"ProfileRepository":["31",["__init__:41:(self, session:AsyncSession)>None:__init__:","get_by_user_id:49:async (self, user_id:UUID)>UserProfile | None:get:","create_profile:70:async (self, user_id:UUID, location_city:str | None = None, location_country:str | None = None, life_stage:str | None = None, social_scene:str | None = None, primary_interest:str | None = None, drug_tolerance:int = 3,)>UserProfile:create:","update_from_onboarding:100:async (self, user_id:UUID, collected_answers:dict[str, Any],)>UserProfile:create_profile,get,get_by_user_id:"]],"BackstoryRepository":["142",["__init__:152:(self, session:AsyncSession)>None:__init__:","get_by_user_id:160:async (self, user_id:UUID)>UserBackstory | None::","create:183:async (self, user_id:UUID, venue_name:str | None = None, venue_city:str | None = None, scenario_type:str | None = None, how_we_met:str | None = None, the_moment:str | None = None, unresolved_hook:str | None = None, nikita_persona_overrides:dict[str, Any] | None = None,)>UserBackstory::","create_from_scenario:218:async (self, user_id:UUID, scenario:dict[str, Any],)>UserBackstory:create,get:"]],"OnboardingStateRepository":["242",["__init__:256:(self, session:AsyncSession)>None::","session:265:(self)>AsyncSession::Access the database session.","get:269:async (self, telegram_id:int)>OnboardingState | None::","get_or_create:284:async (self, telegram_id:int)>OnboardingState:get:","update_step:323:async (self, telegram_id:int, step:OnboardingStep, collected_answers:dict[str, Any] | None = None,)>OnboardingState:get:","add_answer:356:async (self, telegram_id:int, key:str, value:Any,)>OnboardingState:get:","delete:381:async (self, telegram_id:int)>bool:delete:"]],"VenueCacheRepository":["397",["__init__:411:(self, session:AsyncSession)>None::","session:420:(self)>AsyncSession::Access the database session.","get_or_none:428:async (self, city:str, scene:str,)>VenueCache | None::","store:452:async (self, city:str, scene:str, venues:list[dict[str, Any]], ttl_days:int | None = None,)>VenueCache::","cleanup_expired:488:async (self)>int:delete:"]]}],"nikita/db/repositories/scheduled_event_repository.py":["p",{"ScheduledEventRepository":["26",["__init__:40:(self, session:AsyncSession)>None::","session:49:(self)>AsyncSession::Access the database session.","create_event:61:async (self, user_id:UUID, platform:EventPlatform | str, event_type:EventType | str, content:dict[str, Any], scheduled_at:datetime, source_conversation_id:UUID | None = None,)>ScheduledEvent::","get_due_events:106:async (self, limit:int = 50, platform:EventPlatform | str | None = None,)>list[ScheduledEvent]::","mark_delivered:136:async (self, event_id:UUID)>bool::","mark_failed:161:async (self, event_id:UUID, error_message:str | None = None, increment_retry:bool = True,)>bool::","cancel_event:212:async (self, event_id:UUID)>bool::","get_user_pending_events:236:async (self, user_id:UUID, platform:EventPlatform | str | None = None,)>list[ScheduledEvent]::","cancel_user_pending_events:266:async (self, user_id:UUID, platform:EventPlatform | str | None = None,)>int::","cleanup_stale_events:295:async (self, max_age_hours:int = 48)>int::"]]}],"nikita/db/repositories/score_history_repository.py":["p",{"ScoreHistoryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize ScoreHistoryRepository.","log_event:35:async (self, user_id:UUID, score:Decimal, chapter:int, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>ScoreHistory::","get_history:63:async (self, user_id:UUID, limit:int = 50,)>list[ScoreHistory]::","get_daily_stats:86:async (self, user_id:UUID, target_date:date,)>dict[str, Any]::","get_events_by_type:140:async (self, user_id:UUID, event_type:str, limit:int = 50,)>list[ScoreHistory]::","get_history_since:166:async (self, user_id:UUID, since:datetime, limit:int = 1000,)>list[ScoreHistory]::"]]}],"nikita/db/repositories/summary_repository.py":["p",{"DailySummaryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize DailySummaryRepository.","create_summary:43:async (self, user_id:UUID, summary_date:date, score_start:Decimal | None = None, score_end:Decimal | None = None, decay_applied:Decimal | None = None, conversations_count:int = 0, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None, # Context engineering fields (spec 012) summary_text:str | None = None, key_moments:list[dict[str, Any]] | None = None, emotional_tone:str | None = None, engagement_score:Decimal | None = None,)>DailySummary::","get_by_date:85:async (self, user_id:UUID, summary_date:date,)>DailySummary | None::","get_range:108:async (self, user_id:UUID, start_date:date, end_date:date,)>list[DailySummary]::","update_summary:140:async (self, summary_id:UUID, score_end:Decimal | None = None, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None, # Context engineering fields (spec 012) summary_text:str | None = None, key_moments:list[dict[str, Any]] | None = None, emotional_tone:str | None = None, engagement_score:Decimal | None = None,)>DailySummary::","get_for_date:189:async (self, user_id:UUID, summary_date:date,)>DailySummary | None:get_by_date:","get_recent:205:async (self, user_id:UUID, limit:int = 7,)>list[DailySummary]::"]]}],"nikita/db/repositories/thought_repository.py":["p",{"NikitaThoughtRepository":["21",["__init__:28:(self, session:AsyncSession)>None:__init__:Initialize NikitaThoughtRepository.","create_thought:39:async (self, user_id:UUID, thought_type:str, content:str, source_conversation_id:UUID | None = None, expires_at:datetime | None = None,)>NikitaThought::","get_active_thoughts:73:async (self, user_id:UUID, thought_type:str | None = None, limit:int = 10,)>list[NikitaThought]::","get_thoughts_for_prompt:109:async (self, user_id:UUID, max_per_type:int = 3,)>dict[str, list[NikitaThought]]:get_active_thoughts:","mark_thought_used:135:async (self, thought_id:UUID,)>NikitaThought::","create_missing_him_thought:163:async (self, user_id:UUID, hours_since_last_message:float, source_conversation_id:UUID | None = None,)>NikitaThought | None:create_thought:","bulk_create_thoughts:206:async (self, user_id:UUID, thoughts_data:list[dict], source_conversation_id:UUID | None = None,)>list[NikitaThought]:create_thought:","expire_missing_him_thoughts:235:async (self, user_id:UUID,)>int:get_active_thoughts:","cleanup_expired_thoughts:262:async (self, user_id:UUID,)>int::"]]}],"nikita/db/repositories/thread_repository.py":["p",{"ConversationThreadRepository":["20",["__init__:27:(self, session:AsyncSession)>None:__init__:Initialize ConversationThreadRepository.","create_thread:37:async (self, user_id:UUID, thread_type:str, content:str, source_conversation_id:UUID | None = None,)>ConversationThread::","get_open_threads:70:async (self, user_id:UUID, thread_type:str | None = None, limit:int = 20,)>list[ConversationThread]::","get_threads_for_prompt:99:async (self, user_id:UUID, max_per_type:int = 5,)>dict[str, list[ConversationThread]]:get_open_threads:","resolve_thread:125:async (self, thread_id:UUID,)>ConversationThread::","expire_thread:152:async (self, thread_id:UUID,)>ConversationThread::","bulk_create_threads:181:async (self, user_id:UUID, threads_data:list[dict], source_conversation_id:UUID | None = None,)>list[ConversationThread]:create_thread:","bulk_resolve_threads:208:async (self, thread_ids:list[UUID],)>int:resolve_thread:"]]}],"nikita/db/repositories/user_repository.py":["p",{"UserRepository":["22",["__init__:31:(self, session:AsyncSession)>None:__init__:","get:39:async (self, user_id:UUID)>User | None::","get_by_telegram_id:60:async (self, telegram_id:int)>User | None::","get_by_phone_number:77:async (self, phone_number:str)>User | None::","create_with_metrics:108:async (self, user_id:UUID, telegram_id:int | None = None, phone:str | None = None,)>User::","update_score:172:async (self, user_id:UUID, delta:Decimal, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>User:get:","apply_decay:217:async (self, user_id:UUID, decay_amount:Decimal,)>User:update_score:","advance_chapter:234:async (self, user_id:UUID)>User:get:","update_last_interaction:283:async (self, user_id:UUID, timestamp:datetime | None = None,)>User:get:","get_active_users_for_decay:311:async (self)>list[User]::","update_game_status:332:async (self, user_id:UUID, status:str,)>User:get:","set_boss_fight_status:356:async (self, user_id:UUID)>User:get:","update_onboarding_status:405:async (self, user_id:UUID, status:str, call_id:str | None = None,)>User:get:","update_onboarding_profile:443:async (self, user_id:UUID, profile_updates:dict[str, Any],)>User:get:","complete_onboarding:477:async (self, user_id:UUID, call_id:str, profile:dict[str, Any],)>User:get:","get_users_pending_onboarding:521:async (self)>list[User]::","is_onboarded:535:async (self, user_id:UUID)>bool:get:","increment_boss_attempts:549:async (self, user_id:UUID)>User:get:"]]}],"nikita/db/repositories/vice_repository.py":["p",{"VicePreferenceRepository":["17",["__init__:23:(self, session:AsyncSession)>None:__init__:Initialize VicePreferenceRepository.","get_active:27:async (self, user_id:UUID)>list[UserVicePreference]::","get_by_category:48:async (self, user_id:UUID, category:str,)>UserVicePreference | None::","update_intensity:70:async (self, preference_id:UUID, delta:int,)>UserVicePreference::","discover:101:async (self, user_id:UUID, category:str, initial_intensity:int = 1,)>UserVicePreference:get_by_category:","update_engagement:131:async (self, preference_id:UUID, delta:Decimal,)>UserVicePreference::"]]}],"nikita/db/transactions.py":["p",["is_deadlock_error:40:(error:Exception)>bool::","atomic:67:(isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, max_retries::float = DEFAULT_BASE_DELAY,)>Callable[[Callable[P, T]], Callable[P, T]]:atomic,decorator,is_deadlock_error,transfer_funds,wrapper:","run_in_transaction:162:async (session:AsyncSession, func::Any, isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, **kwargs:Any,)>Any:_wrapped,atomic:"]],"nikita/engine/chapters/boss.py":["p",{"BossStateMachine":["15",["should_trigger_boss:39:(self, relationship_score:Decimal, chapter:int, game_status:str,)>bool::","check_threshold:63:async (self, user_id:UUID)>bool::","initiate_boss:82:async (self, user_id:UUID, chapter:int,)>dict[str, Any]::","trigger_boss:110:async (self, user_id:UUID)>dict[str, Any]:initiate_boss:","_get_user_repo:135:(self)::","process_pass:144:async (self, user_id:UUID)>dict[str, Any]:_get_user_repo:","process_fail:168:async (self, user_id:UUID)>dict[str, Any]:_get_user_repo:","process_outcome:198:async (self, user_id:UUID, passed:bool,)>dict[str, Any]:process_fail,process_pass:"]]}],"nikita/engine/chapters/judgment.py":["p",{"JudgmentResult":["25",[]],"BossJudgment":["31",["judge_boss_outcome:45:async (self, user_message:str, conversation_history:list[dict[str, Any]], chapter:int, boss_prompt:dict[str, Any],)>JudgmentResult:_call_llm:","_call_llm:71:async (self, user_message:str, conversation_history:list[dict[str, Any]], chapter:int, boss_prompt:dict[str, Any],)>JudgmentResult::"]]}],"nikita/engine/chapters/prompts.py":["p",["get_boss_prompt:132:(chapter:int)>BossPrompt::"],{"BossPrompt":["10",[]]}],"nikita/engine/constants.py":["p",["_load_chapter_behaviors:44:()>dict[int, str]::","_get_chapter_behaviors:68:()>dict[int, str]:_load_chapter_behaviors:","_deprecation_warning:108:(name:str, alternative:::Emit deprecation warning for old constants."],{"_ChapterBehaviorsProxy":["74",["__getitem__:77:(self, key:int)>str:_load_chapter_behaviors:","__iter__:80:(self):_load_chapter_behaviors:","__len__:83:(self):_load_chapter_behaviors:","get:86:(self, key:int, default:str | None = None)>str | None:_load_chapter_behaviors,get:","keys:90:(self):_load_chapter_behaviors,keys:","values:93:(self):_load_chapter_behaviors,values:","items:96:(self):_load_chapter_behaviors,items:"]]}],"nikita/engine/decay/calculator.py":["p",{"UserLike":["18",[]],"DecayCalculator":["28",["__init__:45:(self, *, max_decay_per_cycle:Decimal = Decimal(\"20.0\"),)>None::","is_overdue:54:(self, user:UserLike)>bool::","calculate_decay:74:(self, user:UserLike)>DecayResult | None:is_overdue:"]]}],"nikita/engine/decay/models.py":["p",{"DecayResult":["14",["validate_score_relationship:57:(self)>\"DecayResult\"::Validate that score_after <= score_before (decay doesn't increase score)."]]}],"nikita/engine/decay/processor.py":["p",{"DecayProcessor":["24",["__init__:44:(self, session:AsyncSession, user_repository:\"UserRepository\", score_history_repository:\"ScoreHistoryRepository\", *, batch_size:int = 100, max_decay_per_cycle:Decimal = Decimal(\"20.0\"),)>None::","should_skip_user:60:(self, user:Any)>bool::","process_user:73:async (self, user:Any)>DecayResult | None:_handle_game_over,_log_decay_event,should_skip_user:","process_all:103:async (self)>dict[str, int]:process_user:","_handle_game_over:131:async (self, user:Any, result:DecayResult)>None::","_log_decay_event:155:async (self, user:Any, result:DecayResult)>None::"]]}],"nikita/engine/engagement/calculator.py":["p",["_clamp:73:(value:Decimal, min_val::Decimal = Decimal(\"1\"))>Decimal::Clamp a value between min and max.","map_score_to_state:306:(score:Decimal, is_clingy::bool = False,)>EngagementState::"],{"OptimalFrequencyCalculator":["78",["get_optimal:85:(self, chapter:int, day_of_week:int)>int::","get_tolerance_band:101:(self, chapter:int)>Decimal::","get_bounds:112:(self, chapter:int, day_of_week:int)>tuple[int, int]:get_optimal,get_tolerance_band:"]],"CalibrationCalculator":["131",["_frequency_component:146:(self, actual_messages:int, optimal_messages:int,)>Decimal:_clamp:","_timing_component:171:(self, avg_response_seconds:int,)>Decimal:_clamp:","_content_component:210:(self, avg_message_length:int, needy_score:Decimal, distracted_score:Decimal,)>Decimal:_clamp:","compute:252:(self, actual_messages:int, optimal_messages:int, avg_response_seconds:int, avg_message_length:int, needy_score:Decimal, distracted_score:Decimal,)>CalibrationResult:_clamp,_content_component,_frequency_component,_timing_component,map_score_to_state:"]]}],"nikita/engine/engagement/detection.py":["p",["_get_neediness_agent:121:()>Agent[None, LanguageAnalysisResult]::","_get_distraction_agent:133:()>Agent[None, LanguageAnalysisResult]::","_clamp:145:(value:Decimal, min_val::Decimal = Decimal(\"1\"))>Decimal::Clamp a value between min and max.","_get_cache_key:481:(messages:list[str])>str::Generate cache key from messages.","_call_neediness_llm:486:async (messages:list[str])>Decimal::","_call_distraction_llm:520:async (messages:list[str])>Decimal::","analyze_neediness:557:async (messages:list[str], session_id::_call_neediness_llm,_clamp,_get_cache_key:","analyze_distraction:598:async (messages:list[str], session_id::_call_distraction_llm,_clamp,_get_cache_key:","clear_analysis_cache:636:()>None::"],{"LanguageAnalysisResult":["57",[]],"ClinginessDetector":["150",["_frequency_signal:168:(self, messages_per_day:int, optimal_frequency:int, chapter:int,)>Decimal:_clamp:","_double_text_signal:196:(self, consecutive_messages:int, total_exchanges:int,)>Decimal:_clamp:","_response_time_signal:219:(self, avg_response_seconds:int,)>Decimal:_clamp:","_length_ratio_signal:244:(self, user_avg_length:int, nikita_avg_length:int,)>Decimal:_clamp:","detect:277:(self, messages_per_day:int, optimal_frequency:int, chapter:int, consecutive_messages:int, total_exchanges:int, avg_response_seconds:int, user_avg_length:int, nikita_avg_length:int, needy_score:Decimal,)>ClinginessResult:_clamp,_double_text_signal,_frequency_signal,_length_ratio_signal,_response_time_signal:"]],"NeglectDetector":["320",["_frequency_signal:338:(self, messages_per_day:int, optimal_frequency:int, chapter:int,)>Decimal:_clamp:","_response_time_signal:362:(self, avg_response_seconds:int,)>Decimal:_clamp:","_short_message_signal:384:(self, avg_message_length:int,)>Decimal:_clamp:","_abrupt_ending_signal:409:(self, abrupt_endings:int, total_conversations:int,)>Decimal:_clamp:","detect:433:(self, messages_per_day:int, optimal_frequency:int, chapter:int, avg_response_seconds:int, avg_message_length:int, abrupt_endings:int, total_conversations:int, distracted_score:Decimal,)>NeglectResult:_abrupt_ending_signal,_clamp,_frequency_signal,_response_time_signal,_short_message_signal:"]]}],"nikita/engine/engagement/models.py":["p",{"EngagementSnapshot":["15",["multiplier:49:(self)>Decimal::Get the scoring multiplier for current state."]],"ClinginessResult":["56",[]],"NeglectResult":["79",[]],"CalibrationResult":["102",[]],"StateTransition":["135",[]]}],"nikita/engine/engagement/recovery.py":["p",{"RecoveryAction":["48",[]],"RecoveryCheckResult":["56",[]],"GameOverResult":["64",[]],"RecoveryManager":["93",["get_recovery_action:102:(self, state:EngagementState)>RecoveryAction | None::","check_recovery_complete:123:(self, state:EngagementState, recovery_started_at:datetime, messages_since_recovery:int, avg_message_length:int = 0,)>RecoveryCheckResult:_check_clingy_recovery,_check_distant_recovery,_check_out_of_zone_recovery:","_check_clingy_recovery:173:(self, messages:int)>RecoveryCheckResult::Check if clingy recovery is complete (gave space).","_check_distant_recovery:185:(self, messages:int, avg_length:int)>RecoveryCheckResult::Check if distant recovery is complete (engaged meaningfully).","_check_out_of_zone_recovery:202:(self, messages:int, avg_length:int)>RecoveryCheckResult::Check if out of zone recovery is complete.","check_point_of_no_return:224:(self, state:EngagementState, consecutive_days:int,)>GameOverResult:_get_game_over_reason:","_get_game_over_reason:260:(self, state:EngagementState)>str::Get game over reason string for state."]]}],"nikita/engine/engagement/state_machine.py":["p",{"EngagementStateMachine":["54",["__init__:64:(self, initial_state:EngagementState = EngagementState.CALIBRATING,)>None::","current_state:83:(self)>EngagementState::Get current engagement state.","current_multiplier:88:(self)>Decimal::Get scoring multiplier for current state.","update:99:(self, calibration_result:CalibrationResult, is_clingy:bool = False, is_neglecting:bool = False, is_new_day:bool = False, recovery_complete:bool = False,)>StateTransition | None:_apply_transition,_evaluate_transition,_update_counters:","_update_counters:134:(self, score:Decimal, is_clingy:bool, is_neglecting:bool, is_new_day:bool,)>None::Update consecutive counters based on current metrics.","_evaluate_transition:177:(self, score:Decimal, is_clingy:bool, is_neglecting:bool, recovery_complete:bool,)>EngagementState::Evaluate which state to transition to based on rules.","_apply_transition:233:(self, from_state:EngagementState, to_state:EngagementState, score:Decimal,)>StateTransition:_get_transition_reason,_reset_counters:Apply state transition and record in history.","_get_transition_reason:257:(self, from_state:EngagementState, to_state:EngagementState,)>str::Get human-readable reason for transition.","_reset_counters:288:(self)>None::Reset all consecutive counters.","on_chapter_change:298:(self, new_chapter:int)>StateTransition:_reset_counters:","get_history:323:(self)>list[StateTransition]::"]]}],"nikita/engine/scoring/analyzer.py":["p",["_create_score_analyzer_agent:57:()>Agent[None, ResponseAnalysis]::"],{"ScoreAnalyzer":["66",["__init__:73:(self)::Initialize the score analyzer.","agent:79:(self)>Agent[None, ResponseAnalysis]:_create_score_analyzer_agent:Lazy-load the Pydantic AI agent.","analyze:90:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis:_call_llm,_neutral_analysis:","analyze_batch:114:async (self, exchanges:list[tuple[str, str]], context:ConversationContext,)>ResponseAnalysis:_build_batch_prompt,_call_llm_raw,_neutral_analysis:","_call_llm:145:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis | None:_build_analysis_prompt,_call_llm_raw:","_call_llm_raw:159:async (self, prompt:str)>ResponseAnalysis | None::","_build_analysis_prompt:180:(self, user_message:str, nikita_response:str, context:ConversationContext,)>str::"]]}],"nikita/engine/scoring/calculator.py":["p",{"ScoreResult":["33",["delta:49:(self)>Decimal::Net score change."]],"ScoreCalculator":["54",["__init__:64:(self)::Initialize calculator with standard weights.","apply_multiplier:72:(self, deltas:MetricDeltas, engagement_state:EngagementState,)>MetricDeltas:adjust:","adjust:87:(delta:Decimal)>Decimal::","calculate_composite:99:(self, metrics:dict[str, Decimal])>Decimal::","update_metrics:123:(self, current:dict[str, Decimal], deltas:MetricDeltas,)>dict[str, Decimal]:clamp:","clamp:134:(value:Decimal)>Decimal::","calculate:150:(self, current_metrics:dict[str, Decimal], analysis:ResponseAnalysis, engagement_state:EngagementState, chapter:int,)>ScoreResult:_detect_events,apply_multiplier,calculate_composite,update_metrics:","_detect_events:194:(self, score_before:Decimal, score_after:Decimal, chapter:int,)>list[ScoreChangeEvent]::"]]}],"nikita/engine/scoring/models.py":["p",{"MetricDeltas":["16",["validate_delta_bounds:42:(cls, v:Decimal, info)>Decimal::Ensure delta is within [-10, +10] bounds.","total:51:(self)>Decimal::Sum of all deltas.","is_positive:56:(self)>bool::Whether total delta is positive (> 0)."]],"ResponseAnalysis":["61",["validate_confidence_bounds:88:(cls, v:Decimal)>Decimal::Ensure confidence is within [0, 1] bounds."]],"ConversationContext":["97",[]],"ScoreChangeEvent":["141",[]]}],"nikita/engine/scoring/service.py":["p",{"ScoringService":["37",["__init__:47:(self)::Initialize the scoring service with analyzer and calculator.","score_interaction:61:async (self, user_id:UUID, user_message:str, nikita_response:str, context:ConversationContext, current_metrics:dict[str, Decimal], engagement_state:EngagementState, session:\"AsyncSession | None\" = None,)>ScoreResult:_log_history:","score_batch:117:async (self, user_id:UUID, exchanges:list[tuple[str, str]], context:ConversationContext, current_metrics:dict[str, Decimal], engagement_state:EngagementState, session:\"AsyncSession | None\" = None,)>ScoreResult:_log_history:","analyze_only:162:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis::","_log_history:191:async (self, user_id:UUID, result:ScoreResult, context:ConversationContext, session:\"AsyncSession\", event_type:str = \"conversation\",)>None::"]]}],"nikita/engine/vice/analyzer.py":["p",{"LLMViceSignal":["21",[]],"LLMViceAnalysis":["30",[]],"ViceAnalyzer":["73",["__init__:79:(self)::Initialize analyzer with Pydantic AI agent.","_get_agent:83:(self)>Agent[None, LLMViceAnalysis]::Lazy-load Pydantic AI agent for vice analysis.","analyze_exchange:103:async (self, user_message:str, nikita_response:str, conversation_id:UUID, context:dict | None = None,)>ViceAnalysisResult:_analyze_with_llm,_convert_llm_signals:","_analyze_with_llm:140:async (self, prompt:str)>dict:_get_agent:","_convert_llm_signals:155:(self, llm_signals:list[dict])>list[ViceSignal]::"]]}],"nikita/engine/vice/boundaries.py":["p",{"ViceBoundaryEnforcer":["85",["max_intensity_for_chapter:96:(self, category:str, chapter:int,)>Decimal:max_intensity_for_chapter:","apply_cap:124:(self, category:str, intensity:Decimal, chapter:int,)>Decimal:max_intensity_for_chapter:","get_allowed_expressions:138:(self, category:str)>list[str]::","get_forbidden_expressions:150:(self, category:str)>list[str]::","is_sensitive_category:162:(self, category:str)>bool::"]]}],"nikita/engine/vice/injector.py":["p",{"VicePromptInjector":["62",["inject:73:(self, base_prompt:str, profile:ViceProfile, chapter:int,)>str:_build_vice_section,inject:","_build_vice_section:113:(self, top_vices:list[tuple[str, Decimal]], chapter:int,)>str:_intensity_label:"]]}],"nikita/engine/vice/models.py":["p",{"ViceSignal":["17",["validate_confidence:41:(cls, v)::Ensure confidence is a Decimal."]],"ViceAnalysisResult":["52",["detected_count:68:(self)>int::Number of positive signals detected.","rejection_count:73:(self)>int::Number of rejection signals detected.","has_signals:78:(self)>bool::Whether any signals were detected."]],"ViceProfile":["83",["get_intensity:102:(self, category:str)>Decimal::","has_active_vices:113:(self, threshold:Decimal = Decimal(\"0.30\"))>bool::","get_top_n:124:(self, n:int = 3)>list[tuple[str, Decimal]]::"]],"ViceInjectionContext":["142",["has_vices:157:(self)>bool::Check if there are active vices to inject.","primary_vice:162:(self)>str | None::Get the primary (highest) vice category."]]}],"nikita/engine/vice/scorer.py":["p",{"ViceScorer":["26",["__init__:35:(self)::Initialize scorer.","_get_vice_repo:39:async (self)>\"VicePreferenceRepository\"::","process_signals:58:async (self, user_id:UUID, signals:list[ViceSignal],)>dict:_get_vice_repo,process_signals:","get_profile:113:async (self, user_id:UUID)>ViceProfile:_get_vice_repo:","get_top_vices:163:async (self, user_id:UUID, n:int = 3, min_threshold:Decimal = Decimal(\"0.20\"),)>list[tuple[str, Decimal]]:get_profile:","close:192:async (self):close:Close session if open."]]}],"nikita/engine/vice/service.py":["p",{"ViceService":["28",["__init__:34:(self)::Initialize vice service with all components.","get_prompt_context:45:async (self, profile:ViceProfile, chapter:int,)>ViceInjectionContext:get_probe_categories:","process_conversation:93:async (self, user_id:UUID, user_message:str, nikita_message:str, conversation_id:UUID,)>dict::","process_conversation_signals:127:async (self, user_id:UUID, signals:list[ViceSignal],)>dict::","get_probe_categories:139:(self, profile:ViceProfile)>list[str]::","inject_vices_into_prompt:179:(self, base_prompt:str, profile:ViceProfile, chapter:int,)>str::","get_user_profile:194:async (self, user_id:UUID)>ViceProfile::","close:205:async (self):close:Cleanup resources."]]}],"nikita/memory/graphiti_client.py":["p",["get_memory_client:289:async (user_id:str)>NikitaMemory::"],{"NikitaMemory":["25",["__init__:35:(self, user_id:str)::","initialize:62:async (self)>None::","_get_group_id:79:(self, graph_type:str)>str::Get the group ID for a specific graph type.","add_episode:89:async (self, content:str, source:str, graph_type:str = \"relationship\", metadata:dict[str, Any] | None = None,)>None:_get_group_id,add_episode:","search_memory:117:async (self, query:str, graph_types:list[str] | None = None, limit:int = 10,)>list[dict[str, Any]]:_get_group_id:","get_context_for_prompt:155:async (self, user_message:str, max_memories:int = 5,)>str:search_memory:","add_user_fact:202:async (self, fact:str, confidence:float = 0.8, source_message:str | None = None,)>None:add_episode:","get_user_facts:222:async (self, limit:int = 50)>list[str]:_get_group_id:","add_relationship_episode:254:async (self, description:str, episode_type:str = \"general\",)>None:add_episode:","add_nikita_event:273:async (self, description:str, event_type:str = \"life_event\",)>None:add_episode:"]]}],"nikita/meta_prompts/models.py":["p",{"BackstoryContext":["20",["from_model:47:(cls, backstory:\"UserBackstory\")>\"BackstoryContext\"::","has_backstory:72:(self)>bool::","get_first_message_hook:80:(self)>str:has_backstory:","format_persona_overrides:99:(self)>str::"]],"ViceProfile":["126",["get_top_vices:153:(self, n:int = 3)>list[tuple[str, int]]::","to_dict:176:(self)>dict[str, int]::Convert to dictionary."]],"MetaPromptContext":["191",["get_score_interpretation:260:(self)>str::Interpret the relationship score.","get_chapter_behavior_summary:274:(self)>str::Get a brief description of expected chapter behavior.","get_engagement_hint:285:(self)>str::","get_calibration_status:301:(self)>str::Interpret calibration score for prompt context.","get_backstory_summary:313:(self)>str | None:has_backstory:","get_persona_adaptations:337:(self)>dict[str, str]::"]],"GeneratedPrompt":["352",["__post_init__:374:(self)::Calculate token count using tiktoken."]]}],"nikita/meta_prompts/service.py":["p",{"MetaPromptService":["30",["__init__:41:(self, session:\"AsyncSession\"):_load_templates:","_load_templates:67:(self)>None::Load all meta-prompt templates from disk.","_count_tokens:108:(self, text:str)>int::","_validate_token_budget:129:(self, content:str, warn_threshold:int = 10000, error_threshold:int = 12000,)>dict[str, Any]:_count_tokens:","_get_tier_limits:159:(self, current_token_estimate:int)>dict[str, int]::","_log_prompt:187:async (self, user_id:UUID, prompt_content:str, generation_time_ms:float, meta_prompt_template:str, conversation_id:UUID | None = None, context_snapshot:dict[str, Any] | None = None,)>None:_count_tokens:","_load_context:211:async (self, user_id:UUID, tier:str = \"standard\")>MetaPromptContext:_compute_nikita_activity,_compute_nikita_energy,_compute_nikita_mood,_get_chapter_name,_load_behavioral_instructions,_load_memory_context:","_load_memory_context:354:async (self, user_id:UUID, context:MetaPromptContext, tier:str = \"standard\",)>None:_query_graph:","_query_graph:401:async (graph_type:str, limit:int = 50)>list[str]::Query a specific graph type and extract fact strings.","_load_behavioral_instructions:485:async (self, user_id:UUID, context:MetaPromptContext,)>None::","_compute_nikita_activity:543:(self, time_of_day:str, day_of_week:str)>str::Compute what Nikita is likely doing based on time.","_compute_nikita_mood:562:(self, chapter:int, hours_since:float)>str::Compute Nikita's mood based on chapter and time since contact.","_compute_nikita_energy:587:(self, time_of_day:str)>str::Compute energy level based on time of day.","_get_chapter_name:598:(self, chapter:int)>str::Get the name of a chapter.","_format_template:609:(self, template_name:str, context:MetaPromptContext)>str::","generate_system_prompt:732:async (self, user_id:UUID, context:MetaPromptContext | None = None, conversation_id:UUID | None = None, skip_logging:bool = False, tier:str = \"standard\",)>GeneratedPrompt:_format_template,_load_context,_log_prompt,_validate_token_budget:","detect_vices:842:async (self, user_message:str, recent_context:list[str], current_profile:ViceProfile,)>dict::","extract_entities:881:async (self, conversation:str, user_id:UUID, context:MetaPromptContext | None = None, open_threads:list[dict] | None = None,)>dict:_load_context:","simulate_thoughts:935:async (self, user_id:UUID, context:MetaPromptContext | None = None,)>dict:_load_context:","generate_daily_summary:1007:async (self, user_id:UUID, summary_date:date, score_start:Decimal, score_end:Decimal, decay_applied:Decimal, conversations_data:list[dict], new_facts:list[str], new_threads:list[dict], nikita_thoughts:list[str], context:MetaPromptContext | None = None,)>dict:_load_context:"]]}],"nikita/platforms/telegram/auth.py":["p",{"TelegramAuth":["34",["__init__:49:(self, supabase_client:AsyncClient, user_repository:UserRepository, pending_registration_repository:PendingRegistrationRepository,)::","register_user:66:async (self, telegram_id:int, email:str, registration_source:str = \"telegram\", # \"telegram\" or \"portal\")>dict[str, Any]:send_otp_code:","verify_magic_link:145:async (self, telegram_id:int, otp_token:str,)>Any:register_user,verify_otp_code:","link_telegram:206:async (self, user_id:UUID, telegram_id:int,)>None::","get_pending_email:232:async (self, telegram_id:int)>str | None::","send_otp_code:252:async (self, telegram_id:int, chat_id:int, email:str,)>dict[str, Any]::","verify_otp_code:330:async (self, telegram_id:int, code:str,)>Any::"]]}],"nikita/platforms/telegram/bot.py":["p",["escape_html:14:(text:str)>str::","get_bot:263:()>TelegramBot::"],{"TelegramBot":["34",["__init__:37:(self)::Initialize bot with settings and HTTP client.","send_message:53:async (self, chat_id:int, text:str, parse_mode:str = \"HTML\", escape:bool = True,)>dict:escape_html:","send_message_with_keyboard:102:async (self, chat_id:int, text:str, keyboard:list[list[dict]], parse_mode:str = \"HTML\", escape:bool = True,)>dict:escape_html:","answer_callback_query:150:async (self, callback_query_id:str, text:str | None = None, show_alert:bool = False,)>dict::","send_chat_action:187:async (self, chat_id:int, action:str = \"typing\",)>dict::","set_webhook:218:async (self, url:str, secret_token:str | None = None)>dict::","close:254:async (self)::Close the HTTP client connection."]]}],"nikita/platforms/telegram/commands.py":["p",{"CommandHandler":["23",["__init__:45:(self, user_repository:UserRepository, telegram_auth:TelegramAuth, bot:TelegramBot, profile_repository:ProfileRepository | None = None, onboarding_repository:OnboardingStateRepository | None = None,)::","handle:61:async (self, message:dict)>None::","_handle_start:82:async (self, message:dict)>None::","_handle_help:145:async (self, message:dict)>None::","_handle_status:166:async (self, message:dict)>None:_get_chapter_name,_get_score_hint:","_handle_call:199:async (self, message:dict)>None::","_handle_unknown:215:async (self, message:dict)>None::","_get_chapter_name:234:(chapter:int)>str::","_get_score_hint:253:(score:float)>str::"]]}],"nikita/platforms/telegram/delivery.py":["p",{"ResponseDelivery":["15",["__init__:28:(self, bot:TelegramBot)::","queue:42:async (self, user_id:UUID, chat_id:int, response:str, delay_seconds:int,)>None:_send_now,_wait_with_typing:","_wait_with_typing:65:async (self, chat_id:int, delay_seconds:int)>None::","_send_now:84:async (self, chat_id:int, response:str)>None:_split_message:","_split_message:108:(self, text:str)>list[str]::"]]}],"nikita/platforms/telegram/message_handler.py":["p",{"MessageHandler":["51",["__init__:73:(self, user_repository:UserRepository, conversation_repository:ConversationRepository, text_agent_handler:TextAgentMessageHandler, response_delivery:ResponseDelivery, bot:TelegramBot, rate_limiter:Optional[RateLimiter] = None, scoring_service:Optional[ScoringService] = None, profile_repository:Optional[ProfileRepository] = None, backstory_repository:Optional[BackstoryRepository] = None, onboarding_handler:Optional[\"OnboardingHandler\"] = None, boss_judgment:Optional[BossJudgment] = None, boss_state_machine:Optional[BossStateMachine] = None, engagement_repository:Optional[EngagementStateRepository] = None,)::","handle:108:async (self, message:TelegramMessage)>None:_apply_text_patterns,_get_or_create_conversation,_handle_boss_response,_is_new_day,_needs_onboarding,_score_and_check_boss,_send_error_response,_send_game_status_response,_send_rate_limit_response,handle:","_send_rate_limit_response:277:async (self, chat_id:int, result)>None::","_send_error_response:299:async (self, chat_id:int)>None::","_apply_text_patterns:312:(self, response:str, user)>str::","_get_or_create_conversation:353:async (self, user_id:UUID, chapter:int,)>Conversation::","_score_and_check_boss:387:async (self, user, user_message:str, nikita_response:str, chat_id:int, conversation_id:UUID,)>None:_send_boss_opening,_update_engagement_after_scoring:","_send_boss_opening:504:async (self, chat_id:int, chapter:int)>None::","_needs_onboarding:531:async (self, user_id:UUID, telegram_id:int, chat_id:int,)>bool:_offer_onboarding_choice,_redirect_to_onboarding:","_offer_onboarding_choice:622:async (self, user_id:UUID, telegram_id:int, chat_id:int,)>None::"]]}],"nikita/platforms/telegram/models.py":["p",{"TelegramUser":["10",[]],"TelegramChat":["23",[]],"TelegramMessage":["32",[]],"TelegramCallbackQuery":["51",[]],"TelegramUpdate":["66",[]]}],"nikita/platforms/telegram/onboarding/handler.py":["p",["create_onboarding_handler:1269:async (bot:TelegramBot, onboarding_repository::ProfileRepository, user_repository:UserRepository, backstory_repository:BackstoryRepository, vice_repository:VicePreferenceRepository,)>OnboardingHandler::"],{"_ProfileFromAnswers":["40",["__init__:46:(self, answers:dict)::"]],"OnboardingHandler":["118",["__init__:142:(self, bot:TelegramBot, onboarding_repository:OnboardingStateRepository, profile_repository:ProfileRepository, user_repository:UserRepository | None = None, backstory_repository:BackstoryRepository | None = None, vice_repository:VicePreferenceRepository | None = None, venue_research_service:\"VenueResearchService | None\" = None, backstory_generator:\"BackstoryGeneratorService | None\" = None, persona_adaptation:\"PersonaAdaptationService | None\" = None,)::","start:170:async (self, telegram_id:int, chat_id:int,)>None::","handle:202:async (self, telegram_id:int, chat_id:int, text:str,)>bool:_handle_drug_tolerance_step,_handle_interest_step,_handle_life_stage_step,_handle_location_step,_handle_scenario_selection_step,_handle_scene_step,_handle_skip,_handle_venue_research_step,_is_skip_request:","has_incomplete_onboarding:263:async (self, telegram_id:int,)>OnboardingState | None::","resume:288:async (self, telegram_id:int, chat_id:int,)>bool:has_incomplete_onboarding:","_handle_location_step:327:async (self, telegram_id:int, chat_id:int, text:str,)>None:_validate_location:","_handle_life_stage_step:358:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_scene_step:415:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_interest_step:471:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_drug_tolerance_step:501:async (self, telegram_id:int, chat_id:int, text:str,)>None:_validate_drug_tolerance:","_handle_skip:557:async (self, telegram_id:int, chat_id:int, state:OnboardingState,)>None::","_handle_venue_research_step:618:async (self, telegram_id:int, chat_id:int, text:str,)>None:_present_scenarios:","_present_scenarios:707:async (self, telegram_id:int, chat_id:int, scenarios:list,)>None::"]]}],"nikita/platforms/telegram/otp_handler.py":["p",{"OTPVerificationHandler":["37",["__init__:61:(self, telegram_auth:TelegramAuth, bot:TelegramBot, pending_repo:\"PendingRegistrationRepository | None\" = None, onboarding_handler:\"OnboardingHandler | None\" = None, profile_repository:\"ProfileRepository | None\" = None, user_repository:\"UserRepository | None\" = None,)::","handle:84:async (self, telegram_id:int, chat_id:int, code:str,)>bool:_offer_onboarding_choice:","_offer_onboarding_choice:331:async (self, chat_id:int, user_id:str, telegram_id:int,)>None::"]]}],"nikita/platforms/telegram/rate_limiter.py":["p",["get_shared_cache:74:()>InMemoryCache::"],{"InMemoryCache":["28",["__init__:36:(self)::","incr:41:async (self, key:str)>int:_cleanup_expired,get:Increment counter and return new value.","expire:48:async (self, key:str, seconds:int)>None::Set expiration time for a key.","get:53:async (self, key:str)>int:_cleanup_expired,get:Get current value (returns 0 if not exists or expired).","_cleanup_expired:59:(self)>None::Remove expired keys (called within lock)."]],"RateLimitResult":["83",[]],"RateLimiter":["104",["__init__:120:(self, cache:Any):expire,get,incr:","check:129:async (self, user_id:UUID)>RateLimitResult:_get_day_key,_get_minute_key,_seconds_until_midnight,expire,incr:","get_remaining:193:async (self, user_id:UUID)>dict:_get_day_key,_get_minute_key,get:","_get_minute_key:221:(self, user_id:UUID)>str::Generate cache key for per-minute limit.","_get_day_key:225:(self, user_id:UUID)>str::Generate cache key for per-day limit.","_seconds_until_midnight:230:(self)>int::Calculate seconds until midnight UTC (when daily limit resets)."]],"DatabaseRateLimiter":["243",["__init__:260:(self, session:\"AsyncSession\")::","check:269:async (self, user_id:UUID)>RateLimitResult:_get_day_window,_get_minute_window,_seconds_until_midnight:","get_remaining:371:async (self, user_id:UUID)>dict:_get_day_window,_get_minute_window:","_get_minute_window:415:(self)>str::","_get_day_window:424:(self)>str::","_seconds_until_midnight:433:(self)>int::Calculate seconds until midnight UTC (when daily limit resets)."]]}],"nikita/platforms/telegram/registration_handler.py":["p",{"RegistrationHandler":["16",["__init__:30:(self, telegram_auth:TelegramAuth, bot:TelegramBot,)::","handle_email_input:45:async (self, telegram_id:int, chat_id:int, email:str,)>None:is_valid_email:","is_valid_email:138:(self, text:str)>bool::"]]}],"nikita/prompts/nikita_persona.py":["p",["get_nikita_persona:155:()>str::"]],"nikita/prompts/voice_persona.py":["p",["get_voice_persona_additions:149:(chapter:int = 1, mood:::"]],"nikita/services/backstory_generator.py":["p",{"BackstoryScenario":["27",[]],"BackstoryScenariosResult":["42",[]],"CustomBackstoryResult":["52",[]],"BackstoryGeneratorService":["65",["__init__:76:(self)::Initialize BackstoryGeneratorService.","generate_scenarios:84:async (self, profile:\"UserProfile\", venues:list[Venue],)>BackstoryScenariosResult:_build_scenario_prompt,_call_llm,_create_fallback_scenarios,_parse_scenarios_response:","process_custom_backstory:115:async (self, user_text:str, city:str, scene:str,)>CustomBackstoryResult | None:_build_extraction_prompt,_call_llm,_parse_extraction_response:","_build_scenario_prompt:153:(self, profile:\"UserProfile\", venues:list[Venue],)>str::"]]}],"nikita/services/persona_adaptation.py":["p",{"PersonaAdaptationService":["15",["generate_persona_overrides:83:(self, life_stage:str, social_scene:str, drug_tolerance:int,)>dict[str, Any]::","format_for_prompt:134:(self, overrides:dict[str, Any])>str:generate_persona_overrides:"]]}],"nikita/services/venue_research.py":["p",{"Venue":["23",[]],"VenueResearchResult":["35",[]],"VenueResearchService":["46",["__init__:71:(self, venue_cache_repository:\"VenueCacheRepository\",)::","research_venues:83:async (self, city:str, scene:str,)>VenueResearchResult:_create_fallback_result,_is_expired,_parse_search_results,_search_firecrawl:","_search_firecrawl:169:async (self, city:str, scene:str,)>list[dict]::","_parse_search_results:216:(self, raw_results:list[dict],)>list[dict]:_extract_vibe:","_extract_vibe:247:(self, description:str)>str::","_is_expired:284:(self, expires_at:datetime)>bool::","_create_fallback_result:296:(self, city:str)>VenueResearchResult::","create_venue_from_user_input:318:(self, user_input:str, city:str, scene:str,)>Venue:_extract_vibe:"]]}],"portal/sr/app/admin/jobs/page.tsx":["t",["AdminJobsPage:7:()::","formatDuration:30:(ms:number | null)::","formatTime:37:(isoString:string | null)::"]],"portal/sr/app/admin/layout.tsx":["t",["AdminLayout:11:({ children }:{ children:::","handleLogout:22:async ()::"]],"portal/sr/app/admin/page.tsx":["t",["AdminDashboardPage:8:()::"]],"portal/sr/app/admin/users/[id]/page.tsx":["t",["AdminUserDetailPage:15:({ params }:PageProps)::"]],"portal/sr/app/admin/users/page.tsx":["t",["AdminUsersPage:11:()::","formatTime:42:(isoString:string | null)::"]],"portal/sr/app/auth/callback/route.ts":["t",["GET:19:async (request:NextRequest)::"]],"portal/sr/app/conversations/page.tsx":["t",["ConversationsPage:13:()::","handleLogout:20:async ()::"]],"portal/sr/app/dashboard/page.tsx":["t",["DashboardPage:22:()::","handleLogout:30:async ()::"]],"portal/sr/app/history/page.tsx":["t",["HistoryPage:14:()::","handleLogout:32:async ()::"]],"portal/sr/app/layout.tsx":["t",["RootLayout:21:({ children, }:Readonly<{ children:::"]],"portal/sr/app/page.tsx":["t",["LoginForm:17:()::","LoginPage:375:()::","exchangeCode:34:async ()::","validateEmail:82:(email:string):::","handleSendOtp:88:async (e:React.FormEvent)::","handleVerifyOtp:134:async (e:React.FormEvent)::","handleResendCode:195:async ()::","handleChangeEmail:225:()::"]],"portal/sr/app/providers.tsx":["t",["Providers:6:({ children }:{ children:::"]],"portal/sr/components/admin/AdminNavigation.tsx":["t",["AdminNavigation:16:()::"]],"portal/sr/components/dashboard/ChapterCard.tsx":["t",["ChapterCard:28:({ chapter, bossAttempts, gameStatus, relationshipScore, }:ChapterCardProps)::","getStatusBadge:52:()::"]],"portal/sr/components/dashboard/DecayWarning.tsx":["t",["DecayWarning:20:({ hoursSinceLastInteraction, nextDecayIn, decayRate, chapter, }:DecayWarningProps)::","getSeverity:27:():'info' | 'warning' | 'critical'::","getMessage:36:():string::","getStyles:58:()::"]],"portal/sr/components/dashboard/EngagementCard.tsx":["t",["EngagementCard:68:({ state, multiplier, consecutiveInZone, consecutiveClingyDays, consecutiveDistantDays, }:EngagementCardProps)::","getAdvice:78:():string::"]],"portal/sr/components/dashboard/MetricsGrid.tsx":["t",["MetricItem:21:({ name, value, weight, description }:MetricItemProps)::","MetricsGrid:55:({ chapter, metrics }:MetricsGridProps)::","getColor:23:(val:number):::","getProgressColor:29:(val:number):::"]],"portal/sr/components/dashboard/ScoreCard.tsx":["t",["ScoreCard:10:({ score, previousScore, chapter }:ScoreCardProps)::","getScoreColor:22:(score:number):::","getStrokeColor:29:(score:number):::","getBadgeVariant:36:()::"]],"portal/sr/components/dashboard/VicesCard.tsx":["t",["ViceItem:78:({ vice }:{ vice:::","VicesCard:102:({ vices }:VicesCardProps)::"]],"portal/sr/components/history/ConversationDetail.tsx":["t",["ConversationDetail:9:({ conversation }:ConversationDetailProps)::"]],"portal/sr/components/history/ConversationList.tsx":["t",["ConversationItem:10:({ conversation, onClick, }:{ conversation::()::","ConversationList:69:({ conversations, onSelectConversation }:ConversationListProps)::"]],"portal/sr/components/history/DailySummaryCard.tsx":["t",["DailySummaryCard:31:({ summary }:DailySummaryCardProps)::"]],"portal/sr/components/history/ScoreHistoryGraph.tsx":["t",["CustomTooltip:34:({ active, payload }:CustomTooltipProps)::","ScoreHistoryGraph:51:({ history, currentChapter }:ScoreHistoryGraphProps)::"]],"portal/sr/components/layout/Navigation.tsx":["t",["Navigation:14:()::"]],"portal/sr/components/ui/badge.tsx":["t",["Badge:26:({ className, variant, asChild = false, ...props }:React.ComponentProps<'span'> & VariantProps<typeof badgeVariants> & { asChild?:::"]],"portal/sr/components/ui/button.tsx":["t",["Button:37:({ className, variant, size, asChild = false, ...props }:React.ComponentProps<'button'> & VariantProps<typeof buttonVariants> & { asChild?:::"]],"portal/sr/components/ui/card.tsx":["t",["Card:5:({ className, ...props }:React.ComponentProps<'div'>)::","CardHeader:18:({ className, ...props }:React.ComponentProps<'div'>)::","CardTitle:31:({ className, ...props }:React.ComponentProps<'div'>)::","CardDescription:41:({ className, ...props }:React.ComponentProps<'div'>)::","CardAction:51:({ className, ...props }:React.ComponentProps<'div'>)::","CardContent:61:({ className, ...props }:React.ComponentProps<'div'>)::","CardFooter:65:({ className, ...props }:React.ComponentProps<'div'>)::"]],"portal/sr/components/ui/input.tsx":["t",["Input:5:({ className, type, ...props }:React.ComponentProps<'input'>)::"]],"portal/sr/components/ui/progress.tsx":["t",["Progress:8:({ className, value, ...props }:React.ComponentProps<typeof ProgressPrimitive.Root>)::"]],"portal/sr/hooks/use-admin-data.ts":["t",["useIsAdmin:15:()::","useSystemOverview:27:()::","useJobStatus:40:()::","useAdminUsers:53:(filters:UserListFilters = {})::","useAdminUserDetail:66:(userId:string | null)::","useStateMachines:79:(userId:string | null)::","useVoiceConversations:96:(limit = 50, offset = 0, userId?:string)::","useVoiceConversationDetail:109:(conversationId:string | null)::","useVoiceStats:122:()::","useElevenLabsCalls:135:(limit = 30)::","useElevenLabsCallDetail:148:(conversationId:string | null)::","useTextConversations:165:(limit = 50, offset = 0, userId?:string)::","useTextConversationDetail:178:(conversationId:string | null)::","useTextStats:191:()::","usePipelineStatus:204:(conversationId:string | null)::","useThreads:217:(userId:string | null, limit = 50)::","useThoughts:230:(userId:string | null, limit = 50)::","useUserPrompts:247:(userId:string | null, limit = 20)::","usePromptDetail:260:(promptId:string | null)::","useLatestPrompt:273:(userId:string | null)::"]],"portal/sr/hooks/use-dashboard-data.ts":["t",["useUserStats:7:()::","useEngagement:16:()::","useVices:25:()::","useConversations:34:(limit = 10)::","useDailySummary:43:(date:string)::","useDecayStatus:52:()::","useScoreHistory:61:(days = 30)::"]],"portal/sr/proxy.ts":["t",["proxy:13:async (request:NextRequest)::"]],"t/agents/text/test_agent.py":["p",{"TestNikitaAgentConfiguration":["16",["test_agent_module_importable:19:(self)::Agent module should be importable without API key.","test_ac_1_3_1_model_name_constant:27:(self)::AC-1.3.1: MODEL_NAME is anthropic:claude-sonnet-4-5-20250929.","test_ac_1_3_2_uses_nikita_deps:34:(self)::AC-1.3.2: Agent has deps_type=NikitaDeps."]],"TestNikitaAgentSystemPrompt":["47",["test_ac_1_3_3_system_prompt_includes_persona:51:async (self)::AC-1.3.3: System prompt includes NIKITA_PERSONA.","test_ac_1_3_3_system_prompt_includes_chapter_behavior:69:async (self)::AC-1.3.3: System prompt includes CHAPTER_BEHAVIORS.","test_ac_1_3_3_system_prompt_includes_memory_context:86:async (self)::AC-1.3.3: System prompt includes memory context.","test_system_prompt_varies_by_chapter:102:async (self)::System prompt should change based on chapter."]],"TestNikitaAgentInvocation":["122",["test_ac_1_3_4_agent_has_run_method:125:(self)::AC-1.3.4: Agent should have a run method.","test_agent_run_is_async:137:(self)::Agent.run should be an async method."]],"TestGenerateResponse":["151",["test_generate_response_exists:154:(self)::generate_response function should exist.","test_generate_response_is_async:161:async (self)::generate_response should be async."]]}],"t/agents/text/test_chapter_behavior.py":["p",{"TestChapterBehaviorInjection":["17",["test_ac_3_2_1_ch1_prompt_contains_eager_behavior:21:async (self)::AC-3.2.1: Ch1 prompts should contain excited/eager behaviors (NEW DESIGN).","test_ac_3_2_1_ch1_response_rate_in_prompt:39:async (self)::AC-3.2.1: Ch1 prompt should mention 95% response rate (NEW DESIGN).","test_ac_3_2_2_ch3_prompt_contains_vulnerable_behavior:55:async (self)::AC-3.2.2: Ch3 prompts should contain emotionally vulnerable behaviors.","test_ac_3_2_2_ch3_response_rate_in_prompt:74:async (self)::AC-3.2.2: Ch3 prompt should mention 88% response rate.","test_ac_3_2_3_ch5_prompt_contains_stable_behavior:89:async (self)::AC-3.2.3: Ch5 prompts should contain stable/authentic behaviors.","test_ac_3_2_3_ch5_response_rate_in_prompt:107:async (self)::AC-3.2.3: Ch5 prompt should mention 82% response rate.","test_ac_3_2_4_prompts_differ_by_chapter:122:async (self)::AC-3.2.4: Different chapters should produce different prompts.","test_ac_3_2_4_prompt_has_current_chapter_behavior_label:140:async (self)::AC-3.2.4: Prompt should have labeled CURRENT CHAPTER BEHAVIOR section.","test_chapter_names_match_constants:155:async (self)::Chapter names in behavior should match CHAPTER_NAMES constant."]],"TestChapterBehaviorProgression":["173",["test_response_rate_decreases_through_chapters:177:async (self)::Response rate should decrease through chapters (NEW DESIGN).","test_emotional_openness_increases_through_chapters:201:async (self)::Emotional openness indicators should increase through chapters.","test_ch1_has_calibration_keywords:226:async (self)::Chapter 1 should focus on calibration/not overwhelming (NEW DESIGN).","test_ch5_has_stability_keywords:245:async (self)::Chapter 5 should focus on stability/security."]],"TestDefaultChapterBehavior":["264",["test_invalid_chapter_falls_back_to_ch1:268:async (self)::Invalid chapter numbers should fall back to Chapter 1 behavior.","test_chapter_6_falls_back_to_ch1:285:async (self)::Chapter 6 (non-existent) should fall back to default behavior."]]}],"t/agents/text/test_deps.py":["p",{"TestNikitaDepsStructure":["16",["test_is_dataclass:19:(self)::NikitaDeps should be a dataclass.","test_ac_1_2_1_has_memory_field:25:(self)::AC-1.2.1: NikitaDeps contains memory: NikitaMemory.","test_ac_1_2_2_has_user_field:32:(self)::AC-1.2.2: NikitaDeps contains user: User.","test_ac_1_2_3_has_settings_field:39:(self)::AC-1.2.3: NikitaDeps contains settings: Settings.","test_ac_1_2_5_type_hints_complete:46:(self)::AC-1.2.5: Type hints complete for Pydantic AI compatibility."]],"TestNikitaDepsProperties":["54",["test_ac_1_2_4_chapter_property:57:(self)::AC-1.2.4: chapter property returns user.chapter.","test_chapter_property_follows_user_changes:75:(self)::Chapter property should reflect user.chapter changes."]],"TestNikitaDepsInstantiation":["96",["test_can_instantiate_with_mocks:99:(self)::Should be able to create NikitaDeps with mock objects.","test_requires_all_fields:117:(self)::Should require all fields to instantiate."]]}],"t/agents/text/test_factory.py":["p",{"TestGetNikitaAgentForUser":["16",["test_function_exists:19:(self)::Factory function should exist and be importable.","test_ac_1_4_1_accepts_user_id:26:async (self)::AC-1.4.1: Function accepts user_id: UUID parameter.","test_function_is_async:35:async (self)::Factory function should be async.","test_ac_1_4_4_returns_tuple_with_deps:43:async (self)::AC-1.4.4: Function returns tuple (Agent, NikitaDeps).","test_ac_1_4_2_loads_user:77:async (self)::AC-1.4.2: Function loads user from database.","test_ac_1_4_3_initializes_memory:98:async (self)::AC-1.4.3: Function initializes NikitaMemory for user.","test_ac_1_4_5_handles_user_not_found:119:async (self)::AC-1.4.5: Function handles user not found with appropriate error."]]}],"t/agents/text/test_timing.py":["p",["mock_production_settings:76:()::","mock_development_settings:84:()::"],{"TestTimingRanges":["17",["test_timing_module_importable:20:(self)::Timing module should be importable.","test_ac_4_1_1_timing_ranges_is_dict:27:(self)::AC-4.1.1: TIMING_RANGES should be a dict mapping chapter to (min, max).","test_ac_4_1_2_ch1_range:46:(self)::AC-4.1.2: Ch1 range should be 600-28800s (10min-8h).","test_ac_4_1_3_ch5_range:57:(self)::AC-4.1.3: Ch5 range should be 300-1800s (5min-30min).","test_ranges_for_all_chapters:68:(self)::All 5 chapters should have timing ranges defined."]],"TestResponseTimer":["92",["test_response_timer_class_exists:95:(self)::ResponseTimer class should exist.","test_ac_4_1_4_calculate_delay_returns_int:101:(self):mock_production_settings:AC-4.1.4: calculate_delay(chapter) should return int seconds in production.","test_calculate_delay_within_chapter_range:112:(self):mock_production_settings:calculate_delay should return values within the chapter's range in production.","test_ac_4_1_5_distribution_not_uniform:128:(self):mock_production_settings:AC-4.1.5: Distribution should be gaussian (clustered around mean) in production.","test_ac_4_1_6_jitter_prevents_exact_patterns:153:(self):mock_production_settings:AC-4.1.6: Random jitter should prevent exact repetition in production.","test_invalid_chapter_uses_default:167:(self):mock_production_settings:Invalid chapter should fall back to a default range in production.","test_development_mode_returns_zero:183:(self):mock_development_settings:Development mode should bypass delays and return 0.","test_debug_mode_returns_zero:194:(self)::Debug mode should bypass delays and return 0."]],"TestTimingProgression":["208",["test_timing_reduces_through_chapters:211:(self)::Response timing ranges should reduce as chapters progress.","test_average_delay_decreases_through_chapters:222:(self):mock_production_settings:Average delays should decrease through chapters in production."]],"TestTimingRangesByChapter":["241",["test_ch2_timing_range:244:(self)::Ch2 should have range 300-14400s (5min-4h).","test_ch3_timing_range:255:(self)::Ch3 should have range 300-7200s (5min-2h).","test_ch4_timing_range:266:(self)::Ch4 should have range 300-3600s (5min-1h)."]]}],"t/api/dependencies/test_auth_admin.py":["p",["mock_settings:22:()::","mock_settings_with_allowlist:31:()::","make_token:40:(mock_settings):_make:"],{"TestGetCurrentAdminUser":["54",["test_admin_email_returns_user_id:58:async (self, mock_settings, make_token):make_token:AC-FR001-001: @silent-agents.com email grants admin access.","test_admin_email_subdomain_access:70:async (self, mock_settings, make_token):make_token:AC-FR001-001: Any @silent-agents.com email works (e.g., dev@silent-agents.com).","test_non_admin_email_raises_403:82:async (self, mock_settings, make_token):make_token:AC-FR001-002: Other emails receive 403 Forbidden.","test_similar_domain_raises_403:95:async (self, mock_settings, make_token):make_token:AC-FR001-002: Similar domains like silent-agents.com.fake are rejected.","test_no_email_in_token_raises_403:107:async (self, mock_settings)::Token without email claim should raise 403.","test_invalid_token_raises_401:126:async (self, mock_settings)::Invalid token should raise 401 Unauthorized.","test_expired_token_raises_401:137:async (self, mock_settings)::Expired token should raise 401."]],"TestAdminAllowlist":["158",["test_explicit_admin_email_grants_access:162:async (self, mock_settings_with_allowlist)::Email in admin_emails allowlist grants admin access.","test_explicit_admin_email_case_insensitive:179:async (self, mock_settings_with_allowlist)::Admin email matching is case-insensitive.","test_non_allowlisted_email_raises_403:196:async (self, mock_settings_with_allowlist)::Email not in allowlist and not @silent-agents.com raises 403.","test_domain_still_works_with_allowlist:214:async (self, mock_settings_with_allowlist)::@silent-agents.com still works even when allowlist is configured."]]}],"t/api/routes/test_onboarding.py":["p",["mock_user:18:()::","mock_user_repo:29:(mock_user)::","app:37:(mock_user_repo)::","client:47:(app)::"],{"TestPreCallWebhook":["52",["test_pre_call_returns_user_id_for_known_phone:57:(self, client, mock_user, mock_user_repo)::Pre-call webhook should return user_id for server tools.","test_pre_call_handles_unknown_phone_gracefully:75:(self, client, mock_user_repo)::Pre-call webhook should handle unknown phone gracefully.","test_pre_call_with_user_without_name:90:(self, client, mock_user, mock_user_repo)::Pre-call should use default name if user has no name in profile.","test_pre_call_handles_empty_request_body:106:(self, client, mock_user_repo)::Pre-call should handle empty/missing caller_id.","test_pre_call_finds_user_by_called_number_for_outbound:121:(self, client, mock_user, mock_user_repo)::"]]}],"t/api/routes/test_telegram.py":["p",["mock_settings_no_webhook_secret:19:()::"],{"TestTelegramWebhook":["31",["mock_bot:35:(self)::Mock TelegramBot.","mock_command_handler:43:(self)::Mock CommandHandler.","mock_message_handler:50:(self)::Mock MessageHandler.","mock_onboarding_handler:57:(self)::Mock OnboardingHandler.","mock_otp_handler:68:(self)::Mock OTPVerificationHandler.","app:84:(self, mock_bot, mock_command_handler, mock_message_handler, mock_onboarding_handler, mock_otp_handler,)::Create test FastAPI app with dependency overrides.","client:111:(self, app)::Create test client.","test_ac_fr001_001_webhook_receives_updates:115:(self, client)::","test_ac_t006_1_command_routed_to_command_handler:139:(self, client, mock_command_handler)::","test_ac_t006_2_text_routed_to_message_handler:164:(self, client, mock_message_handler)::","test_ac_t006_3_empty_update_handled_gracefully:187:(self, client)::","test_ac_t006_4_returns_200_quickly:200:(self, client)::","test_webhook_returns_ok_status:221:(self, client)::","test_edited_message_ignored:241:(self, client, mock_message_handler)::","test_callback_query_ignored:260:(self, client, mock_command_handler)::"]],"TestSetWebhook":["278",["mock_bot:282:(self)::Mock TelegramBot.","app:289:(self, mock_bot)::Create test FastAPI app with mocked bot.","client:301:(self, app)::Create test client.","test_set_webhook_endpoint_exists:305:(self, client, mock_bot)::","test_set_webhook_calls_bot:316:(self, client, mock_bot)::","test_set_webhook_requires_https:336:(self, client, mock_bot)::"]]}],"t/api/routes/test_voice.py":["p",["app:20:()::","client:28:(app)::","mock_user:34:()::","mock_voice_context:48:()::"],{"TestVoiceInitiateEndpoint":["60",["test_initiate_returns_connection_params:64:async (self, client, mock_user)::AC-T007.1: POST /api/v1/voice/initiate returns connection params.","test_initiate_requires_user_id:92:async (self, client)::AC-T007.2: Validates user authentication - user_id required.","test_initiate_invalid_user_id_format:102:async (self, client)::AC-T007.2: Validates user authentication - user_id must be valid UUID.","test_initiate_returns_403_for_game_over:112:async (self, client, mock_user)::AC-T007.3: Returns 403 if call not available (game_over).","test_initiate_returns_404_for_unknown_user:132:async (self, client)::Returns 404 if user not found.","test_initiate_handles_service_error:152:async (self, client, mock_user)::Returns 500 for unexpected service errors."]],"TestVoiceAvailabilityEndpoint":["170",["test_availability_returns_status:173:(self, client, mock_user)::AC-T034.1: Returns availability status with reason.","test_availability_returns_chapter_rate:211:(self, client, mock_user)::AC-T034.2: Returns chapter-based availability rate.","test_availability_returns_404_for_unknown_user:242:(self, client)::Returns 404 if user not found.","test_availability_shows_game_over_blocked:265:(self, client)::AC-T034.3: Game over status blocks calls.","test_availability_shows_boss_fight_available:304:(self, client)::AC-T034.3: Boss fight status always allows calls.","test_availability_invalid_uuid_format:343:(self, client)::Returns 422 for invalid UUID format."]],"TestWebhookPostProcessing":["350",["mock_user:354:(self)::Create a mock user.","valid_signature:364:(self)::Create valid HMAC signature for testing.","test_webhook_processes_transcript:399:(self, client, mock_user)::AC-FR015-001: Webhook stores transcript and triggers post-processing.","test_webhook_skips_without_user_id:480:(self, client)::Webhook skips processing if no user_id in metadata.","test_webhook_handles_unknown_user:526:(self, client)::Webhook skips processing if user not found.","test_webhook_normalizes_agent_role:590:(self, client, mock_user):capture_add:Webhook normalizes 'agent' role to 'nikita'.","capture_add:626:(conv)::","test_webhook_caches_prompt_for_next_call:681:(self, client, mock_user):capture_cached_prompt:","capture_cached_prompt:722:(val)::"]],"TestPreCallWebhook":["793",["test_pre_call_returns_conversation_initiation_data:800:(self, client, mock_user)::AC-T078.1: POST /api/v1/voice/pre-call handles pre-call webhook.","test_pre_call_unknown_caller_returns_dynamic_variables:854:(self, client)::","test_pre_call_unavailable_user_returns_dynamic_variables:902:(self, client, mock_user)::","test_pre_call_validates_request_schema:948:(self, client)::Validates ElevenLabs sends all required fields (caller_id, agent_id, etc.).","test_pre_call_response_format:983:(self, client, mock_user)::"]]}],"t/api/routes/test_voice_webhook.py":["p",["app:24:()::","client:32:(app)::","webhook_secret:38:()::","mock_settings:44:(webhook_secret)::","create_webhook_signature:51:(payload:str, secret::int | None = None)>str::Create valid HMAC signature for testing."],{"TestWebhookSignatureValidation":["63",["test_valid_signature_accepted:66:(self, client, webhook_secret):create_webhook_signature:AC-T054.1: Valid signature format accepted.","test_missing_signature_rejected:93:(self, client)::AC-T054.4: Missing signature returns 401.","test_invalid_signature_rejected:106:(self, client, webhook_secret)::AC-T054.3: Invalid signature returns 401.","test_expired_timestamp_rejected:127:(self, client, webhook_secret):create_webhook_signature:AC-T054.2: Timestamps older than 5 minutes rejected."]],"TestWebhookHandler":["151",["test_post_call_transcription_stored:154:(self, client, webhook_secret):create_webhook_signature:AC-FR015-001: Transcript stored when post_call_transcription received.","test_call_initiation_failure_logged:194:(self, client, webhook_secret):create_webhook_signature:AC-T053.4: call_initiation_failure events logged.","test_extracts_session_metadata:227:(self, client, webhook_secret):create_webhook_signature:AC-T053.3: Extracts transcript and session metadata.","test_unknown_event_type_handled:278:(self, client, webhook_secret):create_webhook_signature:Unknown event types should be logged but not cause errors."]]}],"t/conftest.py":["p",["clear_singleton_caches:21:()::"]],"t/context/test_post_processor.py":["p",["mock_meta_prompt_service:38:():_mock_generator:"],{"TestPostProcessorBasics":["67",["mock_session:71:(self)>AsyncMock::Create a mock AsyncSession.","mock_conversation:77:(self)>MagicMock::Create a mock Conversation with messages.","mock_extraction_response:95:(self)>str::Create a mock LLM extraction response.","test_process_conversation_full_pipeline_success:128:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, mock_meta_prompt_service,):mock_meta_prompt_service:AC-1: process_conversation() runs all 8 stages on success.","test_process_conversation_not_found_fails:195:async (self, mock_session:AsyncMock)::AC-2: process_conversation() fails gracefully when not found.","test_process_conversation_no_messages_fails:214:async (self, mock_session:AsyncMock)::AC-3: process_conversation() fails when conversation has no messages.","test_stage_ingestion_loads_conversation:236:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-4: _stage_ingestion() returns conversation when found."]],"TestExtractionStage":["252",["mock_session:256:(self)>AsyncMock::","mock_conversation:261:(self)>MagicMock::","test_stage_extraction_parses_llm_response:277:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, mock_meta_prompt_service):mock_meta_prompt_service:AC-5: _stage_extraction() correctly parses structured JSON response.","test_stage_extraction_handles_parse_error:312:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, mock_meta_prompt_service):mock_meta_prompt_service:AC-6: _stage_extraction() returns defaults when extraction returns empty data.","test_format_messages:334:(self, mock_session:AsyncMock)::Test _format_messages correctly formats conversation."]],"TestThreadAndThoughtCreation":["353",["mock_session:357:(self)>AsyncMock::","mock_conversation:362:(self)>MagicMock::","test_stage_create_threads_creates_from_extraction:374:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-7: _stage_create_threads() creates threads from extraction data.","test_stage_create_threads_resolves_existing:407:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-7b: _stage_create_threads() resolves marked thread IDs.","test_stage_create_thoughts_creates_from_extraction:435:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-8: _stage_create_thoughts() creates thoughts from extraction data."]],"TestSummaryRollups":["461",["mock_session:465:(self)>AsyncMock::","mock_conversation:470:(self)>MagicMock::","mock_extraction_result:477:(self)::Create a mock ExtractionResult.","test_stage_summary_rollups_creates_new:503:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, mock_extraction_result,)::AC-9: _stage_summary_rollups() creates new daily summary when none exists.","test_stage_summary_rollups_updates_existing:535:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, mock_extraction_result,)::AC-10: _stage_summary_rollups() updates existing daily summary."]],"TestPipelineStatusMarking":["568",["mock_session:572:(self)>AsyncMock::","test_pipeline_marks_processed_on_success:580:async (self, mock_session:AsyncMock, mock_meta_prompt_service):mock_meta_prompt_service:AC-11: Pipeline calls mark_processed on successful completion.","test_pipeline_marks_failed_on_error:643:async (self, mock_session:AsyncMock)::AC-12: Pipeline calls mark_failed when an error occurs."]],"TestConvenienceFunction":["680",["mock_session:684:(self)>AsyncMock::","test_convenience_function_processes_multiple:694:async (self, mock_session:AsyncMock)::AC-13: process_conversations() processes list of conversation IDs."]],"TestPipelineDataclasses":["745",["test_pipeline_result_defaults:748:(self)::Test PipelineResult has correct defaults.","test_extraction_result_structure:765:(self)::Test ExtractionResult structure."]],"TestThreadTypeValidation":["787",["mock_session:795:(self)>AsyncMock::","mock_conversation:800:(self)>MagicMock::","test_stage_create_threads_filters_invalid_types:809:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T3.1: Invalid thread_types are filtered out.","test_invalid_thread_types_never_reach_db:872:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, invalid_type:str)::AC-T3.2: Parametrized test for various invalid thread types.","test_valid_thread_types_pass_through:901:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T3.3: Valid thread_types pass through correctly."]],"TestThoughtTypeValidation":["935",["mock_session:942:(self)>AsyncMock::","mock_conversation:947:(self)>MagicMock::","test_stage_create_thoughts_filters_invalid_types:956:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T4.1: Invalid thought_types are filtered out.","test_invalid_thought_types_never_reach_db:1014:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, invalid_type:str)::AC-T4.2: Parametrized test for various invalid thought types.","test_valid_thought_types_pass_through:1039:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T4.3: Valid thought_types pass through correctly."]],"TestMetaPromptThreadTypeAcceptance":["1070",["mock_session:1080:(self)>AsyncMock::","mock_conversation:1085:(self)>MagicMock::","test_metaprompt_thread_types_are_valid:1101:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, thread_type:str)::AC-T3.4: MetaPrompt thread types are accepted by THREAD_TYPES.","test_all_metaprompt_thread_types_pass_through_pipeline:1114:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T3.5: All 5 MetaPrompt thread types pass through post-processor."]],"TestMetaPromptThoughtTypeAcceptance":["1154",["mock_session:1164:(self)>AsyncMock::","mock_conversation:1169:(self)>MagicMock::","test_metaprompt_thought_types_are_valid:1185:async (self, mock_session:AsyncMock, mock_conversation:MagicMock, thought_type:str)::AC-T4.4: MetaPrompt thought types are accepted by THOUGHT_TYPES.","test_all_metaprompt_thought_types_pass_through_pipeline:1198:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::AC-T4.5: All 5 MetaPrompt thought types pass through post-processor."]],"TestThoughtTypeKeyExtraction":["1234",["mock_session:1242:(self)>AsyncMock::","mock_conversation:1247:(self)>MagicMock::","test_extraction_reads_thought_type_key_not_type:1260:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::"]],"TestThreadResolutionDetection":["1308",["mock_session:1312:(self)>AsyncMock::","mock_conversation:1317:(self)>MagicMock::Create a mock Conversation.","test_extraction_passes_open_threads_to_meta_service:1334:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::Test that open threads are loaded and passed to MetaPromptService.","test_extraction_parses_resolved_thread_ids:1380:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::Test that resolved_thread_ids from LLM are parsed and returned.","test_extraction_handles_invalid_thread_ids_gracefully:1414:async (self, mock_session:AsyncMock, mock_conversation:MagicMock)::Test that invalid UUID strings in resolved_thread_ids are skipped."]]}],"t/context/test_template_generator.py":["p",["mock_meta_prompt_service:134:():_mock_generator:"],{"TestTemplateGeneratorBasics":["156",["mock_session:160:(self)>AsyncMock::Create a mock AsyncSession.","mock_user:166:(self)>MagicMock::Create a mock User with default values.","test_generate_prompt_returns_string:185:async (self, mock_session:AsyncMock, mock_user:MagicMock, mock_meta_prompt_service):mock_meta_prompt_service:AC-1: generate_prompt() returns a string.","test_generate_prompt_user_not_found_raises:207:async (self, mock_session:AsyncMock)::","test_generate_prompt_contains_all_6_layers:237:async (self, mock_session:AsyncMock, mock_user:MagicMock, mock_meta_prompt_service):mock_meta_prompt_service:AC-3: generate_prompt() contains all 6 layers."]],"TestLayer1CoreIdentity":["259",["mock_session:263:(self)>AsyncMock::","test_layer1_core_identity_content:270:(self, mock_session:AsyncMock)::AC-4: Layer 1 contains core personality traits."]],"TestLayer2CurrentMoment":["294",["mock_session:298:(self)>AsyncMock::","base_user:303:(self)>MagicMock::","_create_context:317:(self, user:MagicMock, hour:int, hours_since_last:float,)::Helper to create TemplateContext with specific time settings.","test_layer2_time_of_day_variations:353:(self, mock_session:AsyncMock, base_user:MagicMock, hour:int, expected_context:str, expected_activity:str,):_create_context:AC-5: Layer 2 content varies by time of day.","test_layer2_gap_mood_variations:390:(self, mock_session:AsyncMock, base_user:MagicMock, hours_gap:float, expected_mood:str,):_create_context:AC-6: Layer 2 mood varies by gap since last interaction."]],"TestLayer3RelationshipState":["408",["mock_session:412:(self)>AsyncMock::","_create_context:421:(self, chapter:int, score:Decimal, game_status:str = \"active\",)::Helper to create TemplateContext with specific relationship settings.","test_layer3_chapter_variations:459:(self, mock_session:AsyncMock, chapter:int, chapter_name:str,):_create_context:AC-7a: Layer 3 shows correct chapter name and behaviors.","test_layer3_score_trend_variations:494:(self, mock_session:AsyncMock, score:Decimal, expected_text:str,):_create_context:AC-7b: Layer 3 shows score-based trend text.","test_layer3_boss_fight_status:511:(self, mock_session:AsyncMock):_create_context:AC-7c: Layer 3 shows boss fight note when in boss_fight.","test_layer3_game_over_status:528:(self, mock_session:AsyncMock):_create_context:AC-7d: Layer 3 shows game over note when ended."]],"TestLayer4ConversationHistory":["546",["mock_session:550:(self)>AsyncMock::","_create_context_with_history:560:(self, last_summary:str | None = None, today_summaries:list[str] | None = None, week_summaries:dict[str, str] | None = None, open_threads:dict[str, list[str]] | None = None,)::Helper to create TemplateContext with conversation history.","test_layer4_with_last_conversation:587:(self, mock_session:AsyncMock):_create_context_with_history:AC-8a: Layer 4 shows last conversation summary.","test_layer4_with_today_summaries:607:(self, mock_session:AsyncMock):_create_context_with_history:AC-8b: Layer 4 shows today's conversation summaries.","test_layer4_with_week_summaries:631:(self, mock_session:AsyncMock):_create_context_with_history:AC-8c: Layer 4 shows this week's summaries by day.","test_layer4_with_open_threads:655:(self, mock_session:AsyncMock):_create_context_with_history:AC-8d: Layer 4 shows open conversation threads."]],"TestLayer5KnowledgeInnerLife":["681",["mock_session:685:(self)>AsyncMock::","_create_context_with_knowledge:693:(self, user_facts:list[str] | None = None, active_thoughts:dict[str, list[str]] | None = None,)::Helper to create TemplateContext with knowledge and thoughts.","test_layer5_with_user_facts:718:(self, mock_session:AsyncMock):_create_context_with_knowledge:AC-9a: Layer 5 shows known facts about the user.","test_layer5_with_active_thoughts:744:(self, mock_session:AsyncMock):_create_context_with_knowledge:AC-9b: Layer 5 shows Nikita's active thoughts.","test_layer5_with_missing_him_thought:771:(self, mock_session:AsyncMock):_create_context_with_knowledge:AC-9c: Layer 5 shows missing_him thoughts appropriately."]],"TestLayer6ResponseGuidelines":["794",["mock_session:798:(self)>AsyncMock::","_create_context:807:(self, hour:int, hours_gap:float, chapter:int = 2,)::Helper to create TemplateContext for Layer 6 tests.","test_layer6_time_based_adjustments:845:(self, mock_session:AsyncMock, hour:int, expected_adjustment:str,):_create_context:AC-10a: Layer 6 adjusts for time of day.","test_layer6_gap_based_adjustments:877:(self, mock_session:AsyncMock, hours_gap:float, expected_adjustment:str,):_create_context:AC-10b: Layer 6 adjusts for gap since last interaction."]],"TestFullPromptVisualVerification":["895",["mock_session:899:(self)>AsyncMock::","rich_user:904:(self)>MagicMock::Create a user with rich context for full visual test.","sample_summaries:918:(self)>list[MagicMock]::Create sample daily summaries.","sample_conversations:947:(self)>list[MagicMock]::Create sample processed conversations.","sample_threads:971:(self)>dict[str, list[MagicMock]]::Create sample open threads.","sample_thoughts:989:(self)>dict[str, list[MagicMock]]::Create sample active thoughts.","test_full_prompt_generation_visual:1019:async (self, mock_session:AsyncMock, rich_user:MagicMock, sample_summaries:list[MagicMock], sample_conversations:list[MagicMock], sample_threads:dict[str, list[MagicMock]], sample_thoughts:dict[str, list[MagicMock]], mock_meta_prompt_service,):mock_meta_prompt_service:","test_convenience_function_generate_system_prompt:1071:async (self, mock_session:AsyncMock, rich_user:MagicMock,)::AC-11b: Convenience function works correctly."]],"TestEdgeCases":["1091",["mock_session:1095:(self)>AsyncMock::","basic_user:1100:(self)>MagicMock::","test_user_with_no_last_interaction:1112:async (self, mock_session:AsyncMock, basic_user:MagicMock, mock_meta_prompt_service):mock_meta_prompt_service:Edge case: User has never interacted before.","test_empty_context_still_generates_valid_prompt:1132:async (self, mock_session:AsyncMock, mock_meta_prompt_service):mock_meta_prompt_service:Edge case: All optional context is empty."]]}],"t/db/integration/conftest.py":["p",["test_database_url:29:()>str::","engine:41:(test_database_url:str)::Create async engine for tests.","session_maker:51:(engine)>async_sessionmaker[AsyncSession]::","session:61:async (session_maker)>AsyncGenerator[AsyncSession, None]:session_maker:","clean_session:75:async (session_maker)>AsyncGenerator[AsyncSession, None]:session_maker:","test_user_id:86:()>str::","test_telegram_id:92:()>int::"]],"t/e2e/conftest.py":["p",["event_loop:31:()::","backend_url:39:()>str::","webhook_url:48:(backend_url:str)>str::Get the webhook endpoint URL.","auth_confirm_url:54:(backend_url:str)>str::Get the auth confirm endpoint URL.","supabase_url:60:()>str::","test_email:69:()>str::","test_telegram_id:75:()>int::","browser_context:84:async ()::","page:99:async (browser_context)::","webhook_simulator:110:(webhook_url:str)>TelegramWebhookSimulator::Create a webhook simulator for testing.","unique_telegram_id:116:()>int::","unique_test_email:126:(unique_telegram_id:int)>str::Generate a unique test email based on Telegram ID.","test_data:132:()>WebhookTestData::","mock_agent:144:():mock_agent,test_something:","mock_mode:156:()>bool::","cleanup_pending_registration:165:async (unique_telegram_id:int)::","cleanup_test_user:186:async (unique_telegram_id:int)::"]],"t/e2e/full_journey/test_full_journey.py":["p",["run_manual_journey:293:()::"],{"TestFullJourneyE2E":["39",["orchestrator:43:(self)::Create journey orchestrator.","context:49:(self)::Create fresh journey context.","evidence:54:(self, context)::Create evidence collector.","test_context_creation:60:(self, orchestrator)::Test context is created with valid test IDs.","test_phase1_instructions_generated:69:(self, orchestrator, context)::Test Phase 1 instructions are complete.","test_phase2_instructions_generated:78:(self, orchestrator, context)::Test Phase 2 instructions include real messages.","test_phase3_instructions_generated:85:(self, orchestrator, context)::Test Phase 3 instructions include portal steps.","test_phase4_instructions_generated:94:(self, orchestrator, context)::Test Phase 4 instructions include verification.","test_cleanup_instructions_generated:101:(self, orchestrator, context)::Test cleanup instructions generated.","test_all_instructions_organized:108:(self, orchestrator, context)::Test all instructions are organized by phase.","test_evidence_phase_tracking:120:(self, evidence)::Test evidence tracks phases correctly.","test_evidence_verification_recording:131:(self, evidence)::Test evidence records verifications.","test_evidence_report_generation:145:(self, evidence)::Test report generation.","test_phase1_otp_extraction:164:(self)::Test Phase 1 OTP extraction.","test_phase2_sample_messages:179:(self)::Test Phase 2 has sample messages.","test_phase3_magic_link_extraction:186:(self)::Test Phase 3 magic link extraction.","test_phase4_chapter_calculation:200:(self)::Test Phase 4 chapter calculation."]],"TestJourneyManualExecution":["217",["orchestrator:226:(self)::","test_print_all_instructions:230:(self, orchestrator, capsys)::Print all instructions for manual execution.","test_cleanup_sql_generated:242:(self, orchestrator)::Test cleanup SQL is properly generated."]],"TestJourneyIntegration":["260",["orchestrator:268:(self)::","test_phase1_webhook_connectivity:274:async (self, orchestrator)::Test webhook endpoint is reachable."]]}],"t/e2e/helpers/gmail_helper.py":["p",["extract_magic_link_from_html:308:(html_content:str)>Optional[str]::","extract_tokens_from_url:322:(url:str)>dict::"],{"GmailMCPClient":["25",["__init__:35:(self, test_email:str)::","wait_for_otp:51:async (self, timeout_seconds:int = 90, poll_interval:float = 3.0, since_timestamp:Optional[float] = None, search_fn:Optional[Callable] = None, read_fn:Optional[Callable] = None,)>OTPEmail::","wait_for_magic_link:123:async (self, timeout_seconds:int = 60, poll_interval:float = 3.0, since_timestamp:Optional[float] = None, search_fn:Optional[Callable] = None, read_fn:Optional[Callable] = None,)>MagicLinkEmail::"]],"GmailHelper":["183",["__init__:189:(self, test_email:str)::","wait_for_magic_link:203:async (self, timeout_seconds:int = 60, poll_interval:float = 2.0, since_timestamp:Optional[float] = None)>str:_extract_magic_link,_get_latest_magic_link_email:","_get_latest_magic_link_email:249:async (self, since_timestamp:float)>Optional[str]::","_extract_magic_link:280:(self, email_content:str)>Optional[str]::"]]}],"t/e2e/helpers/mock_agent_helper.py":["p",["is_mock_mode:171:()>bool::","get_mock_response_for_message:188:(message:str)>str::"],{"MockAgentResponse":["24",[]],"MockAgentHelper":["32",["patch_generate_response:58:(cls, response_text:Optional[str] = None, delay_seconds:float = 0.0,):mock_generate,patch_generate_response:","mock_generate:74:async (*args, **kwargs)>str::","patch_message_handler:90:(cls, response_text:Optional[str] = None,):mock_handle:","mock_handle:98:async (*args, **kwargs)>None::","create_mock_deps:116:(cls, user_id:str = \"test-user-id\", telegram_id:int = 999888777, game_status:str = \"active\", chapter:int = 1, relationship_score:float = 50.0,)>MagicMock::","patch_get_nikita_agent_for_user:152:(cls, mock_deps:Optional[MagicMock] = None,):create_mock_deps,mock_get_agent:","mock_get_agent:157:async (user_id):create_mock_deps:"]]}],"t/e2e/helpers/supabase_helper.py":["p",["create_pending_sql:551:(telegram_id:int, email::sql_create_pending:Convenience function to create pending registration SQL.","cleanup_test_data_sql:556:(telegram_id:int, email:::Generate SQL to cleanup all test data.","verify_user_created_sql:572:(telegram_id:int)>str::Generate SQL to verify user was created.","verify_pending_deleted_sql:577:(email:str)>str::Generate SQL to verify pending registration was deleted."],{"PendingRegistration":["25",[]],"User":["34",[]],"Conversation":["44",[]],"ScoreHistoryEntry":["54",[]],"UserMetrics":["65",[]],"VerificationResult":["76",[]],"SupabaseHelper":["85",["__init__:88:(self)::Initialize Supabase helper.","sql_create_pending:99:(telegram_id:int, email:str)>str::Generate SQL to create a pending registration.","sql_get_pending_by_email:117:(email:str)>str::Generate SQL to get pending registration by email.","sql_delete_pending:127:(telegram_id:int)>str::Generate SQL to delete a pending registration.","sql_get_user_by_telegram_id:135:(telegram_id:int)>str::Generate SQL to get user by Telegram ID.","sql_get_user_by_supabase_id:147:(supabase_user_id:str)>str::Generate SQL to get user by Supabase user ID.","sql_delete_user_by_telegram_id:159:(telegram_id:int)>str::Generate SQL to delete user and related data by Telegram ID.","sql_count_users_by_telegram_id:172:(telegram_id:int)>str::Generate SQL to count users with a specific Telegram ID.","sql_update_user_telegram_id:184:(supabase_user_id:str, telegram_id:Optional[int])>str::Generate SQL to update user's Telegram ID.","sql_create_test_user:199:(user_id:str, telegram_id:Optional[int] = None, supabase_user_id:Optional[str] = None)>str::Generate SQL to create a test user (for portal-first scenario).","sql_get_conversations_by_user:218:(user_id:str)>str::Generate SQL to get all conversations for a user.","sql_get_conversations_by_telegram_id:229:(telegram_id:int)>str::Generate SQL to get all conversations for a user by Telegram ID.","sql_get_latest_conversation:241:(telegram_id:int)>str::Generate SQL to get the latest conversation for a user.","sql_get_conversation_messages:254:(conversation_id:str)>str::Generate SQL to get all messages in a conversation.","sql_count_messages_by_telegram_id:264:(telegram_id:int)>str::Generate SQL to count total messages for a user.","sql_get_user_metrics:277:(telegram_id:int)>str::Generate SQL to get full user metrics.","sql_get_score_history:289:(telegram_id:int, limit:int = 10)>str::Generate SQL to get score history for a user.","sql_get_latest_score:302:(telegram_id:int)>str::Generate SQL to get the latest score for a user.","sql_full_cleanup_by_telegram_id:315:(telegram_id:int)>str::Generate SQL to delete ALL data for a test user (comprehensive cleanup).","sql_full_cleanup_by_email:346:(email:str)>str::Generate SQL to delete ALL data for a test user by email.","sql_cleanup_test_range:373:(min_telegram_id:int = 900000000, max_telegram_id:int = 999999999)>str::Generate SQL to cleanup ALL test users in the test ID range.","sql_verify_registration_complete:412:(telegram_id:int)>str::Generate SQL to verify complete registration (user exists, pending deleted).","sql_verify_conversation_exists:424:(telegram_id:int)>str::Generate SQL to verify at least one conversation exists.","sql_get_test_users_count:439:()>str::Generate SQL to count test users in the test range.","generate_test_telegram_id:450:()>int::Generate a unique test Telegram ID in the 900M-999M range.","generate_test_user_id:457:()>str::Generate a unique test user UUID.","generate_test_email:462:(base_email:str, telegram_id:int)>str::","parse_mcp_result:478:(result:Any)>List[Dict[str, Any]]::","verify_registration_from_result:503:(result:Any)>VerificationResult:parse_mcp_result:"]]}],"t/e2e/helpers/telegram_helper.py":["p",["generate_test_telegram_id:218:()>int::","generate_test_email:227:(telegram_id:int)>str::Generate a test email address for a given Telegram ID."],{"TelegramUser":["28",[]],"TelegramChat":["39",[]],"TelegramWebhookSimulator":["48",["__init__:63:(self, webhook_url:str = WEBHOOK_URL, secret_token:Optional[str] = None,)::","_next_update_id:75:(self)>int::Generate next unique update ID.","_next_message_id:80:(self)>int::Generate next unique message ID.","_build_user:85:(self, telegram_id:int)>dict::Build Telegram user object.","_build_chat:96:(self, telegram_id:int)>dict::Build Telegram chat object (private chat = same ID as user).","_build_message:106:(self, telegram_id:int, text:str)>dict:_build_chat,_build_user,_next_message_id:Build Telegram message object.","_build_update:116:(self, telegram_id:int, text:str)>dict:_build_message,_next_update_id:","_build_command_update:131:(self, telegram_id:int, command:str, args:Optional[str] = None,)>dict:_build_update:","send_message:155:async (self, text:str, telegram_id:int, timeout:float = 30.0,)>httpx.Response:_build_headers,_build_update:","send_command:183:async (self, command:str, telegram_id:int, args:Optional[str] = None, timeout:float = 30.0,)>httpx.Response:_build_command_update,_build_headers:","_build_headers:206:(self)>dict::Build request headers including optional secret token."]],"WebhookTestData":["235",["create:242:(cls)>\"WebhookTestData\":generate_test_email,generate_test_telegram_id:Create new test data with unique IDs."]]}],"t/e2e/manual_journey_test.py":["p",["query_supabase:93:async (query:str, client:::Execute a raw SQL query via Supabase REST API.","call_backend:105:async (path:str, method::dict = None, client:httpx.AsyncClient = None)>dict::Call backend API endpoint.","main:129:async ():add_section,call_backend,generate_report,print_section:"],{"JourneyReport":["46",["__init__:49:(self)::","add_section:53:(self, title:str, content:dict)::","print_section:60:(self, title:str, data:Any)::Print a section immediately for real-time visibility.","generate_report:70:(self)>str::Generate final markdown report."]]}],"t/e2e/portal/conftest.py":["p",["login_page:22:()::","dashboard_page:28:()::","conversations_page:34:()::","test_email:40:()::"]],"t/e2e/test_otp_gmail_e2e.py":["p",["otp_test:247:()::","test_context:254:():create:","run_manual_otp_test:347:async ():create,step1_send_start,step2_send_email,step3_build_otp_search_query:","print_test_summary:405:(ctx:OTPTestContext)::Print test summary."],{"OTPTestContext":["51",["create:71:(cls, base_email:str = TEST_EMAIL_BASE)>\"OTPTestContext\"::Create a new test context with unique IDs."]],"OTPFlowE2ETest":["83",["__init__:107:(self, secret_token:Optional[str] = None)::Initialize E2E test orchestrator.","step1_send_start:113:async (self, ctx:OTPTestContext)>bool::Step 1: Send /start command to initiate registration.","step2_send_email:131:async (self, ctx:OTPTestContext)>bool::Step 2: Send email to trigger OTP.","step3_build_otp_search_query:155:(self, ctx:OTPTestContext)>str::","step3_parse_otp_from_email:167:(self, ctx:OTPTestContext, email_body:str)>Optional[str]::","step4_submit_otp:184:async (self, ctx:OTPTestContext)>bool::Step 4: Submit OTP code to complete registration.","step5_build_verification_query:206:(self, ctx:OTPTestContext)>str::","step5_verify_result:215:(self, ctx:OTPTestContext, result:Any)>VerificationResult::","build_cleanup_query:234:(self, ctx:OTPTestContext)>str::"]],"TestOTPFlowSteps":["259",["test_step1_start_command:263:async (self, otp_test, test_context):step1_send_start:Test /start command sends successfully.","test_step2_email_submission:269:async (self, otp_test, test_context):step1_send_start,step2_send_email:Test email submission sends successfully.","test_step3_otp_parsing:277:(self, otp_test, test_context):step3_parse_otp_from_email:Test OTP code extraction from email body.","test_step5_verification_parsing:293:(self, otp_test, test_context):create,step5_verify_result:Test verification result parsing."]],"TestOTPFlowIntegration":["308",["test_otp_flow_steps_1_and_2:323:async (self, otp_test, test_context):build_cleanup_query,step1_send_start,step2_send_email,step3_build_otp_search_query:Test steps 1-2: /start and email submission."]]}],"t/engine/decay/test_calculator.py":["p",["create_mock_user:25:(*, chapter:int = 1, relationship_score::datetime | None = None, game_status:str = \"active\",)>MagicMock::Create a mock user with specified attributes."],{"TestDecayCalculatorIsOverdue":["36",["test_is_overdue_no_interaction_returns_true:39:(self):create_mock_user:User with no last_interaction_at is considered overdue.","test_is_overdue_within_grace_returns_false:46:(self):create_mock_user:User within grace period is NOT overdue.","test_is_overdue_past_grace_returns_true:55:(self):create_mock_user:User past grace period IS overdue.","test_is_overdue_just_inside_grace_returns_false:64:(self):create_mock_user:User just inside grace period is NOT overdue.","test_is_overdue_respects_chapter_grace_periods:84:(self, chapter:int, grace_hours:int):create_mock_user:Each chapter has correct grace period from GRACE_PERIODS."]],"TestDecayCalculatorCalculateDecay":["99",["test_calculate_decay_within_grace_returns_none:102:(self):create_mock_user:No decay if user is within grace period.","test_calculate_decay_past_grace_returns_decay_result:116:(self):create_mock_user:Returns DecayResult when user is past grace.","test_calculate_decay_correct_amount_ch1:134:(self):create_mock_user:Ch1: 2h overdue \u00d7 0.8%/h = 1.6% decay.","test_calculate_decay_correct_amount_ch1_10h_overdue:155:(self):create_mock_user:Ch1: 10h overdue \u00d7 0.8%/h = 8.0% decay.","test_calculate_decay_uses_chapter_specific_rates:185:(self, chapter:int, rate:Decimal):create_mock_user:Each chapter uses correct decay rate from DECAY_RATES.","test_calculate_decay_capped_at_max:206:(self):create_mock_user:Decay capped at MAX_DECAY_PER_CYCLE (default 20%).","test_calculate_decay_configurable_max:226:(self):create_mock_user:Max decay can be configured.","test_calculate_decay_floor_at_zero:246:(self):create_mock_user:Score floors at 0 when decay exceeds score.","test_calculate_decay_game_over_triggered_at_zero:267:(self):create_mock_user:game_over_triggered is True when score reaches 0.","test_calculate_decay_no_game_over_when_score_above_zero:285:(self):create_mock_user:game_over_triggered is False when score remains above 0.","test_calculate_decay_includes_hours_overdue:304:(self):create_mock_user:DecayResult includes hours_overdue for audit trail.","test_calculate_decay_includes_timestamp:322:(self):create_mock_user:DecayResult includes calculation timestamp.","test_calculate_decay_sets_decay_reason:342:(self):create_mock_user:DecayResult includes decay_reason='inactivity'."]],"TestDecayCalculatorDefaultMaxDecay":["359",["test_default_max_decay_is_20:362:(self)::Default MAX_DECAY_PER_CYCLE is 20%.","test_custom_max_decay_accepted:368:(self)::Custom max_decay_per_cycle is accepted."]]}],"t/engine/decay/test_processor.py":["p",["create_mock_user:29:(*, user_id=None, chapter:int = 1, relationship_score::datetime | None = None, game_status:str = \"active\",)>MagicMock::Create a mock user with specified attributes."],{"TestDecayProcessorShouldSkipUser":["40",["test_skip_boss_fight_status:44:async (self):create_mock_user:AC-T7.2: Skip users in boss_fight status.","test_skip_game_over_status:58:async (self):create_mock_user:AC-T7.2: Skip users in game_over status.","test_skip_won_status:72:async (self):create_mock_user:AC-T7.2: Skip users in won status.","test_process_active_status:86:async (self):create_mock_user:AC-T5.2: Process users with active status."]],"TestDecayProcessorProcessUser":["100",["test_process_user_applies_decay_when_overdue:104:async (self):create_mock_user:AC-T5.4: Apply decay to users past grace period.","test_process_user_returns_none_when_within_grace:134:async (self):create_mock_user:AC-T5.4: No decay for users within grace period.","test_process_user_logs_decay_event:162:async (self):create_mock_user:AC-T6.1: Log decay event to score_history.","test_process_user_skips_boss_fight:193:async (self):create_mock_user:AC-T7.1/T7.2: Skip users in boss_fight status."]],"TestDecayProcessorProcessAll":["221",["test_process_all_returns_summary:225:async (self):create_mock_user:AC-T5.5: Return summary with processed, decayed, game_overs counts.","test_process_all_filters_inactive_statuses:267:async (self)::AC-T5.2: Filter out boss_fight, game_over, won statuses.","test_process_all_tracks_game_overs:290:async (self):create_mock_user:AC-T5.5: Track game_overs count in summary."]],"TestDecayProcessorBatchSize":["328",["test_default_batch_size:332:async (self)::AC-T5.3: Default batch size is reasonable.","test_configurable_batch_size:345:async (self)::AC-T5.3: Batch size is configurable."]],"TestDecayProcessorNoCatchUp":["359",["test_no_catch_up_decay_after_boss_resolved:363:async (self):create_mock_user:AC-T7.3: No catch-up on missed decay after boss resolved."]]}],"t/platforms/telegram/test_message_handler.py":["p",["mock_text_patterns:26:():passthrough:"],{"TestMessageHandler":["41",["mock_user_repository:45:(self)::Mock UserRepository for testing.","mock_conversation_repository:51:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:63:(self)::Mock text agent MessageHandler.","mock_response_delivery:69:(self)::Mock ResponseDelivery for testing.","mock_bot:75:(self)::Mock TelegramBot for testing.","handler:88:(self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot,)::Create MessageHandler instance with mocked dependencies.","sample_message:99:(self)::Create sample Telegram message for testing.","test_ac_fr002_001_authenticated_user_message_routed_to_text_agent:111:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_1_handle_processes_text_messages:143:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_2_checks_authentication_prompts_registration:171:async (self, handler, mock_user_repository, mock_bot, sample_message)::","test_ac_t015_4_routes_to_text_agent_with_user_context:194:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_5_queues_response_for_delivery:224:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_response_delivery, sample_message)::","test_skip_response_not_queued:259:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_response_delivery, sample_message)::","test_typing_indicator_sent_before_processing:289:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_bot, sample_message)::","test_empty_message_handled_gracefully:315:async (self, handler, mock_user_repository, mock_bot)::","test_ac_t025_1_minute_limit_sends_in_character_response:345:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_1_daily_limit_sends_in_character_response:389:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_2_warning_when_approaching_daily_limit:433:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_3_no_harsh_technical_error_messages:483:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_rate_limiting_disabled_when_no_limiter_configured:522:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::"]],"TestScoringIntegration":["557",["mock_user_repository:561:(self)::Mock UserRepository for testing.","mock_conversation_repository:569:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:580:(self)::Mock text agent MessageHandler.","mock_response_delivery:586:(self)::Mock ResponseDelivery for testing.","mock_bot:592:(self)::Mock TelegramBot for testing.","mock_scoring_service:598:(self)::Mock ScoringService for testing.","sample_message:604:(self)::Create sample Telegram message for testing.","mock_user_with_metrics:614:(self)::Create mock user with metrics for scoring tests.","test_b2_scoring_called_after_response:637:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_user_score_updated_when_delta_nonzero:692:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_boss_threshold_triggers_boss_fight_status:747:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_boss_opening_message_sent:808:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_scoring_failure_does_not_break_message_flow:875:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_no_scoring_when_should_respond_false:915:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::"]],"TestProfileGate":["950",["mock_user_repository:954:(self)::Mock UserRepository for testing.","mock_conversation_repository:960:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:970:(self)::Mock text agent MessageHandler.","mock_response_delivery:976:(self)::Mock ResponseDelivery for testing.","mock_bot:982:(self)::Mock TelegramBot for testing.","mock_profile_repository:988:(self)::Mock ProfileRepository for testing.","mock_backstory_repository:994:(self)::Mock BackstoryRepository for testing.","mock_onboarding_handler:1000:(self)::Mock OnboardingHandler for testing.","sample_message:1006:(self)::Create sample Telegram message for testing.","test_fr012_profile_gate_passes_when_profile_and_backstory_exist:1026:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_redirects_when_profile_missing:1076:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_redirects_when_backstory_missing:1122:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_skipped_when_repos_not_configured:1164:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message,)::"]]}],"t/platforms/telegram/test_rate_limiter.py":["p",["mock_cache:21:()::","rate_limiter:31:(mock_cache)::"],{"TestRateLimiter":["36",["test_ac_fr006_001_rate_limit_hit_after_20_messages_per_minute:44:async (self, rate_limiter, mock_cache,)::","test_ac_t024_1_check_returns_rate_limit_status:72:async (self, rate_limiter, mock_cache,)::","test_ac_t024_2_tracks_per_minute_and_per_day_limits:93:async (self, rate_limiter, mock_cache,):mock_incr:","mock_incr:272:async (key)::","test_ac_fr006_002_warning_when_approaching_daily_limit:127:async (self, rate_limiter, mock_cache,):mock_incr:","test_daily_limit_exceeded_blocks_message:156:async (self, rate_limiter, mock_cache,):mock_incr:","test_ac_t024_4_keys_expire_appropriately:183:async (self, rate_limiter, mock_cache,)::","test_ac_fr006_003_rate_limit_resets_after_cooldown:208:async (self, rate_limiter, mock_cache,)::","test_ac_t024_3_get_remaining_returns_quota_info:234:async (self, rate_limiter, mock_cache,):mock_get:","mock_get:241:async (key)::","test_multiple_users_isolated:262:async (self, rate_limiter, mock_cache,):mock_incr:","test_edge_case_exactly_20_messages_allowed:299:async (self, rate_limiter, mock_cache,)::"]]}],"t/platforms/telegram/test_session_integration.py":["p",["mock_user_repository:24:()::","mock_text_agent_handler:32:()::","mock_response_delivery:40:()::","mock_bot:48:()::","mock_conversation_repository:57:()::","message_handler:79:(mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot,)::"],{"TestSessionPersistence":["90",["test_ac_fr005_001_context_maintained_across_multiple_messages:104:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::","test_ac_fr005_002_context_restored_after_time_gap:191:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::","test_ac_fr005_003_no_cross_user_contamination:241:async (self, message_handler, mock_user_repository, mock_text_agent_handler,):get_user_by_telegram_id,handle_message:","get_user_by_telegram_id:257:async (telegram_id:int)::","handle_message:269:async (user_id, text)::","test_session_isolation_via_user_id_scoping:332:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::"]]}]},"g":[["MockAgentHelper.patch_generate_response","mock_generate"],["GeneratedPromptRepository.__init__","VoiceAgentConfig.__init__"],["compose_emotional_state_layer","Layer2Composer.compose"],["NikitaThoughtRepository.__init__","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","VoiceOnboardingFlow.__init__"],["GeneratedPromptRepository.__init__","VoiceService.__init__"],["ConversationsPage.__init__","Layer2Composer.__init__"],["ProfileRepository.update_from_onboarding","PendingRegistrationRepository.get"],["TelegramWebhookSimulator._build_update","_next_update_id"],["GeneratedPromptRepository.__init__","EntityManager.__init__"],["OnboardingStateRepository.get_or_create","UserRepository.get"],["count_tokens","count_tokens"],["UserMetricsRepository.__init__","LayerComposer.__init__"],["VicePreferenceRepository.__init__","PendingRegistrationRepository.__init__"],["compose_chapter_layer","Layer3Composer.compose"],["JobExecutionRepository.__init__","ConversationsE2ETest.__init__"],["UserMetricsRepository.update_metrics","UserMetricsRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer6Handler.__init__"],["UserRepository.update_score","UserRepository.get"],["LoginPage.__init__","Layer3Composer.__init__"],["BackstoryRepository.__init__","DeliveryResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestUserMetricsRepository.__init__"],["VoiceOnboardingFlow.get_current_step_message","_get_onboarding_state"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreAnalyzer.__init__"],["TestMoodDerivation.mock_session_context","Phase4GameState.__init__"],["UserRepository.__init__","Layer2Composer.__init__"],["UserMetricsRepository.__init__","MetaInstructionEngine.__init__"],["atomic","atomic"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestMoodDerivation.__init__"],["UserRepository.advance_chapter","BaseRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictStore.__init__"],["EngagementStateRepository.__init__","EmojiProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageHandler.__init__"],["TouchpointScheduler._evaluate_time_trigger","_get_initiation_rate"],["OnboardingStateRepository.delete","TouchpointStore.delete"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig.generate_system_prompt"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InMemoryCache.__init__"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step4_db_query"],["UserNotFoundError.__init__","HandoffManager.__init__"],["GeneratedPromptRepository.__init__","ExperimentLoader.__init__"],["VoiceService.end_call","end_session"],["BackstoryGeneratorService.generate_scenarios","BackstoryGeneratorService._build_scenario_prompt"],["ProfileCollector.get_completeness_percentage","ProfileCollector.get_profile"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StrategicSilence.__init__"],["LoginPage.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BasePage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer3Composer.__init__"],["ConversationThreadRepository.__init__","EngagementStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","JourneyReport.__init__"],["BackstoryRepository.__init__","TouchpointEngine.__init__"],["UserRepository.__init__","ScheduledEventRepository.__init__"],["HandoffManager.execute_handoff","_send_first_message"],["UserRepository.update_onboarding_profile","PendingRegistrationRepository.get"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","navigate_and_get_content"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DeliveryResult.__init__"],["TextPatternProcessor.process","TextPatternProcessor._context_to_emoji_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VicePreferenceRepository.__init__"],["MessageHandler.handle","MessageHandler._get_or_create_conversation"],["WebhookTestData.create","generate_test_email"],["ProfileRepository.__init__","ProfileRepository.__init__"],["TestContextPackagePopulation.mock_session_context","ConversationsE2ETest.__init__"],["MetaPromptContext.get_backstory_summary","BackstoryContext.has_backstory"],["ProfileRepository.__init__","MessageSplitter.__init__"],["BaseRepository.update","get"],["LoginPage.__init__","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer4Computer.__init__"],["ScoreHistoryRepository.__init__","ProfileRepository.__init__"],["StateStore.get_state","StateStore._row_to_state"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DatabaseRateLimiter.__init__"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","TestBaseRepositorySubclassing.custom_method"],["DashboardPage.__init__","LayerComposer.__init__"],["NikitaThoughtRepository.__init__","TestVicePreferenceRepository.__init__"],["PunctuationProcessor.apply","PunctuationProcessor._normalize_laugh"],["UserNotFoundError.__init__","SummaryGenerator.__init__"],["JobExecutionRepository.__init__","MessageHandler.__init__"],["_call_distraction_llm","_get_distraction_agent"],["UserNotFoundError.__init__","NarrativeArcManager.__init__"],["ConversationThreadRepository.__init__","PreferenceConfigurator.__init__"],["NikitaThoughtRepository.__init__","JobExecutionRepository.__init__"],["ConversationThreadRepository.__init__","TranscriptManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointEngine.__init__"],["UserNotFoundError.__init__","OnboardingStateRepository.__init__"],["TestMemoryContextLoading.test_multi_graph_parallel_query_pattern","TestMemoryContextLoading.mock_get_client"],["VicePreferenceRepository.__init__","TokenCounter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","JobExecutionRepository.__init__"],["LoginPage.__init__","TelegramBot.__init__"],["DashboardPage.__init__","MetaInstructionEngine.__init__"],["DailySummaryRepository.__init__","StateStore.__init__"],["MessageHandler._needs_onboarding","_offer_onboarding_choice"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PortalLoginE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenValidator.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step2_submit_js"],["EvidenceCollector.add_verification","EvidenceCollector.log"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramAuth.__init__"],["TokenCounter.truncate_to_budget","count_tokens"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DashboardPage.__init__"],["NikitaThoughtRepository.bulk_create_thoughts","NikitaThoughtRepository.create_thought"],["TestContextPackagePopulation.mock_session_context","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PostProcessor.__init__"],["TestContextPackagePopulation.mock_session_context","OnboardingHandler.__init__"],["UserMetricsRepository.__init__","EngagementStateMachine.__init__"],["EngagementStateRepository.__init__","Layer2Composer.__init__"],["TestWebhookSignatureValidation.test_valid_signature_accepted","create_webhook_signature"],["ProfileRepository.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase4GameState.__init__"],["LoginPage.__init__","PostProcessingPipeline.__init__"],["UserMetricsRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramBot.__init__"],["TouchpointEngine.deliver_due_touchpoints","_deliver_single"],["JobExecutionRepository.__init__","DatabaseRateLimiter.__init__"],["LoginPage.__init__","RecoveryManager.__init__"],["BackstoryRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingServerToolHandler.__init__"],["ScoreHistoryRepository.__init__","EmojiProcessor.__init__"],["initiate_call","initiate_call"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PackageStore.__init__"],["VicePreferenceRepository.__init__","UserNotFoundError.__init__"],["MissingVariableError.__init__","JourneyReport.__init__"],["MetaInstructionEngine.get_instructions_for_context","MetaInstructionEngine.format_for_prompt"],["TestMoodDerivation.mock_session_context","LoginPage.__init__"],["MissingVariableError.__init__","VicePreferenceRepository.__init__"],["MetaPromptService.generate_system_prompt","TemplateGenerator._load_context"],["VicePreferenceRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase2Conversation.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PostProcessingPipeline.__init__"],["PostProcessingPipeline._run_layer_composition","mark_running"],["VicePreferenceRepository.__init__","InMemoryCache.__init__"],["MessageHandler.handle","MessageHandler._needs_onboarding"],["CalibrationCalculator._content_component","_clamp"],["JobExecutionRepository.__init__","DashboardPage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoringService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RecoveryManager.__init__"],["UserMetricsRepository.__init__","SkipDecision.__init__"],["VicePreferenceRepository.__init__","StrategicSilence.__init__"],["MissingVariableError.__init__","MockMappings.__init__"],["ViceScorer.process_signals","ViceScorer._get_vice_repo"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EngagementStateMachine.__init__"],["MetaPromptService._load_context","MetaPromptService._load_memory_context"],["inject_context","get_layer5_injector"],["main","print_section"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BasePage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceScorer.__init__"],["LoginPage.__init__","NikitaMemory.__init__"],["VoiceService.initiate_call","VoiceService._generate_session_id"],["TestContextPackagePopulation.mock_session_context","DatabaseRateLimiter.__init__"],["HierarchicalPromptComposer.compose","compose"],["TestMoodDerivation.mock_session_context","Phase2Conversation.__init__"],["MissingVariableError.__init__","BreakupManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MetaPromptService.__init__"],["ConversationsPage.__init__","PendingRegistrationRepository.__init__"],["PostProcessor._get_extraction_agent","PostProcessor._get_extraction_system_prompt"],["BackstoryRepository.__init__","EvidenceCollector.__init__"],["LifeSimulator.generate_next_day_events","EventStore.get_active_arcs"],["ConversationRepository.__init__","JourneyReport.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceCallVerifier.__init__"],["OTPEmailParser.parse_magic_link_email","Phase3Portal.extract_magic_link"],["LoginPage.__init__","MissingVariableError.__init__"],["NikitaThoughtRepository.__init__","FactExtractor.__init__"],["PostProcessingPipeline._run_conflict_check","ProcessingStep.mark_running"],["VoiceEventScheduler.schedule_follow_up","VoiceEventScheduler._create_event"],["ConversationRepository.__init__","VicePreferenceRepository.__init__"],["PackageStore.delete","OnboardingStateRepository.delete"],["ElevenLabsConversationsClient.get_conversation","ElevenLabsConversationsClient._headers"],["TestLayer6ResponseGuidelines.test_layer6_time_based_adjustments","_create_context"],["TestContextPackagePopulation.mock_session_context","Phase3Portal.__init__"],["BackstoryRepository.create_from_scenario","UserRepository.get"],["InMemoryCache.incr","InMemoryCache._cleanup_expired"],["VicePreferenceRepository.__init__","Layer4Computer.__init__"],["ConversationThreadRepository.__init__","OTPVerificationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationThreadRepository.__init__"],["ConversationThreadRepository.__init__","TemplateGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ProfileCollector.__init__"],["DashboardPage.__init__","BackstoryGeneratorService.__init__"],["OptimalFrequencyCalculator.get_bounds","get_optimal"],["LifeEvent.model_dump_for_db","MoodState.to_dict"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer1Loader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResponseTimer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NikitaMemory.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step2_wait_js"],["ConversationRepository.__init__","MockMappings.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResolutionManager.__init__"],["LoginPage.__init__","GeneratedPromptRepository.__init__"],["ScoreAnalyzer.analyze","ScoreAnalyzer._call_llm"],["OnboardingServerToolHandler.configure_preferences","OnboardingServerToolHandler._get_or_create_profile"],["DailySummaryRepository.__init__","Layer3Composer.__init__"],["PostProcessingPipeline._run_package_storage","mark_completed"],["ProfileRepository.__init__","Layer2Composer.__init__"],["UserRepository.complete_onboarding","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VenueResearchService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SkipDecision.__init__"],["ConversationRepository.__init__","BreakupManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MissingVariableError.__init__"],["PromptLoader._substitute_variables","PromptLoader.replace_match"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","JobExecutionRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EvidenceCollector.__init__"],["NikitaThoughtRepository.__init__","TelegramAuth.__init__"],["VoiceOnboardingFlow.resume_onboarding","_update_state"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BackstoryRepository.__init__"],["VoiceAgentConfig.get_agent_config","generate_system_prompt"],["RateLimiter.get_remaining","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TextPatternProcessor.__init__"],["ScoreHistoryRepository.__init__","Layer2Composer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointStore.__init__"],["GeneratedPromptRepository.__init__","FactExtractor.__init__"],["ScoreAnalyzer.analyze_batch","_neutral_analysis"],["UserMetricsRepository.__init__","EventGenerator.__init__"],["VicePreferenceRepository.__init__","InboundCallHandler.__init__"],["TestLayer6ResponseGuidelines.test_layer6_gap_based_adjustments","TestLayer2CurrentMoment._create_context"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NikitaThoughtRepository.__init__"],["TestMoodDerivation.mock_session_context","VenueResearchService.__init__"],["DailySummaryRepository.__init__","TTSConfigService.__init__"],["SummaryGenerator._update_daily_summary","SummaryGenerator._count_conversations_today"],["Phase3Portal.extract_magic_link","extract_magic_link"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase4GameState.__init__"],["RateLimiter.get_remaining","_get_day_key"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VenueCacheRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LoginPage.__init__"],["UserNotFoundError.__init__","ScoreHistoryRepository.__init__"],["PostProcessingPipeline._run_life_simulation","ProcessingStep.mark_running"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PostProcessor.__init__"],["BackstoryContext.get_first_message_hook","BackstoryContext.has_backstory"],["ScoreHistoryRepository.__init__","ScheduledEventRepository.__init__"],["UserRepository.increment_boss_attempts","OnboardingStateRepository.get"],["detect_stale_sessions","SessionDetector.detect_and_queue"],["OnboardingServerToolHandler.collect_profile","_get_or_create_profile"],["clean_session","session_maker"],["TTSConfigService.get_final_settings","TTSConfigService.get_chapter_settings"],["UserMetricsRepository.__init__","DailySummaryRepository.__init__"],["JourneyContext.fail","JourneyContext.transition_to"],["MissingVariableError.__init__","BasePage.__init__"],["StateStore.update_state","StateStore.save_state"],["DailySummaryRepository.__init__","TokenValidator.__init__"],["HandoffManager.execute_handoff","HandoffManager._generate_profile_summary"],["TestPortalLoginFlow.test_flow_instructions_generation","WebhookTestData.create"],["PostProcessingPipeline._run_package_storage","ProcessingStep.mark_completed"],["HandoffManager.transition","SummaryGenerator.generate"],["ConversationsPage.__init__","OTPFlowE2ETest.__init__"],["NarrativeArcManager.maybe_resolve_arcs","resolve_arc"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase2Conversation.__init__"],["TestMoodDerivation.mock_session_context","PostProcessor.__init__"],["OnboardingServerToolHandler.handle_request","UserRepository.complete_onboarding"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","half_second_timeout"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EventGenerator.__init__"],["NikitaThoughtRepository.__init__","TranscriptManager.__init__"],["UserNotFoundError.__init__","Layer5Injector.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_conversation"],["DailySummaryRepository.__init__","TelegramBot.__init__"],["ConversationsPage.__init__","Phase1Registration.__init__"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._load_experiment_with_inheritance"],["BaseRepository.update","TouchpointStore.get"],["NikitaThoughtRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","HierarchicalPromptComposer.__init__"],["UserMetricsRepository.__init__","ConversationsPage.__init__"],["UserRepository.__init__","OTPFlowE2ETest.__init__"],["ConversationsPage.__init__","EventStore.__init__"],["OnboardingServerToolHandler.handle_request","end_call"],["OnboardingServerToolHandler.collect_profile","_persist_profile_to_db"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestUserMetricsRepository.__init__"],["BackstoryRepository.__init__","GraphUpdater.__init__"],["LoginPage.__init__","FullJourneyOrchestrator.__init__"],["ConversationRepository.__init__","BasePage.__init__"],["ConversationThreadRepository.__init__","SummaryGenerator.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","handle_message"],["TouchpointScheduler._evaluate_time_trigger","_get_user_local_time"],["TestMoodDerivation.mock_session_context","OnboardingServerToolHandler.__init__"],["ConversationThreadRepository.__init__","NarrativeArcManager.__init__"],["RateLimiter.check","_get_minute_key"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestMoodDerivation.__init__"],["EventStore.get_entities","_row_to_entity"],["HandoffManager.transition","transition"],["MissingVariableError.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GmailHelper.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BackstoryRepository.__init__"],["ConversationThreadRepository.__init__","OnboardingStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StateStore.__init__"],["ConversationConfigBuilder._generate_system_prompt","_generate_fallback_prompt"],["ConversationConfigBuilder._generate_system_prompt","InboundCallHandler._generate_fallback_prompt"],["UserRepository.__init__","Phase1Registration.__init__"],["DailySummaryRepository.__init__","PostProcessingPipeline.__init__"],["BossStateMachine.process_pass","_get_user_repo"],["MetaNikitaConfig.get_agent_config","_personalize_first_message"],["NikitaThoughtRepository.__init__","ResolutionManager.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow._save_phone_number"],["VicePreferenceRepository.__init__","Layer1Loader.__init__"],["UserRepository.__init__","EventStore.__init__"],["OnboardingStateRepository.add_answer","_ChapterBehaviorsProxy.get"],["VicePreferenceRepository.__init__","ResponseTimer.__init__"],["DailySummaryRepository.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResolutionManager.__init__"],["GraphUpdater.update","_process_assistant_message"],["GeneratedPromptRepository.__init__","TranscriptManager.__init__"],["NikitaThoughtRepository.__init__","VenueResearchService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","FullJourneyOrchestrator.__init__"],["BaseRepository.delete_by_id","delete"],["ConversationsPage.__init__","StrategicSilence.__init__"],["UserNotFoundError.__init__","VoiceCallScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VenueResearchService.__init__"],["GeneratedPromptRepository.__init__","SessionDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GraphUpdater.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LayerComposer.__init__"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","navigate_and_get_content"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DecayCalculator.__init__"],["BossJudgment.judge_boss_outcome","ScoreAnalyzer._call_llm"],["MissingVariableError.__init__","Phase4GameState.__init__"],["UserNotFoundError.__init__","ConversationConfigBuilder.__init__"],["BackstoryRepository.__init__","MockResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationsPage.__init__"],["ConversationRepository.__init__","JobExecutionRepository.__init__"],["TestMoodDerivation.mock_session_context","VoiceCallVerifier.__init__"],["_ChapterBehaviorsProxy.items","_ChapterBehaviorsProxy.items"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MetaInstructionEngine.__init__"],["TouchpointStore.get_recent_touchpoints","TouchpointStore.get_user_touchpoints"],["FullJourneyOrchestrator.get_all_instructions","get_phase4_instructions"],["ConversationsPage.__init__","Layer4Computer.__init__"],["TestRateLimiter.test_ac_t024_3_get_remaining_returns_quota_info","mock_get"],["JobExecutionRepository.__init__","BackstoryRepository.__init__"],["DailySummaryRepository.__init__","NikitaMemory.__init__"],["DashboardPage.__init__","ConversationsPage.__init__"],["NarrativeArcManager.create_arc","NarrativeArcManager._generate_initial_state"],["VicePreferenceRepository.__init__","VenueCacheRepository.__init__"],["ConversationConfigBuilder.build_config","build_from_user"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LoginPage.__init__"],["VoiceService.initiate_call","_build_dynamic_variables"],["NikitaThoughtRepository.__init__","MoodCalculator.__init__"],["GraphUpdater.update","_process_user_message"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PostProcessor.__init__"],["DashboardPage.__init__","EscalationManager.__init__"],["LoginPage.__init__","MetaPromptService.__init__"],["DailySummaryRepository.__init__","MissingVariableError.__init__"],["ConversationRepository.__init__","Phase4GameState.__init__"],["BaseRepository.delete","OnboardingStateRepository.delete"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RegistrationHandler.__init__"],["PackageStore.cleanup_expired","BaseRepository.delete"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockResult.__init__"],["TestDashboardE2E.test_verification_instructions","DashboardE2ETest.get_verification_instructions"],["EventDeliveryHandler.deliver","EventDeliveryHandler._mark_delivered"],["JobExecutionRepository.__init__","ConfigLoader.__init__"],["compose_chapter_layer","compose"],["EngagementStateRepository.__init__","OTPFlowE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceAnalyzer.__init__"],["ConversationsPage.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoringService.__init__"],["DatabaseRateLimiter.check","DatabaseRateLimiter._get_minute_window"],["DailySummaryRepository.__init__","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase2Conversation.__init__"],["OnboardingStateRepository.delete","delete"],["TokenValidator.truncate","count_tokens"],["Layer3Composer._get_behavioral_impact","Layer3Composer._get_conflict_behavioral_impacts"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GmailHelper.__init__"],["ProfileCollector.collect","ProfileCollector.collect"],["DashboardPage.__init__","_ProfileFromAnswers.__init__"],["VicePreferenceRepository.__init__","DeliveryResult.__init__"],["EngagementStateRepository.__init__","Phase1Registration.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step6_extract_data_js"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MetaPromptService.__init__"],["should_apply_silence","apply_strategic_silence"],["GeneratedPromptRepository.__init__","MoodCalculator.__init__"],["TouchpointStore.mark_delivered","TouchpointStore._to_pydantic"],["EngagementStateRepository.__init__","EventStore.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_life_stage_step"],["TouchpointStore.mark_failed","_to_pydantic"],["ScoreAnalyzer.analyze_batch","ScoreAnalyzer._call_llm_raw"],["VenueResearchService._parse_search_results","_extract_vibe"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer3Composer.__init__"],["VoiceOnboardingFlow.process_phone_input","get_ready_confirmation_message"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationRepository.__init__"],["BackstoryRepository.create_from_scenario","PortalLoginTestContext.create"],["TestContextPackagePopulation.mock_session_context","NikitaThoughtRepository.__init__"],["UserRepository.update_game_status","InMemoryCache.get"],["ViceScorer.process_signals","process_signals"],["ConversationsPage.__init__","PackageStore.__init__"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._can_trigger_after_recent"],["ServerToolHandler._get_context","_compute_nikita_energy"],["BreakupManager.trigger_breakup","BreakupManager._get_breakup_message"],["JobExecutionRepository.__init__","HierarchicalPromptComposer.__init__"],["StateStore.get_conflict_history","_row_to_state"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DashboardE2ETest.__init__"],["LoginPage.__init__","InstructionSelector.__init__"],["NikitaThoughtRepository.__init__","DecayProcessor.__init__"],["VicePreferenceRepository.__init__","TouchpointEngine.__init__"],["TokenCounter.count_multiple","TokenValidator.count_tokens"],["MetaPromptService._load_memory_context","ServerToolHandler._query_graph"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EngagementStateMachine.__init__"],["EscalationManager._check_natural_resolution","EscalationManager._get_natural_resolution_probability"],["PackageStore.exists","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TTSConfigService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LengthAdjuster.__init__"],["MockAgentHelper.patch_generate_response","MockAgentHelper.patch_generate_response"],["JobExecutionRepository.__init__","GmailHelper.__init__"],["NeglectDetector.detect","_frequency_signal"],["UserMetricsRepository.__init__","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BackstoryGeneratorService.__init__"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._get_experiment_path"],["NikitaThoughtRepository.__init__","HandoffManager.__init__"],["VicePromptInjector.inject","_build_vice_section"],["UserMetricsRepository.update_metrics","GeneratedPromptRepository.get_by_user_id"],["TestNikitaThoughtRepository.test_create_missing_him_thought_24h","mock_create_thought"],["UserRepository.set_boss_fight_status","_ChapterBehaviorsProxy.get"],["MissingVariableError.__init__","LoginPage.__init__"],["SituationDetector.detect","SituationDetector._build_metadata"],["PostProcessingPipeline._run_layer_composition","ConversationRepository.mark_failed"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InstructionSelector.__init__"],["TestNikitaThoughtRepository.test_create_thought_valid_types","mock_create"],["InMemoryCache.incr","_ChapterBehaviorsProxy.get"],["UserRepository.update_onboarding_status","OnboardingStateRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenValidator.__init__"],["EvidenceCollector.print_summary","JourneyReport.generate_report"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler._should_trigger"],["ResolutionManager.__init__","ResolutionManager._get_evaluation_prompt"],["TestMoodDerivation.mock_session_context","StateStore.__init__"],["PreferenceConfigurator.get_behavioral_config","get_conversation_style_config"],["EngagementStateRepository.__init__","Layer4Computer.__init__"],["LoginPage.__init__","EventGenerator.__init__"],["PostProcessingPipeline._run_conflict_check","mark_failed"],["GeneratedPromptRepository.__init__","DecayProcessor.__init__"],["ProfileRepository.__init__","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer6Handler.__init__"],["VoiceCallVerifier._verify_database","_check_engagement"],["TestContextPackagePopulation.mock_session_context","HierarchicalPromptComposer.__init__"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._evaluate_gap_trigger"],["ConversationsPage.__init__","ConversationThreadRepository.__init__"],["UserRepository.__init__","VoiceSessionManager.__init__"],["MessageHandler._score_and_check_boss","MessageHandler._send_boss_opening"],["NeglectDetector.detect","NeglectDetector._frequency_signal"],["JobExecutionRepository.__init__","DashboardE2ETest.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_correct_amount_ch1_10h_overdue","create_mock_user"],["DynamicVariablesBuilder.build_from_context","_get_day_of_week"],["MissingVariableError.__init__","Phase2Conversation.__init__"],["DailySummaryRepository.__init__","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SkipDecision.__init__"],["ConfigLoader.__new__","ConfigLoader.__new__"],["ScoreHistoryRepository.__init__","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","__init__"],["TestContextPackagePopulation.mock_session_context","GmailHelper.__init__"],["UserNotFoundError.__init__","LayerComposer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PostProcessor.__init__"],["ProfileRepository.__init__","Phase1Registration.__init__"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_get_all_conversations_data"],["GeneratedPromptRepository.__init__","HandoffManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramBot.__init__"],["LifeSimulator.get_events_for_context","_format_event"],["ConversationRepository.__init__","LoginPage.__init__"],["UserRepository.__init__","MessageGenerator.__init__"],["LengthAdjuster.is_within_bounds","_get_config"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramWebhookSimulator.__init__"],["EngagementStateMachine._apply_transition","_reset_counters"],["TestMoodDerivation.mock_session_context","Layer6Handler.__init__"],["PreferenceConfigurator.get_behavioral_config","get_pacing_config"],["ConversationThreadRepository.__init__","Layer5Injector.__init__"],["TestContextPackagePopulation.test_context_package_limits_to_top_3","TestMoodDerivation.mock_session_context"],["ProfileRepository.__init__","EventStore.__init__"],["EngagementStateRepository.__init__","PortalLoginE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EventGenerator.__init__"],["ConversationsPage.__init__","TouchpointScheduler.__init__"],["TelegramWebhookSimulator._build_message","_next_message_id"],["UserMetricsRepository.__init__","UserMetricsRepository.__init__"],["VicePreferenceRepository.__init__","ScoringService.__init__"],["ScoreHistoryRepository.__init__","Phase1Registration.__init__"],["ConversationsPage.__init__","TouchpointStore.__init__"],["RecoveryManager.apply_recovery","RecoveryManager._get_de_escalated_state"],["HierarchicalPromptComposer.compose","LayerComposer.compose"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResponseDelivery.__init__"],["ConversationsPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["mock_agent","mock_agent"],["RecoveryManager.apply_recovery","can_recover"],["VicePreferenceRepository.__init__","ViceScorer.__init__"],["LayerComposer.compose","Layer3Composer.compose"],["ScoreHistoryRepository.__init__","EventStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingServerToolHandler.__init__"],["VoiceService.initiate_call","_log_call_started"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PostProcessingPipeline.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.get_ready_confirmation_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserRepository.__init__"],["MetaPromptService.extract_entities","VoiceService._load_context"],["ConversationRepository.__init__","Phase2Conversation.__init__"],["ProfileRepository.update_from_onboarding","InMemoryCache.get"],["ConflictDetector.apply_transition","ConflictDetector._can_transition"],["UserRepository.complete_onboarding","get"],["ConversationsPage.__init__","VenueCacheRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RecoveryManager.__init__"],["UserRepository.__init__","TouchpointScheduler.__init__"],["UserRepository.__init__","TouchpointStore.__init__"],["PostProcessingPipeline._run_graph_update","mark_running"],["GeneratedPromptRepository.__init__","SummaryGenerator.__init__"],["MissingVariableError.__init__","ResolutionManager.__init__"],["RateLimiter.__init__","UserRepository.get"],["VicePreferenceRepository.__init__","ConversationRepository.__init__"],["MockAgentHelper.patch_generate_response","MockAgentHelper.mock_generate"],["PostProcessingPipeline._run_life_simulation","mark_failed"],["UserRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_distant_recovery"],["EngagementStateRepository.__init__","PackageStore.__init__"],["GeneratedPromptRepository.__init__","OnboardingStateRepository.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_normal_on_success","fast_function"],["UserRepository.update_onboarding_status","PendingRegistrationRepository.get"],["MissingVariableError.__init__","VenueResearchService.__init__"],["VoiceService.initiate_call","VoiceService._load_user"],["BackstoryRepository.__init__","JourneyReport.__init__"],["ConversationThreadRepository.__init__","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LifeSimulator.__init__"],["BackstoryRepository.__init__","VicePreferenceRepository.__init__"],["OnboardingHandler.handle","_handle_drug_tolerance_step"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_engagement"],["VenueResearchService.research_venues","_is_expired"],["LoginPage.build_login_sequence","js_enter_email"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserMetricsRepository.__init__"],["TestLayer2CurrentMoment.test_layer2_gap_mood_variations","TestLayer3RelationshipState._create_context"],["ConversationThreadRepository.__init__","ConversationConfigBuilder.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase4_instructions"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DecayCalculator.__init__"],["DailySummaryRepository.__init__","MetaPromptService.__init__"],["VicePreferenceRepository.__init__","EvidenceCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceCallVerifier.__init__"],["ProfileRepository.__init__","Layer4Computer.__init__"],["EvidenceCollector.start_phase","log"],["BackstoryRepository.__init__","MockMappings.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StateStore.__init__"],["LoginPage.__init__","RegistrationHandler.__init__"],["ConversationRepository.__init__","ResolutionManager.__init__"],["TestLayer3RelationshipState.test_layer3_score_trend_variations","_create_context"],["UserRepository.update_onboarding_profile","InMemoryCache.get"],["LoginPage.__init__","ViceAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","__init__"],["BackstoryRepository.__init__","BreakupManager.__init__"],["TestMoodDerivation.mock_session_context","Layer3Composer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MissingVariableError.__init__"],["UserNotFoundError.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DailySummaryRepository.__init__"],["ConversationRepository.__init__","VenueResearchService.__init__"],["MissingVariableError.__init__","PostProcessor.__init__"],["TestLayer6ResponseGuidelines.test_layer6_gap_based_adjustments","_create_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TTSConfigService.__init__"],["UserRepository.__init__","CommandHandler.__init__"],["NikitaThoughtRepository.__init__","Layer6Handler.__init__"],["MessageSplitter.split","MessageSplitter._find_split_points"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VicePreferenceRepository.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step2_send_email"],["atomic","is_deadlock_error"],["NikitaMemory.get_user_facts","NikitaMemory._get_group_id"],["VoiceOnboardingFlow.should_start_onboarding","_get_user_onboarding_status"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictGenerator.__init__"],["ProfileRepository.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer6Handler.__init__"],["MetaPromptService._validate_token_budget","_count_tokens"],["EngagementStateRepository.__init__","ConversationThreadRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockMappings.__init__"],["TestRateLimiter.test_daily_limit_exceeded_blocks_message","mock_incr"],["TestMoodDerivation.mock_session_context","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MetaNikitaConfig.__init__"],["MissingVariableError.__init__","OnboardingServerToolHandler.__init__"],["_build_system_prompt_legacy","build_system_prompt"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BreakupManager.__init__"],["StateComputer.compute","_apply_life_event_deltas"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationsPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PunctuationProcessor.__init__"],["Layer4Computer.detect_and_compose","Layer4Computer.compose"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceService.__init__"],["ConversationRepository.__init__","PostProcessor.__init__"],["DailySummaryRepository.__init__","InstructionSelector.__init__"],["EngagementStateRepository.__init__","TouchpointScheduler.__init__"],["PostProcessingPipeline._run_conflict_check","ProcessingStep.mark_failed"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EntityManager.__init__"],["BackstoryRepository.__init__","ExperimentLoader.__init__"],["EngagementStateRepository.__init__","TouchpointStore.__init__"],["TestLayer2CurrentMoment.test_layer2_gap_mood_variations","TestLayer6ResponseGuidelines._create_context"],["TestRateLimiter.test_ac_t024_2_tracks_per_minute_and_per_day_limits","TestRateLimiter.mock_incr"],["JobExecutionRepository.__init__","__init__"],["EngagementStateRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ProfileRepository.__init__","PackageStore.__init__"],["DashboardPage.build_verification_sequence","js_get_all_dashboard_data"],["EngagementStateMachine.on_chapter_change","EngagementStateMachine._reset_counters"],["VoiceOnboardingFlow.handle_onboard_command","get_phone_request_message"],["VoiceOnboardingFlow.process_phone_input","_save_phone_number"],["ConversationRepository.__init__","OnboardingServerToolHandler.__init__"],["EngagementStateRepository.__init__","VenueCacheRepository.__init__"],["ScoreHistoryRepository.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ProfileCollector.__init__"],["MissingVariableError.__init__","VoiceCallVerifier.__init__"],["NeglectDetector._frequency_signal","_clamp"],["TestMoodDerivation.mock_session_context","TelegramBot.__init__"],["NikitaThoughtRepository.__init__","ScoreHistoryRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ExperimentLoader.__init__"],["OnboardingStateRepository.update_step","get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PostProcessingPipeline.__init__"],["DailySummaryRepository.__init__","EventGenerator.__init__"],["UserMetricsRepository.update_metrics","StateComputer._clamp"],["TokenValidator.truncate_layers","TokenValidator.truncate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LengthAdjuster.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","create_fake_jwt"],["ConversationsPage.__init__","ScoringService.__init__"],["TestContextPackagePopulation.mock_session_context","__init__"],["test_context","create"],["TestMoodDerivation.mock_session_context","ProfileCollector.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_conflict_check"],["VicePreferenceRepository.__init__","GraphUpdater.__init__"],["ScoreHistoryRepository.__init__","VoiceSessionManager.__init__"],["LifeSimulator.get_recent_events","LifeSimulator.get_recent_events"],["ProfileRepository.__init__","MessageGenerator.__init__"],["ConflictGenerator.generate","ConflictGenerator._check_should_skip"],["PendingRegistrationRepository.delete","PackageStore.delete"],["GraphUpdater.update","GraphUpdater._process_user_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TextPatternProcessor.__init__"],["VicePreferenceRepository.__init__","DecayCalculator.__init__"],["BaseRepository.delete_by_id","BaseRepository.delete"],["EventStore.get_event","EventStore._row_to_event"],["UserRepository.advance_chapter","UserRepository.get"],["TestMoodDerivation.mock_session_context","PostProcessingPipeline.__init__"],["ProfileRepository.__init__","ConversationThreadRepository.__init__"],["PostProcessingPipeline._run_life_simulation","ProcessingStep.mark_failed"],["ProfileRepository.get_by_user_id","_ChapterBehaviorsProxy.get"],["Layer5Injector.inject","Layer5Injector._format_user_facts"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StateStore.__init__"],["ConversationRepository.__init__","VoiceCallVerifier.__init__"],["compose_hierarchical_prompt","Layer3Composer.compose"],["TestMoodDerivation.mock_session_context","RecoveryManager.__init__"],["ScoreHistoryRepository.__init__","MessageGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","FullJourneyOrchestrator.__init__"],["GeneratedPromptRepository.__init__","ScoreHistoryRepository.__init__"],["TestContextPackagePopulation.test_context_package_limits_to_top_3","mock_session_context"],["MetaPromptService.extract_entities","MetaPromptService._load_context"],["ConversationsPage.__init__","ConversationRepository.__init__"],["PendingRegistrationRepository.cleanup_expired","PendingRegistrationRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TTSConfigService.__init__"],["BackstoryRepository.__init__","TestVicePreferenceRepository.__init__"],["BackstoryGeneratorService.generate_scenarios","_create_fallback_scenarios"],["LoginPage.__init__","ResponseDelivery.__init__"],["TestContextPackagePopulation.mock_session_context","UserRepository.__init__"],["BackstoryRepository.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NikitaMemory.__init__"],["TestTemplateGeneratorBasics.test_generate_prompt_contains_all_6_layers","mock_meta_prompt_service"],["UserMetricsRepository.__init__","ConflictDetector.__init__"],["ProfileRepository.__init__","TouchpointScheduler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer6Handler.__init__"],["PendingRegistrationRepository.get_email","PackageStore.get"],["ProfileRepository.__init__","TouchpointStore.__init__"],["TestGetCurrentAdminUser.test_admin_email_returns_user_id","make_token"],["TestContextPackagePopulation.mock_session_context","TestContextPackagePopulation.__init__"],["MetricItem","getProgressColor"],["ProfileRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestResponseTimer.test_ac_4_1_4_calculate_delay_returns_int","mock_production_settings"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageHandler.__init__"],["TouchpointScheduler.evaluate_user","_evaluate_gap_trigger"],["main","EvidenceCollector.generate_report"],["ScoreHistoryRepository.__init__","TouchpointScheduler.__init__"],["EntityManager.get_colleagues","EntityManager.get_entities_by_type"],["ScoreHistoryRepository.__init__","TouchpointStore.__init__"],["TestMoodDerivation.mock_session_context","NikitaMemory.__init__"],["atomic","wrapper"],["NarrativeArcManager.get_active_arcs","get_active_arcs"],["UserRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["InstructionSelector.select","InstructionSelector._parse_instruction"],["ScoreHistoryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ProfileRepository.__init__","VenueCacheRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TriggerDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResponseDelivery.__init__"],["UserRepository.__init__","OnboardingHandler.__init__"],["RateLimiter.check","_seconds_until_midnight"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestVicePreferenceRepository.__init__"],["LoginPage.__init__","LifeSimulator.__init__"],["BaseRepository.update","OnboardingStateRepository.get"],["UserMetricsRepository.__init__","ServerToolHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","JobExecutionRepository.__init__"],["TestMoodDerivation.mock_session_context","MissingVariableError.__init__"],["Layer3Composer.describe_state","_describe_valence"],["OnboardingStateRepository.delete","BaseRepository.delete"],["UserRepository.complete_onboarding","TouchpointStore.get"],["LifeSimulator.get_recent_events","get_recent_events"],["LoginPage.__init__","CommandHandler.__init__"],["TestWebhookPostProcessing.test_webhook_caches_prompt_for_next_call","capture_cached_prompt"],["FactExtractor.extract_facts","_deduplicate_facts"],["TestResponseTimer.test_development_mode_returns_zero","mock_development_settings"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestUserMetricsRepository.__init__"],["PreferenceConfigurator.get_conversation_style_config","get_preferences"],["ConversationThreadRepository.bulk_create_threads","ConversationThreadRepository.create_thread"],["DailySummaryRepository.__init__","RegistrationHandler.__init__"],["DashboardPage.__init__","ScoreAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestMoodDerivation.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictDetector.__init__"],["TestMoodDerivation.mock_session_context","GeneratedPromptRepository.__init__"],["DailySummaryRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MetaPromptService.__init__"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow.is_confirmation"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ProfileCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OTPVerificationHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LifeSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TemplateGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenCounter.__init__"],["TestMoodDerivation.mock_session_context","TestUserMetricsRepository.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step2_wait_js"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PostProcessingPipeline.__init__"],["MissingVariableError.__init__","StateStore.__init__"],["UserNotFoundError.__init__","EscalationManager.__init__"],["GeneratedPromptRepository.__init__","VoiceCallScorer.__init__"],["ProfileCollector.collect","ProfileCollector._set_field"],["ConflictDetector.apply_transition","_can_transition"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestDailySummaryRepositoryExtras.__init__"],["LifeSimulator.get_events_for_context","EventStore.get_recent_events"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PendingRegistrationRepository.__init__"],["ConversationsPage.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RecoveryManager.__init__"],["EngagementStateRepository.__init__","ScoringService.__init__"],["FactExtractor.extract_facts","FactExtractor._call_llm_for_extraction"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreCalculator.__init__"],["VicePreferenceRepository.__init__","LengthAdjuster.__init__"],["NikitaThoughtRepository.__init__","TextPatternProcessor.__init__"],["GeneratedPromptRepository.__init__","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ServerToolHandler.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step3_extract_all_js"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer3Composer.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_normal_on_success","TestTimeoutFallback.fast_function"],["ConversationThreadRepository.__init__","RateLimiter.__init__"],["UserRepository.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TextPatternProcessor.__init__"],["ProfileCollector.collect","ProfileCollector._validate_and_process"],["PendingRegistrationRepository.cleanup_expired","TouchpointStore.delete"],["LoginPage.__init__","MetaNikitaConfig.__init__"],["MissingVariableError.__init__","Layer6Handler.__init__"],["BasePage.navigate_command","url"],["UserNotFoundError.__init__","_ProfileFromAnswers.__init__"],["DynamicVariablesBuilder.build_from_user","_get_day_of_week"],["UserRepository.__init__","Phase3Portal.__init__"],["UserNotFoundError.__init__","JourneyReport.__init__"],["TestContextPackagePopulation.mock_session_context","EngagementStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictGenerator.__init__"],["MetaInstructionEngine.get_instructions_for_context","PersonaAdaptationService.format_for_prompt"],["BaseRepository.update","PendingRegistrationRepository.get"],["ConversationRepository.__init__","StateStore.__init__"],["EngagementStateRepository.__init__","ConversationRepository.__init__"],["MessageHandler.handle","_send_game_status_response"],["BackstoryRepository.create_from_scenario","BaseRepository.create"],["PostProcessingPipeline.process","PostProcessingPipeline._run_emotional_state_update"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserNotFoundError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TTSConfigService.__init__"],["ConversationThreadRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NikitaMemory.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InstructionSelector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserMetricsRepository.__init__"],["UserMetricsRepository.__init__","StateComputer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MetaNikitaConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictStore.__init__"],["NikitaMemory.add_user_fact","NikitaMemory.add_episode"],["CalibrationCalculator._content_component","StateComputer._clamp"],["JobExecutionRepository.__init__","PendingRegistrationRepository.__init__"],["BackstoryRepository.__init__","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MissingVariableError.__init__"],["VoiceOnboardingFlow.process_phone_input","_update_state"],["ConversationRepository.__init__","Layer6Handler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceAgentConfig.__init__"],["ConversationsPage.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceService.__init__"],["TestContextPackagePopulation.mock_session_context","PreferenceConfigurator.__init__"],["StateComputer._compute_base_state","StateComputer._clamp"],["LoginPage.__init__","ConversationsE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EntityManager.__init__"],["OnboardingStateRepository.add_answer","TouchpointStore.get"],["VoiceAgentConfig.get_agent_config","_get_first_message"],["TestMoodDerivation.mock_session_context","FullJourneyOrchestrator.__init__"],["TextPatternProcessor.process","_context_to_emoji_context"],["ConflictDetector.check_escalation","detect_conflict_state"],["BackstoryRepository.__init__","LoginPage.__init__"],["Layer5Injector.inject","_format_week_summaries"],["make_token","_make"],["RateLimiter.check","expire"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TemplateGenerator.__init__"],["NikitaThoughtRepository.__init__","TestUserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenCounter.__init__"],["_ChapterBehaviorsProxy.get","_ChapterBehaviorsProxy.get"],["MessageSplitter.split","_find_split_points"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestUserMetricsRepository.__init__"],["OnboardingServerToolHandler.collect_profile","OnboardingServerToolHandler._get_or_create_profile"],["NikitaThoughtRepository.__init__","TestMoodDerivation.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramBot.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramAuth.__init__"],["OnboardingStateRepository.update_step","TouchpointStore.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationsE2ETest.__init__"],["HandoffManager.execute_handoff","ConflictGenerator.generate"],["LayerComposer.compose","compose"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestMoodDerivation.__init__"],["HandoffManager.transition","_get_user_telegram_id"],["ServerToolHandler._get_context","_compute_nikita_activity"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StateComputer.__init__"],["TestConversationsE2E.test_empty_conversations","step3_process_data"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ExperimentLoader.__init__"],["BackstoryRepository.__init__","Phase2Conversation.__init__"],["BaseRepository.get","PendingRegistrationRepository.get"],["MissingVariableError.__init__","Layer3Composer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ProfileCollector.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector._get_severity"],["DailySummaryRepository.__init__","ResponseDelivery.__init__"],["ConfigLoader.get_boss_threshold","get_chapter"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LoginPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EngagementStateMachine.__init__"],["UserMetricsRepository.__init__","GmailMCPClient.__init__"],["VicePreferenceRepository.discover","VicePreferenceRepository.get_by_category"],["ConversationsPage.__init__","PunctuationProcessor.__init__"],["LifeSimulator.generate_next_day_events","initialize_user"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PostProcessingPipeline.__init__"],["TemplateGenerator.generate_prompt_legacy","_layer2_current_moment"],["UserMetricsRepository.__init__","ElevenLabsConversationsClient.__init__"],["NikitaThoughtRepository.__init__","LayerComposer.__init__"],["process_conversations","process_conversation"],["GraphUpdater.add_user_fact","add_user_fact"],["EngagementStateRepository.__init__","Phase3Portal.__init__"],["ProfileRepository.__init__","ConversationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RecoveryManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserNotFoundError.__init__"],["JobExecutionRepository.__init__","TemplateGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InboundCallHandler.__init__"],["JobExecutionRepository.__init__","TokenCounter.__init__"],["LoginPage.__init__","MessageHandler.__init__"],["ScoreCalculator.calculate","UserMetricsRepository.calculate_composite"],["ProfileRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MissingVariableError.__init__","TTSConfigService.__init__"],["TestConversationThreadRepository.test_get_threads_for_prompt_groups_by_type","TestConversationThreadRepository.mock_get_open_threads"],["EventStore.get_recent_events","EventStore._row_to_event"],["ProfileRepository.__init__","OnboardingHandler.__init__"],["NikitaThoughtRepository.__init__","MetaInstructionEngine.__init__"],["TestMoodDerivation.mock_session_context","EngagementStateMachine.__init__"],["UserMetricsRepository.__init__","ViceService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase2Conversation.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictStore.__init__"],["UserRepository.__init__","PunctuationProcessor.__init__"],["ConversationRepository.__init__","Layer3Composer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InMemoryCache.__init__"],["UserNotFoundError.__init__","BasePage.__init__"],["Layer3Composer.compose","Layer3Composer._get_energy_label"],["PendingRegistrationRepository.delete","delete"],["DailySummaryRepository.__init__","LifeSimulator.__init__"],["ScoreHistoryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestMoodDerivation.mock_session_context","MetaPromptService.__init__"],["ScoreHistoryRepository.__init__","OnboardingHandler.__init__"],["ExperimentLoader.load_experiment_config","ExperimentLoader._load_experiment_with_inheritance"],["LengthAdjuster.get_target_length","LengthAdjuster._get_config"],["VicePreferenceRepository.__init__","ConflictGenerator.__init__"],["BackstoryRepository.__init__","ResolutionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StrategicSilence.__init__"],["DailySummaryRepository.__init__","CommandHandler.__init__"],["MessageSplitter._split_at_markers","MessageSplitter._force_split"],["GeneratedPromptRepository.__init__","LayerComposer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SkipDecision.__init__"],["ElevenLabsConversationsClient.list_conversations","_headers"],["BackstoryRepository.__init__","VenueResearchService.__init__"],["ConversationsPage.build_verification_sequence","js_verify_conversations_exist"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GmailMCPClient.__init__"],["VicePreferenceRepository.__init__","MockMappings.__init__"],["Layer3Composer.describe_state","Layer3Composer._describe_valence"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NikitaMemory.__init__"],["InboundCallHandler._get_conversation_config_override","VoiceService._get_first_message"],["BackstoryGeneratorService.generate_scenarios","_call_llm"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ElevenLabsConversationsClient.__init__"],["ConversationRepository.search","search"],["ConversationRepository.__init__","TTSConfigService.__init__"],["LoginPage.__init__","ConflictDetector.__init__"],["TestContextPackagePopulation.mock_session_context","OTPVerificationHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PromptLoader.__init__"],["TestContextPackagePopulation.mock_session_context","TemplateGenerator.__init__"],["VicePreferenceRepository.__init__","BreakupManager.__init__"],["TestContextPackagePopulation.mock_session_context","TokenCounter.__init__"],["GeneratedPromptRepository.__init__","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MissingVariableError.__init__"],["LoginPage.__init__","DatabaseRateLimiter.__init__"],["JobExecutionRepository.__init__","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RegistrationHandler.__init__"],["VicePreferenceRepository.__init__","VoiceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestVicePreferenceRepository.__init__"],["LengthAdjuster.adjust","LengthAdjuster._get_config"],["TestMoodDerivation.mock_session_context","SkipDecision.__init__"],["VoiceEventScheduler.schedule_voice_call","_create_event"],["VicePreferenceRepository.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResolutionManager.__init__"],["JobExecutionRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceAnalyzer.__init__"],["JobExecutionRepository.__init__","InMemoryCache.__init__"],["Layer4Computer.detect_and_compose","HierarchicalPromptComposer.compose"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VenueResearchService.__init__"],["EntityManager.get_places","EntityManager.get_entities_by_type"],["MissingVariableError.__init__","ProfileCollector.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictDetector.__init__"],["JobExecutionRepository.__init__","StrategicSilence.__init__"],["DashboardPage.__init__","ViceService.__init__"],["DailySummaryRepository.__init__","MetaNikitaConfig.__init__"],["LoginPage.__init__","DashboardPage.__init__"],["BackstoryRepository.__init__","MoodCalculator.__init__"],["EvidenceCollector.add_screenshot","EvidenceCollector.log"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DatabaseRateLimiter.__init__"],["MissingVariableError.__init__","PostProcessingPipeline.__init__"],["TestMoodDerivation.mock_session_context","InstructionSelector.__init__"],["InMemoryCache.get","BaseRepository.get"],["ProfileRepository.__init__","Phase3Portal.__init__"],["ScoreHistoryRepository.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer1Loader.__init__"],["UserMetricsRepository.__init__","BaseRepository.__init__"],["MissingVariableError.__init__","RecoveryManager.__init__"],["TouchpointEngine._deliver_single","_evaluate_silence"],["UserMetricsRepository.__init__","SupabaseHelper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResponseTimer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InboundCallHandler.__init__"],["ProfileRepository.get_by_user_id","get"],["UserNotFoundError.__init__","Phase4GameState.__init__"],["VicePreferenceRepository.__init__","ExperimentLoader.__init__"],["NikitaThoughtRepository.__init__","EngagementStateMachine.__init__"],["TestContextPackagePopulation.mock_session_context","UserNotFoundError.__init__"],["ScoreHistoryRepository.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EventGenerator.__init__"],["MissingVariableError.__init__","TextPatternProcessor.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._get_default_dynamic_variables"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EngagementStateMachine.__init__"],["NikitaThoughtRepository.__init__","BackstoryGeneratorService.__init__"],["EngagementStateRepository.__init__","PunctuationProcessor.__init__"],["ConversationsPage.__init__","NikitaThoughtRepository.__init__"],["ConversationsPage.__init__","TriggerDetector.__init__"],["NarrativeArcManager.get_active_arcs","EventStore.get_active_arcs"],["ConversationRepository.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConfigLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DashboardPage.__init__"],["UserMetricsRepository.__init__","VoiceOnboardingFlow.__init__"],["ConversationThreadRepository.__init__","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MetaPromptService.__init__"],["ConversationThreadRepository.__init__","JourneyReport.__init__"],["ConversationRepository.__init__","PostProcessingPipeline.__init__"],["TestMoodDerivation.mock_session_context","EventGenerator.__init__"],["TouchpointEngine._evaluate_silence","_load_emotional_state"],["TestRateLimiter.test_multiple_users_isolated","TestRateLimiter.mock_incr"],["ConversationThreadRepository.__init__","VicePreferenceRepository.__init__"],["NikitaMemory.add_episode","NikitaMemory._get_group_id"],["ProfileCollector.collect","collect"],["DailySummaryRepository.__init__","ConversationsE2ETest.__init__"],["ConversationRepository.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DailySummaryRepository.__init__"],["MissingVariableError.__init__","NikitaMemory.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceSessionManager.__init__"],["UserRepository.__init__","NikitaThoughtRepository.__init__"],["UserRepository.__init__","TriggerDetector.__init__"],["ConflictStore.count_consecutive_unresolved_crises","ConflictStore.get_user_conflicts"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PromptLoader.__init__"],["TokenValidator.validate","count_tokens"],["ConversationRepository.__init__","TextPatternProcessor.__init__"],["BaseRepository.update","OnboardingStateRepository.session"],["ServerToolHandler._get_context","ServerToolHandler._query_graph"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SupabaseHelper.__init__"],["TestDecayProcessorProcessAll.test_process_all_returns_summary","create_mock_user"],["MissingVariableError.__init__","MissingVariableError.__init__"],["JobExecutionRepository.__init__","InboundCallHandler.__init__"],["NikitaThoughtRepository.__init__","SkipDecision.__init__"],["BackstoryRepository.__init__","DecayProcessor.__init__"],["TestDecayProcessorShouldSkipUser.test_skip_game_over_status","create_mock_user"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageGenerator.__init__"],["GeneratedPromptRepository.__init__","BackstoryGeneratorService.__init__"],["ProfileRepository.update_from_onboarding","create_profile"],["TestMoodDerivation.mock_session_context","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SkipDecision.__init__"],["TestContextPackagePopulation.mock_session_context","NarrativeArcManager.__init__"],["UserRepository.update_onboarding_status","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ServerToolHandler.__init__"],["SituationDetector._detect_situation_type","SituationDetector._is_conflict_active"],["ConversationsPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","FactExtractor.__init__"],["DashboardPage.__init__","BaseRepository.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_venue_research_step"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationsPage.__init__"],["ConversationsPage.__init__","ScoreCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","FullJourneyOrchestrator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceOnboardingFlow.__init__"],["ConversationRepository.__init__","NikitaMemory.__init__"],["LayerComposer.compose","_hours_since"],["ConversationThreadRepository.get_threads_for_prompt","ConversationThreadRepository.get_open_threads"],["LifeSimulator.get_events_for_context","LifeSimulator.get_recent_events"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DeliveryResult.__init__"],["VicePreferenceRepository.__init__","TestVicePreferenceRepository.__init__"],["MissingVariableError.__init__","TestUserMetricsRepository.__init__"],["TextPatternProcessor.process_for_sending","TextPatternProcessor.process"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer1Loader.__init__"],["VicePreferenceRepository.__init__","JobExecutionRepository.__init__"],["LifeSimulator.get_events_for_context","get_active_arcs"],["EventGenerator.generate_events_for_day","ScoreAnalyzer._call_llm"],["ConversationRepository.__init__","MissingVariableError.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResponseTimer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DecayProcessor.__init__"],["MissingVariableError.__init__","TestMoodDerivation.__init__"],["JobExecutionRepository.__init__","PromptLoader.__init__"],["TestContextPackagePopulation.mock_session_context","InboundCallHandler.__init__"],["UserMetricsRepository.__init__","ProfileRepository.__init__"],["UserRepository.__init__","HierarchicalPromptComposer.__init__"],["TestMoodDerivation.mock_session_context","TestEventStore.__aexit__"],["DailySummaryRepository.__init__","MessageHandler.__init__"],["UserMetricsRepository.__init__","MessageSplitter.__init__"],["ProfileRepository.__init__","PunctuationProcessor.__init__"],["UserRepository.is_onboarded","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointEngine.__init__"],["proxy","setAll"],["ScoreHistoryRepository.__init__","PunctuationProcessor.__init__"],["ConversationRepository.__init__","TestUserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DashboardE2ETest.__init__"],["TestMoodDerivation.mock_session_context","TestMoodDerivation.__aexit__"],["ConversationsPage.__init__","VoiceAgentConfig.__init__"],["TestMoodDerivation.mock_session_context","RegistrationHandler.__init__"],["ConversationsPage.__init__","VoiceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EventGenerator.__init__"],["ConversationRepository.__init__","TestMoodDerivation.__init__"],["ConversationsPage.__init__","EntityManager.__init__"],["EngagementStateRepository.__init__","NikitaThoughtRepository.__init__"],["VenueCacheRepository.cleanup_expired","OnboardingStateRepository.delete"],["CalibrationCalculator.compute","map_score_to_state"],["EngagementStateRepository.__init__","TriggerDetector.__init__"],["TestMoodDerivation.mock_session_context","ViceAnalyzer.__init__"],["JobExecutionRepository.__init__","Layer1Loader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LifeSimulator.__init__"],["EscalationManager._check_natural_resolution","_get_natural_resolution_probability"],["TestContextPackagePopulation.mock_session_context","PromptLoader.__init__"],["JobExecutionRepository.__init__","ResponseTimer.__init__"],["DailySummaryRepository.__init__","ConflictDetector.__init__"],["_create_nikita_agent","add_chapter_behavior"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","CommandHandler.__init__"],["ConversationThreadRepository.__init__","BasePage.__init__"],["ConflictDetector._find_intermediate_state","_get_severity"],["test_context","BackstoryRepository.create"],["DecayCalculator.calculate_decay","is_overdue"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MetaPromptService.__init__"],["DailySummaryRepository.__init__","DatabaseRateLimiter.__init__"],["LifeSimulator.get_events_for_context","get_recent_events"],["UserRepository.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StateComputer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DailySummaryRepository.__init__"],["PendingRegistrationRepository.cleanup_expired","delete"],["UserMetricsRepository.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TranscriptManager.__init__"],["UserNotFoundError.__init__","ScoreAnalyzer.__init__"],["TTSConfigService.get_final_settings","get_mood_modulation"],["DashboardPage.__init__","ProfileRepository.__init__"],["StateStore.get_conflict_history","StateStore._row_to_state"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DeliveryResult.__init__"],["VoiceService.initiate_call","VoiceService._get_first_message"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SessionDetector.__init__"],["BaseRepository.session","ScheduledEventRepository.session"],["NikitaMemory.add_episode","NikitaMemory.add_episode"],["count_tokens","get_token_validator"],["_ChapterBehaviorsProxy.get","get"],["DailySummaryRepository.__init__","DashboardPage.__init__"],["NikitaThoughtRepository.__init__","ConversationsPage.__init__"],["VoiceService.initiate_call","VoiceService._load_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SkipDecision.__init__"],["EngagementStateRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["UserRepository.update_game_status","PackageStore.get"],["VicePreferenceRepository.__init__","FactExtractor.__init__"],["LoginPage.__init__","BackstoryRepository.__init__"],["EngagementStateRepository.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationsPage.__init__"],["NikitaThoughtRepository.__init__","EscalationManager.__init__"],["UserMetricsRepository.calculate_composite","BackstoryRepository.get_by_user_id"],["TouchpointScheduler._evaluate_gap_trigger","TouchpointScheduler._get_initiation_rate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceScorer.__init__"],["OTPVerificationHandler.handle","MessageHandler._offer_onboarding_choice"],["UserRepository.complete_onboarding","OnboardingStateRepository.get"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step3_extract_all_js"],["DashboardPage.__init__","TokenValidator.__init__"],["InboundCallHandler._get_conversation_config_override","InboundCallHandler._get_first_message"],["ConversationRepository.__init__","FullJourneyOrchestrator.__init__"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._list_available_experiments"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointEngine.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","DashboardE2ETest.step1_navigate_command"],["BaseRepository.delete_by_id","PendingRegistrationRepository.get"],["BackstoryRepository.__init__","Layer6Handler.__init__"],["NeglectDetector.detect","_short_message_signal"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InstructionSelector.__init__"],["FactExtractor.extract_facts","FactExtractor._deduplicate_facts"],["PackageStore.exists","PackageStore.get"],["LoginPage.__init__","ConfigLoader.__init__"],["LayerComposer.compose","LayerComposer.compose"],["TestMoodDerivation.test_context_package_mood_from_simulator","TestContextPackagePopulation.mock_session_context"],["TouchpointEngine._deliver_single","_should_skip_for_dedup"],["detect_and_compose_situation","get_layer4_computer"],["VicePreferenceRepository.__init__","TelegramAuth.__init__"],["ConversationThreadRepository.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BackstoryRepository.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step4_db_query"],["ProfileRepository.get_by_user_id","TouchpointStore.get"],["JobExecutionRepository.__init__","DeliveryResult.__init__"],["DashboardPage.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RegistrationHandler.__init__"],["ProfileRepository.__init__","NikitaThoughtRepository.__init__"],["VoiceService.initiate_call","VoiceService._get_tts_settings"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ElevenLabsConversationsClient.__init__"],["ProfileRepository.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramWebhookSimulator.__init__"],["ConflictGenerator.should_generate_conflict","ConflictGenerator._check_should_skip"],["PackageStore.delete","PendingRegistrationRepository.delete"],["MissingVariableError.__init__","EngagementStateMachine.__init__"],["TestP1ErrorHandling.test_ep1_otp_expired_shows_expiry_message","navigate_and_get_content"],["DashboardPage.__init__","EmojiProcessor.__init__"],["GeneratedPromptRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceAnalyzer.__init__"],["EntityManager.get_projects","EventStore.get_entities_by_type"],["VoiceService._load_context","MetaPromptService._compute_nikita_mood"],["ConflictStore.reduce_severity","ConflictStore.update_conflict"],["ScoreHistoryRepository.__init__","NikitaThoughtRepository.__init__"],["MissingVariableError.__init__","MetaPromptService.__init__"],["ScoreHistoryRepository.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResponseDelivery.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EvidenceCollector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer6Handler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceService.__init__"],["EngagementStateRepository.__init__","VoiceAgentConfig.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationsE2ETest.__init__"],["UserMetricsRepository.__init__","Layer2Composer.__init__"],["EngagementStateRepository.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EventGenerator.__init__"],["UserNotFoundError.__init__","PostProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MoodCalculator.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._get_day_of_week"],["JobExecutionRepository.__init__","TouchpointEngine.__init__"],["handleSendOtp","validateEmail"],["GeneratedPromptRepository.__init__","_ProfileFromAnswers.__init__"],["TestContextPackagePopulation.mock_session_context","Layer5Injector.__init__"],["BossStateMachine.process_outcome","BossStateMachine.process_fail"],["TestMoodDerivation.mock_session_context","ResponseDelivery.__init__"],["ConversationRepository.__init__","EngagementStateMachine.__init__"],["TelegramBot.send_message_with_keyboard","escape_html"],["TestContextPackagePopulation.mock_session_context","DeliveryResult.__init__"],["StateStore.update_state","StateStore.get_current_state"],["VoiceCallScorer.apply_score","VoiceCallScorer.score_call"],["ProfileRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["MissingVariableError.__init__","SkipDecision.__init__"],["EscalationManager.check_escalation","EscalationManager._get_escalation_threshold"],["OnboardingStateRepository.get_or_create","_ChapterBehaviorsProxy.get"],["UserNotFoundError.__init__","OnboardingServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoringService.__init__"],["ConversationRepository.__init__","MetaPromptService.__init__"],["LoginPage.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DailySummaryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LifeSimulator.__init__"],["ProfileRepository.__init__","ScoreCalculator.__init__"],["ClinginessDetector.detect","ClinginessDetector._length_ratio_signal"],["ProfileRepository.__init__","HierarchicalPromptComposer.__init__"],["EventStore.get_active_arcs","_row_to_arc"],["VicePreferenceRepository.__init__","TranscriptManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceScorer.__init__"],["UserRepository.update_score","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserMetricsRepository.__init__"],["VicePreferenceRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestVicePreferenceRepositoryExtras.__init__"],["HandoffManager.transition","HandoffManager._update_user_status"],["ScoreHistoryRepository.__init__","HierarchicalPromptComposer.__init__"],["UserRepository.__init__","__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer2Composer.__init__"],["VoiceOnboardingFlow.process_ready_response","_initiate_call"],["TestOTPFlowSteps.test_step2_email_submission","step1_send_start"],["TestContextPackagePopulation.mock_session_context","TouchpointEngine.__init__"],["TestMoodDerivation.mock_session_context","LifeSimulator.__init__"],["EvidenceCollector.save_report","log"],["OnboardingStateRepository.add_answer","OnboardingStateRepository.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GmailHelper.__init__"],["ConversationRepository.__init__","SkipDecision.__init__"],["TestGraphUpdater.mock_memory_factory","TestEventStore.factory"],["LoginPage.__init__","DashboardE2ETest.__init__"],["TestP0CriticalHappyPath.test_ep4_no_auth_params_returns_error","TestHelpers.navigate_and_get_content"],["ConversationsPage.__init__","TestContextPackagePopulation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DecayProcessor.__init__"],["VicePreferenceRepository.__init__","ResolutionManager.__init__"],["UserNotFoundError.__init__","VoiceCallVerifier.__init__"],["ServerToolHandler._get_context","_compute_nikita_mood"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BaseRepository.__init__"],["RateLimiter.check","RateLimiter._seconds_until_midnight"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SupabaseHelper.__init__"],["VicePreferenceRepository.__init__","VenueResearchService.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector._can_transition"],["PackageStore.delete","TouchpointStore.delete"],["ScoreAnalyzer.analyze_batch","_call_llm_raw"],["UserRepository.__init__","UserRepository.__init__"],["VenueResearchService.create_venue_from_user_input","_extract_vibe"],["OnboardingStateRepository.update_step","OnboardingStateRepository.get"],["DashboardPage.__init__","GeneratedPromptRepository.__init__"],["NeglectDetector._frequency_signal","StateComputer._clamp"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EvidenceCollector.__init__"],["ProfileRepository.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","HandoffManager.__init__"],["validate_prompt","Layer1Loader.validate"],["JobExecutionRepository.__init__","ViceScorer.__init__"],["TelegramWebhookSimulator.send_command","_build_headers"],["NikitaThoughtRepository.__init__","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MetaNikitaConfig.__init__"],["ConversationRepository.__init__","InstructionSelector.__init__"],["VoiceService.end_call","VoiceService.end_session"],["OnboardingHandler.handle","_handle_scenario_selection_step"],["TestPortalLoginFlow.test_flow_instructions_generation","create"],["VoiceOnboardingFlow.get_current_step_message","get_ready_confirmation_message"],["UserRepository.__init__","TestContextPackagePopulation.__init__"],["OptimalFrequencyCalculator.get_bounds","get_tolerance_band"],["MissingVariableError.__init__","EventGenerator.__init__"],["ConversationThreadRepository.__init__","LoginPage.__init__"],["UserRepository.update_onboarding_profile","PackageStore.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RegistrationHandler.__init__"],["DashboardPage.__init__","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramWebhookSimulator.__init__"],["LoginPage.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceOnboardingFlow.__init__"],["ScoreHistoryRepository.__init__","VoiceAgentConfig.__init__"],["VoiceService._load_context","_get_user_name"],["ConversationsPage.__init__","FactExtractor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceAnalyzer.__init__"],["VoiceService._load_context","VoiceService._compute_nikita_mood"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GraphUpdater.__init__"],["VoiceService.initiate_call","MetaPromptService._load_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResponseDelivery.__init__"],["TestMoodDerivation.mock_session_context","MetaNikitaConfig.__init__"],["DynamicVariablesBuilder.build_from_user","ServerToolHandler._compute_nikita_energy"],["MissingVariableError.__init__","DailySummaryRepository.__init__"],["VicePreferenceRepository.__init__","MoodCalculator.__init__"],["TestOTPFlowSteps.test_step2_email_submission","step2_send_email"],["handle_server_tool","_validate_signed_token"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SummaryGenerator.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase1_instructions"],["DailySummaryRepository.__init__","BackstoryRepository.__init__"],["ConversationRepository.__init__","EventGenerator.__init__"],["OnboardingStateRepository.add_answer","PendingRegistrationRepository.get"],["GeneratedPromptRepository.__init__","BasePage.__init__"],["JobExecutionRepository.__init__","EvidenceCollector.__init__"],["ConversationThreadRepository.__init__","ScoreAnalyzer.__init__"],["TestFullPromptVisualVerification.test_full_prompt_generation_visual","mock_meta_prompt_service"],["BackstoryRepository.__init__","ProfileCollector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingStateRepository.__init__"],["VoiceEventScheduler.schedule_follow_up","_create_event"],["TestTurnScoring.test_score_turn_respects_chapter_weights","TestTurnScoring.capture_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DashboardPage.__init__"],["TestMemoryContextLoading.test_load_memory_context_graceful_degradation_no_graphiti","TestMemoryContextLoading.wrapped_method"],["NikitaThoughtRepository.__init__","UserMetricsRepository.__init__"],["_ChapterBehaviorsProxy.get","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LifeSimulator.__init__"],["RecoveryManager.apply_decay_recovery","RecoveryManager._get_de_escalated_state"],["_ChapterBehaviorsProxy.items","items"],["BackstoryRepository.__init__","RecoveryManager.__init__"],["DailySummaryRepository.__init__","ConfigLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserMetricsRepository.__init__"],["ScoreAnalyzer._call_llm","ScoreAnalyzer._build_analysis_prompt"],["BaseRepository.get","InMemoryCache.get"],["ConversationRepository.__init__","DailySummaryRepository.__init__"],["OnboardingHandler._handle_drug_tolerance_step","_validate_drug_tolerance"],["TestMoodDerivation.mock_session_context","ConversationsE2ETest.__init__"],["ScoreCalculator.apply_multiplier","ScoreCalculator.adjust"],["StateStore.update_state","get_current_state"],["ConversationsPage.__init__","EngagementStateRepository.__init__"],["BackstoryRepository.__init__","TextPatternProcessor.__init__"],["BaseRepository.delete","PendingRegistrationRepository.delete"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ProfileCollector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ProfileRepository.__init__"],["UserRepository.is_onboarded","get"],["PostProcessingPipeline._run_touchpoint_scheduling","mark_completed"],["TestContextPackagePopulation.mock_session_context","EvidenceCollector.__init__"],["get_package_store","get_package_store"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageSplitter.__init__"],["Layer1Loader.prompt","ConversationConfigBuilder._generate_fallback_prompt"],["MessageSplitter._find_split_points","split"],["EngagementStateRepository.__init__","TestContextPackagePopulation.__init__"],["PostProcessingPipeline._run_emotional_state_update","mark_completed"],["VicePreferenceRepository.__init__","DecayProcessor.__init__"],["UserRepository.__init__","EngagementStateRepository.__init__"],["MissingVariableError.__init__","RegistrationHandler.__init__"],["InboundCallHandler.handle_incoming_call","VoiceSessionManager.create_session"],["MessageGenerator.__init__","MessageGenerator._load_template"],["BackstoryRepository.__init__","NikitaMemory.__init__"],["UserRepository.set_boss_fight_status","OnboardingStateRepository.get"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow.get_ready_confirmation_message"],["ConversationsPage.__init__","PreferenceConfigurator.__init__"],["MissingVariableError.__init__","ViceAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GraphUpdater.__init__"],["ConversationsPage.__init__","TranscriptManager.__init__"],["UserNotFoundError.__init__","StateStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TextPatternProcessor.__init__"],["SituationDetector._build_metadata","_is_long_gap"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DecayCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageHandler.__init__"],["HierarchicalPromptComposer.compose","_compose_layer6"],["InMemoryCache.incr","OnboardingStateRepository.get"],["VicePreferenceRepository.__init__","HandoffManager.__init__"],["TestPackageLoadPerformance.test_package_creation_p99_under_50ms","create_realistic_package"],["GeneratedPromptRepository.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MetaNikitaConfig.__init__"],["BackstoryRepository.create_from_scenario","_ChapterBehaviorsProxy.get"],["ConversationsPage.__init__","SessionDetector.__init__"],["TemplateGenerator.generate_prompt_legacy","TemplateGenerator._layer1_core_identity"],["LoginPage.__init__","__init__"],["DailySummaryRepository.__init__","GmailHelper.__init__"],["ConversationThreadRepository.__init__","PostProcessor.__init__"],["run_manual_otp_test","create"],["TestLayer5KnowledgeInnerLife.test_layer5_with_user_facts","_create_context_with_knowledge"],["EngagementStateRepository.__init__","FactExtractor.__init__"],["UserRepository.__init__","PreferenceConfigurator.__init__"],["ConversationRepository.__init__","RegistrationHandler.__init__"],["TestMoodDerivation.mock_session_context","MessageHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PendingRegistrationRepository.__init__"],["EmojiProcessor.process","EmojiProcessor._add_emoji"],["EngagementStateMachine._apply_transition","EngagementStateMachine._reset_counters"],["VoiceOnboardingFlow.handle_message","process_phone_input"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResponseDelivery.__init__"],["ConversationRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EmojiProcessor.__init__"],["BackstoryRepository.__init__","TestUserMetricsRepository.__init__"],["PostProcessingPipeline._run_emotional_state_update","ProcessingStep.mark_completed"],["RateLimiter.get_remaining","_ChapterBehaviorsProxy.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","__init__"],["TestPackageLoadPerformance.test_package_serialization_p99_under_20ms","create_realistic_package"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockResult.__init__"],["ConversationThreadRepository.__init__","OnboardingServerToolHandler.__init__"],["FactExtractor.extract_facts","_call_llm_for_extraction"],["TTSConfigService.get_final_settings","_blend_settings"],["BackstoryRepository.__init__","TestMoodDerivation.__init__"],["JobExecutionRepository.__init__","GraphUpdater.__init__"],["JobExecutionRepository.__init__","DecayCalculator.__init__"],["DailySummaryRepository.__init__","DashboardE2ETest.__init__"],["PostProcessingPipeline._run_package_storage","ProcessingStep.mark_running"],["detect_and_compose_situation","detect_and_compose"],["MessageHandler._score_and_check_boss","_update_engagement_after_scoring"],["ProfileRepository.__init__","UserRepository.__init__"],["PendingRegistrationRepository.cleanup_expired","BaseRepository.delete"],["UserMetricsRepository.__init__","OTPFlowE2ETest.__init__"],["BaseRepository.delete","TouchpointStore.delete"],["TestMoodDerivation.mock_session_context","ConflictDetector.__init__"],["PostProcessingPipeline._run_summary_generation","ScheduledEventRepository.mark_failed"],["UserRepository.set_boss_fight_status","PendingRegistrationRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LifeSimulator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestUserMetricsRepository.__init__"],["ProfileRepository.__init__","TestContextPackagePopulation.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ServerToolHandler.__init__"],["BaseRepository.session","PendingRegistrationRepository.session"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","CommandHandler.__init__"],["ScoreHistoryRepository.__init__","UserRepository.__init__"],["InMemoryCache.incr","PendingRegistrationRepository.get"],["MockAgentHelper.mock_get_agent","MockAgentHelper.create_mock_deps"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DashboardPage.__init__"],["EngagementStateRepository.__init__","EngagementStateRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestMoodDerivation.__init__"],["UserMetricsRepository.__init__","Phase1Registration.__init__"],["StateComputer._apply_life_event_deltas","_apply_life_event_deltas"],["BackstoryRepository.create_from_scenario","WebhookTestData.create"],["MetaPromptService._validate_token_budget","MetaPromptService._count_tokens"],["SituationDetector._detect_situation_type","_is_evening"],["ScoreHistoryRepository.__init__","TestContextPackagePopulation.__init__"],["ConversationThreadRepository.__init__","VoiceCallVerifier.__init__"],["NeglectDetector._response_time_signal","StateComputer._clamp"],["UserMetricsRepository.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreHistoryRepository.__init__"],["TestContextPackagePopulation.mock_session_context","GraphUpdater.__init__"],["JobExecutionRepository.__init__","MockResult.__init__"],["ProfileCollector.get_missing_fields","ViceScorer.get_profile"],["TestLayer2CurrentMoment.test_layer2_time_of_day_variations","TestLayer2CurrentMoment._create_context"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_uses_chapter_specific_rates","create_mock_user"],["PostProcessingPipeline._run_conflict_check","mark_running"],["TestMoodDerivation.mock_session_context","DashboardPage.__init__"],["ConversationsPage.__init__","OTPVerificationHandler.__init__"],["UserNotFoundError.__init__","Layer3Composer.__init__"],["MissingVariableError.__init__","TelegramWebhookSimulator.__init__"],["ProfileRepository.__init__","FactExtractor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LayerComposer.__init__"],["DashboardPage.__init__","InstructionSelector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LengthAdjuster.__init__"],["TestContextPackagePopulation.mock_session_context","RateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OTPFlowE2ETest.__init__"],["EngagementStateRepository.__init__","PreferenceConfigurator.__init__"],["EngagementStateRepository.__init__","TranscriptManager.__init__"],["EvidenceCollector.save_report","generate_report"],["VicePromptInjector.inject","Layer5Injector.inject"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageHandler.__init__"],["analyze_distraction","_clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer2Composer.__init__"],["MissingVariableError.__init__","ResponseDelivery.__init__"],["EngagementStateRepository.__init__","SessionDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MetaNikitaConfig.__init__"],["UserRepository.__init__","OTPVerificationHandler.__init__"],["UserRepository.__init__","TemplateGenerator.__init__"],["UserNotFoundError.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BackstoryRepository.__init__"],["RateLimiter.check","_get_day_key"],["VicePreferenceRepository.__init__","Layer6Handler.__init__"],["TestContextPackagePopulation.mock_session_context","MockResult.__init__"],["validate_prompt","validate"],["TranscriptManager.store_facts_batch","TranscriptManager.store_fact"],["ExperimentLoader._load_experiment_with_inheritance","_load_experiment_with_inheritance"],["OnboardingStateRepository.get_or_create","get"],["VoiceOnboardingFlow._save_deferred_state","_update_state"],["HandoffManager.execute_handoff","generate"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.normalize_phone"],["HierarchicalPromptComposer.compose","Layer4Computer.compose"],["ConversationRepository.__init__","TelegramWebhookSimulator.__init__"],["UserRepository.complete_onboarding","BaseRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScheduledEventRepository.__init__"],["trigger_pipeline_background","trigger_pipeline"],["get_memory_client","NikitaMemory.initialize"],["DashboardPage.__init__","Phase1Registration.__init__"],["UserMetricsRepository.__init__","Layer4Computer.__init__"],["UserRepository.update_score","get"],["TestNikitaThoughtRepository.test_create_missing_him_thought_72h","TestNikitaThoughtRepository.mock_create_thought"],["PostProcessingPipeline.process","_run_conflict_check"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","JourneyReport.__init__"],["DashboardPage.__init__","EventStore.__init__"],["UserNotFoundError.__init__","TokenValidator.__init__"],["HandoffManager.transition","HandoffManager._send_first_message"],["JobExecutionRepository.__init__","LengthAdjuster.__init__"],["MissingVariableError.__init__","LifeSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConfigLoader.__init__"],["ConversationRepository.__init__","ResponseDelivery.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StateComputer.__init__"],["TestDashboardE2E.test_verification_instructions","ConversationsE2ETest.get_verification_instructions"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VicePreferenceRepository.__init__"],["UserRepository.increment_boss_attempts","PackageStore.get"],["PostProcessingPipeline._run_life_simulation","mark_running"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InMemoryCache.__init__"],["TemplateGenerator.generate_prompt_legacy","_load_context"],["BaseRepository.update","session"],["GeneratedPromptRepository.__init__","ScoreAnalyzer.__init__"],["ConversationsPage.__init__","HandoffManager.__init__"],["ProfileRepository.__init__","EngagementStateRepository.__init__"],["MissingVariableError.__init__","UserMetricsRepository.__init__"],["SummaryGenerator._update_daily_summary","_generate_summary_text"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StrategicSilence.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationsE2ETest.__init__"],["MetaPromptService._load_context","MetaPromptService._load_behavioral_instructions"],["with_timeout_fallback","wrapper"],["ViceScorer.get_profile","ViceScorer._get_vice_repo"],["deep_merge","deep_merge"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockMappings.__init__"],["BackstoryRepository.__init__","EngagementStateMachine.__init__"],["Layer4Computer.detect_and_compose","Layer2Composer.compose"],["ProfileRepository.update_from_onboarding","BaseRepository.get"],["UserMetricsRepository.__init__","PortalLoginE2ETest.__init__"],["SummaryGenerator.generate","SummaryGenerator._update_weekly_summary"],["ViceScorer.get_top_vices","get_profile"],["NikitaThoughtRepository.__init__","ServerToolHandler.__init__"],["UserNotFoundError.__init__","TelegramBot.__init__"],["ScoreHistoryRepository.__init__","EngagementStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationConfigBuilder.__init__"],["TestMoodDerivation.mock_session_context","StateComputer.__init__"],["TestContextPackagePopulation.test_context_package_gets_life_events","mock_session_context"],["MetaPromptService._load_context","ServerToolHandler._compute_nikita_activity"],["ConflictDetector.check_escalation","ConflictDetector.detect_conflict_state"],["UserRepository.is_onboarded","TouchpointStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BreakupManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ServerToolHandler.__init__"],["InMemoryCache.get","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DashboardPage.__init__"],["ConversationRepository.__init__","LifeSimulator.__init__"],["Layer5Injector.inject","_format_user_facts"],["DailySummaryRepository.__init__","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer4Computer.__init__"],["ProfileRepository.__init__","PreferenceConfigurator.__init__"],["ProfileRepository.__init__","TranscriptManager.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_location_step"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","HierarchicalPromptComposer.__init__"],["VicePreferenceRepository.__init__","ScoreHistoryRepository.__init__"],["ConversationsPage.__init__","SummaryGenerator.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","TouchpointStore.create"],["UserNotFoundError.__init__","PostProcessingPipeline.__init__"],["inject_context","Layer5Injector.inject"],["ConversationsPage.__init__","NarrativeArcManager.__init__"],["MessageHandler.handle","_needs_onboarding"],["ConversationsPage.build_verification_sequence","js_get_all_conversations_data"],["ConversationThreadRepository.__init__","StateStore.__init__"],["ProfileRepository.__init__","SessionDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EngagementStateMachine.__init__"],["ElevenLabsConversationsClient.get_conversation","_headers"],["ScoreHistoryRepository.__init__","PreferenceConfigurator.__init__"],["LoginPage.__init__","PendingRegistrationRepository.__init__"],["ConversationsPage.__init__","OnboardingStateRepository.__init__"],["_ChapterBehaviorsProxy.get","_load_chapter_behaviors"],["UserNotFoundError.__init__","RecoveryManager.__init__"],["UserMetricsRepository.__init__","PackageStore.__init__"],["MissingVariableError.__init__","MetaNikitaConfig.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._check_availability"],["EngagementStateRepository.__init__","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BackstoryGeneratorService.__init__"],["ProfileRepository.get_by_user_id","OnboardingStateRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GmailHelper.__init__"],["BackstoryRepository.__init__","SkipDecision.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GmailMCPClient.__init__"],["ConflictGenerator.generate","_select_conflict_type"],["UserRepository.apply_decay","UserRepository.update_score"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ElevenLabsConversationsClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ExperimentLoader.__init__"],["UserRepository.__init__","NarrativeArcManager.__init__"],["ScoringService.score_interaction","ScoringService._log_history"],["PackageStore.delete","delete"],["TouchpointStore.get_due_touchpoints","TouchpointStore._to_pydantic"],["TelegramAuth.verify_magic_link","TelegramAuth.register_user"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageHandler.__init__"],["TestLifeSimulationStep.test_pipeline_calls_life_simulator","get_pipeline_patches"],["UserRepository.__init__","OnboardingStateRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceService.__init__"],["InboundCallHandler._get_conversation_config_override","ConversationConfigBuilder._get_first_message"],["TestMoodDerivation.mock_session_context","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VicePreferenceRepository.__init__"],["TestP1ErrorHandling.test_ep3_access_denied_shows_invalid_message","TestHelpers.navigate_and_get_content"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictGenerator.__init__"],["ConversationRepository.__init__","MetaNikitaConfig.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SkipDecision.__init__"],["UserMetricsRepository.__init__","MessageGenerator.__init__"],["MissingVariableError.__init__","ConversationsE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockMappings.__init__"],["VoiceService.format_text_history_for_voice","get_context_with_text_history"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PackageStore.__init__"],["UserNotFoundError.__init__","MissingVariableError.__init__"],["UserMetricsRepository.__init__","ConversationThreadRepository.__init__"],["BaseRepository.delete_by_id","InMemoryCache.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BackstoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BreakupManager.__init__"],["OnboardingStateRepository.update_step","BaseRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StateComputer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceService.__init__"],["EngagementStateRepository.__init__","HandoffManager.__init__"],["WebhookTestData.create","SupabaseHelper.generate_test_email"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EntityManager.__init__"],["OTPEmailParser.parse_magic_link_email","extract_magic_link"],["UserNotFoundError.__init__","GeneratedPromptRepository.__init__"],["PreferenceConfigurator.get_conversation_style_config","PreferenceConfigurator.get_preferences"],["BackstoryRepository.__init__","EventGenerator.__init__"],["LoginPage.__init__","TokenCounter.__init__"],["ProfileRepository.get_by_user_id","PendingRegistrationRepository.get"],["TestMoodDerivation.mock_session_context","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConfigLoader.__init__"],["UserMetricsRepository.__init__","TouchpointScheduler.__init__"],["JobExecutionRepository.__init__","VicePreferenceRepository.__init__"],["MessageHandler.handle","CommandHandler.handle"],["UserMetricsRepository.__init__","TouchpointStore.__init__"],["ConversationRepository.__init__","ConversationsE2ETest.__init__"],["UserNotFoundError.__init__","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","ConflictGenerator.__init__"],["TemplateGenerator.generate_prompt_legacy","_layer6_response_guidelines"],["UserMetricsRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ProfileRepository.__init__","OTPVerificationHandler.__init__"],["EscalationManager.check_escalation","_get_time_in_level"],["UserRepository.__init__","PromptLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestVicePreferenceRepository.__init__"],["JobExecutionRepository.__init__","MockMappings.__init__"],["TelegramWebhookSimulator.send_message","_build_update"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DashboardPage.__init__"],["DynamicVariablesBuilder.build_from_context","_compute_nikita_activity"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","JobExecutionRepository.__init__"],["TranscriptManager.generate_summary","_summarize_via_llm"],["DashboardPage.__init__","VoiceSessionManager.__init__"],["BackstoryRepository.__init__","DailySummaryRepository.__init__"],["ConversationThreadRepository.__init__","Layer3Composer.__init__"],["GeneratedPromptRepository.__init__","VoiceCallVerifier.__init__"],["BackstoryRepository.create_from_scenario","get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationThreadRepository.__init__"],["UserMetricsRepository.__init__","VenueCacheRepository.__init__"],["TestMoodDerivation.mock_session_context","ConfigLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer1Loader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenCounter.__init__"],["EngagementStateRepository.__init__","SummaryGenerator.__init__"],["ClinginessDetector.detect","UserMetricsRepository._clamp"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EventGenerator.__init__"],["EngagementStateRepository.__init__","NarrativeArcManager.__init__"],["ScoreHistoryRepository.__init__","TemplateGenerator.__init__"],["JobExecutionRepository.__init__","BreakupManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BaseRepository.__init__"],["RecoveryManager.check_point_of_no_return","RecoveryManager._get_game_over_reason"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResponseTimer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SupabaseHelper.__init__"],["MissingVariableError.__init__","MessageHandler.__init__"],["test_context","PortalLoginTestContext.create"],["ConversationConfigBuilder.build_config","InboundCallHandler._get_first_message"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LayerComposer.__init__"],["JobExecutionRepository.__init__","VoiceService.__init__"],["EngagementStateRepository.__init__","OnboardingStateRepository.__init__"],["DashboardPage.__init__","MessageGenerator.__init__"],["EvidenceCollector.save_report","EvidenceCollector._ensure_dirs"],["JobExecutionRepository.__init__","EntityManager.__init__"],["TestOTPFlowSteps.test_step1_start_command","step1_send_start"],["TestContextPackagePopulation.mock_session_context","JourneyReport.__init__"],["PostProcessingPipeline._run_package_storage","mark_failed"],["NikitaThoughtRepository.__init__","ElevenLabsConversationsClient.__init__"],["VicePreferenceRepository.__init__","TextPatternProcessor.__init__"],["LoginPage.__init__","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GmailMCPClient.__init__"],["ViceBoundaryEnforcer.max_intensity_for_chapter","max_intensity_for_chapter"],["TestContextPackagePopulation.mock_session_context","VicePreferenceRepository.__init__"],["TouchpointStore.mark_skipped","TouchpointStore._to_pydantic"],["ConversationThreadRepository.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ElevenLabsConversationsClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MetaInstructionEngine.__init__"],["RateLimiter.__init__","_ChapterBehaviorsProxy.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointStore.__init__"],["BackstoryRepository.__init__","ConversationsPage.__init__"],["LoginPage.__init__","ConflictStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceOnboardingFlow.__init__"],["VicePromptInjector._build_vice_section","_intensity_label"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DailySummaryRepository.__init__"],["EscalationManager.get_escalation_timeline","_get_natural_resolution_probability"],["OnboardingStateRepository.get_or_create","TouchpointStore.get"],["LoginPage.__init__","InMemoryCache.__init__"],["NikitaThoughtRepository.__init__","ViceService.__init__"],["TestContextPackagePopulation.mock_session_context","MockMappings.__init__"],["LoginPage.__init__","StrategicSilence.__init__"],["UserRepository.update_score","TouchpointStore.get"],["TestContextPackagePopulation.mock_session_context","TestEventStore.__aenter__"],["ConversationRepository.__init__","MessageHandler.__init__"],["BaseRepository.update","OTPTestContext.create"],["DashboardPage.__init__","TouchpointScheduler.__init__"],["RecoveryManager.apply_recovery","RecoveryManager.apply_recovery"],["ConversationsPage.__init__","ScoreHistoryRepository.__init__"],["MissingVariableError.__init__","ConflictDetector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VenueCacheRepository.__init__"],["TestContextPackagePopulation.mock_session_context","BreakupManager.__init__"],["ConversationThreadRepository.__init__","TokenValidator.__init__"],["ProfileRepository.__init__","HandoffManager.__init__"],["JobExecutionRepository.__init__","ExperimentLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserNotFoundError.__init__"],["PackageStore.cleanup_expired","OnboardingStateRepository.delete"],["DashboardPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["UserRepository.update_onboarding_status","PackageStore.get"],["UserNotFoundError.__init__","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OTPFlowE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictStore.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","_update_state"],["TestMoodDerivation.mock_session_context","GmailHelper.__init__"],["ConflictStore.get_conflict_summary","get_user_conflicts"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationsPage.__init__"],["NikitaThoughtRepository.create_missing_him_thought","create_thought"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BackstoryRepository.__init__"],["BackstoryRepository.__init__","ViceAnalyzer.__init__"],["ConversationThreadRepository.__init__","TelegramBot.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StrategicSilence.__init__"],["_ChapterBehaviorsProxy.get","OnboardingStateRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DashboardE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StateComputer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase1Registration.__init__"],["MissingVariableError.__init__","ServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestVicePreferenceRepository.__init__"],["PostProcessingPipeline._run_conflict_check","ConversationRepository.mark_failed"],["TokenValidator.truncate_layers","TokenValidator.count_tokens"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","__init__"],["DailySummaryRepository.__init__","PendingRegistrationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","JobExecutionRepository.__init__"],["CalibrationCalculator.compute","CalibrationCalculator._timing_component"],["MissingVariableError.__init__","DashboardPage.__init__"],["ConversationsPage.__init__","Layer5Injector.__init__"],["ConversationRepository.__init__","ConflictDetector.__init__"],["FullJourneyOrchestrator.get_cleanup_instructions","FullJourneyOrchestrator.get_cleanup_sql"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EventStore.__init__"],["TelegramWebhookSimulator.send_command","TelegramWebhookSimulator._build_headers"],["extract_magic_link_from_html","GmailHelper._extract_magic_link"],["MessageHandler.handle","MessageHandler._apply_text_patterns"],["VicePreferenceRepository.__init__","TestUserMetricsRepository.__init__"],["ProfileRepository.__init__","SummaryGenerator.__init__"],["ProfileRepository.__init__","NarrativeArcManager.__init__"],["TextPatternProcessor.process","_detect_context"],["MessageSplitter._find_split_points","MessageSplitter._merge_short_sentences"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConfigLoader.__init__"],["CalibrationCalculator.compute","_frequency_component"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._build_user"],["BaseRepository.delete","delete"],["TestMoodDerivation.mock_session_context","DashboardE2ETest.__init__"],["VicePreferenceRepository.__init__","TestMoodDerivation.__init__"],["DashboardPage.__init__","CommandHandler.__init__"],["ProfileRepository.__init__","OnboardingStateRepository.__init__"],["LayerComposer.compose","_get_today_summary"],["TestOTPFlowSteps.test_step3_otp_parsing","OTPFlowE2ETest.step3_parse_otp_from_email"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","TestHelpers.create_fake_jwt"],["ConversationThreadRepository.__init__","PostProcessingPipeline.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ProfileRepository.__init__"],["SupabaseHelper.verify_registration_from_result","SupabaseHelper.parse_mcp_result"],["ScoreHistoryRepository.__init__","NarrativeArcManager.__init__"],["UserRepository.__init__","Layer5Injector.__init__"],["ConversationThreadRepository.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageSplitter.__init__"],["LoginPage.__init__","InboundCallHandler.__init__"],["NikitaThoughtRepository.expire_missing_him_thoughts","NikitaThoughtRepository.get_active_thoughts"],["NikitaThoughtRepository.__init__","BaseRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserRepository.__init__"],["ScoreHistoryRepository.__init__","OnboardingStateRepository.__init__"],["ConversationRepository.__init__","ServerToolHandler.__init__"],["NikitaThoughtRepository.__init__","SupabaseHelper.__init__"],["TestLayer2CurrentMoment.test_layer2_time_of_day_variations","_create_context"],["ConversationRepository.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BackstoryGeneratorService.__init__"],["GeneratedPromptRepository.__init__","StateStore.__init__"],["OnboardingStateRepository.add_answer","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SupabaseHelper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramAuth.__init__"],["ServerToolHandler._get_context","VoiceService._compute_nikita_energy"],["VicePreferenceRepository.__init__","LayerComposer.__init__"],["JobExecutionRepository.__init__","TestVicePreferenceRepository.__init__"],["TelegramAuth.verify_magic_link","register_user"],["ConversationsPage.__init__","VoiceCallScorer.__init__"],["TestContextPackagePopulation.mock_session_context","BasePage.__init__"],["JobExecutionRepository.__init__","JobExecutionRepository.__init__"],["TestMoodDerivation.mock_session_context","MessageSplitter.__init__"],["UserNotFoundError.__init__","MetaPromptService.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","TestHelpers.navigate_and_get_content"],["LoginPage.build_login_sequence","js_click_submit"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InboundCallHandler.__init__"],["NikitaThoughtRepository.__init__","VoiceOnboardingFlow.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GmailMCPClient.__init__"],["EventStore.save_events","EventStore.save_event"],["ConversationsPage.__init__","ConversationConfigBuilder.__init__"],["PostProcessingPipeline._run_life_simulation","ConversationRepository.mark_failed"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LoginPage.__init__"],["VoiceCallVerifier._verify_database","_check_user_exists"],["VicePreferenceRepository.__init__","MetaInstructionEngine.__init__"],["ConversationThreadRepository.__init__","NikitaMemory.__init__"],["TestLayer4ConversationHistory.test_layer4_with_open_threads","TestLayer4ConversationHistory._create_context_with_history"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceOnboardingFlow.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer4Computer.__init__"],["TestExtractionStage.test_stage_extraction_parses_llm_response","mock_meta_prompt_service"],["LoginPage.__init__","PromptLoader.__init__"],["GeneratedPromptRepository.__init__","BaseRepository.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","OTPTestContext.create"],["UserRepository.update_last_interaction","get"],["ServerToolHandler._get_context","MetaPromptService._compute_nikita_energy"],["EmojiProcessor._validate_existing_emojis","_count_emojis"],["DailySummaryRepository.__init__","TemplateGenerator.__init__"],["DailySummaryRepository.__init__","TokenCounter.__init__"],["ConversationThreadRepository.__init__","MissingVariableError.__init__"],["MetaPromptService.generate_daily_summary","TemplateGenerator._load_context"],["run_manual_otp_test","BackstoryRepository.create"],["EngagementStateRepository.__init__","ScoreHistoryRepository.__init__"],["PostProcessingPipeline._run_package_storage","ProcessingStep.mark_failed"],["MissingVariableError.__init__","StateComputer.__init__"],["analyze_distraction","_get_cache_key"],["UserMetricsRepository.__init__","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase2Conversation.__init__"],["UserRepository.advance_chapter","_ChapterBehaviorsProxy.get"],["ConflictDetector.can_transition_to","ConflictDetector._can_transition"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._update_onboarding_status"],["TestContextPackagePopulation.mock_session_context","JobExecutionRepository.__init__"],["HierarchicalPromptComposer.compose","HierarchicalPromptComposer.compose"],["UserMetricsRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PortalLoginE2ETest.__init__"],["ConversationThreadRepository.__init__","GeneratedPromptRepository.__init__"],["UserMetricsRepository.__init__","OnboardingHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PromptLoader.__init__"],["BackstoryRepository.__init__","TelegramWebhookSimulator.__init__"],["ScoreHistoryRepository.__init__","PromptLoader.__init__"],["GraphUpdater.update","GraphUpdater._process_assistant_message"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoringService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BackstoryRepository.__init__"],["UserNotFoundError.__init__","InstructionSelector.__init__"],["LoginPage.__init__","Layer1Loader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DashboardE2ETest.__init__"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._next_message_id"],["LoginPage.__init__","ResponseTimer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceScorer.__init__"],["BackstoryRepository.__init__","ResponseDelivery.__init__"],["EngagementStateRepository.__init__","Layer5Injector.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","TouchpointStore.create"],["TouchpointEngine._send_telegram_message","_get_chat_id"],["ConversationRepository.__init__","StateComputer.__init__"],["ConflictStore.increment_resolution_attempts","ConflictStore.update_conflict"],["TestContextPackagePopulation.mock_session_context","Phase4GameState.__init__"],["DailySummaryRepository.__init__","UserNotFoundError.__init__"],["TestLayer4ConversationHistory.test_layer4_with_last_conversation","TestLayer4ConversationHistory._create_context_with_history"],["NikitaThoughtRepository.__init__","ProfileRepository.__init__"],["TokenCounter.fits_budget","count_tokens"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramAuth.__init__"],["BackstoryRepository.create_from_scenario","TouchpointStore.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PackageStore.__init__"],["DailySummaryRepository.__init__","ConflictStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramWebhookSimulator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResolutionManager.__init__"],["DailySummaryRepository.__init__","InMemoryCache.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer1Loader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageSplitter.__init__"],["_ChapterBehaviorsProxy.keys","_load_chapter_behaviors"],["GeneratedPromptRepository.__init__","Layer3Composer.__init__"],["DailySummaryRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VenueResearchService.__init__"],["MissingVariableError.__init__","GmailMCPClient.__init__"],["VicePreferenceRepository.__init__","EngagementStateMachine.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LoginPage.__init__"],["ViceAnalyzer._analyze_with_llm","ViceAnalyzer._get_agent"],["BackstoryRepository.__init__","LifeSimulator.__init__"],["ViceService.get_prompt_context","get_probe_categories"],["MissingVariableError.__init__","ElevenLabsConversationsClient.__init__"],["LifeSimulator.get_active_arcs","NarrativeArcManager.get_active_arcs"],["LoginPage.__init__","VenueCacheRepository.__init__"],["CalibrationCalculator.compute","_timing_component"],["ConversationThreadRepository.bulk_resolve_threads","ConversationThreadRepository.resolve_thread"],["VicePreferenceRepository.__init__","BackstoryGeneratorService.__init__"],["GmailHelper.wait_for_magic_link","_get_latest_magic_link_email"],["BackstoryRepository.__init__","UserMetricsRepository.__init__"],["VoiceService.initiate_call","VoiceAgentConfig._get_first_message"],["RateLimiter.get_remaining","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceSessionManager.__init__"],["EngagementStateRepository.__init__","VoiceCallScorer.__init__"],["DashboardPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["build_dynamic_variables","build_from_user"],["DashboardPage.__init__","OnboardingHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer2Composer.__init__"],["GeneratedPromptRepository.__init__","ProfileRepository.__init__"],["ProfileRepository.__init__","ScoreHistoryRepository.__init__"],["main","JourneyReport.generate_report"],["VoiceService.initiate_call","_get_tts_settings"],["UserMetricsRepository.__init__","Phase3Portal.__init__"],["EngagementStateRepository.__init__","ConversationConfigBuilder.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase2Conversation.__init__"],["PackageStore.delete","BaseRepository.delete"],["UserRepository.set_boss_fight_status","InMemoryCache.get"],["TestDecayCalculatorIsOverdue.test_is_overdue_within_grace_returns_false","create_mock_user"],["TestResponseTimer.test_ac_4_1_6_jitter_prevents_exact_patterns","mock_production_settings"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageGenerator.__init__"],["JobExecutionRepository.__init__","TelegramAuth.__init__"],["ConversationRepository.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationThreadRepository.__init__"],["InMemoryCache.incr","InMemoryCache.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VenueCacheRepository.__init__"],["ConversationThreadRepository.__init__","FullJourneyOrchestrator.__init__"],["ConversationRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestMoodDerivation.mock_session_context","Layer2Composer.__init__"],["NikitaThoughtRepository.__init__","EmojiProcessor.__init__"],["PostProcessingPipeline.process","_run_package_storage"],["ClinginessDetector._double_text_signal","UserMetricsRepository._clamp"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MoodCalculator.__init__"],["LoginPage.__init__","DeliveryResult.__init__"],["session","session_maker"],["EvidenceCollector.end_phase","log"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GmailHelper.__init__"],["VicePreferenceRepository.__init__","SkipDecision.__init__"],["MissingVariableError.__init__","BackstoryRepository.__init__"],["GeneratedPromptRepository.__init__","TokenValidator.__init__"],["JobExecutionRepository.__init__","LoginPage.__init__"],["TestDecayProcessorProcessAll.test_process_all_tracks_game_overs","create_mock_user"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._initiate_call"],["ConfigLoader.__new__","__new__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PendingRegistrationRepository.__init__"],["ProfileRepository.__init__","Layer5Injector.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_metrics"],["ConversationsPage.__init__","LayerComposer.__init__"],["BackstoryRepository.__init__","MetaNikitaConfig.__init__"],["DailySummaryRepository.__init__","InboundCallHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["Layer1Loader.prompt","Layer1Loader._generate_fallback_prompt"],["ScoreHistoryRepository.__init__","Layer5Injector.__init__"],["MissingVariableError.__init__","ConfigLoader.__init__"],["GeneratedPromptRepository.__init__","TelegramBot.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DeliveryResult.__init__"],["ProfileCollector.is_complete","ProfileCollector.get_profile"],["LoginPage.__init__","TouchpointEngine.__init__"],["ConversationsPage.__init__","MetaInstructionEngine.__init__"],["JobExecutionRepository.__init__","Phase2Conversation.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResolutionManager.__init__"],["TTSConfigService.get_final_settings","TTSConfigService.get_mood_modulation"],["DashboardPage.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DashboardE2ETest.__init__"],["GeneratedPromptRepository.__init__","EmojiProcessor.__init__"],["UserRepository.is_onboarded","OnboardingStateRepository.get"],["ConversationRepository.__init__","BackstoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VenueResearchService.__init__"],["CommandHandler._handle_status","CommandHandler._get_chapter_name"],["MetaPromptService._load_context","DynamicVariablesBuilder._compute_nikita_activity"],["DashboardPage.__init__","Phase3Portal.__init__"],["TelegramAuth.verify_magic_link","verify_otp_code"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","_ProfileFromAnswers.__init__"],["BaseRepository.update","PackageStore.get"],["UserNotFoundError.__init__","RegistrationHandler.__init__"],["TestContextPackagePopulation.mock_session_context","LoginPage.__init__"],["MissingVariableError.__init__","SupabaseHelper.__init__"],["TextPatternProcessor.process","TextPatternProcessor.process"],["UserNotFoundError.__init__","ViceAnalyzer.__init__"],["ProfileRepository.__init__","VoiceCallScorer.__init__"],["DailySummaryRepository.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DecayProcessor.__init__"],["ClinginessDetector.detect","_clamp"],["ConversationRepository.__init__","ConfigLoader.__init__"],["get_pipeline_patches","create_mock_user_repo"],["ConversationThreadRepository.__init__","MetaPromptService.__init__"],["ProfileRepository.__init__","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageSplitter.__init__"],["DashboardPage.build_verification_sequence","js_wait_for_dashboard_loaded"],["TestContextPackagePopulation.mock_session_context","Phase2Conversation.__init__"],["LayerComposer.compose","LayerComposer._get_life_events"],["TouchpointScheduler.evaluate_event_trigger","_should_trigger"],["JobExecutionRepository.__init__","ResolutionManager.__init__"],["MissingVariableError.__init__","VoiceOnboardingFlow.__init__"],["TestLayer5KnowledgeInnerLife.test_layer5_with_missing_him_thought","_create_context_with_knowledge"],["InboundCallHandler.handle_incoming_call","_generate_signed_token"],["NikitaThoughtRepository.__init__","Layer2Composer.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_life_simulation"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DecayCalculator.__init__"],["ScoreHistoryRepository.__init__","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TemplateGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenCounter.__init__"],["ProfileCollector.get_missing_fields","get_profile"],["UserMetricsRepository.__init__","PunctuationProcessor.__init__"],["JobExecutionRepository.__init__","VenueResearchService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer2Composer.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","BackstoryRepository.create"],["TouchpointStore.get","TouchpointStore._to_pydantic"],["LifeSimulator.get_events_for_context","_format_arc"],["VoiceCallVerifier.verify_all","_verify_database"],["DailySummaryRepository.__init__","Layer1Loader.__init__"],["ConversationsPage.__init__","RateLimiter.__init__"],["LoginPage.__init__","ScoringService.__init__"],["compose_chapter_layer","HierarchicalPromptComposer.compose"],["DailySummaryRepository.__init__","ResponseTimer.__init__"],["TelegramWebhookSimulator._build_command_update","TelegramWebhookSimulator._build_update"],["NikitaThoughtRepository.__init__","ScheduledEventRepository.__init__"],["LoginPage.__init__","ViceScorer.__init__"],["verify_user_created_sql","sql_get_user_by_telegram_id"],["BaseRepository.get","PackageStore.get"],["ConversationRepository.__init__","VoiceOnboardingFlow.__init__"],["VenueCacheRepository.cleanup_expired","PendingRegistrationRepository.delete"],["UserNotFoundError.__init__","VoiceSessionManager.__init__"],["TestContextPackagePopulation.mock_session_context","ResolutionManager.__init__"],["EvidenceCollector.add_verification","log"],["TelegramWebhookSimulator.send_command","TelegramWebhookSimulator._build_command_update"],["DecayWarning","getMessage"],["UserRepository.__init__","RateLimiter.__init__"],["MissingVariableError.__init__","DashboardE2ETest.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","create_fake_jwt"],["LayerComposer.compose","LayerComposer._get_time_of_day"],["BackstoryRepository.__init__","MessageHandler.__init__"],["VicePreferenceRepository.__init__","ConversationsPage.__init__"],["EngagementStateRepository.__init__","LayerComposer.__init__"],["ConversationThreadRepository.__init__","InstructionSelector.__init__"],["test_context","BaseRepository.create"],["EventStore.get_entities_by_type","EventStore._row_to_entity"],["LoginPage.__init__","ConversationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoringService.__init__"],["GeneratedPromptRepository.__init__","GeneratedPromptRepository.__init__"],["ServerToolHandler.handle","ServerToolHandler._get_memory"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserNotFoundError.__init__"],["TestContextPackagePopulation.mock_session_context","VenueResearchService.__init__"],["JobExecutionRepository.__init__","MoodCalculator.__init__"],["VicePreferenceRepository.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PunctuationProcessor.__init__"],["UserNotFoundError.__init__","MessageGenerator.__init__"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_verify_conversations_exist"],["VoiceService._load_context","_enrich_from_memory"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictStore.__init__"],["TestEdgeCases.test_user_with_no_last_interaction","mock_meta_prompt_service"],["EngagementStateRepository.__init__","MetaInstructionEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PendingRegistrationRepository.__init__"],["MetaPromptService._load_memory_context","MetaPromptService._query_graph"],["DailySummaryRepository.__init__","VenueCacheRepository.__init__"],["GeneratedPromptRepository.__init__","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DecayProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InMemoryCache.__init__"],["PromptLoader.load","PromptLoader._resolve_path"],["UserRepository.__init__","MockResult.__init__"],["LoginPage.__init__","EvidenceCollector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StrategicSilence.__init__"],["Layer3Composer._get_mood_label","Layer3Composer._is_neutral"],["MissingVariableError.__init__","MessageSplitter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationRepository.__init__"],["ConversationRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BasePage.__init__"],["CalibrationCalculator.compute","UserMetricsRepository._clamp"],["BackstoryRepository.__init__","ConflictDetector.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_no_interaction_returns_true","create_mock_user"],["BaseRepository.delete","BaseRepository.delete"],["ConversationThreadRepository.__init__","EventGenerator.__init__"],["TestDashboardE2E.test_verification_with_telegram_id","ConversationsE2ETest.get_verification_instructions"],["TestMoodDerivation.mock_session_context","PendingRegistrationRepository.__init__"],["VoiceCallScorer.apply_score","score_call"],["TestContextPackagePopulation.mock_session_context","PostProcessor.__init__"],["TestRateLimiter.test_daily_limit_exceeded_blocks_message","TestRateLimiter.mock_incr"],["ProfileRepository.update_from_onboarding","UserMetricsRepository.get_by_user_id"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","__init__"],["get_nikita_agent_for_user","_get_nikita_agent_for_user"],["_create_nikita_agent","add_personalized_context"],["ExperimentLoader.load_experiment_config","_load_experiment_with_inheritance"],["VoiceOnboardingFlow.resume_onboarding","VoiceOnboardingFlow._update_state"],["DailySummaryRepository.__init__","DeliveryResult.__init__"],["ResponseDelivery._send_now","_split_message"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EvidenceCollector.__init__"],["InstructionSelector.instruction_library","InstructionSelector._load_instructions"],["analyze_distraction","StateComputer._clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LengthAdjuster.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","OTPTestContext.create"],["ConversationRepository.__init__","MessageSplitter.__init__"],["BackstoryRepository.__init__","ServerToolHandler.__init__"],["TestContextPackagePopulation.mock_session_context","OnboardingServerToolHandler.__init__"],["JobExecutionRepository.__init__","DecayProcessor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictDetector.__init__"],["BackstoryRepository.__init__","DashboardPage.__init__"],["OnboardingStateRepository.get_or_create","OnboardingStateRepository.get"],["UserMetricsRepository.__init__","NikitaThoughtRepository.__init__"],["PostProcessor._get_extraction_agent","_get_extraction_system_prompt"],["UserRepository.advance_chapter","get"],["UserMetricsRepository.__init__","TriggerDetector.__init__"],["EmojiProcessor.process","EmojiProcessor._count_emojis"],["TestLayer5KnowledgeInnerLife.test_layer5_with_active_thoughts","TestLayer5KnowledgeInnerLife._create_context_with_knowledge"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer6Handler.__init__"],["UserRepository.update_score","OnboardingStateRepository.get"],["VenueCacheRepository.cleanup_expired","TouchpointStore.delete"],["DailySummaryRepository.__init__","TouchpointEngine.__init__"],["EngagementStateRepository.__init__","RateLimiter.__init__"],["Layer4Computer.detect_and_compose","MetaInstructionEngine.detect_situation"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestVicePreferenceRepositoryExtras.__init__"],["UserNotFoundError.__init__","LifeSimulator.__init__"],["mock_session_factory","TestEventStore.factory"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingHandler.__init__"],["ProfileRepository.update_from_onboarding","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InboundCallHandler.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step1_navigate_command"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_initiation_rate"],["ConversationConfigBuilder.build_config","ConversationConfigBuilder._get_first_message"],["UserNotFoundError.__init__","CommandHandler.__init__"],["GeneratedPromptRepository.__init__","FullJourneyOrchestrator.__init__"],["Layer4Computer.detect_and_compose","Layer4Computer.detect_situation"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OTPFlowE2ETest.__init__"],["BackstoryGeneratorService.process_custom_backstory","_parse_extraction_response"],["StrategicSilence.apply_strategic_silence","_compute_emotional_modifier"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase4GameState.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase3_instructions"],["RateLimiter.__init__","InMemoryCache.expire"],["OnboardingServerToolHandler.complete_onboarding","_trigger_handoff"],["LayerComposer.compose","Layer4Computer.compose"],["TestMoodDerivation.mock_session_context","TokenCounter.__init__"],["UserMetricsRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TriggerDetector.__init__"],["UserMetricsRepository.__init__","ScoreCalculator.__init__"],["UserMetricsRepository.__init__","HierarchicalPromptComposer.__init__"],["ConversationThreadRepository.__init__","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PromptLoader.__init__"],["PersonaAdaptationService.format_for_prompt","PersonaAdaptationService.generate_persona_overrides"],["LoginPage.__init__","GraphUpdater.__init__"],["TestLayer3RelationshipState.test_layer3_boss_fight_status","TestLayer2CurrentMoment._create_context"],["ConversationThreadRepository.__init__","ViceAnalyzer.__init__"],["TestP0CriticalHappyPath.test_ep6_invalid_jwt_format_returns_error","TestHelpers.navigate_and_get_content"],["DashboardPage.__init__","NikitaThoughtRepository.__init__"],["LoginPage.__init__","DecayCalculator.__init__"],["main","get_current_agent_config"],["MetaPromptService.__init__","_load_templates"],["OnboardingStateRepository.get_or_create","PendingRegistrationRepository.get"],["VicePreferenceRepository.__init__","TelegramWebhookSimulator.__init__"],["BaseRepository.session","VenueCacheRepository.session"],["BackstoryRepository.__init__","StateComputer.__init__"],["EscalationManager.get_escalation_timeline","_get_escalation_threshold"],["HandoffManager.execute_handoff","FirstMessageGenerator.generate"],["generate_response","_generate_response"],["RegistrationHandler.handle_email_input","is_valid_email"],["LifeSimulator.get_events_for_context","LifeSimulator._format_arc"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InMemoryCache.__init__"],["DailySummaryRepository.__init__","ScoringService.__init__"],["TestConversationThreadRepository.test_create_thread_valid_types","mock_create"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._get_time_of_day"],["TouchpointScheduler.evaluate_user","TouchpointScheduler.get_config"],["OnboardingHandler._handle_venue_research_step","_present_scenarios"],["TestMoodDerivation.mock_session_context","UserNotFoundError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StrategicSilence.__init__"],["get_session_maker","get_async_engine"],["DailySummaryRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase3Portal.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator._summarize_mood"],["ConversationsPage.__init__","EscalationManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer6Handler.__init__"],["MissingVariableError.__init__","Layer2Composer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GraphUpdater.__init__"],["TestNikitaThoughtRepository.test_get_thoughts_for_prompt_groups_by_type","mock_get_active_thoughts"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestDailySummaryRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DecayCalculator.__init__"],["MetaPromptService.generate_system_prompt","MetaPromptService._log_prompt"],["TestMoodDerivation.mock_session_context","ConflictStore.__init__"],["ProfileRepository.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer1Loader.__init__"],["NeglectDetector._abrupt_ending_signal","UserMetricsRepository._clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResponseTimer.__init__"],["TestMoodDerivation.mock_session_context","InMemoryCache.__init__"],["UserMetricsRepository.__init__","VoiceAgentConfig.__init__"],["MetaInstructionEngine.format_for_prompt","MetaInstructionEngine.format_for_prompt"],["InboundCallHandler.handle_incoming_call","_get_default_dynamic_variables"],["TestMoodDerivation.mock_session_context","StrategicSilence.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StateComputer.__init__"],["ScoreHistoryRepository.__init__","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer4Computer.__init__"],["OTPEmailParser.parse_otp_email","extract_otp_code"],["UserNotFoundError.__init__","ConversationsE2ETest.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_within_grace_returns_none","create_mock_user"],["ProfileRepository.create_profile","create"],["ConversationsPage.__init__","_ProfileFromAnswers.__init__"],["RateLimiter.check","DatabaseRateLimiter._seconds_until_midnight"],["DashboardPage.__init__","HierarchicalPromptComposer.__init__"],["ClinginessDetector._double_text_signal","_clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictGenerator.__init__"],["ConversationRepository.__init__","Layer2Composer.__init__"],["ViceScorer.process_signals","ViceScorer.process_signals"],["VicePreferenceRepository.__init__","UserMetricsRepository.__init__"],["MockAgentHelper.patch_get_nikita_agent_for_user","create_mock_deps"],["DailySummaryRepository.__init__","EvidenceCollector.__init__"],["NikitaThoughtRepository.__init__","OTPFlowE2ETest.__init__"],["RateLimiter.check","incr"],["TestMoodDerivation.mock_session_context","Layer4Computer.__init__"],["DashboardPage.__init__","GmailHelper.__init__"],["JobExecutionRepository.__init__","Layer6Handler.__init__"],["ScoreHistoryRepository.__init__","MockResult.__init__"],["BackstoryRepository.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PortalLoginE2ETest.__init__"],["UserRepository.__init__","_ProfileFromAnswers.__init__"],["BackstoryRepository.__init__","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","JourneyReport.__init__"],["OnboardingServerToolHandler.complete_onboarding","_get_or_create_profile"],["UserRepository.__init__","VicePreferenceRepository.__init__"],["ConflictGenerator.generate","_check_should_skip"],["ViceService.close","close"],["GeneratedPromptRepository.__init__","InstructionSelector.__init__"],["NikitaThoughtRepository.__init__","Phase1Registration.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceAgentConfig.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceService.__init__"],["TestContextPackagePopulation.mock_session_context","StateStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EntityManager.__init__"],["NikitaThoughtRepository.__init__","EventStore.__init__"],["Layer3Composer.compose","_get_energy_label"],["BackstoryRepository.__init__","ViceService.__init__"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step1_navigate_command"],["TestMoodDerivation.mock_session_context","PortalLoginE2ETest.__init__"],["UserNotFoundError.__init__","OnboardingHandler.__init__"],["TouchpointStore.get_user_touchpoints","TouchpointStore._to_pydantic"],["LoginPage.__init__","LengthAdjuster.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","VoiceOnboardingFlow.handle_message"],["Layer4Computer.detect_and_compose","detect_situation"],["BackstoryRepository.create_from_scenario","OnboardingStateRepository.get"],["TestPortalLoginFlow.test_magic_link_extraction","step3_extract_magic_link"],["TestMoodDerivation.mock_session_context","InboundCallHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GmailMCPClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ProfileCollector.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","PortalLoginTestContext.create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PackageStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ElevenLabsConversationsClient.__init__"],["EmojiProcessor.validate_only","_validate_existing_emojis"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DeliveryResult.__init__"],["UserNotFoundError.__init__","MessageHandler.__init__"],["SummaryGenerator.generate","_update_daily_summary"],["TestContextPackagePopulation.mock_session_context","Layer6Handler.__init__"],["ConversationThreadRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreAnalyzer.__init__"],["DynamicVariablesBuilder.build_from_user","ServerToolHandler._compute_nikita_activity"],["GeneratedPromptRepository.__init__","Phase1Registration.__init__"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","create_fake_jwt"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RecoveryManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PunctuationProcessor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceService.__init__"],["GeneratedPromptRepository.__init__","EventStore.__init__"],["BasePage.navigate_command","BasePage.url"],["TestMoodDerivation.mock_session_context","PackageStore.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LengthAdjuster.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StrategicSilence.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TextPatternProcessor.__init__"],["EngagementStateRepository.__init__","EscalationManager.__init__"],["StateComputer.compute","StateComputer._apply_conversation_deltas"],["ResponseTimer.calculate_delay_human_readable","calculate_delay"],["RateLimiter.get_remaining","OnboardingStateRepository.get"],["TextPatternProcessor.process_for_sending","PostProcessingPipeline.process"],["TemplateGenerator.generate_prompt_legacy","_layer3_relationship_state"],["UserRepository.advance_chapter","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointEngine.__init__"],["BackstoryRepository.__init__","ConfigLoader.__init__"],["TestMoodDerivation.mock_session_context","TestContextPackagePopulation.__aenter__"],["RecoveryManager.apply_recovery","_get_de_escalated_state"],["ProfileCollector.get_profile","ViceScorer.get_profile"],["UserRepository.is_onboarded","BaseRepository.get"],["TestLayer3RelationshipState.test_layer3_chapter_variations","TestLayer2CurrentMoment._create_context"],["ConversationThreadRepository.__init__","LifeSimulator.__init__"],["UserNotFoundError.__init__","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer4Computer.__init__"],["ConversationThreadRepository.__init__","CommandHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NikitaMemory.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationThreadRepository.__init__"],["EngagementStateRepository.__init__","_ProfileFromAnswers.__init__"],["ConversationsPage.__init__","BasePage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer1Loader.__init__"],["EngagementStateRepository.__init__","JourneyReport.__init__"],["compose_emotional_state_layer","LayerComposer.compose"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResponseTimer.__init__"],["StateComputer._apply_relationship_modifier","StateComputer._apply_relationship_modifier"],["TestEventStore.mock_session_factory","__aexit__"],["BackstoryRepository.__init__","BaseRepository.__init__"],["UserRepository.apply_decay","update_score"],["BackstoryRepository.__init__","SupabaseHelper.__init__"],["TokenCounter.count_multiple","count_tokens"],["DailySummaryRepository.__init__","GraphUpdater.__init__"],["LifeSimulator.get_active_arcs","LifeSimulator.get_active_arcs"],["LengthAdjuster.get_target_length","_get_config"],["SituationDetector.detect","SituationDetector._detect_situation_type"],["VoiceService._load_context","VoiceService._get_user_name"],["DailySummaryRepository.__init__","DecayCalculator.__init__"],["NikitaThoughtRepository.__init__","PortalLoginE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenCounter.__init__"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.get_phone_request_message"],["TestMoodDerivation.mock_session_context","ConversationThreadRepository.__init__"],["UserNotFoundError.__init__","DashboardPage.__init__"],["Layer3Composer.describe_state","Layer3Composer._describe_arousal"],["TestMoodDerivation.mock_session_context","Layer1Loader.__init__"],["UserRepository.__init__","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PortalLoginE2ETest.__init__"],["TestMoodDerivation.mock_session_context","ResponseTimer.__init__"],["EventDeliveryHandler.deliver","_deliver_telegram_event"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointStore.__init__"],["count_tokens","TokenValidator.count_tokens"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ProfileCollector.__init__"],["VoiceAgentConfig.get_agent_config","VoiceService._get_first_message"],["MissingVariableError.__init__","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["BackstoryRepository.__init__","VoiceOnboardingFlow.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestVicePreferenceRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BaseRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestUserMetricsRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SupabaseHelper.__init__"],["LengthAdjuster.adjust","_get_config"],["UserMetricsRepository.__init__","UserRepository.__init__"],["RateLimiter.get_remaining","PendingRegistrationRepository.get"],["OnboardingHandler.handle","OnboardingHandler._handle_interest_step"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","TestTimeoutFallback.half_second_timeout"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VenueCacheRepository.__init__"],["ConversationThreadRepository.__init__","MetaNikitaConfig.__init__"],["GeneratedPromptRepository.__init__","RegistrationHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestMoodDerivation.__init__"],["NikitaThoughtRepository.__init__","PackageStore.__init__"],["UserMetricsRepository.__init__","TestContextPackagePopulation.__init__"],["TestContextPackagePopulation.mock_session_context","TTSConfigService.__init__"],["DailySummaryRepository.__init__","MockResult.__init__"],["CalibrationCalculator.compute","_clamp"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TextPatternProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceScorer.__init__"],["ProfileRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PackageStore.__init__"],["InboundCallHandler._get_conversation_config_override","_get_first_message"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserNotFoundError.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceOnboardingFlow.__init__"],["ConversationRepository.__init__","PendingRegistrationRepository.__init__"],["UserRepository.__init__","JobExecutionRepository.__init__"],["TestMoodDerivation.mock_session_context","VenueCacheRepository.__init__"],["ScoringService.score_interaction","_log_history"],["ConversationsPage.__init__","Phase4GameState.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictStore.__init__"],["LoginPage.__init__","VicePreferenceRepository.__init__"],["BackstoryRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NikitaThoughtRepository.__init__"],["JobExecutionRepository.__init__","ProfileCollector.__init__"],["TestLayer3RelationshipState.test_layer3_game_over_status","TestLayer3RelationshipState._create_context"],["DashboardPage.__init__","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TriggerDetector.__init__"],["LoginPage.__init__","ConflictGenerator.__init__"],["MetaPromptService.simulate_thoughts","_load_context"],["build_system_prompt","_build_system_prompt_legacy"],["NikitaThoughtRepository.__init__","VoiceSessionManager.__init__"],["MetaPromptService.generate_system_prompt","_load_context"],["ProfileRepository.__init__","_ProfileFromAnswers.__init__"],["MessageHandler.handle","_send_error_response"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._build_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StrategicSilence.__init__"],["ProfileRepository.__init__","JourneyReport.__init__"],["UserMetricsRepository.__init__","FactExtractor.__init__"],["LoginPage.__init__","MockMappings.__init__"],["ConversationThreadRepository.__init__","ConversationsE2ETest.__init__"],["BaseRepository.update","VenueCacheRepository.session"],["TestP2Security.test_sec4_xss_in_error_description_escaped","TestHelpers.navigate_and_get_content"],["Layer3Composer.describe_state","_describe_dominance"],["UserRepository.__init__","Phase4GameState.__init__"],["NikitaThoughtRepository.__init__","MessageGenerator.__init__"],["EntityManager.entity_exists","EventStore.entity_exists"],["ScoreHistoryRepository.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EvidenceCollector.__init__"],["LoginPage.__init__","BreakupManager.__init__"],["BackstoryRepository.__init__","ProfileRepository.__init__"],["ScoreHistoryRepository.__init__","JourneyReport.__init__"],["NikitaThoughtRepository.__init__","ConversationThreadRepository.__init__"],["TestMoodDerivation.mock_session_context","DeliveryResult.__init__"],["JobExecutionRepository.__init__","TextPatternProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceCallVerifier.__init__"],["LoginPage.__init__","VoiceService.__init__"],["ScoreHistoryRepository.__init__","VicePreferenceRepository.__init__"],["BackstoryRepository.__init__","MessageSplitter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictGenerator.__init__"],["DashboardPage.__init__","UserRepository.__init__"],["Layer3Composer.compose","Layer3Composer._describe_conflict_state"],["DecayProcessor.process_all","process_user"],["LoginPage.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer4Computer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationThreadRepository.__init__"],["EngagementStateRepository.__init__","BasePage.__init__"],["MissingVariableError.__init__","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer1Loader.__init__"],["VicePromptInjector.inject","inject"],["StateStore.update_state","save_state"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResponseTimer.__init__"],["DailySummaryRepository.__init__","LengthAdjuster.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockMappings.__init__"],["TestContextPackagePopulation.mock_session_context","ProfileCollector.__init__"],["DashboardPage.__init__","TestContextPackagePopulation.__init__"],["GeneratedPromptRepository.__init__","VoiceSessionManager.__init__"],["TokenCounter.truncate_to_budget","TokenValidator.count_tokens"],["VenueCacheRepository.cleanup_expired","delete"],["VicePreferenceRepository.__init__","ServerToolHandler.__init__"],["InMemoryCache.get","InMemoryCache._cleanup_expired"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestDailySummaryRepositoryExtras.__init__"],["ConversationConfigBuilder._generate_fallback_prompt","_get_relationship_score"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestUserMetricsRepository.__init__"],["ConflictStore.resolve_conflict","ConflictStore.update_conflict"],["TestContextPackagePopulation.mock_session_context","PostProcessingPipeline.__init__"],["PunctuationProcessor.apply","_apply_lowercase"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreCalculator.__init__"],["JobExecutionRepository.__init__","NikitaMemory.__init__"],["NikitaThoughtRepository.__init__","TouchpointScheduler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BreakupManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","HierarchicalPromptComposer.__init__"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._build_chat"],["OnboardingServerToolHandler.configure_preferences","OnboardingServerToolHandler._persist_profile_to_db"],["get_memory_client","initialize"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._evaluate_time_trigger"],["NikitaThoughtRepository.__init__","TouchpointStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestMoodDerivation.__init__"],["LayerComposer.compose","LayerComposer._get_user_facts"],["TestMoodDerivation.mock_session_context","TouchpointEngine.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ProfileRepository.__init__"],["GeneratedPromptRepository.__init__","MessageGenerator.__init__"],["TestContextPackagePopulation.mock_session_context","RecoveryManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","FactExtractor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceService.__init__"],["UserMetricsRepository.update_metrics","EngagementStateRepository.get_by_user_id"],["NikitaThoughtRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["EntityManager.get_projects","EntityManager.get_entities_by_type"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PortalLoginE2ETest.__init__"],["VoiceEventScheduler.schedule_telegram_message","VoiceEventScheduler._create_event"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EntityManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageSplitter.__init__"],["InboundCallHandler._get_conversation_config_override","ConversationConfigBuilder._generate_fallback_prompt"],["TestLayer3RelationshipState.test_layer3_game_over_status","TestLayer6ResponseGuidelines._create_context"],["LoginPage.__init__","ExperimentLoader.__init__"],["UserMetricsRepository.__init__","EngagementStateRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TextPatternProcessor.__init__"],["LayerComposer.compose","HierarchicalPromptComposer.compose"],["Phase4GameState.verify_metrics","expected_chapter_for_score"],["ConversationRepository.__init__","OTPFlowE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InboundCallHandler.__init__"],["generate_touchpoint_message","generate"],["LoginPage.build_login_sequence","js_is_on_login_page"],["OnboardingStateRepository.add_answer","PackageStore.get"],["ConversationThreadRepository.__init__","MessageHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VenueCacheRepository.__init__"],["MissingVariableError.__init__","ConflictStore.__init__"],["BackstoryRepository.__init__","EmojiProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LayerComposer.__init__"],["MissingVariableError.__init__","InMemoryCache.__init__"],["TestLayer3RelationshipState.test_layer3_boss_fight_status","_create_context"],["BaseRepository.update","BackstoryRepository.create"],["LayerComposer.compose","LayerComposer._get_week_summaries"],["GeneratedPromptRepository.__init__","TouchpointScheduler.__init__"],["NikitaMemory.get_user_facts","_get_group_id"],["ConflictDetector.detect_conflict_state","detect_conflict_state"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_includes_timestamp","create_mock_user"],["TestContextPackagePopulation.mock_session_context","NikitaMemory.__init__"],["JobExecutionRepository.__init__","TestUserMetricsRepository.__init__"],["MissingVariableError.__init__","StrategicSilence.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ExperimentLoader.__init__"],["GeneratedPromptRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PackageStore.__init__"],["BackstoryContext.get_first_message_hook","has_backstory"],["UserMetricsRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EngagementStateMachine.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MetaInstructionEngine.__init__"],["UserMetricsRepository.__init__","TranscriptManager.__init__"],["JobExecutionRepository.__init__","TestMoodDerivation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceAgentConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoringService.__init__"],["EngagementStateRepository.__init__","Phase4GameState.__init__"],["TestContextPackagePopulation.mock_session_context","MissingVariableError.__init__"],["TestEventStore.mock_session_factory","TestGraphUpdater.factory"],["MessageSplitter._split_at_markers","split"],["UserMetricsRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceScorer.__init__"],["ConversationThreadRepository.__init__","ConflictDetector.__init__"],["NeglectDetector._abrupt_ending_signal","_clamp"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EmojiProcessor.__init__"],["ConversationRepository.__init__","ConflictStore.__init__"],["ProfileRepository.__init__","BasePage.__init__"],["MissingVariableError.__init__","Layer4Computer.__init__"],["ConversationThreadRepository.__init__","DatabaseRateLimiter.__init__"],["ConversationRepository.__init__","InMemoryCache.__init__"],["TestMoodDerivation.mock_session_context","ScoringService.__init__"],["inject_context","inject"],["get_agent_id","get_elevenlabs_config"],["ConversationRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GraphUpdater.__init__"],["UserNotFoundError.__init__","BackstoryRepository.__init__"],["TestMoodDerivation.mock_session_context","ViceScorer.__init__"],["DashboardPage.__init__","EngagementStateRepository.__init__"],["ScoreHistoryRepository.__init__","BasePage.__init__"],["UserRepository.__init__","LoginPage.__init__"],["should_apply_silence","StrategicSilence.apply_strategic_silence"],["TestContextPackagePopulation.mock_session_context","TestUserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","CommandHandler.__init__"],["LoginPage.__init__","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SkipDecision.__init__"],["LayerComposer.compose","LayerComposer._create_minimal_package"],["LoginPage.__init__","JobExecutionRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TestMoodDerivation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StateStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationThreadRepository.__init__"],["JobExecutionRepository.__init__","MetaInstructionEngine.__init__"],["MissingVariableError.__init__","PortalLoginE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TranscriptManager.__init__"],["ConversationsPage.__init__","ScoreAnalyzer.__init__"],["ConversationThreadRepository.__init__","DashboardPage.__init__"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.can_resume_onboarding"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer1Loader.__init__"],["EventStore.get_events_for_date","_row_to_event"],["TestMoodDerivation.mock_session_context","ConversationRepository.__init__"],["ResolutionManager.__init__","_get_evaluation_prompt"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResponseTimer.__init__"],["ConversationRepository.__init__","Layer4Computer.__init__"],["UserNotFoundError.__init__","ConfigLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SessionDetector.__init__"],["UserRepository.__init__","Phase2Conversation.__init__"],["TouchpointScheduler._evaluate_gap_trigger","_should_trigger"],["BackstoryRepository.__init__","Layer2Composer.__init__"],["DashboardPage.__init__","PreferenceConfigurator.__init__"],["VoiceAgentConfig.get_agent_config","_get_chapter_tts_settings"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestVicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BaseRepository.__init__"],["DailySummaryRepository.__init__","VicePreferenceRepository.__init__"],["TestMoodDerivation.mock_session_context","EvidenceCollector.__init__"],["ScoreHistoryRepository.__init__","JobExecutionRepository.__init__"],["DecayProcessor.process_user","_log_decay_event"],["TestPipelineIntegration.test_package_storage_verification","get_pipeline_patches"],["DailySummaryRepository.__init__","ConflictGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EngagementStateMachine.__init__"],["main","update_agent_prompt_and_first_message"],["ConversationRepository.__init__","PortalLoginE2ETest.__init__"],["MissingVariableError.__init__","PackageStore.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","TestTelegramAuth.store_impl"],["VoiceAgentConfig.get_agent_config","MetaPromptService.generate_system_prompt"],["Layer5Injector.inject","Layer5Injector._format_relationship_events"],["TestRateLimiter.test_ac_t024_3_get_remaining_returns_quota_info","TestRateLimiter.mock_get"],["ProfileRepository.__init__","Phase4GameState.__init__"],["DailySummaryRepository.__init__","MockMappings.__init__"],["RateLimiter.__init__","OnboardingStateRepository.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BackstoryGeneratorService.__init__"],["_ChapterBehaviorsProxy.values","_ChapterBehaviorsProxy.values"],["VenueResearchService.research_venues","VenueResearchService._search_firecrawl"],["TestOTPFlowSteps.test_step5_verification_parsing","BackstoryRepository.create"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VenueCacheRepository.__init__"],["VicePreferenceRepository.__init__","ElevenLabsConversationsClient.__init__"],["ClinginessDetector.detect","StateComputer._clamp"],["EngagementStateMachine.update","_evaluate_transition"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer2Composer.__init__"],["UserNotFoundError.__init__","HierarchicalPromptComposer.__init__"],["UserMetricsRepository.__init__","OTPVerificationHandler.__init__"],["DailySummaryRepository.__init__","BreakupManager.__init__"],["ScoreHistoryRepository.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EventGenerator.__init__"],["DailySummaryRepository.__init__","VoiceService.__init__"],["UserRepository.set_boss_fight_status","PackageStore.get"],["TestResponseTimer.test_invalid_chapter_uses_default","mock_production_settings"],["LayerComposer.compose","DynamicVariablesBuilder._get_time_of_day"],["DailySummaryRepository.__init__","EntityManager.__init__"],["compose_chapter_layer","Layer2Composer.compose"],["VicePreferenceRepository.__init__","ViceService.__init__"],["UserNotFoundError.__init__","GmailHelper.__init__"],["UserRepository.__init__","VenueResearchService.__init__"],["InMemoryCache.incr","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoringService.__init__"],["ConversationRepository.__init__","PackageStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceScorer.__init__"],["TestNikitaThoughtRepository.test_create_thought_valid_types","TestConversationThreadRepository.mock_create"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SkipDecision.__init__"],["ConversationsPage.__init__","PostProcessor.__init__"],["ConversationThreadRepository.__init__","StateComputer.__init__"],["JobExecutionRepository.__init__","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DeliveryResult.__init__"],["BaseRepository.delete_by_id","BaseRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MoodCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DailySummaryRepository.__init__"],["MissingVariableError.__init__","ConversationThreadRepository.__init__"],["compose_hierarchical_prompt","HierarchicalPromptComposer.compose"],["PreferenceConfigurator.get_behavioral_config","PreferenceConfigurator.get_conversation_style_config"],["GeneratedPromptRepository.__init__","ConversationsE2ETest.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step1_navigate_command"],["MissingVariableError.__init__","Layer1Loader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LengthAdjuster.__init__"],["JobExecutionRepository.__init__","BackstoryGeneratorService.__init__"],["LoginPage.__init__","FactExtractor.__init__"],["ConversationsE2ETest.get_verification_instructions","step3_extract_all_js"],["MissingVariableError.__init__","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationRepository.__init__"],["NikitaThoughtRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","get_complete_flow_instructions"],["TouchpointEngine._deliver_single","TouchpointEngine._generate_message"],["DailySummaryRepository.__init__","ExperimentLoader.__init__"],["NikitaThoughtRepository.__init__","OnboardingHandler.__init__"],["RecoveryManager.check_recovery_complete","_check_out_of_zone_recovery"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer3Composer.__init__"],["UserNotFoundError.__init__","DashboardE2ETest.__init__"],["EventStore.save_events","save_event"],["UserRepository.__init__","PostProcessor.__init__"],["ConversationsPage.__init__","OnboardingServerToolHandler.__init__"],["EngagementStateRepository.__init__","ScoreAnalyzer.__init__"],["TestPostProcessingPipeline.mock_db_session","create_mock_session_maker"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointEngine.__init__"],["RateLimiter.__init__","PendingRegistrationRepository.get"],["UserMetricsRepository.__init__","HandoffManager.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow._update_state"],["MissingVariableError.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationsPage.__init__"],["PostProcessingPipeline._run_package_storage","mark_running"],["DashboardPage.__init__","OTPVerificationHandler.__init__"],["MessageSplitter.split","_calculate_delay"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","FactExtractor.__init__"],["DashboardPage.__init__","TemplateGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ProfileRepository.__init__"],["ConversationRepository.__init__","ConversationThreadRepository.__init__"],["LoginPage.__init__","TelegramAuth.__init__"],["DashboardPage.__init__","TokenCounter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserRepository.__init__"],["NikitaMemory.get_context_for_prompt","NikitaMemory.search_memory"],["ConversationRepository.__init__","Layer1Loader.__init__"],["TestContextPackagePopulation.mock_session_context","EngagementStateMachine.__init__"],["JobExecutionRepository.__init__","SkipDecision.__init__"],["UserRepository.__init__","OnboardingServerToolHandler.__init__"],["ConversationRepository.__init__","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestContextPackagePopulation.__init__"],["GeneratedPromptRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MissingVariableError.__init__","VenueCacheRepository.__init__"],["PromptLoader.render","PromptLoader._substitute_variables"],["TestContextPackagePopulation.mock_session_context","MetaPromptService.__init__"],["GeneratedPromptRepository.__init__","OnboardingHandler.__init__"],["TestMoodDerivation.mock_session_context","GraphUpdater.__init__"],["LengthAdjuster.adjust","_truncate"],["VicePreferenceRepository.__init__","BaseRepository.__init__"],["TestMoodDerivation.mock_session_context","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EventGenerator.__init__"],["VicePreferenceRepository.__init__","SupabaseHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DecayProcessor.__init__"],["ConversationsPage.__init__","VoiceCallVerifier.__init__"],["test_context","WebhookTestData.create"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenValidator.__init__"],["ConversationRepository.__init__","TouchpointStore.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramAuth.__init__"],["UserMetricsRepository.__init__","SummaryGenerator.__init__"],["UserMetricsRepository.__init__","NarrativeArcManager.__init__"],["TestLayer4ConversationHistory.test_layer4_with_week_summaries","_create_context_with_history"],["VoiceService._load_context","_compute_nikita_energy"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceAnalyzer.__init__"],["ConversationConfigBuilder.build_config","DynamicVariablesBuilder.build_from_user"],["InMemoryCache.get","_ChapterBehaviorsProxy.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","HandoffManager.__init__"],["UserMetricsRepository.__init__","OnboardingStateRepository.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_clingy_recovery"],["LoginPage.__init__","Phase2Conversation.__init__"],["VicePreferenceRepository.__init__","VoiceOnboardingFlow.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step2_submit_js"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DailySummaryRepository.__init__"],["DashboardPage.__init__","UserNotFoundError.__init__"],["TestContextPackagePopulation.mock_session_context","SkipDecision.__init__"],["ConversationRepository.__init__","VenueCacheRepository.__init__"],["NikitaThoughtRepository.__init__","Phase3Portal.__init__"],["UserRepository.__init__","VoiceCallVerifier.__init__"],["TestScorePersistence.test_score_changes_reflected_in_user","TestScorePersistence.track_commit"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PunctuationProcessor.__init__"],["DailySummaryRepository.__init__","TestVicePreferenceRepository.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._compute_nikita_activity"],["ScoreHistoryRepository.__init__","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramBot.__init__"],["DailySummaryRepository.__init__","JobExecutionRepository.__init__"],["RateLimiter.get_remaining","RateLimiter._get_minute_key"],["run_manual_otp_test","OTPFlowE2ETest.step2_send_email"],["EvidenceCollector.add_api_response","EvidenceCollector.log"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EmojiProcessor.__init__"],["UserRepository.advance_chapter","OnboardingStateRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoringService.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step4_db_query"],["BackstoryRepository.__init__","PendingRegistrationRepository.__init__"],["ConversationThreadRepository.__init__","BackstoryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceScorer.__init__"],["JobExecutionRepository.__init__","EventGenerator.__init__"],["EngagementStateRepository.__init__","PostProcessor.__init__"],["LoginPage.__init__","SessionDetector.__init__"],["MessageSplitter._split_at_markers","_force_split"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase2Conversation.__init__"],["GeneratedPromptRepository.__init__","DatabaseRateLimiter.__init__"],["ProfileRepository.__init__","ScoreAnalyzer.__init__"],["ScoreHistoryRepository.__init__","Phase2Conversation.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationsPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SummaryGenerator.__init__"],["EngagementStateMachine.on_chapter_change","_reset_counters"],["ConflictStore.get_conflict_summary","ConflictStore.get_active_conflict"],["GeneratedPromptRepository.__init__","Phase3Portal.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_touchpoint_scheduling"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingStateRepository.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.end_call"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationRepository.__init__"],["LoginPage.build_login_sequence","LoginPage.js_enter_email"],["ConversationThreadRepository.__init__","ConfigLoader.__init__"],["ConflictGenerator.should_generate_conflict","_check_should_skip"],["LoginPage.__init__","ResolutionManager.__init__"],["EngagementStateRepository.__init__","OnboardingServerToolHandler.__init__"],["JobExecutionRepository.__init__","DailySummaryRepository.__init__"],["Layer5Injector.inject","_format_life_events"],["SummaryGenerator._update_daily_summary","_detect_emotional_tone"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","JourneyReport.__init__"],["DashboardPage.__init__","NarrativeArcManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SessionDetector.__init__"],["LoginPage.__init__","VenueResearchService.__init__"],["VoiceSessionManager.attempt_recovery","finalize_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LengthAdjuster.__init__"],["run_manual_otp_test","BaseRepository.create"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EngagementStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VicePreferenceRepository.__init__"],["Phase2Conversation.execute_all_messages","execute_message"],["TestConversationThreadRepository.test_bulk_create_threads_creates_all","mock_create_thread"],["DashboardPage.__init__","OnboardingStateRepository.__init__"],["RateLimiter.check","InMemoryCache.incr"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictGenerator.__init__"],["VenueCacheRepository.cleanup_expired","BaseRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DecayCalculator.__init__"],["TestContextPackagePopulation.mock_session_context","EventGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EvidenceCollector.__init__"],["UserMetricsRepository.calculate_composite","UserMetricsRepository.get_by_user_id"],["TestDashboardE2E.test_data_verification_logic","step4_verify_data"],["VicePreferenceRepository.__init__","ProfileRepository.__init__"],["StateComputer._compute_base_state","StateComputer._compute_base_state"],["UserNotFoundError.__init__","__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockMappings.__init__"],["TestDecayProcessorShouldSkipUser.test_process_active_status","create_mock_user"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResolutionManager.__init__"],["UserRepository.update_last_interaction","BaseRepository.get"],["TestMoodDerivation.mock_session_context","LengthAdjuster.__init__"],["TouchpointStore.get_recent_touchpoints","get_user_touchpoints"],["JobExecutionRepository.__init__","ConversationsPage.__init__"],["get_default_entities","load_entity_config"],["DecayCalculator.calculate_decay","DecayCalculator.is_overdue"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BreakupManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VenueResearchService.__init__"],["DashboardPage.__init__","InboundCallHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PreferenceConfigurator.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","TestSessionPersistence.get_user_by_telegram_id"],["EngagementStateRepository.__init__","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TranscriptManager.__init__"],["TestContextPackagePopulation.mock_session_context","DailySummaryRepository.__init__"],["MessageHandler.handle","ServerToolHandler.handle"],["ElevenLabsConversationsClient.get_agent_config","ElevenLabsConversationsClient._headers"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramWebhookSimulator.__init__"],["LoginPage.__init__","MoodCalculator.__init__"],["BackstoryRepository.__init__","OTPFlowE2ETest.__init__"],["InstructionSelector.get_instructions_for_situation","_parse_instruction"],["ConversationsPage.__init__","StateStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SessionDetector.__init__"],["SituationDetector.detect","_detect_situation_type"],["MissingVariableError.__init__","ScoringService.__init__"],["InboundCallHandler.handle_incoming_call","_check_availability"],["ProfileRepository.create_profile","TouchpointStore.create"],["ProfileRepository.update_from_onboarding","ProfileRepository.create_profile"],["UserNotFoundError.__init__","UserRepository.__init__"],["DailySummaryRepository.__init__","FactExtractor.__init__"],["ConversationThreadRepository.__init__","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GeneratedPromptRepository.__init__"],["ProfileRepository.__init__","PostProcessor.__init__"],["NikitaThoughtRepository.__init__","PunctuationProcessor.__init__"],["MissingVariableError.__init__","ViceScorer.__init__"],["ProfileRepository.get_by_user_id","PackageStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResponseDelivery.__init__"],["MetaPromptService.extract_entities","TemplateGenerator._load_context"],["BackstoryRepository.__init__","Phase1Registration.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PunctuationProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TriggerDetector.__init__"],["MetaInstructionEngine.format_for_prompt","PersonaAdaptationService.format_for_prompt"],["PostProcessingPipeline._run_touchpoint_scheduling","ScheduledEventRepository.mark_failed"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScheduledEventRepository.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_drug_tolerance_step"],["ScoreHistoryRepository.__init__","PostProcessor.__init__"],["TestContextPackagePopulation.mock_session_context","ConversationsPage.__init__"],["UserRepository.__init__","StateStore.__init__"],["HandoffManager.transition","HandoffManager.execute_handoff"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ExperimentLoader.__init__"],["VicePreferenceRepository.__init__","EmojiProcessor.__init__"],["DashboardPage.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MoodCalculator.__init__"],["PostProcessingPipeline._run_emotional_state_update","ScheduledEventRepository.mark_failed"],["create_telegram_router","receive_webhook"],["MissingVariableError.__init__","ConversationRepository.__init__"],["count_tokens","_get_encoder"],["ConflictDetector.check_escalation","_can_transition"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OTPFlowE2ETest.__init__"],["ProfileRepository.__init__","OnboardingServerToolHandler.__init__"],["DailySummaryRepository.__init__","TelegramAuth.__init__"],["ConversationRepository.__init__","ScoringService.__init__"],["ConversationThreadRepository.__init__","DashboardE2ETest.__init__"],["UserMetricsRepository.__init__","ScoreHistoryRepository.__init__"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow.process_ready_response"],["ClinginessDetector._double_text_signal","StateComputer._clamp"],["EvidenceCollector.add_screenshot","log"],["RateLimiter.get_remaining","InMemoryCache.get"],["ConversationRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LifeSimulator.__init__"],["TestMoodDerivation.mock_session_context","__aenter__"],["HandoffManager.transition","_generate_profile_summary"],["ScoreHistoryRepository.__init__","OnboardingServerToolHandler.__init__"],["UserRepository.__init__","Layer6Handler.__init__"],["PackageStore.cleanup_expired","PackageStore.delete"],["TestContextPackagePopulation.mock_session_context","TestMoodDerivation.__aexit__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase1Registration.__init__"],["BackstoryRepository.__init__","InMemoryCache.__init__"],["DailySummaryRepository.__init__","LoginPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserMetricsRepository.__init__"],["PostProcessingPipeline._run_touchpoint_scheduling","TouchpointStore.mark_failed"],["PromptLoader._substitute_variables","PromptLoader._get_nested_value"],["TestContextPackagePopulation.mock_session_context","RegistrationHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EventStore.__init__"],["BackstoryRepository.__init__","StrategicSilence.__init__"],["LoginPage.__init__","DecayProcessor.__init__"],["_create_nikita_agent","note_user_fact"],["process_conversations","ViceService.process_conversation"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestDailySummaryRepositoryExtras.__init__"],["TestContextPackagePopulation.mock_session_context","ViceAnalyzer.__init__"],["ProfileCollector.get_profile","get_profile"],["SituationDetector.detect","_build_metadata"],["ConversationRepository.__init__","ConversationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LengthAdjuster.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreCalculator.__init__"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step2_wait_js"],["MetaPromptService._load_context","MetaPromptService._compute_nikita_activity"],["ConversationThreadRepository.__init__","MessageSplitter.__init__"],["UserMetricsRepository.__init__","Layer5Injector.__init__"],["ProfileRepository.__init__","VoiceCallVerifier.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GraphUpdater.__init__"],["LoginPage.__init__","HandoffManager.__init__"],["DailySummaryRepository.__init__","Phase2Conversation.__init__"],["StateComputer._compute_base_state","_compute_base_state"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramWebhookSimulator.__init__"],["DecayProcessor.process_user","DecayProcessor._handle_game_over"],["MessageHandler.handle","handle"],["ViceAnalyzer.analyze_exchange","ViceAnalyzer._convert_llm_signals"],["BackstoryRepository.__init__","Layer4Computer.__init__"],["TestMoodDerivation.mock_session_context","TestDailySummaryRepositoryExtras.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreHistoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DecayProcessor.__init__"],["ScoreHistoryRepository.__init__","VoiceCallVerifier.__init__"],["TestMoodDerivation.mock_session_context","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OTPVerificationHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictGenerator.__init__"],["VoiceOnboardingFlow.can_resume_onboarding","_get_onboarding_state"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","FullJourneyOrchestrator.__init__"],["TestLLMAnalysisFunctions.test_ac_2_3_6_results_cached_per_session","mock_llm"],["TestGetCurrentAdminUser.test_similar_domain_raises_403","make_token"],["NikitaMemory.add_episode","_get_group_id"],["ConversationsPage.__init__","Layer3Composer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MetaNikitaConfig.__init__"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_database"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestVicePreferenceRepository.__init__"],["EvidenceCollector.save_report","EvidenceCollector.generate_report"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","JobExecutionRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","HandoffManager.__init__"],["MessageHandler.handle","store_pending_response"],["VicePreferenceRepository.__init__","Layer2Composer.__init__"],["EngagementStateRepository.__init__","StateStore.__init__"],["BackstoryRepository.__init__","PortalLoginE2ETest.__init__"],["TestMoodDerivation.mock_session_context","ConflictGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer4Computer.__init__"],["ConversationConfigBuilder.build_config","_get_first_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceAgentConfig.__init__"],["UserMetricsRepository.__init__","VoiceCallScorer.__init__"],["NikitaThoughtRepository.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceService.__init__"],["JourneyContext.fail","transition_to"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step5_wait_for_dashboard_js"],["NikitaThoughtRepository.__init__","TriggerDetector.__init__"],["DailySummaryRepository.__init__","ResolutionManager.__init__"],["UserRepository.__init__","Layer3Composer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EntityManager.__init__"],["TouchpointScheduler._evaluate_time_trigger","_get_current_time_slot"],["JobExecutionRepository.__init__","TelegramWebhookSimulator.__init__"],["BaseRepository.get","UserRepository.get"],["ConversationsPage.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TriggerDetector.__init__"],["UserMetricsRepository.__init__","ConversationConfigBuilder.__init__"],["DailySummaryRepository.__init__","VenueResearchService.__init__"],["VicePreferenceRepository.__init__","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserMetricsRepository.__init__"],["TestMoodDerivation.mock_session_context","BreakupManager.__init__"],["LifeEvent.model_dump_for_db","PreferenceConfigurator.to_dict"],["TestOTPFlowSteps.test_step2_email_submission","OTPFlowE2ETest.step2_send_email"],["PostProcessingPipeline._run_package_storage","ConversationRepository.mark_failed"],["DashboardPage.__init__","Layer5Injector.__init__"],["TestEventStore.mock_session_factory","TestMoodDerivation.__aexit__"],["JobExecutionRepository.__init__","ResponseDelivery.__init__"],["TestMoodDerivation.mock_session_context","VoiceService.__init__"],["PreferenceConfigurator.get_behavioral_config","get_darkness_config"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PortalLoginE2ETest.__init__"],["DashboardPage.__init__","DeliveryResult.__init__"],["TestMoodDerivation.mock_session_context","EntityManager.__init__"],["BackstoryRepository.__init__","PackageStore.__init__"],["ConversationsPage.__init__","TokenValidator.__init__"],["UserRepository.__init__","TTSConfigService.__init__"],["LayerComposer.compose","_get_relationship_events"],["ConversationRepository.search","ConversationRepository.search"],["GeneratedPromptRepository.__init__","NikitaThoughtRepository.__init__"],["ServerToolHandler._get_context","DynamicVariablesBuilder._compute_nikita_energy"],["_get_chapter_behaviors","_load_chapter_behaviors"],["MissingVariableError.__init__","DecayCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceCallScorer.__init__"],["NikitaThoughtRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["build_dynamic_variables","get_dynamic_variables_builder"],["UserNotFoundError.__init__","PendingRegistrationRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TelegramWebhookSimulator.__init__"],["NikitaThoughtRepository.__init__","ScoreCalculator.__init__"],["NikitaThoughtRepository.__init__","HierarchicalPromptComposer.__init__"],["ConversationsPage.__init__","TelegramBot.__init__"],["UserRepository.__init__","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestDailySummaryRepositoryExtras.__init__"],["_ChapterBehaviorsProxy.get","PackageStore.get"],["ConversationThreadRepository.__init__","__init__"],["DailySummaryRepository.__init__","MoodCalculator.__init__"],["DashboardPage.__init__","TouchpointEngine.__init__"],["main","update_agent_tools"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationConfigBuilder.__init__"],["TestMoodDerivation.mock_session_context","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreCalculator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PackageStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LengthAdjuster.__init__"],["JobExecutionRepository.__init__","UserMetricsRepository.__init__"],["TestContextPackagePopulation.mock_session_context","ResponseDelivery.__init__"],["ServerToolHandler.handle","_update_memory"],["Layer6Handler.process_modification","Layer6Handler.apply_modification"],["HandoffManager.execute_handoff","SummaryGenerator.generate"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SummaryGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NarrativeArcManager.__init__"],["EngagementStateMachine.update","_update_counters"],["ProfileRepository.__init__","StateStore.__init__"],["UserRepository.__init__","TelegramBot.__init__"],["BackstoryRepository.__init__","ConversationThreadRepository.__init__"],["atomic","transfer_funds"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingStateRepository.__init__"],["ConversationsPage.__init__","PostProcessingPipeline.__init__"],["ConversationRepository.__init__","DecayCalculator.__init__"],["LoginPage.__init__","Layer6Handler.__init__"],["CalibrationCalculator.compute","StateComputer._clamp"],["SituationDetector._detect_situation_type","SituationDetector._is_evening"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictGenerator.__init__"],["ConversationsPage.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageHandler.__init__"],["TestLLMAnalysisFunctions.test_ac_2_3_6_results_cached_per_session","TestLLMAnalysisFunctions.mock_llm"],["ScoreHistoryRepository.__init__","StateStore.__init__"],["PendingRegistrationRepository.get_email","InMemoryCache.get"],["GeneratedPromptRepository.__init__","HierarchicalPromptComposer.__init__"],["EngagementStateRepository.__init__","Layer3Composer.__init__"],["BackstoryRepository.create_from_scenario","TouchpointStore.create"],["EventStore.get_active_arcs","EventStore._row_to_arc"],["MessageHandler.handle","_apply_text_patterns"],["UserRepository.__init__","ProfileCollector.__init__"],["MissingVariableError.__init__","PunctuationProcessor.__init__"],["TestTypingIndicators.test_no_periodic_typing_for_short_delays","mock_sleep"],["TestContextPackagePopulation.mock_session_context","LifeSimulator.__init__"],["UserRepository.__init__","PostProcessingPipeline.__init__"],["NikitaThoughtRepository.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InstructionSelector.__init__"],["BackstoryRepository.__init__","TouchpointScheduler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageGenerator.__init__"],["TestContextPackagePopulation.mock_session_context","UserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","GmailHelper.__init__"],["HandoffManager.transition","HandoffManager._get_user_telegram_id"],["BackstoryRepository.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramAuth.__init__"],["LifeSimulator.generate_next_day_events","LifeSimulator.initialize_user"],["BackstoryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer6Handler.__init__"],["UserRepository.__init__","RecoveryManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationThreadRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceService.__init__"],["ScoreHistoryRepository.__init__","Layer6Handler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EntityManager.__init__"],["DailySummaryRepository.__init__","DecayProcessor.__init__"],["EngagementStateRepository.__init__","TTSConfigService.__init__"],["Phase2Conversation.execute_all_messages","Phase2Conversation.execute_message"],["UserNotFoundError.__init__","TemplateGenerator.__init__"],["UserNotFoundError.__init__","TokenCounter.__init__"],["BackstoryGeneratorService.generate_scenarios","_build_scenario_prompt"],["BackstoryRepository.__init__","VenueCacheRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LoginPage.__init__"],["proxy","createServerClient"],["ConversationRepository.__init__","PunctuationProcessor.__init__"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_elevenlabs"],["DailySummaryRepository.__init__","HandoffManager.__init__"],["TestMoodDerivation.mock_session_context","TestVicePreferenceRepository.__init__"],["ConversationsPage.__init__","MissingVariableError.__init__"],["VoiceOnboardingFlow.handle_message","_get_onboarding_state"],["ProfileRepository.create_profile","OTPTestContext.create"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointScheduler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointStore.__init__"],["EngagementStateRepository.__init__","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase1Registration.__init__"],["InboundCallHandler._get_conversation_config_override","Layer1Loader._generate_fallback_prompt"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestDailySummaryRepositoryContextEngineering.__init__"],["UserRepository.__init__","NikitaMemory.__init__"],["OnboardingServerToolHandler.collect_profile","OnboardingServerToolHandler._persist_profile_to_db"],["MissingVariableError.__init__","LengthAdjuster.__init__"],["LayerComposer.compose","Layer2Composer.compose"],["TestNikitaThoughtRepository.test_create_missing_him_thought_24h","TestNikitaThoughtRepository.mock_create_thought"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EventStore.__init__"],["LoginPage.__init__","ScoreHistoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase2Conversation.__init__"],["TestContextPackagePopulation.mock_session_context","MetaNikitaConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ServerToolHandler.__init__"],["ConversationsPage.__init__","GeneratedPromptRepository.__init__"],["ConversationsE2ETest.get_verification_instructions","step4_db_query"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VenueCacheRepository.__init__"],["UserRepository.__init__","MissingVariableError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DashboardPage.__init__"],["LifeSimulator.get_active_arcs","EventStore.get_active_arcs"],["ViceAnalyzer._analyze_with_llm","_get_agent"],["PackageStore.cleanup_expired","delete"],["EngagementStateRepository.__init__","TelegramBot.__init__"],["UserNotFoundError.__init__","UserNotFoundError.__init__"],["ConversationsPage.__init__","ScheduledEventRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestDailySummaryRepositoryExtras.__init__"],["TelegramWebhookSimulator._build_update","_build_message"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_no_game_over_when_score_above_zero","create_mock_user"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreCalculator.__init__"],["ProfileRepository.__init__","Layer3Composer.__init__"],["DashboardPage.__init__","EvidenceCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestContextPackagePopulation.__init__"],["UserNotFoundError.__init__","ConflictStore.__init__"],["UserRepository.__init__","GeneratedPromptRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreHistoryRepository.__init__"],["ConflictGenerator.generate","ConflictGenerator._prioritize_triggers"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_includes_hours_overdue","create_mock_user"],["UserNotFoundError.__init__","InMemoryCache.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step6_extract_data_js"],["ConversationRepository.__init__","LengthAdjuster.__init__"],["ViceService.close","ViceService.close"],["TestNikitaThoughtRepository.test_create_missing_him_thought_72h","mock_create_thought"],["EngagementStateRepository.__init__","PostProcessingPipeline.__init__"],["ScoreHistoryRepository.__init__","Layer3Composer.__init__"],["UserNotFoundError.__init__","StrategicSilence.__init__"],["ServerToolHandler._get_context","MetaPromptService._compute_nikita_mood"],["TestLayer6ResponseGuidelines.test_layer6_time_based_adjustments","TestLayer3RelationshipState._create_context"],["EngagementStateRepository.__init__","RecoveryManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LayerComposer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResolutionManager.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase1_instructions"],["ProfileRepository.__init__","TTSConfigService.__init__"],["LifeSimulator.get_events_for_context","NarrativeArcManager.get_active_arcs"],["MoodCalculator.compute_from_event","compute_from_events"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VenueResearchService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictDetector.__init__"],["MissingVariableError.__init__","TriggerDetector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockMappings.__init__"],["OnboardingHandler.handle","_handle_life_stage_step"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","FactExtractor.__init__"],["RecoveryManager.apply_decay_recovery","_get_de_escalated_state"],["ProfileRepository.update_from_onboarding","get_by_user_id"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MetaInstructionEngine.__init__"],["BaseRepository.delete_by_id","PackageStore.delete"],["ScoreHistoryRepository.__init__","TTSConfigService.__init__"],["RateLimiter.__init__","InMemoryCache.get"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig._get_first_message"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BreakupManager.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","TestHelpers.create_fake_jwt"],["TestConversationThreadRepository.test_bulk_resolve_threads_resolves_found","mock_resolve_thread"],["TestLayer4ConversationHistory.test_layer4_with_today_summaries","_create_context_with_history"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreHistoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestVicePreferenceRepository.__init__"],["ProfileRepository.__init__","TokenValidator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EntityManager.__init__"],["TestMoodDerivation.mock_session_context","FactExtractor.__init__"],["InboundCallHandler._generate_fallback_prompt","InboundCallHandler._get_relationship_score"],["VoiceService._load_context","_compute_time_of_day"],["UserMetricsRepository.__init__","RateLimiter.__init__"],["VicePreferenceRepository.__init__","OTPFlowE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StateComputer.__init__"],["ScoreHistoryRepository.__init__","TokenValidator.__init__"],["ConversationConfigBuilder.build_config","ConversationConfigBuilder._generate_system_prompt"],["ConflictDetector.check_escalation","ConflictDetector._get_trigger_reason"],["ConversationsPage.__init__","FullJourneyOrchestrator.__init__"],["ConversationRepository.__init__","TriggerDetector.__init__"],["EngagementStateRepository.__init__","MissingVariableError.__init__"],["MessageSplitter._find_split_points","MessageSplitter._split_at_markers"],["Layer3Composer.compose","Layer3Composer._get_behavioral_impact"],["generate_touchpoint_message","FirstMessageGenerator.generate"],["ProfileRepository.__init__","TelegramBot.__init__"],["LoginPage.__init__","ProfileCollector.__init__"],["TouchpointEngine._evaluate_silence","_check_conflict_active"],["EntityManager.get_entities_by_type","EventStore.get_entities_by_type"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MoodCalculator.__init__"],["ConversationThreadRepository.__init__","PendingRegistrationRepository.__init__"],["UserNotFoundError.__init__","InboundCallHandler.__init__"],["PostProcessingPipeline.process","_run_life_simulation"],["VicePreferenceRepository.__init__","Phase1Registration.__init__"],["ConflictDetector.check_escalation","ConflictDetector._find_intermediate_state"],["MissingVariableError.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","TestHelpers.navigate_and_get_content"],["JobExecutionRepository.__init__","ConflictDetector.__init__"],["UserMetricsRepository.calculate_composite","GeneratedPromptRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer5Injector.__init__"],["DailySummaryRepository.__init__","Layer6Handler.__init__"],["BackstoryRepository.__init__","ScoringService.__init__"],["MissingVariableError.__init__","ScoreCalculator.__init__"],["TestContextPackagePopulation.mock_session_context","MessageHandler.__init__"],["TestLayer6ResponseGuidelines.test_layer6_time_based_adjustments","TestLayer6ResponseGuidelines._create_context"],["VicePreferenceRepository.__init__","EventStore.__init__"],["TestMoodDerivation.mock_session_context","TelegramAuth.__init__"],["ScoreHistoryRepository.__init__","TelegramBot.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ExperimentLoader.__init__"],["EngagementStateRepository.__init__","GeneratedPromptRepository.__init__"],["VoiceCallVerifier._verify_database","_check_metrics"],["UserRepository.__init__","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EngagementStateRepository.__init__"],["NikitaThoughtRepository.__init__","UserRepository.__init__"],["TestWebhookSignatureValidation.test_expired_timestamp_rejected","create_webhook_signature"],["InMemoryCache.get","TouchpointStore.get"],["ProfileRepository.__init__","PostProcessingPipeline.__init__"],["LoginPage.__init__","TextPatternProcessor.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_just_inside_grace_returns_false","create_mock_user"],["OnboardingStateRepository.delete","PackageStore.delete"],["GeneratedPromptRepository.__init__","__init__"],["NarrativeArcManager.maybe_create_arc","get_active_arcs"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ProfileCollector.__init__"],["EngagementStateRepository.__init__","ScheduledEventRepository.__init__"],["MetricItem","getColor"],["MetaPromptService.simulate_thoughts","TemplateGenerator._load_context"],["NikitaThoughtRepository.__init__","TestContextPackagePopulation.__init__"],["ScoreHistoryRepository.__init__","ProfileCollector.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","list_conversations"],["ProfileRepository.__init__","RecoveryManager.__init__"],["JobExecutionRepository.__init__","ServerToolHandler.__init__"],["DashboardPage.__init__","GraphUpdater.__init__"],["MissingVariableError.__init__","ConflictGenerator.__init__"],["BackstoryRepository.__init__","ConversationRepository.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","navigate_and_get_content"],["ScoreHistoryRepository.__init__","PostProcessingPipeline.__init__"],["ConversationRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector.detect_conflict_state"],["UserNotFoundError.__init__","PromptLoader.__init__"],["main","JourneyReport.add_section"],["ConversationRepository.__init__","ScoreCalculator.__init__"],["ScoreHistoryRepository.__init__","RecoveryManager.__init__"],["TestContextPackagePopulation.mock_session_context","ConflictDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PreferenceConfigurator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GmailMCPClient.__init__"],["PromptLoader.render","load"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TranscriptManager.__init__"],["DashboardPage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceSessionManager.__init__"],["ServerToolHandler._get_context","VoiceService._compute_nikita_mood"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceCallScorer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ElevenLabsConversationsClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BackstoryGeneratorService.__init__"],["BaseRepository.delete_by_id","UserRepository.get"],["GeneratedPromptRepository.__init__","UserRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SessionDetector.__init__"],["MissingVariableError.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DecayProcessor.__init__"],["MissingVariableError.__init__","VoiceService.__init__"],["ConversationsPage.__init__","MetaPromptService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationConfigBuilder.__init__"],["compose_hierarchical_prompt","Layer2Composer.compose"],["CallAvailability.is_available","CallAvailability.get_availability_rate"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageGenerator.__init__"],["MissingVariableError.__init__","EntityManager.__init__"],["GeneratedPromptRepository.__init__","TestContextPackagePopulation.__init__"],["ProfileRepository.__init__","NikitaMemory.__init__"],["ConversationRepository.__init__","ConflictGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StateComputer.__init__"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler.complete_onboarding"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","FactExtractor.__init__"],["TestMoodDerivation.mock_session_context","TranscriptManager.__init__"],["ProfileRepository.create_profile","PortalLoginTestContext.create"],["ConversationThreadRepository.__init__","TokenCounter.__init__"],["UserRepository.__init__","EngagementStateMachine.__init__"],["TestContextPackagePopulation.mock_session_context","ServerToolHandler.__init__"],["DashboardPage.__init__","MockResult.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestVicePreferenceRepositoryExtras.__init__"],["ProfileRepository.__init__","MissingVariableError.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingHandler.__init__"],["UserNotFoundError.__init__","Layer1Loader.__init__"],["TextPatternProcessor.process","PostProcessingPipeline.process"],["TestMoodDerivation.mock_session_context","SessionDetector.__init__"],["ScoreHistoryRepository.__init__","NikitaMemory.__init__"],["TestContextPackagePopulation.mock_session_context","DashboardPage.__init__"],["UserNotFoundError.__init__","ResponseTimer.__init__"],["UserRepository.__init__","MetaPromptService.__init__"],["ConversationsE2ETest.get_verification_instructions","PortalLoginE2ETest.step1_navigate_command"],["EntityManager.get_friends","EventStore.get_entities_by_type"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestVicePreferenceRepository.__init__"],["NarrativeArcManager.get_active_arcs","LifeSimulator.get_active_arcs"],["LoginPage.__init__","TestUserMetricsRepository.__init__"],["ScoreHistoryRepository.__init__","MissingVariableError.__init__"],["ConversationRepository.__init__","VoiceAgentConfig.__init__"],["BackstoryRepository.create_from_scenario","OTPTestContext.create"],["ConversationRepository.__init__","VoiceService.__init__"],["ProfileRepository.__init__","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointScheduler.__init__"],["TestLayer3RelationshipState.test_layer3_score_trend_variations","TestLayer2CurrentMoment._create_context"],["VicePreferenceRepository.__init__","PortalLoginE2ETest.__init__"],["MissingVariableError.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","EntityManager.__init__"],["LoginPage.__init__","TestMoodDerivation.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramAuth.__init__"],["EngagementStateRepository.__init__","FullJourneyOrchestrator.__init__"],["TestMoodDerivation.mock_session_context","ResolutionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["BackstoryGeneratorService.generate_scenarios","ScoreAnalyzer._call_llm"],["ProfileRepository.__init__","ScheduledEventRepository.__init__"],["ScoreHistoryRepository.__init__","GeneratedPromptRepository.__init__"],["UserRepository.__init__","SkipDecision.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConfigLoader.__init__"],["BackstoryRepository.__init__","Phase3Portal.__init__"],["JobExecutionRepository.__init__","StateComputer.__init__"],["ConversationsPage.__init__","InstructionSelector.__init__"],["NikitaThoughtRepository.__init__","EngagementStateRepository.__init__"],["ConversationThreadRepository.__init__","UserNotFoundError.__init__"],["ProfileRepository.update_from_onboarding","_ChapterBehaviorsProxy.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestUserMetricsRepository.__init__"],["TokenValidator.truncate_layers","truncate"],["OTPVerificationHandler.handle","OTPVerificationHandler._offer_onboarding_choice"],["EventStore.get_entities_by_type","_row_to_entity"],["InMemoryCache.incr","_cleanup_expired"],["LoginPage.__init__","LayerComposer.__init__"],["ConversationThreadRepository.__init__","ConflictStore.__init__"],["PostProcessingPipeline._run_life_simulation","mark_completed"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestMoodDerivation.__init__"],["TestContextPackagePopulation.test_context_package_gets_life_events","TestContextPackagePopulation.mock_session_context"],["TestRateLimiter.test_ac_fr006_002_warning_when_approaching_daily_limit","mock_incr"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GmailMCPClient.__init__"],["EntityManager.get_colleagues","get_entities_by_type"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MoodCalculator.__init__"],["VicePreferenceRepository.__init__","PackageStore.__init__"],["ConversationRepository.__init__","ExperimentLoader.__init__"],["ConversationThreadRepository.__init__","InMemoryCache.__init__"],["RateLimiter.get_remaining","_get_minute_key"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ElevenLabsConversationsClient.__init__"],["GmailHelper.wait_for_magic_link","_extract_magic_link"],["ConversationThreadRepository.__init__","StrategicSilence.__init__"],["UserRepository.__init__","InstructionSelector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BaseRepository.__init__"],["LoginPage.__init__","MetaInstructionEngine.__init__"],["RegistrationHandler.handle_email_input","RegistrationHandler.is_valid_email"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SupabaseHelper.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._call_elevenlabs"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","CommandHandler.__init__"],["NikitaThoughtRepository.__init__","PreferenceConfigurator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceService.__init__"],["VoiceCallVerifier.verify_all","_verify_neo4j"],["SituationDetector.map_conflict_to_situation","SituationDetector._is_conflict_active"],["TestMoodDerivation.mock_session_context","MoodCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LayerComposer.__init__"],["GeneratedPromptRepository.__init__","EngagementStateRepository.__init__"],["UserNotFoundError.__init__","DeliveryResult.__init__"],["TestContextPackagePopulation.mock_session_context","StateComputer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TranscriptManager.__init__"],["VicePreferenceRepository.__init__","VoiceSessionManager.__init__"],["TestMoodDerivation.mock_session_context","TestMoodDerivation.__aenter__"],["TestWebhookPostProcessing.test_webhook_normalizes_agent_role","TestWebhookPostProcessing.capture_add"],["ConversationThreadRepository.__init__","Layer4Computer.__init__"],["DynamicVariablesBuilder.build_from_context","MetaPromptService._compute_nikita_activity"],["ServerToolHandler._get_context","_add_humanization_context"],["VoiceOnboardingFlow.handle_onboard_command","can_resume_onboarding"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceOnboardingFlow.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SessionDetector.__init__"],["BackstoryRepository.__init__","DecayCalculator.__init__"],["EngagementStateRepository.__init__","MetaPromptService.__init__"],["UserMetricsRepository.__init__","EscalationManager.__init__"],["NeglectDetector.detect","_clamp"],["MissingVariableError.__init__","TestVicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MetaInstructionEngine.__init__"],["DailySummaryRepository.__init__","ProfileCollector.__init__"],["create_mock_session_maker","session_context"],["VicePreferenceRepository.__init__","MessageGenerator.__init__"],["JobExecutionRepository.__init__","GmailMCPClient.__init__"],["UserRepository.__init__","EventGenerator.__init__"],["VoiceOnboardingFlow._save_deferred_state","VoiceOnboardingFlow._update_state"],["JobExecutionRepository.__init__","ElevenLabsConversationsClient.__init__"],["VicePreferenceRepository.__init__","ConversationThreadRepository.__init__"],["GraphUpdater.add_user_fact","GraphUpdater.add_user_fact"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","FactExtractor.__init__"],["ProfileRepository.__init__","FullJourneyOrchestrator.__init__"],["LifeSimulator.get_events_for_context","_summarize_mood"],["GeneratedPromptRepository.__init__","PreferenceConfigurator.__init__"],["UserNotFoundError.__init__","TouchpointEngine.__init__"],["ResponseDelivery.queue","_wait_with_typing"],["OnboardingStateRepository.get_or_create","PackageStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DecayProcessor.__init__"],["UserRepository.increment_boss_attempts","PendingRegistrationRepository.get"],["UserMetricsRepository.__init__","_ProfileFromAnswers.__init__"],["ScoreHistoryRepository.__init__","FullJourneyOrchestrator.__init__"],["JobExecutionRepository.__init__","ViceService.__init__"],["UserRepository.update_score","PackageStore.get"],["DailySummaryRepository.__init__","TextPatternProcessor.__init__"],["UserMetricsRepository.__init__","JourneyReport.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer6Handler.__init__"],["EventGenerator.generate_events_for_day","EventGenerator._build_generation_prompt"],["ConversationThreadRepository.__init__","InboundCallHandler.__init__"],["VoiceOnboardingFlow.process_ready_response","is_deferral"],["UserRepository.__init__","DailySummaryRepository.__init__"],["ConversationRepository.__init__","TestVicePreferenceRepository.__init__"],["ClinginessDetector._length_ratio_signal","UserMetricsRepository._clamp"],["TemplateGenerator.generate_prompt","generate_system_prompt"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","HandoffManager.__init__"],["VicePreferenceRepository.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DashboardE2ETest.__init__"],["OnboardingStateRepository.update_step","_ChapterBehaviorsProxy.get"],["VicePreferenceRepository.__init__","TouchpointStore.__init__"],["TestMoodDerivation.mock_session_context","DecayProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramAuth.__init__"],["DatabaseRateLimiter.check","_seconds_until_midnight"],["UserRepository.update_last_interaction","UserRepository.get"],["VicePreferenceRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EscalationManager.__init__"],["TestContextPackagePopulation.mock_session_context","GmailMCPClient.__init__"],["BackstoryRepository.__init__","PunctuationProcessor.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_current_time_slot"],["TestContextPackagePopulation.mock_session_context","ElevenLabsConversationsClient.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BaseRepository.__init__"],["LoginPage.__init__","EngagementStateMachine.__init__"],["EngagementStateRepository.__init__","InstructionSelector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SupabaseHelper.__init__"],["TestMoodDerivation.mock_session_context","HandoffManager.__init__"],["VoiceOnboardingFlow.process_ready_response","_get_onboarding_state"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","TestHelpers.create_fake_jwt"],["LoginPage.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ProfileRepository.__init__"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler.get_config"],["VoiceService._load_context","VoiceService._compute_time_of_day"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationsE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MoodCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageSplitter.__init__"],["ConversationThreadRepository.__init__","PromptLoader.__init__"],["atomic","decorator"],["ConversationsPage.__init__","RegistrationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","_ProfileFromAnswers.__init__"],["TestGetCurrentAdminUser.test_admin_email_subdomain_access","make_token"],["OnboardingServerToolHandler.handle_request","VoiceService.end_call"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SummaryGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceOnboardingFlow.__init__"],["NikitaThoughtRepository.__init__","OTPVerificationHandler.__init__"],["ConversationsPage.__init__","ViceAnalyzer.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","get_email_impl"],["NikitaThoughtRepository.__init__","TemplateGenerator.__init__"],["ProfileRepository.__init__","MetaPromptService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PunctuationProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EngagementStateMachine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingStateRepository.__init__"],["run_manual_otp_test","WebhookTestData.create"],["LifeSimulator.get_events_for_context","LifeSimulator.get_current_mood"],["TestMoodDerivation.test_context_package_mood_from_simulator","TestMoodDerivation.mock_session_context"],["VoiceService.initiate_call","TemplateGenerator._load_context"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BackstoryGeneratorService.__init__"],["UserNotFoundError.__init__","ViceScorer.__init__"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","TestHelpers.navigate_and_get_content"],["TestContextPackagePopulation.mock_session_context","BackstoryRepository.__init__"],["DashboardPage.__init__","JourneyReport.__init__"],["UserRepository.__init__","RegistrationHandler.__init__"],["DailySummaryRepository.__init__","TestUserMetricsRepository.__init__"],["ScoreHistoryRepository.__init__","MetaPromptService.__init__"],["TestMoodDerivation.mock_session_context","SummaryGenerator.__init__"],["LoginPage.__init__","SkipDecision.__init__"],["MissingVariableError.__init__","FactExtractor.__init__"],["DashboardPage.__init__","VicePreferenceRepository.__init__"],["BackstoryRepository.__init__","LengthAdjuster.__init__"],["OnboardingServerToolHandler.handle_request","collect_profile"],["NikitaMemory.add_user_fact","add_episode"],["JobExecutionRepository.__init__","BaseRepository.__init__"],["EngagementStateMachine.update","EngagementStateMachine._apply_transition"],["TestResponseTimer.test_calculate_delay_within_chapter_range","mock_production_settings"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TranscriptManager.__init__"],["JobExecutionRepository.__init__","SupabaseHelper.__init__"],["UserRepository.__init__","ViceAnalyzer.__init__"],["MessageSplitter._force_split","MessageSplitter.split"],["DailySummaryRepository.__init__","TestMoodDerivation.__init__"],["verify_task_secret","_get_task_secret"],["PostProcessingPipeline._run_layer_composition","ScheduledEventRepository.mark_failed"],["ConversationThreadRepository.__init__","Layer1Loader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SessionDetector.__init__"],["DashboardE2ETest.get_verification_instructions","step4_db_query"],["ConversationThreadRepository.__init__","ResponseTimer.__init__"],["DashboardPage.__init__","MockMappings.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RateLimiter.__init__"],["ScoreCalculator.calculate","calculate_composite"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestVicePreferenceRepositoryExtras.__init__"],["TestContextPackagePopulation.mock_session_context","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingHandler.__init__"],["GeneratedPromptRepository.__init__","OTPVerificationHandler.__init__"],["GeneratedPromptRepository.__init__","TemplateGenerator.__init__"],["GeneratedPromptRepository.__init__","TokenCounter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EmojiProcessor.__init__"],["Layer3Composer._get_mood_label","_is_neutral"],["DashboardPage.__init__","BreakupManager.__init__"],["JobExecutionRepository.__init__","VoiceOnboardingFlow.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SkipDecision.__init__"],["MissingVariableError.__init__","TelegramAuth.__init__"],["ScoreHistoryRepository.__init__","SkipDecision.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DecayProcessor.__init__"],["TestNikitaThoughtRepository.test_create_missing_him_thought_48h","mock_create_thought"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResolutionManager.__init__"],["DailySummaryRepository.__init__","LayerComposer.__init__"],["ConversationRepository.__init__","FactExtractor.__init__"],["mock_meta_prompt_service","_mock_generator"],["UserNotFoundError.__init__","EvidenceCollector.__init__"],["UserMetricsRepository.__init__","BasePage.__init__"],["ProfileRepository.__init__","InstructionSelector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VenueResearchService.__init__"],["UserRepository.update_game_status","get"],["PostProcessingPipeline._run_layer_composition","TouchpointStore.mark_failed"],["ConversationsPage.__init__","VoiceSessionManager.__init__"],["create_pending_sql","sql_create_pending"],["TestContextPackagePopulation.mock_session_context","SupabaseHelper.__init__"],["TestMoodDerivation.mock_session_context","__aexit__"],["ClinginessDetector.detect","ClinginessDetector._frequency_signal"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ProfileRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","HandoffManager.__init__"],["DailySummaryRepository.__init__","MetaInstructionEngine.__init__"],["HandoffManager.transition","execute_handoff"],["ScoreHistoryRepository.__init__","InstructionSelector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageSplitter.__init__"],["ConversationThreadRepository.__init__","VenueCacheRepository.__init__"],["VoiceCallVerifier._verify_database","_check_score_history"],["ConversationsPage.__init__","MessageGenerator.__init__"],["BackstoryRepository.__init__","TriggerDetector.__init__"],["ConversationRepository.__init__","TelegramAuth.__init__"],["FullJourneyOrchestrator.print_instructions","FullJourneyOrchestrator.get_all_instructions"],["PackageStore.exists","get"],["TestEdgeCases.test_empty_context_still_generates_valid_prompt","mock_meta_prompt_service"],["GeneratedPromptRepository.__init__","UserNotFoundError.__init__"],["TestContextPackagePopulation.mock_session_context","VoiceOnboardingFlow.__init__"],["VoiceOnboardingFlow.get_current_step_message","get_phone_request_message"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step3_extract_all_js"],["TestNikitaThoughtRepository.test_create_thought_valid_types","TestNikitaThoughtRepository.mock_create"],["TelegramWebhookSimulator._build_message","_build_chat"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DatabaseRateLimiter.__init__"],["NikitaThoughtRepository.__init__","SummaryGenerator.__init__"],["TestCallScoring.test_call_scoring_applies_engagement_multiplier","capture_engagement"],["NikitaThoughtRepository.__init__","NarrativeArcManager.__init__"],["EngagementStateRepository.__init__","RegistrationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MoodCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BasePage.__init__"],["InMemoryCache.incr","UserRepository.get"],["LoginPage.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SummaryGenerator.__init__"],["NikitaThoughtRepository.__init__","OnboardingStateRepository.__init__"],["MissingVariableError.__init__","TranscriptManager.__init__"],["MockAgentHelper.patch_get_nikita_agent_for_user","mock_get_agent"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase3Portal.__init__"],["ConversationThreadRepository.__init__","DeliveryResult.__init__"],["EngagementStateRepository.__init__","ViceAnalyzer.__init__"],["ScoreHistoryRepository.__init__","EventGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NikitaThoughtRepository.__init__"],["JobExecutionRepository.__init__","ProfileRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TriggerDetector.__init__"],["VoiceOnboardingFlow.can_resume_onboarding","VoiceOnboardingFlow._get_onboarding_state"],["EntityManager.get_places","get_entities_by_type"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ProfileCollector.__init__"],["MissingVariableError.__init__","SessionDetector.__init__"],["JobExecutionRepository.__init__","MessageSplitter.__init__"],["DashboardPage.__init__","BasePage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer2Composer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EmojiProcessor.__init__"],["BackstoryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestLayer6ResponseGuidelines.test_layer6_gap_based_adjustments","TestLayer6ResponseGuidelines._create_context"],["UserMetricsRepository.__init__","Phase4GameState.__init__"],["TestContextPackagePopulation.mock_session_context","DashboardE2ETest.__init__"],["BackstoryRepository.__init__","ScoreCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DailySummaryRepository.__init__"],["LoginPage.__init__","ConversationsPage.__init__"],["ScoreHistoryRepository.__init__","DailySummaryRepository.__init__"],["GeneratedPromptRepository.__init__","NarrativeArcManager.__init__"],["RateLimiter.get_remaining","PackageStore.get"],["ConversationThreadRepository.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TextPatternProcessor.__init__"],["ConversationRepository.__init__","TranscriptManager.__init__"],["UserRepository.__init__","ResponseDelivery.__init__"],["LoginPage.__init__","EscalationManager.__init__"],["TouchpointScheduler._evaluate_time_trigger","_should_trigger"],["VicePreferenceRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TouchpointStore.get","_to_pydantic"],["TestP1ErrorHandling.test_ep2_otp_disabled_shows_already_used","navigate_and_get_content"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreHistoryRepository.__init__"],["TestUIUX.test_error_page_has_telegram_link","navigate_and_get_content"],["VicePreferenceRepository.__init__","OnboardingHandler.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step5_wait_for_dashboard_js"],["DailySummaryRepository.__init__","EngagementStateMachine.__init__"],["VoiceEventScheduler.schedule_telegram_message","_create_event"],["ConversationConfigBuilder._generate_system_prompt","Layer1Loader._generate_fallback_prompt"],["ConversationRepository.__init__","SessionDetector.__init__"],["MessageHandler.handle","MessageHandler._send_rate_limit_response"],["ConversationsPage.__init__","LifeSimulator.__init__"],["BackstoryRepository.__init__","ConflictGenerator.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._update_state"],["DailySummaryRepository.__init__","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestDailySummaryRepositoryExtras.__init__"],["ProfileCollector.get_completeness_percentage","get_profile"],["ConversationsPage.__init__","CommandHandler.__init__"],["ProfileRepository.update_from_onboarding","get"],["TestContextPackagePopulation.mock_session_context","MessageSplitter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DecayProcessor.__init__"],["UserNotFoundError.__init__","GraphUpdater.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreCalculator.__init__"],["DashboardPage.__init__","JobExecutionRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","HierarchicalPromptComposer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationsPage.__init__"],["UserNotFoundError.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NikitaMemory.__init__"],["PromptLoader._substitute_variables","replace_match"],["TestMoodDerivation.mock_session_context","ScoreHistoryRepository.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator.get_active_arcs"],["GeneratedPromptRepository.__init__","InboundCallHandler.__init__"],["DatabaseRateLimiter.get_remaining","DatabaseRateLimiter._get_minute_window"],["VoiceOnboardingFlow.handle_message","process_ready_response"],["JobExecutionRepository.__init__","EmojiProcessor.__init__"],["EngagementStateRepository.__init__","VoiceSessionManager.__init__"],["NikitaThoughtRepository.__init__","PromptLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EscalationManager.__init__"],["MetaInstructionEngine.get_instructions_for_context","format_for_prompt"],["UserRepository.__init__","LifeSimulator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","HandoffManager.__init__"],["BackstoryRepository.__init__","VoiceAgentConfig.__init__"],["BackstoryRepository.__init__","VoiceService.__init__"],["ProfileRepository.__init__","RegistrationHandler.__init__"],["Layer6Handler.process_modification","retrieve_memory"],["ViceScorer.close","ViceService.close"],["EngagementStateRepository.__init__","MessageGenerator.__init__"],["BackstoryRepository.__init__","EntityManager.__init__"],["ConflictGenerator.should_generate_conflict","ConflictGenerator._prioritize_triggers"],["RateLimiter.check","RateLimiter._get_day_key"],["MissingVariableError.__init__","MoodCalculator.__init__"],["TestMoodDerivation.test_context_package_mood_from_simulator","mock_session_context"],["DashboardPage.__init__","Phase4GameState.__init__"],["InMemoryCache.get","OnboardingStateRepository.get"],["DailySummaryRepository.__init__","SkipDecision.__init__"],["ProfileRepository.__init__","ViceAnalyzer.__init__"],["ProfileRepository.create_profile","BaseRepository.create"],["InstructionSelector.get_instructions_for_situation","InstructionSelector._parse_instruction"],["ScoreHistoryRepository.__init__","RegistrationHandler.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_out_of_zone_recovery"],["UserNotFoundError.__init__","MockResult.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer2Composer.__init__"],["ConversationThreadRepository.__init__","ScoringService.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_fallback_on_timeout","TestTimeoutFallback.slow_function"],["UserRepository.update_onboarding_profile","get"],["ScoreHistoryRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestUserMetricsRepository.__init__"],["DashboardE2ETest.get_verification_instructions","PortalLoginE2ETest.step1_navigate_command"],["GeneratedPromptRepository.__init__","PromptLoader.__init__"],["TestUIUX.test_error_page_has_telegram_link","TestHelpers.navigate_and_get_content"],["TestP0CriticalConcurrency.test_cc1_double_click_returns_success_both_times","navigate_and_get_content"],["ConversationThreadRepository.__init__","ViceScorer.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase2_instructions"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestMoodDerivation.__init__"],["DynamicVariablesBuilder.build_from_user","MetaPromptService._compute_nikita_activity"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SummaryGenerator.__init__"],["VicePreferenceRepository.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EscalationManager.__init__"],["ConversationRepository.__init__","MoodCalculator.__init__"],["ConflictGenerator.generate","ConflictGenerator._calculate_severity"],["BackstoryGeneratorService.process_custom_backstory","BossJudgment._call_llm"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceCallScorer.__init__"],["UserRepository.__init__","MetaNikitaConfig.__init__"],["ConversationThreadRepository.__init__","ConversationRepository.__init__"],["TestLayer5KnowledgeInnerLife.test_layer5_with_active_thoughts","_create_context_with_knowledge"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationConfigBuilder.__init__"],["LayerComposer.compose","_get_user_facts"],["DashboardPage.build_verification_sequence","DashboardPage.js_wait_for_dashboard_loaded"],["TestMoodDerivation.mock_session_context","VoiceCallScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","_ProfileFromAnswers.__init__"],["MissingVariableError.__init__","DecayProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","JourneyReport.__init__"],["JobExecutionRepository.__init__","Layer2Composer.__init__"],["ConversationsPage.__init__","ConversationsE2ETest.__init__"],["ProfileRepository.__init__","VoiceSessionManager.__init__"],["ConversationThreadRepository.__init__","EvidenceCollector.__init__"],["TestMoodDerivation.mock_session_context","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreHistoryRepository.__init__"],["InMemoryCache.get","PendingRegistrationRepository.get"],["EngagementStateRepository.__init__","LifeSimulator.__init__"],["UserRepository.update_game_status","TouchpointStore.get"],["MissingVariableError.__init__","HandoffManager.__init__"],["Layer1Loader._generate_fallback_prompt","Layer1Loader.get_identity"],["UserNotFoundError.__init__","LengthAdjuster.__init__"],["EngagementStateRepository.__init__","CommandHandler.__init__"],["ClinginessDetector._length_ratio_signal","_clamp"],["DecayWarning","getSeverity"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow._get_onboarding_state"],["UserRepository.__init__","ConversationsE2ETest.__init__"],["EvidenceCollector.add_db_snapshot","EvidenceCollector.log"],["OTPEmailParser.parse_magic_link_email","extract_pkce_code"],["UserMetricsRepository.__init__","ScoreAnalyzer.__init__"],["ConfigLoader.__init__","_load_all_configs"],["LoginPage.__init__","TelegramWebhookSimulator.__init__"],["DailySummaryRepository.__init__","DailySummaryRepository.__init__"],["ConversationRepository.__init__","DecayProcessor.__init__"],["NikitaThoughtRepository.__init__","Layer5Injector.__init__"],["VoiceService.initiate_call","_load_user"],["PackageStore.exists","TouchpointStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PendingRegistrationRepository.__init__"],["TemplateGenerator.generate_prompt_legacy","TemplateGenerator.generate_prompt"],["VoiceService.end_call","VoiceService._load_user"],["TestMoodDerivation.mock_session_context","TextPatternProcessor.__init__"],["TestContextPackagePopulation.mock_session_context","Layer2Composer.__init__"],["MetaPromptService._log_prompt","MetaPromptService._count_tokens"],["EventGenerator.generate_events_for_day","_convert_to_life_events"],["ConversationsPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConversationRepository.__init__","HandoffManager.__init__"],["ConversationsPage.__init__","OnboardingHandler.__init__"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow._get_onboarding_state"],["TestLayer3RelationshipState.test_layer3_game_over_status","_create_context"],["MissingVariableError.__init__","SummaryGenerator.__init__"],["EventStore.get_event","_row_to_event"],["DashboardPage.__init__","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramWebhookSimulator.__init__"],["ProfileRepository.__init__","ResponseDelivery.__init__"],["DailySummaryRepository.__init__","ConversationsPage.__init__"],["PendingRegistrationRepository.delete","OnboardingStateRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NikitaThoughtRepository.__init__"],["GeneratedPromptRepository.__init__","Layer5Injector.__init__"],["VicePreferenceRepository.__init__","PunctuationProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreAnalyzer.__init__"],["ScoreHistoryRepository.__init__","ResponseDelivery.__init__"],["GeneratedPromptRepository.__init__","DeliveryResult.__init__"],["TouchpointScheduler.evaluate_event_trigger","get_config"],["NikitaThoughtRepository.__init__","VoiceCallScorer.__init__"],["DashboardPage.__init__","Phase2Conversation.__init__"],["run_async_migrations","get_url"],["SupabaseHelper.verify_registration_from_result","parse_mcp_result"],["ProfileRepository.update_from_onboarding","ProfileRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceCallScorer.__init__"],["NeglectDetector._short_message_signal","UserMetricsRepository._clamp"],["LoginPage.__init__","UserMetricsRepository.__init__"],["NikitaMemory.add_episode","add_episode"],["UserRepository.__init__","MessageHandler.__init__"],["ConversationRepository.__init__","SummaryGenerator.__init__"],["NikitaThoughtRepository.__init__","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EngagementStateMachine.__init__"],["ProfileRepository.__init__","LifeSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BackstoryGeneratorService.__init__"],["ProfileRepository.__init__","CommandHandler.__init__"],["compose_hierarchical_prompt","get_prompt_composer"],["TestEventStore.mock_session_factory","TestEventStore.factory"],["BackstoryRepository.__init__","TestContextPackagePopulation.__init__"],["UserMetricsRepository.__init__","PostProcessor.__init__"],["GeneratedPromptRepository.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BasePage.__init__"],["ConversationsPage.__init__","DatabaseRateLimiter.__init__"],["ConflictStore.reduce_severity","update_conflict"],["ScoreHistoryRepository.__init__","LifeSimulator.__init__"],["EngagementStateRepository.__init__","ConversationsE2ETest.__init__"],["ProfileRepository.update_from_onboarding","TouchpointStore.get"],["SituationDetector._detect_situation_type","_is_conflict_active"],["ConversationThreadRepository.__init__","GraphUpdater.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserMetricsRepository.__init__"],["ScoreHistoryRepository.__init__","CommandHandler.__init__"],["ConversationThreadRepository.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OTPFlowE2ETest.__init__"],["TestMoodDerivation.mock_session_context","TestMoodDerivation.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreHistoryRepository.__init__"],["HierarchicalPromptComposer.compose","HierarchicalPromptComposer._compose_layer6"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","HierarchicalPromptComposer.__init__"],["MockAgentHelper.patch_get_nikita_agent_for_user","MockAgentHelper.create_mock_deps"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LayerComposer.__init__"],["UserRepository.__init__","ConflictDetector.__init__"],["BaseRepository.session","OnboardingStateRepository.session"],["TestConversationsE2E.test_verification_instructions","ConversationsE2ETest.get_verification_instructions"],["DashboardPage.__init__","ResolutionManager.__init__"],["TemplateGenerator.generate_prompt_legacy","_layer1_core_identity"],["DailySummaryRepository.get_for_date","get_by_date"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserRepository.__init__"],["UserMetricsRepository.__init__","OnboardingServerToolHandler.__init__"],["PostProcessingPipeline._run_graph_update","ScheduledEventRepository.mark_failed"],["TouchpointStore.delete","PendingRegistrationRepository.delete"],["Layer3Composer.describe_state","_describe_arousal"],["DashboardPage.__init__","VenueResearchService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase1Registration.__init__"],["ConversationsPage.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SkipDecision.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GmailHelper.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestContextPackagePopulation.__init__"],["TranscriptManager.store_facts_batch","store_fact"],["BackstoryRepository.__init__","FactExtractor.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.build_cleanup_query"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MetaInstructionEngine.__init__"],["TestMoodDerivation.mock_session_context","LayerComposer.__init__"],["LengthAdjuster.adjust","LengthAdjuster._truncate"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step4_db_query"],["MetaPromptService._load_context","_compute_nikita_energy"],["PortalLoginE2ETest.get_complete_flow_instructions","step3_build_gmail_query"],["UserNotFoundError.__init__","VicePreferenceRepository.__init__"],["format_markdown","format_check"],["ProfileRepository.__init__","MetaNikitaConfig.__init__"],["UserNotFoundError.__init__","ConflictGenerator.__init__"],["EngagementStateRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["UserRepository.__init__","DashboardPage.__init__"],["EngagementStateRepository.__init__","OnboardingHandler.__init__"],["UserRepository.update_onboarding_profile","TouchpointStore.get"],["generate_response","build_system_prompt"],["TestMoodDerivation.mock_session_context","MetaInstructionEngine.__init__"],["PostProcessingPipeline._run_graph_update","TouchpointStore.mark_failed"],["VoiceService.initiate_call","InboundCallHandler._generate_signed_token"],["TranscriptManager.generate_summary","TranscriptManager._summarize_via_llm"],["UserNotFoundError.__init__","MockMappings.__init__"],["OptimalFrequencyCalculator.get_bounds","OptimalFrequencyCalculator.get_tolerance_band"],["ScoreHistoryRepository.__init__","MetaNikitaConfig.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","step5_verify_result"],["PostProcessingPipeline._run_graph_update","ConversationRepository.mark_failed"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InMemoryCache.__init__"],["DashboardPage.__init__","PostProcessor.__init__"],["UserMetricsRepository.__init__","VoiceCallVerifier.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","FactExtractor.__init__"],["UserNotFoundError.__init__","BreakupManager.__init__"],["UserRepository.increment_boss_attempts","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase4GameState.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StrategicSilence.__init__"],["RateLimiter.__init__","PackageStore.get"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_mood"],["UserNotFoundError.__init__","VoiceService.__init__"],["VicePreferenceRepository.__init__","NikitaThoughtRepository.__init__"],["VicePreferenceRepository.__init__","TriggerDetector.__init__"],["TelegramWebhookSimulator._build_update","TelegramWebhookSimulator._build_message"],["BreakupManager.check_and_process","BreakupManager.trigger_breakup"],["trigger_pipeline","is_pipeline_enabled"],["TestP2EdgeCases.test_ec2_malformed_base64_in_jwt_returns_error","navigate_and_get_content"],["DashboardPage.__init__","OnboardingServerToolHandler.__init__"],["BackstoryRepository.__init__","EngagementStateRepository.__init__"],["ProfileRepository.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EventGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceCallScorer.__init__"],["ScoreAnalyzer.analyze","BossJudgment._call_llm"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer4Computer.__init__"],["InstructionSet.format_for_prompt","InstructionSet.by_category"],["MissingVariableError.__init__","ScoreHistoryRepository.__init__"],["DailySummaryRepository.__init__","TelegramWebhookSimulator.__init__"],["TestContextPackagePopulation.mock_session_context","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RateLimiter.__init__"],["ScoreHistoryRepository.__init__","ConversationsE2ETest.__init__"],["ViceService.close","ViceScorer.close"],["EngagementStateRepository.__init__","DatabaseRateLimiter.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step3_extract_all_js"],["UserNotFoundError.__init__","ExperimentLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase1Registration.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator.get_today_events"],["ConversationThreadRepository.__init__","LengthAdjuster.__init__"],["LifeSimulator.generate_next_day_events","EventStore.get_recent_events"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceCallVerifier.__init__"],["StateComputer._apply_life_event_deltas","StateComputer._apply_life_event_deltas"],["Layer3Composer.compose","_get_mood_label"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DailySummaryRepository.__init__"],["GeneratedPromptRepository.__init__","EvidenceCollector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EventStore.__init__"],["BackstoryRepository.__init__","PreferenceConfigurator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EngagementStateRepository.__init__"],["VicePreferenceRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["BackstoryRepository.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BackstoryGeneratorService.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_capped_at_max","create_mock_user"],["VicePreferenceRepository.__init__","ScoreCalculator.__init__"],["VoiceService.initiate_call","VoiceService._log_call_started"],["GraphUpdater.add_user_fact","NikitaMemory.add_user_fact"],["VicePreferenceRepository.__init__","HierarchicalPromptComposer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LayerComposer.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_configurable_max","create_mock_user"],["PendingRegistrationRepository.cleanup_expired","PackageStore.delete"],["TestMemoryContextLoading.test_multi_graph_parallel_query_pattern","mock_search_memory"],["UserRepository.__init__","StateComputer.__init__"],["DashboardPage.__init__","VoiceCallVerifier.__init__"],["BackstoryRepository.__init__","SessionDetector.__init__"],["ConversationRepository.__init__","ScoreHistoryRepository.__init__"],["EngagementStateRepository.__init__","DashboardPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TextPatternProcessor.__init__"],["ConfigLoader._load_all_configs","ConfigLoader._load_yaml"],["JobExecutionRepository.__init__","OTPFlowE2ETest.__init__"],["StateComputer.compute","StateComputer._compute_base_state"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.is_valid_phone"],["NikitaMemory.get_context_for_prompt","search_memory"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MetaInstructionEngine.__init__"],["TestMoodDerivation.mock_session_context","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationsPage.__init__"],["ProfileRepository.__init__","MessageHandler.__init__"],["DatabaseRateLimiter.check","RateLimiter._seconds_until_midnight"],["ViceBoundaryEnforcer.max_intensity_for_chapter","ViceBoundaryEnforcer.max_intensity_for_chapter"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PreferenceConfigurator.__init__"],["DailySummaryRepository.__init__","UserMetricsRepository.__init__"],["EventStore.save_entities","save_entity"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PackageStore.__init__"],["JobExecutionRepository.__init__","Phase1Registration.__init__"],["ScoreHistoryRepository.__init__","MessageHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SessionDetector.__init__"],["JobExecutionRepository.__init__","EventStore.__init__"],["EventStore.get_recent_events","_row_to_event"],["ConflictDetector.check_escalation","_find_intermediate_state"],["ViceService.close","TelegramBot.close"],["Layer3Composer.compose","_get_conflict_state"],["MissingVariableError.__init__","VoiceCallScorer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer4Computer.__init__"],["VicePreferenceRepository.__init__","VoiceAgentConfig.__init__"],["PunctuationProcessor.apply","_add_trailing_dots"],["MetaPromptService.generate_system_prompt","MetaPromptService._format_template"],["TestContextPackagePopulation.mock_session_context","OTPFlowE2ETest.__init__"],["UserMetricsRepository.__init__","StateStore.__init__"],["TestContextPackagePopulation.mock_session_context","TestContextPackagePopulation.__aexit__"],["UserNotFoundError.__init__","TestVicePreferenceRepository.__init__"],["MissingVariableError.__init__","ConversationConfigBuilder.__init__"],["UserNotFoundError.__init__","JobExecutionRepository.__init__"],["UserRepository.__init__","GmailMCPClient.__init__"],["NeglectDetector.detect","StateComputer._clamp"],["ProfileRepository.__init__","DatabaseRateLimiter.__init__"],["PreferenceConfigurator.get_conversation_style_config","get_conversation_style_config"],["LoginPage.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","__init__"],["ScoreHistoryRepository.__init__","ConflictDetector.__init__"],["TestTurnScoring.test_score_turn_respects_chapter_weights","capture_context"],["NikitaThoughtRepository.__init__","RateLimiter.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","TouchpointEngine._compute_hours_since_contact"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestUserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PortalLoginE2ETest.__init__"],["ScoreCalculator.calculate","ScoreCalculator.apply_multiplier"],["generate_touchpoint_message","SummaryGenerator.generate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationThreadRepository.__init__"],["LifeSimulator.get_events_for_context","get_current_mood"],["ConversationRepository.__init__","VoiceCallScorer.__init__"],["ConversationsPage.__init__","BackstoryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestMoodDerivation.__init__"],["BossJudgment.judge_boss_outcome","BossJudgment._call_llm"],["LifeSimulator.get_current_mood","EventStore.get_recent_events"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.resume_onboarding"],["ProfileRepository.__init__","DashboardPage.__init__"],["ConversationRepository.__init__","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreAnalyzer.__init__"],["SessionDetector.detect_and_queue","SessionDetector.get_stale_sessions"],["EscalationManager.check_escalation","_get_next_level"],["LifeEvent.model_dump_for_db","ViceProfile.to_dict"],["JobExecutionRepository.__init__","Layer4Computer.__init__"],["GeneratedPromptRepository.__init__","GraphUpdater.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ServerToolHandler.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_floor_at_zero","create_mock_user"],["EscalationManager.check_escalation","EscalationManager._get_next_level"],["TestContextPackagePopulation.mock_session_context","ConflictStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StateStore.__init__"],["NikitaThoughtRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserRepository.__init__"],["run_migrations_online","run_async_migrations"],["TestContextPackagePopulation.mock_session_context","InMemoryCache.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BackstoryGeneratorService.__init__"],["ScoreHistoryRepository.__init__","DashboardPage.__init__"],["UserRepository.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointStore.__init__"],["VenueResearchService.research_venues","VenueResearchService._create_fallback_result"],["VoiceOnboardingFlow.process_ready_response","_save_deferred_state"],["TestDecayProcessorProcessUser.test_process_user_returns_none_when_within_grace","create_mock_user"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PackageStore.__init__"],["HierarchicalPromptComposer.compose","_estimate_tokens"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LayerComposer.__init__"],["TestContextPackagePopulation.mock_session_context","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestContextPackagePopulation.__init__"],["ConfigLoader.__init__","ConfigLoader._load_all_configs"],["GeneratedPromptRepository.__init__","RateLimiter.__init__"],["FullJourneyOrchestrator.print_instructions","get_all_instructions"],["EscalationManager.escalate","_get_next_level"],["OnboardingHandler.resume","OnboardingHandler.has_incomplete_onboarding"],["ConversationThreadRepository.__init__","ConflictGenerator.__init__"],["DashboardPage.__init__","StateStore.__init__"],["EscalationManager.escalate","EscalationManager._get_next_level"],["StateComputer.compute","_compute_base_state"],["JobExecutionRepository.__init__","PortalLoginE2ETest.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OTPVerificationHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VenueCacheRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BaseRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MetaInstructionEngine.__init__"],["ConversationThreadRepository.__init__","MockMappings.__init__"],["UserRepository.__init__","ConfigLoader.__init__"],["PendingRegistrationRepository.get_email","BaseRepository.get"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._get_onboarding_state"],["TestContextPackagePopulation.mock_session_context","Layer4Computer.__init__"],["GeneratedPromptRepository.__init__","MockResult.__init__"],["ConflictStore.escalate_conflict","update_conflict"],["ConversationThreadRepository.__init__","BreakupManager.__init__"],["TestCallScoring.test_call_scoring_applies_engagement_multiplier","TestCallScoring.capture_engagement"],["DashboardPage.__init__","Layer6Handler.__init__"],["CommandHandler._handle_status","_get_chapter_name"],["TestEventStore.mock_session_factory","TestContextPackagePopulation.__aexit__"],["ConversationThreadRepository.__init__","VoiceService.__init__"],["ConversationThreadRepository.__init__","EntityManager.__init__"],["ScoreAnalyzer._call_llm","_build_analysis_prompt"],["ConversationsPage.__init__","HierarchicalPromptComposer.__init__"],["BackstoryRepository.__init__","HandoffManager.__init__"],["LoginPage.__init__","StateComputer.__init__"],["UserMetricsRepository.__init__","Layer3Composer.__init__"],["MetaPromptService.generate_daily_summary","_load_context"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageGenerator.__init__"],["BackstoryRepository.create_from_scenario","BackstoryRepository.create"],["JobExecutionRepository.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EscalationManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationThreadRepository.__init__"],["OnboardingHandler.handle","_handle_scene_step"],["NeglectDetector.detect","NeglectDetector._short_message_signal"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramWebhookSimulator.__init__"],["TestContextPackagePopulation.mock_session_context","PortalLoginE2ETest.__init__"],["ConversationsPage.__init__","GmailHelper.__init__"],["NeglectDetector._short_message_signal","_clamp"],["InboundCallHandler.handle_incoming_call","_get_conversation_config_override"],["TouchpointScheduler._evaluate_gap_trigger","TouchpointScheduler._should_trigger"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PostProcessor.__init__"],["TestMoodDerivation.mock_session_context","ConversationsPage.__init__"],["UserRepository.update_onboarding_status","get"],["Layer3Composer.compose","describe_state"],["Layer1Loader._generate_fallback_prompt","get_identity"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResponseDelivery.__init__"],["RecoveryManager.get_estimated_recovery_time","calculate_recovery_rate"],["TestMoodDerivation.mock_session_context","EscalationManager.__init__"],["UserMetricsRepository.__init__","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StateComputer.__init__"],["UserNotFoundError.__init__","TelegramAuth.__init__"],["ConversationThreadRepository.__init__","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","StateComputer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","HandoffManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","_ProfileFromAnswers.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointScheduler.__init__"],["UserRepository.__init__","GmailHelper.__init__"],["TestDecayProcessorShouldSkipUser.test_skip_boss_fight_status","create_mock_user"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointStore.__init__"],["BackstoryRepository.__init__","SummaryGenerator.__init__"],["BackstoryRepository.__init__","NarrativeArcManager.__init__"],["EngagementStateRepository.__init__","BackstoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingServerToolHandler.__init__"],["MissingVariableError.__init__","LayerComposer.__init__"],["BackstoryRepository.__init__","OnboardingStateRepository.__init__"],["TestContextPackagePopulation.mock_session_context","PackageStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer3Composer.__init__"],["UserNotFoundError.__init__","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EngagementStateRepository.__init__"],["UserMetricsRepository.__init__","TokenValidator.__init__"],["ViceAnalyzer.analyze_exchange","_analyze_with_llm"],["StateComputer._compute_base_state","UserMetricsRepository._clamp"],["TelegramAuth.register_user","TelegramAuth.send_otp_code"],["RateLimiter.__init__","expire"],["PortalLoginE2ETest.get_complete_flow_instructions","step2_wait_for_success_js"],["TestContextInjectionPerformance.test_composition_p99_under_150ms","create_realistic_package"],["TestMoodDerivation.mock_session_context","_ProfileFromAnswers.__init__"],["JobExecutionRepository.__init__","ConversationThreadRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VenueCacheRepository.__init__"],["MockAgentHelper.mock_get_agent","create_mock_deps"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EngagementStateMachine.__init__"],["EvidenceCollector.save_report","JourneyReport.generate_report"],["LoginPage.__init__","GmailMCPClient.__init__"],["VicePreferenceRepository.__init__","UserRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TestContextPackagePopulation.__aenter__"],["DailySummaryRepository.get_for_date","DailySummaryRepository.get_by_date"],["TestDecayProcessorProcessUser.test_process_user_skips_boss_fight","create_mock_user"],["MissingVariableError.__init__","MetaInstructionEngine.__init__"],["EngagementStateRepository.__init__","ConfigLoader.__init__"],["ClinginessDetector.detect","ClinginessDetector._double_text_signal"],["LoginPage.__init__","ElevenLabsConversationsClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BackstoryGeneratorService.__init__"],["DashboardPage.__init__","Layer3Composer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserMetricsRepository.__init__"],["generate_first_nikita_message","generate"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ProfileRepository.__init__"],["PromptLoader.load","_resolve_path"],["run_in_transaction","atomic"],["BreakupManager.check_and_process","trigger_breakup"],["MetaPromptService.__init__","MetaPromptService._load_templates"],["VicePreferenceRepository.__init__","TestContextPackagePopulation.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SummaryGenerator.__init__"],["UserRepository.__init__","DashboardE2ETest.__init__"],["UserNotFoundError.__init__","Phase2Conversation.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NarrativeArcManager.__init__"],["UserMetricsRepository.__init__","TelegramBot.__init__"],["BreakupManager.get_relationship_status","BreakupManager.check_threshold"],["ServerToolHandler.handle","_get_memory"],["OTPVerificationHandler.handle","_offer_onboarding_choice"],["InstructionSelector.select","_parse_instruction"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingStateRepository.__init__"],["ConversationRepository.__init__","LayerComposer.__init__"],["LayerComposer.compose","_create_minimal_package"],["UserMetricsRepository.update_metrics","get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PreferenceConfigurator.__init__"],["JobExecutionRepository.__init__","TouchpointScheduler.__init__"],["LoginPage.__init__","ViceService.__init__"],["RecoveryManager.get_estimated_recovery_time","RecoveryManager.calculate_recovery_rate"],["ConflictDetector.check_escalation","_get_trigger_reason"],["JobExecutionRepository.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceCallVerifier.__init__"],["JobExecutionRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GmailMCPClient.__init__"],["ScoreHistoryRepository.__init__","GmailMCPClient.__init__"],["DailySummaryRepository.__init__","ServerToolHandler.__init__"],["DashboardPage.__init__","TTSConfigService.__init__"],["ConflictStore.get_conflict_summary","get_active_conflict"],["StateComputer.compute","_apply_conversation_deltas"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ElevenLabsConversationsClient.__init__"],["ConversationRepository.__init__","MetaInstructionEngine.__init__"],["EscalationManager.check_escalation","EscalationManager._check_natural_resolution"],["TestContextPackagePopulation.mock_session_context","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenValidator.__init__"],["UserMetricsRepository.__init__","PostProcessingPipeline.__init__"],["TestContextPackagePopulation.mock_session_context","Layer1Loader.__init__"],["UserRepository.__init__","MessageSplitter.__init__"],["JobExecutionRepository.__init__","VenueCacheRepository.__init__"],["TestContextPackagePopulation.mock_session_context","ResponseTimer.__init__"],["ConversationThreadRepository.__init__","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoringService.__init__"],["PostProcessingPipeline._run_summary_generation","ProcessingStep.mark_running"],["UserMetricsRepository.__init__","RecoveryManager.__init__"],["LifeSimulator.generate_next_day_events","LifeSimulator.get_recent_events"],["InMemoryCache.get","InMemoryCache.get"],["ConversationThreadRepository.__init__","JobExecutionRepository.__init__"],["_ChapterBehaviorsProxy.values","values"],["EngagementStateRepository.__init__","HierarchicalPromptComposer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceService.__init__"],["LifeSimulator.generate_next_day_events","get_active_arcs"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MetaNikitaConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EscalationManager.__init__"],["UserNotFoundError.__init__","ResolutionManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramBot.__init__"],["EngagementStateRepository.__init__","GmailHelper.__init__"],["ProfileCollector.collect","_set_field"],["ProfileRepository.__init__","BackstoryRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TouchpointStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EmojiProcessor.__init__"],["UserNotFoundError.__init__","VenueResearchService.__init__"],["TokenCounter.fits_budget","TokenValidator.count_tokens"],["TestUIUX.test_error_page_has_instructions","navigate_and_get_content"],["PostProcessingPipeline.process","_run_graph_update"],["NikitaThoughtRepository.bulk_create_thoughts","create_thought"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationRepository.__init__"],["NikitaThoughtRepository.__init__","_ProfileFromAnswers.__init__"],["ScoreHistoryRepository.__init__","BackstoryRepository.__init__"],["NikitaThoughtRepository.__init__","JourneyReport.__init__"],["UserMetricsRepository.__init__","NikitaMemory.__init__"],["NikitaThoughtRepository.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BasePage.__init__"],["get_pool_status","get_async_engine"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","_ProfileFromAnswers.__init__"],["TestContextPackagePopulation.mock_session_context","VenueCacheRepository.__init__"],["ScoreCard","getStrokeColor"],["VoiceOnboardingFlow.handle_onboard_command","resume_onboarding"],["MetaPromptService._load_memory_context","_query_graph"],["ProfileRepository.update_from_onboarding","OnboardingStateRepository.get"],["ProfileRepository.__init__","ConfigLoader.__init__"],["EscalationManager.get_escalation_timeline","EscalationManager._get_time_in_level"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step1_send_start"],["MissingVariableError.__init__","BackstoryGeneratorService.__init__"],["TestEventStore.mock_session_factory","TestContextPackagePopulation.__aenter__"],["HierarchicalPromptComposer.compose","_compose_layer5"],["UserMetricsRepository.__init__","MissingVariableError.__init__"],["LoginPage.__init__","BaseRepository.__init__"],["DashboardPage.__init__","ProfileCollector.__init__"],["TestGraphUpdater.mock_memory_factory","TestGraphUpdater.factory"],["LoginPage.__init__","SupabaseHelper.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_package_storage"],["VicePreferenceRepository.__init__","EngagementStateRepository.__init__"],["ScoreHistoryRepository.__init__","ConfigLoader.__init__"],["analyze_neediness","_call_neediness_llm"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_game_over_triggered_at_zero","create_mock_user"],["TestMoodDerivation.mock_session_context","TelegramWebhookSimulator.__init__"],["EngagementStateMachine._apply_transition","EngagementStateMachine._get_transition_reason"],["DashboardPage.__init__","PostProcessingPipeline.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step3_build_gmail_query"],["EventStore.get_events_by_domain","EventStore._row_to_event"],["LifeSimulator.generate_next_day_events","get_recent_events"],["UserNotFoundError.__init__","MoodCalculator.__init__"],["DashboardPage.__init__","RecoveryManager.__init__"],["UserMetricsRepository.__init__","GeneratedPromptRepository.__init__"],["TemplateGenerator.generate_prompt_legacy","VoiceService._load_context"],["GeneratedPromptRepository.__init__","JourneyReport.__init__"],["DailySummaryRepository.__init__","StateComputer.__init__"],["build_dynamic_variables","DynamicVariablesBuilder.build_from_user"],["HandoffManager.execute_handoff","HandoffManager._send_first_message"],["LoginPage.__init__","VoiceOnboardingFlow.__init__"],["GeneratedPromptRepository.__init__","VicePreferenceRepository.__init__"],["DashboardPage.__init__","TextPatternProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OTPVerificationHandler.__init__"],["ConversationsPage.__init__","__init__"],["MetaPromptService._load_context","_compute_nikita_activity"],["ScoreCalculator.apply_multiplier","LengthAdjuster.adjust"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TemplateGenerator.__init__"],["UserRepository.complete_onboarding","PendingRegistrationRepository.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BaseRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenCounter.__init__"],["with_timeout_fallback","decorator"],["InboundCallHandler._generate_fallback_prompt","ConversationConfigBuilder._get_relationship_score"],["UserMetricsRepository.__init__","ScheduledEventRepository.__init__"],["ConflictDetector.detect_conflict_state","_get_severity"],["ConversationRepository.__init__","BackstoryGeneratorService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SupabaseHelper.__init__"],["TestTimeoutFallback.test_timeout_fallback_includes_cache_friendly","TestTimeoutFallback.timeout_function"],["BackstoryRepository.__init__","ScoreHistoryRepository.__init__"],["VicePreferenceRepository.__init__","PreferenceConfigurator.__init__"],["ClinginessDetector.detect","NeglectDetector._response_time_signal"],["GeneratedPromptRepository.__init__","MockMappings.__init__"],["ConversationThreadRepository.__init__","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StateStore.__init__"],["ProfileRepository.__init__","GmailHelper.__init__"],["TestP1ErrorHandling.test_ep1_otp_expired_shows_expiry_message","TestHelpers.navigate_and_get_content"],["GeneratedPromptRepository.__init__","BreakupManager.__init__"],["DashboardPage.__init__","NikitaMemory.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceOnboardingFlow.__init__"],["LifeSimulator.get_current_mood","LifeSimulator.get_recent_events"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase4GameState.__init__"],["ConversationsPage.__init__","UserRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationRepository.__init__"],["TestMoodDerivation.mock_session_context","UserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GeneratedPromptRepository.__init__"],["DashboardPage.__init__","MissingVariableError.__init__"],["ScoreHistoryRepository.__init__","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationsPage.__init__"],["ProfileRepository.create_profile","WebhookTestData.create"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreHistoryRepository.__init__"],["test_context","TouchpointStore.create"],["BackstoryRepository.__init__","Layer5Injector.__init__"],["UserRepository.update_onboarding_status","TouchpointStore.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestVicePreferenceRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingHandler.__init__"],["TokenCounter.count","TokenValidator.count_tokens"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EscalationManager.__init__"],["UserNotFoundError.__init__","DecayProcessor.__init__"],["ConversationThreadRepository.__init__","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserNotFoundError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","ScoringService.__init__"],["DailySummaryRepository.__init__","GmailMCPClient.__init__"],["ScoreCalculator.calculate","update_metrics"],["ProfileRepository.__init__","DashboardE2ETest.__init__"],["OnboardingHandler.handle","_handle_skip"],["DailySummaryRepository.__init__","ElevenLabsConversationsClient.__init__"],["BaseRepository.update","InMemoryCache.get"],["SessionDetector.detect_and_queue","mark_for_processing"],["NikitaThoughtRepository.__init__","BasePage.__init__"],["LoginPage.__init__","ProfileRepository.__init__"],["DashboardPage.__init__","TestUserMetricsRepository.__init__"],["Layer6Handler.process_modification","apply_modification"],["ScoreHistoryRepository.__init__","DashboardE2ETest.__init__"],["BaseRepository.session","BaseRepository.session"],["SummaryGenerator._update_daily_summary","_count_conversations_today"],["TestDecayProcessorNoCatchUp.test_no_catch_up_decay_after_boss_resolved","create_mock_user"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer5Injector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictDetector.__init__"],["DashboardPage.__init__","TestMoodDerivation.__init__"],["DailySummaryRepository.__init__","ViceService.__init__"],["ResponseDelivery._send_now","ResponseDelivery._split_message"],["UserMetricsRepository.__init__","FullJourneyOrchestrator.__init__"],["JobExecutionRepository.__init__","ConversationRepository.__init__"],["ClinginessDetector._length_ratio_signal","StateComputer._clamp"],["BaseRepository.session","session"],["TestMemoryContextLoading.test_multi_graph_parallel_query_pattern","mock_get_client"],["EngagementStateMachine.update","EngagementStateMachine._evaluate_transition"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DecayCalculator.__init__"],["BackstoryRepository.__init__","VoiceCallScorer.__init__"],["ClinginessDetector.detect","ClinginessDetector._response_time_signal"],["JobExecutionRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["JobExecutionRepository.__init__","OnboardingHandler.__init__"],["ConversationThreadRepository.__init__","Phase2Conversation.__init__"],["LifeSimulator.get_current_mood","get_recent_events"],["add_pipeline_trigger_to_background_tasks","close_conversation"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ProfileRepository.__init__"],["TestContextPackagePopulation.mock_session_context","ScoringService.__init__"],["BackstoryRepository.__init__","ConversationConfigBuilder.__init__"],["LifeSimulator.get_events_for_context","EventStore.get_active_arcs"],["ScoreCalculator.calculate","ScoreCalculator.update_metrics"],["ViceScorer.process_signals","_get_vice_repo"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NarrativeArcManager.__init__"],["DashboardE2ETest.get_verification_instructions","step2_wait_js"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageSplitter.__init__"],["TestContextPackagePopulation.mock_session_context","ViceScorer.__init__"],["OTPEmailParser.parse_otp_email","OTPEmailParser._extract_body"],["ScoreHistoryRepository.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ServerToolHandler.__init__"],["EngagementStateRepository.__init__","__init__"],["VicePreferenceRepository.__init__","OTPVerificationHandler.__init__"],["VicePreferenceRepository.__init__","TemplateGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase3Portal.__init__"],["ConversationThreadRepository.__init__","SessionDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceCallScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer3Composer.__init__"],["TestContextPackagePopulation.mock_session_context","ConversationRepository.__init__"],["TestConversationThreadRepository.test_create_thread_valid_types","TestConversationThreadRepository.mock_create"],["MissingVariableError.__init__","ConversationsPage.__init__"],["LoginPage.__init__","EmojiProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","FullJourneyOrchestrator.__init__"],["OnboardingStateRepository.update_step","PendingRegistrationRepository.get"],["TriggerDetector.__init__","_get_detection_prompt"],["OnboardingHandler.handle","OnboardingHandler._handle_scene_step"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationConfigBuilder.__init__"],["EventGenerator.generate_events_for_day","_build_generation_prompt"],["ScoreAnalyzer.analyze","_neutral_analysis"],["MissingVariableError.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InboundCallHandler.__init__"],["NikitaThoughtRepository.__init__","Phase4GameState.__init__"],["LayerComposer.compose","_compute_emotional_state"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PunctuationProcessor.__init__"],["ConversationThreadRepository.__init__","ResolutionManager.__init__"],["EngagementStateRepository.__init__","UserRepository.__init__"],["create_telegram_router","render_error_page"],["GeneratedPromptRepository.__init__","TestVicePreferenceRepository.__init__"],["DashboardPage.__init__","FullJourneyOrchestrator.__init__"],["GeneratedPromptRepository.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TTSConfigService.__init__"],["VenueResearchService.research_venues","VenueResearchService._is_expired"],["ConversationThreadRepository.__init__","VenueResearchService.__init__"],["UserMetricsRepository.__init__","MetaPromptService.__init__"],["DailySummaryRepository.__init__","BaseRepository.__init__"],["ViceScorer.close","ViceScorer.close"],["DailySummaryRepository.__init__","SupabaseHelper.__init__"],["deliver_due_touchpoints","TouchpointEngine.deliver_due_touchpoints"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EmojiProcessor.__init__"],["MetaPromptService._load_context","_load_behavioral_instructions"],["PackageStore.delete","PackageStore.delete"],["TemplateGenerator.generate_prompt_legacy","MetaPromptService._load_context"],["ConversationRepository.__init__","ConversationsPage.__init__"],["BaseRepository.get","get"],["MessageHandler._needs_onboarding","MessageHandler._offer_onboarding_choice"],["MissingVariableError.__init__","_ProfileFromAnswers.__init__"],["JobExecutionRepository.__init__","Phase3Portal.__init__"],["BaseRepository.delete_by_id","_ChapterBehaviorsProxy.get"],["VenueResearchService.research_venues","_search_firecrawl"],["ConversationRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenValidator.__init__"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_energy"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PromptLoader.__init__"],["DailySummaryRepository.__init__","VoiceOnboardingFlow.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LengthAdjuster.__init__"],["StateComputer._compute_base_state","_clamp"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StateComputer.__init__"],["TestConversationThreadRepository.test_bulk_resolve_threads_resolves_found","TestConversationThreadRepository.mock_resolve_thread"],["UserNotFoundError.__init__","Layer6Handler.__init__"],["ConversationThreadRepository.__init__","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramBot.__init__"],["PostProcessingPipeline._run_summary_generation","mark_failed"],["ProfileRepository.__init__","__init__"],["PostProcessingPipeline._run_touchpoint_scheduling","ProcessingStep.mark_completed"],["ConversationRepository.__init__","_ProfileFromAnswers.__init__"],["DashboardPage.__init__","EngagementStateMachine.__init__"],["_ChapterBehaviorsProxy.__len__","_load_chapter_behaviors"],["UserMetricsRepository.__init__","InstructionSelector.__init__"],["TestMoodDerivation.mock_session_context","ScoreAnalyzer.__init__"],["LoginPage.__init__","Layer2Composer.__init__"],["ScoreHistoryRepository.__init__","__init__"],["VicePreferenceRepository.__init__","SummaryGenerator.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step3_build_otp_search_query"],["VicePreferenceRepository.__init__","NarrativeArcManager.__init__"],["DashboardPage.__init__","MetaPromptService.__init__"],["ViceScorer.close","TelegramBot.close"],["NikitaMemory.add_nikita_event","add_episode"],["UserMetricsRepository.calculate_composite","ProfileRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PostProcessingPipeline.__init__"],["UserRepository.__init__","PendingRegistrationRepository.__init__"],["VicePreferenceRepository.__init__","OnboardingStateRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PunctuationProcessor.__init__"],["EventDeliveryHandler.deliver","EventDeliveryHandler._deliver_telegram_event"],["PostProcessingPipeline.process","_run_summary_generation"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RecoveryManager.__init__"],["LoginPage.__init__","ScheduledEventRepository.__init__"],["ConflictStore.increment_resolution_attempts","update_conflict"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer2Composer.__init__"],["BackstoryRepository.__init__","LayerComposer.__init__"],["UserRepository.update_game_status","BaseRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserMetricsRepository.__init__"],["DailySummaryRepository.__init__","ProfileRepository.__init__"],["TelegramWebhookSimulator._build_command_update","_build_update"],["ConversationConfigBuilder.build_config","VoiceService._get_first_message"],["DashboardPage.__init__","SkipDecision.__init__"],["EntityManager.get_entities_by_type","EntityManager.get_entities_by_type"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GmailMCPClient.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TriggerDetector.__init__"],["NikitaThoughtRepository.__init__","LoginPage.__init__"],["DailySummaryRepository.__init__","MessageSplitter.__init__"],["ConversationThreadRepository.__init__","DecayProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InstructionSelector.__init__"],["LifeEvent.model_dump_for_db","TriggerContext.to_dict"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ElevenLabsConversationsClient.__init__"],["BackstoryRepository.__init__","MetaInstructionEngine.__init__"],["PreferenceConfigurator.get_behavioral_config","get_preferences"],["TestMoodDerivation.mock_session_context","ServerToolHandler.__init__"],["TestContextPackagePopulation.mock_session_context","DecayCalculator.__init__"],["PackageStore.exists","BaseRepository.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NikitaMemory.__init__"],["JobExecutionRepository.__init__","PunctuationProcessor.__init__"],["ConversationsPage.__init__","TemplateGenerator.__init__"],["ConversationThreadRepository.__init__","HandoffManager.__init__"],["TemplateGenerator.generate_prompt_legacy","_layer5_knowledge_inner_life"],["ConversationsPage.__init__","TokenCounter.__init__"],["GeneratedPromptRepository.__init__","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceService.__init__"],["generate_response","add_personalized_context"],["NikitaThoughtRepository.__init__","Phase2Conversation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MissingVariableError.__init__"],["ProfileRepository.update_from_onboarding","EngagementStateRepository.get_by_user_id"],["VicePreferenceRepository.__init__","PromptLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer5Injector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingServerToolHandler.__init__"],["NikitaThoughtRepository.__init__","ScoreAnalyzer.__init__"],["GeneratedPromptRepository.__init__","LoginPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase1Registration.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DeliveryResult.__init__"],["UserRepository.__init__","TokenCounter.__init__"],["ConflictDetector.detect_conflict_state","_can_transition"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GeneratedPromptRepository.__init__"],["EmojiProcessor.process","_add_emoji"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestDailySummaryRepositoryExtras.__init__"],["OnboardingServerToolHandler.handle_request","configure_preferences"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreAnalyzer.__init__"],["test_context","OTPTestContext.create"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EventStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreCalculator.__init__"],["DailySummaryRepository.__init__","EmojiProcessor.__init__"],["MetaPromptService.generate_system_prompt","MetaPromptService._validate_token_budget"],["EngagementStateRepository.__init__","PendingRegistrationRepository.__init__"],["ServerToolHandler.handle","_get_context"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler._trigger_handoff"],["DashboardPage.__init__","EventGenerator.__init__"],["TestContextPackagePopulation.mock_session_context","PunctuationProcessor.__init__"],["VoiceOnboardingFlow.process_ready_response","is_confirmation"],["GeneratedPromptRepository.__init__","Phase2Conversation.__init__"],["ConversationsPage.__init__","UserNotFoundError.__init__"],["TestDashboardE2E.test_verification_with_telegram_id","get_verification_instructions"],["BaseRepository.update","BaseRepository.session"],["TouchpointStore.delete","BaseRepository.delete"],["RecoveryManager.check_point_of_no_return","_get_game_over_reason"],["NeglectDetector._frequency_signal","UserMetricsRepository._clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointEngine.__init__"],["BackstoryRepository.__init__","RateLimiter.__init__"],["UserRepository.update_last_interaction","_ChapterBehaviorsProxy.get"],["ConversationsPage.__init__","ConflictStore.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","OTPFlowE2ETest.step5_verify_result"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictGenerator.__init__"],["ConversationsPage.__init__","InMemoryCache.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceCallVerifier.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NikitaThoughtRepository.__init__"],["BaseRepository.delete","PackageStore.delete"],["UserMetricsRepository.__init__","RegistrationHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TriggerDetector.__init__"],["EntityManager.get_friends","EntityManager.get_entities_by_type"],["PostProcessingPipeline._run_summary_generation","ProcessingStep.mark_failed"],["DashboardPage.__init__","DailySummaryRepository.__init__"],["UserRepository.__init__","UserNotFoundError.__init__"],["UserMetricsRepository.__init__","ViceAnalyzer.__init__"],["TestLayer2CurrentMoment.test_layer2_gap_mood_variations","TestLayer2CurrentMoment._create_context"],["BackstoryRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BaseRepository.__init__"],["DynamicVariablesBuilder.build_from_user","_compute_nikita_energy"],["UserRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SupabaseHelper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceAgentConfig.__init__"],["OnboardingServerToolHandler.complete_onboarding","complete_onboarding"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceService.__init__"],["UserRepository.__init__","InMemoryCache.__init__"],["Layer3Composer.compose","_get_behavioral_impact"],["ViceBoundaryEnforcer.apply_cap","max_intensity_for_chapter"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EntityManager.__init__"],["UserNotFoundError.__init__","ProfileCollector.__init__"],["generate_system_prompt","generate_prompt"],["InstructionSelector.instruction_library","_load_instructions"],["GeneratedPromptRepository.__init__","ResolutionManager.__init__"],["TestContextPackagePopulation.mock_session_context","LengthAdjuster.__init__"],["UserRepository.__init__","StrategicSilence.__init__"],["ConversationRepository.__init__","UserMetricsRepository.__init__"],["TestEventStore.mock_session_factory","factory"],["BaseRepository.get","TouchpointStore.get"],["main","get_api_key"],["NikitaThoughtRepository.__init__","PostProcessor.__init__"],["GeneratedPromptRepository.__init__","VenueResearchService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceOnboardingFlow.__init__"],["TelegramWebhookSimulator.send_message","TelegramWebhookSimulator._build_headers"],["NikitaThoughtRepository.get_thoughts_for_prompt","NikitaThoughtRepository.get_active_thoughts"],["EngagementStateRepository.__init__","TemplateGenerator.__init__"],["JobExecutionRepository.__init__","NikitaThoughtRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestDailySummaryRepositoryExtras.__init__"],["EngagementStateRepository.__init__","TokenCounter.__init__"],["JobExecutionRepository.__init__","TriggerDetector.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","create"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","FullJourneyOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreCalculator.__init__"],["UserNotFoundError.__init__","TextPatternProcessor.__init__"],["DailySummaryRepository.__init__","Layer2Composer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","HierarchicalPromptComposer.__init__"],["UserRepository.update_onboarding_profile","BaseRepository.get"],["UserRepository.__init__","Layer4Computer.__init__"],["LifeSimulator.get_recent_events","EventStore.get_recent_events"],["Layer5Injector.inject","Layer5Injector._format_week_summaries"],["load_entity_config","_get_default_entities_config"],["ScoreCard","getBadgeVariant"],["ProfileRepository.__init__","PendingRegistrationRepository.__init__"],["NikitaThoughtRepository.__init__","OnboardingServerToolHandler.__init__"],["NarrativeArcManager.create_arc","_generate_initial_state"],["SituationDetector._build_metadata","SituationDetector._is_long_gap"],["VicePromptInjector.inject","VicePromptInjector.inject"],["ConversationThreadRepository.__init__","Layer6Handler.__init__"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow.is_deferral"],["DashboardPage.__init__","RegistrationHandler.__init__"],["CalibrationCalculator._frequency_component","UserMetricsRepository._clamp"],["HandoffManager.transition","_send_first_message"],["VicePreferenceRepository.__init__","Layer5Injector.__init__"],["ConversationsPage.__init__","InboundCallHandler.__init__"],["UserMetricsRepository.__init__","VoiceSessionManager.__init__"],["PendingRegistrationRepository.get_email","UserRepository.get"],["GeneratedPromptRepository.__init__","PostProcessor.__init__"],["ScoreHistoryRepository.__init__","PendingRegistrationRepository.__init__"],["DashboardPage.__init__","ViceAnalyzer.__init__"],["TestMoodDerivation.mock_session_context","ElevenLabsConversationsClient.__init__"],["DailySummaryRepository.__init__","ScheduledEventRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreAnalyzer.__init__"],["UserNotFoundError.__init__","NikitaMemory.__init__"],["EvidenceCollector.add_api_response","log"],["Layer3Composer.describe_state","Layer3Composer._describe_dominance"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DashboardE2ETest.__init__"],["UserRepository.__init__","PortalLoginE2ETest.__init__"],["MetaPromptService._load_context","_compute_nikita_mood"],["TestContextPackagePopulation.mock_session_context","TriggerDetector.__init__"],["UserRepository.__init__","InboundCallHandler.__init__"],["DynamicVariablesBuilder.build_from_user","LayerComposer._get_time_of_day"],["PunctuationProcessor.apply","_normalize_laugh"],["TestMoodDerivation.mock_session_context","ViceService.__init__"],["EngagementStateRepository.__init__","UserNotFoundError.__init__"],["JobExecutionRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","ElevenLabsConversationsClient.list_conversations"],["GeneratedPromptRepository.__init__","OnboardingServerToolHandler.__init__"],["TestContextPackagePopulation.mock_session_context","__aenter__"],["JobExecutionRepository.__init__","ScoreCalculator.__init__"],["NikitaThoughtRepository.__init__","VoiceCallVerifier.__init__"],["EngagementStateRepository.__init__","ConflictStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ProfileRepository.__init__"],["EngagementStateRepository.__init__","InMemoryCache.__init__"],["ConversationsPage.__init__","PromptLoader.__init__"],["ProfileRepository.update_from_onboarding","BackstoryRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EvidenceCollector.__init__"],["VicePreferenceRepository.__init__","VoiceCallScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageSplitter.__init__"],["EngagementStateRepository.__init__","StrategicSilence.__init__"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.check_arc_resolution"],["UserRepository.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StateStore.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_fallback_on_timeout","slow_function"],["ConversationThreadRepository.bulk_resolve_threads","resolve_thread"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MetaPromptService.__init__"],["UserNotFoundError.__init__","TestUserMetricsRepository.__init__"],["MessageHandler.handle","generate_response"],["VicePreferenceRepository.__init__","ConversationConfigBuilder.__init__"],["LoginPage.__init__","OTPFlowE2ETest.__init__"],["TestTypingIndicators.test_ac_fr009_002_periodic_typing_during_delay","mock_sleep"],["EventGenerator.generate_events_for_day","BossJudgment._call_llm"],["BaseRepository.delete_by_id","get"],["UserNotFoundError.__init__","TestMoodDerivation.__init__"],["UserMetricsRepository.__init__","ResponseDelivery.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ServerToolHandler.__init__"],["ConversationThreadRepository.__init__","ScoreHistoryRepository.__init__"],["TestLayer5KnowledgeInnerLife.test_layer5_with_missing_him_thought","TestLayer5KnowledgeInnerLife._create_context_with_knowledge"],["ProfileRepository.__init__","TemplateGenerator.__init__"],["TestLayer2CurrentMoment.test_layer2_time_of_day_variations","TestLayer3RelationshipState._create_context"],["ProfileRepository.__init__","TokenCounter.__init__"],["NeglectDetector._short_message_signal","StateComputer._clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageGenerator.__init__"],["TestContextPackagePopulation.mock_session_context","TestDailySummaryRepositoryExtras.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase3_instructions"],["PendingRegistrationRepository.delete","PendingRegistrationRepository.delete"],["LoginPage.__init__","Phase1Registration.__init__"],["TestContextPackagePopulation.mock_session_context","ScoreCalculator.__init__"],["CommandHandler._handle_status","_get_score_hint"],["ScoreHistoryRepository.__init__","TokenCounter.__init__"],["ConversationsPage.__init__","Layer1Loader.__init__"],["inject_context","VicePromptInjector.inject"],["LoginPage.__init__","EventStore.__init__"],["JobExecutionRepository.__init__","VoiceAgentConfig.__init__"],["ConversationsPage.__init__","ResponseTimer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OTPFlowE2ETest.__init__"],["TestSessionDetector.test_detect_and_queue_marks_all_found","TestSessionDetector.mock_get_stale"],["UserRepository.complete_onboarding","InMemoryCache.get"],["InboundCallHandler._get_conversation_config_override","VoiceAgentConfig._get_first_message"],["OTPEmailParser.parse_magic_link_email","_extract_body"],["UserMetricsRepository.__init__","LifeSimulator.__init__"],["MissingVariableError.__init__","ScoreAnalyzer.__init__"],["TestConversationsE2E.test_data_processing","ConversationsE2ETest.step3_process_data"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EmojiProcessor.__init__"],["TestContextPackagePopulation.mock_session_context","ConflictGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointScheduler.__init__"],["TestMoodDerivation.mock_session_context","BaseRepository.__init__"],["UserRepository.__init__","ConversationThreadRepository.__init__"],["TestMoodDerivation.mock_session_context","SupabaseHelper.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase1Registration.__init__"],["UserMetricsRepository.__init__","CommandHandler.__init__"],["UserRepository.__init__","Layer1Loader.__init__"],["compose_emotional_state_layer","Layer3Composer.compose"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestDailySummaryRepositoryContextEngineering.__init__"],["UserNotFoundError.__init__","MetaInstructionEngine.__init__"],["LifeEvent.model_dump_for_db","to_dict"],["UserRepository.__init__","ResponseTimer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InstructionSelector.__init__"],["ProfileRepository.__init__","UserNotFoundError.__init__"],["BackstoryRepository.__init__","EscalationManager.__init__"],["EngagementStateRepository.__init__","InboundCallHandler.__init__"],["PostProcessingPipeline._run_conflict_check","ScheduledEventRepository.mark_failed"],["EscalationManager.check_escalation","_get_escalation_threshold"],["DashboardPage.__init__","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceService.__init__"],["NeglectDetector._response_time_signal","UserMetricsRepository._clamp"],["ProfileRepository.__init__","ConflictStore.__init__"],["ConflictGenerator.generate","ConflictGenerator._select_conflict_type"],["HierarchicalPromptComposer.compose","HierarchicalPromptComposer._compose_layer5"],["TestEventStore.mock_session_factory","__aenter__"],["ProfileRepository.__init__","InMemoryCache.__init__"],["TestMoodDerivation.mock_session_context","VoiceOnboardingFlow.__init__"],["ScoreHistoryRepository.__init__","UserNotFoundError.__init__"],["TestContextPackagePopulation.mock_session_context","VoiceAgentConfig.__init__"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","custom_method"],["TestContextPackagePopulation.mock_session_context","VoiceService.__init__"],["VoiceOnboardingFlow.process_phone_input","normalize_phone"],["DashboardPage.__init__","ResponseDelivery.__init__"],["DecayWarning","getStyles"],["UserMetricsRepository.update_metrics","ProfileRepository.get_by_user_id"],["TestLayer2CurrentMoment.test_layer2_time_of_day_variations","TestLayer6ResponseGuidelines._create_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestContextPackagePopulation.__init__"],["TestContextPackagePopulation.mock_session_context","EntityManager.__init__"],["ConversationRepository.__init__","ScoreAnalyzer.__init__"],["ProfileRepository.__init__","StrategicSilence.__init__"],["ScoreHistoryRepository.__init__","ConflictStore.__init__"],["TouchpointEngine._evaluate_silence","TouchpointEngine._check_conflict_active"],["ServerToolHandler._get_context","_query_graph"],["LoginPage.build_login_sequence","LoginPage.js_click_submit"],["BackstoryRepository.__init__","_ProfileFromAnswers.__init__"],["ScoreHistoryRepository.__init__","InMemoryCache.__init__"],["LoginPage.__init__","Layer4Computer.__init__"],["EngagementStateMachine.update","EngagementStateMachine._update_counters"],["MetaPromptService._load_context","ServerToolHandler._compute_nikita_energy"],["TouchpointEngine._evaluate_silence","TouchpointEngine._load_emotional_state"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EscalationManager.__init__"],["PostProcessingPipeline._run_conflict_check","TouchpointStore.mark_failed"],["VicePromptInjector.inject","VicePromptInjector._build_vice_section"],["ScoreHistoryRepository.__init__","StrategicSilence.__init__"],["UserRepository.__init__","VenueCacheRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EventGenerator.__init__"],["get_base_personality_prompt","get_layer1_loader"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","CommandHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer3Composer.__init__"],["EngagementStateRepository.__init__","PromptLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GraphUpdater.__init__"],["UserMetricsRepository.__init__","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","StateStore.__init__"],["TelegramAuth.register_user","send_otp_code"],["run_migrations_offline","get_url"],["ConversationsPage.__init__","DeliveryResult.__init__"],["LoginPage.build_login_sequence","LoginPage.js_is_on_login_page"],["ConversationThreadRepository.__init__","ProfileCollector.__init__"],["DashboardPage.__init__","LifeSimulator.__init__"],["PendingRegistrationRepository.delete","TouchpointStore.delete"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","FactExtractor.__init__"],["TestContextPackagePopulation.mock_session_context","ExperimentLoader.__init__"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler._get_initiation_rate"],["NarrativeArcManager.maybe_create_arc","create_arc"],["MetaPromptService.generate_system_prompt","_validate_token_budget"],["LoginPage.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RateLimiter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer4Computer.__init__"],["DashboardPage.__init__","UserMetricsRepository.__init__"],["PostProcessingPipeline._run_life_simulation","ScheduledEventRepository.mark_failed"],["ScoreHistoryRepository.__init__","Layer4Computer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","JourneyReport.__init__"],["LifeEvent.model_dump_for_db","DynamicVariables.to_dict"],["Layer3Composer.compose","_describe_conflict_state"],["TestRateLimiter.test_ac_fr006_002_warning_when_approaching_daily_limit","TestRateLimiter.mock_incr"],["TestLifeSimulationStep.test_events_generated_after_conversation","get_pipeline_patches"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer2Composer.__init__"],["UserRepository.__init__","DeliveryResult.__init__"],["ConversationThreadRepository.__init__","TextPatternProcessor.__init__"],["UserNotFoundError.__init__","EngagementStateMachine.__init__"],["ConversationsPage.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BaseRepository.__init__"],["EngagementStateRepository.__init__","Layer1Loader.__init__"],["generate_first_nikita_message","FirstMessageGenerator.generate"],["TestMoodDerivation.mock_session_context","ProfileRepository.__init__"],["EngagementStateRepository.__init__","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockResult.__init__"],["ProfileRepository.__init__","InboundCallHandler.__init__"],["HandoffManager.transition","HandoffManager._generate_profile_summary"],["VicePreferenceRepository.discover","get_by_category"],["UserNotFoundError.__init__","BackstoryGeneratorService.__init__"],["UserMetricsRepository.__init__","ConversationsE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PortalLoginE2ETest.__init__"],["ScoreHistoryRepository.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenValidator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserRepository.__init__"],["LoginPage.__init__","PackageStore.__init__"],["PostProcessingPipeline._run_life_simulation","TouchpointStore.mark_failed"],["TouchpointEngine.evaluate_and_schedule_for_user","TouchpointEngine._compute_delivery_time"],["ScoreHistoryRepository.__init__","InboundCallHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestContextPackagePopulation.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","TouchpointEngine.__init__"],["_ChapterBehaviorsProxy.get","PendingRegistrationRepository.get"],["OnboardingStateRepository.update_step","InMemoryCache.get"],["VoiceOnboardingFlow._initiate_call","initiate_onboarding_call"],["GeneratedPromptRepository.__init__","Layer6Handler.__init__"],["NikitaMemory.add_nikita_event","NikitaMemory.add_episode"],["DashboardPage.__init__","MetaNikitaConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EngagementStateRepository.__init__"],["ClinginessDetector.detect","_response_time_signal"],["TestMoodDerivation.mock_session_context","TokenValidator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramBot.__init__"],["OnboardingStateRepository.add_answer","get"],["MessageGenerator.__init__","_load_template"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EmojiProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PackageStore.__init__"],["UserNotFoundError.__init__","SkipDecision.__init__"],["LoginPage.__init__","VoiceSessionManager.__init__"],["NeglectDetector.detect","ClinginessDetector._frequency_signal"],["DailySummaryRepository.__init__","OTPFlowE2ETest.__init__"],["EngagementStateMachine._apply_transition","_get_transition_reason"],["ProfileRepository.__init__","PromptLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RegistrationHandler.__init__"],["TestContextPackagePopulation.mock_session_context","TestVicePreferenceRepository.__init__"],["generate_touchpoint_message","ConflictGenerator.generate"],["UserRepository.increment_boss_attempts","BaseRepository.get"],["ScoreAnalyzer._call_llm","ScoreAnalyzer._call_llm_raw"],["TestDecayProcessorShouldSkipUser.test_skip_won_status","create_mock_user"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationsE2ETest.__init__"],["MetaInstructionEngine.get_instructions_for_context","InstructionSet.format_for_prompt"],["InMemoryCache.get","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","FactExtractor.__init__"],["LoginPage.__init__","MessageGenerator.__init__"],["JobExecutionRepository.__init__","UserRepository.__init__"],["BackstoryRepository.__init__","BasePage.__init__"],["DailySummaryRepository.__init__","Phase1Registration.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PreferenceConfigurator.__init__"],["TestMoodDerivation.mock_session_context","EmojiProcessor.__init__"],["LoginPage.__init__","ConversationThreadRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TranscriptManager.__init__"],["NikitaThoughtRepository.__init__","Layer3Composer.__init__"],["ConversationThreadRepository.__init__","TestUserMetricsRepository.__init__"],["NikitaThoughtRepository.get_thoughts_for_prompt","get_active_thoughts"],["DailySummaryRepository.__init__","EventStore.__init__"],["UserMetricsRepository.__init__","MessageHandler.__init__"],["JobExecutionRepository.__init__","TestContextPackagePopulation.__init__"],["VoiceCallVerifier._verify_database","_check_conversation"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer3Composer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SessionDetector.__init__"],["DashboardPage.__init__","ConversationsE2ETest.__init__"],["BackstoryGeneratorService.process_custom_backstory","_call_llm"],["HandoffManager.transition","HandoffManager.transition"],["MessageHandler.handle","get_nikita_agent_for_user"],["ResponseTimer.calculate_delay_human_readable","ResponseTimer.calculate_delay"],["ConversationThreadRepository.__init__","TestMoodDerivation.__init__"],["ConversationsPage.__init__","ViceScorer.__init__"],["BaseRepository.delete_by_id","TouchpointStore.get"],["NikitaMemory.add_relationship_episode","add_episode"],["InstructionSet.format_for_prompt","by_category"],["EngagementStateRepository.__init__","DeliveryResult.__init__"],["deliver_due_touchpoints","deliver_due_touchpoints"],["get_signed_url","initiate_call"],["TestLayer2CurrentMoment.test_layer2_gap_mood_variations","_create_context"],["ProfileRepository.__init__","Layer1Loader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageGenerator.__init__"],["ProfileRepository.__init__","ResponseTimer.__init__"],["LoginPage.__init__","TouchpointScheduler.__init__"],["VicePreferenceRepository.__init__","RateLimiter.__init__"],["NikitaThoughtRepository.__init__","TTSConfigService.__init__"],["OnboardingHandler._handle_location_step","_validate_location"],["UserRepository.__init__","ScoringService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationThreadRepository.__init__"],["LoginPage.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ProfileRepository.__init__"],["ProfileCollector.is_complete","ViceScorer.get_profile"],["DatabaseRateLimiter.check","DatabaseRateLimiter._seconds_until_midnight"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BasePage.__init__"],["ExperimentLoader._load_experiment_with_inheritance","_list_available_experiments"],["ScoreHistoryRepository.__init__","ConversationThreadRepository.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.complete_onboarding"],["LoginPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["UserRepository.__init__","ViceScorer.__init__"],["ScoreHistoryRepository.__init__","Layer1Loader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestVicePreferenceRepositoryExtras.__init__"],["ScoreHistoryRepository.__init__","ResponseTimer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingHandler.__init__"],["ConversationThreadRepository.__init__","LayerComposer.__init__"],["TTSConfigService.get_final_settings","get_chapter_settings"],["JobExecutionRepository.__init__","FactExtractor.__init__"],["UserNotFoundError.__init__","EventGenerator.__init__"],["EngagementStateRepository.__init__","TouchpointEngine.__init__"],["BackstoryGeneratorService.process_custom_backstory","_build_extraction_prompt"],["process_conversations","_get_stage_reached"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EngagementStateRepository.__init__"],["compose_chapter_layer","LayerComposer.compose"],["UserMetricsRepository.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BaseRepository.__init__"],["NikitaThoughtRepository.__init__","TokenValidator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MissingVariableError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SupabaseHelper.__init__"],["VicePreferenceRepository.__init__","MockResult.__init__"],["ConversationsPage.__init__","EvidenceCollector.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointScheduler.__init__"],["ConversationThreadRepository.__init__","MetaInstructionEngine.__init__"],["UserRepository.__init__","ConversationRepository.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","_compute_delivery_time"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenValidator.__init__"],["MissingVariableError.__init__","ViceService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestDailySummaryRepositoryContextEngineering.__init__"],["NikitaThoughtRepository.create_missing_him_thought","NikitaThoughtRepository.create_thought"],["DailySummaryRepository.__init__","Layer4Computer.__init__"],["GeneratedPromptRepository.__init__","TTSConfigService.__init__"],["CalibrationCalculator._frequency_component","_clamp"],["VenueResearchService.research_venues","_create_fallback_result"],["BackstoryRepository.__init__","Phase4GameState.__init__"],["UserNotFoundError.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GeneratedPromptRepository.__init__"],["DashboardPage.__init__","MessageHandler.__init__"],["NikitaThoughtRepository.__init__","TelegramBot.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceOnboardingFlow.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","TestTelegramAuth.get_email_impl"],["TestPipelineIntegration.test_full_pipeline_execution","get_pipeline_patches"],["UserMetricsRepository.__init__","DashboardPage.__init__"],["UserRepository.__init__","EvidenceCollector.__init__"],["ScoreHistoryRepository.__init__","VenueCacheRepository.__init__"],["ServerToolHandler.handle","ServerToolHandler._update_memory"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramBot.__init__"],["TestContextPackagePopulation.mock_session_context","FactExtractor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TranscriptManager.__init__"],["VoiceService.format_text_history_for_voice","VoiceService.get_context_with_text_history"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EmojiProcessor.__init__"],["NikitaThoughtRepository.__init__","ProfileCollector.__init__"],["ConflictDetector._find_intermediate_state","ConflictDetector._get_severity"],["DailySummaryRepository.__init__","PortalLoginE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SessionDetector.__init__"],["JobExecutionRepository.__init__","EngagementStateRepository.__init__"],["ConversationRepository.__init__","ViceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DatabaseRateLimiter.__init__"],["NikitaThoughtRepository.__init__","PostProcessingPipeline.__init__"],["UserNotFoundError.__init__","ConversationsPage.__init__"],["ProfileRepository.__init__","DeliveryResult.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase4GameState.__init__"],["UserRepository.set_boss_fight_status","get"],["TestMoodDerivation.mock_session_context","ScheduledEventRepository.__init__"],["NikitaThoughtRepository.__init__","RecoveryManager.__init__"],["DashboardPage.__init__","ConflictDetector.__init__"],["TextPatternProcessor.process_for_sending","process"],["InMemoryCache.incr","get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase3Portal.__init__"],["TestContextPackagePopulation.mock_session_context","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResponseDelivery.__init__"],["ScoreCalculator.calculate","_detect_events"],["ScoreHistoryRepository.__init__","DeliveryResult.__init__"],["EngagementStateRepository.__init__","ViceScorer.__init__"],["DynamicVariablesBuilder.build_from_user","_compute_nikita_activity"],["PostProcessingPipeline._run_layer_composition","mark_completed"],["DailySummaryRepository.__init__","PackageStore.__init__"],["DatabaseRateLimiter.check","_get_day_window"],["JobExecutionRepository.__init__","PreferenceConfigurator.__init__"],["GeneratedPromptRepository.__init__","ProfileCollector.__init__"],["ProfileRepository.__init__","TouchpointEngine.__init__"],["JobExecutionRepository.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","JourneyReport.__init__"],["TouchpointStore.mark_delivered","_to_pydantic"],["run_manual_otp_test","TouchpointStore.create"],["MissingVariableError.__init__","BaseRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VicePreferenceRepository.__init__"],["GeneratedPromptRepository.__init__","PostProcessingPipeline.__init__"],["BaseRepository.get","OnboardingStateRepository.get"],["DashboardPage.__init__","ServerToolHandler.__init__"],["ConversationThreadRepository.__init__","EngagementStateMachine.__init__"],["get_current_admin_user","_is_admin_email"],["JobExecutionRepository.__init__","SessionDetector.__init__"],["TestNikitaThoughtRepository.test_bulk_create_thoughts_creates_all","TestNikitaThoughtRepository.mock_create_thought"],["NikitaThoughtRepository.__init__","NikitaMemory.__init__"],["DashboardPage.__init__","DashboardPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ProfileRepository.__init__"],["OptimalFrequencyCalculator.get_bounds","OptimalFrequencyCalculator.get_optimal"],["ScoreHistoryRepository.__init__","TouchpointEngine.__init__"],["GeneratedPromptRepository.__init__","RecoveryManager.__init__"],["ScoreCalculator.apply_multiplier","adjust"],["ConversationThreadRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LifeSimulator.__init__"],["handle_webhook","verify_elevenlabs_signature"],["main","add_section"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockMappings.__init__"],["ServerToolHandler.handle","ServerToolHandler._score_turn"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","CommandHandler.__init__"],["VoiceOnboardingFlow.is_already_onboarded","VoiceOnboardingFlow._get_user_onboarding_status"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_user_local_time"],["GeneratedPromptRepository.__init__","TextPatternProcessor.__init__"],["NikitaThoughtRepository.__init__","MissingVariableError.__init__"],["DailySummaryRepository.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","HandoffManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BreakupManager.__init__"],["ConversationsPage.__init__","GraphUpdater.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_past_grace_returns_true","create_mock_user"],["EngagementStateRepository.__init__","EvidenceCollector.__init__"],["VoiceOnboardingFlow.should_start_onboarding","is_already_onboarded"],["ConversationRepository.__init__","BaseRepository.__init__"],["DailySummaryRepository.__init__","MessageGenerator.__init__"],["UserRepository.update_last_interaction","TouchpointStore.get"],["ConversationRepository.__init__","SupabaseHelper.__init__"],["TestContextPackagePopulation.mock_session_context","TranscriptManager.__init__"],["NikitaThoughtRepository.__init__","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OTPFlowE2ETest.__init__"],["PostProcessingPipeline._run_layer_composition","ProcessingStep.mark_completed"],["DailySummaryRepository.__init__","ConversationThreadRepository.__init__"],["GeneratedPromptRepository.__init__","NikitaMemory.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_skip"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GeneratedPromptRepository.__init__"],["ConversationThreadRepository.__init__","SkipDecision.__init__"],["TestContextPackagePopulation.mock_session_context","SessionDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OTPVerificationHandler.__init__"],["NeglectDetector._response_time_signal","_clamp"],["UserRepository.__init__","GraphUpdater.__init__"],["UserRepository.is_onboarded","PendingRegistrationRepository.get"],["UserRepository.update_onboarding_status","BaseRepository.get"],["UserRepository.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase1Registration.__init__"],["GeneratedPromptRepository.__init__","MissingVariableError.__init__"],["UserRepository.update_game_status","UserRepository.get"],["compose_emotional_state_layer","compose"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScheduledEventRepository.__init__"],["ConflictStore.resolve_conflict","update_conflict"],["ProfileRepository.__init__","ScoringService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SummaryGenerator.__init__"],["MetaPromptService.extract_entities","_load_context"],["Layer6Handler.process_modification","Layer6Handler.retrieve_memory"],["EntityManager.get_projects","get_entities_by_type"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EventStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NarrativeArcManager.__init__"],["run_manual_otp_test","step3_build_otp_search_query"],["create_app","health"],["EventDeliveryHandler.deliver","EventDeliveryHandler._deliver_voice_event"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.expire_missing_him_thoughts","get_active_thoughts"],["DailySummaryRepository.__init__","TouchpointScheduler.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._should_trigger"],["ProfileRepository.__init__","ViceScorer.__init__"],["DailySummaryRepository.__init__","TouchpointStore.__init__"],["ConversationsPage.__init__","MockResult.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingStateRepository.__init__"],["DailySummaryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["CalibrationCalculator._timing_component","UserMetricsRepository._clamp"],["SummaryGenerator._update_daily_summary","SummaryGenerator._detect_emotional_tone"],["ScoreHistoryRepository.__init__","ScoringService.__init__"],["LoginPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["PackageStore.exists","UserRepository.get"],["TestTimeoutFallback.test_timeout_fallback_includes_error_message","TestTimeoutFallback.timeout_function"],["EvidenceCollector.print_summary","generate_report"],["BackstoryRepository.__init__","ScoreAnalyzer.__init__"],["LoginPage.__init__","OnboardingHandler.__init__"],["ScoreHistoryRepository.__init__","ViceScorer.__init__"],["ClinginessDetector.detect","_double_text_signal"],["DashboardPage.__init__","StateComputer.__init__"],["GeneratedPromptRepository.__init__","TestUserMetricsRepository.__init__"],["DashboardPage.build_verification_sequence","DashboardPage.js_get_all_dashboard_data"],["ConflictDetector.can_transition_to","_can_transition"],["BaseRepository.update","create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MetaPromptService.__init__"],["mock_session_factory","TestGraphUpdater.factory"],["MissingVariableError.__init__","ProfileRepository.__init__"],["JobExecutionRepository.__init__","OTPVerificationHandler.__init__"],["TestContextInjectionPerformance.test_layer5_injection_p99_under_50ms","create_realistic_package"],["GeneratedPromptRepository.__init__","TestMoodDerivation.__init__"],["PersonaAdaptationService.format_for_prompt","generate_persona_overrides"],["ScoreAnalyzer.analyze","_call_llm"],["ScoreHistoryRepository.__init__","ConversationRepository.__init__"],["VicePreferenceRepository.__init__","_ProfileFromAnswers.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","HandoffManager.__init__"],["VicePreferenceRepository.__init__","JourneyReport.__init__"],["WebhookTestData.create","generate_test_telegram_id"],["UserNotFoundError.__init__","TelegramWebhookSimulator.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._get_day_of_week"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationsE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingHandler.__init__"],["VicePreferenceRepository.__init__","VicePreferenceRepository.__init__"],["ProfileRepository.__init__","EvidenceCollector.__init__"],["MetaPromptService.simulate_thoughts","VoiceService._load_context"],["MetaPromptService.generate_system_prompt","VoiceService._load_context"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreAnalyzer.__init__"],["TestSessionDetector.test_detect_and_queue_skips_failed_marks","mock_mark"],["TestContextPackagePopulation.mock_session_context","MoodCalculator.__init__"],["MissingVariableError.__init__","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer4Computer.__init__"],["UserNotFoundError.__init__","ResponseDelivery.__init__"],["TestWebhookHandler.test_post_call_transcription_stored","create_webhook_signature"],["NikitaThoughtRepository.__init__","FullJourneyOrchestrator.__init__"],["UserMetricsRepository.__init__","BackstoryRepository.__init__"],["ScoreHistoryRepository.__init__","EvidenceCollector.__init__"],["ConversationRepository.__init__","ProfileRepository.__init__"],["TestContextPackagePopulation.mock_session_context","TestMoodDerivation.__aenter__"],["GmailHelper.wait_for_magic_link","GmailHelper._get_latest_magic_link_email"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","FullJourneyOrchestrator.__init__"],["ConversationsPage.__init__","LengthAdjuster.__init__"],["ConversationThreadRepository.__init__","DailySummaryRepository.__init__"],["EngagementStateRepository.__init__","GraphUpdater.__init__"],["EngagementStateRepository.__init__","DecayCalculator.__init__"],["MissingVariableError.__init__","TelegramBot.__init__"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_wait_for_conversations_loaded"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SummaryGenerator.__init__"],["DashboardPage.__init__","GmailMCPClient.__init__"],["NikitaMemory.search_memory","NikitaMemory._get_group_id"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NarrativeArcManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer2Composer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","JobExecutionRepository.__init__"],["ProfileRepository.get_by_user_id","InMemoryCache.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InstructionSelector.__init__"],["UserMetricsRepository.__init__","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PortalLoginE2ETest.__init__"],["DashboardPage.__init__","ElevenLabsConversationsClient.__init__"],["GmailHelper.wait_for_magic_link","GmailHelper._extract_magic_link"],["MissingVariableError.__init__","EmojiProcessor.__init__"],["CommandHandler._handle_status","MetaPromptService._get_chapter_name"],["JobExecutionRepository.__init__","HandoffManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingStateRepository.__init__"],["LoginPage.__init__","Phase3Portal.__init__"],["ConversationRepository.__init__","TokenValidator.__init__"],["UserRepository.__init__","LengthAdjuster.__init__"],["BackstoryRepository.__init__","PostProcessor.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","create_fake_jwt"],["DatabaseRateLimiter.get_remaining","_get_day_window"],["UserNotFoundError.__init__","UserMetricsRepository.__init__"],["ConversationThreadRepository.__init__","ConversationsPage.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_respects_chapter_grace_periods","create_mock_user"],["UserRepository.set_boss_fight_status","TouchpointStore.get"],["TestGetCurrentAdminUser.test_non_admin_email_raises_403","make_token"],["TestDashboardE2E.test_verification_with_telegram_id","DashboardE2ETest.get_verification_instructions"],["MetaPromptService._load_context","VoiceService._compute_nikita_energy"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScheduledEventRepository.__init__"],["compose_emotional_state_layer","get_layer3_composer"],["TestNikitaThoughtRepository.test_get_thoughts_for_prompt_groups_by_type","TestNikitaThoughtRepository.mock_get_active_thoughts"],["ConversationThreadRepository.__init__","EscalationManager.__init__"],["InMemoryCache.incr","TouchpointStore.get"],["MessageSplitter._find_split_points","_split_at_markers"],["TestContextPackagePopulation.mock_session_context","DecayProcessor.__init__"],["ConversationRepository.__init__","TelegramBot.__init__"],["EngagementStateRepository.__init__","MockResult.__init__"],["ScoringService.score_batch","ScoringService._log_history"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PackageStore.__init__"],["BackstoryRepository.__init__","OnboardingServerToolHandler.__init__"],["ConversationRepository.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase1Registration.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NikitaThoughtRepository.__init__"],["TestMoodDerivation.mock_session_context","OTPFlowE2ETest.__init__"],["DashboardPage.__init__","BackstoryRepository.__init__"],["JobExecutionRepository.__init__","SummaryGenerator.__init__"],["TestMoodDerivation.mock_session_context","TestContextPackagePopulation.__aexit__"],["JobExecutionRepository.__init__","NarrativeArcManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EventStore.__init__"],["UserMetricsRepository.calculate_composite","EngagementStateRepository.get_by_user_id"],["TestPortalLoginFlow.test_magic_link_extraction","TouchpointStore.create"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PostProcessor.__init__"],["NikitaThoughtRepository.__init__","MetaPromptService.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","create"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.is_already_onboarded"],["TestContextPackagePopulation.mock_session_context","HandoffManager.__init__"],["MetaPromptService._load_context","MetaPromptService._compute_nikita_energy"],["JobExecutionRepository.__init__","OnboardingStateRepository.__init__"],["UserRepository.update_onboarding_profile","UserRepository.get"],["ViceScorer.get_top_vices","ViceScorer.get_profile"],["RecoveryManager.can_recover","can_recover"],["InboundCallHandler.handle_incoming_call","_build_context"],["TestMoodDerivation.mock_session_context","Phase1Registration.__init__"],["UserMetricsRepository.__init__","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictDetector.__init__"],["UserNotFoundError.__init__","MetaNikitaConfig.__init__"],["VoiceService.initiate_call","VoiceService._generate_signed_token"],["DashboardPage.__init__","ConfigLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreHistoryRepository.__init__"],["TestMoodDerivation.mock_session_context","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DatabaseRateLimiter.__init__"],["VicePreferenceRepository.__init__","BasePage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingServerToolHandler.__init__"],["TestEventStore.mock_session_factory","TestMoodDerivation.__aenter__"],["UserRepository.update_score","PendingRegistrationRepository.get"],["ProfileRepository.__init__","GraphUpdater.__init__"],["GeneratedPromptRepository.__init__","EngagementStateMachine.__init__"],["ExperimentLoader._load_experiment_with_inheritance","deep_merge"],["ViceService.get_prompt_context","ViceService.get_probe_categories"],["BossJudgment.judge_boss_outcome","_call_llm"],["ProfileRepository.__init__","DecayCalculator.__init__"],["BackstoryRepository.__init__","VoiceCallVerifier.__init__"],["compose_hierarchical_prompt","compose"],["ClinginessDetector._response_time_signal","UserMetricsRepository._clamp"],["run_manual_otp_test","step1_send_start"],["GeneratedPromptRepository.__init__","MetaPromptService.__init__"],["MessageHandler.handle","MessageHandler._send_error_response"],["ScoreCalculator.calculate","UserMetricsRepository.update_metrics"],["MetaPromptService._load_context","_get_chapter_name"],["TestContextPackagePopulation.mock_session_context","SummaryGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationThreadRepository.__init__"],["ScoreHistoryRepository.__init__","GraphUpdater.__init__"],["ScoreHistoryRepository.__init__","DecayCalculator.__init__"],["TestConversationThreadRepository.test_create_thread_valid_types","TestNikitaThoughtRepository.mock_create"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","HierarchicalPromptComposer.__init__"],["EngagementStateRepository.__init__","LengthAdjuster.__init__"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow.get_phone_request_message"],["TestContextPackagePopulation.mock_session_context","OnboardingStateRepository.__init__"],["DashboardPage.__init__","SupabaseHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DashboardPage.__init__"],["UserMetricsRepository.__init__","DashboardE2ETest.__init__"],["MissingVariableError.__init__","GeneratedPromptRepository.__init__"],["LayerComposer.compose","LayerComposer._get_today_summary"],["VoiceService._load_context","DynamicVariablesBuilder._compute_nikita_energy"],["DailySummaryRepository.__init__","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer5Injector.__init__"],["run_manual_otp_test","OTPTestContext.create"],["ConversationConfigBuilder.build_config","VoiceAgentConfig._get_first_message"],["NikitaThoughtRepository.__init__","InstructionSelector.__init__"],["get_agent_id","ElevenLabsConfig.get_agents_dict"],["PostProcessingPipeline.process","PostProcessingPipeline._run_layer_composition"],["PortalLoginE2ETest.get_complete_flow_instructions","step1_navigate_command"],["LifeSimulator.get_events_for_context","get_today_events"],["TouchpointEngine._deliver_single","_generate_message"],["VenueCacheRepository.cleanup_expired","PackageStore.delete"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GmailHelper.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","ConversationsE2ETest.step1_navigate_command"],["DailySummaryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MissingVariableError.__init__","ScheduledEventRepository.__init__"],["LoginPage.__init__","PunctuationProcessor.__init__"],["DailySummaryRepository.__init__","OnboardingHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InstructionSelector.__init__"],["ConversationsPage.__init__","JourneyReport.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointScheduler.__init__"],["TouchpointScheduler.evaluate_user","_evaluate_time_trigger"],["UserRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["ProfileRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointStore.__init__"],["GeneratedPromptRepository.__init__","SkipDecision.__init__"],["ConversationsPage.__init__","VicePreferenceRepository.__init__"],["DashboardPage.__init__","VoiceOnboardingFlow.__init__"],["UserRepository.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestDailySummaryRepositoryContextEngineering.__init__"],["ConversationsPage.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramAuth.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","TestSessionPersistence.handle_message"],["ScoreCalculator.update_metrics","clamp"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.configure_preferences"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RegistrationHandler.__init__"],["NikitaMemory.add_relationship_episode","NikitaMemory.add_episode"],["EscalationManager.get_escalation_timeline","EscalationManager._get_natural_resolution_probability"],["ConversationRepository.__init__","GeneratedPromptRepository.__init__"],["MetaPromptService.simulate_thoughts","MetaPromptService._load_context"],["ConversationsPage.__init__","MockMappings.__init__"],["MetaPromptService.generate_system_prompt","MetaPromptService._load_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VenueCacheRepository.__init__"],["TestContextPackagePopulation.mock_session_context","__aexit__"],["VicePreferenceRepository.__init__","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PunctuationProcessor.__init__"],["ViceScorer.get_top_vices","ProfileCollector.get_profile"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LoginPage.__init__"],["NikitaThoughtRepository.__init__","EventGenerator.__init__"],["ConversationsPage.__init__","BreakupManager.__init__"],["ConversationRepository.__init__","ScheduledEventRepository.__init__"],["UserRepository.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceCallScorer.__init__"],["TestTypingIndicators.test_ac_fr009_002_periodic_typing_during_delay","TestTypingIndicators.mock_sleep"],["NarrativeArcManager.maybe_create_arc","NarrativeArcManager.get_active_arcs"],["DecayProcessor.process_user","should_skip_user"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase1Registration.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreHistoryRepository.__init__"],["Layer5Injector.inject","_format_active_threads"],["BaseRepository.delete_by_id","OnboardingStateRepository.get"],["run_manual_otp_test","step2_send_email"],["UserRepository.__init__","MockMappings.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EventStore.__init__"],["add_pipeline_trigger_to_background_tasks","add_pipeline_trigger_to_background_tasks"],["verify_user_created_sql","SupabaseHelper.sql_get_user_by_telegram_id"],["BaseRepository.update","BaseRepository.get"],["DashboardPage.__init__","DashboardE2ETest.__init__"],["ConversationThreadRepository.__init__","TelegramWebhookSimulator.__init__"],["_ChapterBehaviorsProxy.get","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase2Conversation.__init__"],["ClinginessDetector.detect","_length_ratio_signal"],["UserRepository.__init__","BreakupManager.__init__"],["add_pipeline_trigger_to_background_tasks","ConversationRepository.close_conversation"],["NikitaThoughtRepository.__init__","DailySummaryRepository.__init__"],["PostProcessingPipeline.process","_run_layer_composition"],["BossStateMachine.trigger_boss","BossStateMachine.initiate_boss"],["UserRepository.__init__","VoiceService.__init__"],["UserRepository.__init__","EntityManager.__init__"],["ProfileRepository.__init__","LengthAdjuster.__init__"],["GeneratedPromptRepository.__init__","EventGenerator.__init__"],["DailySummaryRepository.__init__","Phase3Portal.__init__"],["MissingVariableError.__init__","FullJourneyOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer5Injector.__init__"],["ConversationsPage.__init__","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","LengthAdjuster.__init__"],["DashboardPage.__init__","MessageSplitter.__init__"],["PostProcessingPipeline._run_graph_update","mark_completed"],["JobExecutionRepository.__init__","ScoreHistoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceSessionManager.__init__"],["BackstoryRepository.__init__","StateStore.__init__"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step2_wait_js"],["ResponseDelivery.queue","_send_now"],["GeneratedPromptRepository.__init__","DailySummaryRepository.__init__"],["UserNotFoundError.__init__","ConflictDetector.__init__"],["UserRepository.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResolutionManager.__init__"],["BossStateMachine.process_fail","BossStateMachine._get_user_repo"],["ConversationThreadRepository.__init__","UserMetricsRepository.__init__"],["TestMoodDerivation.mock_session_context","VoiceSessionManager.__init__"],["MetaPromptContext.get_backstory_summary","has_backstory"],["TestOTPFlowSteps.test_step3_otp_parsing","step3_parse_otp_from_email"],["LoginPage.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VenueResearchService.__init__"],["LoginPage.__init__","TriggerDetector.__init__"],["analyze_neediness","UserMetricsRepository._clamp"],["BaseRepository.get","BaseRepository.get"],["EngagementStateRepository.__init__","VicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceCallScorer.__init__"],["NikitaThoughtRepository.__init__","RegistrationHandler.__init__"],["EngagementStateRepository.__init__","ConflictGenerator.__init__"],["JobExecutionRepository.__init__","Layer5Injector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StateStore.__init__"],["UserMetricsRepository.__init__","__init__"],["BackstoryRepository.create_from_scenario","PendingRegistrationRepository.get"],["TestMoodDerivation.mock_session_context","MessageGenerator.__init__"],["HandoffManager.transition","ConflictGenerator.generate"],["UserNotFoundError.__init__","ServerToolHandler.__init__"],["GeneratedPromptRepository.__init__","ConversationsPage.__init__"],["NikitaThoughtRepository.__init__","ViceAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationConfigBuilder.__init__"],["TestContextPackagePopulation.mock_session_context","ScoreHistoryRepository.__init__"],["PreferenceConfigurator.get_behavioral_config","PreferenceConfigurator.get_preferences"],["EngagementStateRepository.__init__","MockMappings.__init__"],["analyze_distraction","UserMetricsRepository._clamp"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointScheduler.__init__"],["CalibrationCalculator._timing_component","_clamp"],["PostProcessingPipeline._run_graph_update","ProcessingStep.mark_completed"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OTPFlowE2ETest.__init__"],["MessageSplitter._find_split_points","_merge_short_sentences"],["Phase4GameState.verify_metrics","Phase4GameState.expected_chapter_for_score"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NikitaThoughtRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TriggerDetector.__init__"],["EngagementStateRepository.__init__","BreakupManager.__init__"],["VicePreferenceRepository.__init__","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PostProcessor.__init__"],["EngagementStateRepository.__init__","VoiceService.__init__"],["OTPEmailParser.parse_otp_email","OTPEmailParser.extract_otp_code"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_activity"],["ConversationsPage.__init__","TestVicePreferenceRepository.__init__"],["TestP0CriticalHappyPath.test_ep4_no_auth_params_returns_error","navigate_and_get_content"],["TestLayer3RelationshipState.test_layer3_boss_fight_status","TestLayer3RelationshipState._create_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase1Registration.__init__"],["ConversationsPage.__init__","JobExecutionRepository.__init__"],["Layer3Composer._get_behavioral_impact","_get_conflict_behavioral_impacts"],["PostProcessingPipeline._run_summary_generation","mark_running"],["TestMoodDerivation.mock_session_context","TouchpointScheduler.__init__"],["LoginPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestScorePersistence.test_score_changes_reflected_in_user","track_commit"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoringService.__init__"],["TestMoodDerivation.mock_session_context","TouchpointStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EventStore.__init__"],["UserRepository.complete_onboarding","PackageStore.get"],["LoginPage.__init__","ScoreCalculator.__init__"],["TestMoodDerivation.mock_session_context","TestDailySummaryRepositoryContextEngineering.__init__"],["LoginPage.__init__","HierarchicalPromptComposer.__init__"],["TriggerDetector.__init__","TriggerDetector._get_detection_prompt"],["JobExecutionRepository.__init__","VoiceCallScorer.__init__"],["GeneratedPromptRepository.__init__","ViceAnalyzer.__init__"],["analyze_distraction","_call_distraction_llm"],["VicePreferenceRepository.__init__","Phase2Conversation.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","__init__"],["HandoffManager.transition","_update_user_status"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingServerToolHandler.__init__"],["UserRepository.__init__","TestVicePreferenceRepository.__init__"],["JobExecutionRepository.__init__","ConversationConfigBuilder.__init__"],["DailySummaryRepository.__init__","PunctuationProcessor.__init__"],["run_manual_otp_test","PortalLoginTestContext.create"],["VicePreferenceRepository.__init__","ScoreAnalyzer.__init__"],["PendingRegistrationRepository.delete","BaseRepository.delete"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","CommandHandler.__init__"],["EngagementStateRepository.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LayerComposer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestDailySummaryRepositoryExtras.__init__"],["BackstoryRepository.__init__","Layer3Composer.__init__"],["ScoreHistoryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","OTPTestContext.create"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser._extract_body"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","HierarchicalPromptComposer.__init__"],["ProfileRepository.update_from_onboarding","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConfigLoader.__init__"],["ScoreHistoryRepository.__init__","ScoreCalculator.__init__"],["ProfileCollector.is_complete","get_profile"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceSessionManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserRepository.__init__"],["UserRepository.increment_boss_attempts","UserRepository.get"],["UserRepository.update_last_interaction","OnboardingStateRepository.get"],["MissingVariableError.__init__","InstructionSelector.__init__"],["ProfileRepository.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MetaInstructionEngine.__init__"],["HierarchicalPromptComposer.compose","Layer2Composer.compose"],["ProfileRepository.__init__","ConflictGenerator.__init__"],["MessageHandler.handle","_score_and_check_boss"],["TestMoodDerivation.mock_session_context","CommandHandler.__init__"],["TestContextPackagePopulation.mock_session_context","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestContextPackagePopulation.__init__"],["UserNotFoundError.__init__","StateComputer.__init__"],["detect_and_compose_situation","Layer4Computer.detect_and_compose"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageGenerator.__init__"],["LoginPage.__init__","VoiceAgentConfig.__init__"],["BackstoryRepository.__init__","TTSConfigService.__init__"],["ProfileRepository.__init__","MockMappings.__init__"],["DashboardPage.__init__","Layer2Composer.__init__"],["TestLayer3RelationshipState.test_layer3_boss_fight_status","TestLayer6ResponseGuidelines._create_context"],["TestContextPackagePopulation.mock_session_context","ConversationConfigBuilder.__init__"],["ScoreHistoryRepository.__init__","ConflictGenerator.__init__"],["TestContextPackagePopulation.test_context_package_limits_to_top_3","TestContextPackagePopulation.mock_session_context"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer3Composer.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","_compute_hours_since_contact"],["VoiceOnboardingFlow.initiate_onboarding_call","_call_elevenlabs"],["ProfileRepository.__init__","BreakupManager.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._should_skip_for_dedup"],["ScoreHistoryRepository.__init__","MockMappings.__init__"],["ProfileRepository.__init__","VoiceService.__init__"],["ProfileRepository.__init__","EntityManager.__init__"],["EventStore.save_entities","EventStore.save_entity"],["BackstoryRepository.__init__","TokenValidator.__init__"],["CalibrationCalculator.compute","_content_component"],["MissingVariableError.__init__","Phase1Registration.__init__"],["ScoreHistoryRepository.__init__","BreakupManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceAgentConfig.__init__"],["OnboardingHandler.handle","_handle_interest_step"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointScheduler.__init__"],["MissingVariableError.__init__","EventStore.__init__"],["ScoreHistoryRepository.__init__","VoiceService.__init__"],["NikitaThoughtRepository.__init__","ResponseDelivery.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TTSConfigService.__init__"],["ScoreHistoryRepository.__init__","EntityManager.__init__"],["PromptLoader.replace_match","_get_nested_value"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GmailHelper.__init__"],["CalibrationCalculator.compute","CalibrationCalculator._content_component"],["VicePreferenceRepository.__init__","PostProcessor.__init__"],["MessageSplitter._find_split_points","MessageSplitter.split"],["EngagementStateRepository.__init__","TestVicePreferenceRepository.__init__"],["BackstoryRepository.__init__","TelegramBot.__init__"],["DecayProcessor.process_all","DecayProcessor.process_user"],["EngagementStateRepository.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase3Portal.__init__"],["RateLimiter.__init__","incr"],["ProfileRepository.__init__","ExperimentLoader.__init__"],["UserRepository.update_last_interaction","PendingRegistrationRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RateLimiter.__init__"],["UserNotFoundError.__init__","GmailMCPClient.__init__"],["UserRepository.__init__","FactExtractor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenValidator.__init__"],["GeneratedPromptRepository.__init__","TelegramWebhookSimulator.__init__"],["ConversationRepository.__init__","Phase1Registration.__init__"],["TouchpointStore.create","TouchpointStore._to_pydantic"],["UserNotFoundError.__init__","ElevenLabsConversationsClient.__init__"],["TextPatternProcessor.process_for_sending","EmojiProcessor.process"],["MessageHandler.handle","MessageHandler._score_and_check_boss"],["ConversationsPage.__init__","TelegramAuth.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationsE2ETest.__init__"],["UserRepository.is_onboarded","InMemoryCache.get"],["ConversationRepository.__init__","EventStore.__init__"],["TestDashboardE2E.test_data_verification_logic","DashboardE2ETest.step4_verify_data"],["NikitaThoughtRepository.__init__","LifeSimulator.__init__"],["VicePreferenceRepository.__init__","OnboardingServerToolHandler.__init__"],["SessionDetector.detect_and_queue","SessionDetector.mark_for_processing"],["ScoreHistoryRepository.__init__","ExperimentLoader.__init__"],["OnboardingStateRepository.update_step","PackageStore.get"],["compose_hierarchical_prompt","LayerComposer.compose"],["GeneratedPromptRepository.__init__","ResponseDelivery.__init__"],["BackstoryRepository.__init__","PostProcessingPipeline.__init__"],["DailySummaryRepository.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DashboardE2ETest.__init__"],["NikitaThoughtRepository.__init__","CommandHandler.__init__"],["DailySummaryRepository.__init__","TriggerDetector.__init__"],["InMemoryCache.get","_cleanup_expired"],["ClinginessDetector._response_time_signal","_clamp"],["UserNotFoundError.__init__","ViceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramBot.__init__"],["NarrativeArcManager.maybe_create_arc","NarrativeArcManager.create_arc"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","CommandHandler.__init__"],["ConversationsPage.__init__","LoginPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EngagementStateRepository.__init__"],["UserRepository.__init__","TelegramAuth.__init__"],["TestTimingProgression.test_average_delay_decreases_through_chapters","mock_production_settings"],["CalibrationCalculator._frequency_component","StateComputer._clamp"],["TouchpointScheduler.evaluate_user","get_config"],["TestLayer3RelationshipState.test_layer3_chapter_variations","TestLayer3RelationshipState._create_context"],["PostProcessingPipeline._run_touchpoint_scheduling","ProcessingStep.mark_running"],["StateComputer.compute","StateComputer._apply_relationship_modifier"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser.extract_pkce_code"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceSessionManager.__init__"],["JobExecutionRepository.__init__","LayerComposer.__init__"],["UserMetricsRepository.__init__","PendingRegistrationRepository.__init__"],["VoiceService.initiate_call","InboundCallHandler._get_first_message"],["PostProcessingPipeline._run_emotional_state_update","ProcessingStep.mark_running"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PostProcessingPipeline.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DecayCalculator.__init__"],["GeneratedPromptRepository.__init__","LifeSimulator.__init__"],["ConversationsPage.__init__","Phase2Conversation.__init__"],["BaseRepository.update","ScheduledEventRepository.session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestVicePreferenceRepositoryExtras.__init__"],["HandoffManager.execute_handoff","_generate_profile_summary"],["VicePreferenceRepository.__init__","VoiceCallVerifier.__init__"],["TestContextPackagePopulation.test_context_package_gets_life_events","TestMoodDerivation.mock_session_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RecoveryManager.__init__"],["GeneratedPromptRepository.__init__","UserMetricsRepository.__init__"],["ConversationThreadRepository.__init__","ServerToolHandler.__init__"],["TestWebhookHandler.test_call_initiation_failure_logged","create_webhook_signature"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PreferenceConfigurator.__init__"],["LayerComposer.compose","LayerComposer._get_relationship_events"],["DailySummaryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["NikitaThoughtRepository.__init__","MetaNikitaConfig.__init__"],["EmojiProcessor._validate_existing_emojis","EmojiProcessor._count_emojis"],["MessageHandler.handle","MessageHandler.handle"],["TestLayer4ConversationHistory.test_layer4_with_open_threads","_create_context_with_history"],["DailySummaryRepository.__init__","ScoreCalculator.__init__"],["EmojiProcessor.process","_count_emojis"],["DailySummaryRepository.__init__","HierarchicalPromptComposer.__init__"],["EngagementStateMachine.update","_apply_transition"],["BackstoryRepository.__init__","MissingVariableError.__init__"],["ProfileRepository.__init__","TestVicePreferenceRepository.__init__"],["TestMoodDerivation.mock_session_context","TestVicePreferenceRepositoryExtras.__init__"],["ProfileRepository.__init__","JobExecutionRepository.__init__"],["TestMoodDerivation.mock_session_context","OnboardingHandler.__init__"],["EvidenceCollector.add_db_snapshot","log"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer6Handler.__init__"],["NeglectDetector.detect","NeglectDetector._response_time_signal"],["TestContextPackagePopulation.mock_session_context","LayerComposer.__init__"],["ScoreHistoryRepository.__init__","TestVicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointScheduler.__init__"],["BackstoryRepository.__init__","GeneratedPromptRepository.__init__"],["UserRepository.__init__","TranscriptManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointStore.__init__"],["ChapterCard","getStatusBadge"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NikitaMemory.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestDailySummaryRepositoryContextEngineering.__init__"],["UserNotFoundError.__init__","BaseRepository.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step1_verify_js"],["ConversationsPage.__init__","ResolutionManager.__init__"],["generate_first_nikita_message","SummaryGenerator.generate"],["UserNotFoundError.__init__","SupabaseHelper.__init__"],["UserRepository.__init__","SessionDetector.__init__"],["TestLayer3RelationshipState.test_layer3_chapter_variations","TestLayer6ResponseGuidelines._create_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PunctuationProcessor.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","PortalLoginTestContext.create"],["BackstoryRepository.__init__","ScheduledEventRepository.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._send_telegram_message"],["TestContextPackagePopulation.mock_session_context","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MissingVariableError.__init__"],["GeneratedPromptRepository.__init__","MetaNikitaConfig.__init__"],["ConversationsPage.__init__","VenueResearchService.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_summary_generation"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step2_wait_for_success_js"],["LoginPage.__init__","UserRepository.__init__"],["DashboardPage.__init__","PendingRegistrationRepository.__init__"],["NikitaThoughtRepository.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DatabaseRateLimiter.__init__"],["TestWebhookHandler.test_unknown_event_type_handled","create_webhook_signature"],["EngagementStateRepository.__init__","TelegramAuth.__init__"],["UserMetricsRepository.__init__","TemplateGenerator.__init__"],["PostProcessingPipeline.process","PostProcessingPipeline._run_graph_update"],["UserMetricsRepository.__init__","TokenCounter.__init__"],["_ChapterBehaviorsProxy.items","_load_chapter_behaviors"],["LoginPage.__init__","TestContextPackagePopulation.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationsE2ETest.__init__"],["DailySummaryRepository.__init__","VoiceAgentConfig.__init__"],["UserRepository.__init__","ResolutionManager.__init__"],["UserNotFoundError.__init__","VoiceOnboardingFlow.__init__"],["MetaInstructionEngine.format_for_prompt","format_for_prompt"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GeneratedPromptRepository.__init__"],["TouchpointEngine._deliver_single","_send_telegram_message"],["TestLayer4ConversationHistory.test_layer4_with_last_conversation","_create_context_with_history"],["_AgentProxy._real_agent","get_nikita_agent"],["MissingVariableError.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase3Portal.__init__"],["JobExecutionRepository.__init__","RateLimiter.__init__"],["ServerToolHandler._get_context","MetaPromptService._query_graph"],["UserRepository.update_onboarding_status","UserRepository.get"],["EngagementStateRepository.__init__","LoginPage.__init__"],["TestMoodDerivation.mock_session_context","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScheduledEventRepository.__init__"],["UserMetricsRepository.update_metrics","BackstoryRepository.get_by_user_id"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserRepository.__init__"],["ConflictStore.escalate_conflict","ConflictStore.update_conflict"],["MissingVariableError.__init__","MessageGenerator.__init__"],["mock_agent","test_something"],["InboundCallHandler.handle_incoming_call","_lookup_user_by_phone"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestContextPackagePopulation.__init__"],["ConversationsPage.__init__","MoodCalculator.__init__"],["TestMoodDerivation.mock_session_context","Phase3Portal.__init__"],["ViceScorer.get_profile","_get_vice_repo"],["VoiceService.initiate_call","_load_context"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","__init__"],["TestPipelineIntegration.test_partial_failure_handling","get_pipeline_patches"],["main","build_tools_config"],["EngagementStateRepository.__init__","Phase2Conversation.__init__"],["ConversationThreadRepository.bulk_create_threads","create_thread"],["NeglectDetector.detect","ClinginessDetector._response_time_signal"],["ConversationRepository.__init__","VoiceSessionManager.__init__"],["BaseRepository.update","TouchpointStore.create"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OTPVerificationHandler.__init__"],["TestWebhookPostProcessing.test_webhook_normalizes_agent_role","capture_add"],["analyze_neediness","_clamp"],["UserMetricsRepository.__init__","UserNotFoundError.__init__"],["PostProcessingPipeline._run_summary_generation","TouchpointStore.mark_failed"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TemplateGenerator.__init__"],["VoiceOnboardingFlow.should_start_onboarding","VoiceOnboardingFlow._get_user_onboarding_status"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenCounter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestVicePreferenceRepositoryExtras.__init__"],["ConversationConfigBuilder._generate_fallback_prompt","InboundCallHandler._get_relationship_score"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingHandler.__init__"],["OnboardingStateRepository.get_or_create","InMemoryCache.get"],["PostProcessingPipeline._run_summary_generation","ConversationRepository.mark_failed"],["UserRepository.__init__","MoodCalculator.__init__"],["OnboardingHandler.handle","_handle_location_step"],["UserMetricsRepository.__init__","ConflictStore.__init__"],["VicePreferenceRepository.__init__","StateStore.__init__"],["NikitaThoughtRepository.__init__","MessageHandler.__init__"],["MissingVariableError.__init__","TouchpointScheduler.__init__"],["TestConversationsE2E.test_data_processing","step3_process_data"],["ConversationRepository.__init__","MessageGenerator.__init__"],["BackstoryRepository.__init__","FullJourneyOrchestrator.__init__"],["UserRepository.update_score","InMemoryCache.get"],["UserMetricsRepository.__init__","InMemoryCache.__init__"],["ScoreAnalyzer._call_llm","_call_llm_raw"],["MissingVariableError.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ScoreHistoryRepository.__init__","FactExtractor.__init__"],["UserMetricsRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TTSConfigService.__init__"],["UserNotFoundError.__init__","ProfileRepository.__init__"],["DashboardPage.__init__","OTPFlowE2ETest.__init__"],["TestContextPackagePopulation.mock_session_context","BackstoryGeneratorService.__init__"],["UserNotFoundError.__init__","MessageSplitter.__init__"],["ProfileRepository.__init__","TelegramAuth.__init__"],["SituationDetector._detect_situation_type","SituationDetector._is_after_gap"],["ConversationThreadRepository.__init__","GmailMCPClient.__init__"],["validate_prompt","get_token_validator"],["get_nikita_agent","_create_nikita_agent"],["EngagementStateRepository.__init__","ResolutionManager.__init__"],["ConversationThreadRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","five_second_timeout"],["ConversationsPage.__init__","DecayProcessor.__init__"],["ConversationRepository.__init__","TouchpointScheduler.__init__"],["LoginPage.__init__","EngagementStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NikitaThoughtRepository.__init__"],["NikitaThoughtRepository.__init__","ConflictDetector.__init__"],["GeneratedPromptRepository.__init__","MessageHandler.__init__"],["TemplateGenerator.generate_prompt","MetaPromptService.generate_system_prompt"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TriggerDetector.__init__"],["MetaNikitaConfig.get_agent_config","MetaNikitaConfig._personalize_first_message"],["Phase3Portal.extract_magic_link","OTPEmailParser.extract_magic_link"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","_ProfileFromAnswers.__init__"],["ScoreHistoryRepository.__init__","TelegramAuth.__init__"],["EngagementStateRepository.__init__","VenueResearchService.__init__"],["ConversationRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["NikitaThoughtRepository.__init__","DatabaseRateLimiter.__init__"],["ProfileRepository.__init__","LoginPage.__init__"],["ClinginessDetector._frequency_signal","UserMetricsRepository._clamp"],["process_conversations","_get_first_error"],["ConversationThreadRepository.__init__","ViceService.__init__"],["MissingVariableError.__init__","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DatabaseRateLimiter.__init__"],["TokenValidator.truncate","TokenValidator.count_tokens"],["TouchpointScheduler.evaluate_event_trigger","_get_initiation_rate"],["UserRepository.__init__","DecayProcessor.__init__"],["EscalationManager._check_natural_resolution","_get_time_in_level"],["NarrativeArcManager.maybe_create_arc","LifeSimulator.get_active_arcs"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EngagementStateRepository.__init__"],["ProfileCollector.get_missing_fields","ProfileCollector.get_profile"],["DashboardPage.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase3Portal.__init__"],["LoginPage.__init__","PreferenceConfigurator.__init__"],["TestP1ErrorHandling.test_ep3_access_denied_shows_invalid_message","navigate_and_get_content"],["LoginPage.__init__","TranscriptManager.__init__"],["DashboardPage.__init__","InMemoryCache.__init__"],["ProfileRepository.__init__","Phase2Conversation.__init__"],["NikitaThoughtRepository.__init__","DashboardPage.__init__"],["UserNotFoundError.__init__","EmojiProcessor.__init__"],["BackstoryRepository.__init__","MetaPromptService.__init__"],["UserMetricsRepository.__init__","InboundCallHandler.__init__"],["GeneratedPromptRepository.__init__","ConflictDetector.__init__"],["UserRepository.__init__","HandoffManager.__init__"],["DashboardPage.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ProfileCollector.__init__"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow.process_phone_input"],["RecoveryManager.apply_recovery","apply_recovery"],["TestMoodDerivation.mock_session_context","PunctuationProcessor.__init__"],["TestResponseTimer.test_ac_4_1_5_distribution_not_uniform","mock_production_settings"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestDailySummaryRepositoryExtras.__init__"],["EngagementStateRepository.__init__","MoodCalculator.__init__"],["ConversationRepository.__init__","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PostProcessingPipeline.__init__"],["CommandHandler._handle_status","CommandHandler._get_score_hint"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NarrativeArcManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RecoveryManager.__init__"],["ViceScorer.close","close"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EscalationManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PreferenceConfigurator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TranscriptManager.__init__"],["PendingRegistrationRepository.get_email","_ChapterBehaviorsProxy.get"],["VicePreferenceRepository.__init__","Layer3Composer.__init__"],["ScoreHistoryRepository.__init__","TranscriptManager.__init__"],["DashboardPage.__init__","Layer4Computer.__init__"],["GeneratedPromptRepository.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestVicePreferenceRepositoryExtras.__init__"],["Layer3Composer.describe_state","_describe_intimacy"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MetaPromptService.__init__"],["GeneratedPromptRepository.__init__","DashboardPage.__init__"],["ScoreHistoryRepository.__init__","SessionDetector.__init__"],["OnboardingHandler._handle_venue_research_step","OnboardingHandler._present_scenarios"],["DailySummaryRepository.__init__","UserRepository.__init__"],["UserMetricsRepository.__init__","PromptLoader.__init__"],["UserRepository.__init__","SummaryGenerator.__init__"],["MessageHandler.handle","_send_rate_limit_response"],["ProfileRepository.__init__","ResolutionManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InboundCallHandler.__init__"],["DailySummaryRepository.__init__","TestContextPackagePopulation.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","_ProfileFromAnswers.__init__"],["ServerToolHandler._get_context","ServerToolHandler._add_humanization_context"],["ConversationThreadRepository.__init__","BaseRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","JourneyReport.__init__"],["ProfileRepository.__init__","VenueResearchService.__init__"],["ConversationThreadRepository.__init__","SupabaseHelper.__init__"],["VicePreferenceRepository.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NikitaMemory.__init__"],["DecayProcessor.process_user","DecayProcessor._log_decay_event"],["DashboardPage.__init__","PortalLoginE2ETest.__init__"],["TemplateGenerator.generate_prompt_legacy","_layer4_conversation_history"],["BackstoryRepository.__init__","InstructionSelector.__init__"],["ScoreHistoryRepository.__init__","ResolutionManager.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._generate_signed_token"],["OnboardingStateRepository.add_answer","BaseRepository.get"],["Layer3Composer.compose","Layer3Composer.describe_state"],["PostProcessingPipeline._run_touchpoint_scheduling","mark_failed"],["TestSessionDetector.test_detect_and_queue_marks_all_found","mock_mark"],["UserRepository.advance_chapter","PendingRegistrationRepository.get"],["ScoreHistoryRepository.__init__","VenueResearchService.__init__"],["ServerToolHandler._get_context","DynamicVariablesBuilder._compute_nikita_activity"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MissingVariableError.__init__"],["JobExecutionRepository.__init__","EscalationManager.__init__"],["PostProcessingPipeline._run_emotional_state_update","mark_failed"],["EngagementStateRepository.__init__","DecayProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EntityManager.__init__"],["ConversationThreadRepository.__init__","VoiceOnboardingFlow.__init__"],["VicePreferenceRepository.__init__","TokenValidator.__init__"],["NikitaThoughtRepository.__init__","StateComputer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BasePage.__init__"],["UserMetricsRepository.__init__","Layer1Loader.__init__"],["UserNotFoundError.__init__","Layer2Composer.__init__"],["UserMetricsRepository.__init__","ResponseTimer.__init__"],["recall_memory","format_memory_results"],["PromptLoader.render","PromptLoader.load"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PromptLoader.__init__"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler._get_or_create_profile"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InstructionSelector.__init__"],["BackstoryRepository.create_from_scenario","InMemoryCache.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DatabaseRateLimiter.__init__"],["DashboardPage.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NikitaThoughtRepository.__init__"],["LoginPage.__init__","OTPVerificationHandler.__init__"],["ProfileRepository.__init__","MoodCalculator.__init__"],["JobExecutionRepository.__init__","_ProfileFromAnswers.__init__"],["LoginPage.__init__","TemplateGenerator.__init__"],["VicePreferenceRepository.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestUserMetricsRepository.__init__"],["JobExecutionRepository.__init__","JourneyReport.__init__"],["MessageGenerator._load_template","_get_default_template"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PendingRegistrationRepository.__init__"],["BackstoryRepository.__init__","EventStore.__init__"],["ConversationsPage.__init__","Layer6Handler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase3Portal.__init__"],["StateStore.get_state_history","_row_to_state"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestMoodDerivation.__init__"],["ScoreHistoryRepository.__init__","MoodCalculator.__init__"],["TestContextPackagePopulation.mock_session_context","EscalationManager.__init__"],["TouchpointStore.delete","OnboardingStateRepository.delete"],["GeneratedPromptRepository.__init__","StateComputer.__init__"],["TestMoodDerivation.mock_session_context","NikitaThoughtRepository.__init__"],["VicePreferenceRepository.__init__","ProfileCollector.__init__"],["MissingVariableError.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MetaPromptService._log_prompt","_count_tokens"],["TestMoodDerivation.mock_session_context","TriggerDetector.__init__"],["MissingVariableError.__init__","OnboardingHandler.__init__"],["OnboardingServerToolHandler.complete_onboarding","UserRepository.complete_onboarding"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OTPVerificationHandler.__init__"],["VicePreferenceRepository.__init__","PostProcessingPipeline.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TemplateGenerator.__init__"],["ConfigLoader._load_all_configs","_load_yaml"],["VicePreferenceRepository.__init__","RecoveryManager.__init__"],["BaseRepository.update","PendingRegistrationRepository.session"],["NikitaThoughtRepository.__init__","GmailMCPClient.__init__"],["DailySummaryRepository.__init__","EngagementStateRepository.__init__"],["TestContextPackagePopulation.mock_session_context","_ProfileFromAnswers.__init__"],["BaseRepository.update","UserRepository.get"],["EvidenceCollector.start_phase","EvidenceCollector.log"],["DashboardPage.__init__","ConversationThreadRepository.__init__"],["ConversationThreadRepository.__init__","ProfileRepository.__init__"],["ScoreAnalyzer.analyze_batch","_build_batch_prompt"],["DashboardPage.__init__","Layer1Loader.__init__"],["TestPipelineStatusMarking.test_pipeline_marks_processed_on_success","mock_meta_prompt_service"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase4GameState.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","HierarchicalPromptComposer.__init__"],["DashboardPage.__init__","ResponseTimer.__init__"],["compose_chapter_layer","Layer4Computer.compose"],["ConversationRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["EventGenerator.generate_events_for_day","_call_llm"],["ConversationRepository.__init__","OnboardingHandler.__init__"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.get_active_arcs"],["RateLimiter.get_remaining","get"],["ProfileRepository.__init__","DecayProcessor.__init__"],["EscalationManager.get_escalation_timeline","EscalationManager._get_escalation_threshold"],["TestServerTools.test_server_tool_timeout_handling","slow_operation"],["TextPatternProcessor.process","process"],["UserMetricsRepository.__init__","DeliveryResult.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","BackstoryRepository.create"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BasePage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GmailHelper.__init__"],["MetaPromptService.generate_system_prompt","_format_template"],["DynamicVariablesBuilder.build_from_user","VoiceService._compute_nikita_energy"],["_ChapterBehaviorsProxy.keys","_ChapterBehaviorsProxy.keys"],["VicePreferenceRepository.__init__","NikitaMemory.__init__"],["ScoreHistoryRepository.__init__","DecayProcessor.__init__"],["TestMoodDerivation.mock_session_context","HierarchicalPromptComposer.__init__"],["DailySummaryRepository.__init__","PreferenceConfigurator.__init__"],["DashboardPage.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TemplateGenerator.__init__"],["DailySummaryRepository.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenCounter.__init__"],["GeneratedPromptRepository.__init__","GmailMCPClient.__init__"],["MissingVariableError.__init__","DatabaseRateLimiter.__init__"],["PostProcessingPipeline._run_package_storage","ScheduledEventRepository.mark_failed"],["GeneratedPromptRepository.__init__","ElevenLabsConversationsClient.__init__"],["VicePreferenceRepository.__init__","MissingVariableError.__init__"],["ProfileCollector.collect","_validate_and_process"],["DailySummaryRepository.__init__","SessionDetector.__init__"],["NikitaThoughtRepository.__init__","BackstoryRepository.__init__"],["BackstoryRepository.__init__","RegistrationHandler.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step3_build_otp_search_query"],["ScoreHistoryRepository.__init__","HandoffManager.__init__"],["Layer1Loader.prompt","InboundCallHandler._generate_fallback_prompt"],["Layer1Loader.prompt","_generate_fallback_prompt"],["BossStateMachine.process_outcome","BossStateMachine.process_pass"],["UserMetricsRepository.__init__","TouchpointEngine.__init__"],["UserRepository.set_boss_fight_status","BaseRepository.get"],["DashboardPage.__init__","VenueCacheRepository.__init__"],["MissingVariableError.__init__","Phase3Portal.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","navigate_and_get_content"],["DynamicVariablesBuilder.build_from_user","MetaPromptService._compute_nikita_energy"],["UserRepository.__init__","ScoreHistoryRepository.__init__"],["LoginPage.__init__","SummaryGenerator.__init__"],["LoginPage.__init__","NarrativeArcManager.__init__"],["GeneratedPromptRepository.__init__","ViceService.__init__"],["InMemoryCache.incr","BaseRepository.get"],["VicePreferenceRepository.__init__","GeneratedPromptRepository.__init__"],["MockAgentHelper.patch_message_handler","mock_handle"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer5Injector.__init__"],["PostProcessingPipeline._run_touchpoint_scheduling","ProcessingStep.mark_failed"],["ConversationThreadRepository.__init__","EmojiProcessor.__init__"],["LoginPage.__init__","OnboardingStateRepository.__init__"],["BreakupManager.check_and_process","check_threshold"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NikitaThoughtRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DeliveryResult.__init__"],["NikitaThoughtRepository.__init__","ConfigLoader.__init__"],["MessageSplitter.split","MessageSplitter._calculate_delay"],["PunctuationProcessor.apply","PunctuationProcessor._apply_lowercase"],["JobExecutionRepository.__init__","BasePage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PunctuationProcessor.__init__"],["PostProcessingPipeline._run_emotional_state_update","ProcessingStep.mark_failed"],["PostProcessingPipeline._run_package_storage","TouchpointStore.mark_failed"],["ConversationRepository.__init__","DatabaseRateLimiter.__init__"],["EngagementStateRepository.__init__","Layer6Handler.__init__"],["TestNikitaThoughtRepository.test_expire_missing_him_thoughts_marks_used","TestNikitaThoughtRepository.mock_get_active"],["MessageHandler.handle","_get_or_create_conversation"],["ScoreCalculator.calculate","ScoreCalculator._detect_events"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserNotFoundError.__init__"],["TestMoodDerivation.mock_session_context","VoiceAgentConfig.__init__"],["GeneratedPromptRepository.__init__","BackstoryRepository.__init__"],["EmojiProcessor.process","_validate_existing_emojis"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SummaryGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NarrativeArcManager.__init__"],["ConversationRepository.__init__","Phase3Portal.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceAnalyzer.__init__"],["ScoreHistoryRepository.__init__","SummaryGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingStateRepository.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","BaseRepository.create"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EngagementStateMachine.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_correct_amount_ch1","create_mock_user"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointEngine.__init__"],["WebhookTestData.create","SupabaseHelper.generate_test_telegram_id"],["UserRepository.update_last_interaction","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StrategicSilence.__init__"],["ScoringService.score_batch","_log_history"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestContextPackagePopulation.__init__"],["GeneratedPromptRepository.__init__","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MetaPromptService.__init__"],["CalibrationCalculator._timing_component","StateComputer._clamp"],["BackstoryRepository.__init__","VoiceSessionManager.__init__"],["UserMetricsRepository.__init__","ScoringService.__init__"],["TestEventStore.mock_session_factory","TestEventStore.__aenter__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","HierarchicalPromptComposer.__init__"],["UserMetricsRepository.__init__","ViceScorer.__init__"],["analyze_neediness","_get_cache_key"],["NikitaThoughtRepository.__init__","GmailHelper.__init__"],["VoiceService.initiate_call","ConversationConfigBuilder._get_first_message"],["BackstoryRepository.__init__","MessageGenerator.__init__"],["ConversationsPage.__init__","ProfileCollector.__init__"],["DailySummaryRepository.__init__","OTPVerificationHandler.__init__"],["UserRepository.__init__","VoiceCallScorer.__init__"],["GeneratedPromptRepository.__init__","SupabaseHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GmailHelper.__init__"],["HandoffManager.transition","generate"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SkipDecision.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","FactExtractor.__init__"],["JobExecutionRepository.__init__","Phase4GameState.__init__"],["UserRepository.__init__","ConversationConfigBuilder.__init__"],["ConversationThreadRepository.__init__","Layer2Composer.__init__"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","TestTimeoutFallback.five_second_timeout"],["VicePreferenceRepository.__init__","FullJourneyOrchestrator.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","build_cleanup_query"],["LayerComposer.compose","_get_life_events"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceSessionManager.__init__"],["TestServerTools.test_server_tool_timeout_handling","TestServerTools.slow_operation"],["ClinginessDetector._frequency_signal","_clamp"],["RateLimiter.__init__","InMemoryCache.incr"],["TestTimeoutFallback.test_timeout_fallback_includes_cache_friendly","timeout_function"],["GeneratedPromptRepository.__init__","VoiceOnboardingFlow.__init__"],["ConversationsPage.__init__","TextPatternProcessor.__init__"],["ProfileRepository.__init__","Layer6Handler.__init__"],["PromptLoader.replace_match","PromptLoader._get_nested_value"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreAnalyzer.__init__"],["NikitaThoughtRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InboundCallHandler.__init__"],["FullJourneyOrchestrator.get_cleanup_instructions","get_cleanup_sql"],["UserMetricsRepository.__init__","EvidenceCollector.__init__"],["ConversationThreadRepository.__init__","ScheduledEventRepository.__init__"],["TestConversationThreadRepository.test_get_threads_for_prompt_groups_by_type","mock_get_open_threads"],["PreferenceConfigurator.configure","configure"],["StateComputer.compute","StateComputer._apply_life_event_deltas"],["_ChapterBehaviorsProxy.__iter__","_load_chapter_behaviors"],["UserRepository.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NikitaThoughtRepository.__init__"],["PendingRegistrationRepository.get_email","get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TriggerDetector.__init__"],["ConversationsPage.__init__","NikitaMemory.__init__"],["Layer3Composer.compose","Layer3Composer._get_conflict_state"],["DashboardPage.__init__","ScoringService.__init__"],["Phase3Portal.extract_magic_link","Phase3Portal.extract_magic_link"],["UserNotFoundError.__init__","OTPFlowE2ETest.__init__"],["TestConversationThreadRepository.test_bulk_create_threads_creates_all","TestConversationThreadRepository.mock_create_thread"],["DashboardPage.__init__","ViceScorer.__init__"],["NikitaThoughtRepository.__init__","MessageSplitter.__init__"],["TestNikitaThoughtRepository.test_create_missing_him_thought_48h","TestNikitaThoughtRepository.mock_create_thought"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EngagementStateRepository.__init__"],["SituationDetector.map_conflict_to_situation","_is_conflict_active"],["SituationDetector._detect_situation_type","_is_after_gap"],["ScoreCalculator.calculate","apply_multiplier"],["DatabaseRateLimiter.check","DatabaseRateLimiter._get_day_window"],["EngagementCard","getAdvice"],["GeneratedPromptRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EventGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PromptLoader.__init__"],["ConversationsPage.build_verification_sequence","js_wait_for_conversations_loaded"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResponseDelivery.__init__"],["UserNotFoundError.__init__","Phase1Registration.__init__"],["EscalationManager.check_escalation","_check_natural_resolution"],["LifeEvent.model_dump_for_db","EmotionalImpact.to_dict"],["DashboardPage.__init__","ConversationRepository.__init__"],["BackstoryRepository.__init__","CommandHandler.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step1_send_start"],["TouchpointStore.mark_failed","TouchpointStore._to_pydantic"],["BaseRepository.update","PortalLoginTestContext.create"],["UserNotFoundError.__init__","EventStore.__init__"],["TestMoodDerivation.mock_session_context","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EvidenceCollector.__init__"],["VicePreferenceRepository.__init__","MetaPromptService.__init__"],["VoiceOnboardingFlow.should_start_onboarding","VoiceOnboardingFlow.is_already_onboarded"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserRepository.__init__"],["RateLimiter.check","InMemoryCache.expire"],["ConversationsPage.__init__","TestUserMetricsRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DailySummaryRepository.__init__"],["VoiceService._load_context","ServerToolHandler._compute_nikita_mood"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TranscriptManager.__init__"],["GeneratedPromptRepository.__init__","MessageSplitter.__init__"],["DailySummaryRepository.__init__","SummaryGenerator.__init__"],["ConversationsPage.__init__","TestMoodDerivation.__init__"],["DailySummaryRepository.__init__","NarrativeArcManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","HierarchicalPromptComposer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SessionDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PostProcessor.__init__"],["DailySummaryRepository.__init__","OnboardingStateRepository.__init__"],["ScoreHistoryRepository.__init__","ScoreHistoryRepository.__init__"],["EngagementStateRepository.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LifeSimulator.__init__"],["PreferenceConfigurator.get_conversation_style_config","PreferenceConfigurator.get_conversation_style_config"],["ServerToolHandler.handle","_score_turn"],["LoginPage.__init__","Layer5Injector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Layer1Loader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreAnalyzer.__init__"],["TestMoodDerivation.mock_session_context","UserRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResponseTimer.__init__"],["InboundCallHandler.handle_incoming_call","create_session"],["UserRepository.__init__","TestUserMetricsRepository.__init__"],["create_app","root"],["TestMoodDerivation.mock_session_context","TestContextPackagePopulation.__init__"],["UserRepository.__init__","TestMoodDerivation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationsPage.__init__"],["DatabaseRateLimiter.check","_get_minute_window"],["PunctuationProcessor.apply","PunctuationProcessor._add_trailing_dots"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingServerToolHandler.__init__"],["ProfileRepository.get_by_user_id","BaseRepository.get"],["MissingVariableError.__init__","NikitaThoughtRepository.__init__"],["EngagementStateRepository.__init__","TextPatternProcessor.__init__"],["ClinginessDetector._response_time_signal","StateComputer._clamp"],["TestPortalLoginFlow.test_magic_link_extraction","PortalLoginE2ETest.step3_extract_magic_link"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Layer5Injector.__init__"],["UserNotFoundError.__init__","Layer4Computer.__init__"],["TestLayer4ConversationHistory.test_layer4_with_week_summaries","TestLayer4ConversationHistory._create_context_with_history"],["VicePreferenceRepository.__init__","InstructionSelector.__init__"],["NeglectDetector._abrupt_ending_signal","StateComputer._clamp"],["TouchpointStore.get_due_touchpoints","_to_pydantic"],["UserMetricsRepository.__init__","GraphUpdater.__init__"],["UserMetricsRepository.__init__","DecayCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceAgentConfig.__init__"],["UserRepository.__init__","LayerComposer.__init__"],["MetaPromptService._load_context","CommandHandler._get_chapter_name"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step2_send_email"],["PostProcessingPipeline._run_layer_composition","ProcessingStep.mark_running"],["LoginPage.__init__","VoiceCallScorer.__init__"],["BossStateMachine.process_fail","_get_user_repo"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VenueCacheRepository.__init__"],["TokenCounter.count","count_tokens"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RegistrationHandler.__init__"],["generate_system_prompt","TemplateGenerator.generate_prompt"],["JobExecutionRepository.__init__","ScoreAnalyzer.__init__"],["EngagementStateRepository.__init__","NikitaMemory.__init__"],["StateComputer._apply_relationship_modifier","_apply_relationship_modifier"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MetaNikitaConfig.__init__"],["LoginPage.__init__","ConversationConfigBuilder.__init__"],["NikitaThoughtRepository.__init__","__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceAnalyzer.__init__"],["ConversationRepository.__init__","NikitaThoughtRepository.__init__"],["UserRepository.__init__","MetaInstructionEngine.__init__"],["UserNotFoundError.__init__","PortalLoginE2ETest.__init__"],["NeglectDetector.detect","_response_time_signal"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceCallVerifier.__init__"],["BackstoryRepository.__init__","ConversationsE2ETest.__init__"],["RateLimiter.__init__","get"],["VicePreferenceRepository.__init__","EventGenerator.__init__"],["BackstoryGeneratorService.generate_scenarios","_parse_scenarios_response"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceCallScorer.__init__"],["TestSessionDetector.test_detect_and_queue_marks_all_found","mock_get_stale"],["TestOTPFlowSteps.test_step5_verification_parsing","PortalLoginTestContext.create"],["ScoreHistoryRepository.__init__","VoiceCallScorer.__init__"],["MissingVariableError.__init__","HierarchicalPromptComposer.__init__"],["UserMetricsRepository.__init__","MockResult.__init__"],["BaseRepository.delete_by_id","OnboardingStateRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DeliveryResult.__init__"],["DynamicVariablesBuilder.build_from_context","ServerToolHandler._compute_nikita_activity"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PostProcessor.__init__"],["Layer4Computer.detect_and_compose","Layer3Composer.compose"],["ProfileRepository.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GraphUpdater.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OTPVerificationHandler.__init__"],["VenueResearchService._parse_search_results","VenueResearchService._extract_vibe"],["MockAgentHelper.patch_get_nikita_agent_for_user","MockAgentHelper.mock_get_agent"],["UserRepository.update_game_status","_ChapterBehaviorsProxy.get"],["MockAgentHelper.patch_message_handler","MockAgentHelper.mock_handle"],["TestContextPackagePopulation.mock_session_context","ScoreAnalyzer.__init__"],["MissingVariableError.__init__","GmailHelper.__init__"],["EngagementStateRepository.__init__","TestUserMetricsRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserRepository.__init__"],["UserNotFoundError.__init__","PackageStore.__init__"],["VicePreferenceRepository.__init__","DailySummaryRepository.__init__"],["OnboardingServerToolHandler.handle_request","complete_onboarding"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationsE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RateLimiter.__init__"],["UserRepository.is_onboarded","PackageStore.get"],["EngagementStateRepository.__init__","TestMoodDerivation.__init__"],["TemplateGenerator.generate_prompt","VoiceAgentConfig.generate_system_prompt"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestContextPackagePopulation.__init__"],["TestMoodDerivation.mock_session_context","EngagementStateRepository.__init__"],["DashboardPage.__init__","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingServerToolHandler.__init__"],["handle_webhook","_process_webhook_event"],["ProfileRepository.__init__","TextPatternProcessor.__init__"],["PackageStore.exists","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointEngine.__init__"],["BackstoryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConversationRepository.__init__","HierarchicalPromptComposer.__init__"],["BackstoryRepository.__init__","OnboardingHandler.__init__"],["ScoreAnalyzer.agent","_create_score_analyzer_agent"],["LoginPage.build_login_sequence","LoginPage.js_wait_for_magic_link_sent"],["ConversationsPage.__init__","EngagementStateMachine.__init__"],["LifeSimulator.generate_next_day_events","NarrativeArcManager.get_active_arcs"],["TestConversationsE2E.test_verification_instructions","get_verification_instructions"],["VoiceService._load_context","VoiceService._enrich_from_memory"],["GeneratedPromptRepository.__init__","Layer2Composer.__init__"],["ScoreHistoryRepository.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockResult.__init__"],["ConversationsPage.__init__","BackstoryGeneratorService.__init__"],["ConversationRepository.__init__","GmailHelper.__init__"],["JobExecutionRepository.__init__","PostProcessor.__init__"],["DatabaseRateLimiter.get_remaining","DatabaseRateLimiter._get_day_window"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","TestHelpers.create_fake_jwt"],["TestMoodDerivation.mock_session_context","PreferenceConfigurator.__init__"],["PostProcessingPipeline._run_conflict_check","mark_completed"],["TouchpointStore.mark_skipped","_to_pydantic"],["OnboardingStateRepository.delete","OnboardingStateRepository.delete"],["UserMetricsRepository.__init__","LengthAdjuster.__init__"],["DailySummaryRepository.__init__","ScoreHistoryRepository.__init__"],["PendingRegistrationRepository.get_email","TouchpointStore.get"],["UserNotFoundError.__init__","ConversationThreadRepository.__init__"],["TestGraphUpdater.mock_memory_factory","factory"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","HandoffManager.__init__"],["initiate_call","VoiceService.initiate_call"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceCallVerifier.__init__"],["TelegramWebhookSimulator.send_command","_build_command_update"],["UserRepository.__init__","BackstoryGeneratorService.__init__"],["ConversationThreadRepository.__init__","OTPFlowE2ETest.__init__"],["JobExecutionRepository.__init__","OnboardingServerToolHandler.__init__"],["LengthAdjuster.is_within_bounds","LengthAdjuster._get_config"],["DashboardPage.__init__","PunctuationProcessor.__init__"],["StateStore.get_current_state","_row_to_state"],["VicePreferenceRepository.__init__","RegistrationHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageHandler.__init__"],["ConversationsPage.__init__","SkipDecision.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramWebhookSimulator.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","TestHelpers.navigate_and_get_content"],["ConversationThreadRepository.__init__","Phase1Registration.__init__"],["VicePreferenceRepository.__init__","ViceAnalyzer.__init__"],["analyze_neediness","StateComputer._clamp"],["UserRepository.advance_chapter","InMemoryCache.get"],["UserNotFoundError.__init__","TouchpointScheduler.__init__"],["BackstoryRepository.__init__","DatabaseRateLimiter.__init__"],["UserNotFoundError.__init__","TouchpointStore.__init__"],["ConversationThreadRepository.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResponseDelivery.__init__"],["DynamicVariablesBuilder.build_from_user","_get_time_of_day"],["ProfileRepository.__init__","TestUserMetricsRepository.__init__"],["DailySummaryRepository.__init__","Layer5Injector.__init__"],["run_in_transaction","_wrapped"],["UserNotFoundError.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoringService.__init__"],["EventStore.get_entities","EventStore._row_to_entity"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StateStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SummaryGenerator.__init__"],["ProfileRepository.__init__","TestMoodDerivation.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NarrativeArcManager.__init__"],["TouchpointScheduler._evaluate_gap_trigger","_get_initiation_rate"],["UserRepository.complete_onboarding","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceScorer.__init__"],["PostProcessingPipeline._run_conflict_check","ProcessingStep.mark_completed"],["DatabaseRateLimiter.get_remaining","_get_minute_window"],["_ChapterBehaviorsProxy.get","BaseRepository.get"],["ScoreHistoryRepository.__init__","TestUserMetricsRepository.__init__"],["UserNotFoundError.__init__","VenueCacheRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingStateRepository.__init__"],["MockAgentHelper.patch_generate_response","patch_generate_response"],["TemplateGenerator.generate_prompt_legacy","generate_prompt"],["JobExecutionRepository.__init__","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EngagementStateRepository.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step1_verify_js"],["ScoreHistoryRepository.__init__","TestMoodDerivation.__init__"],["TestP0CriticalHappyPath.test_ep6_invalid_jwt_format_returns_error","navigate_and_get_content"],["ClinginessDetector.detect","_frequency_signal"],["BossStateMachine.process_outcome","process_pass"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DatabaseRateLimiter.__init__"],["DashboardPage.__init__","LengthAdjuster.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserRepository.__init__"],["MetaPromptService._load_context","MetaPromptService._get_chapter_name"],["compose_chapter_layer","get_layer2_composer"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LifeSimulator.__init__"],["TokenValidator.validate","TokenValidator.count_tokens"],["ProfileRepository.__init__","LayerComposer.__init__"],["PreferenceConfigurator.to_dict","get_preferences"],["run_manual_otp_test","OTPFlowE2ETest.step1_send_start"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OTPVerificationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestContextPackagePopulation.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TemplateGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenCounter.__init__"],["DailySummaryRepository.__init__","VoiceCallScorer.__init__"],["ScoreCalculator.calculate","ScoreCalculator.calculate_composite"],["ConversationThreadRepository.get_threads_for_prompt","get_open_threads"],["MetaPromptService._load_context","DynamicVariablesBuilder._compute_nikita_energy"],["ConversationsPage.__init__","EventGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PreferenceConfigurator.__init__"],["ScoreHistoryRepository.__init__","LayerComposer.__init__"],["EngagementStateRepository.__init__","EngagementStateMachine.__init__"],["TestSessionDetector.test_detect_and_queue_skips_failed_marks","TestSessionDetector.mock_mark"],["EscalationManager.get_escalation_timeline","_get_time_in_level"],["ProfileRepository.__init__","MetaInstructionEngine.__init__"],["compose_emotional_state_layer","Layer4Computer.compose"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EvidenceCollector.__init__"],["RecoveryManager.check_recovery_complete","_check_clingy_recovery"],["ScoreCalculator.update_metrics","ScoreCalculator.clamp"],["DailySummaryRepository.__init__","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DashboardPage.__init__"],["UserRepository.update_onboarding_profile","_ChapterBehaviorsProxy.get"],["EngagementStateRepository.__init__","BackstoryGeneratorService.__init__"],["ClinginessDetector.detect","NeglectDetector._frequency_signal"],["TestContextPackagePopulation.mock_session_context","VoiceCallVerifier.__init__"],["LifeEvent.model_dump_for_db","VerificationReport.to_dict"],["TestMoodDerivation.mock_session_context","OTPVerificationHandler.__init__"],["TestRateLimiter.test_ac_t024_2_tracks_per_minute_and_per_day_limits","mock_incr"],["TestMoodDerivation.mock_session_context","TemplateGenerator.__init__"],["ResponseDelivery.queue","ResponseDelivery._wait_with_typing"],["ScoreHistoryRepository.__init__","MetaInstructionEngine.__init__"],["NarrativeArcManager.maybe_resolve_arcs","LifeSimulator.get_active_arcs"],["ConversationsE2ETest.get_verification_instructions","step1_navigate_command"],["StateComputer.compute","_apply_relationship_modifier"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step1_navigate_command"],["PostProcessingPipeline._run_life_simulation","ProcessingStep.mark_completed"],["ConversationsPage.__init__","DailySummaryRepository.__init__"],["NikitaThoughtRepository.__init__","PendingRegistrationRepository.__init__"],["PostProcessingPipeline.process","_run_touchpoint_scheduling"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_cleanup_instructions"],["ConversationThreadRepository.__init__","PortalLoginE2ETest.__init__"],["MissingVariableError.__init__","__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MetaNikitaConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserNotFoundError.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StateStore.__init__"],["DashboardPage.__init__","TriggerDetector.__init__"],["RateLimiter.__init__","TouchpointStore.get"],["EngagementStateRepository.__init__","SkipDecision.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_score_history"],["UserMetricsRepository.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictStore.__init__"],["UserMetricsRepository.__init__","ConflictGenerator.__init__"],["VoiceService.initiate_call","_generate_session_id"],["LoginPage.__init__","RateLimiter.__init__"],["ConversationsPage.__init__","ConversationsPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Layer3Composer.__init__"],["create_pending_sql","SupabaseHelper.sql_create_pending"],["OnboardingStateRepository.add_answer","UserRepository.get"],["VicePreferenceRepository.__init__","ResponseDelivery.__init__"],["GeneratedPromptRepository.__init__","PendingRegistrationRepository.__init__"],["UserMetricsRepository.__init__","MockMappings.__init__"],["ConversationConfigBuilder.build_config","_generate_system_prompt"],["MissingVariableError.__init__","UserRepository.__init__"],["Layer3Composer.describe_state","Layer3Composer._describe_intimacy"],["ConversationThreadRepository.__init__","PackageStore.__init__"],["ConversationRepository.__init__","__init__"],["TestLayer3RelationshipState.test_layer3_game_over_status","TestLayer2CurrentMoment._create_context"],["UserMetricsRepository.__init__","BreakupManager.__init__"],["ConflictStore.count_consecutive_unresolved_crises","get_user_conflicts"],["BreakupManager.get_relationship_status","check_threshold"],["MissingVariableError.__init__","TestContextPackagePopulation.__init__"],["UserRepository.__init__","ConversationsPage.__init__"],["UserMetricsRepository.__init__","VoiceService.__init__"],["LoginPage.__init__","MockResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EngagementStateRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RateLimiter.__init__"],["UserMetricsRepository.__init__","EntityManager.__init__"],["TestContextPackagePopulation.mock_session_context","ViceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TTSConfigService.__init__"],["OnboardingStateRepository.update_step","UserRepository.get"],["ProfileRepository.__init__","EngagementStateMachine.__init__"],["PostProcessingPipeline._run_layer_composition","mark_failed"],["JobExecutionRepository.__init__","StateStore.__init__"],["DashboardPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["UserRepository.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","JourneyReport.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NarrativeArcManager.__init__"],["DashboardPage.__init__","ScoreCalculator.__init__"],["ProfileRepository.__init__","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VicePreferenceRepository.__init__"],["VicePreferenceRepository.__init__","LifeSimulator.__init__"],["TestWebhookHandler.test_extracts_session_metadata","create_webhook_signature"],["NikitaThoughtRepository.__init__","TokenCounter.__init__"],["UserNotFoundError.__init__","ScoringService.__init__"],["ScoreHistoryRepository.__init__","EngagementStateMachine.__init__"],["EmojiProcessor.process","EmojiProcessor._validate_existing_emojis"],["ConversationThreadRepository.__init__","VoiceSessionManager.__init__"],["VicePreferenceRepository.__init__","CommandHandler.__init__"],["TestMemoryContextLoading.test_multi_graph_parallel_query_pattern","TestMemoryContextLoading.mock_search_memory"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OTPVerificationHandler.__init__"],["ConversationRepository.__init__","UserRepository.__init__"],["MessageHandler.handle","_handle_boss_response"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TemplateGenerator.__init__"],["TelegramWebhookSimulator.send_message","TelegramWebhookSimulator._build_update"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenCounter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenValidator.__init__"],["EngagementStateRepository.__init__","EventGenerator.__init__"],["ScoreHistoryRepository.__init__","BackstoryGeneratorService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockMappings.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreHistoryRepository.__init__"],["ConversationRepository.__init__","TestContextPackagePopulation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GraphUpdater.__init__"],["TestMoodDerivation.mock_session_context","NarrativeArcManager.__init__"],["TextPatternProcessor.process","EmojiProcessor.process"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PreferenceConfigurator.__init__"],["ConversationThreadRepository.__init__","MessageGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DecayCalculator.__init__"],["_create_nikita_agent","recall_memory"],["UserMetricsRepository.__init__","ExperimentLoader.__init__"],["DashboardPage.__init__","ConflictGenerator.__init__"],["TestMoodDerivation.mock_session_context","OnboardingStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BreakupManager.__init__"],["ConversationThreadRepository.__init__","ConversationThreadRepository.__init__"],["BaseRepository.update","BaseRepository.create"],["ConflictGenerator.generate","_calculate_severity"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InboundCallHandler.__init__"],["UserNotFoundError.__init__","ConversationRepository.__init__"],["ProfileRepository.__init__","SkipDecision.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramBot.__init__"],["EngagementStateRepository.__init__","DailySummaryRepository.__init__"],["NarrativeArcManager.maybe_create_arc","EventStore.get_active_arcs"],["UserNotFoundError.__init__","TestVicePreferenceRepositoryExtras.__init__"],["PromptLoader.render","_substitute_variables"],["generate_first_nikita_message","ConflictGenerator.generate"],["TelegramWebhookSimulator._build_message","_build_user"],["MetaPromptService._load_context","_load_memory_context"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Layer3Composer.__init__"],["NikitaThoughtRepository.__init__","UserNotFoundError.__init__"],["OnboardingHandler.resume","has_incomplete_onboarding"],["DashboardPage.__init__","VoiceAgentConfig.__init__"],["GeneratedPromptRepository.__init__","OTPFlowE2ETest.__init__"],["DashboardPage.__init__","VoiceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageHandler.__init__"],["TestLayer3RelationshipState.test_layer3_score_trend_variations","TestLayer3RelationshipState._create_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Layer5Injector.__init__"],["ConversationThreadRepository.__init__","TouchpointScheduler.__init__"],["MetaPromptService._load_context","MetaPromptService._compute_nikita_mood"],["DashboardPage.__init__","EntityManager.__init__"],["ConversationThreadRepository.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserNotFoundError.__init__"],["VicePreferenceRepository.__init__","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","ConflictStore.__init__"],["TelegramAuth.verify_magic_link","TelegramAuth.verify_otp_code"],["ConversationThreadRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockResult.__init__"],["NeglectDetector.detect","NeglectDetector._abrupt_ending_signal"],["EntityManager.entity_exists","entity_exists"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PostProcessingPipeline.__init__"],["TestLayer6ResponseGuidelines.test_layer6_gap_based_adjustments","TestLayer3RelationshipState._create_context"],["NikitaThoughtRepository.__init__","InMemoryCache.__init__"],["TestContextPackagePopulation.mock_session_context","BaseRepository.__init__"],["BackstoryRepository.__init__","BackstoryRepository.__init__"],["ConflictGenerator.generate","_prioritize_triggers"],["main","generate_report"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PromptLoader.__init__"],["EvidenceCollector.print_summary","EvidenceCollector.generate_report"],["EngagementStateRepository.__init__","ConversationsPage.__init__"],["NikitaThoughtRepository.__init__","StrategicSilence.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TTSConfigService.__init__"],["MissingVariableError.__init__","EngagementStateRepository.__init__"],["PostProcessingPipeline._run_graph_update","ProcessingStep.mark_running"],["BackstoryRepository.__init__","NikitaThoughtRepository.__init__"],["NeglectDetector.detect","_abrupt_ending_signal"],["compose_hierarchical_prompt","Layer4Computer.compose"],["TemplateGenerator.generate_prompt_legacy","TemplateGenerator._load_context"],["PromptLoader._substitute_variables","_get_nested_value"],["MessageSplitter._force_split","split"],["DashboardPage.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictDetector.__init__"],["TestMoodDerivation.mock_session_context","PromptLoader.__init__"],["JobExecutionRepository.__init__","Layer3Composer.__init__"],["NikitaThoughtRepository.__init__","Layer4Computer.__init__"],["GeneratedPromptRepository.__init__","ConflictStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenValidator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceCallScorer.__init__"],["UserRepository.set_boss_fight_status","UserRepository.get"],["BaseRepository.delete_by_id","PackageStore.get"],["UserMetricsRepository.__init__","TestVicePreferenceRepository.__init__"],["StateStore.get_state_history","StateStore._row_to_state"],["ProfileRepository.__init__","EventGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BackstoryRepository.__init__"],["TestNikitaThoughtRepository.test_expire_missing_him_thoughts_marks_used","mock_get_active"],["UserMetricsRepository.__init__","JobExecutionRepository.__init__"],["GeneratedPromptRepository.__init__","InMemoryCache.__init__"],["MessageHandler._needs_onboarding","OTPVerificationHandler._offer_onboarding_choice"],["VicePreferenceRepository.__init__","ConversationsE2ETest.__init__"],["Layer4Computer.detect_and_compose","compose"],["MissingVariableError.__init__","PreferenceConfigurator.__init__"],["VoiceService._load_context","_compute_nikita_mood"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationConfigBuilder.__init__"],["ConversationsPage.__init__","TelegramWebhookSimulator.__init__"],["Layer6Handler.retrieve_memory","Layer6Handler._get_memory_client"],["BackstoryRepository.create_from_scenario","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NarrativeArcManager.__init__"],["ConversationRepository.__init__","EngagementStateRepository.__init__"],["GeneratedPromptRepository.__init__","StrategicSilence.__init__"],["UserNotFoundError.__init__","Phase3Portal.__init__"],["TestLayer3RelationshipState.test_layer3_score_trend_variations","TestLayer6ResponseGuidelines._create_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MissingVariableError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramBot.__init__"],["ConflictStore.get_conflict_summary","ConflictStore.get_user_conflicts"],["JobExecutionRepository.__init__","TTSConfigService.__init__"],["ConversationsPage.__init__","ResponseDelivery.__init__"],["TestOTPFlowSteps.test_step2_email_submission","OTPFlowE2ETest.step1_send_start"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConfigLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OTPVerificationHandler.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_cleanup_instructions"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LengthAdjuster.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TemplateGenerator.__init__"],["ProfileRepository.__init__","DailySummaryRepository.__init__"],["EvidenceCollector.save_report","EvidenceCollector.log"],["NarrativeArcManager.maybe_resolve_arcs","check_arc_resolution"],["UserRepository.__init__","TelegramWebhookSimulator.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","BaseRepository.create"],["BackstoryRepository.__init__","HierarchicalPromptComposer.__init__"],["PostProcessingPipeline._run_layer_composition","ProcessingStep.mark_failed"],["NikitaThoughtRepository.__init__","InboundCallHandler.__init__"],["GeneratedPromptRepository.__init__","Layer4Computer.__init__"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._save_deferred_state"],["TestContextPackagePopulation.mock_session_context","Layer3Composer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GeneratedPromptRepository.__init__"],["DailySummaryRepository.__init__","RateLimiter.__init__"],["TestP2Security.test_sec4_xss_in_error_description_escaped","navigate_and_get_content"],["ConversationRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InboundCallHandler.__init__"],["run_manual_otp_test","OTPFlowE2ETest.step3_build_otp_search_query"],["JobExecutionRepository.__init__","TokenValidator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PostProcessingPipeline.__init__"],["BackstoryRepository.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","JobExecutionRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScheduledEventRepository.__init__"],["RateLimiter.get_remaining","RateLimiter._get_day_key"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RecoveryManager.__init__"],["ExperimentLoader._load_experiment_with_inheritance","_get_experiment_path"],["ProfileRepository.__init__","ConversationsPage.__init__"],["MessageHandler._needs_onboarding","_redirect_to_onboarding"],["TestContextPackagePopulation.mock_session_context","ProfileRepository.__init__"],["VoiceOnboardingFlow.process_phone_input","is_valid_phone"],["GeneratedPromptRepository.__init__","PortalLoginE2ETest.__init__"],["ConversationsPage.__init__","UserMetricsRepository.__init__"],["DashboardPage.__init__","TestVicePreferenceRepository.__init__"],["VicePreferenceRepository.__init__","MessageHandler.__init__"],["TestNikitaThoughtRepository.test_bulk_create_thoughts_creates_all","mock_create_thought"],["MetaPromptService._load_context","VoiceService._compute_nikita_mood"],["TestLayer4ConversationHistory.test_layer4_with_today_summaries","TestLayer4ConversationHistory._create_context_with_history"],["JobExecutionRepository.__init__","TelegramBot.__init__"],["UserRepository.increment_boss_attempts","_ChapterBehaviorsProxy.get"],["EscalationManager._check_natural_resolution","EscalationManager._get_time_in_level"],["ResponseDelivery.queue","ResponseDelivery._send_now"],["get_agent_id","get_agents_dict"],["ScoreHistoryRepository.__init__","ConversationsPage.__init__"],["LoginPage.__init__","_ProfileFromAnswers.__init__"],["LoginPage.__init__","JourneyReport.__init__"],["ProfileCollector.get_profile","ProfileCollector.get_profile"],["ScoreHistoryRepository.__init__","EscalationManager.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase2_instructions"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PromptLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Layer5Injector.__init__"],["get_pipeline_patches","create_mock_session_maker"],["TestContextPackagePopulation.mock_session_context","TokenValidator.__init__"],["UserRepository.__init__","UserMetricsRepository.__init__"],["OTPEmailParser.parse_otp_email","_extract_body"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DeliveryResult.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NikitaMemory.__init__"],["JobExecutionRepository.__init__","PostProcessingPipeline.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._compute_nikita_activity"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_past_grace_returns_decay_result","create_mock_user"],["GeneratedPromptRepository.__init__","PackageStore.__init__"],["JobExecutionRepository.__init__","RecoveryManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MissingVariableError.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","WebhookTestData.create"],["VicePreferenceRepository.__init__","ConflictDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StateComputer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","_ProfileFromAnswers.__init__"],["TestMoodDerivation.mock_session_context","Layer5Injector.__init__"],["BackstoryRepository.create_from_scenario","create"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","JourneyReport.__init__"],["MissingVariableError.__init__","OTPVerificationHandler.__init__"],["VicePreferenceRepository.__init__","DatabaseRateLimiter.__init__"],["TestContextPackagePopulation.mock_session_context","TelegramBot.__init__"],["MissingVariableError.__init__","TemplateGenerator.__init__"],["MissingVariableError.__init__","TokenCounter.__init__"],["TestP1ErrorHandling.test_ep2_otp_disabled_shows_already_used","TestHelpers.navigate_and_get_content"],["EntityManager.get_colleagues","EventStore.get_entities_by_type"],["ConversationsPage.__init__","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","Layer1Loader.__init__"],["TestContextPackagePopulation.mock_session_context","EmojiProcessor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DashboardE2ETest.__init__"],["NikitaThoughtRepository.__init__","ResponseTimer.__init__"],["EngagementStateRepository.__init__","TelegramWebhookSimulator.__init__"],["get_nikita_agent_for_user","get_memory_client"],["TestWebhookPostProcessing.test_webhook_caches_prompt_for_next_call","TestWebhookPostProcessing.capture_cached_prompt"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointEngine.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GeneratedPromptRepository.__init__"],["UserNotFoundError.__init__","PunctuationProcessor.__init__"],["CallAvailability.is_available","get_availability_rate"],["TestTypingIndicators.test_no_periodic_typing_for_short_delays","TestTypingIndicators.mock_sleep"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NarrativeArcManager.__init__"],["ClinginessDetector._frequency_signal","StateComputer._clamp"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","FullJourneyOrchestrator.__init__"],["UserMetricsRepository.__init__","TelegramAuth.__init__"],["main","add_dynamic_variables"],["TokenValidator.truncate_layers","count_tokens"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingStateRepository.__init__"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_neo4j"],["MessageSplitter._split_at_markers","MessageSplitter.split"],["DecayProcessor.process_user","DecayProcessor.should_skip_user"],["EngagementStateRepository.__init__","ResponseDelivery.__init__"],["VoiceService._load_context","ServerToolHandler._compute_nikita_energy"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScheduledEventRepository.__init__"],["VicePreferenceRepository.__init__","DashboardPage.__init__"],["StateStore.get_state","_row_to_state"],["BreakupManager.check_and_process","BreakupManager.check_threshold"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","get_user_by_telegram_id"],["ConversationRepository.__init__","OTPVerificationHandler.__init__"],["UserMetricsRepository.__init__","LoginPage.__init__"],["ConversationThreadRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConversationRepository.__init__","TemplateGenerator.__init__"],["ConversationRepository.__init__","TokenCounter.__init__"],["compose_emotional_state_layer","HierarchicalPromptComposer.compose"],["ConversationThreadRepository.__init__","OnboardingHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LayerComposer.__init__"],["GeneratedPromptRepository.__init__","ConversationThreadRepository.__init__"],["ConfigLoader.get_boss_threshold","ConfigLoader.get_chapter"],["JobExecutionRepository.__init__","MissingVariableError.__init__"],["PendingRegistrationRepository.get_email","OnboardingStateRepository.get"],["GeneratedPromptRepository.__init__","Layer1Loader.__init__"],["GeneratedPromptRepository.__init__","ResponseTimer.__init__"],["OnboardingStateRepository.get_or_create","BaseRepository.get"],["UserRepository.update_last_interaction","PackageStore.get"],["MissingVariableError.__init__","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VicePreferenceRepository.__init__"],["NikitaThoughtRepository.__init__","VenueCacheRepository.__init__"],["TestDecayProcessorProcessUser.test_process_user_logs_decay_event","create_mock_user"],["DashboardPage.__init__","FactExtractor.__init__"],["TestExtractionStage.test_stage_extraction_handles_parse_error","mock_meta_prompt_service"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictGenerator.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","store_impl"],["EventDeliveryHandler.deliver","_deliver_voice_event"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GmailMCPClient.__init__"],["UserRepository.update_score","BaseRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MetaInstructionEngine.__init__"],["TTSConfigService.get_final_settings","TTSConfigService._blend_settings"],["JobExecutionRepository.__init__","GeneratedPromptRepository.__init__"],["ProfileRepository.update_from_onboarding","GeneratedPromptRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ElevenLabsConversationsClient.__init__"],["UserMetricsRepository.__init__","Phase2Conversation.__init__"],["LifeSimulator.generate_next_day_events","LifeSimulator.get_active_arcs"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockMappings.__init__"],["EngagementStateRepository.__init__","UserMetricsRepository.__init__"],["LayerComposer.compose","LayerComposer._compute_emotional_state"],["GeneratedPromptRepository.__init__","TouchpointStore.__init__"],["HandoffManager.transition","FirstMessageGenerator.generate"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._get_conversation_config_override"],["TestP0CriticalConcurrency.test_cc1_double_click_returns_success_both_times","TestHelpers.navigate_and_get_content"],["VoiceService.initiate_call","VoiceService._build_dynamic_variables"],["JobExecutionRepository.__init__","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BreakupManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceService.__init__"],["LoginPage.__init__","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceService.__init__"],["LayerComposer.compose","_get_time_of_day"],["DashboardPage.__init__","TelegramAuth.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LoginPage.__init__"],["ConversationRepository.__init__","UserNotFoundError.__init__"],["NikitaThoughtRepository.__init__","DeliveryResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EntityManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MetaPromptService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Layer5Injector.__init__"],["EscalationManager.check_escalation","EscalationManager._get_time_in_level"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PromptLoader.__init__"],["GeneratedPromptRepository.__init__","VenueCacheRepository.__init__"],["SituationDetector._detect_situation_type","_is_morning"],["TestRateLimiter.test_multiple_users_isolated","mock_incr"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DeliveryResult.__init__"],["ProfileRepository.__init__","TelegramWebhookSimulator.__init__"],["ServerToolHandler._get_context","MetaPromptService._compute_nikita_activity"],["LifeSimulator.get_events_for_context","LifeSimulator._format_event"],["EventStore.get_events_for_date","EventStore._row_to_event"],["DashboardE2ETest.get_verification_instructions","step1_navigate_command"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step1_navigate_command"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","FullJourneyOrchestrator.__init__"],["_ChapterBehaviorsProxy.values","_load_chapter_behaviors"],["MissingVariableError.__init__","NarrativeArcManager.__init__"],["create_telegram_router","auth_confirm"],["TestContextPackagePopulation.mock_session_context","GeneratedPromptRepository.__init__"],["TextPatternProcessor.process","TextPatternProcessor._detect_context"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BackstoryRepository.__init__"],["TouchpointEngine.deliver_due_touchpoints","TouchpointEngine._deliver_single"],["SituationDetector._detect_situation_type","SituationDetector._is_morning"],["BossStateMachine.process_pass","BossStateMachine._get_user_repo"],["MetaPromptService.generate_daily_summary","VoiceService._load_context"],["ProfileRepository.get_by_user_id","UserRepository.get"],["RecoveryManager.apply_recovery","RecoveryManager.can_recover"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_sets_decay_reason","create_mock_user"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BasePage.__init__"],["VicePreferenceRepository.__init__","StateComputer.__init__"],["UserMetricsRepository.__init__","ResolutionManager.__init__"],["MissingVariableError.__init__","OnboardingStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase2Conversation.__init__"],["ScoreHistoryRepository.__init__","TelegramWebhookSimulator.__init__"],["ConversationsPage.__init__","MessageHandler.__init__"],["ConversationThreadRepository.__init__","Phase3Portal.__init__"],["BackstoryRepository.__init__","__init__"],["PendingRegistrationRepository.get_email","PendingRegistrationRepository.get"],["MessageHandler.handle","OnboardingHandler.handle"],["ViceAnalyzer.analyze_exchange","ViceAnalyzer._analyze_with_llm"],["ConversationConfigBuilder._generate_fallback_prompt","ConversationConfigBuilder._get_relationship_score"],["EngagementStateRepository.__init__","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","TouchpointEngine.__init__"],["TestContextPackagePopulation.mock_session_context","ScheduledEventRepository.__init__"],["EventDeliveryHandler.deliver","_mark_delivered"],["LoginPage.build_login_sequence","js_wait_for_magic_link_sent"],["UserMetricsRepository.__init__","VenueResearchService.__init__"],["DailySummaryRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ExperimentLoader.__init__"],["_ChapterBehaviorsProxy.__getitem__","_load_chapter_behaviors"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointEngine.__init__"],["UserNotFoundError.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RateLimiter.__init__"],["TestLifeSimulationStep.test_life_simulation_error_does_not_fail_pipeline","get_pipeline_patches"],["UserNotFoundError.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConfigLoader.__init__"],["main","call_backend"],["get_signed_url","VoiceService.initiate_call"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EvidenceCollector.__init__"],["BossStateMachine.process_outcome","process_fail"],["MissingVariableError.__init__","InboundCallHandler.__init__"],["ConversationRepository.__init__","NarrativeArcManager.__init__"],["PostProcessingPipeline._run_graph_update","mark_failed"],["BackstoryRepository.__init__","UserRepository.__init__"],["ConversationRepository.__init__","OnboardingStateRepository.__init__"],["EntityManager.entity_exists","EntityManager.entity_exists"],["DashboardPage.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InstructionSelector.__init__"],["DailySummaryRepository.__init__","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","PortalLoginE2ETest.get_complete_flow_instructions"],["DailySummaryRepository.__init__","JourneyReport.__init__"],["JobExecutionRepository.__init__","FullJourneyOrchestrator.__init__"],["ElevenLabsConversationsClient.list_conversations","ElevenLabsConversationsClient._headers"],["ConversationsPage.__init__","ConflictDetector.__init__"],["UserRepository.__init__","ScoreAnalyzer.__init__"],["LoginPage.__init__","Phase4GameState.__init__"],["ProfileRepository.__init__","UserMetricsRepository.__init__"],["DashboardPage.__init__","SessionDetector.__init__"],["_ChapterBehaviorsProxy.keys","keys"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SupabaseHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResolutionManager.__init__"],["UserMetricsRepository.__init__","MoodCalculator.__init__"],["PostProcessingPipeline._run_touchpoint_scheduling","mark_running"],["UserRepository.update_onboarding_status","_ChapterBehaviorsProxy.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VenueResearchService.__init__"],["ScoreHistoryRepository.__init__","UserMetricsRepository.__init__"],["ViceBoundaryEnforcer.apply_cap","ViceBoundaryEnforcer.max_intensity_for_chapter"],["ElevenLabsConversationsClient.save_transcript_to_file","ElevenLabsConversationsClient.get_conversation"],["VoiceAgentConfig.get_agent_config","InboundCallHandler._get_first_message"],["VoiceOnboardingFlow.initiate_onboarding_call","_update_onboarding_status"],["VicePreferenceRepository.__init__","GmailMCPClient.__init__"],["BreakupManager.check_and_process","BossStateMachine.check_threshold"],["ConversationRepository.__init__","InboundCallHandler.__init__"],["UserNotFoundError.__init__","TestDailySummaryRepositoryExtras.__init__"],["PostProcessingPipeline._run_emotional_state_update","mark_running"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MetaPromptService.__init__"],["VoiceService.initiate_call","_get_first_message"],["SessionDetector.detect_and_queue","get_stale_sessions"],["MissingVariableError.__init__","PromptLoader.__init__"],["UserNotFoundError.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceOnboardingFlow.__init__"],["ConversationsPage.__init__","ServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase4GameState.__init__"],["ConflictDetector.check_escalation","ConflictDetector._can_transition"],["NikitaThoughtRepository.__init__","ScoringService.__init__"],["TestContextPackagePopulation.mock_session_context","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EventStore.__init__"],["NikitaThoughtRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","JobExecutionRepository.__init__"],["BreakupManager.trigger_breakup","_get_breakup_message"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PostProcessor.__init__"],["UserRepository.__init__","ServerToolHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Layer5Injector.__init__"],["NarrativeArcManager.maybe_resolve_arcs","get_active_arcs"],["OnboardingHandler.handle","_is_skip_request"],["TestTemplateGeneratorBasics.test_generate_prompt_returns_string","mock_meta_prompt_service"],["CalibrationCalculator.compute","CalibrationCalculator._frequency_component"],["ViceAnalyzer.analyze_exchange","_convert_llm_signals"],["ConversationRepository.__init__","PromptLoader.__init__"],["UserMetricsRepository.calculate_composite","get_by_user_id"],["NikitaThoughtRepository.__init__","ConversationRepository.__init__"],["detect_stale_sessions","detect_and_queue"],["Layer4Computer.detect_and_compose","LayerComposer.compose"],["TouchpointStore.get_user_touchpoints","_to_pydantic"],["VicePreferenceRepository.__init__","BackstoryRepository.__init__"],["ConversationThreadRepository.__init__","PunctuationProcessor.__init__"],["JobExecutionRepository.__init__","MetaPromptService.__init__"],["BackstoryRepository.create_from_scenario","BaseRepository.get"],["TestLayer3RelationshipState.test_layer3_chapter_variations","_create_context"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DashboardE2ETest.__init__"],["UserMetricsRepository.__init__","DecayProcessor.__init__"],["EngagementStateRepository.__init__","MessageHandler.__init__"],["GeneratedPromptRepository.__init__","ScoringService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingServerToolHandler.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","BaseRepository.create"],["DashboardPage.__init__","MoodCalculator.__init__"],["UserNotFoundError.__init__","VoiceAgentConfig.__init__"],["TestMemoryContextLoading.test_load_memory_context_graceful_degradation_no_graphiti","wrapped_method"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InstructionSelector.__init__"],["VoiceService.end_call","_load_user"],["GeneratedPromptRepository.__init__","ViceScorer.__init__"],["get_supabase_client","_get_supabase_sync_client"],["UserNotFoundError.__init__","EntityManager.__init__"],["ProfileRepository.create_profile","BackstoryRepository.create"],["NikitaThoughtRepository.__init__","EvidenceCollector.__init__"],["TestConversationsE2E.test_verification_instructions","DashboardE2ETest.get_verification_instructions"],["create_mock_session_maker","session_maker"],["VicePreferenceRepository.__init__","ConfigLoader.__init__"],["get_async_session","get_session_maker"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GraphUpdater.__init__"],["EntityManager.get_places","EventStore.get_entities_by_type"],["PackageStore.cleanup_expired","PendingRegistrationRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EvidenceCollector.__init__"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig._get_chapter_tts_settings"],["ElevenLabsConversationsClient.save_transcript_to_file","get_conversation"],["PostProcessingPipeline.process","_run_emotional_state_update"],["RateLimiter.get_remaining","BaseRepository.get"],["GeneratedPromptRepository.__init__","ConversationRepository.__init__"],["TestTimeoutFallback.test_timeout_fallback_includes_error_message","timeout_function"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageSplitter.__init__"],["DailySummaryRepository.__init__","BasePage.__init__"],["UserRepository.increment_boss_attempts","get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationConfigBuilder.__init__"],["_call_neediness_llm","_get_neediness_agent"],["MetaInstructionEngine.format_for_prompt","InstructionSet.format_for_prompt"],["EngagementStateRepository.__init__","ConflictDetector.__init__"],["ConversationsPage.__init__","StateComputer.__init__"],["OnboardingServerToolHandler.configure_preferences","_get_or_create_profile"],["LoginPage.__init__","LoginPage.__init__"],["get_nikita_agent_for_user","get_user_by_id"],["_ChapterBehaviorsProxy.get","UserRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RegistrationHandler.__init__"],["MetaPromptService.generate_daily_summary","MetaPromptService._load_context"],["TouchpointStore.delete","TouchpointStore.delete"],["Layer5Injector.inject","Layer5Injector._format_active_threads"],["JobExecutionRepository.__init__","InstructionSelector.__init__"],["BackstoryGeneratorService.generate_scenarios","BossJudgment._call_llm"],["TestMoodDerivation.mock_session_context","RateLimiter.__init__"],["PostProcessingPipeline._run_graph_update","ProcessingStep.mark_failed"],["SummaryGenerator.generate","SummaryGenerator._update_daily_summary"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockResult.__init__"],["DashboardPage.__init__","DecayProcessor.__init__"],["EngagementStateRepository.__init__","ServerToolHandler.__init__"],["MissingVariableError.__init__","Layer5Injector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","FactExtractor.__init__"],["MissingVariableError.__init__","DeliveryResult.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LoginPage.__init__"],["ServerToolHandler.handle","ServerToolHandler._get_context"],["VoiceOnboardingFlow._initiate_call","VoiceOnboardingFlow.initiate_onboarding_call"],["VicePreferenceRepository.__init__","GmailHelper.__init__"],["TranscriptManager.extract_facts","TranscriptManager._extract_facts_via_llm"],["OnboardingServerToolHandler.configure_preferences","_persist_profile_to_db"],["LoginPage.__init__","ScoreAnalyzer.__init__"],["DashboardPage.__init__","HandoffManager.__init__"],["TestMoodDerivation.mock_session_context","MockResult.__init__"],["TestP2EdgeCases.test_ec2_malformed_base64_in_jwt_returns_error","TestHelpers.navigate_and_get_content"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EscalationManager.__init__"],["TestContextPackagePopulation.mock_session_context","InstructionSelector.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_user_exists"],["MessageHandler.handle","OTPVerificationHandler.handle"],["UserMetricsRepository.update_metrics","UserMetricsRepository._clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramAuth.__init__"],["ConversationsPage.__init__","GmailMCPClient.__init__"],["ConversationRepository.__init__","Layer5Injector.__init__"],["StateStore.get_current_state","StateStore._row_to_state"],["MissingVariableError.__init__","TouchpointEngine.__init__"],["MoodCalculator.compute_from_event","MoodCalculator.compute_from_events"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._lookup_user_by_phone"],["ConversationThreadRepository.__init__","NikitaThoughtRepository.__init__"],["DailySummaryRepository.__init__","Phase4GameState.__init__"],["ConversationsPage.__init__","ElevenLabsConversationsClient.__init__"],["ConversationRepository.__init__","DeliveryResult.__init__"],["ConversationThreadRepository.__init__","TriggerDetector.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._evaluate_silence"],["PendingRegistrationRepository.cleanup_expired","OnboardingStateRepository.delete"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreAnalyzer.__init__"],["VicePreferenceRepository.__init__","DashboardE2ETest.__init__"],["ScoreHistoryRepository.__init__","ScoreAnalyzer.__init__"],["Layer5Injector.inject","Layer5Injector._format_life_events"],["Layer5Injector.inject","_format_relationship_events"],["PackageStore.cleanup_expired","TouchpointStore.delete"],["EmojiProcessor.validate_only","EmojiProcessor._validate_existing_emojis"],["validate_prompt","TokenValidator.validate"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LoginPage.__init__"],["SummaryGenerator.generate","_update_weekly_summary"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PendingRegistrationRepository.__init__"],["RateLimiter.check","RateLimiter._get_minute_key"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceSessionManager.__init__"],["DashboardPage.__init__","SummaryGenerator.__init__"],["ProfileRepository.__init__","ConflictDetector.__init__"],["ConversationsE2ETest.get_verification_instructions","step2_wait_js"],["NikitaThoughtRepository.__init__","GraphUpdater.__init__"],["ConversationsPage.__init__","ViceService.__init__"],["NikitaThoughtRepository.__init__","DecayCalculator.__init__"],["UserRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GraphUpdater.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RegistrationHandler.__init__"],["TestContextPackagePopulation.mock_session_context","Phase1Registration.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageGenerator.__init__"],["ConversationRepository.__init__","TouchpointEngine.__init__"],["StrategicSilence.apply_strategic_silence","StrategicSilence._compute_emotional_modifier"],["TestDashboardE2E.test_verification_instructions","get_verification_instructions"],["UserMetricsRepository.__init__","Layer6Handler.__init__"],["UserRepository.advance_chapter","PackageStore.get"],["TestContextPackagePopulation.mock_session_context","EventStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceAnalyzer.__init__"],["VicePreferenceRepository.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase2Conversation.__init__"],["UserRepository.__init__","ViceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RateLimiter.__init__"],["ProfileRepository.__init__","ServerToolHandler.__init__"],["ConflictGenerator.should_generate_conflict","_prioritize_triggers"],["EngagementStateRepository.__init__","StateComputer.__init__"],["ConversationThreadRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TelegramBot.send_message","escape_html"],["TouchpointStore.delete","PackageStore.delete"],["TestOTPFlowSteps.test_step1_start_command","OTPFlowE2ETest.step1_send_start"],["BackstoryRepository.__init__","OTPVerificationHandler.__init__"],["ConversationThreadRepository.__init__","ScoreCalculator.__init__"],["NarrativeArcManager.get_active_arcs","NarrativeArcManager.get_active_arcs"],["BackstoryRepository.__init__","TemplateGenerator.__init__"],["ConversationThreadRepository.__init__","HierarchicalPromptComposer.__init__"],["BackstoryRepository.__init__","TokenCounter.__init__"],["LoginPage.__init__","PostProcessor.__init__"],["GeneratedPromptRepository.__init__","DecayCalculator.__init__"],["ScoreHistoryRepository.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Layer2Composer.__init__"],["SummaryGenerator._update_daily_summary","SummaryGenerator._generate_summary_text"],["RecoveryManager.check_recovery_complete","_check_distant_recovery"],["ConversationsPage.__init__","ConfigLoader.__init__"],["PreferenceConfigurator.configure","PreferenceConfigurator.configure"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockResult.__init__"],["Layer6Handler.retrieve_memory","_get_memory_client"],["LifeSimulator.get_active_arcs","get_active_arcs"],["LayerComposer.compose","LayerComposer._hours_since"],["JobExecutionRepository.__init__","RegistrationHandler.__init__"],["UserNotFoundError.__init__","TestContextPackagePopulation.__init__"],["LoginPage.__init__","OnboardingServerToolHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Layer6Handler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PostProcessor.__init__"],["JobExecutionRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResolutionManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TemplateGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenCounter.__init__"],["BossStateMachine.trigger_boss","initiate_boss"],["VenueResearchService.create_venue_from_user_input","VenueResearchService._extract_vibe"],["TestContextPackagePopulation.mock_session_context","TestEventStore.__aexit__"],["ConversationsPage.__init__","BaseRepository.__init__"],["VenueResearchService.research_venues","_parse_search_results"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VenueResearchService.__init__"],["BaseRepository.update","_ChapterBehaviorsProxy.get"],["ConversationsPage.__init__","SupabaseHelper.__init__"],["mock_text_patterns","passthrough"],["TestSessionDetector.test_detect_and_queue_marks_all_found","TestSessionDetector.mock_mark"],["NikitaMemory.search_memory","_get_group_id"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceSessionManager.__init__"],["BackstoryRepository.__init__","UserNotFoundError.__init__"],["InboundCallHandler._get_conversation_config_override","InboundCallHandler._generate_fallback_prompt"],["InboundCallHandler._get_conversation_config_override","_generate_fallback_prompt"],["EntityManager.get_entities_by_type","get_entities_by_type"],["ConversationThreadRepository.__init__","VoiceAgentConfig.__init__"],["VoiceEventScheduler.schedule_voice_call","VoiceEventScheduler._create_event"],["EngagementStateRepository.__init__","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingServerToolHandler.__init__"],["VenueResearchService.research_venues","VenueResearchService._parse_search_results"],["BackstoryRepository.__init__","ConflictStore.__init__"],["GeneratedPromptRepository.__init__","PunctuationProcessor.__init__"],["EngagementStateRepository.__init__","ElevenLabsConversationsClient.__init__"],["TouchpointStore.create","_to_pydantic"],["UserNotFoundError.__init__","FactExtractor.__init__"],["TranscriptManager.extract_facts","_extract_facts_via_llm"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","CommandHandler.__init__"],["UserRepository.__init__","BaseRepository.__init__"],["MissingVariableError.__init__","EvidenceCollector.__init__"],["ConversationsPage.__init__","VoiceOnboardingFlow.__init__"],["UserRepository.__init__","SupabaseHelper.__init__"],["VoiceService._load_context","VoiceService._compute_nikita_energy"],["LoginPage.__init__","VoiceCallVerifier.__init__"],["PostProcessingPipeline._run_touchpoint_scheduling","ConversationRepository.mark_failed"],["NikitaThoughtRepository.__init__","LengthAdjuster.__init__"],["PostProcessingPipeline._run_emotional_state_update","TouchpointStore.mark_failed"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BasePage.__init__"],["VoiceOnboardingFlow.resume_onboarding","get_ready_confirmation_message"],["EngagementStateRepository.__init__","ViceService.__init__"],["ProfileRepository.__init__","StateComputer.__init__"],["TestLayer5KnowledgeInnerLife.test_layer5_with_user_facts","TestLayer5KnowledgeInnerLife._create_context_with_knowledge"],["PostProcessingPipeline._run_emotional_state_update","ConversationRepository.mark_failed"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserNotFoundError.__init__"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser.extract_magic_link"],["UserRepository.increment_boss_attempts","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MoodCalculator.__init__"],["UserRepository.__init__","VoiceOnboardingFlow.__init__"],["VicePreferenceRepository.__init__","__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictStore.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._compute_nikita_energy"],["LayerComposer.compose","_get_week_summaries"],["HierarchicalPromptComposer.compose","Layer3Composer.compose"],["TokenCounter.__init__","_get_encoder"],["VoiceService._load_context","MetaPromptService._compute_nikita_energy"],["NarrativeArcManager.maybe_resolve_arcs","EventStore.get_active_arcs"],["JobExecutionRepository.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","JourneyReport.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InMemoryCache.__init__"],["TelegramWebhookSimulator._build_update","TelegramWebhookSimulator._next_update_id"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceCallVerifier.__init__"],["OnboardingHandler.handle","_handle_venue_research_step"],["ConversationRepository.__init__","EvidenceCollector.__init__"],["TestConversationsE2E.test_empty_conversations","ConversationsE2ETest.step3_process_data"],["main","JourneyReport.print_section"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VicePreferenceRepository.__init__"],["CalibrationCalculator._content_component","UserMetricsRepository._clamp"],["DailySummaryRepository.__init__","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StrategicSilence.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RateLimiter.__init__"],["Layer3Composer.compose","Layer3Composer._get_mood_label"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResponseDelivery.__init__"],["UserRepository.update_game_status","OnboardingStateRepository.get"],["BaseRepository.get","_ChapterBehaviorsProxy.get"],["ConversationsPage.__init__","DashboardE2ETest.__init__"],["GeneratedPromptRepository.__init__","LengthAdjuster.__init__"],["JobExecutionRepository.__init__","MessageGenerator.__init__"],["BaseRepository.update","WebhookTestData.create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockMappings.__init__"],["UserNotFoundError.__init__","EngagementStateRepository.__init__"],["TestMoodDerivation.mock_session_context","JourneyReport.__init__"],["DashboardPage.__init__","ScoreHistoryRepository.__init__"],["TelegramWebhookSimulator.send_message","_build_headers"],["UserRepository.is_onboarded","UserRepository.get"],["TestLayer6ResponseGuidelines.test_layer6_time_based_adjustments","TestLayer2CurrentMoment._create_context"],["VoiceOnboardingFlow.handle_onboard_command","is_already_onboarded"],["TestMoodDerivation.mock_session_context","VicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BreakupManager.__init__"],["PackageStore.exists","OnboardingStateRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockResult.__init__"],["TestEventStore.mock_session_factory","TestEventStore.__aexit__"],["BackstoryRepository.__init__","InboundCallHandler.__init__"],["ConversationsPage.__init__","ProfileRepository.__init__"],["VoiceSessionManager.attempt_recovery","VoiceSessionManager.finalize_session"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TTSConfigService.__init__"],["EntityManager.get_friends","get_entities_by_type"],["TestContextPackagePopulation.mock_session_context","VoiceSessionManager.__init__"],["TestMoodDerivation.mock_session_context","MockMappings.__init__"],["ProfileRepository.__init__","GmailMCPClient.__init__"],["DecayProcessor.process_user","_handle_game_over"],["extract_magic_link_from_html","_extract_magic_link"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LifeSimulator.__init__"],["ConversationsPage.__init__","MessageSplitter.__init__"],["ProfileRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase4GameState.__init__"],["ScoreCard","getScoreColor"],["TestMoodDerivation.mock_session_context","TestEventStore.__aenter__"],["VoiceOnboardingFlow.is_already_onboarded","_get_user_onboarding_status"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DecayProcessor.__init__"],["mock_session_factory","factory"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.collect_profile"],["UserNotFoundError.__init__","PreferenceConfigurator.__init__"],["EngagementStateRepository.__init__","BaseRepository.__init__"],["UserNotFoundError.__init__","TranscriptManager.__init__"],["BaseRepository.delete_by_id","PendingRegistrationRepository.delete"],["UserMetricsRepository.__init__","ProfileCollector.__init__"],["TestContextPackagePopulation.mock_session_context","MessageGenerator.__init__"],["EngagementStateRepository.__init__","SupabaseHelper.__init__"],["UserRepository.__init__","ProfileRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationsE2ETest.__init__"],["ScoreHistoryRepository.__init__","ElevenLabsConversationsClient.__init__"],["InboundCallHandler._generate_fallback_prompt","_get_relationship_score"],["UserNotFoundError.__init__","SessionDetector.__init__"],["ProfileRepository.__init__","ViceService.__init__"],["MetaPromptService.generate_system_prompt","_log_prompt"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","HandoffManager.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","ElevenLabsConversationsClient.get_conversation"],["RateLimiter.__init__","BaseRepository.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InboundCallHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ExperimentLoader.__init__"],["GeneratedPromptRepository.__init__","TriggerDetector.__init__"],["PostProcessingPipeline._run_summary_generation","mark_completed"],["BackstoryRepository.__init__","PromptLoader.__init__"],["ElevenLabsConversationsClient.get_agent_config","_headers"],["MissingVariableError.__init__","GraphUpdater.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PendingRegistrationRepository.__init__"],["VoiceOnboardingFlow.resume_onboarding","VoiceOnboardingFlow.get_ready_confirmation_message"],["ScoreHistoryRepository.__init__","ViceService.__init__"],["EngagementStateRepository.__init__","VoiceOnboardingFlow.__init__"],["ConversationConfigBuilder._generate_system_prompt","ConversationConfigBuilder._generate_fallback_prompt"],["UserRepository.update_game_status","PendingRegistrationRepository.get"],["UserMetricsRepository.__init__","TextPatternProcessor.__init__"],["DailySummaryRepository.__init__","PostProcessor.__init__"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.resolve_arc"],["TestPostProcessorBasics.test_process_conversation_full_pipeline_success","mock_meta_prompt_service"],["TestContextPackagePopulation.mock_session_context","TouchpointScheduler.__init__"],["InboundCallHandler.handle_incoming_call","VoiceService._generate_signed_token"],["JobExecutionRepository.__init__","LifeSimulator.__init__"],["LoginPage.__init__","StateStore.__init__"],["MissingVariableError.__init__","RateLimiter.__init__"],["TestContextPackagePopulation.mock_session_context","TestDailySummaryRepositoryContextEngineering.__init__"],["ConversationsPage.__init__","EmojiProcessor.__init__"],["JobExecutionRepository.__init__","CommandHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MetaNikitaConfig.__init__"],["DashboardPage.__init__","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ProfileCollector.__init__"],["PackageStore.exists","PendingRegistrationRepository.get"],["InMemoryCache.get","get"],["MessageHandler._score_and_check_boss","_send_boss_opening"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestVicePreferenceRepositoryExtras.__init__"],["DailySummaryRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PromptLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PostProcessingPipeline.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","JourneyReport.__init__"],["DashboardPage.__init__","ConversationConfigBuilder.__init__"],["ConversationRepository.__init__","GraphUpdater.__init__"],["NikitaThoughtRepository.__init__","ConflictGenerator.__init__"],["OnboardingStateRepository.delete","PendingRegistrationRepository.delete"],["BackstoryRepository.__init__","Layer1Loader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RecoveryManager.__init__"],["TouchpointScheduler.evaluate_user","_can_trigger_after_recent"],["BackstoryRepository.__init__","ResponseTimer.__init__"],["UserRepository.__init__","EmojiProcessor.__init__"],["MissingVariableError.__init__","MockResult.__init__"],["MetaPromptService._load_context","ServerToolHandler._compute_nikita_mood"],["GeneratedPromptRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["RecoveryManager.can_recover","RecoveryManager.can_recover"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StateStore.__init__"],["DashboardE2ETest.get_verification_instructions","step3_extract_all_js"],["ConversationThreadRepository.__init__","UserRepository.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","WebhookTestData.create"],["EngagementStateRepository.__init__","DashboardE2ETest.__init__"],["NikitaThoughtRepository.__init__","MockMappings.__init__"],["MessageHandler.handle","_is_new_day"],["GeneratedPromptRepository.__init__","ScoreCalculator.__init__"],["PostProcessingPipeline._run_summary_generation","ProcessingStep.mark_completed"],["add_pipeline_trigger_to_background_tasks","is_pipeline_enabled"],["ConversationRepository.__init__","RateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TextPatternProcessor.__init__"],["TestMoodDerivation.mock_session_context","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockMappings.__init__"],["ConversationThreadRepository.__init__","TestContextPackagePopulation.__init__"],["NikitaThoughtRepository.__init__","BreakupManager.__init__"],["ProfileCollector.get_completeness_percentage","ViceScorer.get_profile"],["TouchpointStore.delete","delete"],["ProfileRepository.__init__","BaseRepository.__init__"],["NeglectDetector.detect","UserMetricsRepository._clamp"],["PreferenceConfigurator.to_dict","PreferenceConfigurator.get_preferences"],["BackstoryGeneratorService.process_custom_backstory","ScoreAnalyzer._call_llm"],["TestContextPackagePopulation.mock_session_context","CommandHandler.__init__"],["NikitaThoughtRepository.__init__","VoiceService.__init__"],["ProfileRepository.__init__","SupabaseHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BreakupManager.__init__"],["NikitaThoughtRepository.__init__","EntityManager.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","get_conversation"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationsE2ETest.__init__"],["VoiceService.initiate_call","_generate_signed_token"],["JobExecutionRepository.__init__","MetaNikitaConfig.__init__"],["BaseRepository.delete_by_id","TouchpointStore.delete"],["EngagementStateRepository.__init__","ProfileRepository.__init__"],["EvidenceCollector.save_report","_ensure_dirs"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestVicePreferenceRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Layer1Loader.__init__"],["UserMetricsRepository.__init__","TestUserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","ConflictGenerator.__init__"],["DailySummaryRepository.__init__","VoiceCallVerifier.__init__"],["TestDecayProcessorProcessUser.test_process_user_applies_decay_when_overdue","create_mock_user"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","JobExecutionRepository.__init__"],["ScoreHistoryRepository.__init__","BaseRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResponseTimer.__init__"],["EvidenceCollector.end_phase","EvidenceCollector.log"],["UserNotFoundError.__init__","OTPVerificationHandler.__init__"],["EngagementStateRepository.__init__","MessageSplitter.__init__"],["ConversationRepository.__init__","MockResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NikitaMemory.__init__"],["ScoreHistoryRepository.__init__","SupabaseHelper.__init__"],["UserRepository.update_onboarding_profile","OnboardingStateRepository.get"],["UserMetricsRepository.__init__","TestMoodDerivation.__init__"],["VoiceCallVerifier.verify_all","_verify_elevenlabs"],["MessageGenerator._load_template","MessageGenerator._get_default_template"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OTPFlowE2ETest.__init__"],["TestUIUX.test_error_page_has_instructions","TestHelpers.navigate_and_get_content"],["VoiceAgentConfig.get_agent_config","ConversationConfigBuilder._get_first_message"],["EventStore.get_events_by_domain","_row_to_event"],["ProfileRepository.__init__","VoiceOnboardingFlow.__init__"],["UserMetricsRepository.update_metrics","_clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MissingVariableError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DatabaseRateLimiter.__init__"],["TouchpointEngine._send_telegram_message","TouchpointEngine._get_chat_id"],["TestMoodDerivation.mock_session_context","JobExecutionRepository.__init__"],["BreakupManager.get_relationship_status","BossStateMachine.check_threshold"]],"deps":{"nikita/agents/voice/elevenlabs_client.py":["logging","dataclasses","datetime","enum","typing","httpx","nikita.agents.voice.models","nikita.config.settings"],"nikita/behavioral/detector.py":["logging","datetime","nikita.behavioral.models","uuid"],"nikita/behavioral/engine.py":["logging","datetime","typing","uuid","nikita.behavioral.detector","nikita.behavioral.models","nikita.behavioral.selector"],"nikita/behavioral/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/behavioral/selector.py":["logging","pathlib","typing","yaml","nikita.behavioral.models"],"nikita/conflicts/breakup.py":["datetime","enum","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store","nikita.conflicts.models","random","random"],"nikita/conflicts/detector.py":["datetime","enum","typing","pydantic","pydantic_ai","nikita.config.settings","nikita.conflicts.models","nikita.conflicts.store","uuid"],"nikita/conflicts/escalation.py":["random","datetime","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/generator.py":["datetime","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/models.py":["datetime","enum","typing","pydantic"],"nikita/conflicts/resolution.py":["datetime","enum","typing","pydantic","pydantic_ai","nikita.config.settings","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/store.py":["uuid","datetime","typing","sqlalchemy","sqlalchemy.ext.asyncio","nikita.conflicts.models"],"nikita/context/composer.py":["logging","datetime","uuid","nikita.context.layers.base_personality","nikita.context.layers.chapter","nikita.context.layers.emotional_state","nikita.context.layers.situation","nikita.context.package"],"nikita/context/layers/base_personality.py":["functools","logging","pathlib","typing","yaml"],"nikita/context/layers/chapter.py":["logging","typing"],"nikita/context/layers/context_injection.py":["logging","typing","nikita.context.package"],"nikita/context/layers/emotional_state.py":["logging","typing","nikita.context.package","nikita.emotional_state.models"],"nikita/context/layers/on_the_fly.py":["logging","re","dataclasses","enum","typing","uuid","nikita.memory.graphiti_client"],"nikita/context/layers/situation.py":["logging","datetime","enum","typing"],"nikita/context/package.py":["datetime","typing","uuid","pydantic"],"nikita/context/store.py":["logging","datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.context.package","nikita.db.models.context_package"],"nikita/context/validation.py":["logging","dataclasses","tiktoken"],"nikita/db/models/context_package.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/scheduled_touchpoint.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/emotional_state/computer.py":["logging","datetime","enum","typing","uuid","pydantic","nikita.emotional_state.models"],"nikita/emotional_state/conflict.py":["logging","datetime","typing","nikita.emotional_state.models"],"nikita/emotional_state/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/emotional_state/recovery.py":["logging","datetime","enum","typing","pydantic","nikita.emotional_state.models"],"nikita/emotional_state/store.py":["json","logging","collections.abc","datetime","typing","uuid","nikita.db.database","nikita.emotional_state.models"],"nikita/life_simulation/__init__.py":["nikita.life_simulation","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.store","nikita.life_simulation.store","nikita.life_simulation.entity_manager","nikita.life_simulation.entity_manager","nikita.life_simulation.event_generator","nikita.life_simulation.event_generator","nikita.life_simulation.narrative_manager","nikita.life_simulation.narrative_manager","nikita.life_simulation.simulator","nikita.life_simulation.simulator"],"nikita/life_simulation/entity_manager.py":["logging","functools","pathlib","typing","uuid","yaml","nikita.life_simulation.models","nikita.life_simulation.store"],"nikita/life_simulation/event_generator.py":["json","logging","datetime","typing","uuid","pydantic","nikita.life_simulation.models","nikita.life_simulation.entity_manager","pydantic_ai"],"nikita/life_simulation/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/life_simulation/mood_calculator.py":["logging","dataclasses","nikita.life_simulation.models"],"nikita/life_simulation/narrative_manager.py":["logging","random","datetime","typing","uuid","pydantic","nikita.life_simulation.models","nikita.life_simulation.store"],"nikita/life_simulation/simulator.py":["logging","datetime","typing","uuid","nikita.life_simulation.entity_manager","nikita.life_simulation.event_generator","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.narrative_manager","nikita.life_simulation.store"],"nikita/life_simulation/store.py":["logging","collections.abc","datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.database","nikita.life_simulation.models","json","json","json","json"],"nikita/onboarding/handoff.py":["logging","random","dataclasses","datetime","typing","uuid","nikita.onboarding.models","nikita.db.database","nikita.db.repositories.user_repository","nikita.db.database","nikita.db.repositories.user_repository","nikita.platforms.telegram.bot"],"nikita/onboarding/meta_nikita.py":["logging","dataclasses","typing","uuid"],"nikita/onboarding/models.py":["datetime","enum","typing","pydantic"],"nikita/onboarding/preference_config.py":["logging","dataclasses","typing","uuid","nikita.onboarding.models"],"nikita/onboarding/profile_collector.py":["logging","re","dataclasses","enum","typing","uuid","nikita.onboarding.models"],"nikita/onboarding/server_tools.py":["logging","typing","uuid","pydantic","sqlalchemy.ext.asyncio","nikita.db.database","nikita.db.repositories.user_repository","nikita.onboarding.models","nikita.onboarding.handoff"],"nikita/onboarding/voice_flow.py":["logging","re","dataclasses","typing","uuid","nikita.onboarding.meta_nikita","nikita.onboarding.models"],"nikita/post_processing/adapter.py":["logging","dataclasses","typing","uuid","sqlalchemy.ext.asyncio","nikita.db.repositories.conversation_repository","nikita.post_processing.pipeline"],"nikita/post_processing/graph_updater.py":["logging","collections.abc","uuid","nikita.memory.graphiti_client"],"nikita/post_processing/layer_composer.py":["logging","collections.abc","datetime","typing","uuid","nikita.context.layers","nikita.context.package","nikita.db.database","nikita.db.repositories.user_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.summary_repository","nikita.emotional_state","nikita.life_simulation.simulator","nikita.emotional_state"],"nikita/post_processing/pipeline.py":["logging","dataclasses","datetime","enum","typing","uuid","nikita.context.package","nikita.context.store","nikita.post_processing.graph_updater","nikita.post_processing.summary_generator","nikita.life_simulation.simulator","nikita.emotional_state","nikita.conflicts.generator","nikita.touchpoints.scheduler","nikita.post_processing.layer_composer","nikita.emotional_state","nikita.db.database","nikita.db.repositories.user_repository","datetime","nikita.conflicts.generator","nikita.conflicts.store","nikita.db.database","nikita.db.repositories.user_repository","nikita.db.database","nikita.db.repositories.user_repository"],"nikita/post_processing/summary_generator.py":["logging","collections.abc","datetime","decimal","typing","uuid","nikita.db.database","nikita.db.repositories.summary_repository","nikita.db.repositories.conversation_repository"],"nikita/post_processing/trigger.py":["logging","uuid","nikita.config.settings","nikita.post_processing.pipeline"],"nikita/text_patterns/emoji_processor.py":["random","re","typing","nikita.text_patterns.models"],"nikita/text_patterns/length_adjuster.py":["re","typing","nikita.text_patterns.models"],"nikita/text_patterns/message_splitter.py":["random","re","typing","nikita.text_patterns.models"],"nikita/text_patterns/models.py":["enum","typing","pydantic"],"nikita/text_patterns/processor.py":["re","typing","yaml","nikita.text_patterns.emoji_processor","nikita.text_patterns.length_adjuster","nikita.text_patterns.message_splitter","nikita.text_patterns.punctuation","nikita.text_patterns.models"],"nikita/text_patterns/punctuation.py":["random","re","typing","nikita.text_patterns.models"],"nikita/touchpoints/engine.py":["logging","datetime","typing","uuid","nikita.touchpoints.generator","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.silence","nikita.touchpoints.store","sqlalchemy.ext.asyncio","nikita.platforms.telegram.bot","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository"],"nikita/touchpoints/generator.py":["pathlib","typing","uuid","pydantic_ai","nikita.config.settings","nikita.touchpoints.models","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository"],"nikita/touchpoints/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/touchpoints/scheduler.py":["random","datetime","typing","uuid","nikita.touchpoints.models","zoneinfo"],"nikita/touchpoints/silence.py":["random","dataclasses","enum","typing"],"nikita/touchpoints/store.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.scheduled_touchpoint","nikita.touchpoints.models","uuid","sqlalchemy"],"portal/src/app/admin/prompts/page.tsx":["react","@/components/ui/card","@/components/ui/badge","@/components/ui/button","@/components/ui/input","@/hooks/use-admin-data"],"portal/src/app/admin/text/page.tsx":["react","@/components/ui/card","@/components/ui/badge","@/components/ui/button","@/components/ui/progress","@/hooks/use-admin-data"],"portal/src/app/admin/voice/page.tsx":["react","@/components/ui/card","@/components/ui/badge","@/components/ui/button","@/hooks/use-admin-data"],"portal/src/app/api/voice/[...slug]/route.ts":["next/server"],"portal/src/app/test/voice/page.tsx":["react","@elevenlabs/react","@/components/ui/card","@/components/ui/button","@/components/ui/badge"],"scripts/configure_meta_nikita_tools.py":["asyncio","json","os","sys","httpx"],"scripts/verify-voice-call.py":["argparse","asyncio","json","os","sys","dataclasses","datetime","pathlib","typing","nikita.db.database","sqlalchemy","datetime","sqlalchemy","sqlalchemy","sqlalchemy","sqlalchemy","nikita.memory.graphiti_client","nikita.agents.voice.elevenlabs_client","nikita.config.settings"],"tests/agents/voice/conftest.py":["datetime","typing","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.elevenlabs_client"],"tests/agents/voice/test_call_lifecycle_e2e.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.scoring","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.engine.scoring.models","hashlib","hmac","time","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.service"],"tests/agents/voice/test_prompt_persona_correctness.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.config","nikita.agents.voice.context","nikita.agents.voice.models"],"tests/agents/voice/test_scoring_pipeline_e2e.py":["decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.scoring","nikita.engine.scoring.models"],"tests/api/routes/test_admin_text.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug"],"tests/api/routes/test_admin_voice.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug"],"tests/behavioral/test_detection.py":["datetime","pytest","nikita.behavioral.detector","nikita.behavioral.models"],"tests/behavioral/test_engine.py":["datetime","unittest.mock","pytest","nikita.behavioral.detector","nikita.behavioral.engine","nikita.behavioral.models","nikita.behavioral.selector"],"tests/behavioral/test_integration.py":["datetime","unittest.mock","uuid","pytest","nikita.behavioral"],"tests/behavioral/test_models.py":["datetime","uuid","pytest","yaml","nikita.behavioral.models"],"tests/behavioral/test_selection.py":["pytest","nikita.behavioral.models","nikita.behavioral.selector"],"tests/conflicts/test_breakup.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.breakup","nikita.conflicts.store","nikita.conflicts.breakup"],"tests/conflicts/test_detection.py":["pytest","datetime","unittest.mock","nikita.conflicts.detector","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_escalation.py":["pytest","datetime","unittest.mock","nikita.conflicts.escalation","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_generation.py":["pytest","datetime","nikita.conflicts.generator","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_infrastructure.py":["pytest","datetime","pydantic","nikita.conflicts","nikita.conflicts.store","nikita","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_integration.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.store","nikita.conflicts.detector","nikita.conflicts.generator","nikita.conflicts.escalation","nikita.conflicts.resolution","nikita.conflicts.breakup"],"tests/conflicts/test_resolution.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.resolution","nikita.conflicts.store","nikita.conflicts.resolution","nikita.conflicts.resolution"],"tests/context/test_composer.py":["datetime","uuid","pytest","nikita.context.composer","nikita.context.package"],"tests/context/test_composer_integration.py":["datetime","unittest.mock","uuid","pytest","nikita.context","nikita.context.layers","nikita.context.package"],"tests/context/test_composer_performance.py":["statistics","time","datetime","uuid","pytest","nikita.context","nikita.context.layers","nikita.context.package","nikita.context.layers","nikita.context.layers","nikita.context.layers","nikita.context.layers"],"tests/context/test_layer1.py":["pathlib","pytest","nikita.context.layers.base_personality"],"tests/context/test_layer2.py":["pytest","nikita.context.layers.chapter"],"tests/context/test_layer3.py":["pytest","nikita.context.layers.emotional_state","nikita.context.package"],"tests/context/test_layer4.py":["datetime","enum","pytest","nikita.context.layers.situation"],"tests/context/test_layer5.py":["datetime","uuid","pytest","nikita.context.layers.context_injection","nikita.context.package"],"tests/context/test_layer6.py":["datetime","enum","unittest.mock","uuid","pytest","nikita.context.layers.on_the_fly"],"tests/context/test_package.py":["json","datetime","uuid","pytest","nikita.context.package"],"tests/context/test_store.py":["time","datetime","unittest.mock","uuid","pytest","nikita.context.package","nikita.context.store"],"tests/context/test_token_validator.py":["pytest","nikita.context.validation"],"tests/e2e/test_conversation_cycle.py":["datetime","unittest.mock","uuid","pytest","nikita.context.package","nikita.post_processing.pipeline","nikita.post_processing.trigger"],"tests/e2e/test_life_simulation_cycle.py":["datetime","unittest.mock","uuid","pytest","nikita.context.package","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.simulator","nikita.post_processing.layer_composer","nikita.post_processing.pipeline","nikita.life_simulation.mood_calculator","nikita.life_simulation.mood_calculator","nikita.life_simulation.mood_calculator"],"tests/emotional_state/test_computation.py":["datetime","uuid","pytest","nikita.emotional_state.computer","nikita.emotional_state.models","datetime"],"tests/emotional_state/test_conflict.py":["datetime","uuid","pytest","nikita.emotional_state.conflict","nikita.emotional_state.models"],"tests/emotional_state/test_integration.py":["pytest","datetime","unittest.mock","uuid","nikita.context.layers.emotional_state","nikita.context.package","nikita.emotional_state.models","nikita.post_processing.layer_composer","nikita.post_processing.layer_composer","nikita.emotional_state","nikita.life_simulation.models","nikita.post_processing.layer_composer","nikita.post_processing.layer_composer","nikita.db.models.user","nikita.post_processing.layer_composer","nikita.post_processing.layer_composer","nikita.life_simulation.models","nikita.post_processing.layer_composer","nikita.life_simulation.models","nikita.post_processing.layer_composer","nikita.life_simulation.models","nikita.post_processing.layer_composer","nikita.post_processing.layer_composer","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.context.layers.emotional_state","nikita.emotional_state.computer","nikita.emotional_state","nikita.emotional_state.computer","datetime","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state.recovery","nikita.emotional_state.recovery","nikita.emotional_state.recovery"],"tests/emotional_state/test_models.py":["datetime","uuid","pytest","pydantic","nikita.emotional_state.models"],"tests/emotional_state/test_recovery.py":["datetime","uuid","pytest","nikita.emotional_state.models","nikita.emotional_state.recovery"],"tests/emotional_state/test_store.py":["json","collections.abc","contextlib","datetime","typing","unittest.mock","uuid","pytest","nikita.emotional_state.models","nikita.emotional_state.store"],"tests/life_simulation/test_entity_manager.py":["unittest.mock","uuid","pytest","nikita.life_simulation.entity_manager","nikita.life_simulation.models","nikita.life_simulation.entity_manager"],"tests/life_simulation/test_event_generator.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.event_generator","nikita.life_simulation.models","nikita.life_simulation.models","nikita.life_simulation.event_generator"],"tests/life_simulation/test_integration.py":["datetime","unittest.mock","uuid","pytest","nikita.context.package","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.simulator","nikita.post_processing.layer_composer","nikita.post_processing.pipeline"],"tests/life_simulation/test_models.py":["datetime","uuid","pytest","pydantic","nikita.life_simulation.models"],"tests/life_simulation/test_mood_calculator.py":["datetime","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.mood_calculator"],"tests/life_simulation/test_narrative_manager.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.narrative_manager","nikita.life_simulation.narrative_manager"],"tests/life_simulation/test_quality.py":["collections","datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.narrative_manager","nikita.life_simulation.simulator","nikita.life_simulation.entity_manager"],"tests/life_simulation/test_simulator.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.simulator","nikita.life_simulation.simulator"],"tests/life_simulation/test_store.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.store","nikita.life_simulation.store"],"tests/onboarding/test_e2e.py":["asyncio","datetime","unittest.mock","uuid","pytest","nikita.onboarding.handoff","nikita.onboarding.models","nikita.onboarding.preference_config","nikita.onboarding.profile_collector","nikita.onboarding.server_tools","nikita.onboarding.voice_flow"],"tests/onboarding/test_handoff.py":["datetime","unittest.mock","uuid","pytest","nikita.onboarding.handoff","nikita.onboarding.models"],"tests/onboarding/test_infrastructure.py":["datetime","pytest","pydantic","nikita.onboarding","nikita.onboarding.models","nikita.onboarding","nikita.onboarding","nikita.onboarding"],"tests/onboarding/test_meta_nikita.py":["typing","uuid","pytest","nikita.onboarding.meta_nikita"],"tests/onboarding/test_preferences.py":["uuid","pytest","nikita.onboarding.models","nikita.onboarding.preference_config"],"tests/onboarding/test_profile_collection.py":["uuid","pytest","nikita.onboarding.models","nikita.onboarding.profile_collector"],"tests/onboarding/test_server_tools.py":["datetime","typing","unittest.mock","uuid","pytest","nikita.onboarding.models","nikita.onboarding.server_tools"],"tests/onboarding/test_telegram_flow.py":["unittest.mock","uuid","pytest","nikita.onboarding.models","nikita.onboarding.voice_flow"],"tests/post_processing/test_graph_updater.py":["unittest.mock","uuid","pytest","nikita.post_processing.graph_updater","nikita.post_processing.graph_updater"],"tests/post_processing/test_pipeline.py":["contextlib","datetime","decimal","unittest.mock","uuid","pytest","nikita.context.package","nikita.post_processing.pipeline","nikita.emotional_state","nikita.post_processing.pipeline","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state","nikita.emotional_state"],"tests/post_processing/test_trigger.py":["unittest.mock","uuid","pytest","nikita.post_processing.trigger"],"tests/text_patterns/test_emoji.py":["pytest","random","nikita.text_patterns.emoji_processor","nikita.text_patterns.models"],"tests/text_patterns/test_infrastructure.py":["pytest","pathlib","yaml","nikita.text_patterns.models","nikita.text_patterns"],"tests/text_patterns/test_integration.py":["pytest","unittest.mock","nikita.text_patterns.processor","nikita.text_patterns.models"],"tests/text_patterns/test_length.py":["pytest","nikita.text_patterns.length_adjuster","nikita.text_patterns.models"],"tests/text_patterns/test_punctuation.py":["pytest","random","nikita.text_patterns.punctuation","nikita.text_patterns.models"],"tests/text_patterns/test_splitting.py":["pytest","nikita.text_patterns.message_splitter","nikita.text_patterns.models"],"tests/touchpoints/test_delivery.py":["datetime","unittest.mock","uuid","pytest","nikita.touchpoints.engine","nikita.touchpoints.models","nikita.touchpoints.silence","nikita.touchpoints.engine","nikita.touchpoints"],"tests/touchpoints/test_e2e.py":["pytest","datetime","unittest.mock","uuid","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.silence","nikita.touchpoints.engine","nikita.touchpoints.models"],"tests/touchpoints/test_generation.py":["pathlib","unittest.mock","uuid","pytest","nikita.touchpoints.generator","nikita.touchpoints.models","nikita.touchpoints.generator","nikita.touchpoints.generator","nikita.touchpoints.generator","nikita.touchpoints"],"tests/touchpoints/test_infrastructure.py":["datetime","unittest.mock","uuid","pytest","nikita.touchpoints.models","nikita","nikita.touchpoints","nikita.touchpoints","nikita.touchpoints","nikita.touchpoints.store","nikita.touchpoints.models","nikita.touchpoints.store","nikita.db.models.scheduled_touchpoint"],"tests/touchpoints/test_scheduling.py":["random","datetime","unittest.mock","uuid","pytest","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.scheduler"],"tests/touchpoints/test_silence.py":["pytest","nikita.touchpoints.silence","nikita.touchpoints.silence"],"nikita/agents/text/__init__.py":["logging","time","typing","uuid","pydantic_ai","nikita.agents.text.deps","nikita.agents.text.agent","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client","nikita.memory.graphiti_client","nikita.db.database","nikita.db.repositories.user_repository"],"nikita/agents/text/agent.py":["logging","time","functools","typing","pydantic_ai","nikita.agents.text.deps","nikita.engine.constants","nikita.prompts.nikita_persona","nikita.db.models.user","nikita.memory.graphiti_client","nikita.agents.text.tools","logging","nikita.db.database","nikita.context.template_generator"],"nikita/agents/text/deps.py":["dataclasses","typing","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client"],"nikita/agents/text/facts.py":["dataclasses","typing"],"nikita/agents/text/handler.py":["logging","dataclasses","datetime","typing","uuid","nikita.agents.text.facts","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text","nikita.agents.text.agent"],"nikita/agents/text/skip.py":["random","typing"],"nikita/agents/text/timing.py":["logging","random","typing","nikita.config.settings"],"nikita/agents/text/tools.py":["typing","pydantic_ai","nikita.agents.text.deps","warnings"],"nikita/agents/voice/__init__.py":["logging","typing","nikita.agents.voice.models","nikita.agents.voice.deps","nikita.agents.voice.service","nikita.agents.voice.client","nikita.agents.voice.context","nikita.agents.voice.scoring","nikita.agents.voice.tts_config","nikita.agents.voice.context","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.agents.voice.client","nikita.agents.voice.server_tools","nikita.agents.voice.tts_config","nikita.agents.voice.context"],"nikita/agents/voice/availability.py":["logging","random","typing","nikita.db.models.user"],"nikita/agents/voice/config.py":["logging","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user"],"nikita/agents/voice/context.py":["logging","datetime","typing","uuid","nikita.agents.voice.models","nikita.agents.voice.tts_config","nikita.config.settings","nikita.db.models.user","nikita.db.database","nikita.meta_prompts.service","nikita.agents.voice.config","typing"],"nikita/agents/voice/deps.py":["dataclasses","datetime","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client"],"nikita/agents/voice/inbound.py":["logging","datetime","typing","uuid","nikita.db.models.user","hashlib","hmac","time","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","nikita.agents.voice.availability","nikita.agents.voice.context","nikita.agents.voice.tts_config","nikita.agents.voice.config","nikita.config.settings","nikita.agents.voice.tts_config"],"nikita/agents/voice/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/agents/voice/scheduling.py":["logging","random","datetime","typing","uuid","nikita.db.models.scheduled_event","nikita.db.models.user","nikita.config.settings","nikita.db.database","nikita.db.repositories.scheduled_event_repository","nikita.agents.voice.service","nikita.platforms.telegram.bot","nikita.db.database","nikita.db.repositories.scheduled_event_repository"],"nikita/agents/voice/scoring.py":["logging","dataclasses","decimal","typing","uuid","nikita.engine.scoring.analyzer","nikita.engine.scoring.models","nikita.db.database","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository"],"nikita/agents/voice/server_tools.py":["asyncio","hashlib","hmac","logging","time","datetime","functools","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","datetime","nikita.memory.graphiti_client","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.profile_repository","nikita.prompts.voice_persona","nikita.engine.constants","nikita.life_simulation","nikita.emotional_state","nikita.conflicts","nikita.memory.graphiti_client","nikita.db.database","nikita.db.repositories.thread_repository","nikita.engine.scoring.analyzer","nikita.engine.scoring.models","nikita.db.database","nikita.db.repositories.user_repository","nikita.memory.graphiti_client","nikita.config.settings"],"nikita/agents/voice/service.py":["hashlib","hmac","logging","secrets","time","datetime","functools","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client","nikita.meta_prompts.service","nikita.db.database","nikita.db.database","nikita.db.models.user","sqlalchemy","sqlalchemy.orm","nikita.memory.graphiti_client","nikita.memory.graphiti_client","nikita.memory.graphiti_client","decimal","nikita.agents.voice.scoring","nikita.db.database","nikita.db.repositories.user_repository","nikita.engine.scoring.models","nikita.config.settings"],"nikita/agents/voice/transcript.py":["logging","datetime","typing","uuid","nikita.agents.voice.elevenlabs_client","nikita.agents.voice.models","sqlalchemy.ext.asyncio","nikita.memory.graphiti_client"],"nikita/agents/voice/tts_config.py":["logging","typing","nikita.agents.voice.models"],"nikita/api/dependencies/auth.py":["uuid","jwt","fastapi","fastapi.security","nikita.config.settings"],"nikita/api/main.py":["logging","sys","contextlib","typing","fastapi","fastapi.middleware.cors","nikita.config.settings","sqlalchemy","nikita.db.database","nikita.platforms.telegram.bot","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","uvicorn"],"nikita/api/routes/admin.py":["datetime","typing","uuid","fastapi","sqlalchemy","sqlalchemy.ext.asyncio","nikita.api.schemas.admin","nikita.api.schemas.portal","nikita.db.database","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"nikita/api/routes/admin_debug.py":["datetime","typing","uuid","fastapi","sqlalchemy","sqlalchemy.ext.asyncio","nikita.api.dependencies.auth","nikita.api.schemas.admin_debug","nikita.db.database","nikita.db.models.engagement","nikita.db.models.job_execution","nikita.db.models.conversation","nikita.db.models.user","nikita.db.repositories.engagement_repository","nikita.db.repositories.job_execution_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.engine.constants","nikita.config.settings","nikita.memory.graphiti_client","nikita.db.repositories.generated_prompt_repository","nikita.db.repositories.generated_prompt_repository","nikita.db.repositories.user_repository","nikita.meta_prompts.service","sqlalchemy.orm","sqlalchemy.orm","nikita.agents.voice.elevenlabs_client","nikita.config.settings","nikita.agents.voice.elevenlabs_client","sqlalchemy.orm","sqlalchemy.orm","nikita.db.models.context","nikita.db.models.context","nikita.db.models.context"],"nikita/api/routes/onboarding.py":["hashlib","hmac","logging","time","typing","uuid","fastapi","pydantic","sqlalchemy.ext.asyncio","nikita.config.elevenlabs","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","nikita.onboarding","nikita.onboarding.meta_nikita","json"],"nikita/api/routes/portal.py":["datetime","decimal","typing","uuid","fastapi","sqlalchemy.ext.asyncio","nikita.api.dependencies.auth","nikita.api.schemas.portal","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.engine.constants"],"nikita/api/routes/tasks.py":["logging","decimal","fastapi","nikita.config.settings","nikita.db.database","nikita.db.dependencies","nikita.db.models.job_execution","nikita.db.repositories.job_execution_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository","nikita.engine.decay.processor","nikita.db.models.scheduled_event","nikita.db.repositories.scheduled_event_repository","nikita.platforms.telegram.bot","nikita.agents.voice.service","nikita.db.repositories.user_repository","datetime","datetime","sqlalchemy","nikita.db.models.context","nikita.db.repositories.conversation_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.meta_prompts.service","nikita.db.repositories.pending_registration_repository","nikita.context.session_detector","nikita.post_processing","nikita.touchpoints"],"nikita/api/routes/telegram.py":["typing","hmac","html","fastapi","fastapi.responses","pydantic","logging","uuid","nikita.config.settings","nikita.agents.text.handler","nikita.db.database","nikita.db.dependencies","nikita.db.models.profile","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.user_repository","nikita.db.repositories.profile_repository","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot","nikita.platforms.telegram.commands","nikita.platforms.telegram.delivery","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.rate_limiter","nikita.platforms.telegram.registration_handler","nikita.platforms.telegram.otp_handler","nikita.services.venue_research","nikita.services.backstory_generator","nikita.services.persona_adaptation","jwt"],"nikita/api/routes/voice.py":["hashlib","hmac","logging","time","decimal","typing","uuid","fastapi","pydantic","nikita.agents.voice.availability","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","httpx","datetime","uuid","nikita.db.database","nikita.db.models.conversation","nikita.db.repositories.user_repository","nikita.agents.voice.scoring","nikita.engine.scoring.models","nikita.context.post_processor","nikita.meta_prompts.service","json","nikita.agents.voice.inbound"],"nikita/api/schemas/admin.py":["datetime","decimal","uuid","pydantic"],"nikita/api/schemas/admin_debug.py":["datetime","uuid","pydantic"],"nikita/api/schemas/conversation.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/game.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/portal.py":["datetime","uuid","pydantic"],"nikita/api/schemas/user.py":["datetime","decimal","uuid","pydantic"],"nikita/config/elevenlabs.py":["functools","pydantic","pydantic_settings"],"nikita/config/experiments.py":["nikita.config.experiments","__future__","os","copy","pathlib","typing","yaml"],"nikita/config/loader.py":["datetime","decimal","functools","pathlib","typing","yaml","nikita.config.schemas"],"nikita/config/prompt_loader.py":["nikita.config.prompt_loader","__future__","re","functools","pathlib","typing"],"nikita/config/schemas.py":["pydantic"],"nikita/config/settings.py":["functools","typing","pydantic","pydantic_settings"],"nikita/context/post_processor.py":["logging","dataclasses","datetime","typing","uuid","pydantic_ai","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.conversation_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.meta_prompts","nikita.db.models.context","nikita.db.models.context","nikita.config.settings","nikita.memory.graphiti_client","nikita.engine.vice"],"nikita/context/session_detector.py":["logging","uuid","sqlalchemy.ext.asyncio","nikita.db.repositories.conversation_repository"],"nikita/context/template_generator.py":["logging","dataclasses","datetime","decimal","typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.user_repository","nikita.engine.constants","nikita.meta_prompts"],"nikita/context/utils/token_counter.py":["logging","functools","tiktoken"],"nikita/db/database.py":["collections.abc","functools","sqlalchemy.ext.asyncio","sqlalchemy.pool","supabase","nikita.config.settings"],"nikita/db/dependencies.py":["collections.abc","typing","fastapi","sqlalchemy.ext.asyncio","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"nikita/db/migrations/env.py":["asyncio","logging.config","alembic","sqlalchemy","sqlalchemy.engine","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.game","nikita.db.models.user"],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["collections.abc","sqlalchemy","alembic","sqlalchemy.dialects"],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0003_fix_message_embeddings.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/migrations/versions/20251128_0004_rls_performance.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0005_consolidate_policies.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0006_extensions_pending_reg.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/migrations/versions/20251205_0007_rate_limits_table.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/models/base.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm"],"nikita/db/models/context.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user","nikita.db.models.base"],"nikita/db/models/conversation.py":["datetime","decimal","typing","uuid","pgvector.sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.context","nikita.db.models.generated_prompt","nikita.db.models.scheduled_event","nikita.db.models.user"],"nikita/db/models/engagement.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/game.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/generated_prompt.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/job_execution.py":["datetime","enum","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/pending_registration.py":["datetime","datetime","sqlalchemy","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.base"],"nikita/db/models/profile.py":["datetime","datetime","enum","typing","uuid","sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/rate_limit.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/scheduled_event.py":["datetime","enum","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/user.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.context","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.game","nikita.db.models.generated_prompt","nikita.db.models.profile","nikita.db.models.scheduled_event","nikita.db.models.scheduled_touchpoint"],"nikita/db/repositories/base.py":["typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.base"],"nikita/db/repositories/conversation_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.base","sqlalchemy","sqlalchemy.dialects.postgresql"],"nikita/db/repositories/engagement_repository.py":["uuid","sqlalchemy","sqlalchemy.ext.asyncio","sqlalchemy.orm","nikita.db.models.engagement","nikita.db.repositories.base"],"nikita/db/repositories/generated_prompt_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.generated_prompt","nikita.db.repositories.base"],"nikita/db/repositories/job_execution_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.job_execution","nikita.db.repositories.base"],"nikita/db/repositories/metrics_repository.py":["decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/pending_registration_repository.py":["datetime","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.pending_registration"],"nikita/db/repositories/profile_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.profile","nikita.db.repositories.base"],"nikita/db/repositories/scheduled_event_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.scheduled_event"],"nikita/db/repositories/score_history_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/summary_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/thought_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.base"],"nikita/db/repositories/thread_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.base"],"nikita/db/repositories/user_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","sqlalchemy.orm","nikita.db.models.engagement","nikita.db.models.game","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/vice_repository.py":["datetime","decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/transactions.py":["asyncio","functools","logging","collections.abc","enum","typing","sqlalchemy.exc","sqlalchemy.ext.asyncio"],"nikita/engine/chapters/boss.py":["decimal","typing","uuid","nikita.config.enums","nikita.engine.constants","nikita.engine.chapters.prompts","nikita.db.repositories.user_repository"],"nikita/engine/chapters/judgment.py":["enum","typing","pydantic","logging","pydantic_ai"],"nikita/engine/chapters/prompts.py":["typing"],"nikita/engine/constants.py":["nikita.engine.constants","nikita.config","__future__","warnings","datetime","decimal","pathlib","typing","nikita.config.enums"],"nikita/engine/decay/calculator.py":["datetime","decimal","typing","nikita.engine.constants","nikita.engine.decay.models","uuid"],"nikita/engine/decay/models.py":["datetime","decimal","uuid","pydantic"],"nikita/engine/decay/processor.py":["datetime","decimal","typing","sqlalchemy.ext.asyncio","nikita.engine.decay.calculator","nikita.engine.decay.models","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository"],"nikita/engine/engagement/calculator.py":["decimal","nikita.config.enums","nikita.engine.engagement.models"],"nikita/engine/engagement/detection.py":["logging","decimal","typing","pydantic","pydantic_ai","nikita.engine.engagement.models"],"nikita/engine/engagement/models.py":["decimal","typing","pydantic","nikita.config.enums"],"nikita/engine/engagement/recovery.py":["dataclasses","datetime","nikita.config.enums"],"nikita/engine/engagement/state_machine.py":["decimal","nikita.config.enums","nikita.engine.engagement.models"],"nikita/engine/scoring/analyzer.py":["logging","decimal","pydantic_ai","nikita.engine.constants","nikita.engine.scoring.models"],"nikita/engine/scoring/calculator.py":["dataclasses","decimal","nikita.config.enums","nikita.engine.constants","nikita.engine.scoring.models"],"nikita/engine/scoring/models.py":["decimal","typing","pydantic"],"nikita/engine/scoring/service.py":["logging","decimal","typing","uuid","nikita.config.enums","nikita.engine.scoring.analyzer","nikita.engine.scoring.calculator","nikita.engine.scoring.models","sqlalchemy.ext.asyncio","nikita.db.repositories.score_history_repository"],"nikita/engine/vice/analyzer.py":["datetime","decimal","uuid","pydantic","pydantic_ai","nikita.config.enums","nikita.config.settings","nikita.engine.vice.models"],"nikita/engine/vice/boundaries.py":["decimal"],"nikita/engine/vice/injector.py":["decimal","nikita.engine.vice.models"],"nikita/engine/vice/models.py":["datetime","decimal","typing","uuid","pydantic","nikita.config.enums"],"nikita/engine/vice/scorer.py":["datetime","decimal","typing","uuid","nikita.config.enums","nikita.engine.vice.models","nikita.db.repositories.vice_repository","nikita.db.database","nikita.db.repositories.vice_repository"],"nikita/engine/vice/service.py":["decimal","typing","uuid","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.boundaries","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.scorer","nikita.engine.vice.models"],"nikita/memory/graphiti_client.py":["datetime","typing","graphiti_core","graphiti_core.llm_client.anthropic_client","graphiti_core.llm_client.config","graphiti_core.embedder","graphiti_core.embedder.openai","graphiti_core.nodes","nikita.config.settings"],"nikita/meta_prompts/models.py":["dataclasses","datetime","decimal","typing","uuid","nikita.db.models.profile","nikita.context.utils.token_counter"],"nikita/meta_prompts/service.py":["json","time","datetime","decimal","pathlib","typing","uuid","pydantic_ai","nikita.config.settings","nikita.meta_prompts.models","sqlalchemy.ext.asyncio","nikita.db.repositories.generated_prompt_repository","nikita.context.utils.token_counter","nikita.db.repositories.generated_prompt_repository","datetime","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.db.repositories.profile_repository","nikita.meta_prompts.models","logging","logging","logging","datetime","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.summary_repository","nikita.memory.graphiti_client","asyncio","logging","nikita.behavioral","nikita.emotional_state","nikita.engine.constants","logging"],"nikita/platforms/telegram/auth.py":["logging","re","typing","urllib.parse","uuid","supabase","supabase_auth.errors","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.user_repository","nikita.config.settings","nikita.config.settings"],"nikita/platforms/telegram/bot.py":["html","httpx","nikita.config.settings"],"nikita/platforms/telegram/commands.py":["logging","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot"],"nikita/platforms/telegram/delivery.py":["asyncio","uuid","nikita.platforms.telegram.bot"],"nikita/platforms/telegram/message_handler.py":["logging","datetime","decimal","typing","uuid","nikita.config.settings","nikita.agents.text.handler","nikita.config.enums","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.engagement","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.prompts","nikita.engine.engagement.recovery","nikita.engine.engagement.state_machine","nikita.engine.scoring.models","nikita.engine.scoring.service","nikita.platforms.telegram.bot","nikita.platforms.telegram.delivery","nikita.platforms.telegram.models","nikita.platforms.telegram.rate_limiter","nikita.platforms.telegram.onboarding.handler","nikita.text_patterns","nikita.engine.chapters.prompts","asyncio","asyncio","nikita.engine.constants","nikita.engine.engagement.models","nikita.db.models.engagement"],"nikita/platforms/telegram/models.py":["pydantic"],"nikita/platforms/telegram/onboarding/handler.py":["logging","typing","uuid","nikita.db.models.profile","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.platforms.telegram.bot","nikita.services.backstory_generator","nikita.services.persona_adaptation","nikita.services.venue_research","asyncio"],"nikita/platforms/telegram/otp_handler.py":["logging","typing","nikita.config.settings","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.platforms.telegram.onboarding.handler"],"nikita/platforms/telegram/rate_limiter.py":["dataclasses","datetime","typing","uuid","asyncio","time","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.rate_limit","nikita.db.models.rate_limit","nikita.db.models.rate_limit"],"nikita/platforms/telegram/registration_handler.py":["logging","re","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot"],"nikita/services/backstory_generator.py":["json","logging","dataclasses","typing","pydantic_ai","nikita.config.settings","nikita.services.venue_research","nikita.db.models.profile"],"nikita/services/persona_adaptation.py":["typing"],"nikita/services/venue_research.py":["logging","dataclasses","datetime","typing","nikita.db.repositories.profile_repository","nikita.config.settings","firecrawl"],"portal/src/app/admin/jobs/page.tsx":["@/components/ui/card","@/components/ui/badge","@/hooks/use-admin-data"],"portal/src/app/admin/layout.tsx":["react","next/navigation","@/components/ui/button","@/lib/supabase/client","@/components/admin/AdminNavigation","@/hooks/use-admin-data","next/link"],"portal/src/app/admin/page.tsx":["@/components/ui/card","@/components/ui/badge","@/hooks/use-admin-data","next/link"],"portal/src/app/admin/users/[id]/page.tsx":["react","next/link","@/components/ui/card","@/components/ui/badge","@/components/ui/button","@/components/ui/progress","@/hooks/use-admin-data"],"portal/src/app/admin/users/page.tsx":["react","next/link","@/components/ui/card","@/components/ui/badge","@/components/ui/button","@/hooks/use-admin-data"],"portal/src/app/auth/callback/route.ts":["@/lib/supabase/server","next/server"],"portal/src/app/conversations/page.tsx":["react","next/navigation","@/components/ui/button","@/lib/supabase/client","@/hooks/use-dashboard-data","@/components/history/ConversationList","@/components/history/ConversationDetail","@/components/ui/card","@/components/layout/Navigation"],"portal/src/app/dashboard/page.tsx":["next/navigation","@/components/ui/button","@/lib/supabase/client","@/hooks/use-dashboard-data","@/components/dashboard/ScoreCard","@/components/dashboard/ChapterCard","@/components/dashboard/EngagementCard","@/components/dashboard/MetricsGrid","@/components/dashboard/VicesCard","@/components/dashboard/DecayWarning","@/components/ui/card","@/components/layout/Navigation"],"portal/src/app/history/page.tsx":["next/navigation","@/components/ui/button","@/lib/supabase/client","@/hooks/use-dashboard-data","@/components/history/ScoreHistoryGraph","@/components/history/DailySummaryCard","@/components/ui/card","@/lib/api/client","@tanstack/react-query","@/components/layout/Navigation"],"portal/src/app/layout.tsx":["next/font/google","portal/src/app/providers.tsx"],"portal/src/app/page.tsx":["react","next/navigation","@/components/ui/card","@/components/ui/input","@/components/ui/button","@/lib/supabase/client"],"portal/src/app/providers.tsx":["@tanstack/react-query","react"],"portal/src/components/admin/AdminNavigation.tsx":["next/link","next/navigation","@/lib/utils"],"portal/src/components/dashboard/ChapterCard.tsx":["@/components/ui/card","@/components/ui/badge","@/components/ui/progress"],"portal/src/components/dashboard/DecayWarning.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/dashboard/EngagementCard.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/dashboard/MetricsGrid.tsx":["@/components/ui/card","@/components/ui/progress"],"portal/src/components/dashboard/ScoreCard.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/dashboard/VicesCard.tsx":["@/components/ui/card","@/components/ui/progress"],"portal/src/components/history/ConversationDetail.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/history/ConversationList.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/history/DailySummaryCard.tsx":["@/components/ui/card","@/components/ui/badge"],"portal/src/components/history/ScoreHistoryGraph.tsx":["@/components/ui/card","recharts"],"portal/src/components/layout/Navigation.tsx":["next/link","next/navigation","@/lib/utils","@/hooks/use-admin-data"],"portal/src/components/ui/badge.tsx":["react","@radix-ui/react-slot","class-variance-authority","@/lib/utils"],"portal/src/components/ui/button.tsx":["react","@radix-ui/react-slot","class-variance-authority","@/lib/utils"],"portal/src/components/ui/card.tsx":["react","@/lib/utils"],"portal/src/components/ui/input.tsx":["react","@/lib/utils"],"portal/src/components/ui/progress.tsx":["react","@radix-ui/react-progress","@/lib/utils"],"portal/src/hooks/use-admin-data.ts":["@tanstack/react-query","@/lib/api/admin-client"],"portal/src/hooks/use-dashboard-data.ts":["@tanstack/react-query","@/lib/api/client"],"portal/src/proxy.ts":["next/server","@/lib/supabase/proxy","@supabase/ssr"],"tests/agents/text/test_agent.py":["os","pytest","unittest.mock","nikita.agents.text","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.deps","nikita.agents.text.agent","nikita.prompts.nikita_persona","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","inspect","nikita.agents.text.agent","nikita.agents.text.agent","inspect"],"tests/agents/text/test_chapter_behavior.py":["pytest","unittest.mock","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","re","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_deps.py":["pytest","dataclasses","unittest.mock","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps"],"tests/agents/text/test_factory.py":["pytest","uuid","unittest.mock","nikita.agents.text","nikita.agents.text","inspect","nikita.agents.text","inspect","nikita.agents.text","nikita.agents.text.deps","nikita.agents.text","nikita.agents.text","nikita.agents.text"],"tests/agents/text/test_facts.py":["pytest","unittest.mock","nikita.agents.text","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","inspect","nikita.agents.text.facts","inspect","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts"],"tests/agents/text/test_handler.py":["pytest","datetime","uuid","unittest.mock","dataclasses","nikita.agents.text","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","inspect","nikita.agents.text.handler","inspect","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler"],"tests/agents/text/test_handler_facts.py":["pytest","datetime","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.facts"],"tests/agents/text/test_handler_skip.py":["pytest","datetime","uuid","unittest.mock","logging","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip"],"tests/agents/text/test_init.py":["pytest","unittest.mock","uuid","nikita.agents.text","nikita.agents.text","nikita.agents.text"],"tests/agents/text/test_nikita_persona.py":["pytest","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona"],"tests/agents/text/test_skip.py":["pytest","statistics","nikita.agents.text","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","inspect","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip"],"tests/agents/text/test_timing.py":["pytest","statistics","unittest.mock","nikita.agents.text","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing"],"tests/agents/text/test_tools.py":["os","pytest","datetime","unittest.mock","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools"],"tests/agents/voice/test_availability.py":["decimal","unittest.mock","uuid","pytest","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","unittest.mock","nikita.agents.voice.availability","unittest.mock"],"tests/agents/voice/test_config.py":["unittest.mock","uuid","pytest","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config"],"tests/agents/voice/test_dynamic_vars.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context"],"tests/agents/voice/test_inbound.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","time","nikita.agents.voice.inbound","asyncio"],"tests/agents/voice/test_personality_consistency.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models"],"tests/agents/voice/test_scheduling.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.config","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio"],"tests/agents/voice/test_scoring.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.scoring.models","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring"],"tests/agents/voice/test_server_tools.py":["unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","datetime","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","hashlib","hmac","time","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","hashlib","hmac","nikita.agents.voice.server_tools","time","asyncio","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools"],"tests/agents/voice/test_service.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service"],"tests/agents/voice/test_transcript.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript"],"tests/agents/voice/test_tts_config.py":["pytest","nikita.agents.voice.models","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config"],"tests/api/dependencies/test_auth_admin.py":["pytest","unittest.mock","uuid","jwt","fastapi","fastapi.security","nikita.api.dependencies.auth","time"],"tests/api/routes/test_admin_debug.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug","nikita.api.dependencies.auth"],"tests/api/routes/test_onboarding.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.onboarding"],"tests/api/routes/test_tasks.py":["pytest","unittest.mock","fastapi","fastapi.testclient","nikita.api.routes.tasks"],"tests/api/routes/test_telegram.py":["pytest","unittest.mock","fastapi","fastapi.testclient","httpx","nikita.platforms.telegram.bot","nikita.platforms.telegram.commands","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.otp_handler","nikita.api.routes.telegram","nikita.api.routes.telegram"],"tests/api/routes/test_telegram_auth_confirm.py":["pytest","datetime","unittest.mock","uuid","fastapi","fastapi.testclient","nikita.api.routes.telegram","nikita.platforms.telegram.bot","nikita.api.routes.telegram","nikita.platforms.telegram.bot","nikita.api.routes.telegram","nikita.platforms.telegram.bot"],"tests/api/routes/test_voice.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.voice","nikita.agents.voice.models","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","unittest.mock"],"tests/api/routes/test_voice_webhook.py":["hashlib","hmac","time","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.voice"],"tests/api/schemas/test_admin_debug_schemas.py":["datetime","uuid","pytest","nikita.api.schemas.admin_debug"],"tests/config/test_enums.py":["pytest","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums"],"tests/config/test_experiments.py":["os","tempfile","pytest","pathlib","unittest.mock","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments"],"tests/config/test_loader.py":["pytest","pathlib","decimal","datetime","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","time","nikita.config.loader","time","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config.loader","os"],"tests/config/test_prompt_loader.py":["os","time","tempfile","pytest","pathlib","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader"],"tests/config/test_schemas.py":["pytest","pydantic","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas"],"tests/conftest.py":["pytest","nikita.db.database","nikita.config.settings","nikita.platforms.telegram.rate_limiter"],"tests/context/test_post_processor.py":["json","datetime","typing","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.models.game","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.db.models.context","nikita.context.post_processor","nikita.context.post_processor","nikita.db.models.context","nikita.context.post_processor","nikita.db.models.context","nikita.context.post_processor","nikita.context.post_processor","nikita.db.models.context","nikita.db.models.context","nikita.context.post_processor","nikita.db.models.context","nikita.db.models.context","nikita.context.post_processor","nikita.db.models.context","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor","nikita.context.post_processor"],"tests/context/test_session_detector.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector"],"tests/context/test_template_generator.py":["datetime","decimal","typing","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.models.game","nikita.db.models.user","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator","nikita.context.template_generator"],"tests/db/integration/conftest.py":["os","dotenv","collections.abc","uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","random"],"tests/db/integration/test_fulltext_search.py":["os","uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.user_repository"],"tests/db/integration/test_migrations.py":["os","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","os","pathlib","os","pathlib"],"tests/db/integration/test_repositories_integration.py":["os","datetime","decimal","uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.models.game","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"tests/db/integration/test_rls_policies.py":["os","uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.user_repository"],"tests/db/models/test_job_execution.py":["pytest","datetime","uuid","nikita.db.models.job_execution"],"tests/db/models/test_profile.py":["datetime","decimal","enum","uuid","pytest","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.profile","nikita.db.models.base","sqlalchemy","nikita.db.models.base"],"tests/db/repositories/test_base.py":["unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.base","sqlalchemy","sqlalchemy.dialects.postgresql","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base"],"tests/db/repositories/test_conversation_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.conversation_repository"],"tests/db/repositories/test_job_execution_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.job_execution","nikita.db.repositories.job_execution_repository"],"tests/db/repositories/test_metrics_repository.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.metrics_repository"],"tests/db/repositories/test_pending_registration_repository.py":["pytest","datetime","unittest.mock","nikita.db.models.pending_registration","nikita.db.repositories.pending_registration_repository"],"tests/db/repositories/test_profile_repository.py":["datetime","typing","uuid","pytest","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.profile","nikita.db.models.user","nikita.db.repositories.profile_repository","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository"],"tests/db/repositories/test_score_history_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.score_history_repository"],"tests/db/repositories/test_summary_repository.py":["datetime","decimal","typing","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.summary_repository"],"tests/db/repositories/test_thought_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository"],"tests/db/repositories/test_thread_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository"],"tests/db/repositories/test_user_repository.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.game","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","datetime","nikita.db.repositories.user_repository","nikita.db.models.user","datetime","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement"],"tests/db/repositories/test_user_repository_boss.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository"],"tests/db/repositories/test_vice_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.vice_repository"],"tests/e2e/conftest.py":["asyncio","os","pytest","typing","tests.e2e.helpers.telegram_helper","tests.e2e.helpers.mock_agent_helper","playwright.async_api"],"tests/e2e/full_journey/evidence_collector.py":["json","os","dataclasses","datetime","pathlib","typing"],"tests/e2e/full_journey/orchestrator.py":["os","time","dataclasses","enum","typing"],"tests/e2e/full_journey/phases/phase1_registration.py":["typing","dataclasses"],"tests/e2e/full_journey/phases/phase2_conversation.py":["typing","dataclasses","asyncio"],"tests/e2e/full_journey/phases/phase3_portal.py":["typing","dataclasses"],"tests/e2e/full_journey/phases/phase4_game_state.py":["typing","dataclasses"],"tests/e2e/full_journey/test_full_journey.py":["os","time","typing","pytest"],"tests/e2e/helpers/gmail_helper.py":["asyncio","base64","os","re","time","typing","urllib.parse"],"tests/e2e/helpers/mock_agent_helper.py":["os","contextlib","dataclasses","typing","unittest.mock","asyncio","uuid"],"tests/e2e/helpers/otp_email_parser.py":["re","typing","dataclasses","datetime","base64","base64"],"tests/e2e/helpers/supabase_helper.py":["os","uuid","dataclasses","datetime","typing","random"],"tests/e2e/helpers/telegram_helper.py":["os","time","dataclasses","typing","httpx","random"],"tests/e2e/manual_journey_test.py":["asyncio","json","os","sys","datetime","typing","httpx","tests.e2e.helpers.telegram_helper"],"tests/e2e/portal/conftest.py":["os","pytest"],"tests/e2e/portal/page_objects/base_page.py":["os","typing","dataclasses"],"tests/e2e/portal/page_objects/conversations_page.py":["dataclasses","typing"],"tests/e2e/portal/page_objects/dashboard_page.py":["dataclasses","typing"],"tests/e2e/portal/page_objects/login_page.py":["dataclasses","typing"],"tests/e2e/portal/test_conversations.py":["os","dataclasses","typing","pytest"],"tests/e2e/portal/test_dashboard.py":["os","dataclasses","typing","pytest"],"tests/e2e/portal/test_login_flow.py":["os","time","dataclasses","typing","pytest"],"tests/e2e/test_auth_flow.py":["asyncio","base64","json","os","pytest","uuid","typing","urllib.parse"],"tests/e2e/test_message_flow.py":["pytest","tests.e2e.helpers.telegram_helper"],"tests/e2e/test_otp_flow.py":["pytest","tests.e2e.helpers.telegram_helper"],"tests/e2e/test_otp_gmail_e2e.py":["asyncio","os","time","dataclasses","datetime","typing","pytest"],"tests/engine/chapters/test_advancement.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","asyncio","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_agent_integration.py":["pytest","uuid","unittest.mock","decimal","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.agents.text.handler","nikita.agents.text.handler","datetime","nikita.agents.text.handler","nikita.agents.text.skip"],"tests/engine/chapters/test_boss.py":["inspect","decimal","uuid","pytest","nikita.engine.chapters","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","unittest.mock"],"tests/engine/chapters/test_failure.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","asyncio","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_game_over.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_initiation.py":["decimal","unittest.mock","uuid","pytest","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.prompts","nikita.engine.chapters.boss"],"tests/engine/chapters/test_judgment.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","asyncio","nikita.engine.chapters.judgment","inspect","nikita.engine.chapters.judgment","inspect","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment"],"tests/engine/chapters/test_prompts.py":["pytest","nikita.engine.chapters","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts"],"tests/engine/chapters/test_threshold.py":["decimal","uuid","pytest","nikita.engine.constants","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/decay/test_calculator.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.engine.constants","nikita.engine.decay.calculator","nikita.engine.decay.models"],"tests/engine/decay/test_models.py":["datetime","decimal","uuid","pytest","pydantic","nikita.engine.decay.models"],"tests/engine/decay/test_processor.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.engine.decay.models","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor"],"tests/engine/engagement/test_calculator.py":["decimal","pytest","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.models","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator"],"tests/engine/engagement/test_detection.py":["datetime","decimal","unittest.mock","pytest","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.models","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.models","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","inspect","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection"],"tests/engine/engagement/test_integration.py":["datetime","decimal","pytest","nikita.config.enums","nikita.engine.engagement"],"tests/engine/engagement/test_models.py":["decimal","pytest","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement.models","nikita.config.enums","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models"],"tests/engine/engagement/test_recovery.py":["datetime","decimal","uuid","pytest","nikita.config.enums","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery"],"tests/engine/engagement/test_state_machine.py":["decimal","uuid","pytest","nikita.config.enums","nikita.engine.engagement.models","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine"],"tests/engine/scoring/test_analyzer.py":["decimal","unittest.mock","pytest","nikita.engine.scoring.analyzer","nikita.engine.scoring.models"],"tests/engine/scoring/test_calculator.py":["decimal","unittest.mock","pytest","nikita.config.enums","nikita.engine.scoring.calculator","nikita.engine.scoring.models"],"tests/engine/scoring/test_models.py":["decimal","pytest","pydantic","nikita.engine.scoring.models"],"tests/engine/scoring/test_service.py":["decimal","unittest.mock","uuid","pytest","nikita.config.enums","nikita.engine.scoring.models","nikita.engine.scoring.service"],"tests/engine/vice/test_analyzer.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.analyzer"],"tests/engine/vice/test_boundaries.py":["pytest","decimal","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.injector","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.boundaries"],"tests/engine/vice/test_injector.py":["pytest","datetime","decimal","uuid","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.injector","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.config.enums","nikita.engine.vice.injector"],"tests/engine/vice/test_models.py":["pytest","datetime","decimal","uuid","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","pydantic","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models"],"tests/engine/vice/test_scorer.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.engine.vice.scorer","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer"],"tests/engine/vice/test_service.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.service","nikita.engine.vice.models","nikita.engine.vice.service","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.service","nikita.engine.vice.models","nikita.engine.vice.service","nikita.engine.vice.service","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid"],"tests/integration/test_boss_flow.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.constants","nikita.engine.chapters.boss","nikita.engine.constants"],"tests/integration/test_vice_flow.py":["pytest","uuid","decimal","datetime","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.boundaries","nikita.engine.vice.models"],"tests/meta_prompts/test_service.py":["json","pytest","decimal","unittest.mock","uuid","sqlalchemy.ext.asyncio","nikita.meta_prompts.models","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.models","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.models","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.service","nikita.meta_prompts.models","nikita.meta_prompts.models","nikita.meta_prompts.models","nikita.meta_prompts.service","nikita.meta_prompts.models"],"tests/platforms/telegram/test_auth.py":["pytest","unittest.mock","nikita.platforms.telegram.auth","nikita.db.models.user","uuid"],"tests/platforms/telegram/test_bot.py":["pytest","unittest.mock","nikita.platforms.telegram.bot","httpx"],"tests/platforms/telegram/test_commands.py":["pytest","unittest.mock","nikita.platforms.telegram.commands","nikita.db.models.user","decimal","uuid"],"tests/platforms/telegram/test_delivery.py":["pytest","unittest.mock","uuid","nikita.platforms.telegram.delivery"],"tests/platforms/telegram/test_errors.py":["pytest","unittest.mock","uuid","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models"],"tests/platforms/telegram/test_message_handler.py":["pytest","decimal","unittest.mock","uuid","datetime","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models","nikita.platforms.telegram.rate_limiter","nikita.agents.text.handler","nikita.config.enums","nikita.db.models.user","nikita.engine.scoring.calculator","nikita.engine.scoring.models"],"tests/platforms/telegram/test_onboarding_handler.py":["unittest.mock","uuid","pytest","nikita.db.models.profile","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler"],"tests/platforms/telegram/test_otp_handler.py":["pytest","unittest.mock","nikita.platforms.telegram.otp_handler"],"tests/platforms/telegram/test_rate_limiter.py":["pytest","datetime","uuid","unittest.mock","nikita.platforms.telegram.rate_limiter"],"tests/platforms/telegram/test_registration_handler.py":["pytest","unittest.mock","nikita.platforms.telegram.registration_handler"],"tests/platforms/telegram/test_session_integration.py":["pytest","datetime","uuid","unittest.mock","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.delivery","nikita.platforms.telegram.models","unittest.mock","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler"],"tests/services/test_backstory_generator.py":["unittest.mock","pytest","nikita.services.venue_research","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator"],"tests/services/test_persona_adaptation.py":["pytest","nikita.services.persona_adaptation"],"tests/services/test_venue_research.py":["datetime","unittest.mock","pytest","nikita.db.models.profile","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","logging","nikita.services.venue_research"]},"dir_purposes":{"docs-to-process":"Project documentation","docs-to-process/nikita-ideas-concepts":"Data models and schemas","nikita/agents/voice":"Data models and schemas","nikita/behavioral":"Data models and schemas","nikita/conflicts":"Data models and schemas","nikita/db/models":"Data models and database schemas","nikita/emotional_state":"Data models and schemas","nikita/life_simulation":"Data models and schemas","nikita/onboarding":"Data models and schemas","nikita/text_patterns":"Data models and schemas","nikita/touchpoints":"Data models and schemas","portal/src":"Source code root directory","portal":"Test files and test utilities","portal/src/app/api/voice/[...slug]":"API routes and endpoints","scripts":"Build and utility scripts","specs/019-admin-voice-monitoring":"Test files and test utilities","specs":"Test specifications","specs/020-admin-text-monitoring":"Test files and test utilities","specs/021-hierarchical-prompt-composition":"Test files and test utilities","specs/022-life-simulation-engine":"Test files and test utilities","specs/023-emotional-state-engine":"Test files and test utilities","specs/024-behavioral-meta-instructions":"Test files and test utilities","specs/025-proactive-touchpoint-system":"Test files and test utilities","specs/026-text-behavioral-patterns":"Test files and test utilities","specs/027-conflict-generation-system":"Test files and test utilities","tests/agents/voice":"Test files and test utilities","tests":"Test files and test utilities","tests/api/routes":"Test files and test utilities","tests/behavioral":"Test files and test utilities","tests/conflicts":"Test files and test utilities","tests/context":"Test files and test utilities","tests/e2e":"Test files and test utilities","tests/emotional_state":"Test files and test utilities","tests/life_simulation":"Test files and test utilities","tests/onboarding":"Test files and test utilities","tests/post_processing":"Test files and test utilities","tests/text_patterns":"Test files and test utilities","tests/touchpoints":"Test files and test utilities","docs":"Project documentation","nikita/api":"API endpoints and route handlers","nikita/api/middleware":"Middleware functions and handlers","nikita/config":"Configuration files and settings","nikita/context/utils":"Shared utility functions and helpers","nikita/db/migrations":"Database migration files","nikita/engine/decay":"Data models and schemas","nikita/engine/engagement":"Data models and schemas","nikita/engine/scoring":"Data models and schemas","nikita/engine/vice":"Data models and schemas","nikita/meta_prompts":"Data models and schemas","nikita/platforms/telegram":"Data models and schemas","nikita/services":"Business logic and external service integrations","portal/src/app/auth/callback":"API routes and endpoints","portal/tests":"Test files and test utilities","specs/001-nikita-text-agent":"Test files and test utilities","specs/002-telegram-integration":"Test files and test utilities","specs/003-scoring-engine":"Test files and test utilities","specs/004-chapter-boss-system":"Test files and test utilities","specs/005-decay-system":"Test files and test utilities","specs/006-vice-personalization":"Test files and test utilities","specs/007-voice-agent":"Test files and test utilities","specs/008-player-portal":"Test files and test utilities","specs/009-database-infrastructure":"Test files and test utilities","specs/010-api-infrastructure":"API endpoints and route handlers","specs/011-background-tasks":"Test files and test utilities","specs/012-context-engineering":"Test files and test utilities","specs/013-configuration-system":"Configuration files and settings","specs/014-engagement-model":"Test files and test utilities","specs/015-onboarding-fix":"Test files and test utilities","specs/016-admin-debug-portal":"Test files and test utilities","specs/017-enhanced-onboarding":"Test files and test utilities","specs/018-admin-prompt-viewing":"Test files and test utilities","specs/028-voice-onboarding":"Test files and test utilities","specs/029-context-comprehensive":"Test files and test utilities","tests/agents/text":"Test files and test utilities","tests/api/dependencies":"Test files and test utilities","tests/api/schemas":"Test files and test utilities","tests/config":"Configuration files and settings","tests/db/integration":"Test files and test utilities","tests/db/models":"Data models and database schemas","tests/db/repositories":"Test files and test utilities","tests/e2e/full_journey":"Test files and test utilities","tests/e2e/helpers":"Helper functions and utilities","tests/e2e/portal":"Test files and test utilities","tests/engine/chapters":"Test files and test utilities","tests/engine/decay":"Test files and test utilities","tests/engine/engagement":"Test files and test utilities","tests/engine/scoring":"Test files and test utilities","tests/engine/vice":"Test files and test utilities","tests/integration":"Test files and test utilities","tests/meta_prompts":"Test files and test utilities","tests/platforms/telegram":"Test files and test utilities","tests/services":"Business logic and external service integrations"},"staleness":1768076188.841268}