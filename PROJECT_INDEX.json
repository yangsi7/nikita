{"at":"2025-11-29T04:39:46.510790","root":".","tree":[".","\u251c\u2500\u2500 docs/","\u2502   \u251c\u2500\u2500 architecture/","\u2502   \u251c\u2500\u2500 game/","\u2502   \u2514\u2500\u2500 README.md","\u251c\u2500\u2500 docs-to-process/","\u251c\u2500\u2500 memory/","\u2502   \u2514\u2500\u2500 README.md","\u251c\u2500\u2500 nikita/ (60 files)","\u2502   \u251c\u2500\u2500 agents/ (10 files)","\u2502   \u2502   \u251c\u2500\u2500 text/ (8 files)","\u2502   \u2502   \u2514\u2500\u2500 tools/ (1 files)","\u2502   \u251c\u2500\u2500 api/ (8 files)","\u2502   \u2502   \u251c\u2500\u2500 middleware/ (1 files)","\u2502   \u2502   \u251c\u2500\u2500 routes/ (1 files)","\u2502   \u2502   \u2514\u2500\u2500 schemas/ (4 files)","\u2502   \u251c\u2500\u2500 config/ (3 files)","\u2502   \u251c\u2500\u2500 db/ (21 files)","\u2502   \u2502   \u251c\u2500\u2500 migrations/ (4 files)","\u2502   \u2502   \u2502   \u2514\u2500\u2500 versions/ (2 files)"],"stats":{"total_files":78,"total_directories":103,"fully_parsed":{"python":77},"listed_only":{"json":1},"markdown_files":61},"f":{"nikita/agents/text/__init__.py":["p",["get_memory_client:18:async (user_id:str)>\"NikitaMemory\"::Lazy wrapper for get_memory_client to avoid import-time errors.","get_user_by_id:32:async (user_id:UUID)>\"User | None\"::","get_nikita_agent_for_user:53:async (user_id:UUID)>tuple[Agent[NikitaDeps, str], NikitaDeps]:get_memory_client,get_user_by_id:"],{"UserNotFoundError":["24",["__init__:27:(self, user_id:UUID):__init__:"]]}],"nikita/agents/text/agent.py":["p",["_create_nikita_agent:28:()>Agent[NikitaDeps, str]:note_user_fact,recall_memory:","get_nikita_agent:93:()>Agent[NikitaDeps, str]:_create_nikita_agent:","build_system_prompt:129:async (memory:\"NikitaMemory\", user:\"User\", user_message:str,)>str::","generate_response:167:async (deps:NikitaDeps, user_message:str,)>str:build_system_prompt:"],{"_AgentProxy":["106",["_real_agent:112:(self)>Agent[NikitaDeps, str]:get_nikita_agent:","__getattr__:117:(self, name:str)::"]]}],"nikita/agents/text/deps.py":["p",{"NikitaDeps":["17",["chapter:37:(self)>int::"]]}],"nikita/agents/text/facts.py":["p",{"ExtractedFact":["15",[]],"FactExtractor":["67",["__init__:85:(self, min_confidence:float = 0.5)::","extract_facts:99:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]:_call_llm_for_extraction,_deduplicate_facts:","_call_llm_for_extraction:132:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]::","_deduplicate_facts:156:(self, new_facts:list[ExtractedFact], existing_facts:list[str],)>list[ExtractedFact]::"]]}],"nikita/agents/text/handler.py":["p",["_get_nikita_agent_for_user:26:()::Lazy import to avoid triggering pydantic_ai import at module load.","_generate_response:32:()::Lazy import to avoid triggering pydantic_ai import at module load.","get_nikita_agent_for_user:39:async (user_id:UUID):_get_nikita_agent_for_user:Wrapper for lazy import.","generate_response:45:async (deps, message:str):_generate_response:Wrapper for lazy import.","store_pending_response:85:async (user_id:UUID, response:str, scheduled_at:datetime, response_id:UUID,)>None::"],{"ResponseDecision":["54",[]],"MessageHandler":["106",["__init__:135:(self, timer:Optional[ResponseTimer] = None, skip_decision:Optional[SkipDecision] = None, fact_extractor:Optional[FactExtractor] = None,)::","handle:148:async (self, user_id:UUID, message:str)>ResponseDecision:generate_response,get_nikita_agent_for_user,store_pending_response:"]]}],"nikita/agents/text/skip.py":["p",{"SkipDecision":["32",["__init__:53:(self)::Initialize the SkipDecision tracker.","should_skip:57:(self, chapter:int)>bool::","reset:89:(self)>None::Reset the skip tracker state."]]}],"nikita/agents/text/timing.py":["p",{"ResponseTimer":["33",["__init__:49:(self, jitter_factor:float = 0.1)::","calculate_delay:58:(self, chapter:int)>int::","calculate_delay_human_readable:95:(self, chapter:int)>str:calculate_delay:"]]}],"nikita/agents/text/tools.py":["p",["format_memory_results:17:(results:list[dict[str, Any]])>str::","recall_memory:57:async (ctx:RunContext[NikitaDeps], query:str)>str:format_memory_results:","note_user_fact:79:async (ctx:RunContext[NikitaDeps], fact:str, confidence:float)>str::"]],"nikita/api/main.py":["p",["lifespan:15:async (app:FastAPI)>AsyncGenerator[None, None]::Application lifespan handler for startup/shutdown events.","create_app:29:()>FastAPI:health,root:Create and configure the FastAPI application."]],"nikita/api/schemas/conversation.py":["p",{"MessageRequest":["11",[]],"MessageResponse":["18",[]],"ConversationMessage":["27",[]],"ConversationResponse":["36",[]],"ConversationSummary":["52",[]]}],"nikita/api/schemas/game.py":["p",{"ScoreHistoryResponse":["11",[]],"DailySummaryResponse":["24",[]],"GameStateResponse":["40",[]],"BossEncounterResponse":["62",[]],"VicePreferenceResponse":["73",[]]}],"nikita/api/schemas/user.py":["p",{"UserCreate":["10",[]],"UserResponse":["18",[]],"UserStatsResponse":["32",[]],"ScorePointResponse":["44",[]],"UserMetricsResponse":["51",[]]}],"nikita/config/elevenlabs.py":["p",["get_elevenlabs_config:55:()>ElevenLabsConfig::Get cached ElevenLabs config instance.","get_agent_id:74:(chapter:int = 1, mood:str | None = None, is_boss:bool = False,)>str:get_agents_dict,get_elevenlabs_config:"],{"ElevenLabsConfig":["9",["get_agents_dict:38:(self)>dict[str, str]::Get all agent IDs as a dictionary."]]}],"nikita/config/settings.py":["p",["get_settings:82:()>Settings::Get cached settings instance."],{"Settings":["10",[]]}],"nikita/db/database.py":["p",["get_async_engine:21:()::","get_session_maker:53:()>async_sessionmaker[AsyncSession]:get_async_engine:","get_async_session:67:async ()>AsyncGenerator[AsyncSession, None]:get_session_maker:","_get_supabase_sync_client:84:()::Get cached Supabase sync client (for module-level use).","get_supabase_client:90:async ()>AsyncClient:_get_supabase_sync_client:Get Supabase async client.","get_pool_status:96:()>dict:get_async_engine:"]],"nikita/db/dependencies.py":["p",["get_user_repo:29:async (session:AsyncSessionDep,)>AsyncGenerator[UserRepository, None]::","get_metrics_repo:43:async (session:AsyncSessionDep,)>AsyncGenerator[UserMetricsRepository, None]::","get_conversation_repo:57:async (session:AsyncSessionDep,)>AsyncGenerator[ConversationRepository, None]::","get_score_history_repo:71:async (session:AsyncSessionDep,)>AsyncGenerator[ScoreHistoryRepository, None]::","get_vice_repo:85:async (session:AsyncSessionDep,)>AsyncGenerator[VicePreferenceRepository, None]::","get_summary_repo:99:async (session:AsyncSessionDep,)>AsyncGenerator[DailySummaryRepository, None]::"]],"nikita/db/migrations/env.py":["p",["get_url:36:()>str::Get database URL from settings.","run_migrations_offline:42:()>None:get_url:","do_run_migrations:65:(connection:Connection)>None::Run migrations with given connection.","run_async_migrations:73:async ()>None:get_url:","run_migrations_online:98:()>None:run_async_migrations:Run migrations in 'online' mode."]],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["p",["upgrade:28:()>None::Create initial schema.","downgrade:300:()>None::Drop all tables in reverse order (AC-T9.7: Reversible)."]],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["p",["upgrade:25:()>None::Enable RLS and create policies.","downgrade:125:()>None::Drop RLS policies and disable RLS."]],"nikita/db/models/base.py":["p",["utc_now:45:()>datetime::Get current UTC datetime."],{"Base":["11",[]],"TimestampMixin":["19",[]],"UUIDMixin":["35",[]]}],"nikita/db/models/conversation.py":["p",{"Conversation":["28",["add_message:92:(self, role:str, content:str, analysis:dict[str, Any] | None = None,)>None::Add a message to the conversation.","message_count:104:(self)>int::Get total number of messages."]],"MessageEmbedding":["109",[]]}],"nikita/db/models/game.py":["p",{"ScoreHistory":["19",[]],"DailySummary":["69",["score_change:111:(self)>Decimal | None::Calculate net score change for the day."]]}],"nikita/db/models/user.py":["p",{"User":["28",[]],"UserMetrics":["121",["calculate_composite_score:164:(self)>Decimal::"]],"UserVicePreference":["178",[]]}],"nikita/db/repositories/base.py":["p",{"BaseRepository":["18",["__init__:37:(self, session:AsyncSession, model_class:type[ModelT])>None::","get_by_telegram_id:32:async (self, telegram_id:int)>User | None::","session:48:(self)>AsyncSession:session:","get:58:async (self, id:UUID)>ModelT | None:get:","create:69:async (self, entity:ModelT)>ModelT::","update:83:async (self, entity:ModelT)>ModelT:create,get,session:","delete:99:async (self, entity:ModelT)>None:delete:","delete_by_id:108:async (self, id:UUID)>bool:delete,get:"]]}],"nikita/db/repositories/conversation_repository.py":["p",{"ConversationRepository":["18",["__init__:25:(self, session:AsyncSession)>None:__init__:Initialize ConversationRepository.","create_conversation:36:async (self, user_id:UUID, platform:str, started_at:datetime | None = None, is_boss_fight:bool = False, chapter_at_time:int | None = None,)>Conversation::","append_message:65:async (self, conversation_id:UUID, role:str, content:str, analysis:dict[str, Any] | None = None,)>Conversation::","get_recent:95:async (self, user_id:UUID, limit:int = 10,)>list[Conversation]::","search:118:async (self, user_id:UUID, query:str,)>list[Conversation]:search:","close_conversation:147:async (self, conversation_id:UUID, score_delta:Decimal | None = None,)>Conversation::"]]}],"nikita/db/repositories/metrics_repository.py":["p",{"UserMetricsRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize UserMetricsRepository.","get_by_user_id:26:async (self, user_id:UUID)>UserMetrics | None::","update_metrics:46:async (self, user_id:UUID, intimacy_delta:Decimal = Decimal(\"0\"), passion_delta:Decimal = Decimal(\"0\"), trust_delta:Decimal = Decimal(\"0\"), secureness_delta:Decimal = Decimal(\"0\"),)>UserMetrics:_clamp,get_by_user_id:","calculate_composite:77:async (self, user_id:UUID)>Decimal:get_by_user_id:","_clamp:96:(value:Decimal)>Decimal::Clamp value between 0 and 100."]]}],"nikita/db/repositories/score_history_repository.py":["p",{"ScoreHistoryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize ScoreHistoryRepository.","log_event:35:async (self, user_id:UUID, score:Decimal, chapter:int, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>ScoreHistory::","get_history:63:async (self, user_id:UUID, limit:int = 50,)>list[ScoreHistory]::","get_daily_stats:86:async (self, user_id:UUID, target_date:date,)>dict[str, Any]::","get_events_by_type:140:async (self, user_id:UUID, event_type:str, limit:int = 50,)>list[ScoreHistory]::"]]}],"nikita/db/repositories/summary_repository.py":["p",{"DailySummaryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize DailySummaryRepository.","create_summary:38:async (self, user_id:UUID, summary_date:date, score_start:Decimal | None = None, score_end:Decimal | None = None, decay_applied:Decimal | None = None, conversations_count:int = 0, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None,)>DailySummary::","get_by_date:72:async (self, user_id:UUID, summary_date:date,)>DailySummary | None::","get_range:95:async (self, user_id:UUID, start_date:date, end_date:date,)>list[DailySummary]::","update_summary:122:async (self, summary_id:UUID, score_end:Decimal | None = None, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None,)>DailySummary::","get_recent:157:async (self, user_id:UUID, limit:int = 7,)>list[DailySummary]::"]]}],"nikita/db/repositories/user_repository.py":["p",{"UserRepository":["21",["__init__:30:(self, session:AsyncSession)>None:__init__:","get:38:async (self, user_id:UUID)>User | None::","get_by_telegram_id:55:async (self, telegram_id:int)>User | None::","create_with_metrics:77:async (self, user_id:UUID, telegram_id:int | None = None, phone:str | None = None,)>User::","update_score:126:async (self, user_id:UUID, delta:Decimal, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>User:get:","apply_decay:171:async (self, user_id:UUID, decay_amount:Decimal,)>User:update_score:","advance_chapter:188:async (self, user_id:UUID)>User:get:"]]}],"nikita/db/repositories/vice_repository.py":["p",{"VicePreferenceRepository":["17",["__init__:23:(self, session:AsyncSession)>None:__init__:Initialize VicePreferenceRepository.","get_active:27:async (self, user_id:UUID)>list[UserVicePreference]::","get_by_category:48:async (self, user_id:UUID, category:str,)>UserVicePreference | None::","update_intensity:70:async (self, preference_id:UUID, delta:int,)>UserVicePreference::","discover:101:async (self, user_id:UUID, category:str, initial_intensity:int = 1,)>UserVicePreference:get_by_category:","update_engagement:131:async (self, preference_id:UUID, delta:Decimal,)>UserVicePreference::"]]}],"nikita/db/transactions.py":["p",["is_deadlock_error:40:(error:Exception)>bool::","atomic:67:(isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, max_retries:int = DEFAULT_MAX_RETRIES, base_delay:float = DEFAULT_BASE_DELAY,)>Callable[[Callable[P, T]], Callable[P, T]]:atomic,decorator,is_deadlock_error,transfer_funds,wrapper:","run_in_transaction:162:async (session:AsyncSession, func:Callable[..., Any], *args:Any, isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, **kwargs:Any,)>Any:_wrapped,atomic:"]],"nikita/memory/graphiti_client.py":["p",["get_memory_client:258:async (user_id:str)>NikitaMemory:initialize:"],{"NikitaMemory":["13",["__init__:23:(self, user_id:str)::","initialize:46:async (self)>None::Initialize the knowledge graph indices and constraints.","_get_group_id:50:(self, graph_type:str)>str::Get the group ID for a specific graph type.","add_episode:60:async (self, content:str, source:str, graph_type:str = \"relationship\", metadata:dict[str, Any] | None = None,)>None:_get_group_id,add_episode:","search_memory:86:async (self, query:str, graph_types:list[str] | None = None, limit:int = 10,)>list[dict[str, Any]]:_get_group_id:","get_context_for_prompt:124:async (self, user_message:str, max_memories:int = 5,)>str:search_memory:","add_user_fact:171:async (self, fact:str, confidence:float = 0.8, source_message:str | None = None,)>None:add_episode:","get_user_facts:191:async (self, limit:int = 50)>list[str]:_get_group_id:","add_relationship_episode:223:async (self, description:str, episode_type:str = \"general\",)>None:add_episode:","add_nikita_event:242:async (self, description:str, event_type:str = \"life_event\",)>None:add_episode:"]]}],"nikita/prompts/nikita_persona.py":["p",["get_nikita_persona:144:()>str::"]],"t/agents/text/test_agent.py":["p",{"TestNikitaAgentConfiguration":["16",["test_agent_module_importable:19:(self)::Agent module should be importable without API key.","test_ac_1_3_1_model_name_constant:27:(self)::AC-1.3.1: MODEL_NAME is anthropic:claude-sonnet-4-20250514.","test_ac_1_3_2_uses_nikita_deps:38:(self)::AC-1.3.2: Agent has deps_type=NikitaDeps."]],"TestNikitaAgentSystemPrompt":["47",["test_ac_1_3_3_system_prompt_includes_persona:51:async (self)::AC-1.3.3: System prompt includes NIKITA_PERSONA.","test_ac_1_3_3_system_prompt_includes_chapter_behavior:69:async (self)::AC-1.3.3: System prompt includes CHAPTER_BEHAVIORS.","test_ac_1_3_3_system_prompt_includes_memory_context:86:async (self)::AC-1.3.3: System prompt includes memory context.","test_system_prompt_varies_by_chapter:102:async (self)::System prompt should change based on chapter."]],"TestNikitaAgentInvocation":["122",["test_ac_1_3_4_agent_has_run_method:129:(self)::AC-1.3.4: Agent should have a run method.","test_agent_run_is_async:141:(self)::Agent.run should be an async method."]],"TestGenerateResponse":["151",["test_generate_response_exists:154:(self)::generate_response function should exist.","test_generate_response_is_async:161:async (self)::generate_response should be async."]]}],"t/agents/text/test_chapter_behavior.py":["p",{"TestChapterBehaviorInjection":["14",["test_ac_3_2_1_ch1_prompt_contains_skeptical_behavior:18:async (self)::AC-3.2.1: Ch1 prompts should contain skeptical/evaluating behaviors.","test_ac_3_2_1_ch1_response_rate_in_prompt:37:async (self)::AC-3.2.1: Ch1 prompt should mention 60-75% response rate.","test_ac_3_2_2_ch3_prompt_contains_vulnerable_behavior:52:async (self)::AC-3.2.2: Ch3 prompts should contain emotionally vulnerable behaviors.","test_ac_3_2_2_ch3_response_rate_in_prompt:71:async (self)::AC-3.2.2: Ch3 prompt should mention 85-95% response rate.","test_ac_3_2_3_ch5_prompt_contains_authentic_behavior:86:async (self)::AC-3.2.3: Ch5 prompts should contain consistent/authentic behaviors.","test_ac_3_2_3_ch5_response_rate_in_prompt:105:async (self)::AC-3.2.3: Ch5 prompt should mention 95-100% response rate.","test_ac_3_2_4_prompts_differ_by_chapter:120:async (self)::AC-3.2.4: Different chapters should produce different prompts.","test_ac_3_2_4_prompt_has_current_chapter_behavior_label:138:async (self)::AC-3.2.4: Prompt should have labeled CURRENT CHAPTER BEHAVIOR section.","test_chapter_names_match_constants:153:async (self)::Chapter names in behavior should match CHAPTER_NAMES constant."]],"TestChapterBehaviorProgression":["171",["test_response_rate_increases_through_chapters:175:async (self)::Response rate should generally increase through chapters.","test_emotional_openness_increases_through_chapters:199:async (self)::Emotional openness indicators should increase through chapters.","test_ch1_has_testing_evaluation_keywords:224:async (self)::Chapter 1 should focus on testing/evaluation.","test_ch5_has_stability_keywords:243:async (self)::Chapter 5 should focus on stability/consistency."]],"TestDefaultChapterBehavior":["262",["test_invalid_chapter_falls_back_to_ch1:266:async (self)::Invalid chapter numbers should fall back to Chapter 1 behavior.","test_chapter_6_falls_back_to_ch1:283:async (self)::Chapter 6 (non-existent) should fall back to default behavior."]]}],"t/agents/text/test_deps.py":["p",{"TestNikitaDepsStructure":["16",["test_is_dataclass:19:(self)::NikitaDeps should be a dataclass.","test_ac_1_2_1_has_memory_field:25:(self)::AC-1.2.1: NikitaDeps contains memory: NikitaMemory.","test_ac_1_2_2_has_user_field:32:(self)::AC-1.2.2: NikitaDeps contains user: User.","test_ac_1_2_3_has_settings_field:39:(self)::AC-1.2.3: NikitaDeps contains settings: Settings.","test_ac_1_2_5_type_hints_complete:46:(self)::AC-1.2.5: Type hints complete for Pydantic AI compatibility."]],"TestNikitaDepsProperties":["54",["test_ac_1_2_4_chapter_property:57:(self)::AC-1.2.4: chapter property returns user.chapter.","test_chapter_property_follows_user_changes:75:(self)::Chapter property should reflect user.chapter changes."]],"TestNikitaDepsInstantiation":["96",["test_can_instantiate_with_mocks:99:(self)::Should be able to create NikitaDeps with mock objects.","test_requires_all_fields:117:(self)::Should require all fields to instantiate."]]}],"t/agents/text/test_factory.py":["p",{"TestGetNikitaAgentForUser":["16",["test_function_exists:19:(self)::Factory function should exist and be importable.","test_ac_1_4_1_accepts_user_id:26:async (self)::AC-1.4.1: Function accepts user_id: UUID parameter.","test_function_is_async:35:async (self)::Factory function should be async.","test_ac_1_4_4_returns_tuple_with_deps:43:async (self)::AC-1.4.4: Function returns tuple (Agent, NikitaDeps).","test_ac_1_4_2_loads_user:77:async (self)::AC-1.4.2: Function loads user from database.","test_ac_1_4_3_initializes_memory:98:async (self)::AC-1.4.3: Function initializes NikitaMemory for user.","test_ac_1_4_5_handles_user_not_found:119:async (self)::AC-1.4.5: Function handles user not found with appropriate error."]]}],"t/agents/text/test_facts.py":["p",{"TestFactsModule":["17",["test_facts_module_importable:20:(self)::Facts module should be importable.","test_extracted_fact_dataclass:27:(self)::ExtractedFact should be a dataclass with required fields.","test_extracted_fact_has_fact_type:41:(self)::ExtractedFact should have fact_type field (explicit/implicit)."]],"TestFactExtractor":["63",["test_fact_extractor_class_exists:66:(self)::FactExtractor class should exist.","test_ac_6_1_1_extract_facts_method_exists:72:(self)::AC-6.1.1: extract_facts async method should exist.","test_extract_facts_signature:83:(self)::extract_facts should accept user_message, nikita_response, existing_facts.","test_ac_6_1_4_returns_list_of_extracted_facts:97:async (self)::AC-6.1.4: Should return list[ExtractedFact].","test_extracted_fact_has_required_fields:125:async (self)::Each ExtractedFact should have fact, confidence, source."]],"TestExplicitFacts":["153",["test_ac_6_1_2_extracts_explicit_facts:157:async (self)::AC-6.1.2: Should identify explicit facts user states directly.","test_explicit_facts_have_high_confidence:189:async (self)::Explicit facts should have high confidence (>0.8)."]],"TestImplicitFacts":["216",["test_ac_6_1_3_extracts_implicit_facts:220:async (self)::AC-6.1.3: Should identify implicit facts inferred from context.","test_implicit_facts_have_lower_confidence:246:async (self)::Implicit facts should have lower confidence (<0.9)."]],"TestFactDeduplication":["273",["test_ac_6_1_5_avoids_extracting_known_facts:277:async (self)::AC-6.1.5: Should not extract facts that already exist.","test_deduplication_is_case_insensitive:315:async (self)::Deduplication should work regardless of case."]],"TestEmptyResults":["343",["test_returns_empty_list_when_no_facts:347:async (self)::Should return empty list when no facts found.","test_handles_small_talk_gracefully:363:async (self)::Small talk should not generate facts."]]}],"t/agents/text/test_handler.py":["p",{"TestMessageHandlerStructure":["18",["test_handler_module_importable:21:(self)::Handler module should be importable.","test_ac_4_2_5_response_decision_exists:28:(self)::AC-4.2.5: ResponseDecision dataclass should exist.","test_response_decision_has_delay_seconds:34:(self)::ResponseDecision should have delay_seconds field.","test_response_decision_has_scheduled_at:48:(self)::ResponseDecision should have scheduled_at field."]],"TestMessageHandler":["63",["test_message_handler_class_exists:66:(self)::MessageHandler class should exist.","test_ac_4_2_1_handle_method_exists:72:(self)::AC-4.2.1: MessageHandler.handle(user_id, message) should exist.","test_handle_method_signature:83:(self)::Handle method should accept user_id and message parameters.","test_ac_4_2_2_handler_generates_response:96:async (self)::AC-4.2.2: Handler should generate response via agent.","test_ac_4_2_3_handler_calculates_delay:133:async (self)::AC-4.2.3: Handler should calculate delay via ResponseTimer.","test_ac_4_2_5_handler_returns_response_decision:171:async (self)::AC-4.2.5: Handler should return ResponseDecision with delay_seconds."]],"TestResponseDecisionScheduling":["215",["test_scheduled_at_is_future:218:(self)::scheduled_at should be in the future based on delay.","test_handler_calculates_correct_scheduled_time:235:async (self)::Handler should calculate scheduled_at based on now + delay."]],"TestPendingResponseStorage":["281",["test_ac_4_2_4_handler_stores_pending_response:285:async (self)::AC-4.2.4: Handler should store pending response with scheduled delivery time.","test_response_decision_has_response_id:329:(self)::ResponseDecision should have response_id for tracking."]]}],"t/agents/text/test_handler_facts.py":["p",{"TestResponseDecisionFacts":["16",["test_ac_6_3_4_response_decision_has_facts_extracted:19:(self)::AC-6.3.4: ResponseDecision should have facts_extracted list.","test_facts_extracted_default_empty_list:31:(self)::facts_extracted should default to empty list.","test_facts_extracted_can_contain_facts:43:(self)::facts_extracted should be able to contain ExtractedFact objects."]],"TestHandlerFactExtraction":["68",["test_ac_6_3_1_handler_calls_fact_extractor:72:async (self)::AC-6.3.1: Handler calls FactExtractor after agent generates response.","test_fact_extractor_receives_correct_arguments:118:async (self)::FactExtractor should receive user_message, nikita_response, and existing_facts.","test_ac_6_3_2_extracted_facts_stored_via_memory:169:async (self)::AC-6.3.2: Extracted facts stored via memory.add_user_fact().","test_ac_6_3_4_response_includes_extracted_facts:234:async (self)::AC-6.3.4: ResponseDecision includes facts_extracted list.","test_no_fact_extraction_when_skipped:290:async (self)::Should not extract facts when message is skipped."]],"TestHandlerWithDefaultFactExtractor":["327",["test_handler_creates_fact_extractor_if_none:330:(self)::Handler should create FactExtractor if none provided.","test_handler_uses_provided_fact_extractor:340:(self)::Handler should use provided FactExtractor."]],"TestFactExtractionWithEmptyResults":["351",["test_empty_facts_handled_gracefully:355:async (self)::Handler should handle empty fact extraction results gracefully."]]}],"t/agents/text/test_handler_skip.py":["p",{"TestSkipDecisionIntegration":["20",["test_response_decision_has_should_respond:23:(self)::ResponseDecision should have should_respond field.","test_response_decision_should_respond_default_true:38:(self)::ResponseDecision.should_respond should default to True.","test_ac_5_2_5_response_decision_false_when_skipped:51:(self)::AC-5.2.5: ResponseDecision.should_respond = False when skipped.","test_response_decision_has_skip_reason:66:(self)::ResponseDecision should have skip_reason field."]],"TestHandlerSkipDecision":["82",["test_ac_5_2_1_handler_checks_skip_before_agent:86:async (self)::AC-5.2.1: Handler checks SkipDecision.should_skip() before agent.run().","test_handler_skips_agent_when_should_skip_true:128:async (self)::When should_skip returns True, handler should not call agent.","test_ac_5_2_5_skipped_response_decision:165:async (self)::AC-5.2.5: When skipped, ResponseDecision.should_respond = False."]],"TestSkipLogging":["196",["test_ac_5_2_2_skipped_messages_logged:200:async (self, caplog)::AC-5.2.2: Skipped messages should be logged with reason.","test_skip_reason_in_response_decision:231:async (self)::Skip reason should be included in ResponseDecision."]],"TestConsecutiveSkipState":["261",["test_ac_5_2_3_skip_state_stored:265:async (self)::AC-5.2.3: Skip state stored so consecutive messages don't all skip.","test_ac_5_2_4_next_message_after_skip_processes:292:async (self)::AC-5.2.4: Next message after skip processes normally."]],"TestSkipDoesNotStore":["345",["test_skipped_message_not_stored:349:async (self)::Skipped messages should not call store_pending_response."]],"TestHandlerWithDefaultSkip":["380",["test_handler_creates_skip_decision_if_none:383:(self)::Handler should create SkipDecision if none provided.","test_handler_uses_provided_skip_decision:393:(self)::Handler should use provided SkipDecision."]]}],"t/agents/text/test_nikita_persona.py":["p",{"TestNikitaPersona":["15",["test_ac_1_1_1_backstory_elements:18:(self)::AC-1.1.1: Persona includes complete backstory.","test_ac_1_1_2_communication_style_rules:32:(self)::AC-1.1.2: Communication style rules defined.","test_ac_1_1_3_interests_listed:43:(self)::AC-1.1.3: Interests listed.","test_ac_1_1_4_values_defined:53:(self)::AC-1.1.4: Values defined.","test_ac_1_1_5_negative_examples_section:63:(self)::AC-1.1.5: Negative examples section exists.","test_ac_1_1_6_at_least_10_example_responses:72:(self)::AC-1.1.6: At least 10 example responses.","test_persona_is_string:84:(self)::Persona should be a string for prompt injection.","test_persona_has_prompt_format_markers:91:(self)::Persona should be structured for LLM consumption."]],"TestGetPersonaPrompt":["101",["test_get_persona_returns_string:104:(self)::Function should return the persona string.","test_get_persona_matches_constant:112:(self)::Function should return the NIKITA_PERSONA constant."]]}],"t/agents/text/test_skip.py":["p",{"TestSkipRates":["15",["test_skip_module_importable:18:(self)::Skip module should be importable.","test_ac_5_1_1_skip_rates_is_dict:25:(self)::AC-5.1.1: SKIP_RATES should be a dict mapping chapter to (min, max).","test_ac_5_1_2_ch1_skip_rate:44:(self)::AC-5.1.2: Ch1 rate should be 25-40% skip.","test_ac_5_1_3_ch5_skip_rate:54:(self)::AC-5.1.3: Ch5 rate should be 0-5% skip.","test_skip_rates_decrease_through_chapters:64:(self)::Skip rates should generally decrease as chapters progress."]],"TestSkipDecision":["76",["test_skip_decision_class_exists:79:(self)::SkipDecision class should exist.","test_ac_5_1_4_should_skip_returns_bool:85:(self)::AC-5.1.4: should_skip(chapter) should return bool.","test_should_skip_accepts_chapter_parameter:94:(self)::should_skip should accept chapter parameter.","test_ac_5_1_5_skip_is_randomized:104:(self)::AC-5.1.5: Skip probability should be randomized within range.","test_ch1_skip_rate_within_expected_range:117:(self)::Ch1 should skip 25-40% of messages.","test_ch5_skip_rate_within_expected_range:130:(self)::Ch5 should skip 0-5% of messages.","test_skip_rate_varies_by_chapter:143:(self)::Skip rates should vary significantly between chapters.","test_invalid_chapter_uses_default:159:(self)::Invalid chapter should use a default skip rate."]],"TestSkipRatesByChapter":["173",["test_ch2_skip_rate:176:(self)::Ch2 should have rate 15-25%.","test_ch3_skip_rate:184:(self)::Ch3 should have rate 5-15%.","test_ch4_skip_rate:192:(self)::Ch4 should have rate 2-10%."]],"TestSkipConsecutiveMessages":["201",["test_skip_decision_tracks_last_skip:204:(self)::SkipDecision should track if last message was skipped.","test_consecutive_skips_less_likely:213:(self)::After a skip, next message should be less likely to skip."]]}],"t/agents/text/test_timing.py":["p",{"TestTimingRanges":["16",["test_timing_module_importable:19:(self)::Timing module should be importable.","test_ac_4_1_1_timing_ranges_is_dict:26:(self)::AC-4.1.1: TIMING_RANGES should be a dict mapping chapter to (min, max).","test_ac_4_1_2_ch1_range:45:(self)::AC-4.1.2: Ch1 range should be 600-28800s (10min-8h).","test_ac_4_1_3_ch5_range:56:(self)::AC-4.1.3: Ch5 range should be 300-1800s (5min-30min).","test_ranges_for_all_chapters:67:(self)::All 5 chapters should have timing ranges defined."]],"TestResponseTimer":["75",["test_response_timer_class_exists:78:(self)::ResponseTimer class should exist.","test_ac_4_1_4_calculate_delay_returns_int:84:(self)::AC-4.1.4: calculate_delay(chapter) should return int seconds.","test_calculate_delay_within_chapter_range:94:(self)::calculate_delay should return values within the chapter's range.","test_ac_4_1_5_distribution_not_uniform:109:(self)::AC-4.1.5: Distribution should be gaussian (clustered around mean).","test_ac_4_1_6_jitter_prevents_exact_patterns:134:(self)::AC-4.1.6: Random jitter should prevent exact repetition.","test_invalid_chapter_uses_default:147:(self)::Invalid chapter should fall back to a default range."]],"TestTimingProgression":["163",["test_timing_reduces_through_chapters:166:(self)::Response timing ranges should reduce as chapters progress.","test_average_delay_decreases_through_chapters:177:(self)::Average delays should decrease through chapters."]],"TestTimingRangesByChapter":["195",["test_ch2_timing_range:198:(self)::Ch2 should have range 300-14400s (5min-4h).","test_ch3_timing_range:209:(self)::Ch3 should have range 300-7200s (5min-2h).","test_ch4_timing_range:220:(self)::Ch4 should have range 300-3600s (5min-1h)."]]}],"t/agents/text/test_tools.py":["p",{"TestRecallMemoryTool":["23",["test_tools_module_importable:26:(self)::Tools module should be importable.","test_ac_2_2_1_tool_is_decorated:32:(self)::AC-2.2.1: Tool should be decorated with @agent.tool(retries=2).","test_ac_2_2_1_tool_registered_with_agent:45:(self)::AC-2.2.1: Tool is registered with the agent with retries=2.","test_ac_2_2_2_accepts_query_parameter:60:(self)::AC-2.2.2: Tool accepts query: str parameter.","test_ac_2_2_3_calls_search_memory:73:async (self)::AC-2.2.3: Tool calls memory.search_memory(query, limit=5).","test_ac_2_2_4_returns_formatted_results:98:async (self)::AC-2.2.4: Tool returns formatted string of results.","test_ac_2_2_5_handles_empty_results:141:async (self)::AC-2.2.5: Tool handles empty results gracefully."]],"TestFormatMemoryResults":["164",["test_format_function_exists:167:(self)::format_memory_results helper should exist.","test_format_with_multiple_results:173:(self)::Should format multiple memory results nicely.","test_format_empty_results:202:(self)::Should return appropriate message for empty results.","test_format_single_result:211:(self)::Should format a single result correctly.","test_format_handles_missing_created_at:230:(self)::Should handle results with missing created_at."]],"TestNoteUserFactTool":["250",["test_note_user_fact_exists:253:(self)::note_user_fact function should exist in tools module.","test_ac_6_2_1_tool_is_callable:259:(self)::AC-6.2.1: Tool should be callable (decorated with @agent.tool).","test_ac_6_2_1_tool_registered_with_agent:270:(self)::AC-6.2.1: Tool is registered with the agent.","test_ac_6_2_2_accepts_fact_and_confidence_parameters:285:(self)::AC-6.2.2: Tool accepts fact: str and confidence: float parameters.","test_ac_6_2_3_calls_add_user_fact:299:async (self)::AC-6.2.3: Tool calls memory.add_user_fact(fact, confidence).","test_ac_6_2_4_returns_confirmation_string:324:async (self)::AC-6.2.4: Tool returns confirmation string.","test_tool_handles_high_confidence_fact:347:async (self)::Tool should handle high confidence facts (explicit).","test_tool_handles_low_confidence_fact:367:async (self)::Tool should handle lower confidence facts (implicit)."]]}],"t/db/repositories/test_base.py":["p",{"MockModel":["21",[]],"TestBaseRepository":["33",["mock_session:37:(self)>AsyncMock::Create a mock AsyncSession.","test_base_repository_accepts_async_session:51:(self, mock_session:AsyncMock)::AC-T1.1: BaseRepository class accepts AsyncSession in __init__.","test_base_repository_requires_session:61:(self)::AC-T1.1: BaseRepository requires session parameter.","test_base_repository_session_property:71:(self, mock_session:AsyncMock)::AC-T1.2: BaseRepository exposes session property for subclasses.","test_session_property_readonly:80:(self, mock_session:AsyncMock)::AC-T1.2: Session property should be read-only.","test_get_method_returns_entity:94:async (self, mock_session:AsyncMock)::AC-T1.3: get(id) returns entity by primary key.","test_get_method_returns_none_for_missing:109:async (self, mock_session:AsyncMock)::AC-T1.3: get(id) returns None if entity not found.","test_create_method_adds_entity:121:async (self, mock_session:AsyncMock)::AC-T1.3: create(entity) adds and returns entity.","test_update_method_flushes_changes:136:async (self, mock_session:AsyncMock)::AC-T1.3: update(entity) flushes entity changes.","test_delete_method_removes_entity:150:async (self, mock_session:AsyncMock)::AC-T1.3: delete(entity) removes entity from session.","test_delete_by_id_method:163:async (self, mock_session:AsyncMock)::AC-T1.3: delete_by_id(id) gets and deletes entity.","test_delete_by_id_returns_false_for_missing:181:async (self, mock_session:AsyncMock)::AC-T1.3: delete_by_id(id) returns False if entity not found."]],"TestBaseRepositorySubclassing":["194",["mock_session:198:(self)>AsyncMock::Create a mock AsyncSession.","test_subclass_can_access_session:202:(self, mock_session:AsyncMock):custom_method:Verify subclasses can access session via property.","custom_method:207:(self)::","test_subclass_inherits_crud:214:(self, mock_session:AsyncMock)::Verify subclasses inherit CRUD methods."]]}],"t/db/repositories/test_user_repository.py":["p",{"TestUserRepository":["22",["mock_session:26:(self)>AsyncMock::Create a mock AsyncSession.","test_get_returns_user_with_metrics:43:async (self, mock_session:AsyncMock)::AC-T2.1: get(user_id) returns User with eager-loaded metrics.","test_get_returns_none_for_missing:64:async (self, mock_session:AsyncMock)::AC-T2.1: get(user_id) returns None if user not found.","test_get_by_telegram_id_returns_user:81:async (self, mock_session:AsyncMock)::AC-T2.2: get_by_telegram_id(telegram_id) returns User.","test_get_by_telegram_id_returns_none:100:async (self, mock_session:AsyncMock)::AC-T2.2: get_by_telegram_id returns None if not found.","test_create_creates_user_and_metrics:117:async (self, mock_session:AsyncMock)::AC-T2.3: create() creates User + UserMetrics atomically.","test_create_sets_default_metrics:135:async (self, mock_session:AsyncMock)::AC-T2.3: create() sets default metrics values (50.00).","test_update_score_updates_user_and_logs:152:async (self, mock_session:AsyncMock)::AC-T2.4: update_score updates user score and logs to history.","test_update_score_clamps_to_100:179:async (self, mock_session:AsyncMock)::AC-T2.4: update_score clamps score to max 100.","test_update_score_clamps_to_0:197:async (self, mock_session:AsyncMock)::AC-T2.4: update_score clamps score to min 0.","test_apply_decay_reduces_score:218:async (self, mock_session:AsyncMock)::AC-T2.5: apply_decay reduces score by decay amount.","test_apply_decay_logs_event:236:async (self, mock_session:AsyncMock)::AC-T2.5: apply_decay logs decay event to score_history.","test_advance_chapter_increments:264:async (self, mock_session:AsyncMock)::AC-T2.6: advance_chapter increments chapter by 1.","test_advance_chapter_caps_at_5:282:async (self, mock_session:AsyncMock)::AC-T2.6: advance_chapter does not exceed chapter 5.","test_advance_chapter_logs_event:300:async (self, mock_session:AsyncMock)::AC-T2.6: advance_chapter logs chapter_advance event.","test_advance_chapter_resets_boss_attempts:319:async (self, mock_session:AsyncMock)::AC-T2.6: advance_chapter resets boss_attempts to 0."]]}]},"g":[["VicePreferenceRepository.discover","get_by_category"],["DailySummaryRepository.__init__","__init__"],["UserRepository.__init__","SkipDecision.__init__"],["ConversationRepository.__init__","MessageHandler.__init__"],["DailySummaryRepository.__init__","SkipDecision.__init__"],["VicePreferenceRepository.__init__","MessageHandler.__init__"],["get_pool_status","get_async_engine"],["UserMetricsRepository.__init__","__init__"],["ScoreHistoryRepository.__init__","DailySummaryRepository.__init__"],["UserNotFoundError.__init__","VicePreferenceRepository.__init__"],["get_memory_client","NikitaMemory.initialize"],["ScoreHistoryRepository.__init__","__init__"],["UserRepository.__init__","UserNotFoundError.__init__"],["get_session_maker","get_async_engine"],["get_nikita_agent_for_user","get_user_by_id"],["UserMetricsRepository.__init__","SkipDecision.__init__"],["get_memory_client","initialize"],["NikitaMemory.add_user_fact","NikitaMemory.add_episode"],["NikitaMemory.add_episode","add_episode"],["run_in_transaction","atomic"],["UserRepository.__init__","ResponseTimer.__init__"],["UserNotFoundError.__init__","ConversationRepository.__init__"],["UserRepository.__init__","ScoreHistoryRepository.__init__"],["DailySummaryRepository.__init__","ResponseTimer.__init__"],["UserRepository.__init__","VicePreferenceRepository.__init__"],["ResponseTimer.calculate_delay_human_readable","calculate_delay"],["NikitaMemory.search_memory","NikitaMemory._get_group_id"],["get_agent_id","get_elevenlabs_config"],["DailySummaryRepository.__init__","VicePreferenceRepository.__init__"],["NikitaMemory.get_user_facts","NikitaMemory._get_group_id"],["recall_memory","format_memory_results"],["BaseRepository.update","BaseRepository.session"],["UserMetricsRepository.__init__","VicePreferenceRepository.__init__"],["DailySummaryRepository.__init__","FactExtractor.__init__"],["ConversationRepository.search","ConversationRepository.search"],["get_nikita_agent_for_user","get_memory_client"],["BaseRepository.delete_by_id","UserRepository.get"],["UserMetricsRepository.__init__","FactExtractor.__init__"],["ConversationRepository.search","search"],["ScoreHistoryRepository.__init__","FactExtractor.__init__"],["FactExtractor.extract_facts","_call_llm_for_extraction"],["UserRepository.update_score","get"],["UserRepository.advance_chapter","UserRepository.get"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","TestBaseRepositorySubclassing.custom_method"],["UserRepository.__init__","ConversationRepository.__init__"],["BaseRepository.delete_by_id","BaseRepository.get"],["DailySummaryRepository.__init__","ConversationRepository.__init__"],["UserNotFoundError.__init__","ScoreHistoryRepository.__init__"],["FactExtractor.extract_facts","FactExtractor._call_llm_for_extraction"],["ConversationRepository.__init__","UserMetricsRepository.__init__"],["UserMetricsRepository.__init__","ConversationRepository.__init__"],["ScoreHistoryRepository.__init__","UserRepository.__init__"],["UserRepository.advance_chapter","BaseRepository.get"],["MessageHandler.handle","generate_response"],["UserNotFoundError.__init__","MessageHandler.__init__"],["BaseRepository.session","session"],["FactExtractor.extract_facts","_deduplicate_facts"],["ConversationRepository.__init__","NikitaMemory.__init__"],["VicePreferenceRepository.__init__","NikitaMemory.__init__"],["ConversationRepository.__init__","BaseRepository.__init__"],["VicePreferenceRepository.__init__","BaseRepository.__init__"],["UserMetricsRepository.update_metrics","_clamp"],["run_in_transaction","_wrapped"],["BaseRepository.update","get"],["UserMetricsRepository.calculate_composite","UserMetricsRepository.get_by_user_id"],["DailySummaryRepository.__init__","UserNotFoundError.__init__"],["generate_response","_generate_response"],["ScoreHistoryRepository.__init__","SkipDecision.__init__"],["ConversationRepository.__init__","DailySummaryRepository.__init__"],["VicePreferenceRepository.__init__","DailySummaryRepository.__init__"],["UserMetricsRepository.__init__","UserNotFoundError.__init__"],["ConversationRepository.__init__","__init__"],["VicePreferenceRepository.__init__","__init__"],["NikitaMemory.add_user_fact","add_episode"],["ScoreHistoryRepository.__init__","UserNotFoundError.__init__"],["UserRepository.__init__","UserMetricsRepository.__init__"],["run_migrations_offline","get_url"],["UserMetricsRepository.update_metrics","get_by_user_id"],["DailySummaryRepository.__init__","ScoreHistoryRepository.__init__"],["UserMetricsRepository.__init__","ResponseTimer.__init__"],["UserMetricsRepository.__init__","ScoreHistoryRepository.__init__"],["UserRepository.__init__","MessageHandler.__init__"],["ScoreHistoryRepository.__init__","ResponseTimer.__init__"],["_create_nikita_agent","note_user_fact"],["ScoreHistoryRepository.__init__","ScoreHistoryRepository.__init__"],["DailySummaryRepository.__init__","MessageHandler.__init__"],["BaseRepository.update","create"],["ScoreHistoryRepository.__init__","VicePreferenceRepository.__init__"],["UserMetricsRepository.__init__","MessageHandler.__init__"],["VicePreferenceRepository.discover","VicePreferenceRepository.get_by_category"],["NikitaMemory.add_relationship_episode","NikitaMemory.add_episode"],["ConversationRepository.__init__","FactExtractor.__init__"],["UserNotFoundError.__init__","UserMetricsRepository.__init__"],["VicePreferenceRepository.__init__","FactExtractor.__init__"],["ResponseTimer.calculate_delay_human_readable","ResponseTimer.calculate_delay"],["UserRepository.update_score","UserRepository.get"],["BaseRepository.delete","delete"],["UserNotFoundError.__init__","NikitaMemory.__init__"],["ScoreHistoryRepository.__init__","ConversationRepository.__init__"],["get_agent_id","get_agents_dict"],["UserNotFoundError.__init__","BaseRepository.__init__"],["generate_response","build_system_prompt"],["get_nikita_agent","_create_nikita_agent"],["_create_nikita_agent","recall_memory"],["UserRepository.update_score","BaseRepository.get"],["ConversationRepository.__init__","UserRepository.__init__"],["BaseRepository.delete","BaseRepository.delete"],["VicePreferenceRepository.__init__","UserRepository.__init__"],["BaseRepository.get","UserRepository.get"],["UserNotFoundError.__init__","DailySummaryRepository.__init__"],["BaseRepository.delete_by_id","get"],["run_async_migrations","get_url"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","custom_method"],["BaseRepository.get","BaseRepository.get"],["BaseRepository.update","BaseRepository.create"],["ConversationRepository.__init__","SkipDecision.__init__"],["VicePreferenceRepository.__init__","SkipDecision.__init__"],["DailySummaryRepository.__init__","UserMetricsRepository.__init__"],["FactExtractor.extract_facts","FactExtractor._deduplicate_facts"],["ConversationRepository.__init__","UserNotFoundError.__init__"],["UserRepository.__init__","NikitaMemory.__init__"],["VicePreferenceRepository.__init__","UserNotFoundError.__init__"],["UserMetricsRepository.__init__","UserMetricsRepository.__init__"],["MessageHandler.handle","store_pending_response"],["UserRepository.__init__","BaseRepository.__init__"],["create_app","health"],["UserMetricsRepository.update_metrics","UserMetricsRepository._clamp"],["atomic","atomic"],["ScoreHistoryRepository.__init__","UserMetricsRepository.__init__"],["DailySummaryRepository.__init__","NikitaMemory.__init__"],["DailySummaryRepository.__init__","BaseRepository.__init__"],["create_app","root"],["BaseRepository.update","session"],["BaseRepository.delete_by_id","delete"],["_AgentProxy._real_agent","get_nikita_agent"],["atomic","wrapper"],["ConversationRepository.__init__","ResponseTimer.__init__"],["UserMetricsRepository.__init__","NikitaMemory.__init__"],["VicePreferenceRepository.__init__","ResponseTimer.__init__"],["MessageHandler.handle","get_nikita_agent_for_user"],["ScoreHistoryRepository.__init__","MessageHandler.__init__"],["UserRepository.__init__","DailySummaryRepository.__init__"],["VicePreferenceRepository.__init__","ScoreHistoryRepository.__init__"],["BaseRepository.session","BaseRepository.session"],["UserRepository.__init__","__init__"],["DailySummaryRepository.__init__","DailySummaryRepository.__init__"],["ConversationRepository.__init__","VicePreferenceRepository.__init__"],["NikitaMemory.get_context_for_prompt","NikitaMemory.search_memory"],["VicePreferenceRepository.__init__","VicePreferenceRepository.__init__"],["BaseRepository.delete_by_id","BaseRepository.delete"],["UserNotFoundError.__init__","FactExtractor.__init__"],["atomic","is_deadlock_error"],["UserMetricsRepository.__init__","DailySummaryRepository.__init__"],["UserMetricsRepository.calculate_composite","get_by_user_id"],["NikitaMemory.add_relationship_episode","add_episode"],["NikitaMemory.add_episode","NikitaMemory.add_episode"],["NikitaMemory.get_context_for_prompt","search_memory"],["run_migrations_online","run_async_migrations"],["get_supabase_client","_get_supabase_sync_client"],["get_nikita_agent_for_user","_get_nikita_agent_for_user"],["UserNotFoundError.__init__","UserRepository.__init__"],["NikitaMemory.add_episode","NikitaMemory._get_group_id"],["UserMetricsRepository.__init__","UserRepository.__init__"],["ConversationRepository.__init__","ConversationRepository.__init__"],["UserRepository.apply_decay","UserRepository.update_score"],["VicePreferenceRepository.__init__","ConversationRepository.__init__"],["NikitaMemory.add_episode","_get_group_id"],["UserNotFoundError.__init__","__init__"],["UserRepository.__init__","FactExtractor.__init__"],["UserNotFoundError.__init__","SkipDecision.__init__"],["BaseRepository.update","UserRepository.get"],["NikitaMemory.search_memory","_get_group_id"],["get_async_session","get_session_maker"],["UserRepository.advance_chapter","get"],["NikitaMemory.get_user_facts","_get_group_id"],["UserNotFoundError.__init__","UserNotFoundError.__init__"],["NikitaMemory.add_nikita_event","NikitaMemory.add_episode"],["UserMetricsRepository.update_metrics","UserMetricsRepository.get_by_user_id"],["BaseRepository.update","BaseRepository.get"],["atomic","decorator"],["UserRepository.__init__","UserRepository.__init__"],["atomic","transfer_funds"],["NikitaMemory.add_nikita_event","add_episode"],["UserNotFoundError.__init__","ResponseTimer.__init__"],["DailySummaryRepository.__init__","UserRepository.__init__"],["get_agent_id","ElevenLabsConfig.get_agents_dict"],["UserMetricsRepository.__init__","BaseRepository.__init__"],["UserRepository.apply_decay","update_score"],["ScoreHistoryRepository.__init__","NikitaMemory.__init__"],["ConversationRepository.__init__","ScoreHistoryRepository.__init__"],["ScoreHistoryRepository.__init__","BaseRepository.__init__"],["VicePreferenceRepository.__init__","UserMetricsRepository.__init__"],["BaseRepository.get","get"]],"d":{"CLAUDE.md":["CLAUDE.md","Core Constraints","Start","Repository Hygiene","State File Size Limits","Documentation Rules","Directory Structure"],"README.md":["Nikita: Don't Get Dumped","Overview","Tech Stack","Project Structure","Quick Start","Prerequisites","Installation","Clone repository","Create virtual environment","or: .venv\\Scripts\\activate  # Windows"],"docs-to-process/challenge_conflict_framework (2).md":["Challenge and Conflict Framework for Adult Relationship","Overview","Boss Encounter System","Boss Encounter Structure","Core Boss Encounters"],"docs-to-process/decision_trees_touchpoints.md":["Nikita GFE: Decision Trees & Conditional Touchpoints","Introduction","Core Decision Architecture","Master Decision Flow","Context Evaluation Decision Tree","Action Type Decision Tree"],"docs-to-process/emotional_engagement_mechanisms.md":["Nikita GFE: Emotional Engagement Mechanisms","Emotional System Overview","Emotional State Simulation","Core Emotional Architecture","Emotional State Generation","Mood Variation and Transitions","Mood System Architecture"],"docs-to-process/game_design_analysis (2).md":["Game-Inspired Architecture Analysis for Nikita GFE","Core Game Design Concepts for Adult Relationship Simulation","Chapters & Story Progression","Levels & Progression Mechanics","Relationship Points System","Experience Points & Skill Trees","Challenge & \"Boss\" Encounters","Reward Systems","Adult-Oriented Game Elements","Vice Progression System"],"docs-to-process/game_design_analysis (3).md":["Game-Inspired Architecture Analysis for Nikita GFE","Core Game Design Concepts for Adult Relationship Simulation","Chapters & Story Progression","Levels & Progression Mechanics","Relationship Points System","Experience Points & Skill Trees","Challenge & \"Boss\" Encounters","Reward Systems","Adult-Oriented Game Elements","Vice Progression System"],"docs-to-process/memory_personalization_system.md":["Nikita GFE: Memory & Personalization System","Advanced Memory Architecture","Memory System Overview","Memory Integration System"],"docs-to-process/messaging_platform_integration.md":["Nikita GFE: Messaging Platform Integration","Messaging System Overview","Messaging Patterns and Frequency","Message Initiation Framework","Messaging Frequency C"],"docs-to-process/nikita_gfe_final_concept (1).md":["Nikita GFE: Comprehensive Concept Document","Executive Summary","Core Concept Overview","Vision Statement","Key Experience Principles","Differentiation Factors","Nikita's Character Profile","Core Personality Traits"],"docs-to-process/nikita_personality_profile.md":["Nikita: Personality & Interaction Model","Core Personality Profile","Identity Overview","Key Personality Traits","Communication Style","Detailed Backstory","Personal History","Current Life Circumstances","Relationship History","Interaction Model"],"docs-to-process/personality_model_integration (1) (1).md":["Nikita Personality Model Integration with Vice Aspects","Overview","Personality Model Architecture","1. Core Personality Framework"],"docs-to-process/relationship_game_mechanics_research (2) (1).md":["Research: Adult Relationship and Vice-Oriented Game Mechanics","Key Relationship Mechanics from Game Research","Relationship Value Systems","Progression Mechanics","Vice-Oriented Mechanics","Challenge and Conflict Systems","Technical Implementation Approaches","State Management Systems","Progression Tracking"],"docs-to-process/relationship_journey_flowchart (1).md":["Nikita GFE: Relationship Journey Flowchart & Decision System","Introduction","Relationship Stage Framework","Stage 1: Initial Connection (Days 1-14)","Stage 2: Growing Intrigue (Days 15-35)","Stage 3: Emotional Investment (Days 36-70)"],"docs-to-process/relationship_points_experience_system (2).md":["Relationship Points and Experience System with Vice Elements","Overview","Core Relationship Metrics","1. Intimacy Points","2. Passion Points","3. Trust Points","4. Understanding Points","5. Vice Points"],"docs-to-process/relationship_progression_system.md":["Nikita GFE: Real-Time Relationship Progression System","Relationship System Overview","Relationship Stage Framework","Core Relationship Stages"],"docs-to-process/reward_achievement_system (2).md":["Reward and Achievement System for Adult Milestones","Overview","Reward System Architecture","1. Core Reward Types"],"docs-to-process/stage_based_interaction_framework (1).md":["Nikita GFE: Stage-Based Interaction Framework","Introduction","Stage-Based Behavioral Parameters","Stage 1: Initial Connection (Days 1-14)","Stage 2: Growing Intrigue (Days 15-35)"],"docs-to-process/state_management_progression_logic (2).md":["State Management and Progression Logic for Adult Content","Overview","State Management Core Principles","1. Holistic State Representation","2. Event-Driven State Updates","3. Persistent and Ephemeral State","4. State Access Patterns","Relationship State Management","1. Core Relationship Metrics"],"docs-to-process/system_overview (1).md":["Nikita GFE: System Overview","Introduction","Core System Concept","System Architecture Overview","Core Components","Key Technical Features","Key Experience Elements","Personality & Character"],"docs-to-process/user_experience_documentation (1).md":["Nikita GFE: User Experience Documentation","Introduction","User Journey Overview","First Contact & Onboarding","Relationship Development","Daily Interaction Patterns","Experience Design Elements","Personality Expression","Relationship Dynamics"],"docs-to-process/user_onboarding_customization.md":["Nikita GFE: User Onboarding & Customization Process","Onboarding System Overview","Initial User Interview Process","Interview Framework Design","Interview Content Framework"],"docs-to-process/voice_interaction_capabilities.md":["Nikita GFE: Voice Interaction Capabilities","Voice System Overview","Voice Personality Characteristics","Core Vocal Identity","Voice Personality Integration"],"docs/README.md":["Nikita: Don't Get Dumped","The Game","Documentation Index","Game Design","Technical","Quick Reference","Scoring","Chapters","Key Mechanics","Tech Stack"],"docs/architecture/overview.md":["Nikita: Architecture Overview","Tech Stack","System Architecture","Three Knowledge Graphs","1. Nikita Graph","2. User Graph","3. Relationship Graph"],"docs/game/journey.md":["Nikita: The Player Journey","The First 10 Minutes: The Hook","Her Opening","The Test Begins","Chapter 1: Curiosity (Days 1-14)","What You're Experiencing","Daily Pattern (Chapter 1)","Sample Week 1 Interactions","Chapter 1 Boss: \"Are You Worth My Time?\"","Chapter 2: Intrigue (Days 15-35)"],"docs/game/mechanics.md":["Nikita: Game Mechanics","The Core Loop","Scoring System","Single Composite Score","Hidden Sub-Metrics","Score Visibility","Chapter Progression","5 Chapters","Advancement Gate","Boss Encounters"],"docs/game/nikita.md":["Nikita: Character Profile","Who She Is","Her Voice","Intellectual Mode","Substance References (Authentic)","Fight-Picking Mode","Flirtation Mode","Vulnerability Mode (Earned)","The Disappearance","Emotional States"],"memory/README.md":["Memory Documentation Hub","Documentation Files","Navigation","Critical References","Phase 1 Status (Complete)","Next Steps (Phases 2-5)"],"memory/architecture.md":["System Architecture","Current State","Component Hierarchy (Phase 1 Complete)","Data Flow Architecture"],"memory/backend.md":["Backend Architecture","Current State","FastAPI Application Structure","Text Agent Handler (\u2705 COMPLETE)","Database Schema (Supabase PostgreSQL)","Authentication Flow (Supabase Auth)"],"memory/constitution.md":["Nikita Technical Constitution","Preamble","Article I: Architecture Principles","Section 1.1: Interface Invisibility","Section 1.2: Dual-Agent Architecture","Section 1.3: Platform Agnostic Communication","Article II: Data & Memory Principles","Section 2.1: Temporal Memory Persistence","Section 2.2: Score State Atomicity","Section 2.3: Vice Preference Learning"],"memory/game-mechanics.md":["Game Mechanics","Current State","Scoring System (Defined in Constants)","Composite = intimacy*0.30 + passion*0.25 + trust*0.25 + secureness*0.20","Implemented in: nikita/db/models/user.py:155-166","Chapter System (Constants Defined)","Boss Encounters (Constants Defined)","Decay System (Constants Defined)","Vice Categories (Constants Defined)"],"memory/integrations.md":["External Integrations","Current State","Supabase Integration","Configuration (Phase 1 \u2705)","Usage Patterns (TODO Phase 2)","API/Backend: SQLAlchemy via direct PostgreSQL connection","Portal: Supabase Client SDK (for RLS, Auth)","Portal: OTP sign-in","User receives SMS code \u2192 enters \u2192 JWT token issued","Backend: Verify JWT from portal requests"],"memory/product.md":["Product Definition: Nikita - Don't Get Dumped","Product Overview","Name","Tagline","Vision","Problem Statement","Market Context","Value Proposition","Core Value","\"Our Thing\""],"memory/user-journeys.md":["User Journeys","Current State","Target Specs","Journey 1: New Player Onboarding","Journey 2: Chapter Progression"],"nikita/CLAUDE.md":["nikita/ Package Overview","Purpose","Module Structure","Key Files","Development Patterns","1. Settings Access","2. Memory System","3. Game Constants","Architecture","Next Steps"],"nikita/api/CLAUDE.md":["api/ - FastAPI Application","Purpose","Current State","Target Architecture (Phase 2-5)","Key Endpoints (TODO)","Telegram (Phase 2)","Voice (Phase 4)","Portal (Phase 5)","Patterns","Dependency Injection"],"nikita/db/CLAUDE.md":["db/ - Database Layer","Purpose","Current State","Key Models","User (user.py:19-110)","UserMetrics (user.py:112-167)","UserVicePreference (user.py:169-207)","Repository Pattern (TODO Phase 2)","Database Schema","Migrations (TODO Phase 2)"],"nikita/engine/CLAUDE.md":["engine/ - Game Engine","Purpose","Current State","Key Constants","Scoring Formula (constants.py:51-57)","Composite = intimacy*0.30 + passion*0.25 + trust*0.25 + secureness*0.20","Chapter System (constants.py:7-32)","Chapter Behaviors (constants.py:60-110)","Target Implementation (Phase 3)","ScoreCalculator"],"nikita/memory/CLAUDE.md":["memory/ - Knowledge Graph System","Purpose","Current State","Three-Graph Architecture","Nikita Graph","User Graph","Relationship Graph","Key Methods","add_episode (graphiti_client.py:54-79)","search_memory (graphiti_client.py:81-118)"],"plan/master-plan.md":["Nikita Game - Technical Architecture & Implementation Plan","Executive Summary","1. High-Level System Architecture"],"specs/001-nikita-text-agent/audit-report.md":["Audit Report: 001-nikita-text-agent","Executive Summary","1. Requirements Coverage Analysis","Functional Requirements \u2192 Tasks Mapping","2. User Story \u2192 Task Mapping","P1 User Stories (Must-Have)","P2 User Stories (Important)","P3 User Stories (Deferred)","3. Acceptance Criteria Analysis","Spec ACs \u2192 Tasks Mapping"],"specs/001-nikita-text-agent/plan.md":["Implementation Plan: Nikita Text Agent","Executive Summary","Architecture Overview","Research Summary","Pydantic AI Patterns (from plan research)","Existing Infrastructure","User Story Implementation","US-1: Basic Conversation (P1)","US-2: Memory-Enriched Responses (P1)"],"specs/001-nikita-text-agent/spec.md":["Feature Specification: Nikita Text Agent","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Nikita Persona Consistency","FR-002: Chapter-Specific Behavior Adaptation","FR-003: Memory Context Integration","FR-004: Message Skipping Logic","FR-005: Response Timing Variation","FR-006: Conversation Quality Assessment"],"specs/001-nikita-text-agent/tasks.md":["Implementation Tasks: Nikita Text Agent","Overview","US-1: Basic Conversation (Priority: P1 - Must-Have) \u2705","T1.1: Create Nikita Persona Prompt","T1.2: Create NikitaDeps Dataclass","T1.3: Implement NikitaTextAgent","T1.4: Create Agent Factory","US-2: Memory-Enriched Responses (Priority: P1 - Must-Have) \u2705","T2.1: Implement Memory Context Injection","T2.2: Create recall_memory Tool"],"specs/002-telegram-integration/spec.md":["Feature Specification: Telegram Platform Integration","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Bot Command Handling","FR-002: Text Message Routing","FR-003: User Authentication Flow","FR-004: Account Creation","FR-005: Session Management","FR-006: Rate Limiting"],"specs/003-scoring-engine/spec.md":["Feature Specification: Scoring Engine","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Interaction Analysis","FR-002: Metric Delta Calculation","FR-003: Composite Score Calculation","FR-004: Score Bounds Enforcement","FR-005: Score History Logging","FR-006: Context-Aware Analysis"],"specs/004-chapter-boss-system/spec.md":["Feature Specification: Chapter & Boss System","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Boss Threshold Detection","FR-002: Boss Encounter Initiation","FR-003: Five Distinct Boss Challenges","FR-004: Boss Outcome Judgment","FR-005: Boss Pass Handling","FR-006: Boss Fail Handling"],"specs/005-decay-system/spec.md":["Feature Specification: Decay System","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Grace Period Enforcement","FR-002: Chapter-Specific Decay Rates","FR-003: Decay Calculation","FR-004: Scheduled Decay Application","FR-005: Decay Floor Protection","FR-006: Interaction Reset"],"specs/006-vice-personalization/spec.md":["Feature Specification: Vice Personalization System","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Vice Category Detection","FR-002: Conversation Analysis for Vice Signals","FR-003: Vice Intensity Scoring","FR-004: Multi-Vice Profiles","FR-005: Vice-Aware Prompt Injection","FR-006: Natural Vice Expression"],"specs/007-voice-agent/spec.md":["Feature Specification: Voice Agent","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Voice Call Initiation","FR-002: Real-Time Speech Processing","FR-003: Natural Voice Response","FR-004: Conversational Latency","FR-005: Same-Agent Personality","FR-006: Voice Call Scoring"],"specs/008-player-portal/spec.md":["Feature Specification: Player Portal","Summary","CoD^\u03a3 Overview","Functional Requirements","FR-001: Authentication","FR-002: Dashboard View","FR-003: Score History Visualization","FR-004: Conversation History","FR-005: Chapter Progress Display","FR-006: Voice Call Access"],"specs/009-database-infrastructure/audit-report.md":["Audit Report: 009 Database Infrastructure","Summary","Requirement Coverage Audit","Functional Requirements","Non-Functional Requirements","User Stories","Acceptance Criteria Audit","AC Count per Task","AC Testability Check","Dependency Audit"],"specs/009-database-infrastructure/plan.md":["Implementation Plan: Database Infrastructure","Goal","Summary","Technical Context","Existing Architecture (Intelligence Evidence)","Database files found","Output: database.py, models/{base,user,conversation,game}.py, repositories/__init__.py","Repository pattern check","Output: nikita/db/CLAUDE.md (docs only, no implementation)","AsyncSession usage"],"specs/009-database-infrastructure/spec.md":["009: Database Infrastructure","Overview","Functional Requirements","FR-001: Repository Pattern Implementation","FR-002: Migration Management","FR-003: Row-Level Security (RLS)","FR-004: Connection Pooling","FR-005: Transaction Management","FR-006: Audit Logging","Non-Functional Requirements"],"specs/009-database-infrastructure/tasks.md":["Tasks: 009 Database Infrastructure","Overview","User Story: US-001 Repository Instantiation (Priority: P1)","T1: Create Base Repository Class","T2: Create UserRepository","T3: Create UserMetricsRepository","T4: Create ConversationRepository","T5: Create ScoreHistoryRepository","T6: Create VicePreferenceRepository and DailySummaryRepository","T7: Create Repository Dependencies"],"specs/010-api-infrastructure/spec.md":["010: API Infrastructure","Overview","Functional Requirements","FR-001: FastAPI Application Structure","FR-002: Authentication Middleware","FR-003: Rate Limiting","FR-004: Request/Response Schemas","Portal Responses","Webhook Payloads","FR-005: Error Handling"],"specs/011-background-tasks/spec.md":["011: Background Tasks Infrastructure","Overview","Functional Requirements","FR-001: Scheduled Decay Processing","FR-002: Delayed Message Delivery","FR-003: Daily Summary Generation","FR-004: Edge Function Execution","FR-005: Job Monitoring","FR-006: Task Idempotency","Non-Functional Requirements"],"specs/SPEC_INVENTORY.md":["Nikita Spec Inventory","Spec Matrix","Implementation Order (Infra-First)","Phase A: Infrastructure Foundation","Phase B: Core Game Engine","Phase C: Platform Integration","Phase D: Advanced Features","Infrastructure Coverage","009-database-infrastructure","010-api-infrastructure"],"todo/master-todo.md":["Master Todo - Nikita Game","Phase 1: Core Infrastructure \u2705 COMPLETE","Phase 2: Text Agent \u26a0\ufe0f IN PROGRESS","Text Agent Core \u2705 COMPLETE (specs/001-nikita-text-agent)","Telegram Integration \u274c TODO (specs/002-telegram-integration)","Database Layer \u274c TODO","Phase 3: Game Engine \u274c TODO (specs/003-006)","Phase 4: Voice Agent \u274c TODO (specs/007-voice-agent)","Phase 5: Portal \u274c TODO (specs/008-player-portal)","Current Sprint: Documentation Sync"]},"deps":{"nikita/agents/text/__init__.py":["typing","uuid","pydantic_ai","nikita.agents.text.deps","nikita.agents.text.agent","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client","nikita.memory.graphiti_client"],"nikita/agents/text/agent.py":["functools","typing","pydantic_ai","nikita.agents.text.deps","nikita.engine.constants","nikita.prompts.nikita_persona","nikita.db.models.user","nikita.memory.graphiti_client","nikita.agents.text.tools"],"nikita/agents/text/deps.py":["dataclasses","typing","nikita.config.settings","nikita.db.models.user","nikita.memory.graphiti_client"],"nikita/agents/text/facts.py":["dataclasses","typing"],"nikita/agents/text/handler.py":["logging","dataclasses","datetime","typing","uuid","nikita.agents.text.facts","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text","nikita.agents.text.agent"],"nikita/agents/text/skip.py":["random","typing"],"nikita/agents/text/timing.py":["random","typing"],"nikita/agents/text/tools.py":["typing","pydantic_ai","nikita.agents.text.deps"],"nikita/api/main.py":["contextlib","typing","fastapi","fastapi.middleware.cors","nikita.config.settings","uvicorn"],"nikita/api/schemas/conversation.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/game.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/user.py":["datetime","decimal","uuid","pydantic"],"nikita/config/elevenlabs.py":["functools","pydantic","pydantic_settings"],"nikita/config/settings.py":["functools","typing","pydantic","pydantic_settings"],"nikita/db/database.py":["collections.abc","functools","sqlalchemy.ext.asyncio","sqlalchemy.pool","supabase","nikita.config.settings"],"nikita/db/dependencies.py":["collections.abc","typing","fastapi","sqlalchemy.ext.asyncio","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"nikita/db/migrations/env.py":["asyncio","logging.config","alembic","sqlalchemy","sqlalchemy.engine","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.game","nikita.db.models.user"],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["collections.abc","sqlalchemy","alembic","sqlalchemy.dialects"],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["collections.abc","alembic"],"nikita/db/models/base.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm"],"nikita/db/models/conversation.py":["datetime","decimal","typing","uuid","pgvector.sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/game.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/user.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.game"],"nikita/db/repositories/base.py":["typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.base"],"nikita/db/repositories/conversation_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.base"],"nikita/db/repositories/metrics_repository.py":["decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/score_history_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/summary_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/user_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","sqlalchemy.orm","nikita.db.models.game","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/vice_repository.py":["datetime","decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/transactions.py":["asyncio","functools","logging","collections.abc","enum","typing","sqlalchemy.exc","sqlalchemy.ext.asyncio"],"nikita/memory/graphiti_client.py":["datetime","typing","graphiti_core","graphiti_core.llm_client","graphiti_core.embedder","nikita.config.settings"],"tests/agents/text/test_agent.py":["os","pytest","unittest.mock","nikita.agents.text","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.deps","nikita.agents.text.agent","nikita.prompts.nikita_persona","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","inspect","nikita.agents.text.agent","nikita.agents.text.agent","inspect"],"tests/agents/text/test_chapter_behavior.py":["pytest","unittest.mock","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","re","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_deps.py":["pytest","dataclasses","unittest.mock","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps"],"tests/agents/text/test_factory.py":["pytest","uuid","unittest.mock","nikita.agents.text","nikita.agents.text","inspect","nikita.agents.text","inspect","nikita.agents.text","nikita.agents.text.deps","nikita.agents.text","nikita.agents.text","nikita.agents.text"],"tests/agents/text/test_facts.py":["pytest","unittest.mock","nikita.agents.text","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","inspect","nikita.agents.text.facts","inspect","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts"],"tests/agents/text/test_handler.py":["pytest","datetime","uuid","unittest.mock","dataclasses","nikita.agents.text","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","inspect","nikita.agents.text.handler","inspect","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler"],"tests/agents/text/test_handler_facts.py":["pytest","datetime","uuid","unittest.mock","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts"],"tests/agents/text/test_handler_skip.py":["pytest","datetime","uuid","unittest.mock","logging","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip"],"tests/agents/text/test_nikita_persona.py":["pytest","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona"],"tests/agents/text/test_skip.py":["pytest","statistics","nikita.agents.text","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","inspect","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip"],"tests/agents/text/test_timing.py":["pytest","statistics","nikita.agents.text","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing"],"tests/agents/text/test_tools.py":["os","pytest","datetime","unittest.mock","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools"],"tests/db/repositories/test_base.py":["unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.base","sqlalchemy","sqlalchemy.dialects.postgresql","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base"],"tests/db/repositories/test_user_repository.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.game","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user"]},"dir_purposes":{"docs-to-process":"Project documentation","docs":"Project documentation","nikita/api":"API endpoints and route handlers","nikita/api/middleware":"Middleware functions and handlers","nikita/config":"Configuration files and settings","nikita/db/migrations":"Database migration files","nikita/db/models":"Data models and database schemas","specs/001-nikita-text-agent":"Test files and test utilities","specs":"Test specifications","specs/002-telegram-integration":"Test files and test utilities","specs/003-scoring-engine":"Test files and test utilities","specs/004-chapter-boss-system":"Test files and test utilities","specs/005-decay-system":"Test files and test utilities","specs/006-vice-personalization":"Test files and test utilities","specs/007-voice-agent":"Test files and test utilities","specs/008-player-portal":"Test files and test utilities","specs/009-database-infrastructure":"Test files and test utilities","specs/010-api-infrastructure":"API endpoints and route handlers","specs/011-background-tasks":"Test files and test utilities","tests/agents/text":"Test files and test utilities","tests/db/repositories":"Test files and test utilities"},"staleness":1763782786.754472}