{"at":"2026-02-07T22:40:45.155515","root":".","tree":[".","\u251c\u2500\u2500 docs/","\u2502   \u251c\u2500\u2500 architecture/","\u2502   \u251c\u2500\u2500 decisions/","\u2502   \u251c\u2500\u2500 game/","\u2502   \u251c\u2500\u2500 guides/","\u2502   \u251c\u2500\u2500 ideas/","\u2502   \u251c\u2500\u2500 knowledge-transfer/","\u2502   \u251c\u2500\u2500 reference/","\u2502   \u251c\u2500\u2500 screenshots/","... (truncated)"],"stats":{"total_files":544,"total_directories":201,"fully_parsed":{"python":540,"shell":2},"listed_only":{"json":1,"shell":1},"markdown_files":320},"f":{"nikita/agents/text/history.py":["p",["load_message_history:322:async (conversation_messages:list[dict[str, Any]] | None, conversation_id::int = 80, token_budget:int = DEFAULT_TOKEN_BUDGET,)>list[ModelMessage] | None:load:"],{"HistoryLoader":["46",["__init__:65:(self, conversation_id:UUID | None = None, raw_messages:list[dict[str, Any]] | None = None,):load:","_convert_to_model_messages:79:(self, raw_messages:list[dict[str, Any]],)>list[ModelMessage]::","_ensure_tool_call_pairing:121:(self, messages:list[ModelMessage],)>list[ModelMessage]::","_estimate_tokens:182:(self, messages:list[ModelMessage], accurate:bool = False)>int::","_truncate_to_budget:218:(self, messages:list[ModelMessage], token_budget:int, min_turns:int = MIN_TURNS_PRESERVED,)>list[ModelMessage]:_estimate_tokens:","load:267:(self, limit:int = 80, token_budget:int = DEFAULT_TOKEN_BUDGET,)>list[ModelMessage] | None:_convert_to_model_messages,_ensure_tool_call_pairing,_estimate_tokens,_truncate_to_budget:"]]}],"nikita/agents/text/token_budget.py":["p",{"TierContent":["49",[]],"TokenUsage":["66",[]],"TokenBudgetManager":["96",["__init__:128:(self, history_budget:int = TIER_BUDGETS[\"history\"], today_budget:int = TIER_BUDGETS[\"today\"], threads_budget:int = TIER_BUDGETS[\"threads\"], last_conversation_budget:int = TIER_BUDGETS[\"last_conversation\"], hard_cap:int = HARD_CAP,)::","_estimate_tokens:144:(self, text:str | None, accurate:bool = False)>int::","_truncate_to_budget:168:(self, text:str, token_budget:int, tier_name:str,)>tuple[str, int, bool]:_estimate_tokens:","allocate:209:(self, content:TierContent)>TokenUsage:_estimate_tokens,_truncate_to_budget:"]]}],"nikita/agents/voice/validation.py":["p",["validate_elevenlabs_config:33:async (settings:\"Settings | None\" = None, strict:::","validate_agent_exists:109:async (agent_id:str, api_key:::","validate_agent_has_tools:150:async (agent_id:str, api_key::list[str] | None = None,)>tuple[bool, list[str]]::"],{"ElevenLabsConfigError":["24",[]]}],"nikita/api/dependencies/audit.py":["p",["audit_admin_action:46:async (admin_id:UUID, admin_email::str, resource_type:str, resource_id:UUID | None, user_id:UUID | None, session:AsyncSession, details:dict[str, Any] | None = None,)>AuditLog:audit_admin_action:"]],"nikita/api/dependencies/error_logging.py":["p",["log_error:30:async (session:AsyncSession, message::str, level:ErrorLevel = ErrorLevel.ERROR, user_id:UUID | None = None, conversation_id:UUID | None = None, exception:Exception | None = None, context:dict[str, Any] | None = None, commit:bool = True,)>ErrorLog::","log_critical:83:async (session:AsyncSession, message::str, **kwargs:Any,)>ErrorLog:log_error:Log a critical error. Shorthand for log_error with CRITICAL level.","log_warning:93:async (session:AsyncSession, message::str, **kwargs:Any,)>ErrorLog:log_error:Log a warning. Shorthand for log_error with WARNING level.","get_recent_errors:105:async (session:AsyncSession, limit::ErrorLevel | None = None, source_filter:str | None = None, user_id:UUID | None = None, include_resolved:bool = False,)>list[ErrorLog]::","resolve_error:147:async (session:AsyncSession, error_id::str | None = None, commit:bool = True,)>ErrorLog | None::","get_error_stats:177:async (session:AsyncSession, hours:::"]],"nikita/api/dependencies/logging.py":["p",["get_pii_safe_logger:107:(name:str, level::get_pii_safe_logger:"],{"PiiSafeFormatter":["18",["__init__:56:(self, fmt:str | None = None, datefmt:str | None = None, redact_emails:bool = True, redact_phones:bool = True,):__init__:","_redact_pii:69:(self, message:str)>str::","format:87:(self, record:logging.LogRecord)>str:_redact_pii,format:"]]}],"nikita/db/models/audit_log.py":["p",{"AuditLog":["17",["__init__:68:(self, **kwargs):__init__:Initialize with default details if not provided."]]}],"nikita/db/models/error_log.py":["p",{"ErrorLog":["27",[]]}],"nikita/db/models/narrative_arc.py":["p",{"UserNarrativeArc":["21",["to_dict:73:(self)>dict[str, Any]::Convert to dictionary for context loading.","should_advance:87:(self)>bool::Check if arc should advance to next stage based on conversation count.","advance_stage:104:(self)>bool::"]]}],"nikita/db/models/social_circle.py":["p",{"UserSocialCircle":["21",["to_dict:67:(self)>dict[str, Any]::Convert to dictionary for context loading."]]}],"nikita/db/models/telegram_link.py":["p",["generate_link_code:19:(length:int = 6)>str::"],{"TelegramLinkCode":["32",["is_expired:77:(self)>bool::","create:88:(cls, user_id:UUID)>\"TelegramLinkCode\":generate_link_code:"]]}],"nikita/db/repositories/narrative_arc_repository.py":["p",{"NarrativeArcRepository":["22",["__init__:31:(self, session:AsyncSession)::","create_arc:43:async (self, user_id:UUID, template:\"ArcTemplate\",)>UserNarrativeArc:_count_active_arcs:","get_active_arcs:95:async (self, user_id:UUID)>list[UserNarrativeArc]::","get_arc_by_id:116:async (self, arc_id:UUID)>UserNarrativeArc | None::","advance_arc:131:async (self, arc_id:UUID, new_stage:str, description:str | None = None)>UserNarrativeArc | None:get_arc_by_id:","resolve_arc:161:async (self, arc_id:UUID)>UserNarrativeArc | None:advance_arc:","increment_conversation_count:174:async (self, arc_id:UUID)>UserNarrativeArc | None:get_arc_by_id:","get_all_arcs:195:async (self, user_id:UUID)>list[UserNarrativeArc]::","get_arcs_by_category:214:async (self, user_id:UUID, category:str)>list[UserNarrativeArc]::","_count_active_arcs:235:async (self, user_id:UUID)>int:get_active_arcs:"]]}],"nikita/db/repositories/social_circle_repository.py":["p",{"SocialCircleRepository":["21",["__init__:28:(self, session:AsyncSession)::","create_circle_for_user:40:async (self, user_id:UUID, friends:list[\"FriendCharacter\"],)>list[UserSocialCircle]:get_circle:","get_circle:83:async (self, user_id:UUID)>list[UserSocialCircle]::","get_active_friends:100:async (self, user_id:UUID)>list[UserSocialCircle]::","get_friend_by_name:122:async (self, user_id:UUID, friend_name:str)>UserSocialCircle | None::","get_friend_by_role:141:async (self, user_id:UUID, role:str)>UserSocialCircle | None::","deactivate_friend:165:async (self, user_id:UUID, friend_name:str)>bool:get_friend_by_name:"]]}],"nikita/db/repositories/telegram_link_repository.py":["p",{"TelegramLinkRepository":["16",["__init__:25:(self, session:AsyncSession)>None::","create_link_code:33:async (self, user_id:UUID)>TelegramLinkCode:delete_for_user:","get_by_code:55:async (self, code:str)>TelegramLinkCode | None::","verify_code:68:async (self, code:str)>UUID | None:delete,get_by_code:","delete:98:async (self, code:str)>bool:delete:","delete_for_user:111:async (self, user_id:UUID)>int:delete:","cleanup_expired:124:async (self)>int:delete:"]]}],"nikita/life_simulation/arcs.py":["p",["get_arc_system:522:()>NarrativeArcSystem::"],{"ArcTemplate":["44",[]],"ActiveArc":["58",["advance_stage:74:(self)>bool::","should_advance:96:(self)>bool::Check if arc should advance based on conversation count.","to_dict:114:(self)>dict[str, Any]::Convert to dictionary for storage.","from_dict:132:(cls, data:dict[str, Any])>\"ActiveArc\"::Create from dictionary."]],"NarrativeArcSystem":["154",["__init__:328:(self):_index_templates:Initialize the narrative arc system.","_index_templates:332:(self)>dict[ArcCategory, list[ArcTemplate]]::Index templates by category for efficient lookup.","should_start_new_arc:345:(self, active_arcs:list[ActiveArc], vulnerability_level:int, chapter:int, days_since_last_arc:int,)>bool::","select_arc_template:376:(self, vulnerability_level:int, chapter:int, recent_topics:list[str], excluded_templates:list[str] | None = None,)>ArcTemplate | None::","create_arc:433:(self, user_id:UUID, template:ArcTemplate,)>ActiveArc::","update_arc:469:(self, arc:ActiveArc, template:ArcTemplate,)>tuple[ActiveArc, bool]:advance_stage,should_advance:","get_arc_context:494:(self, arcs:list[ActiveArc])>str::"]]}],"nikita/life_simulation/psychology_mapper.py":["p",["get_psychology_mapper:422:()>PsychologyMapper::"],{"PsychologicalState":["49",["to_dict:59:(self)>dict[str, Any]::Convert to dictionary for storage.","format_for_prompt:70:(self)>dict[str, str]::"]],"PsychologyMapper":["131",["__init__:232:(self)::Initialize the psychology mapper.","analyze_event:241:(self, event_type:str, involved_characters:list[str], event_description:str,)>PsychologicalState::","analyze_user_behavior:301:(self, behavior_type:str, intensity:float = 0.5,)>PsychologicalState::","get_healing_response:366:(self, trigger:TraumaTrigger, user_handled_well:bool,)>dict[str, str]::"]]}],"nikita/life_simulation/social_generator.py":["p",["get_social_generator:502:()>SocialCircleGenerator::","generate_social_circle_for_user:516:(user_id:UUID, location::list[str] | None = None, job_field:str | None = None, meeting_context:str | None = None,)>SocialCircle:generate_social_circle,get_social_generator:"],{"FriendCharacter":["21",["to_dict:37:(self)>dict[str, Any]::Convert to dictionary for storage."]],"SocialCircle":["53",["get_character_by_role:60:(self, role:str)>FriendCharacter | None::Get a character by their role.","get_character_by_name:67:(self, name:str)>FriendCharacter | None::Get a character by their name.","get_active_friends_context:74:(self)>str::Format friends for prompt context.","to_dict:84:(self)>dict[str, Any]:to_dict:Convert to dictionary for storage."]],"SocialCircleGenerator":["93",["__init__:237:(self):_load_adaptation_rules:Initialize the social circle generator.","_load_adaptation_rules:241:(self)>dict[str, Any]::Load adaptation rules from framework.","generate_social_circle:270:(self, user_id:UUID, location:str | None = None, hobbies:list[str] | None = None, job_field:str | None = None, meeting_context:str | None = None,)>SocialCircle:_apply_creative_adaptations,_apply_hobby_adaptations,_apply_job_adaptations,_apply_meeting_adaptations,_apply_tech_hub_adaptations,_copy_character:","_copy_character:353:(self, char:FriendCharacter)>FriendCharacter::Create a copy of a character for adaptation.","_apply_tech_hub_adaptations:371:(self, characters:list[FriendCharacter], location:str,)>list[FriendCharacter]::Apply tech hub city adaptations.","_apply_creative_adaptations:404:(self, characters:list[FriendCharacter], location:str,)>list[FriendCharacter]::Apply creative city adaptations.","_apply_job_adaptations:437:(self, characters:list[FriendCharacter], job_category:str,)>list[FriendCharacter]::Apply job-based adaptations to characters.","_apply_hobby_adaptations:459:(self, characters:list[FriendCharacter], hobby_category:str, hobby_name:str,)>list[FriendCharacter]::Apply hobby-based adaptations to characters.","_apply_meeting_adaptations:474:(self, characters:list[FriendCharacter], meeting_context:str,)>list[FriendCharacter]::Apply meeting context adaptations."]]}],"s/configure_nikita_tools.py":["p",["get_config:35:()>tuple[str, str, str]::","build_tools_config:70:(server_tool_url:str)>list[dict]::","get_current_agent_config:486:async (client:httpx.AsyncClient, api_key::str)>dict::","update_agent_tools:508:async (client:httpx.AsyncClient, api_key::str, tools:list[dict])>dict::","add_dynamic_variables:552:async (client:httpx.AsyncClient, api_key::str)>dict::","main:603:async ():add_dynamic_variables,build_tools_config,get_config,get_current_agent_config,update_agent_tools:"]],"t/agents/text/test_history.py":["p",{"TestHistoryLoaderBasics":["27",["test_empty_conversation_returns_none:30:(self)::Test that empty conversation returns None for fresh prompt generation.","test_none_messages_returns_none:36:(self)::Test that None messages returns None.","test_load_user_messages:42:(self)::Test loading user messages as ModelRequest.","test_load_nikita_messages:56:(self)::Test loading nikita messages as ModelResponse.","test_load_assistant_role_converted:70:(self)::Test that 'assistant' role is also converted to ModelResponse.","test_load_mixed_conversation:82:(self)::Test loading a mixed user/nikita conversation.","test_preserves_message_order:100:(self)::Test that message order is preserved (oldest first)."]],"TestHistoryLoaderLimit":["116",["test_respects_limit_parameter:119:(self)::Test that limit parameter restricts message count.","test_limit_zero_loads_all:138:(self)::Test that limit=0 loads all messages (subject to token budget)."]],"TestTokenBudgeting":["152",["test_estimate_tokens:155:(self)::Test token estimation using TokenEstimator.","test_truncates_oldest_when_over_budget:174:(self)::Test that oldest messages are truncated when over budget.","test_preserves_minimum_turns:195:(self)::Test that minimum turns are preserved even if over budget."]],"TestToolCallPairing":["214",["test_preserves_paired_tool_calls:217:(self)::Test that properly paired tool calls are preserved.","test_excludes_unpaired_tool_calls:235:(self)::Test that unpaired tool calls are excluded.","test_handles_multiple_tool_calls:252:(self)::Test handling of multiple tool calls with some unpaired.","test_empty_messages_unaffected:274:(self)::Test that empty message list is handled."]],"TestConvenienceFunction":["281",["test_convenience_function_with_messages:285:async (self)::Test load_message_history with valid messages.","test_convenience_function_with_none:301:async (self)::Test load_message_history with None messages.","test_convenience_function_with_empty_list:311:async (self)::Test load_message_history with empty list."]],"TestEdgeCases":["321",["test_unknown_role_logged_and_skipped:324:(self)::Test that unknown roles are logged and skipped.","test_missing_content_field:339:(self)::Test handling of messages without content field.","test_handles_analysis_field:354:(self)::Test that analysis field in messages is ignored during conversion.","test_very_long_message_truncation:373:(self)::Test that very long messages are handled."]]}],"t/agents/text/test_history_errors.py":["p",{"TestHistoryLoaderMalformedJson":["16",["test_history_loader_with_malformed_message_no_role:19:(self)::Handles message without role field.","test_history_loader_with_malformed_message_no_content:36:(self)::Handles message without content field.","test_history_loader_with_unknown_role:52:(self)::Handles message with unknown role.","test_history_loader_with_null_values:69:(self)::","test_history_loader_with_wrong_type:89:(self)::","test_history_loader_with_extra_fields:108:(self)::Handles messages with extra unexpected fields.","test_history_loader_with_nested_content:129:(self)::Handles nested content structures (e.g., from tool calls)."]],"TestHistoryLoaderDatabaseErrors":["155",["test_history_loader_with_empty_list:158:(self)::Handles empty message list (not None).","test_history_loader_with_none:168:(self)::Handles None message input.","test_history_loader_with_string_instead_of_list:178:(self)::Handles wrong type for raw_messages (string instead of list).","test_history_loader_preserves_valid_messages_after_errors:194:(self)::Valid messages are preserved when mixed with invalid ones."]],"TestHistoryLoaderLogging":["217",["test_logs_warning_for_malformed_message:220:(self, caplog)::Logs warning when encountering malformed message.","test_logs_info_for_truncation:236:(self, caplog)::Logs info when truncating message history."]],"TestHistoryLoaderTokenBudgetErrors":["260",["test_zero_token_budget:263:(self)::","test_negative_token_budget:286:(self)::","test_very_small_token_budget:307:(self)::Handles very small (but positive) token budget."]]}],"t/agents/text/test_llm_timeout.py":["p",{"TestLLMTimeoutHandling":["26",["mock_user:30:(self)::Create mock user.","mock_deps:39:(self, mock_user)::Create mock NikitaDeps.","test_llm_timeout_returns_graceful_error:50:async (self, mock_deps):slow_llm_call:AC-1.2.2: TimeoutError caught and returns graceful fallback message.","slow_llm_call:77:async (*args, **kwargs)::","test_llm_timeout_logs_error:73:async (self, mock_deps, caplog):slow_llm_call:AC-1.2.3: Timeout errors logged with user_id context.","test_normal_response_within_timeout:97:async (self, mock_deps)::Normal LLM responses complete successfully within timeout.","test_non_timeout_exceptions_preserved:115:async (self, mock_deps)::Original exceptions (non-timeout) should be raised, not caught."]],"TestLLMTimeoutConfiguration":["130",["test_timeout_constant_exists:133:(self)::Timeout constant should be defined.","test_timeout_value_is_reasonable:137:(self)::Timeout should be set to a reasonable value (e.g., 120 seconds).","test_fallback_message_exists:142:(self)::Fallback message constant should be defined.","test_graceful_fallback_message_is_user_friendly:147:(self)::Fallback message should be appropriate for the game context."]]}],"t/agents/text/test_token_budget.py":["p",{"TestTokenBudgetManagerBasics":["13",["test_total_budget_respected:16:(self)::AC-T5.1.1: Total budget 4100 tokens (target), 6150 (hard cap).","test_tier_budgets_enforced:40:(self)::AC-T5.1.2: Tier budgets enforced - History 3000, Today 500, Threads 400, Last...","test_hard_cap_never_exceeded:62:(self)::AC-T5.1.3: Combined output never exceeds 6150 tokens.","test_provides_usage_breakdown:83:(self)::AC-T5.1.4: Returns TokenUsage with per-tier counts."]],"TestTruncationPriority":["114",["test_truncation_order_last_conv_first:117:(self)::AC-T5.2.1: Truncation order - Last Conv truncated before Threads.","test_truncation_preserves_history_priority:138:(self)::AC-T5.2.2: History is truncated last (highest priority).","test_minimum_history_preserved:159:(self)::AC-T5.2.3: Minimum 10 history turns always preserved (~300 tokens min).","test_truncation_logged_with_token_counts:182:(self)::AC-T5.2.4: Truncation logged with token counts."]],"TestTierContentDataclass":["212",["test_tier_content_creation:215:(self)::TierContent can be created with all fields.","test_tier_content_optional_fields:231:(self)::TierContent allows empty strings for missing tiers."]],"TestTokenUsageResult":["246",["test_token_usage_fields:249:(self)::TokenUsage has all required fields."]],"TestTokenEstimation":["272",["test_token_estimation_conservative:275:(self)::Token estimation is conservative (tends to overestimate).","test_empty_content_zero_tokens:289:(self)::Empty content should estimate to 0 tokens."]]}],"t/agents/voice/test_context_block.py":["p",{"TestContextBlockFormat":["17",["test_context_block_includes_relationship_state:20:(self)::AC-T4.1.1: Context block includes relationship state.","test_context_block_includes_mood_summary:39:(self)::AC-T4.1.2: Context block includes mood summary.","test_context_block_includes_today_summary:56:(self)::AC-T4.1.3: Context block includes today summary when available.","test_context_block_includes_conflict_when_active:66:(self)::AC-T4.1.4: Context block includes conflict info when active.","test_context_block_respects_token_limit:76:(self)::AC-T4.1.5: Context block stays within token limit (~500 tokens, ~2000 chars)."]],"TestContextBlockContent":["98",["test_chapter_names_mapped_correctly:101:(self)::Test chapter numbers map to correct names.","test_empty_fields_handled_gracefully:119:(self)::Test context block handles empty fields without errors.","test_emotional_context_computed_correctly:127:(self)::Test 4D mood maps to correct descriptors.","test_high_dominance_shows_confident:151:(self)::Test high dominance shows confident descriptor.","test_high_intimacy_shows_affectionate:162:(self)::Test high intimacy shows affectionate descriptor."]],"TestVoiceTextParity":["174",["test_dynamic_vars_has_all_text_agent_fields:177:(self)::Verify DynamicVariables has same fields as text agent context.","test_builder_populates_all_fields:203:(self)::Verify builder populates all context fields."]],"TestBuilderIntegration":["247",["test_build_from_user_populates_context_block:250:(self)::Test build_from_user generates complete context block.","test_context_block_suitable_for_elevenlabs_injection:282:(self)::Test context block format works with ElevenLabs dynamic variables."]]}],"t/agents/voice/test_dynamic_vars_expanded.py":["p",{"TestDynamicVariablesExpanded":["14",["test_has_today_summary_field:17:(self)::AC-T1.1.1: today_summary field exists with default empty string.","test_has_last_conversation_summary_field:23:(self)::AC-T1.1.1: last_conversation_summary field exists.","test_has_mood_4d_fields:29:(self)::AC-T1.1.1: nikita_mood_* fields for 4D emotional state.","test_has_nikita_daily_events_field:42:(self)::AC-T1.1.1: nikita_daily_events field for life simulation.","test_has_conflict_fields:48:(self)::AC-T1.1.1: active_conflict_* fields.","test_has_emotional_context_field:56:(self)::AC-T1.1.1: emotional_context field.","test_has_user_backstory_field:62:(self)::AC-T1.1.1: user_backstory field.","test_has_context_block_field:68:(self)::AC-T1.1.1: context_block field for aggregated context.","test_all_12_new_fields_present:74:(self)::AC-T1.1.1: All 12 new fields added.","test_default_values_correct:94:(self)::AC-T1.1.2: Default values set correctly.","test_json_serialization_includes_new_fields:112:(self)::AC-T1.1.3: JSON serialization works correctly.","test_backward_compatible_with_existing_code:128:(self)::AC-T1.1.4: Backward compatible - existing fields still work."]],"TestDynamicVariablesBuilderExpanded":["146",["test_builder_populates_today_summary:149:(self)::AC-T1.2.1: today_summary loaded from daily_summaries.","test_builder_populates_mood_4d_from_context:169:(self)::AC-T1.2.2: 4D mood loaded from nikita_emotional_states.","test_builder_populates_last_conversation_summary:189:(self)::AC-T1.2.3: last_conversation_summary loaded.","test_builder_generates_context_block:206:(self)::AC-T1.2.4: context_block generated from all fields.","test_build_from_user_populates_new_fields:224:async (self)::Test build_from_user populates new fields."]],"TestContextBlockGeneration":["251",["test_context_block_format:254:(self)::AC-T1.4.1: context_block includes relationship state.","test_context_block_includes_recent_events:274:(self)::AC-T1.4.2: context_block includes recent events.","test_context_block_token_budget:291:(self)::AC-T1.4.4: Token budget \u2264500 tokens."]],"TestVoiceContextExpanded":["315",["test_voice_context_has_today_summary:318:(self)::VoiceContext should support today_summary for builder.","test_voice_context_has_backstory:330:(self)::VoiceContext should support backstory field."]],"TestIntegration":["343",["test_all_30_plus_fields_populated:346:(self)::AC-T1.5.1: All 30+ fields populated.","test_serialization_to_elevenlabs_format:382:(self)::AC-T1.5.2: Serialization to ElevenLabs format works.","test_defaults_produce_valid_output:396:(self)::AC-T1.5.2: Default values produce valid output."]]}],"t/agents/voice/test_logging.py":["p",{"TestInboundLogging":["12",["test_inbound_module_has_logger:15:(self)::AC-T5.1.1: inbound.py has logger configured.","test_inbound_logger_name:22:(self)::AC-T5.1.2: Logger uses module name.","test_inbound_handler_logs_call_initiation:28:(self, caplog)::AC-T5.1.3: Call initiation is logged."]],"TestServerToolsLogging":["43",["test_server_tools_module_has_logger:46:(self)::AC-T5.2.1: server_tools.py has logger configured.","test_server_tools_logger_name:53:(self)::AC-T5.2.2: Logger uses module name.","test_get_context_logs_request:60:async (self, caplog)::AC-T5.2.3: get_context logs request details.","test_get_memory_logs_query:75:async (self, caplog)::AC-T5.2.4: get_memory logs query.","test_score_turn_logs_result:88:async (self, caplog)::AC-T5.2.5: score_turn logs scoring result."]],"TestVoiceWebhookLogging":["101",["test_voice_routes_has_logger:104:(self)::AC-T5.3.1: voice.py routes has logger.","test_voice_logger_name:111:(self)::AC-T5.3.2: Logger uses module name."]],"TestLoggingIntegration":["118",["test_all_voice_modules_have_loggers:121:(self)::AC-T5.4.1: All voice modules have logger configured.","test_loggers_follow_naming_convention:131:(self)::AC-T5.4.2: Loggers follow nikita.* naming.","test_log_messages_include_voice_prefix:140:(self)::AC-T5.4.3: Log messages include [VOICE] prefix for filtering.","test_logger_inherits_from_root:148:(self)::AC-T5.4.4: Voice loggers inherit from root for config."]],"TestLoggingContext":["158",["test_context_builder_has_logger:161:(self)::Context module should have logger.","test_service_has_logger:168:(self)::Service module should have logger.","test_deps_has_logger:175:(self)::Deps module should have logger."]]}],"t/agents/voice/test_outbound_prompt.py":["p",{"TestOutboundPromptLoading":["13",["mock_settings:17:(self)::","service:27:(self, mock_settings)::","mock_user:33:(self)::","test_outbound_uses_ready_prompt_when_available:45:async (self, service, mock_user)::AC-3.3.1: Outbound call uses ready_prompt when available.","test_outbound_uses_cached_when_no_ready_prompt:79:async (self, service, mock_user)::AC-3.3.2: Outbound call uses cached_voice_prompt when no ready_prompt.","test_outbound_uses_fallback_when_nothing_cached:109:async (self, service, mock_user)::AC-3.3.3: Outbound call uses static fallback when nothing cached."]]}],"t/agents/voice/test_tool_descriptions.py":["p",{"TestGetMemoryDescription":["15",["test_description_exists:18:(self)::TOOL_DESCRIPTION_GET_MEMORY constant exists.","test_has_when_section:24:(self)::AC-T2.1.1: WHEN section present.","test_has_how_section:29:(self)::AC-T2.1.2: HOW section present.","test_has_error_section:34:(self)::AC-T2.1.3: ERROR section present.","test_includes_examples:39:(self)::AC-T2.1.4: Examples included.","test_mentions_memory_search:46:(self)::Description mentions searching memory."]],"TestGetContextDescription":["52",["test_description_exists:55:(self)::TOOL_DESCRIPTION_GET_CONTEXT constant exists.","test_emphasizes_call_start:60:(self)::AC-T2.2.1: 'Use at the START of each call' emphasized.","test_describes_returned_context:65:(self)::AC-T2.2.2: Describes what context is returned.","test_explains_refresh:71:(self)::AC-T2.2.3: Explains when to refresh context."]],"TestScoreTurnDescription":["79",["test_description_exists:82:(self)::TOOL_DESCRIPTION_SCORE_TURN constant exists.","test_emphasizes_emotional_exchanges:87:(self)::AC-T2.3.1: 'Use after emotional exchanges' emphasized.","test_explains_what_gets_scored:93:(self)::AC-T2.3.2: Explains what gets scored.","test_documents_error_handling:99:(self)::AC-T2.3.3: Error handling documented."]],"TestUpdateMemoryDescription":["105",["test_description_exists:108:(self)::TOOL_DESCRIPTION_UPDATE_MEMORY constant exists.","test_emphasizes_new_information:113:(self)::AC-T2.4.1: 'Use when user shares NEW information' emphasized.","test_has_examples_of_what_to_store:118:(self)::AC-T2.4.2: Examples of what to store.","test_explains_confidence_or_importance:124:(self)::AC-T2.4.3: Explains importance/confidence levels."]],"TestAllDescriptionsFormat":["132",["test_all_descriptions_non_empty:135:(self)::AC-T2.5.1: All descriptions are non-empty.","test_all_descriptions_valid_strings:147:(self)::AC-T2.5.1: All descriptions are valid strings.","test_descriptions_have_consistent_structure:160:(self)::AC-T2.5.2: Format consistency verified.","test_descriptions_reasonable_length:177:(self)::Tool descriptions should be concise but complete."]]}],"t/api/dependencies/conftest.py":["p",["test_database_url:25:()>str::","engine:34:(test_database_url:str)::Create async engine for tests.","session_maker:44:(engine)>async_sessionmaker[AsyncSession]::","async_session:54:async (session_maker)>AsyncGenerator[AsyncSession, None]:session_maker:","test_admin_id:68:()>uuid4::","test_user_id:74:()>uuid4::"]],"t/api/dependencies/test_audit.py":["p",{"TestAuditAdminAction":["14",["mock_session:18:(self)::Create mock async session.","test_audit_log_created_on_user_view:26:async (self, mock_session)::AC-1.2.1: Audit log entry created when admin views user data.","test_audit_log_captures_admin_id:53:async (self, mock_session)::AC-1.2.2: Audit log captures admin ID correctly.","test_audit_log_captures_resource_info:73:async (self, mock_session)::AC-1.2.3: Audit log captures resource type and ID.","test_audit_log_with_details:94:async (self, mock_session)::Audit log can include optional details.","test_audit_log_without_resource_id:115:async (self, mock_session)::Audit log works for list actions without specific resource ID.","test_audit_log_default_empty_details:136:async (self, mock_session)::Audit log defaults details to empty dict when not provided.","test_audit_log_logging_called:155:async (self, mock_session)::Audit action logs to Python logger."]],"TestAuditLogModel":["173",["test_audit_log_model_fields:176:(self)::AuditLog model has all required fields.","test_audit_log_default_details:202:(self)::AuditLog defaults details to empty dict.","test_audit_log_nullable_fields:216:(self)::AuditLog allows nullable resource_id and user_id."]]}],"t/api/dependencies/test_error_logging.py":["p",{"TestLogError":["12",["test_log_error_creates_error_log:16:async (self)::Test that log_error creates an ErrorLog entry.","test_log_error_with_exception_captures_stack_trace:40:async (self)::Test that log_error captures stack trace from exception.","test_log_error_with_context:65:async (self)::Test that log_error stores context dictionary."]],"TestLogShortcuts":["90",["test_log_critical_uses_critical_level:94:async (self)::Test that log_critical sets CRITICAL level.","test_log_warning_uses_warning_level:112:async (self)::Test that log_warning sets WARNING level."]],"TestGetRecentErrors":["130",["test_get_recent_errors_returns_list:134:async (self)::Test that get_recent_errors returns a list."]],"TestResolveError":["149",["test_resolve_error_marks_as_resolved:153:async (self)::Test that resolve_error marks error as resolved."]],"TestGetErrorStats":["181",["test_get_error_stats_returns_dict:185:async (self)::Test that get_error_stats returns statistics dictionary."]],"TestErrorLogModel":["226",["test_error_log_repr:229:(self)::Test ErrorLog string representation.","test_error_level_enum_values:243:(self)::Test ErrorLevel enum has expected values."]]}],"t/api/dependencies/test_logging.py":["p",{"TestPiiSafeFormatter":["12",["test_format_redacts_email:15:(self)::AC-1.3.1: Email addresses are redacted from logs.","test_format_redacts_phone_number:34:(self)::AC-1.3.2: Phone numbers are redacted from logs.","test_format_redacts_telegram_id:53:(self)::Telegram IDs are redacted from logs.","test_format_preserves_uuids:72:(self)::AC-1.3.3: UUIDs are preserved (not PII).","test_format_redacts_multiple_pii:91:(self)::Multiple PII items in one message are all redacted.","test_format_handles_message_without_pii:110:(self)::Messages without PII are not modified.","test_get_pii_safe_logger:129:(self)::get_pii_safe_logger returns logger with PiiSafeFormatter."]],"TestSensitiveDataPatterns":["147",["test_us_phone_formats:150:(self)::Various US phone formats are redacted.","test_international_phone_formats:175:(self)::International phone formats are redacted.","test_email_formats:199:(self)::Various email formats are redacted."]]}],"t/api/routes/test_admin_monitoring.py":["p",{"TestUserListEndpoint":["24",["mock_session:28:(self)::Create mock async database session.","app:33:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app with admin router and mocked dependencies.","mock_admin_auth:41:async ()::","mock_get_session:44:async ()::","client:53:(self, app)::Create test client.","test_user_list_returns_stats:57:(self, mock_session, client)::AC-2.1.1: Returns users with metrics and game state.","test_user_list_pagination:95:(self, mock_session, client)::AC-2.1.2: Pagination works (page, page_size params).","test_user_list_filters_by_game_status:129:(self, mock_session, client)::AC-2.1.3: Filters by game_status work.","test_user_list_filters_by_chapter:161:(self, mock_session, client)::AC-2.1.3: Filters by chapter work."]],"TestUserDetailEndpoint":["194",["mock_session:198:(self)::Create mock async database session.","app:203:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app with admin router and mocked dependencies.","mock_admin_auth:211:async ()::","mock_get_session:214:async ()::","client:223:(self, app)::Create test client.","test_user_id:228:(self)::Test user ID.","test_user_detail_includes_full_stats:232:(self, mock_session, client, test_user_id)::AC-2.2.1: Returns full user profile + metrics + engagement.","test_user_detail_not_found:262:(self, mock_session, client, test_user_id)::Returns 404 when user not found."]],"TestUserMemoryEndpoint":["273",["mock_session:277:(self)::Create mock async database session.","test_user_id:282:(self)::Test user ID.","app:287:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:295:async ()::","mock_get_session:298:async ()::","client:307:(self, app)::Create test client.","test_user_memory_returns_3_graphs:314:(self, mock_get_memory, mock_session, client, test_user_id)::AC-2.3.1: Returns user_facts, relationship_episodes, nikita_events.","test_user_memory_timeout_handling:349:(self, mock_get_memory, mock_session, client, test_user_id)::AC-2.3.2: 30s timeout returns 503 with retry_after.","test_user_memory_user_not_found:370:(self, mock_session, client, test_user_id)::Returns 404 when user not found."]],"TestUserScoresEndpoint":["381",["mock_session:385:(self)::Create mock async database session.","test_user_id:390:(self)::Test user ID.","app:395:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:403:async ()::","mock_get_session:406:async ()::","client:415:(self, app)::Create test client.","test_user_scores_returns_timeline:419:(self, mock_session, client, test_user_id)::AC-2.4.1: Returns score timeline with trust, intimacy, attraction, commitment.","test_user_scores_date_range:451:(self, mock_session, client, test_user_id)::AC-2.4.2: Date range filter works (default 7 days).","test_user_scores_user_not_found:473:(self, mock_session, client, test_user_id)::Returns 404 when user not found."]],"TestUserListEndpointAuditLogging":["484",["mock_session:492:(self)::Create mock async database session.","test_user_id:500:(self)::Test user ID.","app:505:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:513:async ()::","mock_get_session:516:async ()::","client:525:(self, app)::Create test client.","test_user_detail_audit_logged:529:(self, mock_session, client, test_user_id)::"]],"TestConversationListEndpoint":["563",["mock_session:567:(self)::Create mock async database session.","app:572:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:580:async ()::","mock_get_session:583:async ()::","client:592:(self, app)::Create test client.","test_conversation_list_returns_all:596:(self, mock_session, client)::AC-3.1.1: Returns all conversations with pagination.","test_conversation_list_filters_by_platform:631:(self, mock_session, client)::AC-3.1.1: Filter by platform works.","test_conversation_list_filters_by_status:663:(self, mock_session, client)::AC-3.1.2: Filter by status works.","test_conversation_list_date_range:695:(self, mock_session, client)::AC-3.1.3: Date range filter works."]],"TestConversationPromptsEndpoint":["727",["mock_session:731:(self)::Create mock async database session.","test_conversation_id:736:(self)::Test conversation ID.","app:741:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:749:async ()::","mock_get_session:752:async ()::","client:761:(self, app)::Create test client.","test_conversation_prompts_returns_all:765:(self, mock_session, client, test_conversation_id)::AC-3.2.1: Returns all prompts for conversation.","test_conversation_prompts_ordered_by_created_at:796:(self, mock_session, client, test_conversation_id)::AC-3.2.2: Prompts are ordered by created_at ascending.","test_conversation_prompts_not_found:831:(self, mock_session, client, test_conversation_id)::Returns 404 when conversation not found."]],"TestPipelineStatusEndpoint":["842",["mock_session:846:(self)::Create mock async database session.","test_conversation_id:851:(self)::Test conversation ID.","app:856:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:864:async ()::","mock_get_session:867:async ()::","client:876:(self, app)::Create test client.","test_pipeline_status_returns_stages:880:(self, mock_session, client, test_conversation_id)::AC-3.3.1: Returns 9-stage status from job_executions.","test_pipeline_status_failed_has_error:925:(self, mock_session, client, test_conversation_id)::AC-3.3.2: Failed stages include error details.","test_pipeline_status_not_found:957:(self, mock_session, client, test_conversation_id)::Returns 404 when conversation not found."]],"TestSystemOverviewEndpoint":["973",["mock_session:977:(self)::Create mock async database session.","app:982:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:990:async ()::","mock_get_session:993:async ()::","client:1002:(self, app)::Create test client.","test_system_overview_returns_metrics:1006:(self, mock_session, client)::AC-4.1.1: Returns active_users, conversations_today.","test_system_overview_processing_success_rate:1037:(self, mock_session, client)::AC-4.1.2: Returns processing_success_rate.","test_system_overview_average_response_time:1068:(self, mock_session, client)::AC-4.1.3: Returns average_response_time."]],"TestErrorLogEndpoint":["1098",["mock_session:1102:(self)::Create mock async database session.","app:1107:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:1115:async ()::","mock_get_session:1118:async ()::","client:1127:(self, app)::Create test client.","test_error_log_returns_summary:1131:(self, mock_session, client)::AC-4.2.1: Returns error list with categorization.","test_error_log_filters_by_type:1161:(self, mock_session, client)::AC-4.2.2: Filter by type, date range works.","test_error_log_search:1188:(self, mock_session, client)::AC-4.2.3: Search by message works."]],"TestBossEncountersEndpoint":["1216",["mock_session:1220:(self)::Create mock async database session.","test_user_id:1225:(self)::Test user ID.","app:1230:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:1238:async ()::","mock_get_session:1241:async ()::","client:1250:(self, app)::Create test client.","test_boss_encounters_returns_list:1254:(self, mock_session, client, test_user_id)::AC-4.3.1: Returns boss encounter list.","test_boss_encounters_includes_details:1289:(self, mock_session, client, test_user_id)::AC-4.3.2: Includes chapter, outcome, reasoning."]],"TestAuditLogsEndpoint":["1326",["mock_session:1330:(self)::Create mock async database session.","admin_user_id:1335:(self)::Admin user ID for testing.","app:1340:(self, mock_session, admin_user_id):mock_admin_auth,mock_get_session:Create isolated test app.","mock_admin_auth:1348:async ()::","mock_get_session:1351:async ()::","client:1360:(self, app)::Create test client.","test_audit_logs_returns_own_actions:1364:(self, mock_session, client, admin_user_id)::AC-4.4.1: Returns admin's own audit log entries.","test_audit_logs_paginated:1400:(self, mock_session, client, admin_user_id)::AC-4.4.2: Paginated with date filter."]]}],"t/api/routes/test_admin_processing_stats.py":["p",{"TestProcessingStatsEndpoint":["17",["mock_session:21:(self)::Create mock async database session.","app:26:(self, mock_session):mock_admin_auth,mock_get_session:Create isolated test app with admin router and mocked dependencies.","mock_admin_auth:32:async ()::","mock_get_session:36:async ()::","client:45:(self, app)::Create test client with mocked dependencies.","test_returns_zero_stats_when_no_jobs:49:(self, mock_session, client)::Returns zeroed stats when no post-processing jobs exist.","test_calculates_success_rate:80:(self, mock_session, client)::Calculates correct success rate from 24h jobs.","test_calculates_avg_duration:109:(self, mock_session, client)::Calculates average duration in milliseconds.","test_counts_pending_conversations:135:(self, mock_session, client)::Counts conversations pending processing.","test_counts_stuck_conversations:163:(self, mock_session, client)::Counts conversations stuck in processing.","test_response_model_validation:191:(self, mock_session, client)::Response validates against ProcessingStatsResponse schema.","test_handles_100_percent_success_rate:239:(self, mock_session, client)::Handles 100% success rate correctly."]]}],"t/api/routes/test_portal_deletion.py":["p",{"TestAccountDeletion":["21",["app:25:(self)::Create isolated test app with portal router.","client:32:(self, app)::Create test client with isolated app.","mock_user_id:37:(self)::Create a mock user ID.","test_delete_account_endpoint_exists:41:(self, client)::Delete account endpoint is registered at DELETE /portal/account.","test_delete_account_requires_auth:47:(self, client)::DELETE /account requires authentication.","test_delete_account_requires_confirmation:52:(self, client, mock_user_id)::AC-T45.1: Deletion requires confirm=true parameter.","test_delete_account_with_confirmation:76:(self, client, mock_user_id)::AC-T45.1: Deletion succeeds with confirm=true.","test_delete_account_user_not_found:109:(self, client, mock_user_id)::Deletion of non-existent user returns 404.","test_delete_account_response_structure:138:(self, client, mock_user_id)::AC-T45.3: Deletion returns success response for frontend handling."]],"TestCascadeDelete":["173",["mock_session:181:(self)::Create mock async session.","test_delete_user_cascade_deletes_user:189:async (self, mock_session)::delete_user_cascade removes the user entity.","test_delete_user_cascade_not_found:210:async (self, mock_session)::delete_user_cascade returns False if user not found.","test_user_model_has_cascade_relationships:222:(self)::AC-T45.2: User model relationships have cascade=\"all, delete-orphan\"."]]}],"t/api/routes/test_portal_settings.py":["p",{"TestPortalSettings":["22",["app:26:(self)::Create isolated test app with portal router.","client:33:(self, app)::Create test client with isolated app.","mock_user_id:38:(self)::Create a mock user ID.","mock_user:43:(self, mock_user_id)::Create a mock user with settings.","test_get_settings_endpoint_exists:52:(self, client)::Settings endpoint is registered at /portal/settings.","test_get_settings_requires_auth:58:(self, client)::GET /settings requires authentication.","test_get_settings_returns_preferences:63:(self, client, mock_user_id, mock_user)::AC-T44.1: GET /settings returns user timezone and notification preferences.","test_update_settings_endpoint_exists:95:(self, client)::Update settings endpoint is registered at PUT /portal/settings.","test_update_settings_requires_auth:101:(self, client)::PUT /settings requires authentication.","test_update_timezone_valid:106:(self, client, mock_user_id, mock_user)::AC-T44.2: User can update timezone from dropdown.","test_update_notifications_toggle:139:(self, client, mock_user_id, mock_user)::AC-T44.3: User can toggle notifications on/off.","test_update_timezone_invalid:170:(self, client, mock_user_id, mock_user)::Invalid timezone should return 422 validation error."]],"TestSettingsSchema":["202",["test_valid_timezones:205:(self)::Common timezones should be accepted.","test_settings_response_has_required_fields:221:(self)::UserSettingsResponse has all required fields."]]}],"t/api/routes/test_summary_llm.py":["p",{"TestDailySummaryLLM":["12",["conversations_data:16:(self)::","new_threads:23:(self)::","nikita_thoughts:30:(self)::","test_llm_generates_summary:37:async (self, conversations_data, new_threads, nikita_thoughts)::AC-3.5.1: LLM generates summary from conversation data (mocked).","test_fallback_on_llm_failure:70:async (self, conversations_data, new_threads, nikita_thoughts)::AC-3.5.2: Fallback to basic summary on LLM failure.","test_fallback_on_missing_api_key:91:async (self, conversations_data, new_threads, nikita_thoughts)::AC-3.5.2b: Fallback when anthropic_api_key is None.","test_summary_includes_key_moments_and_tone:109:(self)::AC-3.5.3: Summary includes key_moments and emotional_tone.","test_llm_timeout_prevents_blocking:127:async (self, conversations_data, new_threads, nikita_thoughts):slow_run:AC-3.5.4: LLM timeout (10s) prevents blocking.","slow_run:133:async (*args, **kwargs)::","test_fallback_summary_with_single_conversation:158:(self)::Test fallback summary grammar for single conversation.","test_fallback_summary_dominant_tone:166:(self)::Test fallback summary picks dominant emotional tone."]]}],"t/api/routes/test_telegram_linking.py":["p",{"TestGenerateLinkCode":["23",["app:27:(self)::Create isolated test app with portal router.","client:34:(self, app)::Create test client with isolated app.","mock_user_id:39:(self)::Create a mock user ID.","test_link_telegram_endpoint_exists:43:(self, client)::Link Telegram endpoint is registered at POST /portal/link-telegram.","test_link_telegram_requires_auth:49:(self, client)::POST /link-telegram requires authentication.","test_generate_link_code_creates_code:54:(self, client, mock_user_id)::AC-T46.1: POST /link-telegram generates 6-char code.","test_generate_link_code_returns_expiry:90:(self, client, mock_user_id)::AC-T46.3: Response includes expires_at timestamp.","test_generate_link_code_returns_instructions:125:(self, client, mock_user_id)::AC-T46.2: Response includes instructions for linking."]],"TestTelegramLinkModel":["161",["test_generate_random_code:164:(self)::generate_link_code creates 6-character alphanumeric code.","test_codes_are_unique:173:(self)::Generated codes should be unique (statistically).","test_link_code_expiry_calculation:181:(self)::TelegramLinkCode expires after 10 minutes."]],"TestVerifyLinkCode":["190",["mock_session:198:(self)::Create mock async session.","test_verify_valid_code_returns_user_id:207:async (self, mock_session)::AC-T46.4: Valid code returns user_id for linking.","test_verify_expired_code_returns_none:228:async (self, mock_session)::Expired code returns None.","test_verify_invalid_code_returns_none:249:async (self, mock_session)::Invalid/unknown code returns None."]]}],"t/api/schemas/test_monitoring.py":["p",{"TestSystemMetricsSchema":["13",["test_system_metrics_schema_validation:16:(self)::AC-1.4.1: SystemMetrics schema validates correctly.","test_system_metrics_requires_positive_counts:36:(self)::SystemMetrics validates count fields are non-negative."]],"TestMemorySnapshotSchema":["54",["test_memory_snapshot_schema_validation:57:(self)::AC-1.4.1: MemorySnapshot schema validates correctly.","test_memory_snapshot_graph_status_values:74:(self)::MemorySnapshot graph_status must be valid value."]],"TestPipelineStatusSchema":["92",["test_pipeline_status_schema_validation:95:(self)::AC-1.4.1: PipelineStatus schema validates correctly.","test_pipeline_stage_statuses:123:(self)::PipelineStage status must be valid value."]],"TestErrorSummarySchema":["138",["test_error_summary_schema_validation:141:(self)::AC-1.4.2: ErrorSummary schema validates correctly."]],"TestScoreTimelineSchema":["164",["test_score_timeline_schema_validation:167:(self)::AC-1.4.2: ScoreTimeline schema validates correctly."]],"TestBossEncountersSchema":["197",["test_boss_encounters_schema_validation:200:(self)::AC-1.4.2: BossEncounters schema validates correctly."]],"TestAllSchemaValidation":["227",["test_all_schemas_have_validators:230:(self)::AC-1.4.3: All schemas have proper validation.","test_schemas_are_pydantic_models:246:(self)::All schemas are Pydantic BaseModel subclasses."]]}],"t/context/utils/test_token_estimator.py":["p",{"TestTokenEstimatorFast":["17",["test_fast_estimate_empty_string:20:(self)::Empty string returns 0 tokens.","test_fast_estimate_none:25:(self)::None returns 0 tokens.","test_fast_estimate_simple_text:30:(self)::Simple text estimation uses ~4 chars per token.","test_fast_estimate_is_integer_division:38:(self)::Fast estimate uses integer division (floor).","test_fast_estimate_performance:45:(self)::Fast estimate should be very quick (< 1ms for large text)."]],"TestTokenEstimatorAccurate":["60",["test_accurate_estimate_empty_string:63:(self)::Empty string returns 0 tokens.","test_accurate_estimate_none:68:(self)::None returns 0 tokens.","test_accurate_estimate_simple_text:73:(self)::Accurate estimate uses tiktoken encoder.","test_accurate_estimate_english_paragraph:81:(self)::English paragraph should tokenize efficiently.","test_accurate_estimate_repeated_chars:89:(self)::Repeated chars compress well in tiktoken."]],"TestTokenEstimatorComparison":["98",["test_fast_vs_accurate_similar_for_english:101:(self)::For typical English, fast and accurate should be within 50%.","test_fast_is_conservative:112:(self)::Fast estimate should generally err on the side of under-counting.","test_estimate_method_mode_selection:125:(self)::Test the unified estimate() method with mode selection."]],"TestTokenEstimatorSingleton":["137",["test_singleton_returns_same_instance:140:(self)::get_token_estimator() returns same instance.","test_convenience_functions:146:(self)::Test convenience functions match singleton methods."]],"TestTokenEstimatorEdgeCases":["154",["test_unicode_text:157:(self)::Unicode text should be handled correctly.","test_very_long_text:169:(self)::Very long text should not crash.","test_whitespace_only:180:(self)::Whitespace-only text should return some tokens."]]}],"t/db/integration/test_profile_integration.py":["p",{"TestProfileRepositoryIntegration":["33",["test_create_and_get_profile:36:async (self, session:AsyncSession)::Test create_profile() and get_by_user_id() work together.","test_update_profile:68:async (self, session:AsyncSession)::Test profile update works correctly."]],"TestBackstoryRepositoryIntegration":["94",["test_create_and_get_backstory:97:async (self, session:AsyncSession)::Test create() and get_by_user_id() work together."]],"TestOnboardingStateRepositoryIntegration":["132",["test_get_or_create_new:135:async (self, session:AsyncSession)::Test get_or_create() creates new state when none exists.","test_get_or_create_existing:147:async (self, session:AsyncSession)::Test get_or_create() returns existing state.","test_update_step:163:async (self, session:AsyncSession)::Test update_step() advances step and updates answers.","test_delete_state:181:async (self, session:AsyncSession)::Test delete() removes onboarding state.","test_delete_nonexistent:197:async (self, session:AsyncSession)::Test delete() returns False for non-existent state."]],"TestVenueCacheRepositoryIntegration":["206",["test_store_and_get:209:async (self, session:AsyncSession)::Test store() and get_or_none() work together.","test_get_nonexistent_returns_none:231:async (self, session:AsyncSession)::Test get_or_none() returns None for missing cache.","test_store_upserts_existing:238:async (self, session:AsyncSession)::Test store() updates existing cache entry.","test_cleanup_expired:258:async (self, session:AsyncSession)::Test cleanup_expired() removes old cache entries."]]}],"t/db/models/test_generated_prompt.py":["p",{"TestGeneratedPromptPlatformField":["11",["test_generated_prompt_has_platform_field:14:(self)::Test that GeneratedPrompt has platform field (AC-T4.1.1).","test_generated_prompt_platform_default:24:(self)::Test that platform field has default 'text' (AC-T4.1.2).","test_generated_prompt_platform_not_nullable:33:(self)::Test that platform field is not nullable (AC-T4.1.3).","test_generated_prompt_platform_voice:39:(self)::Test that platform can be set to 'voice'."]]}],"t/db/repositories/test_generated_prompt_repository.py":["p",["user_id:17:()::","conversation_id:23:()::","mock_session:29:()::"],{"TestGeneratedPromptRepository":["40",["test_create_log_calls_commit_not_flush:49:async (self, mock_session, user_id, conversation_id,)::","test_create_log_includes_conversation_id:85:async (self, mock_session, user_id, conversation_id,)::Verify conversation_id is stored with prompt (T1.3).","test_create_log_without_conversation_id:107:async (self, mock_session, user_id,)::Verify prompts can be created without conversation_id.","test_create_log_stores_context_snapshot:129:async (self, mock_session, user_id,)::Verify context_snapshot is stored correctly.","test_get_by_user_id_queries_correct_filter:161:async (self, mock_session, user_id,)::Verify get_by_user_id queries with correct user_id filter.","test_get_latest_by_user_id_queries_with_limit:182:async (self, mock_session, user_id,)::Verify get_latest_by_user_id queries with limit 1."]],"TestGeneratedPromptRepositoryCommitBehavior":["199",["test_flush_not_called_on_create_log:207:async (self, mock_session, user_id,)::Verify flush is NOT called (we use commit now).","test_create_log_returns_prompt_after_commit:231:async (self, mock_session, user_id, conversation_id,)::Verify create_log returns the prompt object after commit."]]}],"t/db/test_conversation_stuck.py":["p",{"TestDetectStuckRepository":["13",["mock_session:17:(self)::Create mock async database session.","test_detect_stuck_finds_old_processing:22:async (self, mock_session)::Finds conversations stuck in processing for >30 min.","test_detect_stuck_returns_empty_list_when_none:38:async (self, mock_session)::Returns empty list when no conversations are stuck.","test_detect_stuck_respects_limit:52:async (self, mock_session)::Respects the limit parameter.","test_detect_stuck_uses_timeout_minutes:67:async (self, mock_session)::Uses the timeout_minutes parameter for cutoff calculation."]],"TestMarkProcessingUpdatesStartedAt":["83",["mock_session:87:(self)::Create mock async database session.","test_mark_processing_sets_processing_started_at:92:async (self, mock_session)::Verify mark_processing sets processing_started_at timestamp.","test_mark_processing_increments_attempts:113:async (self, mock_session)::Verify mark_processing increments processing_attempts."]],"TestConversationModelProcessingStartedAt":["129",["test_conversation_has_processing_started_at_field:132:(self)::Verify Conversation model has processing_started_at field.","test_processing_started_at_is_nullable:137:(self)::Verify processing_started_at allows None."]],"TestStuckDetectionLogic":["151",["test_only_processing_status_detected_as_stuck:155:async (self)::Only conversations in 'processing' status should be detected.","test_detect_stuck_orders_by_oldest_first:171:async (self)::Detect stuck should return oldest stuck conversations first."]],"TestDetectStuckEndpointBasic":["190",["test_endpoint_exists_in_router:193:(self)::Verify detect-stuck endpoint is registered in tasks router.","test_endpoint_is_post_method:203:(self)::Verify detect-stuck endpoint uses POST method."]]}],"t/life_simulation/test_arcs.py":["p",{"TestArcSystemSingleton":["29",["test_arc_system_singleton:32:(self)::Test that get_arc_system returns singleton."]],"TestTemplateSelection":["41",["system:45:(self)::Create a fresh NarrativeArcSystem.","test_template_selection_vulnerability_0:49:(self, system)::Test that vulnerability 0 only gets templates with requirement 0.","test_template_selection_vulnerability_3:60:(self, system)::Test that vulnerability 3 can access deeper templates.","test_template_selection_vulnerability_5:81:(self, system)::Test that vulnerability 5 can access all templates.","test_template_selection_by_topic_work:95:(self, system)::Test template selection favors work topics when mentioned.","test_template_selection_by_topic_friend:113:(self, system)::Test template selection with friend topics."]],"TestArcStageProgression":["131",["test_arc_stage_progression_setup_to_rising:134:(self)::Test advancing from SETUP to RISING.","test_arc_stage_progression_full_cycle:151:(self)::Test full stage progression cycle.","test_arc_should_advance_by_conversation_count:178:(self)::Test should_advance based on conversation progress.","test_arc_max_duration_enforcement:195:(self)::Test that arc respects max conversation count."]],"TestArcResolution":["209",["test_arc_resolution_sets_resolved_at:212:(self)::Test that resolution sets resolved_at timestamp.","test_arc_inactive_after_resolution:229:(self)::Test that resolved arcs cannot advance further."]],"TestArcSerialization":["245",["test_arc_to_dict_serialization:248:(self)::Test converting ActiveArc to dictionary.","test_arc_from_dict_deserialization:274:(self)::Test creating ActiveArc from dictionary."]],"TestArcCategories":["304",["test_arc_category_filtering:307:(self)::Test that templates are indexed by category."]],"TestInvolvedCharacters":["317",["test_involved_characters_in_arc:320:(self)::Test that arcs have involved_characters populated."]],"TestEmotionalImpact":["334",["test_emotional_impact_values:337:(self)::Test that templates have valid emotional impact."]],"TestArcCreation":["348",["test_arc_creation_from_template:351:(self)::Test creating an arc from a template."]],"TestActiveArcMethods":["368",["test_active_arc_advance_stage_method:371:(self)::Test the advance_stage method behavior."]],"TestArcContextFormatting":["390",["test_arc_context_formatting:393:(self)::Test formatting arcs for prompt context.","test_arc_context_formatting_empty:424:(self)::Test formatting empty arc list."]],"TestArcTemplateDuration":["433",["test_arc_template_duration_range:436:(self)::Test that all templates have valid duration ranges."]],"TestShouldStartNewArc":["447",["test_should_start_arc_rejects_when_max_active:450:(self)::Test that no new arc starts when already at max.","test_should_start_arc_respects_cooldown:468:(self)::Test that arc cooldown is respected."]],"TestArcTemplateCount":["482",["test_sufficient_templates:485:(self)::Test that we have at least 10 arc templates."]],"TestArcUpdate":["492",["test_arc_update_increments_count:495:(self)::Test that update_arc increments conversation count."]]}],"t/life_simulation/test_psychology_mapper.py":["p",{"TestPsychologyMapperSingleton":["18",["test_get_psychology_mapper_returns_instance:21:(self)::Should return PsychologyMapper instance.","test_get_psychology_mapper_returns_same_instance:26:(self)::Should return same instance on subsequent calls."]],"TestCoreWoundEnum":["33",["test_too_much_value:36:(self)::Should have correct value.","test_conditional_love_value:40:(self)::Should have correct value.","test_vulnerability_punished_value:44:(self)::Should have correct value.","test_fundamentally_broken_value:48:(self)::Should have correct value."]],"TestDefenseMechanismEnum":["53",["test_intellectualization_value:56:(self)::Should have correct value.","test_humor_deflection_value:60:(self)::Should have correct value.","test_testing_value:64:(self)::Should have correct value.","test_preemptive_withdrawal_value:68:(self)::Should have correct value."]],"TestTraumaTriggerEnum":["73",["test_raised_voice_value:76:(self)::Should have correct value.","test_possessiveness_value:80:(self)::Should have correct value.","test_abandonment_value:84:(self)::Should have correct value."]],"TestPsychologicalState":["89",["test_to_dict:92:(self)::Should convert to dictionary correctly.","test_format_for_prompt_with_defenses:111:(self)::Should format defenses correctly.","test_format_for_prompt_with_triggers:126:(self)::Should format triggers correctly.","test_format_for_prompt_with_wounds:141:(self)::Should format wounds correctly."]],"TestPsychologyMapperAnalyzeEvent":["157",["test_analyze_event_with_viktor:160:(self)::Should activate fundamentally_broken wound for Viktor.","test_analyze_event_with_alexei:172:(self)::Should activate conditional love and trigger criticism for Alexei (father).","test_analyze_event_with_max:185:(self)::Should activate trauma triggers for Max (abusive ex).","test_analyze_event_with_lena:199:(self)::Should have positive mood impact for Lena (supportive friend).","test_analyze_event_setback_triggers_criticism:212:(self)::Should trigger criticism for setback events.","test_analyze_event_plans_cancelled_triggers_abandonment:223:(self)::Should trigger abandonment for cancelled plans."]],"TestPsychologyMapperAnalyzeUserBehavior":["236",["test_analyze_user_behavior_raised_voice:239:(self)::Should trigger raised voice response.","test_analyze_user_behavior_jealousy:251:(self)::Should trigger possessiveness response.","test_analyze_user_behavior_went_silent:262:(self)::Should trigger abandonment response.","test_analyze_user_behavior_high_intensity_activates_defenses:274:(self)::Should activate more defenses at high intensity.","test_analyze_user_behavior_low_intensity:285:(self)::Should have minimal defenses at low intensity."]],"TestPsychologyMapperGetHealingResponse":["296",["test_get_healing_response_raised_voice_handled_well:299:(self)::Should return positive response when raised voice handled well.","test_get_healing_response_abandonment_handled_well:310:(self)::Should return positive response when abandonment handled well.","test_get_healing_response_not_handled_well:321:(self)::Should return guarded response when not handled well."]]}],"t/life_simulation/test_social_generator.py":["p",{"TestFriendCharacter":["26",["test_friend_character_creation:29:(self)::Test creating a friend character with required fields.","test_friend_character_to_dict:47:(self)::Test converting friend character to dictionary.","test_friend_character_with_adapted_traits:67:(self)::Test friend character with adaptation traits."]],"TestSocialCircle":["83",["test_social_circle_creation:86:(self)::Test creating an empty social circle.","test_get_character_by_role:95:(self)::Test retrieving character by role.","test_get_character_by_role_not_found:113:(self)::Test retrieving non-existent role.","test_get_character_by_name:122:(self)::Test retrieving character by name (case-insensitive).","test_get_active_friends_context_empty:140:(self)::Test context string for empty circle.","test_get_active_friends_context_with_friends:149:(self)::Test context string with friends.","test_social_circle_to_dict:177:(self)::Test converting social circle to dictionary."]],"TestSocialCircleGenerator":["192",["test_generator_singleton:195:(self)::Test that generator singleton works.","test_generate_social_circle_basic:202:(self)::Test generating basic social circle without adaptations.","test_generate_includes_core_characters:213:(self)::Test that core characters are included.","test_generate_with_tech_hub_location:229:(self)::Test adaptation for tech hub cities.","test_generate_with_creative_city_location:246:(self)::Test adaptation for creative cities.","test_generate_with_job_tech:263:(self)::Test adaptation for tech job field.","test_generate_with_job_finance:276:(self)::Test adaptation for finance job field.","test_generate_with_hobbies:288:(self)::Test adaptation for hobbies.","test_generate_with_meeting_context_party:301:(self)::Test adaptation for party meeting context.","test_generate_with_meeting_context_tech_conference:318:(self)::Test adaptation for tech conference meeting context.","test_generate_with_multiple_adaptations:332:(self)::Test generating with all adaptation types."]],"TestGenerateSocialCircleForUser":["352",["test_convenience_function_works:355:(self)::Test that convenience function generates circle.","test_convenience_function_with_params:365:(self)::Test convenience function with all parameters."]],"TestCharacterCopying":["381",["test_characters_are_copied_not_shared:384:(self)::Test that generated characters are independent copies.","test_adaptation_traits_are_independent:399:(self)::Test that adapted traits are independent per circle."]]}],"t/onboarding/test_handoff_social_circle.py":["p",{"TestHandoffSocialCircleGeneration":["20",["profile:24:(self)::Create a test profile.","manager:38:(self)::Create a HandoffManager.","test_execute_handoff_generates_social_circle:45:async (self, manager, profile)::Test that execute_handoff generates a social circle for the user.","test_execute_handoff_extracts_location_from_timezone:79:async (self, manager, profile)::Test that location is extracted from timezone for adaptation.","test_execute_handoff_uses_hangout_spots_for_meeting_context:113:async (self, manager, profile)::Test that hangout spots inform meeting context.","test_execute_handoff_continues_if_social_circle_fails:145:async (self, manager, profile)::Test that handoff continues even if social circle generation fails.","test_execute_handoff_logs_social_circle_failure:175:async (self, manager, profile, caplog)::Test that social circle generation failures are logged."]],"TestGenerateAndStoreSocialCircle":["206",["test_generate_and_store_creates_db_records:210:async (self)::Test that social circle is stored in database.","test_generate_and_store_commits_transaction:260:async (self)::Test that database transaction is committed.","test_generate_and_store_logs_error_with_traceback:297:async (self, caplog)::AC-2.1.1: Exception handler logs error with exc_info=True for full traceback ...","test_successful_generation_still_works:334:async (self)::AC-2.1.4: Successful generation still works after error handling changes (Spe..."]]}],"t/onboarding/test_pipeline_bootstrap.py":["p",{"TestPipelineBootstrap":["15",["manager:19:(self)::","user_id:26:(self)::","test_execute_handoff_triggers_pipeline_bootstrap:30:async (self, manager, user_id)::AC-3.4.1: execute_handoff() triggers pipeline bootstrap.","test_pipeline_failure_does_not_fail_handoff:49:async (self, manager, user_id)::AC-3.4.2: Pipeline failure does not fail handoff.","test_bootstrap_pipeline_processes_conversation:71:async (self, user_id)::AC-3.4.3: Pipeline generates prompts for new user.","test_bootstrap_skipped_if_flag_disabled:121:async (self, user_id)::AC-3.4.4: Bootstrap skipped if flag disabled."]]}],"t/pipeline/test_cache_sync.py":["p",{"TestVoicePromptCacheSync":["17",["mock_session:21:(self)::","builder:27:(self, mock_session)::","ctx:34:(self)::","test_voice_prompt_stored_in_ready_prompts:50:async (self, builder, ctx, mock_session)::AC-3.2.1: Voice prompt stored in ready_prompts table.","test_voice_prompt_synced_to_cached_voice_prompt:70:async (self, builder, ctx, mock_session)::AC-3.2.2: Voice prompt synced to user.cached_voice_prompt.","test_text_prompt_not_synced_to_cached_voice_prompt:89:async (self, builder, ctx, mock_session)::AC-3.2.3: Text prompt NOT synced to cached_voice_prompt (voice only).","test_sync_failure_does_not_fail_pipeline:105:async (self, builder, ctx, mock_session)::AC-3.2.4: Sync failure does not fail the pipeline stage."]]}],"t/pipeline/test_feature_flags.py":["p",{"TestFeatureFlagDefaults":["14",["test_default_unified_pipeline_enabled_is_true:17:(self)::AC-3.1.1: Default Settings has unified_pipeline_enabled=True.","test_default_rollout_pct_is_100:30:(self)::AC-3.1.2: Default Settings has unified_pipeline_rollout_pct=100.","test_is_unified_pipeline_enabled_returns_true_with_defaults:43:(self)::AC-3.1.3: is_unified_pipeline_enabled_for_user() returns True with defaults.","test_env_var_override_disables_pipeline:57:(self)::AC-3.1.4: Override via env var UNIFIED_PIPELINE_ENABLED=false returns False."]]}],"t/pipeline_fixes/test_issue_026_decimal_float.py":["p",{"TestDecimalFloatConversion":["17",["test_compute_with_decimal_relationship_score:20:(self)::StateComputer.compute should handle Decimal relationship_score.","test_compute_with_float_relationship_score:43:(self)::StateComputer.compute should still work with float relationship_score.","test_apply_relationship_modifier_with_decimal:61:(self)::_apply_relationship_modifier should handle Decimal input.","test_apply_relationship_modifier_edge_cases:77:(self)::Test edge cases for relationship score conversion.","test_compute_preserves_computation_accuracy:90:(self)::Ensure Decimal to float conversion doesn't change results."]]}],"t/pipeline_fixes/test_issue_027_text_pattern_attribute.py":["p",{"TestTextPatternResultAttribute":["13",["test_text_pattern_result_has_context_attribute:16:(self)::TextPatternResult should have 'context' attribute.","test_text_pattern_result_no_detected_context:32:(self)::TextPatternResult should NOT have 'detected_context' attribute.","test_context_values:47:(self)::Verify context can take various MessageContext values."]]}],"t/pipeline_fixes/test_issue_028_calibration_result.py":["p",{"TestCalibrationResultRequiredFields":["18",["test_calibration_result_requires_suggested_state:21:(self)::Creating CalibrationResult without suggested_state should fail.","test_calibration_result_rejects_is_optimal:36:(self)::CalibrationResult should reject unknown field 'is_optimal'.","test_calibration_result_with_suggested_state:51:(self)::Creating CalibrationResult with suggested_state should work.","test_calibration_result_all_states:64:(self)::CalibrationResult can have any EngagementState as suggested_state."]],"TestCalibrationResultFromCalculator":["77",["test_calculator_returns_complete_result:80:(self)::CalibrationCalculator.compute should return result with suggested_state."]]}],"t/touchpoints/test_emotional_integration.py":["p",{"TestEmotionalStateIntegration":["21",["mock_session:25:(self)::Create a mock database session.","engine:33:(self, mock_session)::Create TouchpointEngine with mock session.","test_load_emotional_state_returns_state_from_store:41:async (self, engine)::_load_emotional_state should return state from StateStore.","test_load_emotional_state_returns_defaults_when_no_state:70:async (self, engine)::_load_emotional_state should return neutral defaults when no state exists.","test_load_emotional_state_handles_error_gracefully:90:async (self, engine)::_load_emotional_state should return defaults on error.","test_load_emotional_state_returns_all_four_dimensions:111:async (self, engine)::_load_emotional_state should return all 4D dimensions."]],"TestConflictSystemIntegration":["139",["mock_session:143:(self)::Create a mock database session.","engine:151:(self, mock_session)::Create TouchpointEngine with mock session.","test_check_conflict_active_returns_true_when_conflict_exists:158:async (self, engine)::_check_conflict_active should return True for any non-NONE conflict state.","test_check_conflict_active_returns_false_when_no_conflict:180:async (self, engine)::_check_conflict_active should return False when conflict_state is NONE.","test_check_conflict_active_returns_false_when_no_state:201:async (self, engine)::_check_conflict_active should return False when no state exists.","test_check_conflict_active_handles_error_gracefully:217:async (self, engine)::_check_conflict_active should return False on error.","test_check_conflict_active_for_all_conflict_states:248:async (self, engine, conflict_state, expected)::_check_conflict_active should correctly identify all conflict states."]],"TestIntegrationWithSilenceEvaluation":["269",["mock_session:273:(self)::Create a mock database session.","engine:281:(self, mock_session)::Create TouchpointEngine with mock session.","test_evaluate_silence_uses_emotional_state:288:async (self, engine)::_evaluate_silence should pass emotional state to StrategicSilence.","test_evaluate_silence_uses_conflict_state:340:async (self, engine)::_evaluate_silence should pass conflict state to StrategicSilence."]]}],"nikita/agents/text/__init__.py":["p",["get_memory_client:22:async (user_id:str)>\"SupabaseMemory\"::Lazy wrapper for get_memory_client to avoid import-time errors.","get_user_by_id:36:async (user_id:UUID)>\"User | None\"::","get_nikita_agent_for_user:58:async (user_id:UUID)>tuple[Agent[NikitaDeps, str], NikitaDeps]::"],{"UserNotFoundError":["28",["__init__:31:(self, user_id:UUID):__init__:"]]}],"nikita/agents/text/agent.py":["p",["_create_nikita_agent:56:()>Agent[NikitaDeps, str]:add_chapter_behavior,add_personalized_context,note_user_fact,recall_memory:","get_nikita_agent:170:()>Agent[NikitaDeps, str]:_create_nikita_agent:","_try_load_ready_prompt:205:async (user_id:\"UUID\", session:::","build_system_prompt:275:async (memory:\"NikitaMemory | None\", user::str, conversation_id:\"UUID | None\" = None, session:\"AsyncSession | None\" = None, # Spec 038:Session propagation)>str:_build_system_prompt_legacy,_try_load_ready_prompt:","_build_system_prompt_legacy:333:async (memory:\"SupabaseMemory | None\", user::str,)>str:build_system_prompt:","generate_response:371:async (deps:NikitaDeps, user_message::add_personalized_context,build_system_prompt:"],{"_AgentProxy":["183",["_real_agent:189:(self)>Agent[NikitaDeps, str]:get_nikita_agent:","__getattr__:194:(self, name:str)::"]]}],"nikita/agents/text/deps.py":["p",{"NikitaDeps":["20",["chapter:51:(self)>int::"]]}],"nikita/agents/text/facts.py":["p",{"ExtractedFact":["15",[]],"FactExtractor":["67",["__init__:85:(self, min_confidence:float = 0.5)::","extract_facts:99:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]:_call_llm_for_extraction,_deduplicate_facts:","_call_llm_for_extraction:132:async (self, user_message:str, nikita_response:str, existing_facts:list[str],)>list[ExtractedFact]::","_deduplicate_facts:156:(self, new_facts:list[ExtractedFact], existing_facts:list[str],)>list[ExtractedFact]::"]]}],"nikita/agents/text/handler.py":["p",["_get_nikita_agent_for_user:41:()::","_generate_response:47:()::","_get_text_pattern_processor:53:()::","_get_processor_instance:63:():_get_text_pattern_processor:","get_nikita_agent_for_user:73:async (user_id:UUID)::Wrapper for lazy import.","generate_response:79:async (deps, message:str)::Wrapper for lazy import.","store_pending_response:119:async (user_id:UUID, response::datetime, response_id:UUID,)>None::"],{"ResponseDecision":["88",[]],"MessageHandler":["140",["__init__:169:(self, timer:Optional[ResponseTimer] = None, skip_decision:Optional[SkipDecision] = None, fact_extractor:Optional[FactExtractor] = None,)::","_apply_text_patterns:186:(self, response_text:str)>str:_get_processor_instance:","handle:227:async (self, user_id:UUID, message:str, conversation_messages:list[dict[str, Any]] | None = None, conversation_id:UUID | None = None, session:\"AsyncSession | None\" = None, # Spec 038:Session propagation)>ResponseDecision:_apply_text_patterns,generate_response,get_nikita_agent_for_user,store_pending_response:"]]}],"nikita/agents/text/skip.py":["p",{"SkipDecision":["32",["__init__:53:(self)::Initialize the SkipDecision tracker.","should_skip:57:(self, chapter:int)>bool::","reset:89:(self)>None::Reset the skip tracker state."]]}],"nikita/agents/text/timing.py":["p",{"ResponseTimer":["42",["__init__:58:(self, jitter_factor:float = 0.1)::","calculate_delay:67:(self, chapter:int)>int::","calculate_delay_human_readable:120:(self, chapter:int)>str:calculate_delay:"]]}],"nikita/agents/text/tools.py":["p",["format_memory_results:17:(results:list[dict[str, Any]])>str::","recall_memory:57:async (ctx:RunContext[NikitaDeps], query::format_memory_results:","note_user_fact:79:async (ctx:RunContext[NikitaDeps], fact::float)>str::"]],"nikita/agents/voice/__init__.py":["p",["get_voice_service:54:()>\"VoiceService\"::","get_elevenlabs_client:60:()>\"ElevenLabsClient\"::","get_server_tool_handler:66:()>\"ServerToolHandler\"::","get_tts_config_service:72:()>\"TTSConfigService\"::","get_dynamic_variables_builder:78:()>\"DynamicVariablesBuilder\"::"]],"nikita/agents/voice/availability.py":["p",["get_availability_service:133:()>CallAvailability::"],{"CallAvailability":["44",["get_availability_rate:51:(self, user:\"User\")>float::","is_available:63:(self, user:\"User\")>tuple[bool, str]:get_availability_rate:","check_cooldown:112:(self, user:\"User\")>tuple[bool, int | None]::"]]}],"nikita/agents/voice/config.py":["p",{"VoiceAgentConfig":["86",["__init__:95:(self, settings:\"Settings\")::","generate_system_prompt:111:(self, user_id:UUID, chapter:int, vices:list, user_name:str = \"friend\", relationship_score:float = 50.0,)>str::","get_agent_config:158:(self, user:\"User\")>dict[str, Any]:_get_chapter_tts_settings,_get_first_message,generate_system_prompt:","_get_chapter_tts_settings:216:(self, chapter:int)>TTSSettings::Get TTS settings based on chapter (FR-016).","_get_first_message:227:(self, chapter:int, user_name:str | None)>str::Get chapter-appropriate first message."]]}],"nikita/agents/voice/context.py":["p",["get_dynamic_variables_builder:637:()>DynamicVariablesBuilder::","get_conversation_config_builder:647:(settings:\"Settings\",)>ConversationConfigBuilder::Get conversation config builder with settings.","build_dynamic_variables:656:async (user:\"User\", signed_token::build_from_user,get_dynamic_variables_builder:"],{"DynamicVariablesBuilder":["35",["build_from_context:47:(self, context:VoiceContext, session_token:str | None = None,)>DynamicVariables:_build_context_block,_compute_emotional_context,_compute_nikita_activity,_get_day_of_week:","build_from_user:148:(self, user:\"User\", session_token:str | None = None,)>DynamicVariables:_build_context_block,_compute_nikita_activity,_compute_nikita_energy,_get_day_of_week,_get_time_of_day:","_get_time_of_day:237:(self, hour:int)>str::","_get_day_of_week:257:(self)>str::","_compute_nikita_activity:266:(self, time_of_day:str, day_of_week:str)>str::","_compute_nikita_energy:295:(self, time_of_day:str)>str::","_build_context_block:327:(self, user_name:str = \"\", chapter:int = 1, relationship_score:float = 50.0, today_summary:str = \"\", last_conversation_summary:str = \"\", nikita_daily_events:str = \"\", nikita_mood_4d:dict | None = None, active_conflict_type:str = \"\", active_conflict_severity:float = 0.0, user_backstory:str = \"\",)>str:_compute_emotional_context:","_compute_emotional_context:410:(self, arousal:float = 0.5, valence:float = 0.5, dominance:float = 0.5, intimacy:float = 0.5,)>str::"]],"ConversationConfigBuilder":["456",["__init__:466:(self, settings:\"Settings\")::","build_config:481:async (self, user:\"User\", mood:NikitaMood | None = None, session_token:str | None = None,)>ConversationConfig:_generate_system_prompt,_get_first_message,build_from_user:","_generate_system_prompt:518:async (self, user:\"User\")>str:_generate_fallback_prompt:","_generate_fallback_prompt:535:(self, user:\"User\")>str:_get_relationship_score:","_get_relationship_score:562:(self, user:\"User\")>float::Get relationship score from user metrics.","_get_first_message:572:(self, chapter:int, user_name:str | None,)>str::","to_elevenlabs_format:593:(self, config:ConversationConfig)>dict[str, Any]::"]]}],"nikita/agents/voice/deps.py":["p",{"VoiceAgentDeps":["28",["user_id:62:(self)>UUID::Get the user's ID.","chapter:67:(self)>int::Get the user's current chapter.","relationship_score:72:(self)>float::Get the user's current relationship score.","is_voice_available:79:(self)>bool::"]]}],"nikita/agents/voice/elevenlabs_client.py":["p",["get_elevenlabs_client:528:(api_key:str | None = None,)>ElevenLabsConversationsClient::"],{"TranscriptTurn":["50",[]],"ConversationMetadata":["62",[]],"ConversationAnalysis":["74",[]],"ConversationSummary":["84",[]],"ConversationDetail":["101",[]],"ConversationListResponse":["117",[]],"AgentConversationConfig":["126",[]],"AgentConfig":["140",["system_prompt:151:(self)>str | None::Extract system prompt from conversation config.","first_message:158:(self)>str | None::Extract first message from conversation config.","voice_id:165:(self)>str | None::Extract voice ID from TTS config.","llm_model:172:(self)>str | None::Extract LLM model from config."]],"ElevenLabsConversationsClient":["179",["__init__:207:(self, api_key:str | None = None, timeout:float = 30.0,)::","_headers:220:(self)>dict[str, str]::Build request headers.","list_conversations:235:async (self, agent_id:str | None = None, limit:int = 30, cursor:str | None = None, call_start_after_unix:int | None = None, call_start_before_unix:int | None = None, include_summary:bool = False,)>ConversationListResponse:_headers:","get_conversation:302:async (self, conversation_id:str,)>ConversationDetail:_headers:","get_agent_config:375:async (self, agent_id:str,)>AgentConfig:_headers:","to_transcript_data:422:(self, detail:ConversationDetail,)>TranscriptData::","get_latest_conversation:461:async (self, agent_id:str, user_id:str | None = None,)>ConversationDetail | None:get_conversation,list_conversations:","save_transcript_to_file:483:async (self, conversation_id:str, output_path:str,)>str:get_conversation:"]]}],"nikita/agents/voice/inbound.py":["p",["get_inbound_handler:595:()>InboundCallHandler::","get_session_manager:603:()>VoiceSessionManager::"],{"VoiceSessionManager":["40",["__init__:52:(self)::Initialize session manager with empty session store.","create_session:56:(self, session_id:str, user_id:UUID)>dict[str, Any]::","get_session:77:(self, session_id:str)>dict[str, Any] | None::","handle_disconnect:88:(self, session_id:str)>None::","attempt_recovery:103:(self, session_id:str)>bool:finalize_session:","finalize_session:143:(self, session_id:str)>None::"]],"InboundCallHandler":["157",["__init__:166:(self)::Initialize inbound call handler.","_generate_signed_token:170:(self, user_id:str, session_id:str)>str::","handle_incoming_call:197:async (self, phone_number:str)>dict[str, Any]:_build_context,_check_availability,_generate_signed_token,_get_conversation_config_override,_get_default_dynamic_variables,_lookup_user_by_phone,create_session:","_lookup_user_by_phone:324:async (self, phone_number:str)>\"User | None\"::","_check_availability:343:async (self, user:\"User\")>tuple[bool, str]::","_build_context:361:async (self, user:\"User\", signed_token:str | None = None)>dict[str, Any]::","_get_default_dynamic_variables:375:(self, signed_token:str)>dict[str, str]::","_get_conversation_config_override:413:async (self, user:\"User\")>dict[str, Any]:_generate_fallback_prompt,_get_first_message,_try_load_ready_prompt:","_try_load_ready_prompt:462:async (self, user_id:UUID)>str | None::","_generate_fallback_prompt:509:(self, user:\"User\")>str:_get_relationship_score:","_get_relationship_score:538:(self, user:\"User\")>float::Get relationship score from user metrics.","_get_first_message:544:(self, user:\"User\")>str::","_get_tts_config:565:(self, user:\"User\")>dict[str, Any]::"]]}],"nikita/agents/voice/models.py":["p",{"ServerToolRequest":["63",[]],"ServerToolResponse":["83",[]],"TranscriptEntry":["112",[]],"TranscriptData":["131",[]],"TurnScore":["148",[]],"CallScore":["161",[]],"VoiceContext":["200",[]],"CallResult":["243",[]],"TTSSettings":["277",[]],"DynamicVariables":["313",["to_dict:413:(self)>dict[str, str]::Convert to dict for ElevenLabs API, filtering secrets.","to_dict_with_secrets:421:(self)>dict[str, str]::Convert to dict including secrets (for server-side use)."]],"ConversationConfig":["431",[]],"VoiceSession":["475",[]]}],"nikita/agents/voice/scheduling.py":["p",["get_voice_scheduler:370:()>VoiceEventScheduler::","get_delivery_handler:378:()>EventDeliveryHandler::"],{"VoiceEventScheduler":["39",["get_chapter_delay:48:(self, user:\"User\")>int::","schedule_follow_up:72:async (self, user_id:UUID, event_type:str, content:dict[str, Any], delay_seconds:int, source_conversation_id:UUID | None = None, platform:str = \"voice\",)>\"ScheduledEvent\":_create_event:","schedule_voice_call:108:async (self, user_id:UUID, delay_hours:float, prompt:str, source_platform:str | None = None, source_conversation_id:UUID | None = None,)>\"ScheduledEvent\":_create_event:","schedule_telegram_message:157:async (self, user_id:UUID, telegram_id:int, text:str, delay_seconds:int, source_conversation_id:UUID | None = None,)>\"ScheduledEvent\":_create_event:","_create_event:200:async (self, user_id:UUID, event_type:str, content:dict[str, Any], scheduled_at:datetime, source_conversation_id:UUID | None, platform:str,)>\"ScheduledEvent\"::"]],"EventDeliveryHandler":["242",["deliver:250:async (self, event:\"ScheduledEvent\")>bool:_deliver_telegram_event,_deliver_voice_event,_mark_delivered:","_deliver_voice_event:277:async (self, event:\"ScheduledEvent\")>bool::","_deliver_telegram_event:308:async (self, event:\"ScheduledEvent\")>bool::","_mark_delivered:342:async (self, event:\"ScheduledEvent\")>None::"]]}],"nikita/agents/voice/scoring.py":["p",{"CallScore":["32",[]],"VoiceCallScorer":["46",["__init__:53:(self)::Initialize the voice call scorer.","score_call:64:async (self, user_id:UUID, session_id:str, transcript:list[tuple[str, str]], context:ConversationContext, duration_seconds:int = 0,)>CallScore::","apply_score:129:async (self, user_id:UUID, call_score:CallScore,)>Decimal:score_call:"]]}],"nikita/agents/voice/server_tools.py":["p",["with_timeout_fallback:38:(timeout_seconds:float = 2.0, fallback_data::decorator,wrapper:","get_server_tool_handler:978:()>ServerToolHandler::"],{"ServerToolHandler":["184",["__init__:191:(self, settings:\"Settings\")::","handle:200:async (self, request:ServerToolRequest)>ServerToolResponse:_get_context,_get_memory,_score_turn,_update_memory:","_validate_token:254:(self, token:str)>tuple[str, str]::","_get_context:302:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]:_add_humanization_context,_compute_nikita_activity,_compute_nikita_energy,_compute_nikita_mood,_query_graph,_try_load_ready_prompt:","_query_graph:444:async (graph_type:str, limit:int = 50)>list[str]::Query a specific graph type and extract fact strings.","_try_load_ready_prompt:598:async (self, user_id:str, session)>str | None::","_compute_nikita_mood:638:(self, chapter:int, engagement_state:str, relationship_score:float)>str::","_compute_nikita_activity:673:(self, time_of_day:str, day_of_week:str)>str::","_compute_nikita_energy:702:(self, time_of_day:str)>str::","_add_humanization_context:724:async (self, user_id:UUID, context:dict[str, Any])>dict[str, Any]::","_get_memory:817:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::","_score_turn:873:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::","_update_memory:943:async (self, user_id:str, session_id:str, data:dict)>dict[str, Any]::"]]}],"nikita/agents/voice/service.py":["p",["get_voice_service:872:()>VoiceService::"],{"VoiceService":["41",["__init__:48:(self, settings:\"Settings\")::","initiate_call:58:async (self, user_id:UUID)>dict[str, Any]:_build_dynamic_variables,_generate_fallback_prompt,_generate_session_id,_generate_signed_token,_get_first_message,_get_tts_settings,_load_context,_load_user,_log_call_started,_try_load_ready_prompt:","_try_load_ready_prompt:161:async (self, user_id:UUID)>str | None::","_load_user:201:async (self, user_id:UUID)>\"User | None\"::","_load_context:228:async (self, user:\"User\")>VoiceContext:_compute_nikita_energy,_compute_nikita_mood,_compute_time_of_day,_enrich_from_memory,_get_user_name:","_enrich_from_memory:274:async (self, user_id:UUID, context:VoiceContext)>None::Enrich context with memory from Supabase pgVector.","_get_user_name:295:(self, user:\"User\")>str::Extract user name from onboarding_profile, user.name, or return default.","_compute_nikita_mood:306:(self, user:\"User\")>NikitaMood::Compute Nikita's mood based on user state.","_compute_nikita_energy:329:(self)>str::Compute Nikita's energy level based on time.","_compute_time_of_day:340:(self)>str::Get current time of day label.","_generate_session_id:351:(self)>str::Generate unique session ID.","_generate_signed_token:355:(self, user_id:str, session_id:str)>str::","_log_call_started:375:async (self, user_id:UUID, session_id:str)>None::Log call started event to database.","_build_dynamic_variables:380:(self, context:VoiceContext)>DynamicVariables::Build dynamic variables for ElevenLabs prompt interpolation.","_get_tts_settings:395:(self, chapter:int, mood:NikitaMood)>TTSSettings::Get TTS settings based on chapter and mood (FR-016, FR-017).","_get_first_message:419:(self, context:VoiceContext)>str::","_generate_fallback_prompt:458:(self, user:\"User\")>str:_generate_fallback_prompt:","get_context_with_text_history:496:async (self, user_id:str,)>dict[str, Any]::","search_user_memory:526:async (self, user_id:str, query:str, source_filter:str | None = None,)>list[dict[str, Any]]::","format_text_history_for_voice:559:async (self, user_id:str,)>dict[str, Any]:get_context_with_text_history:","get_session:603:(self, session_id:str)>dict | None::Get session data by ID.","end_session:607:(self, session_id:str)>None::End and remove a session.","make_outbound_call:620:async (self, to_number:str, user_id:UUID | None = None, conversation_config_override:dict[str, Any] | None = None, dynamic_variables:dict[str, Any] | None = None, is_onboarding:bool = False,)>dict[str, Any]:make_outbound_call:","end_call:764:async (self, user_id:UUID, session_id:str, transcript:list[tuple[str, str]] | None = None, duration_seconds:int = 0,)>dict[str, Any]:_load_user,end_session:"]]}],"nikita/agents/voice/transcript.py":["p",["get_transcript_manager:380:(session:\"AsyncSession | None\" = None,)>TranscriptManager::"],{"TranscriptManager":["27",["__init__:34:(self, session:\"AsyncSession | None\")::","fetch_transcript:45:async (self, conversation_id:str,)>TranscriptData | None::","persist_transcript:72:async (self, user_id:UUID, transcript:TranscriptData,)>dict[str, Any]::","convert_to_exchange_pairs:124:(self, transcript:TranscriptData,)>list[tuple[str, str]]::","extract_facts:150:async (self, transcript:TranscriptData,)>list[dict[str, str]]:_extract_facts_via_llm:","_extract_facts_via_llm:174:async (self, transcript_text:str,)>list[dict[str, str]]::"]]}],"nikita/agents/voice/tts_config.py":["p",["get_tts_config_service:166:()>TTSConfigService::"],{"TTSConfigService":["65",["__init__:72:(self)::Initialize TTS config service.","get_chapter_settings:77:(self, chapter:int)>TTSSettings::","get_mood_modulation:88:(self, mood:NikitaMood)>TTSSettings::","get_final_settings:103:(self, chapter:int, mood:NikitaMood | None = None,)>TTSSettings:_blend_settings,get_chapter_settings,get_mood_modulation:","_blend_settings:136:(self, primary:TTSSettings, secondary:TTSSettings, weight:float = 0.5,)>TTSSettings::"]]}],"nikita/api/dependencies/auth.py":["p",["get_current_user_id:19:async (credentials:HTTPAuthorizationCredentials = Depends(security),)>UUID::","_is_admin_email:95:(email:str)>bool::","get_current_admin_user:120:async (credentials:HTTPAuthorizationCredentials = Depends(security),)>UUID::"]],"nikita/api/main.py":["p",["lifespan:69:async (app:FastAPI)>AsyncGenerator[None, None]::Application lifespan handler with proper DB initialization.","create_app:127:()>FastAPI:global_exception_handler,health,health_deep,root:"],{"SlowRequestMonitoringMiddleware":["31",["dispatch:38:async (self, request:Request, call_next)::"]]}],"nikita/api/routes/admin.py":["p",["list_users:80:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 1, page_size:int = 50,)::List all users (paginated, admin only).","get_user_detail:114:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get full user detail (admin only).","get_user_metrics:142:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user metrics (admin only).","get_user_engagement:163:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user engagement state (admin only).","get_user_vices:197:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get user vice preferences (admin only).","get_user_conversations:220:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)], page:int = 1, page_size:int = 20,)::Get user conversations (admin only).","get_user_memory:258:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_user_scores:329:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)], days:int = 7,)::","set_user_score:389:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set user score (admin only).","set_user_chapter:419:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set user chapter (admin only).","set_game_status:444:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set game status (admin only).","set_engagement_state:471:async (user_id:UUID, request::Annotated[UUID, Depends(get_current_admin_user_id)], session:Annotated[AsyncSession, Depends(get_async_session)],)::Set engagement state (admin only).","reset_boss_attempts:511:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Reset boss attempts to 0 (admin only).","clear_engagement_history:534:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Clear engagement history (admin only).","list_conversations:565:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 1, page_size:int = 50, platform:str | None = None, status:str | None = None, days:int = 7,)::","get_conversation_prompts:635:async (conversation_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_conversation_pipeline:681:async (conversation_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],):_build_pipeline_stages:","_build_pipeline_stages:708:(conversation)>list[PipelineStageItem]:_get_stage_result:","_get_stage_result:770:(conversation, stage_name:str)>str | None::Get result summary for a completed stage based on conversation data.","list_prompts:805:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 1, page_size:int = 50, user_id:UUID | None = None, template:str | None = None,)::","get_prompt_detail:825:async (prompt_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get prompt detail (admin only).","get_system_health:840:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::Get system health status (admin only).","get_admin_stats:874:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::Get admin overview statistics.","get_processing_stats:915:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::","get_pipeline_health:990:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::","get_system_overview:1028:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::","get_error_log:1092:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::str | None = None, search:str | None = None, days:int = 7, page:int = 1, page_size:int = 50,)::","get_user_boss_encounters:1208:async (user_id:UUID, admin_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_audit_logs:1269:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session::int = 7, page:int = 1, page_size:int = 50,)::","get_unified_pipeline_health:1330:async (admin_id:Annotated[UUID, Depends(get_current_admin_user_id)], session:::"]],"nikita/api/routes/admin_debug.py":["p",["get_system_overview:86:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","get_job_status:188:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","list_debug_users:278:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=1, ge=1), page_size:int = Query(default=50, ge=1, le=100), game_status:str | None = Query(default=None), chapter:int | None = Query(default=None, ge=1, le=5),)::","get_debug_user_detail:349:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_user_state_machines:423:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","test_memory_integration:510:async (user_id:str, admin_user_id:::","list_user_prompts:561:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)], limit:int = Query(default=10, ge=1, le=50),)::","get_latest_prompt:602:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","preview_next_prompt:648:async (user_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","list_voice_conversations:698:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0), user_id:UUID | None = Query(default=None, description=\"Filter by user ID\"), status:str | None = Query(default=None, description=\"Filter by status\"),)::","get_voice_conversation_detail:770:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_voice_stats:829:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","list_elevenlabs_calls:892:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], limit::str | None = Query(default=None, description=\"Pagination cursor\"), include_summary:bool = Query(default=False, description=\"Include transcript summaries\"),)::","get_elevenlabs_call_detail:945:async (conversation_id:str, admin_user_id:::","list_text_conversations:1002:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0), user_id:UUID | None = Query(default=None, description=\"Filter by user ID\"), status:str | None = Query(default=None, description=\"Filter by status\"), boss_fight_only:bool = Query(default=False, description=\"Only show boss fights\"),)::","get_text_conversation_detail:1069:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","get_text_stats:1130:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session:::","get_pipeline_status:1202:async (conversation_id:UUID, admin_user_id::Annotated[AsyncSession, Depends(get_async_session)],)::","list_threads:1305:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::UUID | None = Query(default=None, description=\"Filter by user ID\"), active_only:bool = Query(default=False, description=\"Only show active threads\"), limit:int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0),)::","list_thoughts:1355:async (admin_user_id:Annotated[UUID, Depends(get_current_admin_user)], session::UUID | None = Query(default=None, description=\"Filter by user ID\"), limit:int = Query(default=50, ge=1, le=100), offset:int = Query(default=0, ge=0),)::"]],"nikita/api/routes/onboarding.py":["p",["get_db_session:77:async ()>AsyncSession::","get_user_repo:84:async (session:AsyncSession = Depends(get_db_session))>UserRepository::Get user repository.","get_onboarding_handler:93:()>OnboardingServerToolHandler::","get_onboarding_status:124:async (user_id:UUID, user_repo:::Get user's onboarding status.","initiate_onboarding:166:async (user_id:UUID, request::UserRepository = Depends(get_user_repo),)>InitiateOnboardingResponse::Initiate an onboarding voice call.","handle_server_tool:245:async (request:OnboardingToolRequest, handler:::Handle an onboarding server tool request.","handle_webhook:284:async (request:Request, elevenlabs_signature::UserRepository = Depends(get_user_repo),)>dict[str, Any]::Handle ElevenLabs webhook for onboarding calls.","handle_onboarding_pre_call:367:async (request:Request, user_repo:::","initiate_onboarding_call:469:async (user_id:UUID, user_repo:::Initiate an outbound onboarding call with Meta-Nikita persona override.","skip_onboarding:549:async (user_id:UUID, user_repo:::Skip onboarding for a user."],{"InitiateOnboardingRequest":["41",[]],"InitiateOnboardingResponse":["47",[]],"OnboardingStatusResponse":["59",[]],"ErrorResponse":["68",[]]}],"nikita/api/routes/portal.py":["p",["get_user_stats:49:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::","get_user_metrics:96:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get 4 hidden metrics with weights.","get_engagement_state:116:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get engagement state and recent transitions.","get_vice_preferences:159:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get discovered vice preferences.","get_score_history:180:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 30,)::Get score history for charts.","get_daily_summaries:209:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 30,)::Get daily summaries list.","get_conversations:235:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::int = 1, page_size:int = 20,)::Get paginated conversation list.","get_conversation_detail:268:async (conversation_id:UUID, user_id::Annotated[AsyncSession, Depends(get_async_session)],)::Get full conversation detail (read-only).","get_decay_status:303:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::Get decay warning and projection.","get_user_settings:397:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::","update_user_settings:424:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::UpdateSettingsRequest,)::","delete_account:465:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session::bool = False,)::","generate_link_code:504:async (user_id:Annotated[UUID, Depends(get_current_user_id)], session:::"]],"nikita/api/routes/tasks.py":["p",["_get_task_secret:27:()>str | None::","verify_task_secret:35:async (authorization:str | None = Header(None, alias=\"Authorization\"),)>None::","_generate_summary_with_llm:66:async (conversations_data:list[dict], new_threads::list[str], user_chapter:int,)>dict:_build_summary_prompt,_fallback_summary,_parse_summary_response:","_build_summary_prompt:104:(conversations_data:list[dict], new_threads::list[str], user_chapter:int,)>str::Build prompt for daily summary generation.","_parse_summary_response:139:(response_text:str)>dict::Parse structured LLM response into summary dict.","_fallback_summary:162:(conversations_data:list[dict])>dict::Basic summary when LLM is unavailable.","apply_daily_decay:178:async (_:None = Depends(verify_task_secret),)::","deliver_pending_messages:244:async (_:None = Depends(verify_task_secret),)::","generate_daily_summaries:399:async (summary_repo:SummaryRepoDep, _::_generate_summary_with_llm:","cleanup_expired_registrations:585:async (_:None = Depends(verify_task_secret),)::","process_stale_conversations:625:async (_:None = Depends(verify_task_secret),)::","deliver_scheduled_touchpoints:734:async (_:None = Depends(verify_task_secret),)::","detect_stuck_conversations:783:async (_:None = Depends(verify_task_secret),)::","process_touchpoints:855:async (_:None = Depends(verify_task_secret),)::","recover_stuck_conversations:914:async (_:None = Depends(verify_task_secret),)::"]],"nikita/api/routes/telegram.py":["p",["_get_bot_from_state:85:(request:Request)>TelegramBot::","get_telegram_auth:112:async (user_repo:UserRepoDep, pending_repo:::","get_command_handler:139:async (user_repo:UserRepoDep, telegram_auth::BotDep, profile_repo:ProfileRepoDep, onboarding_repo:OnboardingStateRepoDep,)>CommandHandler::","get_message_handler:174:async (user_repo:UserRepoDep, conversation_repo::ProfileRepoDep, backstory_repo:BackstoryRepoDep, bot:BotDep,)>MessageHandler::","get_registration_handler:217:async (telegram_auth:TelegramAuthDep, bot:::","get_venue_cache_repo:238:async (session=Depends(get_async_session),)>VenueCacheRepository::","get_venue_research_service:248:async (venue_cache_repo:VenueCacheRepository = Depends(get_venue_cache_repo),)>VenueResearchService::","get_backstory_generator:263:async ()>BackstoryGeneratorService::","get_persona_adaptation:275:async ()>PersonaAdaptationService::","get_onboarding_handler:297:async (bot:BotDep, onboarding_repo::ProfileRepoDep, user_repo:UserRepoDep, backstory_repo:BackstoryRepoDep, vice_repo:ViceRepoDep, venue_research:VenueResearchService = Depends(get_venue_research_service), backstory_gen:BackstoryGeneratorService = Depends(get_backstory_generator), persona_adapt:PersonaAdaptationService = Depends(get_persona_adaptation),)>OnboardingHandler::","get_otp_handler:343:async (telegram_auth:TelegramAuthDep, bot::PendingRegistrationRepoDep, onboarding_handler:OnboardingHandlerDep, profile_repo:ProfileRepoDep, user_repo:UserRepoDep,)>OTPVerificationHandler::","create_telegram_router:379:(bot:TelegramBot)>APIRouter::"],{"WebhookResponse":["60",[]],"SetWebhookRequest":["66",["validate_https:73:(cls, v:str)>str::Validate that URL uses HTTPS."]]}],"nikita/api/routes/voice.py":["p",["check_availability:99:async (user_id:UUID)>AvailabilityResponse::","get_signed_url:185:async (user_id:UUID)>dict::Generate ElevenLabs signed URL for frontend widget with full personalization.","initiate_call:277:async (request:InitiateCallRequest)>InitiateCallResponse::","_validate_signed_token:345:(token:str)>tuple[str, str]::","handle_server_tool:408:async (request:ServerToolAPIRequest)>ServerToolAPIResponse::","verify_elevenlabs_signature:484:(payload:str, signature_header::str)>bool::","_process_webhook_event:531:async (event_data:dict)>dict::","handle_webhook:825:async (request:Request, elevenlabs_signature::_process_webhook_event,verify_elevenlabs_signature:","handle_pre_call:953:async (request:PreCallRequest, elevenlabs_signature:::"],{"InitiateCallRequest":["34",[]],"InitiateCallResponse":["40",[]],"ErrorResponse":["60",[]],"AvailabilityResponse":["66",[]],"ServerToolAPIRequest":["326",[]],"ServerToolAPIResponse":["334",[]],"WebhookResponse":["470",[]],"PreCallRequest":["890",[]],"PreCallResponse":["903",[]]}],"nikita/api/schemas/admin.py":["p",{"AdminUserListItem":["10",[]],"AdminUserDetailResponse":["24",[]],"AdminSetScoreRequest":["40",[]],"AdminSetChapterRequest":["47",[]],"AdminSetGameStatusRequest":["54",[]],"AdminSetEngagementStateRequest":["63",[]],"AdminResetResponse":["72",[]],"GeneratedPromptResponse":["79",[]],"GeneratedPromptsResponse":["92",[]],"AdminHealthResponse":["101",[]],"AdminStatsResponse":["111",[]],"ProcessingStatsResponse":["121",[]],"ConversationListItem":["141",[]],"AdminConversationsResponse":["156",[]],"ConversationPromptItem":["166",[]],"ConversationPromptsResponse":["178",[]],"PipelineStageItem":["186",[]],"PipelineStatusResponse":["197",[]],"SystemOverviewResponse":["212",[]],"ErrorLogItem":["225",[]],"ErrorLogResponse":["238",[]],"BossEncounterItem":["248",[]],"BossEncountersResponse":["261",[]],"AuditLogItem":["269",[]],"AuditLogsResponse":["281",[]],"CircuitBreakerStatus":["295",[]],"StageStats":["305",[]],"StageFailure":["315",[]],"PipelineHealthResponse":["324",[]],"UnifiedPipelineStageHealth":["356",[]],"UnifiedPipelineHealthResponse":["368",[]]}],"nikita/api/schemas/admin_debug.py":["p",{"GameStatusDistribution":["21",[]],"ChapterDistribution":["30",[]],"EngagementDistribution":["40",[]],"ActiveUserCounts":["51",[]],"SystemOverviewResponse":["59",[]],"JobExecutionStatus":["74",[]],"JobStatusResponse":["86",[]],"UserListItem":["98",[]],"UserListResponse":["112",[]],"UserTimingInfo":["126",[]],"UserNextActions":["138",[]],"UserDetailResponse":["148",[]],"EngagementStateInfo":["179",[]],"ChapterStateInfo":["191",[]],"ViceInfo":["203",[]],"ViceProfileInfo":["212",[]],"StateMachinesResponse":["220",[]],"PromptListItem":["234",[]],"PromptListResponse":["248",[]],"PromptDetailResponse":["260",[]],"VoiceConversationListItem":["287",[]],"VoiceConversationListResponse":["303",[]],"TranscriptEntryResponse":["311",[]],"VoiceConversationDetailResponse":["319",[]],"ElevenLabsCallListItem":["340",[]],"ElevenLabsCallListResponse":["354",[]],"ElevenLabsTranscriptTurn":["362",[]],"ElevenLabsCallDetailResponse":["372",[]],"VoiceStatsResponse":["387",[]],"TextConversationListItem":["404",[]],"TextConversationListResponse":["421",[]],"MessageResponse":["429",[]],"TextConversationDetailResponse":["438",[]],"PipelineStageStatus":["460",[]],"PipelineStatusResponse":["469",[]],"TextStatsResponse":["483",[]],"ThreadListItem":["497",[]],"ThreadListResponse":["510",[]],"ThoughtListItem":["517",[]],"ThoughtListResponse":["527",[]]}],"nikita/api/schemas/conversation.py":["p",{"MessageRequest":["11",[]],"MessageResponse":["18",[]],"ConversationMessage":["27",[]],"ConversationResponse":["36",[]],"ConversationSummary":["52",[]]}],"nikita/api/schemas/game.py":["p",{"ScoreHistoryResponse":["11",[]],"DailySummaryResponse":["24",[]],"GameStateResponse":["40",[]],"BossEncounterResponse":["62",[]],"VicePreferenceResponse":["73",[]]}],"nikita/api/schemas/monitoring.py":["p",{"SystemMetrics":["21",[]],"MemorySnapshot":["43",[]],"PipelineStage":["65",[]],"PipelineStatus":["80",[]],"ErrorEntry":["98",[]],"ErrorSummary":["111",[]],"ScorePoint":["127",[]],"ScoreTimeline":["139",[]],"BossEncounter":["157",[]],"BossEncounters":["172",[]],"UserListItem":["190",[]],"UserDetail":["207",[]],"ConversationListItem":["243",[]],"ConversationDetail":["259",[]],"GeneratedPromptListItem":["281",[]],"GeneratedPromptDetail":["295",[]],"JobExecutionListItem":["320",[]],"JobExecutionDetail":["335",[]]}],"nikita/api/schemas/portal.py":["p",{"UserMetricsResponse":["9",[]],"UserStatsResponse":["26",[]],"EngagementTransition":["42",[]],"EngagementResponse":["51",[]],"VicePreferenceResponse":["63",[]],"DecayStatusResponse":["72",[]],"ScoreHistoryPoint":["83",[]],"ScoreHistoryResponse":["92",[]],"DailySummaryResponse":["99",[]],"ConversationMessage":["112",[]],"ConversationListItem":["120",[]],"ConversationDetailResponse":["132",[]],"ConversationsResponse":["147",[]],"UserSettingsResponse":["156",[]],"UpdateSettingsRequest":["164",[]],"LinkCodeResponse":["171",[]],"SuccessResponse":["179",[]]}],"nikita/api/schemas/user.py":["p",{"UserCreate":["10",[]],"UserResponse":["18",[]],"UserStatsResponse":["32",[]],"ScorePointResponse":["44",[]],"UserMetricsResponse":["51",[]]}],"nikita/behavioral/detector.py":["p",{"SituationDetector":["21",["detect:50:(self, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", user_id:str | None = None,)>SituationContext:_build_metadata,_detect_situation_type:","_detect_situation_type:119:(self, conflict_state:str, hours_since_last:float, local_hour:int,)>SituationType:_is_after_gap,_is_conflict_active,_is_evening,_is_morning:","_is_conflict_active:151:(self, conflict_state:str)>bool::","_is_after_gap:162:(self, hours_since_last:float)>bool::","_is_long_gap:173:(self, hours_since_last:float)>bool::","_is_morning:184:(self, local_hour:int)>bool::","_is_evening:196:(self, local_hour:int)>bool::","_build_metadata:213:(self, situation_type:SituationType, conflict_state:str, hours_since_last:float,)>dict:_is_long_gap:","map_conflict_to_situation:235:(self, conflict_state:str)>SituationType:_is_conflict_active:","calculate_time_since_last:252:(self, last_message_at:datetime | None, current_time:datetime | None = None,)>float::"]]}],"nikita/behavioral/engine.py":["p",{"MetaInstructionEngine":["23",["__init__:55:(self, max_instructions:int = 5, detector:SituationDetector | None = None, selector:InstructionSelector | None = None,)::","get_instructions_for_context:78:(self, user_id:str | UUID | None = None, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", last_message_at:datetime | None = None, max_instructions:int | None = None,)>str:format_for_prompt:","detect_situation:144:(self, conflict_state:str = \"none\", hours_since_last_message:float = 0.0, user_local_hour:int | None = None, chapter:int = 1, relationship_score:float = 50.0, engagement_state:str = \"in_zone\", user_id:str | None = None,)>SituationContext::","select_instructions:175:(self, context:SituationContext, max_instructions:int | None = None,)>InstructionSet::","format_for_prompt:190:(self, instruction_set:InstructionSet)>str:format_for_prompt:","get_situation_summary:204:(self, context:SituationContext)>dict[str, Any]::","get_all_situations:225:(self)>list[SituationType]::","clear_caches:233:(self)>None::"]]}],"nikita/behavioral/models.py":["p",{"SituationContext":["44",[]],"MetaInstruction":["100",["conditions_none_to_dict:134:(cls, v:Any)>dict[str, Any]::Convert None to empty dict for conditions field.","applies_to_context:147:(self, context:SituationContext)>bool::"]],"InstructionSet":["192",["by_category:205:(self)>dict[SituationCategory, list[MetaInstruction]]::","format_for_prompt:218:(self)>str:by_category:"]]}],"nikita/behavioral/selector.py":["p",{"InstructionSelector":["33",["__init__:45:(self, instructions_path:Path | None = None, max_instructions:int = 5,)::","instruction_library:57:(self)>dict[str, list[dict[str, Any]]]:_load_instructions:Lazy-load and cache instruction library.","_load_instructions:63:(self)>dict[str, list[dict[str, Any]]]::","select:85:(self, context:SituationContext, max_instructions:int | None = None,)>InstructionSet:_parse_instruction:","_parse_instruction:139:(self, raw:dict[str, Any], situation_type:SituationType,)>MetaInstruction::","get_instructions_for_situation:166:(self, situation_type:SituationType,)>list[MetaInstruction]:_parse_instruction:","evaluate_conditions:192:(self, instruction:MetaInstruction, context:SituationContext,)>bool::","clear_cache:206:(self)>None::Clear the instruction library cache (for testing/reloading)."]]}],"nikita/config/elevenlabs.py":["p",["get_elevenlabs_config:63:()>ElevenLabsConfig::","get_agent_id:83:(chapter:int = 1, mood::bool = False, is_onboarding:bool = False,)>str:get_agents_dict,get_elevenlabs_config:"],{"ElevenLabsConfig":["9",["get_agents_dict:45:(self)>dict[str, str]::Get all agent IDs as a dictionary."]]}],"nikita/config/experiments.py":["p",["deep_merge:35:(base:dict[str, Any], overlay::deep_merge:"],{"ConfigurationError":["29",[]],"ExperimentLoader":["67",["__init__:76:(self, base_path:Path | str | None = None)::","experiment_name:92:(self)>str | None::Get the current experiment name from env var.","load_experiment_config:96:(self)>dict[str, Any]:_load_experiment_with_inheritance:","_get_experiment_path:112:(self, name:str | None = None)>Path::","_load_experiment_with_inheritance:126:(self, name:str, visited:set[str])>dict[str, Any]:_get_experiment_path,_list_available_experiments,_load_experiment_with_inheritance,deep_merge:","_list_available_experiments:176:(self)>list[str]::"]]}],"nikita/config/loader.py":["p",["get_config:172:()>ConfigLoader::"],{"ConfigurationError":["26",[]],"ConfigLoader":["32",["__new__:44:(cls)>\"ConfigLoader\":__new__:Ensure only one instance exists (singleton pattern).","__init__:50:(self)>None:_load_all_configs:Load all YAML configs on first initialization.","_load_yaml:59:(self, filename:str)>dict[str, Any]::Load a YAML file from the config directory.","_load_all_configs:68:(self)>None:_load_yaml:Load and validate all configuration files.","get_chapter:102:(self, chapter_num:int)>ChapterDefinition::","get_boss_threshold:118:(self, chapter_num:int)>Decimal:get_chapter:","get_decay_rate:130:(self, chapter_num:int)>Decimal::","get_grace_period:143:(self, chapter_num:int)>timedelta::","get_daily_cap:157:(self, chapter_num:int)>Decimal::"]]}],"nikita/config/prompt_loader.py":["p",["get_prompt_loader:188:()>PromptLoader::"],{"MissingVariableError":["21",["__init__:24:(self, variable_name:str, template_path:str | None = None):__init__:"]],"PromptLoader":["33",["__init__:46:(self, base_path:Path | str | None = None)::","load:62:(self, path:str | Path)>str:_resolve_path:","render:91:(self, path:str | Path, **kwargs:Any)>str:_substitute_variables,load:","cache_clear:108:(self)>None::Clear all cached prompts.","_resolve_path:112:(self, path:str | Path)>Path::","_substitute_variables:138:(self, content:str, variables:dict[str, Any], template_path:str)>str:_get_nested_value,replace_match:","replace_match:153:(match:re.Match)>str:_get_nested_value:","_get_nested_value:165:(self, var_name:str, variables:dict[str, Any])>Any::"]]}],"nikita/config/schemas.py":["p",{"ScoreRange":["14",["validate_range:21:(self)>\"ScoreRange\"::"]],"GameSettings":["27",[]],"SessionSettings":["37",[]],"GameConfig":["44",[]],"DayRange":["56",["validate_range:63:(self)>\"DayRange\"::"]],"ChapterDefinition":["69",[]],"BossDefinition":["78",[]],"ChaptersConfig":["86",["validate_chapters:93:(self)>\"ChaptersConfig\"::"]],"MetricWeights":["128",["validate_weights_sum:137:(self)>\"MetricWeights\"::"]],"MetricStartingValues":["144",[]],"DeltaRange":["153",[]],"MetricsSettings":["160",[]],"QualityModifier":["168",[]],"EngagementMultipliers":["175",[]],"ScoringConfig":["186",[]],"DecaySchedule":["199",[]],"DecayConfig":["206",["validate_chapters:215:(self)>\"DecayConfig\"::"]],"EngagementStateDefinition":["233",[]],"CalibrationTolerance":["242",[]],"CalibrationSettings":["250",[]],"TransitionRules":["257",[]],"EngagementConfig":["266",["validate_states:275:(self)>\"EngagementConfig\"::"]],"ViceCategoryDefinition":["296",[]],"ViceIntensityLevel":["305",[]],"ViceDiscoverySettings":["312",[]],"VicesConfig":["320",["validate_categories:328:(self)>\"VicesConfig\"::"]],"AvailabilityWindow":["346",[]],"ChapterResponseTiming":["355",[]],"CronSchedules":["363",[]],"ScheduleConfig":["371",[]]}],"nikita/config/settings.py":["p",["get_settings:181:()>Settings::"],{"Settings":["11",["admin_emails:152:(self)>list[str]::Parse comma-separated admin emails into list.","is_unified_pipeline_enabled_for_user:158:(self, user_id:str | UUID)>bool::"]]}],"nikita/conflicts/breakup.py":["p",["get_breakup_manager:314:()>BreakupManager::"],{"ThresholdResult":["31",[]],"BreakupResult":["51",[]],"BreakupManager":["67",["__init__:122:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","check_threshold:136:(self, user_id:str, relationship_score:int,)>ThresholdResult::","trigger_breakup:193:(self, user_id:str, reason:str = \"threshold\", conflict_type:str | None = None,)>BreakupResult:_get_breakup_message:","get_warning_message:220:(self)>str::","_get_breakup_message:229:(self, conflict_type:str | None = None)>str::","get_relationship_status:252:(self, user_id:str, relationship_score:int,)>dict[str, Any]:check_threshold:","check_and_process:283:(self, user_id:str, relationship_score:int,)>tuple[ThresholdResult, BreakupResult | None]:check_threshold,trigger_breakup:"]]}],"nikita/conflicts/detector.py":["p",{"DetectionContext":["19",[]],"DetectionResult":["41",["has_triggers:55:(self)>bool::Check if any triggers were detected.","highest_severity:60:(self)>float::Get the highest severity among detected triggers."]],"TriggerDetector":["67",["__init__:105:(self, store:ConflictStore | None = None, llm_enabled:bool = True,):_get_detection_prompt:","_get_detection_prompt:124:(self)>str::Get the system prompt for LLM-based detection."]]}],"nikita/conflicts/escalation.py":["p",["get_escalation_manager:294:()>EscalationManager::"],{"EscalationResult":["22",[]],"EscalationManager":["39",["__init__:52:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","check_escalation:62:(self, conflict:ActiveConflict)>EscalationResult:_check_natural_resolution,_get_escalation_threshold,_get_next_level,_get_time_in_level:","escalate:111:(self, conflict:ActiveConflict)>EscalationResult:_get_next_level:","acknowledge:134:(self, conflict:ActiveConflict)>bool::","_check_natural_resolution:159:(self, conflict:ActiveConflict)>bool:_get_natural_resolution_probability,_get_time_in_level:","_get_natural_resolution_probability:190:(self, level:EscalationLevel)>float::","_get_time_in_level:206:(self, conflict:ActiveConflict)>timedelta::","_get_escalation_threshold:218:(self, level:EscalationLevel)>timedelta | None::","_get_next_level:239:(self, current:EscalationLevel)>EscalationLevel | None::","get_escalation_timeline:255:(self, conflict:ActiveConflict)>dict[str, Any]:_get_escalation_threshold,_get_natural_resolution_probability,_get_time_in_level:"]]}],"nikita/conflicts/generator.py":["p",["get_conflict_generator:341:()>ConflictGenerator::"],{"GenerationContext":["25",[]],"GenerationResult":["43",[]],"ConflictGenerator":["59",["__init__:96:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None,)::","generate:110:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>GenerationResult:_calculate_severity,_check_should_skip,_prioritize_triggers,_select_conflict_type:","_check_should_skip:170:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>str | None::","_prioritize_triggers:197:(self, triggers:list[ConflictTrigger],)>list[ConflictTrigger]::","_select_conflict_type:219:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>ConflictType::","_calculate_severity:259:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>float::","should_generate_conflict:312:(self, triggers:list[ConflictTrigger], context:GenerationContext,)>tuple[bool, str]:_check_should_skip,_prioritize_triggers:"]]}],"nikita/conflicts/models.py":["p",["get_conflict_config:220:()>ConflictConfig::","trigger_to_conflict_type:239:(trigger_type:TriggerType)>ConflictType::"],{"ConflictTrigger":["50",["validate_severity:71:(cls, v:float)>float::Clamp severity to valid range 0.0-1.0."]],"ActiveConflict":["76",["validate_severity:110:(cls, v:float)>float::Clamp severity to valid range 0.0-1.0."]],"ConflictConfig":["115",[]],"ConflictSummary":["189",["resolution_rate:209:(self)>float::Calculate resolution rate."]]}],"nikita/conflicts/resolution.py":["p",["get_resolution_manager:397:()>ResolutionManager::"],{"ResolutionContext":["35",[]],"ResolutionEvaluation":["51",[]],"ResolutionManager":["70",["__init__:105:(self, store:ConflictStore | None = None, config:ConflictConfig | None = None, llm_enabled:bool = True,):_get_evaluation_prompt:","_get_evaluation_prompt:126:(self)>str::Get the system prompt for LLM evaluation."]]}],"nikita/conflicts/store.py":["p",["get_conflict_store:406:()>ConflictStore::"],{"ConflictStore":["24",["__init__:31:(self)::Initialize conflict store with in-memory storage.","create_trigger:47:(self, user_id:str, trigger_type:TriggerType, severity:float, context:dict[str, Any] | None = None, user_messages:list[str] | None = None,)>ConflictTrigger::","get_trigger:77:(self, trigger_id:str)>ConflictTrigger | None::","get_user_triggers:92:(self, user_id:str, since:datetime | None = None,)>list[ConflictTrigger]::","delete_trigger:114:(self, trigger_id:str)>bool::","create_conflict:140:(self, user_id:str, conflict_type:ConflictType, severity:float, trigger_ids:list[str] | None = None,)>ActiveConflict::","get_conflict:170:(self, conflict_id:str)>ActiveConflict | None::","get_active_conflict:181:(self, user_id:str)>ActiveConflict | None::","get_user_conflicts:201:(self, user_id:str, resolved:bool | None = None,)>list[ActiveConflict]::","update_conflict:227:(self, conflict_id:str, **updates:Any,)>ActiveConflict | None::","escalate_conflict:253:(self, conflict_id:str, new_level:EscalationLevel,)>ActiveConflict | None:update_conflict:","resolve_conflict:273:(self, conflict_id:str, resolution_type:ResolutionType,)>ActiveConflict | None:update_conflict:","increment_resolution_attempts:292:(self, conflict_id:str,)>ActiveConflict | None:update_conflict:","reduce_severity:314:(self, conflict_id:str, reduction:float,)>ActiveConflict | None:update_conflict:","get_conflict_summary:333:(self, user_id:str)>ConflictSummary:get_active_conflict,get_user_conflicts:","count_consecutive_unresolved_crises:362:(self, user_id:str)>int:get_user_conflicts:","clear_user_data:385:(self, user_id:str)>None::"]]}],"nikita/context/logging.py":["p",["configure_pipeline_logging:17:(json_format:bool = True)>None::","get_pipeline_logger:48:(conversation_id:UUID, stage:::","log_stage_start:72:(logger:structlog.BoundLogger, stage_name::bool = False,)>None::","log_stage_complete:93:(logger:structlog.BoundLogger, stage_name::float, success:bool = True, error:str | None = None,)>None::"]],"nikita/context/package.py":["p",{"EmotionalState":["17",["to_description:49:(self)>str::Generate natural language description of emotional state."]],"ActiveThread":["86",[]],"ContextPackage":["95",["limit_user_facts:173:(cls, v:list[str])>list[str]::Ensure user_facts doesn't exceed 20 items.","limit_relationship_events:179:(cls, v:list[str])>list[str]::Ensure relationship_events doesn't exceed 10 items.","limit_week_summaries:185:(cls, v:list[str])>list[str]::Ensure week_summaries doesn't exceed 7 items.","limit_life_events:191:(cls, v:list[str])>list[str]::Ensure life_events_today doesn't exceed 3 items (AC-T015.3).","is_expired:195:(self)>bool::Check if the package has expired.","get_token_estimate:199:(self)>int::"]],"ComposedPrompt":["217",[]],"ProcessingResult":["240",["add_step:251:(self, step_name:str)>None::Mark a step as completed.","add_error:255:(self, error:str)>None::Record an error."]]}],"nikita/context/pipeline_context.py":["p",{"PipelineContext":["14",["record_stage_error:44:(self, stage_name:str, error:str)>None::","has_stage_errors:53:(self)>bool::Check if any stage errors were recorded.","duration_ms:58:(self)>float::Calculate duration since pipeline started.","update_from_result:68:(self, stage_name:str, result:Any, success:bool = True, error:str | None = None,)>None:record_stage_error:"]]}],"nikita/context/session_detector.py":["p",["detect_stale_sessions:132:async (session:AsyncSession, timeout_minutes::int = 50,)>list[UUID]:detect_and_queue:"],{"SessionDetector":["24",["__init__:38:(self, session:AsyncSession, timeout_minutes:int = TEXT_SESSION_TIMEOUT_MINUTES,)>None::","get_stale_sessions:52:async (self, limit:int = 50,)>list[UUID]::","mark_for_processing:84:async (self, conversation_id:UUID,)>bool::","detect_and_queue:104:async (self, limit:int = 50,)>list[UUID]:get_stale_sessions,mark_for_processing:"]]}],"nikita/context/store.py":["p",["get_package_store:189:(session:AsyncSession | None = None)>PackageStore::","set_default_package_store:217:(store:PackageStore)>None::"],{"PackageStore":["23",["__init__:30:(self, session:AsyncSession)>None::","get:38:async (self, user_id:UUID)>ContextPackage | None::","set:81:async (self, user_id:UUID, package:ContextPackage, ttl_hours:int = 24,)>None::","delete:123:async (self, user_id:UUID)>bool:delete:","cleanup_expired:145:async (self)>int:delete:","exists:164:async (self, user_id:UUID)>bool:get:"]]}],"nikita/context/utils/token_counter.py":["p",["_get_encoder:30:()>tiktoken.Encoding:encoder:","get_token_estimator:133:()>TokenEstimator::","estimate_tokens_fast:145:(text:str | None)>int::","estimate_tokens_accurate:159:(text:str | None)>int::","count_tokens:173:(text:str)>int::"],{"TokenEstimator":["39",["__init__:61:(self)::Initialize TokenEstimator with lazy encoder loading.","encoder:66:(self)>tiktoken.Encoding:_get_encoder,encoder:Get encoder (lazy initialization).","estimate_fast:72:(self, text:str | None)>int:count:","estimate_accurate:91:(self, text:str | None)>int:count,estimate_fast:","estimate:114:(self, text:str | None, accurate:bool = False)>int:estimate_accurate,estimate_fast:"]],"TokenCounter":["197",["__init__:203:(self, budget:int = 4000):_get_encoder:","count:212:(self, text:str)>int:count_tokens:","count_multiple:223:(self, texts:list[str])>int:count_tokens:","fits_budget:234:(self, text:str, margin:int = 0)>bool:count_tokens:","remaining:246:(self, used:int)>int::","truncate_to_budget:257:(self, text:str, margin:int = 100)>str:count_tokens:"]]}],"nikita/context/validation.py":["p",["get_token_validator:242:()>TokenValidator::","count_tokens:254:(text:str)>int::","validate_prompt:266:(prompt:str)>ValidationResult::"],{"ValidationResult":["43",[]],"TokenValidator":["63",["__init__:79:(self, max_tokens:int = DEFAULT_MAX_TOKENS, layer_budgets:dict[str, int] | None = None,)>None::","count_tokens:96:(self, text:str)>int::","validate:114:(self, prompt:str)>ValidationResult:count_tokens:","validate_breakdown:133:(self, layer_breakdown:dict[str, int])>ValidationResult::","truncate:157:(self, text:str, max_tokens:int, add_marker:bool = False,)>str:count_tokens:","truncate_layers:199:(self, layers:dict[str, str], max_total:int | None = None,)>dict[str, str]:count_tokens,truncate:","get_layer_budgets:229:(self)>dict[str, int]::"]]}],"nikita/db/database.py":["p",["get_async_engine:21:()::","get_session_maker:53:()>async_sessionmaker[AsyncSession]:get_async_engine:","get_async_session:67:async ()>AsyncGenerator[AsyncSession, None]:get_session_maker:","_get_supabase_sync_client:84:()::","get_supabase_client:90:async ()>AsyncClient:_get_supabase_sync_client:","get_pool_status:96:()>dict:get_async_engine:"]],"nikita/db/dependencies.py":["p",["get_user_repo:37:async (session:AsyncSessionDep,)>AsyncGenerator[UserRepository, None]::","get_metrics_repo:51:async (session:AsyncSessionDep,)>AsyncGenerator[UserMetricsRepository, None]::","get_conversation_repo:65:async (session:AsyncSessionDep,)>AsyncGenerator[ConversationRepository, None]::","get_score_history_repo:79:async (session:AsyncSessionDep,)>AsyncGenerator[ScoreHistoryRepository, None]::","get_vice_repo:93:async (session:AsyncSessionDep,)>AsyncGenerator[VicePreferenceRepository, None]::","get_summary_repo:107:async (session:AsyncSessionDep,)>AsyncGenerator[DailySummaryRepository, None]::","get_pending_registration_repo:121:async (session:AsyncSessionDep,)>AsyncGenerator[PendingRegistrationRepository, None]::","get_onboarding_state_repo:147:async (session:AsyncSessionDep,)>AsyncGenerator[OnboardingStateRepository, None]::","get_profile_repo:161:async (session:AsyncSessionDep,)>AsyncGenerator[ProfileRepository, None]::","get_backstory_repo:181:async (session:AsyncSessionDep,)>AsyncGenerator[BackstoryRepository, None]::"]],"nikita/db/migrations/env.py":["p",["get_url:36:()>str::","run_migrations_offline:42:()>None:get_url:","do_run_migrations:65:(connection:Connection)>None::Run migrations with given connection.","run_async_migrations:73:async ()>None:get_url:","run_migrations_online:98:()>None:run_async_migrations:"]],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["p",["upgrade:28:()>None::","downgrade:300:()>None::: Reversible)."]],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["p",["upgrade:25:()>None::","downgrade:125:()>None::"]],"nikita/db/migrations/versions/20251128_0003_fix_message_embeddings.py":["p",["upgrade:30:()>None::","downgrade:92:()>None::"]],"nikita/db/migrations/versions/20251128_0004_rls_performance.py":["p",["upgrade:27:()>None::","downgrade:100:()>None::"]],"nikita/db/migrations/versions/20251128_0005_consolidate_policies.py":["p",["upgrade:28:()>None::","downgrade:84:()>None::"]],"nikita/db/migrations/versions/20251128_0006_extensions_pending_reg.py":["p",["upgrade:30:()>None::","downgrade:128:()>None::"]],"nikita/db/migrations/versions/20251205_0007_rate_limits_table.py":["p",["upgrade:30:()>None::","downgrade:85:()>None::"]],"nikita/db/migrations/versions/20260202_0008_schema_sync.py":["p",["column_exists:54:(table_name:str, column_name:::Check if a column exists in a table.","table_exists:72:(table_name:str)>bool::Check if a table exists.","upgrade:89:()>None:column_exists,table_exists:","downgrade:955:()>None:column_exists,table_exists:"]],"nikita/db/migrations/versions/20260206_0009_unified_pipeline_tables.py":["p",["upgrade:23:()>None::","downgrade:145:()>None::"]],"nikita/db/models/base.py":["p",["utc_now:45:()>datetime::"],{"Base":["11",[]],"TimestampMixin":["19",[]],"UUIDMixin":["35",[]]}],"nikita/db/models/context.py":["p",{"ConversationThread":["67",[]],"NikitaThought":["129",["is_active:198:(self)>bool::Check if thought is still active (not used, not expired)."]]}],"nikita/db/models/context_package.py":["p",{"ContextPackageModel":["16",[]]}],"nikita/db/models/conversation.py":["p",{"Conversation":["31",["add_message:139:(self, role:str, content:str, analysis:dict[str, Any] | None = None,)>None::Add a message to the conversation.","message_count:154:(self)>int::Get total number of messages."]],"MessageEmbedding":["159",[]]}],"nikita/db/models/engagement.py":["p",{"EngagementState":["29",[]],"EngagementHistory":["102",[]]}],"nikita/db/models/game.py":["p",{"ScoreHistory":["19",[]],"DailySummary":["69",["score_change:124:(self)>Decimal | None::Calculate net score change for the day."]]}],"nikita/db/models/generated_prompt.py":["p",{"GeneratedPrompt":["19",[]]}],"nikita/db/models/job_execution.py":["p",{"JobExecution":["37",[]]}],"nikita/db/models/memory_fact.py":["p",{"MemoryFact":["19",[]]}],"nikita/db/models/pending_registration.py":["p",{"PendingRegistration":["22",["is_expired:92:(self)>bool::"]]}],"nikita/db/models/profile.py":["p",{"UserProfile":["55",[]],"UserBackstory":["120",[]],"VenueCache":["188",["is_expired:240:(self)>bool::"]],"OnboardingState":["256",["get_current_step:308:(self)>OnboardingStep::Get current step as enum.","set_step:312:(self, step:OnboardingStep)>None::Set current step from enum.","is_complete:316:(self)>bool::Check if onboarding is complete."]]}],"nikita/db/models/rate_limit.py":["p",{"RateLimit":["13",[]]}],"nikita/db/models/ready_prompt.py":["p",{"ReadyPrompt":["23",[]]}],"nikita/db/models/scheduled_event.py":["p",{"ScheduledEvent":["51",["is_pending:176:(self)>bool::Check if event is still pending delivery.","is_due:181:(self)>bool::Check if event is due for delivery.","can_retry:186:(self)>bool::Check if event can be retried (max 3 attempts)."]]}],"nikita/db/models/scheduled_touchpoint.py":["p",{"ScheduledTouchpoint":["23",["is_pending:137:(self)>bool::Check if touchpoint is still pending delivery.","is_due:142:(self)>bool::Check if touchpoint is due for delivery."]]}],"nikita/db/models/user.py":["p",{"User":["40",[]],"UserMetrics":["228",["calculate_composite_score:271:(self)>Decimal::"]],"UserVicePreference":["285",[]]}],"nikita/db/repositories/base.py":["p",{"BaseRepository":["18",["__init__:37:(self, session:AsyncSession, model_class:type[ModelT])>None::","get_by_telegram_id:32:async (self, telegram_id:int)>User | None::","session:48:(self)>AsyncSession:session:","get:58:async (self, id:UUID)>ModelT | None:get:","create:69:async (self, entity:ModelT)>ModelT::","update:83:async (self, entity:ModelT)>ModelT:create,get,session:","delete:99:async (self, entity:ModelT)>None:delete:","delete_by_id:108:async (self, id:UUID)>bool:delete,get:"]]}],"nikita/db/repositories/conversation_repository.py":["p",{"ConversationRepository":["21",["__init__:28:(self, session:AsyncSession)>None:__init__:Initialize ConversationRepository.","create_conversation:39:async (self, user_id:UUID, platform:str, started_at:datetime | None = None, is_boss_fight:bool = False, chapter_at_time:int | None = None,)>Conversation::","create_voice_conversation:69:async (self, user_id:UUID, session_id:str, transcript_raw:str = \"\", messages:list[dict[str, Any]] | None = None, chapter_at_time:int | None = None,)>Conversation::","append_message:117:async (self, conversation_id:UUID, role:str, content:str, analysis:dict[str, Any] | None = None,)>Conversation::","get_recent:190:async (self, user_id:UUID, limit:int = 10,)>list[Conversation]::","search:213:async (self, user_id:UUID, query:str,)>list[Conversation]:search:","close_conversation:245:async (self, conversation_id:UUID, score_delta:Decimal | None = None,)>Conversation::","get_stale_active_conversations:278:async (self, timeout_minutes:int = 15, max_attempts:int = 3, limit:int = 50,)>list[Conversation]::","mark_processing:307:async (self, conversation_id:UUID,)>Conversation::","detect_stuck:336:async (self, timeout_minutes:int = 30, limit:int = 50,)>list[UUID]::","mark_processed:366:async (self, conversation_id:UUID, summary:str | None = None, emotional_tone:str | None = None, extracted_entities:dict[str, Any] | None = None,)>Conversation::","mark_failed:403:async (self, conversation_id:UUID,)>Conversation::","update_last_message_at:429:async (self, conversation_id:UUID,)>Conversation::","update_score_delta:458:async (self, conversation_id:UUID, score_delta:Decimal,)>Conversation::","get_active_conversation:491:async (self, user_id:UUID,)>Conversation | None::","get_processed_conversations:516:async (self, user_id:UUID, days:int = 7, limit:int = 50,)>list[Conversation]::","get_last_conversation_summary:545:async (self, user_id:UUID, current_conversation_id:UUID | None = None,)>str | None::","recover_stuck:588:async (self, timeout_minutes:int = 30, max_attempts:int = 3, limit:int = 50,)>list[UUID]:detect_stuck:","force_status_update:643:async (self, conversation_id:UUID, status:str,)>bool::"]]}],"nikita/db/repositories/engagement_repository.py":["p",{"EngagementStateRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize EngagementStateRepository.","get_by_user_id:26:async (self, user_id:UUID)>EngagementState | None::","get_recent_transitions:41:async (self, user_id:UUID, limit:int = 10)>list[EngagementHistory]::"]]}],"nikita/db/repositories/generated_prompt_repository.py":["p",{"GeneratedPromptRepository":["14",["__init__:20:(self, session:AsyncSession)>None:__init__:Initialize GeneratedPromptRepository.","create_log:34:async (self, user_id:UUID, prompt_content:str, token_count:int, generation_time_ms:float, meta_prompt_template:str, conversation_id:UUID | None = None, context_snapshot:dict[str, Any] | None = None, platform:str = \"text\",)>GeneratedPrompt::","get_by_user_id:69:async (self, user_id:UUID, limit:int = 50)>list[GeneratedPrompt]::","get_by_template:90:async (self, template:str, limit:int = 50)>list[GeneratedPrompt]::","get_recent_by_user_id:111:async (self, user_id:UUID, limit:int = 10)>list[GeneratedPrompt]::","get_latest_by_user_id:134:async (self, user_id:UUID)>GeneratedPrompt | None::"]]}],"nikita/db/repositories/job_execution_repository.py":["p",{"JobExecutionRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize JobExecutionRepository.","get_latest_by_job_name:26:async (self, job_name:str)>JobExecution | None::","get_recent_executions:49:async (self, job_name:str | None = None, status:str | None = None, limit:int = 20,)>list[JobExecution]::","start_execution:71:async (self, job_name:str)>JobExecution::","complete_execution:94:async (self, execution_id:UUID, result:dict | None = None,)>JobExecution::","fail_execution:127:async (self, execution_id:UUID, result:dict | None = None,)>JobExecution::"]]}],"nikita/db/repositories/memory_fact_repository.py":["p",{"MemoryFactRepository":["13",["__init__:20:(self, session:AsyncSession)>None:__init__:","add_fact:33:async (self, user_id:UUID, fact:str, graph_type:str, embedding:list[float], source:str, confidence:float, metadata:dict[str, Any] | None = None, conversation_id:UUID | None = None,)>MemoryFact::","semantic_search:72:async (self, user_id:UUID, query_embedding:list[float], graph_type:str | None = None, limit:int = 10, min_confidence:float = 0.0,)>list[tuple[MemoryFact, float]]::","get_recent:109:async (self, user_id:UUID, graph_type:str | None = None, limit:int = 20,)>list[MemoryFact]::","deactivate:140:async (self, fact_id:UUID, superseded_by_id:UUID | None = None,)>bool::","get_by_user:165:async (self, user_id:UUID, graph_type:str | None = None, active_only:bool = True,)>list[MemoryFact]::"]]}],"nikita/db/repositories/metrics_repository.py":["p",{"UserMetricsRepository":["16",["__init__:22:(self, session:AsyncSession)>None:__init__:Initialize UserMetricsRepository.","get_by_user_id:26:async (self, user_id:UUID)>UserMetrics | None::","update_metrics:46:async (self, user_id:UUID, intimacy_delta:Decimal = Decimal(\"0\"), passion_delta:Decimal = Decimal(\"0\"), trust_delta:Decimal = Decimal(\"0\"), secureness_delta:Decimal = Decimal(\"0\"),)>UserMetrics:_clamp,get_by_user_id:","calculate_composite:77:async (self, user_id:UUID)>Decimal:get_by_user_id:","_clamp:96:(value:Decimal)>Decimal::Clamp value between 0 and 100."]]}],"nikita/db/repositories/pending_registration_repository.py":["p",{"PendingRegistrationRepository":["17",["__init__:29:(self, session:AsyncSession)>None::","session:38:(self)>AsyncSession::Access the database session.","store:49:async (self, telegram_id:int, email:str, chat_id:int | None = None, otp_state:str = \"pending\", expires_at:datetime | None = None,)>PendingRegistration::","get:95:async (self, telegram_id:int)>PendingRegistration | None::","get_email:113:async (self, telegram_id:int)>str | None:get:","get_by_email:127:async (self, email:str)>PendingRegistration | None::","get_by_email_any:146:async (self, email:str)>PendingRegistration | None::","delete:166:async (self, telegram_id:int)>bool:delete:","increment_attempts:181:async (self, telegram_id:int)>int::","cleanup_expired:212:async (self)>int:delete:"]]}],"nikita/db/repositories/profile_repository.py":["p",{"ProfileRepository":["31",["__init__:41:(self, session:AsyncSession)>None:__init__:","get_by_user_id:49:async (self, user_id:UUID)>UserProfile | None:get:","create_profile:70:async (self, user_id:UUID, location_city:str | None = None, location_country:str | None = None, life_stage:str | None = None, social_scene:str | None = None, primary_interest:str | None = None, drug_tolerance:int = 3,)>UserProfile:create:","update_from_onboarding:100:async (self, user_id:UUID, collected_answers:dict[str, Any],)>UserProfile:create_profile,get,get_by_user_id:"]],"BackstoryRepository":["142",["__init__:152:(self, session:AsyncSession)>None:__init__:","get_by_user_id:160:async (self, user_id:UUID)>UserBackstory | None::","create:183:async (self, user_id:UUID, venue_name:str | None = None, venue_city:str | None = None, scenario_type:str | None = None, how_we_met:str | None = None, the_moment:str | None = None, unresolved_hook:str | None = None, nikita_persona_overrides:dict[str, Any] | None = None,)>UserBackstory::","create_from_scenario:218:async (self, user_id:UUID, scenario:dict[str, Any],)>UserBackstory:create,get:"]],"OnboardingStateRepository":["242",["__init__:256:(self, session:AsyncSession)>None::","session:265:(self)>AsyncSession::Access the database session.","get:269:async (self, telegram_id:int)>OnboardingState | None::","get_or_create:284:async (self, telegram_id:int)>OnboardingState:get:","update_step:323:async (self, telegram_id:int, step:OnboardingStep, collected_answers:dict[str, Any] | None = None,)>OnboardingState:get:","add_answer:356:async (self, telegram_id:int, key:str, value:Any,)>OnboardingState:get:","delete:381:async (self, telegram_id:int)>bool:delete:"]],"VenueCacheRepository":["397",["__init__:411:(self, session:AsyncSession)>None::","session:420:(self)>AsyncSession::Access the database session.","get_or_none:428:async (self, city:str, scene:str,)>VenueCache | None::","store:452:async (self, city:str, scene:str, venues:list[dict[str, Any]], ttl_days:int | None = None,)>VenueCache::","cleanup_expired:488:async (self)>int:delete:"]]}],"nikita/db/repositories/ready_prompt_repository.py":["p",{"ReadyPromptRepository":["13",["__init__:20:(self, session:AsyncSession)>None:__init__:","get_current:27:async (self, user_id:UUID, platform:str,)>ReadyPrompt | None::","set_current:58:async (self, user_id:UUID, platform:str, prompt_text:str, token_count:int, pipeline_version:str, generation_time_ms:float, context_snapshot:dict[str, Any] | None = None, conversation_id:UUID | None = None,)>ReadyPrompt::","get_history:112:async (self, user_id:UUID, platform:str | None = None, limit:int = 10,)>list[ReadyPrompt]::"]]}],"nikita/db/repositories/scheduled_event_repository.py":["p",{"ScheduledEventRepository":["26",["__init__:40:(self, session:AsyncSession)>None::","session:49:(self)>AsyncSession::Access the database session.","create_event:61:async (self, user_id:UUID, platform:EventPlatform | str, event_type:EventType | str, content:dict[str, Any], scheduled_at:datetime, source_conversation_id:UUID | None = None,)>ScheduledEvent::","get_due_events:106:async (self, limit:int = 50, platform:EventPlatform | str | None = None,)>list[ScheduledEvent]::","mark_delivered:136:async (self, event_id:UUID)>bool::","mark_failed:161:async (self, event_id:UUID, error_message:str | None = None, increment_retry:bool = True,)>bool::","cancel_event:212:async (self, event_id:UUID)>bool::","get_user_pending_events:236:async (self, user_id:UUID, platform:EventPlatform | str | None = None,)>list[ScheduledEvent]::","cancel_user_pending_events:266:async (self, user_id:UUID, platform:EventPlatform | str | None = None,)>int::","cleanup_stale_events:295:async (self, max_age_hours:int = 48)>int::"]]}],"nikita/db/repositories/score_history_repository.py":["p",{"ScoreHistoryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize ScoreHistoryRepository.","log_event:35:async (self, user_id:UUID, score:Decimal, chapter:int, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>ScoreHistory::","get_history:63:async (self, user_id:UUID, limit:int = 50,)>list[ScoreHistory]::","get_daily_stats:86:async (self, user_id:UUID, target_date:date,)>dict[str, Any]::","get_events_by_type:140:async (self, user_id:UUID, event_type:str, limit:int = 50,)>list[ScoreHistory]::","get_history_since:166:async (self, user_id:UUID, since:datetime, limit:int = 1000,)>list[ScoreHistory]::"]]}],"nikita/db/repositories/summary_repository.py":["p",{"DailySummaryRepository":["18",["__init__:24:(self, session:AsyncSession)>None:__init__:Initialize DailySummaryRepository.","create_summary:43:async (self, user_id:UUID, summary_date:date, score_start:Decimal | None = None, score_end:Decimal | None = None, decay_applied:Decimal | None = None, conversations_count:int = 0, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None, # Context engineering fields (spec 012) summary_text:str | None = None, key_moments:list[dict[str, Any]] | None = None, emotional_tone:str | None = None, engagement_score:Decimal | None = None,)>DailySummary::","get_by_date:85:async (self, user_id:UUID, summary_date:date,)>DailySummary | None::","get_range:108:async (self, user_id:UUID, start_date:date, end_date:date,)>list[DailySummary]::","update_summary:140:async (self, summary_id:UUID, score_end:Decimal | None = None, nikita_summary_text:str | None = None, key_events:list[dict[str, Any]] | None = None, # Context engineering fields (spec 012) summary_text:str | None = None, key_moments:list[dict[str, Any]] | None = None, emotional_tone:str | None = None, engagement_score:Decimal | None = None,)>DailySummary::","get_for_date:189:async (self, user_id:UUID, summary_date:date,)>DailySummary | None:get_by_date:","get_recent:205:async (self, user_id:UUID, limit:int = 7,)>list[DailySummary]::"]]}],"nikita/db/repositories/thought_repository.py":["p",{"NikitaThoughtRepository":["21",["__init__:28:(self, session:AsyncSession)>None:__init__:Initialize NikitaThoughtRepository.","create_thought:39:async (self, user_id:UUID, thought_type:str, content:str, source_conversation_id:UUID | None = None, expires_at:datetime | None = None,)>NikitaThought::","get_active_thoughts:73:async (self, user_id:UUID, thought_type:str | None = None, limit:int = 10,)>list[NikitaThought]::","get_thoughts_for_prompt:109:async (self, user_id:UUID, max_per_type:int = 3,)>dict[str, list[NikitaThought]]:get_active_thoughts:","mark_thought_used:135:async (self, thought_id:UUID,)>NikitaThought::","create_missing_him_thought:163:async (self, user_id:UUID, hours_since_last_message:float, source_conversation_id:UUID | None = None,)>NikitaThought | None:create_thought:","bulk_create_thoughts:206:async (self, user_id:UUID, thoughts_data:list[dict], source_conversation_id:UUID | None = None,)>list[NikitaThought]:create_thought:","expire_missing_him_thoughts:235:async (self, user_id:UUID,)>int:get_active_thoughts:","cleanup_expired_thoughts:262:async (self, user_id:UUID,)>int::"]]}],"nikita/db/repositories/thread_repository.py":["p",{"ConversationThreadRepository":["20",["__init__:27:(self, session:AsyncSession)>None:__init__:Initialize ConversationThreadRepository.","create_thread:37:async (self, user_id:UUID, thread_type:str, content:str, source_conversation_id:UUID | None = None,)>ConversationThread::","get_open_threads:70:async (self, user_id:UUID, thread_type:str | None = None, limit:int = 20,)>list[ConversationThread]::","get_threads_for_prompt:99:async (self, user_id:UUID, max_per_type:int = 5,)>dict[str, list[ConversationThread]]:get_open_threads:","resolve_thread:125:async (self, thread_id:UUID,)>ConversationThread::","expire_thread:152:async (self, thread_id:UUID,)>ConversationThread::","bulk_create_threads:181:async (self, user_id:UUID, threads_data:list[dict], source_conversation_id:UUID | None = None,)>list[ConversationThread]:create_thread:","bulk_resolve_threads:208:async (self, thread_ids:list[UUID],)>int:resolve_thread:"]]}],"nikita/db/repositories/user_repository.py":["p",{"UserRepository":["22",["__init__:31:(self, session:AsyncSession)>None:__init__:","get:39:async (self, user_id:UUID)>User | None::","get_by_telegram_id:60:async (self, telegram_id:int)>User | None::","get_by_phone_number:77:async (self, phone_number:str)>User | None::","create_with_metrics:108:async (self, user_id:UUID, telegram_id:int | None = None, phone:str | None = None,)>User::","update_score:172:async (self, user_id:UUID, delta:Decimal, event_type:str | None = None, event_details:dict[str, Any] | None = None,)>User:get:","apply_decay:217:async (self, user_id:UUID, decay_amount:Decimal,)>User:update_score:","advance_chapter:234:async (self, user_id:UUID)>User:get:","update_last_interaction:283:async (self, user_id:UUID, timestamp:datetime | None = None,)>User:get:","get_active_users_for_decay:311:async (self)>list[User]::","update_game_status:332:async (self, user_id:UUID, status:str,)>User:get:","set_boss_fight_status:356:async (self, user_id:UUID)>User:get:","update_onboarding_status:405:async (self, user_id:UUID, status:str, call_id:str | None = None,)>User:get:","update_onboarding_profile:443:async (self, user_id:UUID, profile_updates:dict[str, Any],)>User:get:","complete_onboarding:477:async (self, user_id:UUID, call_id:str, profile:dict[str, Any],)>User:get:","get_users_pending_onboarding:521:async (self)>list[User]::","is_onboarded:535:async (self, user_id:UUID)>bool:get:","increment_boss_attempts:549:async (self, user_id:UUID)>User:get:","invalidate_voice_cache:593:async (self, user_id:UUID)>None:get:","update_settings:621:async (self, user_id:UUID, timezone:str | None = None, notifications_enabled:bool | None = None,)>User:get:","delete_user_cascade:649:async (self, user_id:UUID)>bool:get:"]]}],"nikita/db/repositories/vice_repository.py":["p",{"VicePreferenceRepository":["17",["__init__:23:(self, session:AsyncSession)>None:__init__:Initialize VicePreferenceRepository.","get_active:27:async (self, user_id:UUID)>list[UserVicePreference]::","get_by_category:48:async (self, user_id:UUID, category:str,)>UserVicePreference | None::","update_intensity:70:async (self, preference_id:UUID, delta:int,)>UserVicePreference::","discover:101:async (self, user_id:UUID, category:str, initial_intensity:int = 1,)>UserVicePreference:get_by_category:","update_engagement:131:async (self, preference_id:UUID, delta:Decimal,)>UserVicePreference::"]]}],"nikita/db/transactions.py":["p",["is_deadlock_error:40:(error:Exception)>bool::","atomic:67:(isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, max_retries::float = DEFAULT_BASE_DELAY,)>Callable[[Callable[P, T]], Callable[P, T]]:atomic,decorator,is_deadlock_error,transfer_funds,wrapper:","run_in_transaction:162:async (session:AsyncSession, func::Any, isolation_level:IsolationLevel = DEFAULT_ISOLATION_LEVEL, **kwargs:Any,)>Any:_wrapped,atomic:"]],"nikita/emotional_state/computer.py":["p",["get_state_computer:408:()>StateComputer::"],{"LifeEventImpact":["64",[]],"StateComputer":["73",["__init__:153:(self)>None::Initialize StateComputer.","compute:166:(self, user_id:UUID, current_state:EmotionalStateModel | None = None, timestamp:datetime | None = None, life_events:list[LifeEventImpact] | None = None, conversation_tones:list[ConversationTone] | None = None, chapter:int = 1, relationship_score:float = 0.5,)>EmotionalStateModel:_apply_conversation_deltas,_apply_life_event_deltas,_apply_relationship_modifier,_compute_base_state:","_compute_base_state:232:(self, timestamp:datetime)>dict[str, float]:_clamp,_compute_base_state:","_apply_life_event_deltas:291:(self, events:list[LifeEventImpact])>dict[str, float]:_apply_life_event_deltas:","_apply_conversation_deltas:325:(self, tones:list[ConversationTone])>dict[str, float]::","_apply_relationship_modifier:359:(self, chapter:int, relationship_score:float)>dict[str, float]:_apply_relationship_modifier:","_clamp:399:(value:float, min_val:float = 0.0, max_val:float = 1.0)>float::Clamp value to range."]]}],"nikita/emotional_state/conflict.py":["p",["get_conflict_detector:362:()>ConflictDetector::"],{"ConflictDetector":["22",["__init__:102:(self)>None::Initialize ConflictDetector.","detect_conflict_state:110:(self, state:EmotionalStateModel, previous_state:EmotionalStateModel | None = None,)>ConflictState:_can_transition,_get_severity,detect_conflict_state:","can_transition_to:168:(self, current_state:ConflictState, target_state:ConflictState,)>bool:_can_transition:","_can_transition:187:(self, current:ConflictState, target:ConflictState,)>bool::Internal transition validation.","_get_severity:195:(self, state:ConflictState)>int::Get severity level for a conflict state.","apply_transition:207:(self, state:EmotionalStateModel, target:ConflictState, trigger:str | None = None,)>EmotionalStateModel:_can_transition:","check_escalation:233:(self, state:EmotionalStateModel, previous_state:EmotionalStateModel | None = None,)>tuple[bool, ConflictState | None, str | None]:_can_transition,_find_intermediate_state,_get_trigger_reason,detect_conflict_state:","check_de_escalation:270:(self, state:EmotionalStateModel, positive_interaction:bool = False,)>tuple[bool, ConflictState | None, str | None]::","_find_intermediate_state:321:(self, current:ConflictState, target:ConflictState,)>ConflictState | None:_get_severity:Find intermediate state for invalid direct transition.","_get_trigger_reason:345:(self, state:EmotionalStateModel, target:ConflictState,)>str::Get human-readable trigger reason for transition."]]}],"nikita/emotional_state/models.py":["p",{"EmotionalStateModel":["34",["validate_conflict_state:119:(cls, v:str | ConflictState)>ConflictState::Validate and convert conflict_state to enum.","validate_conflict_timestamps:131:(self)>\"EmotionalStateModel\"::Ensure conflict_started_at is set when in conflict.","to_description:140:(self)>str::Generate natural language description of emotional state.","apply_deltas:190:(self, arousal_delta:float = 0.0, valence_delta:float = 0.0, dominance_delta:float = 0.0, intimacy_delta:float = 0.0,)>\"EmotionalStateModel\"::","set_conflict:224:(self, conflict_state:ConflictState, trigger:str | None = None,)>\"EmotionalStateModel\"::","model_dump_for_db:255:(self)>dict[str, Any]::Convert to database-compatible dictionary.","from_db_row:278:(cls, row:dict[str, Any])>\"EmotionalStateModel\"::Create instance from database row."]]}],"nikita/emotional_state/recovery.py":["p",["get_recovery_manager:403:()>RecoveryManager::"],{"RecoveryResult":["38",[]],"RecoveryManager":["47",["__init__:95:(self)>None::Initialize RecoveryManager.","can_recover:103:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL,)>bool:can_recover:","apply_recovery:135:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL, intensity:float = 1.0,)>tuple[EmotionalStateModel, RecoveryResult]:_get_de_escalated_state,apply_recovery,can_recover:","calculate_recovery_rate:216:(self, approach:RecoveryApproach, conflict_state:ConflictState,)>float::","apply_decay_recovery:247:(self, state:EmotionalStateModel, current_time:datetime | None = None,)>tuple[EmotionalStateModel, RecoveryResult]:_get_de_escalated_state:","_get_de_escalated_state:341:(self, current:ConflictState)>ConflictState::","get_estimated_recovery_time:363:(self, state:EmotionalStateModel, approach:RecoveryApproach = RecoveryApproach.NEUTRAL,)>timedelta:calculate_recovery_rate:"]]}],"nikita/emotional_state/store.py":["p",["get_state_store:356:()>StateStore::"],{"StateStore":["30",["__init__:38:(self, session_factory:Callable | None = None)>None::","get_current_state:48:async (self, user_id:UUID)>EmotionalStateModel | None:_row_to_state:","get_state:72:async (self, state_id:UUID)>EmotionalStateModel | None:_row_to_state:","save_state:96:async (self, state:EmotionalStateModel)>EmotionalStateModel::","update_state:136:async (self, user_id:UUID, arousal:float | None = None, valence:float | None = None, dominance:float | None = None, intimacy:float | None = None, conflict_state:ConflictState | None = None, conflict_trigger:str | None = None, ignored_message_count:int | None = None,)>EmotionalStateModel | None:get_current_state,save_state:","get_state_history:221:async (self, user_id:UUID, days:int = 7, limit:int = 100,)>list[EmotionalStateModel]:_row_to_state:","get_conflict_history:256:async (self, user_id:UUID, days:int = 30,)>list[EmotionalStateModel]:_row_to_state:","delete_state:287:async (self, state_id:UUID)>bool::","delete_user_states:307:async (self, user_id:UUID)>int::","_row_to_state:329:(self, row:dict[str, Any])>EmotionalStateModel::"]]}],"nikita/engine/chapters/boss.py":["p",{"BossStateMachine":["15",["should_trigger_boss:39:(self, relationship_score:Decimal, chapter:int, game_status:str,)>bool::","check_threshold:63:async (self, user_id:UUID)>bool::","initiate_boss:82:async (self, user_id:UUID, chapter:int,)>dict[str, Any]::","trigger_boss:110:async (self, user_id:UUID)>dict[str, Any]:initiate_boss:","_get_user_repo:135:(self)::","process_pass:144:async (self, user_id:UUID)>dict[str, Any]:_get_user_repo:","process_fail:168:async (self, user_id:UUID)>dict[str, Any]:_get_user_repo:","process_outcome:198:async (self, user_id:UUID, passed:bool,)>dict[str, Any]:process_fail,process_pass:"]]}],"nikita/engine/chapters/judgment.py":["p",{"JudgmentResult":["25",[]],"BossJudgment":["31",["judge_boss_outcome:45:async (self, user_message:str, conversation_history:list[dict[str, Any]], chapter:int, boss_prompt:dict[str, Any],)>JudgmentResult:_call_llm:","_call_llm:71:async (self, user_message:str, conversation_history:list[dict[str, Any]], chapter:int, boss_prompt:dict[str, Any],)>JudgmentResult::"]]}],"nikita/engine/chapters/prompts.py":["p",["get_boss_prompt:132:(chapter:int)>BossPrompt::"],{"BossPrompt":["10",[]]}],"nikita/engine/constants.py":["p",["_load_chapter_behaviors:44:()>dict[int, str]::","_get_chapter_behaviors:68:()>dict[int, str]:_load_chapter_behaviors:","_deprecation_warning:108:(name:str, alternative:::Emit deprecation warning for old constants."],{"_ChapterBehaviorsProxy":["74",["__getitem__:77:(self, key:int)>str:_load_chapter_behaviors:","__iter__:80:(self):_load_chapter_behaviors:","__len__:83:(self):_load_chapter_behaviors:","get:86:(self, key:int, default:str | None = None)>str | None:_load_chapter_behaviors,get:","keys:90:(self):_load_chapter_behaviors,keys:","values:93:(self):_load_chapter_behaviors,values:","items:96:(self):_load_chapter_behaviors,items:"]]}],"nikita/engine/decay/calculator.py":["p",{"UserLike":["18",[]],"DecayCalculator":["28",["__init__:45:(self, *, max_decay_per_cycle:Decimal = Decimal(\"20.0\"),)>None::","is_overdue:54:(self, user:UserLike)>bool::","calculate_decay:74:(self, user:UserLike)>DecayResult | None:is_overdue:"]]}],"nikita/engine/decay/models.py":["p",{"DecayResult":["14",["validate_score_relationship:57:(self)>\"DecayResult\"::Validate that score_after <= score_before (decay doesn't increase score)."]]}],"nikita/engine/decay/processor.py":["p",{"DecayProcessor":["24",["__init__:44:(self, session:AsyncSession, user_repository:\"UserRepository\", score_history_repository:\"ScoreHistoryRepository\", *, batch_size:int = 100, max_decay_per_cycle:Decimal = Decimal(\"20.0\"),)>None::","should_skip_user:60:(self, user:Any)>bool::","process_user:73:async (self, user:Any)>DecayResult | None:_handle_game_over,_log_decay_event,should_skip_user:","process_all:103:async (self)>dict[str, int]:process_user:","_handle_game_over:131:async (self, user:Any, result:DecayResult)>None::","_log_decay_event:155:async (self, user:Any, result:DecayResult)>None::"]]}],"nikita/engine/engagement/calculator.py":["p",["_clamp:73:(value:Decimal, min_val::Decimal = Decimal(\"1\"))>Decimal::Clamp a value between min and max.","map_score_to_state:306:(score:Decimal, is_clingy::bool = False,)>EngagementState::"],{"OptimalFrequencyCalculator":["78",["get_optimal:85:(self, chapter:int, day_of_week:int)>int::","get_tolerance_band:101:(self, chapter:int)>Decimal::","get_bounds:112:(self, chapter:int, day_of_week:int)>tuple[int, int]:get_optimal,get_tolerance_band:"]],"CalibrationCalculator":["131",["_frequency_component:146:(self, actual_messages:int, optimal_messages:int,)>Decimal:_clamp:","_timing_component:171:(self, avg_response_seconds:int,)>Decimal:_clamp:","_content_component:210:(self, avg_message_length:int, needy_score:Decimal, distracted_score:Decimal,)>Decimal:_clamp:","compute:252:(self, actual_messages:int, optimal_messages:int, avg_response_seconds:int, avg_message_length:int, needy_score:Decimal, distracted_score:Decimal,)>CalibrationResult:_clamp,_content_component,_frequency_component,_timing_component,map_score_to_state:"]]}],"nikita/engine/engagement/detection.py":["p",["_get_neediness_agent:121:()>Agent[None, LanguageAnalysisResult]::","_get_distraction_agent:133:()>Agent[None, LanguageAnalysisResult]::","_clamp:145:(value:Decimal, min_val::Decimal = Decimal(\"1\"))>Decimal::Clamp a value between min and max.","_get_cache_key:481:(messages:list[str])>str::Generate cache key from messages.","_call_neediness_llm:486:async (messages:list[str])>Decimal::","_call_distraction_llm:520:async (messages:list[str])>Decimal::","analyze_neediness:557:async (messages:list[str], session_id::_call_neediness_llm,_clamp,_get_cache_key:","analyze_distraction:598:async (messages:list[str], session_id::_call_distraction_llm,_clamp,_get_cache_key:","clear_analysis_cache:636:()>None::"],{"LanguageAnalysisResult":["57",[]],"ClinginessDetector":["150",["_frequency_signal:168:(self, messages_per_day:int, optimal_frequency:int, chapter:int,)>Decimal:_clamp:","_double_text_signal:196:(self, consecutive_messages:int, total_exchanges:int,)>Decimal:_clamp:","_response_time_signal:219:(self, avg_response_seconds:int,)>Decimal:_clamp:","_length_ratio_signal:244:(self, user_avg_length:int, nikita_avg_length:int,)>Decimal:_clamp:","detect:277:(self, messages_per_day:int, optimal_frequency:int, chapter:int, consecutive_messages:int, total_exchanges:int, avg_response_seconds:int, user_avg_length:int, nikita_avg_length:int, needy_score:Decimal,)>ClinginessResult:_clamp,_double_text_signal,_frequency_signal,_length_ratio_signal,_response_time_signal:"]],"NeglectDetector":["320",["_frequency_signal:338:(self, messages_per_day:int, optimal_frequency:int, chapter:int,)>Decimal:_clamp:","_response_time_signal:362:(self, avg_response_seconds:int,)>Decimal:_clamp:","_short_message_signal:384:(self, avg_message_length:int,)>Decimal:_clamp:","_abrupt_ending_signal:409:(self, abrupt_endings:int, total_conversations:int,)>Decimal:_clamp:","detect:433:(self, messages_per_day:int, optimal_frequency:int, chapter:int, avg_response_seconds:int, avg_message_length:int, abrupt_endings:int, total_conversations:int, distracted_score:Decimal,)>NeglectResult:_abrupt_ending_signal,_clamp,_frequency_signal,_response_time_signal,_short_message_signal:"]]}],"nikita/engine/engagement/models.py":["p",{"EngagementSnapshot":["15",["multiplier:49:(self)>Decimal::Get the scoring multiplier for current state."]],"ClinginessResult":["56",[]],"NeglectResult":["79",[]],"CalibrationResult":["102",[]],"StateTransition":["135",[]]}],"nikita/engine/engagement/recovery.py":["p",{"RecoveryAction":["48",[]],"RecoveryCheckResult":["56",[]],"GameOverResult":["64",[]],"RecoveryManager":["93",["get_recovery_action:102:(self, state:EngagementState)>RecoveryAction | None::","check_recovery_complete:123:(self, state:EngagementState, recovery_started_at:datetime, messages_since_recovery:int, avg_message_length:int = 0,)>RecoveryCheckResult:_check_clingy_recovery,_check_distant_recovery,_check_out_of_zone_recovery:","_check_clingy_recovery:173:(self, messages:int)>RecoveryCheckResult::Check if clingy recovery is complete (gave space).","_check_distant_recovery:185:(self, messages:int, avg_length:int)>RecoveryCheckResult::Check if distant recovery is complete (engaged meaningfully).","_check_out_of_zone_recovery:202:(self, messages:int, avg_length:int)>RecoveryCheckResult::Check if out of zone recovery is complete.","check_point_of_no_return:224:(self, state:EngagementState, consecutive_days:int,)>GameOverResult:_get_game_over_reason:","_get_game_over_reason:260:(self, state:EngagementState)>str::Get game over reason string for state."]]}],"nikita/engine/engagement/state_machine.py":["p",{"EngagementStateMachine":["54",["__init__:64:(self, initial_state:EngagementState = EngagementState.CALIBRATING,)>None::","current_state:83:(self)>EngagementState::Get current engagement state.","current_multiplier:88:(self)>Decimal::Get scoring multiplier for current state.","update:99:(self, calibration_result:CalibrationResult, is_clingy:bool = False, is_neglecting:bool = False, is_new_day:bool = False, recovery_complete:bool = False,)>StateTransition | None:_apply_transition,_evaluate_transition,_update_counters:","_update_counters:134:(self, score:Decimal, is_clingy:bool, is_neglecting:bool, is_new_day:bool,)>None::Update consecutive counters based on current metrics.","_evaluate_transition:177:(self, score:Decimal, is_clingy:bool, is_neglecting:bool, recovery_complete:bool,)>EngagementState::Evaluate which state to transition to based on rules.","_apply_transition:233:(self, from_state:EngagementState, to_state:EngagementState, score:Decimal,)>StateTransition:_get_transition_reason,_reset_counters:Apply state transition and record in history.","_get_transition_reason:257:(self, from_state:EngagementState, to_state:EngagementState,)>str::Get human-readable reason for transition.","_reset_counters:288:(self)>None::Reset all consecutive counters.","on_chapter_change:298:(self, new_chapter:int)>StateTransition:_reset_counters:","get_history:323:(self)>list[StateTransition]::"]]}],"nikita/engine/scoring/analyzer.py":["p",["_create_score_analyzer_agent:57:()>Agent[None, ResponseAnalysis]::"],{"ScoreAnalyzer":["66",["__init__:73:(self)::Initialize the score analyzer.","agent:79:(self)>Agent[None, ResponseAnalysis]:_create_score_analyzer_agent:Lazy-load the Pydantic AI agent.","analyze:90:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis:_call_llm,_neutral_analysis:","analyze_batch:114:async (self, exchanges:list[tuple[str, str]], context:ConversationContext,)>ResponseAnalysis:_build_batch_prompt,_call_llm_raw,_neutral_analysis:","_call_llm:145:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis | None:_build_analysis_prompt,_call_llm_raw:","_call_llm_raw:159:async (self, prompt:str)>ResponseAnalysis | None::","_build_analysis_prompt:180:(self, user_message:str, nikita_response:str, context:ConversationContext,)>str::"]]}],"nikita/engine/scoring/calculator.py":["p",{"ScoreResult":["33",["delta:49:(self)>Decimal::Net score change."]],"ScoreCalculator":["54",["__init__:64:(self)::Initialize calculator with standard weights.","apply_multiplier:72:(self, deltas:MetricDeltas, engagement_state:EngagementState,)>MetricDeltas:adjust:","adjust:87:(delta:Decimal)>Decimal::","calculate_composite:99:(self, metrics:dict[str, Decimal])>Decimal::","update_metrics:123:(self, current:dict[str, Decimal], deltas:MetricDeltas,)>dict[str, Decimal]:clamp:","clamp:134:(value:Decimal)>Decimal::","calculate:150:(self, current_metrics:dict[str, Decimal], analysis:ResponseAnalysis, engagement_state:EngagementState, chapter:int,)>ScoreResult:_detect_events,apply_multiplier,calculate_composite,update_metrics:","_detect_events:194:(self, score_before:Decimal, score_after:Decimal, chapter:int,)>list[ScoreChangeEvent]::"]]}],"nikita/engine/scoring/models.py":["p",{"MetricDeltas":["16",["validate_delta_bounds:42:(cls, v:Decimal, info)>Decimal::Ensure delta is within [-10, +10] bounds.","total:51:(self)>Decimal::Sum of all deltas.","is_positive:56:(self)>bool::Whether total delta is positive (> 0)."]],"ResponseAnalysis":["61",["validate_confidence_bounds:88:(cls, v:Decimal)>Decimal::Ensure confidence is within [0, 1] bounds."]],"ConversationContext":["97",[]],"ScoreChangeEvent":["141",[]]}],"nikita/engine/scoring/service.py":["p",{"ScoringService":["37",["__init__:47:(self)::Initialize the scoring service with analyzer and calculator.","score_interaction:61:async (self, user_id:UUID, user_message:str, nikita_response:str, context:ConversationContext, current_metrics:dict[str, Decimal], engagement_state:EngagementState, session:\"AsyncSession | None\" = None,)>ScoreResult:_log_history:","score_batch:117:async (self, user_id:UUID, exchanges:list[tuple[str, str]], context:ConversationContext, current_metrics:dict[str, Decimal], engagement_state:EngagementState, session:\"AsyncSession | None\" = None,)>ScoreResult:_log_history:","analyze_only:162:async (self, user_message:str, nikita_response:str, context:ConversationContext,)>ResponseAnalysis::","_log_history:191:async (self, user_id:UUID, result:ScoreResult, context:ConversationContext, session:\"AsyncSession\", event_type:str = \"conversation\",)>None::"]]}],"nikita/engine/vice/analyzer.py":["p",{"LLMViceSignal":["21",[]],"LLMViceAnalysis":["30",[]],"ViceAnalyzer":["73",["__init__:79:(self)::Initialize analyzer with Pydantic AI agent.","_get_agent:83:(self)>Agent[None, LLMViceAnalysis]::Lazy-load Pydantic AI agent for vice analysis.","analyze_exchange:103:async (self, user_message:str, nikita_response:str, conversation_id:UUID, context:dict | None = None,)>ViceAnalysisResult:_analyze_with_llm,_convert_llm_signals:","_analyze_with_llm:140:async (self, prompt:str)>dict:_get_agent:","_convert_llm_signals:155:(self, llm_signals:list[dict])>list[ViceSignal]::"]]}],"nikita/engine/vice/boundaries.py":["p",{"ViceBoundaryEnforcer":["85",["max_intensity_for_chapter:96:(self, category:str, chapter:int,)>Decimal:max_intensity_for_chapter:","apply_cap:124:(self, category:str, intensity:Decimal, chapter:int,)>Decimal:max_intensity_for_chapter:","get_allowed_expressions:138:(self, category:str)>list[str]::","get_forbidden_expressions:150:(self, category:str)>list[str]::","is_sensitive_category:162:(self, category:str)>bool::"]]}],"nikita/engine/vice/injector.py":["p",{"VicePromptInjector":["62",["inject:73:(self, base_prompt:str, profile:ViceProfile, chapter:int,)>str:_build_vice_section,inject:","_build_vice_section:113:(self, top_vices:list[tuple[str, Decimal]], chapter:int,)>str:_intensity_label:"]]}],"nikita/engine/vice/models.py":["p",{"ViceSignal":["17",["validate_confidence:41:(cls, v)::Ensure confidence is a Decimal."]],"ViceAnalysisResult":["52",["detected_count:68:(self)>int::Number of positive signals detected.","rejection_count:73:(self)>int::Number of rejection signals detected.","has_signals:78:(self)>bool::Whether any signals were detected."]],"ViceProfile":["83",["get_intensity:102:(self, category:str)>Decimal::","has_active_vices:113:(self, threshold:Decimal = Decimal(\"0.30\"))>bool::","get_top_n:124:(self, n:int = 3)>list[tuple[str, Decimal]]::"]],"ViceInjectionContext":["142",["has_vices:157:(self)>bool::Check if there are active vices to inject.","primary_vice:162:(self)>str | None::Get the primary (highest) vice category."]]}],"nikita/engine/vice/scorer.py":["p",{"ViceScorer":["26",["__init__:37:(self)::Initialize scorer.","close:42:async (self)>None:close:","_get_vice_repo:61:async (self)>\"VicePreferenceRepository\"::","process_signals:80:async (self, user_id:UUID, signals:list[ViceSignal],)>dict:_get_vice_repo,process_signals:","get_profile:135:async (self, user_id:UUID)>ViceProfile:_get_vice_repo:","get_top_vices:185:async (self, user_id:UUID, n:int = 3, min_threshold:Decimal = Decimal(\"0.20\"),)>list[tuple[str, Decimal]]:get_profile:"]]}],"nikita/engine/vice/service.py":["p",{"ViceService":["32",["__init__:44:(self)::Initialize vice service with all components.","__aenter__:52:async (self)>\"ViceService\"::","__aexit__:62:async (self, exc_type, exc_val, exc_tb)>bool:close:","close:87:async (self)>None:close:","get_prompt_context:100:async (self, profile:ViceProfile, chapter:int,)>ViceInjectionContext:get_probe_categories:","process_conversation:148:async (self, user_id:UUID, user_message:str, nikita_message:str, conversation_id:UUID,)>dict::","process_conversation_signals:182:async (self, user_id:UUID, signals:list[ViceSignal],)>dict::","get_probe_categories:194:(self, profile:ViceProfile)>list[str]::","inject_vices_into_prompt:234:(self, base_prompt:str, profile:ViceProfile, chapter:int,)>str::","get_user_profile:249:async (self, user_id:UUID)>ViceProfile::"]]}],"nikita/life_simulation/__init__.py":["p",["__getattr__:90:(name:str)::Lazy import for components."]],"nikita/life_simulation/entity_manager.py":["p",["load_entity_config:37:()>dict[str, list[dict[str, str]]]:_get_default_entities_config:","_get_default_entities_config:53:()>dict[str, list[dict[str, str]]]::","get_default_entities:72:()>list[dict[str, Any]]:load_entity_config:","get_entity_manager:317:()>EntityManager::"],{"EntityManager":["105",["__init__:121:(self, store:EventStore | None = None)>None::","seed_entities:129:async (self, user_id:UUID)>list[NikitaEntity]::","get_entities_by_type:167:async (self, user_id:UUID, entity_type:EntityType)>list[NikitaEntity]:get_entities_by_type:","get_all_entities:179:async (self, user_id:UUID)>list[NikitaEntity]::","get_colleagues:190:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_friends:197:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_places:204:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","get_projects:211:async (self, user_id:UUID)>list[NikitaEntity]:get_entities_by_type:","add_entity:218:async (self, entity:NikitaEntity)>NikitaEntity::","entity_exists:229:async (self, user_id:UUID, name:str)>bool:entity_exists:","get_entity_names:241:async (self, user_id:UUID)>dict[EntityType, list[str]]::","get_entity_context:263:async (self, user_id:UUID)>str::"]]}],"nikita/life_simulation/event_generator.py":["p",["get_event_generator:332:()>EventGenerator::"],{"GeneratedEvent":["36",[]],"GeneratedEventList":["49",[]],"EventGenerator":["55",["__init__:72:(self, entity_manager:EntityManager | None = None, llm_client:Any | None = None,)>None::","generate_events_for_day:88:async (self, user_id:UUID, event_date:date, active_arcs:list[NarrativeArc] | None = None, recent_events:list[LifeEvent] | None = None,)>list[LifeEvent]:_build_generation_prompt,_call_llm,_convert_to_life_events:","_build_generation_prompt:130:(self, event_date:date, entity_names:dict[str, list[str]], active_arcs:list[NarrativeArc], recent_events:list[LifeEvent],)>str::"]]}],"nikita/life_simulation/models.py":["p",{"EmotionalImpact":["112",["to_dict:123:(self)>dict[str, float]::Convert to dictionary."]],"LifeEvent":["133",["validate_event_type_matches_domain:157:(cls, v:EventType, info:Any)>EventType::Ensure event_type is valid for the domain.","model_dump_for_db:166:(self)>dict[str, Any]:to_dict:Convert to database-compatible dictionary."]],"NarrativeArc":["184",["model_dump_for_db:203:(self)>dict[str, Any]::Convert to database-compatible dictionary."]],"NikitaEntity":["220",["model_dump_for_db:235:(self)>dict[str, Any]::Convert to database-compatible dictionary."]]}],"nikita/life_simulation/mood_calculator.py":["p",["get_mood_calculator:188:()>MoodCalculator::"],{"MoodState":["21",["to_dict:36:(self)>dict[str, float]::Convert to dictionary.","__post_init__:45:(self)::Clamp values to valid range."]],"MoodCalculator":["53",["__init__:71:(self, base_mood:MoodState | None = None)::","compute_from_events:81:(self, events:list[LifeEvent], decay_previous:bool = False)>MoodState::","compute_from_event:128:(self, event:LifeEvent)>MoodState:compute_from_events:","describe_mood:139:(self, mood:MoodState)>str::"]]}],"nikita/life_simulation/narrative_manager.py":["p",["get_narrative_manager:377:()>NarrativeArcManager::"],{"ArcProgressUpdate":["93",[]],"NarrativeArcManager":["101",["__init__:126:(self, store:EventStore | None = None)>None::","create_arc:140:async (self, user_id:UUID, arc_type:str, entities:list[str] | None = None, initial_state:str | None = None,)>NarrativeArc:_generate_initial_state:","progress_arc:181:async (self, arc_id:UUID, new_state:str,)>bool::","resolve_arc:203:async (self, arc_id:UUID, outcome:str, final_state:str | None = None,)>bool::","get_active_arcs:232:async (self, user_id:UUID)>list[NarrativeArc]:get_active_arcs:","check_arc_resolution:245:async (self, arc:NarrativeArc, days_active:int | None = None)>tuple[bool, str | None]::","maybe_resolve_arcs:282:async (self, user_id:UUID)>list[tuple[NarrativeArc, str]]:check_arc_resolution,get_active_arcs,resolve_arc:","maybe_create_arc:306:async (self, user_id:UUID, domain:EventDomain | None = None,)>NarrativeArc | None:create_arc,get_active_arcs:","_generate_initial_state:346:(self, arc_type:str, entities:list[str])>str::"]]}],"nikita/life_simulation/simulator.py":["p",["get_life_simulator:337:()>LifeSimulator::"],{"LifeSimulator":["31",["__init__:61:(self, store:EventStore | None = None, entity_manager:EntityManager | None = None, event_generator:EventGenerator | None = None, narrative_manager:NarrativeArcManager | None = None, mood_calculator:MoodCalculator | None = None,)>None::","initialize_user:77:async (self, user_id:UUID)>bool::","generate_next_day_events:102:async (self, user_id:UUID, target_date:date | None = None,)>list[LifeEvent]:get_active_arcs,get_recent_events,initialize_user:","get_today_events:165:async (self, user_id:UUID, max_events:int = 5,)>list[LifeEvent]::","get_recent_events:187:async (self, user_id:UUID, days:int = 7,)>list[LifeEvent]:get_recent_events:","get_current_mood:203:async (self, user_id:UUID, lookback_days:int = 3,)>MoodState:get_recent_events:","get_active_arcs:218:async (self, user_id:UUID)>list[NarrativeArc]:get_active_arcs:","get_events_for_context:234:async (self, user_id:UUID, max_today:int = 3, max_recent:int = 5,)>dict[str, Any]:_format_arc,_format_event,_summarize_mood,get_active_arcs,get_current_mood,get_recent_events,get_today_events:","_format_event:275:(self, event:LifeEvent)>str::","_format_arc:287:(self, arc:NarrativeArc)>str::","_summarize_mood:299:(self, mood:MoodState)>str::"]]}],"nikita/life_simulation/store.py":["p",["get_event_store:518:()>EventStore::"],{"EventStore":["36",["__init__:45:(self, session_factory:Callable | None = None)>None::","save_event:55:async (self, event:LifeEvent)>LifeEvent::","save_events:84:async (self, events:list[LifeEvent])>list[LifeEvent]:save_event:","get_event:97:async (self, event_id:UUID)>LifeEvent | None:_row_to_event:","get_events_for_date:120:async (self, user_id:UUID, event_date:date)>list[LifeEvent]:_row_to_event:","get_recent_events:150:async (self, user_id:UUID, days:int = 7)>list[LifeEvent]:_row_to_event:","get_events_by_domain:181:async (self, user_id:UUID, domain:EventDomain, days:int = 7)>list[LifeEvent]:_row_to_event:","delete_old_events:211:async (self, user_id:UUID, days_to_keep:int = 7)>int::","save_arc:235:async (self, arc:NarrativeArc)>NarrativeArc::","get_active_arcs:264:async (self, user_id:UUID)>list[NarrativeArc]:_row_to_arc:","update_arc_status:290:async (self, arc_id:UUID, status:ArcStatus, resolved_at:datetime | None = None,)>bool::","update_arc_state:317:async (self, arc_id:UUID, current_state:str)>bool::","save_entity:341:async (self, entity:NikitaEntity)>NikitaEntity::","save_entities:364:async (self, entities:list[NikitaEntity])>list[NikitaEntity]:save_entity:","get_entities:377:async (self, user_id:UUID)>list[NikitaEntity]:_row_to_entity:","get_entities_by_type:399:async (self, user_id:UUID, entity_type:EntityType)>list[NikitaEntity]:_row_to_entity:","entity_exists:421:async (self, user_id:UUID, name:str)>bool::","_row_to_event:444:(self, row:dict[str, Any])>LifeEvent::Convert database row to LifeEvent.","_row_to_arc:471:(self, row:dict[str, Any])>NarrativeArc::Convert database row to NarrativeArc.","_row_to_entity:501:(self, row:dict[str, Any])>NikitaEntity::Convert database row to NikitaEntity."]]}],"nikita/memory/supabase_memory.py":["p",["get_supabase_memory_client:394:async (user_id:UUID)>SupabaseMemory::"],{"EmbeddingError":["38",[]],"SupabaseMemory":["44",["__init__:66:(self, session:AsyncSession, user_id:UUID, openai_api_key:str,)>None::","__aenter__:74:async (self)>\"SupabaseMemory\"::","__aexit__:77:async (self, exc_type, exc_val, exc_tb)>bool::","close:87:async (self)>None::","_generate_embedding:92:async (self, text:str)>list[float]::","generate_embeddings_batch:126:async (self, texts:list[str])>list[list[float]]::","add_fact:160:async (self, fact:str, graph_type:str, source:str, confidence:float, metadata:dict[str, Any] | None = None, conversation_id:UUID | None = None,):_generate_embedding,add_fact,find_similar:","search:197:async (self, query:str, graph_types:list[str] | None = None, limit:int = 10, min_confidence:float = 0.0,)>list[dict[str, Any]]:_generate_embedding:","get_recent:233:async (self, graph_type:str | None = None, limit:int = 20,):get_recent:","get_context_for_prompt:248:async (self, user_message:str, max_memories:int = 5,)>str:search:","find_similar:279:async (self, text:str, threshold:float = 0.95,):_generate_embedding:","add_user_fact:311:async (self, fact:str, confidence:float = 0.8, source_message:str | None = None,)>None:add_fact:Add a fact about the user (NikitaMemory compat).","get_user_facts:325:async (self, limit:int = 50)>list[str]::Get user facts as strings (NikitaMemory compat).","add_relationship_episode:338:async (self, description:str, episode_type:str = \"general\",)>None:add_fact:Add relationship episode (NikitaMemory compat).","get_relationship_episodes:348:async (self, limit:int = 50)>list[str]::Get relationship episodes as strings (NikitaMemory compat).","add_nikita_event:361:async (self, description:str, event_type:str = \"life_event\",)>None:add_fact:Add Nikita life event (NikitaMemory compat).","get_nikita_events:371:async (self, limit:int = 50)>list[str]::Get Nikita events as strings (NikitaMemory compat).","search_memory:385:async (self, query:str, graph_types:list[str] | None = None, limit:int = 10,)>list[dict[str, Any]]:search:Search memory (NikitaMemory compat wrapper)."]]}],"nikita/onboarding/handoff.py":["p",["generate_first_nikita_message:181:(profile:UserOnboardingProfile, user_name::generate:","generate_and_store_social_circle:202:async (user_id:UUID, location::list[str] | None = None, job_field:str | None = None, meeting_context:str | None = None,)>bool::","_extract_location_from_timezone:255:(timezone:str | None)>str | None::","_extract_meeting_context:285:(hangout_spots:list[str] | None)>str | None::"],{"HandoffResult":["31",[]],"FirstMessageGenerator":["120",["generate:127:(self, profile:UserOnboardingProfile, user_name:str = \"you\")>str::"]],"HandoffManager":["323",["__init__:332:(self)>None::Initialize the manager.","execute_handoff:343:async (self, user_id:UUID, telegram_id:int, profile:UserOnboardingProfile, call_id:str | None = None, user_name:str = \"friend\",)>HandoffResult:_bootstrap_pipeline,_extract_location_from_timezone,_extract_meeting_context,_generate_profile_summary,_send_first_message,generate,generate_and_store_social_circle:","transition:437:async (self, user_id:UUID, call_id:str, profile:UserOnboardingProfile, user_name:str = \"friend\",)>HandoffResult:_generate_profile_summary,_get_user_telegram_id,_send_first_message,_update_user_status,execute_handoff,generate,transition:","_generate_profile_summary:505:(self, profile:UserOnboardingProfile)>str::Generate a summary of the profile for Nikita's context.","_update_user_status:533:async (self, user_id:UUID, status:OnboardingStatus, call_id:str,)>None::","_get_user_telegram_id:555:async (self, user_id:UUID)>int | None::Get user's Telegram ID from database.","_bootstrap_pipeline:567:async (self, user_id:UUID)>None::","_send_first_message:610:async (self, telegram_id:int, message:str,)>dict[str, Any]::","initiate_nikita_callback:640:async (self, user_id:UUID, phone_number:str, user_name:str = \"friend\", delay_seconds:int = 5, max_retries:int = 3,)>dict[str, Any]:_get_post_onboarding_first_message:","_get_post_onboarding_first_message:756:(self, user_name:str = \"friend\")>str::","execute_handoff_with_voice_callback:795:async (self, user_id:UUID, telegram_id:int, phone_number:str, profile:UserOnboardingProfile, call_id:str | None = None, user_name:str = \"friend\", callback_delay_seconds:int = 5,)>HandoffResult:_extract_location_from_timezone,_extract_meeting_context,_generate_profile_summary,_send_first_message,generate,generate_and_store_social_circle,initiate_nikita_callback:"]]}],"nikita/onboarding/meta_nikita.py":["p",["build_meta_nikita_config_override:310:(user_id:UUID | str, user_name::build_meta_nikita_config_override:"],{"TTSSettings":["31",[]],"MetaNikitaConfig":["366",["__init__:380:(self, agent_id:str | None = None, voice_id:str | None = None,)::","get_agent_config:395:(self, user_id:UUID, user_name:str = \"friend\",)>dict[str, Any]:build_meta_nikita_config_override:","_personalize_first_message:414:(self, user_name:str)>str::Personalize first message with user's name if known."]]}],"nikita/onboarding/models.py":["p",{"UserOnboardingProfile":["76",["validate_darkness_level:132:(cls, v:int)>int::","validate_pacing_weeks:143:(cls, v:int)>int::","is_complete:152:(self)>bool::","to_context_dict:159:(self)>dict[str, Any]::","get_darkness_description:177:(self)>str::Get human-readable description of darkness level.","get_pacing_description:188:(self)>str::Get human-readable description of pacing."]],"ProfileFieldUpdate":["195",["validate_field_name:206:(cls, v:str)>str::Validate field_name is a valid profile field."]],"OnboardingCallRequest":["223",[]],"OnboardingCallResponse":["231",[]]}],"nikita/onboarding/preference_config.py":["p",["get_darkness_config:218:(level:int)>DarknessLevelConfig::","get_pacing_config:238:(weeks:int)>PacingConfig::","get_conversation_style_config:258:(style:ConversationStyle)>ConversationStyleConfig::Get conversation style configuration."],{"DarknessLevelConfig":["23",[]],"PacingConfig":["41",[]],"ConversationStyleConfig":["57",[]],"BehavioralConfig":["70",[]],"ConfigurationResult":["81",[]],"PreferenceConfigurator":["265",["__init__:272:(self)>None::Initialize the configurator.","configure:282:(self, user_id:UUID, darkness_level:int | None = None, pacing_weeks:int | None = None, conversation_style:ConversationStyle | None = None,)>ConfigurationResult:configure:","get_preferences:341:(self, user_id:UUID)>UserOnboardingProfile::Get user's preference profile.","get_conversation_style_config:348:(self, user_id:UUID)>ConversationStyleConfig:get_conversation_style_config,get_preferences:Get conversation style configuration for user.","get_behavioral_config:354:(self, user_id:UUID)>BehavioralConfig:get_conversation_style_config,get_darkness_config,get_pacing_config,get_preferences:Get combined behavioral configuration for user.","to_dict:374:(self, user_id:UUID)>dict[str, Any]:get_preferences:Convert preferences to dictionary."]]}],"nikita/onboarding/profile_collector.py":["p",["extract_timezone_from_location:351:(location:str)>str | None::","extract_hobbies:380:(text:str)>list[str]::","infer_personality_type:415:(text:str)>PersonalityType::"],{"CollectionResult":["149",[]],"TimezoneValidator":["158",["is_valid:161:(self, timezone:str)>bool::Check if timezone is in known list.","get_known_timezones:167:(self)>set[str]::Return set of known timezone strings."]],"ProfileCollector":["172",["__init__:179:(self)>None::Initialize the collector.","collect:186:(self, user_id:UUID, field:ProfileField, value:Any)>CollectionResult:_set_field,_validate_and_process,collect:","_validate_and_process:228:(self, field:ProfileField, value:Any)>Any::Validate and process a field value.","_set_field:263:(self, profile:UserOnboardingProfile, field:ProfileField, value:Any)>None::Set a field value on the profile.","get_profile:282:(self, user_id:UUID)>UserOnboardingProfile:get_profile:","is_complete:299:(self, user_id:UUID)>bool:get_profile:Check if profile has all required fields.","get_missing_fields:313:(self, user_id:UUID)>set[ProfileField]:get_profile:Get set of missing required fields.","get_completeness_percentage:327:(self, user_id:UUID)>float:get_profile:Calculate profile completeness as percentage."]]}],"nikita/onboarding/server_tools.py":["p",{"OnboardingToolRequest":["45",[]],"OnboardingToolResponse":["53",[]],"OnboardingServerToolHandler":["62",["__init__:69:(self, session:AsyncSession | None = None)>None::","_get_session:80:async (self)>AsyncSession::Get a database session.","handle_request:87:async (self, request:OnboardingToolRequest)>OnboardingToolResponse:collect_profile,complete_onboarding,configure_preferences,end_call:","collect_profile:134:async (self, user_id:UUID, field_name:str, value:str,)>OnboardingToolResponse:_get_or_create_profile,_persist_profile_to_db:","configure_preferences:212:async (self, user_id:UUID, darkness_level:int | None = None, pacing_weeks:int | None = None, conversation_style:str | None = None,)>OnboardingToolResponse:_get_or_create_profile,_persist_profile_to_db:","complete_onboarding:288:async (self, user_id:UUID, call_id:str, notes:str | None = None,)>OnboardingToolResponse:_get_or_create_profile,_trigger_handoff,complete_onboarding:","end_call:348:async (self, user_id:UUID, reason:str = \"onboarding_complete\",)>OnboardingToolResponse::","_get_or_create_profile:373:(self, user_id:UUID)>UserOnboardingProfile::Get existing in-memory profile or create a new one.","_persist_profile_to_db:382:async (self, user_id:UUID, profile:UserOnboardingProfile)>None::","_trigger_handoff:400:async (self, user_id:UUID, profile:UserOnboardingProfile)>None::"]]}],"nikita/onboarding/voice_flow.py":["p",{"OnboardingState":["36",["can_proceed_to:54:(self, next_state:str)>bool::Check if transition to next_state is valid."]],"VoiceOnboardingFlow":["59",["__init__:69:(self)>None::Initialize the flow.","is_already_onboarded:76:async (self, user_id:UUID)>bool:_get_user_onboarding_status:","should_start_onboarding:92:async (self, user_id:UUID)>bool:_get_user_onboarding_status,is_already_onboarded:","get_phone_request_message:112:(self)>str::","is_valid_phone:127:(self, phone:str)>bool::","normalize_phone:146:(self, phone:str)>str::Normalize phone number to E.164-ish format.","process_phone_input:157:async (self, user_id:UUID, phone:str)>dict[str, Any]:_save_phone_number,_update_state,get_ready_confirmation_message,is_valid_phone,normalize_phone:","get_ready_confirmation_message:198:(self)>str::","is_confirmation:215:(self, text:str)>bool::","is_deferral:229:(self, text:str)>bool::","process_ready_response:244:async (self, user_id:UUID, response:str)>dict[str, Any]:_get_onboarding_state,_initiate_call,_save_deferred_state,is_confirmation,is_deferral:","initiate_onboarding_call:311:async (self, user_id:UUID, phone:str, user_name:str = \"friend\")>dict[str, Any]:_call_elevenlabs,_update_onboarding_status,_update_state:","handle_message:371:async (self, user_id:UUID, text:str)>dict[str, Any]:_get_onboarding_state,process_phone_input,process_ready_response:","get_current_step_message:403:async (self, user_id:UUID)>str:_get_onboarding_state,get_phone_request_message,get_ready_confirmation_message:","can_resume_onboarding:435:async (self, user_id:UUID)>bool:_get_onboarding_state:Check if user has deferred onboarding to resume.","resume_onboarding:440:async (self, user_id:UUID)>dict[str, Any]:_update_state,get_ready_confirmation_message:Resume deferred onboarding.","handle_onboard_command:448:async (self, user_id:UUID)>dict[str, Any]:can_resume_onboarding,get_phone_request_message,is_already_onboarded,resume_onboarding:Handle /onboard command to resume deferred onboarding.","_get_user_onboarding_status:466:async (self, user_id:UUID)>OnboardingStatus | None::Get user's onboarding status from database.","_get_onboarding_state:471:async (self, user_id:UUID)>OnboardingState | None::Get user's current onboarding state.","_update_state:481:async (self, user_id:UUID, new_state:str, phone_number:str | None = None, call_id:str | None = None,)>None::Update user's onboarding state.","_save_phone_number:497:async (self, user_id:UUID, phone:str)>None::Save phone number to database.","_save_deferred_state:502:async (self, user_id:UUID)>None:_update_state:Save deferred state.","_update_onboarding_status:509:async (self, user_id:UUID, status:OnboardingStatus)>None::Update user's onboarding status in database.","_initiate_call:514:async (self, user_id:UUID, phone:str)>dict[str, Any]:initiate_onboarding_call:Internal call initiation wrapper.","_call_elevenlabs:520:async (self, phone:str, agent_config:dict[str, Any])>dict[str, Any]::Call ElevenLabs API to initiate call."]]}],"nikita/pipeline/models.py":["p",{"PipelineContext":["16",["record_stage_error:82:(self, stage_name:str, error:str)>None::Record an error from a non-critical stage.","record_stage_timing:86:(self, stage_name:str, duration_ms:float)>None::Record execution time for a stage.","has_stage_errors:90:(self)>bool::Check if any stage errors were recorded.","total_duration_ms:95:(self)>float::Total pipeline execution time from stage timings."]],"PipelineResult":["101",["succeeded:113:(cls, context:PipelineContext)>PipelineResult::Create a successful pipeline result.","failed:125:(cls, context:PipelineContext, stage:str, error:str)>PipelineResult::Create a failed pipeline result."]]}],"nikita/pipeline/orchestrator.py":["p",{"PipelineOrchestrator":["25",["__init__:54:(self, session:AsyncSession, stages:list[tuple[str, Any, bool]] | None = None,)>None::","_get_stages:66:(self)>list[tuple[str, Any, bool]]::Get stage instances, using injected stages or lazy-loading defaults.","process:92:async (self, conversation_id:UUID, user_id:UUID, platform:str = \"text\",)>PipelineResult:_get_stages:"]]}],"nikita/pipeline/stages/base.py":["p",{"StageResult":["24",["ok:32:(cls, data:dict | None = None, duration_ms:float = 0.0)>StageResult::","fail:36:(cls, error:str, duration_ms:float = 0.0)>StageResult::"]],"StageError":["40",["__init__:42:(self, stage_name:str, message:str, recoverable:bool = True):__init__:"]],"BaseStage":["48",["__init__:59:(self, session:Any = None, **kwargs)::","execute:63:async (self, ctx:PipelineContext)>StageResult:_run,fail,ok:Run stage with timeout + error handling.","_run:93:async (self, ctx:PipelineContext)>dict | None::Implement stage logic. Return data dict or None."]]}],"nikita/pipeline/stages/conflict.py":["p",{"ConflictStage":["21",["__init__:31:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:34:async (self, ctx:PipelineContext)>dict | None::Evaluate whether a conflict should trigger."]]}],"nikita/pipeline/stages/emotional.py":["p",{"EmotionalStage":["21",["__init__:31:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:34:async (self, ctx:PipelineContext)>dict | None::Compute 4D emotional state."]]}],"nikita/pipeline/stages/extraction.py":["p",{"ExtractionResult":["24",[]],"ExtractionStage":["33",["__init__:46:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_get_agent:50:(self)>Agent::Lazy-load extraction agent to avoid import overhead.","_run:68:async (self, ctx:PipelineContext)>dict | None:_get_agent:"]]}],"nikita/pipeline/stages/game_state.py":["p",{"GameStateStage":["22",["__init__:32:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:35:async (self, ctx:PipelineContext)>dict | None::Compute score deltas and check chapter transitions."]]}],"nikita/pipeline/stages/life_sim.py":["p",{"LifeSimStage":["21",["__init__:31:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:34:async (self, ctx:PipelineContext)>dict | None::Generate life events via LifeSimulator."]]}],"nikita/pipeline/stages/memory_update.py":["p",{"MemoryUpdateStage":["22",["__init__:35:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:38:async (self, ctx:PipelineContext)>dict | None:_classify_graph_type:Write extracted facts to memory_facts.","_classify_graph_type:89:(self, fact_dict:dict)>str::Classify a fact into user/relationship/nikita graph."]]}],"nikita/pipeline/stages/prompt_builder.py":["p",{"PromptBuilderStage":["31",["__init__:49:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:52:async (self, ctx:PipelineContext)>dict | None:_generate_prompt:","_generate_prompt:93:async (self, ctx:PipelineContext, platform:str)>tuple[str | None, int, float]:_count_tokens,_enforce_token_budget,_enrich_with_haiku,_render_template,_store_prompt:","_render_template:133:(self, template_name:str, ctx:PipelineContext)>str:_build_template_vars:","_build_template_vars:149:(self, ctx:PipelineContext)>dict::","_count_tokens:188:(self, text:str)>int::","_enrich_with_haiku:201:async (self, raw_prompt:str, platform:str)>str | None::","_enforce_token_budget:247:(self, prompt:str, token_count:int, platform:str)>tuple[str, int]:_count_tokens,_truncate_prompt:","_truncate_prompt:285:(self, prompt:str, target_tokens:int)>str:_remove_section:","_remove_section:323:(self, prompt:str, section_header:str)>str::","_store_prompt:352:async (self, ctx:PipelineContext, platform:str, prompt_text:str, token_count:int, gen_time_ms:float,)>None:_sync_cached_voice_prompt:","_sync_cached_voice_prompt:396:async (self, user_id, prompt_text:str)>None::"]]}],"nikita/pipeline/stages/summary.py":["p",{"SummaryStage":["21",["__init__:33:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:36:async (self, ctx:PipelineContext)>dict | None::"]]}],"nikita/pipeline/stages/touchpoint.py":["p",{"TouchpointStage":["21",["__init__:31:(self, session:AsyncSession = None, **kwargs)>None:__init__:","_run:34:async (self, ctx:PipelineContext)>dict | None::Evaluate touchpoint triggers and schedule if needed."]]}],"nikita/pipeline/templates/__init__.py":["p",["_get_env:11:()>Environment::","render_template:21:(template_name:str, **context)>str::"]],"nikita/platforms/telegram/bot.py":["p",["escape_html:14:(text:str)>str::","get_bot:263:()>TelegramBot::"],{"TelegramBot":["34",["__init__:37:(self)::Initialize bot with settings and HTTP client.","send_message:53:async (self, chat_id:int, text:str, parse_mode:str = \"HTML\", escape:bool = True,)>dict:escape_html:","send_message_with_keyboard:102:async (self, chat_id:int, text:str, keyboard:list[list[dict]], parse_mode:str = \"HTML\", escape:bool = True,)>dict:escape_html:","answer_callback_query:150:async (self, callback_query_id:str, text:str | None = None, show_alert:bool = False,)>dict::","send_chat_action:187:async (self, chat_id:int, action:str = \"typing\",)>dict::","set_webhook:218:async (self, url:str, secret_token:str | None = None)>dict::","close:254:async (self)::Close the HTTP client connection."]]}],"nikita/platforms/telegram/onboarding/handler.py":["p",["create_onboarding_handler:1269:async (bot:TelegramBot, onboarding_repository::ProfileRepository, user_repository:UserRepository, backstory_repository:BackstoryRepository, vice_repository:VicePreferenceRepository,)>OnboardingHandler::"],{"_ProfileFromAnswers":["40",["__init__:46:(self, answers:dict)::"]],"OnboardingHandler":["118",["__init__:142:(self, bot:TelegramBot, onboarding_repository:OnboardingStateRepository, profile_repository:ProfileRepository, user_repository:UserRepository | None = None, backstory_repository:BackstoryRepository | None = None, vice_repository:VicePreferenceRepository | None = None, venue_research_service:\"VenueResearchService | None\" = None, backstory_generator:\"BackstoryGeneratorService | None\" = None, persona_adaptation:\"PersonaAdaptationService | None\" = None,)::","start:170:async (self, telegram_id:int, chat_id:int,)>None::","handle:202:async (self, telegram_id:int, chat_id:int, text:str,)>bool:_handle_drug_tolerance_step,_handle_interest_step,_handle_life_stage_step,_handle_location_step,_handle_scenario_selection_step,_handle_scene_step,_handle_skip,_handle_venue_research_step,_is_skip_request:","has_incomplete_onboarding:263:async (self, telegram_id:int,)>OnboardingState | None::","resume:288:async (self, telegram_id:int, chat_id:int,)>bool:has_incomplete_onboarding:","_handle_location_step:327:async (self, telegram_id:int, chat_id:int, text:str,)>None:_validate_location:","_handle_life_stage_step:358:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_scene_step:415:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_interest_step:471:async (self, telegram_id:int, chat_id:int, text:str,)>None::","_handle_drug_tolerance_step:501:async (self, telegram_id:int, chat_id:int, text:str,)>None:_validate_drug_tolerance:","_handle_skip:557:async (self, telegram_id:int, chat_id:int, state:OnboardingState,)>None::","_handle_venue_research_step:618:async (self, telegram_id:int, chat_id:int, text:str,)>None:_present_scenarios:","_present_scenarios:707:async (self, telegram_id:int, chat_id:int, scenarios:list,)>None::"]]}],"nikita/platforms/telegram/rate_limiter.py":["p",["get_shared_cache:74:()>InMemoryCache::"],{"InMemoryCache":["28",["__init__:36:(self)::","incr:41:async (self, key:str)>int:_cleanup_expired,get:Increment counter and return new value.","expire:48:async (self, key:str, seconds:int)>None::Set expiration time for a key.","get:53:async (self, key:str)>int:_cleanup_expired,get:Get current value (returns 0 if not exists or expired).","_cleanup_expired:59:(self)>None::Remove expired keys (called within lock)."]],"RateLimitResult":["83",[]],"RateLimiter":["104",["__init__:120:(self, cache:Any):expire,get,incr:","check:129:async (self, user_id:UUID)>RateLimitResult:_get_day_key,_get_minute_key,_seconds_until_midnight,expire,incr:","get_remaining:193:async (self, user_id:UUID)>dict:_get_day_key,_get_minute_key,get:","_get_minute_key:221:(self, user_id:UUID)>str::Generate cache key for per-minute limit.","_get_day_key:225:(self, user_id:UUID)>str::Generate cache key for per-day limit.","_seconds_until_midnight:230:(self)>int::Calculate seconds until midnight UTC (when daily limit resets)."]],"DatabaseRateLimiter":["243",["__init__:260:(self, session:\"AsyncSession\")::","check:269:async (self, user_id:UUID)>RateLimitResult:_get_day_window,_get_minute_window,_seconds_until_midnight:","get_remaining:371:async (self, user_id:UUID)>dict:_get_day_window,_get_minute_window:","_get_minute_window:415:(self)>str::","_get_day_window:424:(self)>str::","_seconds_until_midnight:433:(self)>int::Calculate seconds until midnight UTC (when daily limit resets)."]]}],"nikita/prompts/nikita_persona.py":["p",["get_nikita_persona:155:()>str::"]],"nikita/prompts/voice_persona.py":["p",["get_voice_persona_additions:149:(chapter:int = 1, mood:::"]],"nikita/text_patterns/models.py":["p",["get_length_config:177:(context:MessageContext)>LengthConfig::Get length configuration for a context."],{"EmojiConfig":["33",["validate_emoji_list:77:(cls, v:list[str])>list[str]::Ensure emoji lists are not empty.","validate_contexts:85:(cls, v:dict[str, list[str]])>dict[str, list[str]]::Ensure contexts have valid emojis.","get_all_allowed:94:(self)>list[str]::Get all allowed emojis and emoticons.","get_context_emojis:98:(self, context:EmojiContext)>list[str]::Get emojis appropriate for a context."]],"LengthConfig":["103",["validate_max_greater_than_min:134:(cls, v:int, info)>int::Ensure max_chars >= min_chars."]],"SplitConfig":["182",["validate_delay_range:213:(cls, v:tuple[int, int])>tuple[int, int]::Ensure delay range is valid."]],"PunctuationConfig":["223",[]],"SplitMessage":["262",[]],"TextPatternResult":["284",["message_count:323:(self)>int::Get the number of output messages.","get_messages_for_sending:327:(self)>list[tuple[str, int]]::Get messages as (content, delay_ms) tuples for sending."]]}],"nikita/touchpoints/engine.py":["p",["deliver_due_touchpoints:501:async (session:\"AsyncSession\")>list[DeliveryResult]::"],{"DeliveryResult":["44",["__init__:54:(self, touchpoint_id:UUID, success:bool, delivered_at:datetime | None = None, error:str | None = None, skipped_reason:str | None = None,)::"]],"TouchpointEngine":["70",["__init__:90:(self, session:\"AsyncSession\", config:TouchpointConfig | None = None, min_gap_minutes:int | None = None,)::","deliver_due_touchpoints:108:async (self)>list[DeliveryResult]:_deliver_single:","_deliver_single:140:async (self, touchpoint:ScheduledTouchpoint)>DeliveryResult:_evaluate_silence,_generate_message,_send_telegram_message,_should_skip_for_dedup:","_should_skip_for_dedup:194:async (self, touchpoint:ScheduledTouchpoint)>bool::","_evaluate_silence:224:async (self, touchpoint:ScheduledTouchpoint)>SilenceDecision:_check_conflict_active,_load_emotional_state:","_load_emotional_state:247:async (self, user_id:UUID)>dict[str, Any] | None::","_check_conflict_active:292:async (self, user_id:UUID)>bool::","_generate_message:329:async (self, touchpoint:ScheduledTouchpoint)>str::","_send_telegram_message:346:async (self, touchpoint:ScheduledTouchpoint)>bool:_get_chat_id:","_get_chat_id:373:async (self, user_id:UUID)>int | None::","evaluate_and_schedule_for_user:396:async (self, user_id:UUID, current_time:datetime | None = None,)>ScheduledTouchpoint | None:_compute_delivery_time,_compute_hours_since_contact:","_compute_hours_since_contact:457:(self, user)>float::","_compute_delivery_time:476:(self, trigger_context:TriggerContext, current_time:datetime,)>datetime::"]]}],"nikita/touchpoints/generator.py":["p",["generate_touchpoint_message:302:async (session:\"AsyncSession\", user_id::TriggerContext, life_event:str | None = None, emotional_state:dict[str, Any] | None = None, recent_summary:str | None = None,)>str:generate:"],{"MessageGenerator":["26",["__init__:36:(self, session:\"AsyncSession\"):_load_template:","_load_template:62:(self)>None:_get_default_template:Load proactive message template.","_get_default_template:70:(self)>str::Get default template if file not found."]]}],"nikita/touchpoints/models.py":["p",["get_config_for_chapter:140:(chapter:int)>TouchpointConfig::"],{"TriggerContext":["32",["validate_time_slot_value:57:(cls, v:str | None)>str | None::Validate time_slot values.","validate_time_slot_required:64:(self)>\"TriggerContext\"::Validate time_slot is required for TIME triggers.","to_dict:70:(self)>dict[str, Any]::Convert to dictionary for storage."]],"TouchpointConfig":["75",["validate_rate_max:102:(cls, v:float, info)>float::Ensure max >= min."]],"ScheduledTouchpoint":["152",["id:184:(self)>UUID::Alias for touchpoint_id for convenience.","chapter:189:(self)>int::Get chapter from trigger context.","is_due:194:(self)>bool::Check if touchpoint is due for delivery.","mark_delivered:200:(self)>\"ScheduledTouchpoint\"::Mark touchpoint as delivered.","mark_skipped:209:(self, reason:str)>\"ScheduledTouchpoint\"::Mark touchpoint as strategically skipped."]]}],"nikita/touchpoints/scheduler.py":["p",["get_hours_since_interaction:352:(last_interaction_at:datetime | None, current_time:::"],{"TouchpointScheduler":["24",["__init__:37:(self, default_config:TouchpointConfig | None = None)::","get_config:45:(self, chapter:int)>TouchpointConfig::","evaluate_user:64:(self, user_id:UUID, chapter:int, user_timezone:str = \"UTC\", last_interaction_at:datetime | None = None, current_time:datetime | None = None, recent_touchpoints:list[ScheduledTouchpoint] | None = None,)>list[TriggerContext]:_can_trigger_after_recent,_evaluate_gap_trigger,_evaluate_time_trigger,get_config:","_can_trigger_after_recent:118:(self, config:TouchpointConfig, recent_touchpoints:list[ScheduledTouchpoint], current_time:datetime,)>bool::","_evaluate_time_trigger:151:(self, chapter:int, user_timezone:str, current_time:datetime, config:TouchpointConfig,)>TriggerContext | None:_get_current_time_slot,_get_initiation_rate,_get_user_local_time,_should_trigger:","_evaluate_gap_trigger:189:(self, chapter:int, last_interaction_at:datetime, current_time:datetime, config:TouchpointConfig,)>TriggerContext | None:_get_initiation_rate,_should_trigger:","evaluate_event_trigger:226:(self, chapter:int, event_id:str, event_type:str, event_description:str, importance:float = 0.5, emotional_intensity:float = 0.5, emotional_state:dict[str, Any] | None = None,)>TriggerContext | None:_get_initiation_rate,_should_trigger,get_config:","schedule:269:(self, user_id:UUID, trigger_context:TriggerContext, delivery_delay_minutes:int = 0, message_content:str = \"\",)>ScheduledTouchpoint::","_get_user_local_time:291:(self, utc_time:datetime, user_timezone:str)>datetime::","_get_current_time_slot:310:(self, hour:int, config:TouchpointConfig)>str | None::","_get_initiation_rate:326:(self, config:TouchpointConfig)>float::","_should_trigger:337:(self, probability:float)>bool::"]]}],"nikita/touchpoints/silence.py":["p",["should_apply_silence:259:(chapter:int, emotional_state::bool = False,)>SilenceDecision:apply_strategic_silence:"],{"SilenceDecision":["31",[]],"StrategicSilence":["46",["__init__:71:(self, custom_rates:dict[int, float] | None = None)::","apply_strategic_silence:85:(self, chapter:int, emotional_state:dict[str, Any] | None = None, conflict_active:bool = False, random_seed:int | None = None,)>SilenceDecision:_compute_emotional_modifier:","_compute_emotional_modifier:157:(self, emotional_state:dict[str, Any] | None)>float::","get_silence_rate:197:(self, chapter:int)>float::","should_skip_for_emotional_state:210:(self, emotional_state:dict[str, Any] | None)>bool::","record_skip:234:(self, decision:SilenceDecision, touchpoint_id:str | None = None,)>dict[str, Any]::"]]}],"s/configure_meta_nikita_tools.py":["p",["get_config:36:()>tuple[str, str, str]::","build_tools_config:72:(server_tool_url:str)>list[dict]::","get_current_agent_config:304:async (client:httpx.AsyncClient, api_key::str)>dict::Fetch current agent configuration.","update_agent_tools:315:async (client:httpx.AsyncClient, api_key::str, tools:list[dict])>dict::Update agent with new tools configuration.","update_agent_prompt_and_first_message:347:async (client:httpx.AsyncClient, api_key::str)>dict::Update agent system prompt and first message.","add_dynamic_variables:447:async (client:httpx.AsyncClient, api_key::str)>dict::Add dynamic variables to the agent configuration.","main:484:async ():add_dynamic_variables,build_tools_config,get_config,get_current_agent_config,update_agent_prompt_and_first_message,update_agent_tools:"]],"s/migrate_neo4j_to_supabase.py":["p",["export_neo4j_facts:45:async (user_id:str,)>dict[str, list[dict]]::","import_to_supabase:100:async (user_id:UUID, facts::bool = False,)>dict[str, int]::","validate_counts:174:(neo4j_counts:dict[str, int], supabase_counts:::Validate that Supabase counts match Neo4j per graph_type.","run_migration:197:async (user_id:str, dry_run::str | None = None,)>None:export_neo4j_facts,import_to_supabase,validate_counts:Run the full Neo4j \u2192 Supabase migration.","main:229:():run_migration:"]],"s/smoke-test.sh":["s",["check_endpoint:0:()::","check_json_field:0:()::"]],"s/test-voice-api.sh":["s",["run_test:0:()::"]],"s/verify-voice-call.py":["p",["format_markdown:593:(report:VerificationReport)>str::Format report as markdown.","main:665:async ()::"],{"CheckResult":["42",[]],"DatabaseChecks":["52",["all_passed:64:(self)>bool::Check if all database checks passed."]],"Neo4jChecks":["77",["all_passed:85:(self)>bool::Check if all Neo4j checks passed."]],"ElevenLabsChecks":["92",["all_passed:99:(self)>bool::Check if all ElevenLabs checks passed."]],"VerificationReport":["106",["overall_status:118:(self)>str::Get overall verification status.","to_dict:126:(self)>dict[str, Any]::Convert to dictionary for JSON output."]],"VoiceCallVerifier":["166",["__init__:169:(self, user_id:str, session_id:str | None = None)::","verify_all:184:async (self)>VerificationReport:_verify_database,_verify_elevenlabs,_verify_neo4j:Run all verification checks.","_verify_database:201:async (self)>None:_check_conversation,_check_engagement,_check_metrics,_check_score_history,_check_user_exists:Run database verification checks.","_check_user_exists:228:async (self, session)>None::Check if user exists and was recently updated.","_check_metrics:279:async (self, session)>None::Check user metrics exist and values.","_check_conversation:311:async (self, session)>None::Check conversation was stored.","_check_score_history:368:async (self, session)>None::Check score history was recorded.","_check_engagement:407:async (self, session)>None::Check engagement state.","_verify_neo4j:437:async (self)>None::Run Neo4j verification checks.","_verify_elevenlabs:508:async (self)>None::Run ElevenLabs API verification checks."]]}],"t/agents/text/test_deps_session.py":["p",["test_nikita_deps_has_session_field:14:()::","test_deps_session_defaults_to_none:35:()::","test_deps_with_all_fields:55:()::","test_deps_chapter_property:83:()::"]],"t/agents/text/test_ready_prompt_loading.py":["p",["user_id:21:()::","mock_session:26:()::","mock_ready_prompt:31:()::","mock_user:41:()::"],{"TestTryLoadReadyPrompt":["54",["test_with_session_returns_prompt_text:57:async (self, user_id, mock_session, mock_ready_prompt)::Uses provided session, returns prompt_text string.","test_returns_none_when_not_found:72:async (self, user_id, mock_session)::Returns None when no prompt in DB.","test_catches_exceptions_returns_none:87:async (self, user_id, mock_session)::Returns None on DB error.","test_uses_text_platform:102:async (self, user_id, mock_session)::Passes 'text' as platform argument to get_current.","test_without_session_creates_own:117:async (self, user_id, mock_ready_prompt)::Creates its own session via get_session_maker when None passed.","test_load_under_100ms:142:async (self, user_id, mock_session, mock_ready_prompt)::Mocked load should be nearly instant.","test_concurrent_reads_safe:160:async (self, user_id, mock_ready_prompt)::Multiple concurrent reads don't conflict."]],"TestBuildSystemPromptFeatureFlag":["187",["test_flag_enabled_returns_ready_prompt:190:async (self, mock_user, mock_session)::When flag ON and prompt exists, returns pre-built prompt.","test_flag_enabled_no_prompt_falls_back:213:async (self, mock_user, mock_session)::When flag ON but no prompt, falls through to legacy generation.","test_flag_disabled_skips_ready_prompt:241:async (self, mock_user, mock_session)::When flag OFF, _try_load_ready_prompt is NOT called.","test_prompt_returned_verbatim:269:async (self, mock_user, mock_session)::Prompt text returned exactly as stored, no modification."]],"TestFeatureFlagSettings":["296",["test_settings_has_unified_pipeline_flag:299:(self)::Settings model includes the feature flag.","test_flag_defaults_to_false:306:(self)::Feature flag defaults to disabled.","test_rollout_pct_hash_deterministic:313:(self)::Same user_id always gets same result."]]}],"t/agents/text/test_session_propagation.py":["p",["test_build_system_prompt_uses_provided_session:16:async ()::","test_build_system_prompt_creates_session_when_none:64:async ()::","test_prompt_logged_in_same_transaction:109:async ()::","test_no_fk_violation_with_session:151:async ():generate_prompt,track_commit:"]],"t/agents/text/test_timing.py":["p",["mock_production_settings:76:()::","mock_development_settings:84:()::"],{"TestTimingRanges":["17",["test_timing_module_importable:20:(self)::Timing module should be importable.","test_ac_4_1_1_timing_ranges_is_dict:27:(self)::AC-4.1.1: TIMING_RANGES should be a dict mapping chapter to (min, max).","test_ac_4_1_2_ch1_range:46:(self)::AC-4.1.2: Ch1 range should be 600-28800s (10min-8h).","test_ac_4_1_3_ch5_range:57:(self)::AC-4.1.3: Ch5 range should be 300-1800s (5min-30min).","test_ranges_for_all_chapters:68:(self)::All 5 chapters should have timing ranges defined."]],"TestResponseTimer":["92",["test_response_timer_class_exists:95:(self)::ResponseTimer class should exist.","test_ac_4_1_4_calculate_delay_returns_int:101:(self):mock_production_settings:AC-4.1.4: calculate_delay(chapter) should return int seconds in production.","test_calculate_delay_within_chapter_range:112:(self):mock_production_settings:calculate_delay should return values within the chapter's range in production.","test_ac_4_1_5_distribution_not_uniform:128:(self):mock_production_settings:AC-4.1.5: Distribution should be gaussian (clustered around mean) in production.","test_ac_4_1_6_jitter_prevents_exact_patterns:153:(self):mock_production_settings:AC-4.1.6: Random jitter should prevent exact repetition in production.","test_invalid_chapter_uses_default:167:(self):mock_production_settings:Invalid chapter should fall back to a default range in production.","test_development_mode_returns_zero:183:(self):mock_development_settings:Development mode should bypass delays and return 0.","test_debug_mode_returns_zero:194:(self)::Debug mode should bypass delays and return 0."]],"TestTimingProgression":["208",["test_timing_reduces_through_chapters:211:(self)::Response timing ranges should reduce as chapters progress.","test_average_delay_decreases_through_chapters:222:(self):mock_production_settings:Average delays should decrease through chapters in production."]],"TestTimingRangesByChapter":["241",["test_ch2_timing_range:244:(self)::Ch2 should have range 300-14400s (5min-4h).","test_ch3_timing_range:255:(self)::Ch3 should have range 300-7200s (5min-2h).","test_ch4_timing_range:266:(self)::Ch4 should have range 300-3600s (5min-1h)."]]}],"t/agents/text/test_type_checking.py":["p",["test_model_response_detection_uses_isinstance:17:()::","test_type_check_forward_compatible:35:()::","test_has_assistant_response_detection:71:()::","test_text_part_extraction_from_response:102:()::"]],"t/agents/voice/conftest.py":["p",["user_chapter_1:33:()>MagicMock::","user_chapter_3:53:()>MagicMock::","user_chapter_5:73:()>MagicMock::","user_boss_fight:93:()>MagicMock::","user_game_over:113:()>MagicMock::","transcript_positive:138:()>TranscriptData::","transcript_negative:187:()>TranscriptData::","transcript_fact_rich:229:()>TranscriptData::","transcript_empty:280:()>TranscriptData::","transcript_short:292:()>TranscriptData::","mock_settings:325:()>MagicMock::","mock_db_session:346:()>AsyncMock::","mock_elevenlabs_conversation_response:365:()>dict[str, Any]::","mock_elevenlabs_agent_config:407:()>dict[str, Any]::","mock_elevenlabs_client:431:(mock_elevenlabs_conversation_response, mock_elevenlabs_agent_config)>MagicMock::","mock_memory_client:523:()>MagicMock::","patch_settings:550:(mock_settings)::","patch_elevenlabs_client:557:(mock_elevenlabs_client)::","patch_memory_client:571:(mock_memory_client)::"]],"t/agents/voice/test_ready_prompt_loading.py":["p",["user_id:19:()::","user_id_str:24:(user_id)::","mock_session:29:()::","mock_ready_prompt:38:()::","mock_settings_enabled:49:()::","mock_settings_disabled:60:()::","_make_server_handler:69:(settings)::"],{"TestServerToolsReadyPrompt":["80",["test_flag_disabled_skips:83:async (self, user_id_str, mock_session, mock_settings_disabled):_make_server_handler:","test_flag_enabled_loads:90:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:","test_fallback_on_no_prompt:103:async (self, user_id_str, mock_session, mock_settings_enabled):_make_server_handler:","test_exception_handled:116:async (self, user_id_str, mock_session, mock_settings_enabled):_make_server_handler:","test_uses_voice_platform:129:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:","test_returns_string:144:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:","test_converts_str_to_uuid:157:async (self, user_id, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:user_id is str, but get_current expects UUID \u2014 verify conversion."]],"TestInboundReadyPrompt":["178",["_make_handler:180:(self)::Create InboundCallHandler with mocked VoiceSessionManager.","test_flag_disabled_skips:187:async (self, user_id, mock_settings_disabled):_make_handler:","test_flag_enabled_loads:194:async (self, user_id, mock_settings_enabled, mock_ready_prompt):_make_handler:","test_fallback_on_no_prompt:212:async (self, user_id, mock_settings_enabled):_make_handler:","test_exception_returns_none:230:async (self, user_id, mock_settings_enabled):_make_handler:","test_uses_voice_platform:248:async (self, user_id, mock_settings_enabled, mock_ready_prompt):_make_handler:","test_returns_string:267:async (self, user_id, mock_settings_enabled, mock_ready_prompt):_make_handler:"]],"TestVoiceIntegrationFlow":["290",["test_voice_text_isolation:293:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:Voice reads voice platform, not text.","test_prompt_returned_verbatim:307:async (self, user_id_str, mock_session, mock_settings_enabled):_make_server_handler:Prompt text returned exactly as stored.","test_concurrent_reads_safe:323:async (self, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:Multiple concurrent reads safe.","test_no_meta_prompt_when_ready:343:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:MetaPromptService not invoked for ready prompt loading."]],"TestVoicePerformance":["363",["test_load_under_100ms:366:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:","test_flag_check_fast:381:async (self, user_id_str, mock_session, mock_settings_disabled):_make_server_handler:","test_no_context_engine_when_ready:390:async (self, user_id_str, mock_session, mock_settings_enabled, mock_ready_prompt):_make_server_handler:ContextEngine not invoked during ready prompt load."]]}],"t/api/dependencies/test_auth_admin.py":["p",["mock_settings:22:()::","mock_settings_with_allowlist:31:()::","make_token:40:(mock_settings):_make:"],{"TestGetCurrentAdminUser":["54",["test_admin_email_returns_user_id:58:async (self, mock_settings, make_token):make_token:AC-FR001-001: @silent-agents.com email grants admin access.","test_admin_email_subdomain_access:70:async (self, mock_settings, make_token):make_token:AC-FR001-001: Any @silent-agents.com email works (e.g., dev@silent-agents.com).","test_non_admin_email_raises_403:82:async (self, mock_settings, make_token):make_token:AC-FR001-002: Other emails receive 403 Forbidden.","test_similar_domain_raises_403:95:async (self, mock_settings, make_token):make_token:AC-FR001-002: Similar domains like silent-agents.com.fake are rejected.","test_no_email_in_token_raises_403:107:async (self, mock_settings)::Token without email claim should raise 403.","test_invalid_token_raises_401:126:async (self, mock_settings)::Invalid token should raise 401 Unauthorized.","test_expired_token_raises_401:137:async (self, mock_settings)::Expired token should raise 401."]],"TestAdminAllowlist":["158",["test_explicit_admin_email_grants_access:162:async (self, mock_settings_with_allowlist)::Email in admin_emails allowlist grants admin access.","test_explicit_admin_email_case_insensitive:179:async (self, mock_settings_with_allowlist)::Admin email matching is case-insensitive.","test_non_allowlisted_email_raises_403:196:async (self, mock_settings_with_allowlist)::Email not in allowlist and not @silent-agents.com raises 403.","test_domain_still_works_with_allowlist:214:async (self, mock_settings_with_allowlist)::@silent-agents.com still works even when allowlist is configured."]]}],"t/api/routes/test_onboarding.py":["p",["mock_user:18:()::","mock_user_repo:29:(mock_user)::","app:37:(mock_user_repo)::","client:47:(app)::"],{"TestPreCallWebhook":["52",["test_pre_call_returns_user_id_for_known_phone:57:(self, client, mock_user, mock_user_repo)::Pre-call webhook should return user_id for server tools.","test_pre_call_handles_unknown_phone_gracefully:75:(self, client, mock_user_repo)::Pre-call webhook should handle unknown phone gracefully.","test_pre_call_with_user_without_name:90:(self, client, mock_user, mock_user_repo)::Pre-call should use default name if user has no name in profile.","test_pre_call_handles_empty_request_body:106:(self, client, mock_user_repo)::Pre-call should handle empty/missing caller_id.","test_pre_call_finds_user_by_called_number_for_outbound:121:(self, client, mock_user, mock_user_repo)::"]]}],"t/api/routes/test_telegram.py":["p",["mock_settings_no_webhook_secret:22:()::"],{"TestTelegramWebhook":["34",["mock_bot:38:(self)::Mock TelegramBot.","mock_command_handler:46:(self)::Mock CommandHandler.","mock_message_handler:53:(self)::Mock MessageHandler.","mock_onboarding_handler:60:(self)::Mock OnboardingHandler.","mock_otp_handler:71:(self)::Mock OTPVerificationHandler.","mock_user_repo:80:(self)::Mock UserRepository.","mock_pending_repo:88:(self)::Mock PendingRegistrationRepository.","mock_profile_repo:95:(self)::Mock ProfileRepository.","mock_onboarding_repo:102:(self)::Mock OnboardingStateRepository.","mock_registration_handler:110:(self)::Mock RegistrationHandler.","app:129:(self, mock_bot, mock_command_handler, mock_message_handler, mock_onboarding_handler, mock_otp_handler, mock_user_repo, mock_pending_repo, mock_profile_repo, mock_onboarding_repo, mock_registration_handler,)::Create test FastAPI app with dependency overrides.","client:170:(self, app)::Create test client.","test_ac_fr001_001_webhook_receives_updates:174:(self, client)::","test_ac_t006_1_command_routed_to_command_handler:198:(self, client, mock_command_handler)::","test_ac_t006_2_text_routed_to_message_handler:223:(self, client, mock_message_handler)::","test_ac_t006_3_empty_update_handled_gracefully:246:(self, client)::","test_ac_t006_4_returns_200_quickly:259:(self, client)::","test_webhook_returns_ok_status:280:(self, client)::","test_edited_message_ignored:300:(self, client, mock_message_handler)::","test_callback_query_ignored:319:(self, client, mock_command_handler)::"]],"TestSetWebhook":["337",["mock_bot:341:(self)::Mock TelegramBot.","app:348:(self, mock_bot)::Create test FastAPI app with mocked bot.","client:360:(self, app)::Create test client.","test_set_webhook_endpoint_exists:364:(self, client, mock_bot)::","test_set_webhook_calls_bot:375:(self, client, mock_bot)::","test_set_webhook_requires_https:395:(self, client, mock_bot)::"]]}],"t/api/routes/test_voice.py":["p",["app:20:()::","client:28:(app)::","mock_user:34:()::","mock_voice_context:48:()::"],{"TestVoiceInitiateEndpoint":["60",["test_initiate_returns_connection_params:64:async (self, client, mock_user)::AC-T007.1: POST /api/v1/voice/initiate returns connection params.","test_initiate_requires_user_id:92:async (self, client)::AC-T007.2: Validates user authentication - user_id required.","test_initiate_invalid_user_id_format:102:async (self, client)::AC-T007.2: Validates user authentication - user_id must be valid UUID.","test_initiate_returns_403_for_game_over:112:async (self, client, mock_user)::AC-T007.3: Returns 403 if call not available (game_over).","test_initiate_returns_404_for_unknown_user:132:async (self, client)::Returns 404 if user not found.","test_initiate_handles_service_error:152:async (self, client, mock_user)::Returns 500 for unexpected service errors."]],"TestVoiceAvailabilityEndpoint":["170",["test_availability_returns_status:173:(self, client, mock_user)::AC-T034.1: Returns availability status with reason.","test_availability_returns_chapter_rate:211:(self, client, mock_user)::AC-T034.2: Returns chapter-based availability rate.","test_availability_returns_404_for_unknown_user:242:(self, client)::Returns 404 if user not found.","test_availability_shows_game_over_blocked:265:(self, client)::AC-T034.3: Game over status blocks calls.","test_availability_shows_boss_fight_available:304:(self, client)::AC-T034.3: Boss fight status always allows calls.","test_availability_invalid_uuid_format:343:(self, client)::Returns 422 for invalid UUID format."]],"TestWebhookPostProcessing":["350",["mock_user:354:(self)::Create a mock user.","valid_signature:364:(self)::Create valid HMAC signature for testing.","test_webhook_processes_transcript:399:(self, client, mock_user)::AC-FR015-001: Webhook stores transcript and triggers post-processing.","test_webhook_skips_without_user_id:480:(self, client)::Webhook skips processing if no user_id in metadata.","test_webhook_handles_unknown_user:526:(self, client)::Webhook skips processing if user not found.","test_webhook_normalizes_agent_role:590:(self, client, mock_user):capture_add:Webhook normalizes 'agent' role to 'nikita'.","capture_add:626:(conv)::"]],"TestPreCallWebhook":["682",["test_pre_call_returns_conversation_initiation_data:689:(self, client, mock_user)::AC-T078.1: POST /api/v1/voice/pre-call handles pre-call webhook.","test_pre_call_unknown_caller_returns_dynamic_variables:743:(self, client)::","test_pre_call_unavailable_user_returns_dynamic_variables:791:(self, client, mock_user)::","test_pre_call_validates_request_schema:837:(self, client)::Validates ElevenLabs sends all required fields (caller_id, agent_id, etc.).","test_pre_call_response_format:872:(self, client, mock_user)::"]]}],"t/api/routes/test_voice_webhook.py":["p",["app:24:()::","client:32:(app)::","webhook_secret:38:()::","mock_settings:44:(webhook_secret)::","create_webhook_signature:51:(payload:str, secret::int | None = None)>str::Create valid HMAC signature for testing."],{"TestWebhookSignatureValidation":["63",["test_valid_signature_accepted:66:(self, client, webhook_secret):create_webhook_signature:AC-T054.1: Valid signature format accepted.","test_missing_signature_rejected:93:(self, client)::AC-T054.4: Missing signature returns 401.","test_invalid_signature_rejected:106:(self, client, webhook_secret)::AC-T054.3: Invalid signature returns 401.","test_expired_timestamp_rejected:127:(self, client, webhook_secret):create_webhook_signature:AC-T054.2: Timestamps older than 5 minutes rejected."]],"TestWebhookHandler":["151",["test_post_call_transcription_stored:154:(self, client, webhook_secret):create_webhook_signature:AC-FR015-001: Transcript stored when post_call_transcription received.","test_call_initiation_failure_logged:194:(self, client, webhook_secret):create_webhook_signature:AC-T053.4: call_initiation_failure events logged.","test_extracts_session_metadata:227:(self, client, webhook_secret):create_webhook_signature:AC-T053.3: Extracts transcript and session metadata.","test_unknown_event_type_handled:278:(self, client, webhook_secret):create_webhook_signature:Unknown event types should be logged but not cause errors."]],"TestWebhookNoneContentHandling":["305",["test_webhook_handles_none_content_in_transcript:314:(self, client, webhook_secret):create_webhook_signature:Webhook should filter messages with None content when building ConversationCo...","test_filter_none_content_from_messages:360:(self)::Directly test the None content filtering logic.","test_empty_transcript_after_filtering:382:(self)::Handle case where all messages have None content.","test_conversation_persisted_before_scoring:398:(self, client, webhook_secret):create_webhook_signature:Conversation should be saved even if scoring fails (session.commit before sco..."]]}],"t/conflicts/test_breakup.py":["p",["store:40:()::","config:46:()::","manager:52:(store, config)::"],{"TestBreakupRiskEnum":["62",["test_all_risk_levels_exist:65:(self)::All 4 risk levels should exist.","test_risk_from_string:72:(self)::Risk can be created from string."]],"TestThresholdResult":["83",["test_threshold_result_defaults:86:(self)::ThresholdResult has sensible defaults.","test_threshold_result_full:96:(self)::ThresholdResult can have all fields set."]],"TestBreakupResult":["115",["test_breakup_result_defaults:118:(self)::BreakupResult has sensible defaults.","test_breakup_result_triggered:126:(self)::BreakupResult can represent triggered breakup."]],"TestScoreBasedThreshold":["143",["test_healthy_score_no_risk:146:(self, manager)::Score >= 50 has no risk.","test_high_score_no_risk:154:(self, manager)::High score (75) has no risk.","test_warning_threshold_19:161:(self, manager)::Score 19 triggers warning (< 20).","test_warning_threshold_15:168:(self, manager)::Score 15 triggers warning (but not critical).","test_critical_threshold_14:175:(self, manager)::Score 14 triggers critical (< 15).","test_breakup_threshold_9:182:(self, manager)::Score 9 triggers breakup (< 10).","test_breakup_threshold_0:188:(self, manager)::Score 0 triggers breakup."]],"TestCrisisBasedThreshold":["200",["test_no_crises_healthy:203:(self, manager)::No consecutive crises is healthy.","test_one_crisis_ok:209:(self, manager, store)::One consecutive crisis doesn't trigger breakup.","test_two_crises_ok:224:(self, manager, store)::Two consecutive crises doesn't trigger breakup.","test_three_crises_triggers_breakup:239:(self, manager, store)::Three consecutive crises triggers breakup.","test_resolved_crises_dont_count:256:(self, manager, store)::Resolved crises don't count toward consecutive."]],"TestBreakupTriggering":["279",["test_trigger_breakup_returns_result:282:(self, manager)::trigger_breakup returns a BreakupResult.","test_trigger_breakup_with_conflict_type:293:(self, manager)::Breakup message can be based on conflict type.","test_trigger_breakup_resolves_active_conflict:305:(self, manager, store)::Triggering breakup resolves any active conflict.","test_trigger_breakup_no_active_conflict:324:(self, manager)::Can trigger breakup even without active conflict."]],"TestWarningMessages":["338",["test_get_warning_message_returns_string:341:(self, manager)::get_warning_message returns a non-empty string.","test_warning_messages_variety:347:(self, manager)::Multiple calls can return different messages.","test_warning_messages_theme:358:(self, manager)::Warning messages express relationship concern."]],"TestBreakupMessages":["375",["test_breakup_messages_by_type:378:(self, manager)::Breakup messages exist for each conflict type.","test_general_fallback:389:(self, manager)::Unknown conflict type falls back to general messages.","test_no_conflict_type_uses_general:399:(self, manager)::No conflict type uses general messages."]],"TestRelationshipStatus":["414",["test_status_healthy:417:(self, manager)::Healthy relationship status.","test_status_warning:427:(self, manager)::Warning relationship status.","test_status_critical:436:(self, manager)::Critical relationship status.","test_status_includes_thresholds:445:(self, manager, config)::Status includes threshold configuration.","test_status_includes_conflict_summary:452:(self, manager, store)::Status includes conflict summary.","test_status_active_conflict:471:(self, manager, store)::Status shows when there's an active conflict."]],"TestCheckAndProcess":["489",["test_check_and_process_healthy:492:(self, manager)::Healthy score returns only threshold result.","test_check_and_process_triggers_breakup:502:(self, manager)::Low score returns both results.","test_check_and_process_crisis_breakup:515:(self, manager, store)::Three crises triggers breakup via check_and_process."]],"TestGlobalManager":["541",["test_get_breakup_manager_returns_instance:544:(self)::get_breakup_manager() returns a BreakupManager.","test_get_breakup_manager_singleton:549:(self)::get_breakup_manager() returns same instance."]],"TestEdgeCases":["565",["test_exactly_at_warning_threshold:568:(self, manager, config)::Score exactly at warning threshold (20) is NOT warning.","test_one_below_warning_threshold:573:(self, manager, config)::Score one below warning threshold triggers warning.","test_exactly_at_breakup_threshold:578:(self, manager, config)::Score exactly at breakup threshold (10) is NOT breakup.","test_one_below_breakup_threshold:584:(self, manager, config)::Score one below breakup threshold triggers breakup.","test_negative_score_breakup:589:(self, manager)::Negative score (theoretically) still triggers breakup.","test_max_score_healthy:594:(self, manager)::Max score (100) is healthy.","test_score_priority_over_crises:599:(self, manager, store)::Score-based breakup takes priority in reason."]]}],"t/conflicts/test_detection.py":["p",["store:29:()::","detector:35:(store)::","detector_with_llm:41:(store)::","basic_context:50:()::"],{"TestDetectionContext":["63",["test_create_basic_context:66:(self)::Test creating a basic context.","test_create_full_context:77:(self)::Test creating context with all fields.","test_chapter_bounds:95:(self)::Test chapter validation bounds."]],"TestDetectionResult":["110",["test_empty_result:113:(self)::Test empty detection result.","test_result_with_triggers:120:(self)::Test result with triggers.","test_highest_severity_multiple:131:(self)::Test highest severity with multiple triggers."]],"TestTriggerDetector":["157",["test_create_detector:160:(self, store)::Test creating a detector.","test_detect_sync_no_triggers:166:(self, detector, basic_context)::Test sync detection with no triggers.","test_chapter_sensitivity_applied:172:(self, detector)::Test that chapter sensitivity affects severity."]],"TestDismissiveDetection":["198",["test_short_message_detected:201:(self, detector)::Test detection of short messages.","test_single_word_higher_severity:214:(self, detector)::Test that single word has higher severity than multi-word short.","test_very_short_highest_severity:235:(self, detector)::Test that 1-3 char messages have highest severity.","test_consecutive_short_detected:247:(self, detector)::Test detection of consecutive short messages.","test_normal_message_no_dismissive:265:(self, detector)::Test that normal messages don't trigger dismissive."]],"TestNeglectDetection":["280",["test_long_gap_detected:283:(self, detector)::Test detection of long time gaps.","test_no_neglect_recent_interaction:297:(self, detector)::Test no neglect for recent interaction.","test_gap_severity_increases_with_time:312:(self, detector)::Test that gap severity increases with longer gaps.","test_short_session_detected:336:(self, detector)::Test detection of short conversation sessions.","test_no_neglect_first_interaction:354:(self, detector)::Test no neglect when last_interaction is None."]],"TestJealousyDetection":["375",["test_friend_mention_detected:378:(self, detector)::Test detection of friend mentions.","test_ex_mention_detected:390:(self, detector)::Test detection of ex mentions.","test_date_mention_detected:402:(self, detector)::Test detection of date mentions.","test_attractive_mention_detected:414:(self, detector)::Test detection of attractive person mentions.","test_multiple_keywords_higher_severity:426:(self, detector)::Test that multiple keywords increase severity.","test_no_jealousy_normal_message:448:(self, detector)::Test no jealousy for normal messages."]],"TestBoundaryDetection":["464",["test_sexual_keyword_detected:467:(self, detector)::Test detection of sexual keywords.","test_come_over_detected:479:(self, detector)::Test detection of 'come over' requests.","test_early_chapter_higher_severity:491:(self, detector)::Test that early chapters have higher boundary sensitivity.","test_no_boundary_normal_message:514:(self, detector)::Test no boundary for normal messages."]],"TestChapterSensitivity":["530",["test_chapter_1_multiplier:533:(self, detector)::Test chapter 1 has 1.5x multiplier.","test_chapter_3_baseline:545:(self, detector)::Test chapter 3 has 1.0x multiplier (baseline).","test_chapter_5_reduced:556:(self, detector)::Test chapter 5 has 0.8x multiplier."]],"TestAsyncDetection":["571",["test_detect_async_basic:575:async (self, detector, basic_context)::Test async detection.","test_detect_async_stores_triggers:582:async (self, detector, store)::Test that async detection stores triggers.","test_detect_async_multiple_trigger_types:596:async (self, detector)::Test detection of multiple trigger types at once."]],"TestEdgeCases":["615",["test_empty_message:618:(self, detector)::Test handling of empty message.","test_whitespace_only_message:629:(self, detector)::Test handling of whitespace-only message.","test_very_long_message:639:(self, detector)::Test handling of very long message.","test_special_characters:649:(self, detector)::Test handling of special characters.","test_case_insensitive_keywords:659:(self, detector)::Test that keyword matching is case insensitive."]]}],"t/conflicts/test_escalation.py":["p",["store:33:()::","manager:39:(store)::","subtle_conflict:45:(store)::","direct_conflict:55:(store)::","crisis_conflict:67:(store)::","old_subtle_conflict:79:(store)::"],{"TestEscalationResult":["95",["test_default_result:98:(self)::Test default escalation result.","test_escalated_result:106:(self)::Test escalated result.","test_natural_resolution_result:116:(self)::Test natural resolution result."]],"TestEscalationManagerCreation":["128",["test_create_manager:131:(self, store)::Test creating a manager.","test_create_with_custom_config:137:(self, store)::Test creating with custom config."]],"TestEscalationTimeline":["149",["test_subtle_escalation_threshold:152:(self, manager)::Test SUBTLE level has 2-6h escalation threshold.","test_direct_escalation_threshold:159:(self, manager)::Test DIRECT level has 12-24h escalation threshold.","test_crisis_no_escalation:166:(self, manager)::Test CRISIS level has no further escalation.","test_escalation_not_yet_due:171:(self, manager, subtle_conflict)::Test no escalation when time not met.","test_escalation_due:178:(self, manager, old_subtle_conflict)::Test escalation when threshold exceeded.","test_subtle_to_direct_escalation:184:(self, manager, store)::Test escalation from SUBTLE to DIRECT.","test_direct_to_crisis_escalation:204:(self, manager, store)::Test escalation from DIRECT to CRISIS."]],"TestNaturalResolution":["229",["test_subtle_natural_resolution_probability:232:(self, manager)::Test SUBTLE level has 30% natural resolution.","test_direct_natural_resolution_probability:237:(self, manager)::Test DIRECT level has 10% natural resolution.","test_crisis_no_natural_resolution:242:(self, manager)::Test CRISIS level has 0% natural resolution.","test_natural_resolution_possible:247:(self, manager, store)::Test that natural resolution can occur.","test_natural_resolution_updates_store:266:(self, manager, store)::Test that natural resolution updates the store."]],"TestAcknowledgment":["290",["test_acknowledge_resets_timer:293:(self, manager, store, subtle_conflict)::Test that acknowledgment resets escalation timer.","test_acknowledge_increments_attempts:304:(self, manager, store, subtle_conflict)::Test that acknowledgment increments resolution attempts.","test_acknowledge_resolved_conflict_fails:313:(self, manager, store)::Test that acknowledging resolved conflict fails."]],"TestForceEscalation":["330",["test_force_escalate_subtle:333:(self, manager, store, subtle_conflict)::Test force escalation from SUBTLE.","test_force_escalate_direct:339:(self, manager, store, direct_conflict)::Test force escalation from DIRECT.","test_force_escalate_crisis_fails:345:(self, manager, crisis_conflict)::Test force escalation from CRISIS fails.","test_force_escalate_resolved_fails:351:(self, manager, store)::Test force escalation of resolved conflict fails."]],"TestCheckEscalation":["369",["test_check_resolved_conflict:372:(self, manager, store)::Test checking resolved conflict.","test_check_crisis_no_escalation:387:(self, manager, crisis_conflict)::Test checking CRISIS level conflict.","test_check_returns_time_until:393:(self, manager, subtle_conflict)::Test that check returns time until escalation."]],"TestTimelineInformation":["403",["test_get_timeline_active:406:(self, manager, subtle_conflict)::Test getting timeline for active conflict.","test_get_timeline_resolved:416:(self, manager, store)::Test getting timeline for resolved conflict.","test_get_timeline_crisis:430:(self, manager, crisis_conflict)::Test getting timeline for CRISIS conflict."]],"TestNextLevel":["442",["test_subtle_next_is_direct:445:(self, manager)::Test SUBTLE \u2192 DIRECT.","test_direct_next_is_crisis:450:(self, manager)::Test DIRECT \u2192 CRISIS.","test_crisis_next_is_none:455:(self, manager)::Test CRISIS \u2192 None."]],"TestGlobalManager":["464",["test_get_escalation_manager_returns_instance:467:(self)::Test that get_escalation_manager returns instance.","test_get_escalation_manager_same_instance:472:(self)::Test that same instance is returned."]],"TestEdgeCases":["482",["test_time_in_level_uses_correct_reference:485:(self, manager, store)::Test that time in level uses correct reference time.","test_natural_resolution_deterministic:510:(self, manager, store)::Test that natural resolution is deterministic per conflict-hour."]]}],"t/conflicts/test_generation.py":["p",["store:34:()::","generator:40:(store)::","basic_context:46:()::","dismissive_trigger:56:()::","jealousy_trigger:66:()::","boundary_trigger:76:()::","trust_trigger:86:()::"],{"TestGenerationContext":["98",["test_create_basic_context:101:(self)::Test creating a basic context.","test_create_full_context:108:(self)::Test creating context with all fields."]],"TestGenerationResult":["134",["test_empty_result:137:(self)::Test result when no conflict generated.","test_result_with_conflict:144:(self)::Test result with generated conflict."]],"TestConflictGenerator":["171",["test_create_generator:174:(self, store)::Test creating a generator.","test_generate_no_triggers:180:(self, generator, basic_context)::Test generation with no triggers.","test_generate_single_trigger:186:(self, generator, basic_context, jealousy_trigger)::Test generation with single trigger.","test_generate_multiple_triggers:195:(self, generator, basic_context, dismissive_trigger, jealousy_trigger)::Test generation with multiple triggers.","test_generate_stores_conflict:203:(self, generator, store, basic_context, jealousy_trigger)::Test that generated conflict is stored."]],"TestTriggerPrioritization":["217",["test_low_severity_filtered:220:(self, generator, basic_context)::Test that low severity triggers are filtered.","test_highest_severity_prioritized:231:(self, generator, basic_context)::Test that highest severity trigger is prioritized.","test_max_three_triggers:250:(self, generator, basic_context)::Test that at most 3 triggers are used."]],"TestSeverityCalculation":["268",["test_severity_based_on_trigger_type:271:(self, generator, basic_context)::Test severity varies by trigger type.","test_low_relationship_increases_severity:298:(self, generator, jealousy_trigger)::Test that low relationship score increases severity.","test_recent_conflicts_increase_severity:324:(self, generator, jealousy_trigger)::Test that recent conflicts increase severity.","test_later_chapters_reduce_severity:361:(self, generator, jealousy_trigger)::Test that later chapters slightly reduce severity."]],"TestConflictTypeSelection":["390",["test_trigger_maps_to_conflict_type:393:(self, generator, basic_context)::Test that triggers map to correct conflict types.","test_higher_priority_type_selected:421:(self, generator, basic_context)::Test that higher priority conflict types are selected.","test_avoids_same_type_in_succession:440:(self, generator)::Test that same conflict type is avoided if recent."]],"TestCooldownAndSkip":["479",["test_cooldown_prevents_conflict:482:(self, generator, jealousy_trigger)::Test that cooldown period prevents new conflicts.","test_after_cooldown_allows_conflict:494:(self, generator, jealousy_trigger)::Test that conflicts are allowed after cooldown.","test_high_relationship_prevents_minor_conflict:505:(self, generator)::Test that high relationship prevents minor conflicts.","test_high_relationship_allows_major_conflict:521:(self, generator, trust_trigger)::Test that high severity conflicts bypass high relationship protection.","test_existing_conflict_prevents_new:531:(self, generator, store, jealousy_trigger)::Test that existing active conflict prevents new one."]],"TestShouldGenerateConflict":["553",["test_should_generate_true:556:(self, generator, basic_context, jealousy_trigger)::Test should_generate returns true when conditions met.","test_should_generate_false_no_triggers:562:(self, generator, basic_context)::Test should_generate returns false with no triggers.","test_should_generate_false_existing_conflict:568:(self, generator, store, jealousy_trigger)::Test should_generate returns false with existing conflict."]],"TestGlobalGenerator":["584",["test_get_conflict_generator_returns_instance:587:(self)::Test that get_conflict_generator returns instance.","test_get_conflict_generator_same_instance:592:(self)::Test that same instance is returned."]],"TestEdgeCases":["602",["test_empty_trigger_list:605:(self, generator, basic_context)::Test handling empty trigger list.","test_all_triggers_below_threshold:610:(self, generator, basic_context)::Test when all triggers are below threshold.","test_severity_clamped_to_one:623:(self, generator)::Test that severity is clamped to 1.0 max."]]}],"t/conflicts/test_integration.py":["p",["store:36:()::","config:42:()::","detector:48:(store)::","generator:54:(store, config)::","escalation_mgr:60:(store, config)::","resolution_mgr:66:(store, config)::","breakup_mgr:72:(store, config)::"],{"TestFullLifecycle":["82",["test_detect_generate_resolve_happy_path:87:(self, store, detector, generator, resolution_mgr)::Happy path: Detect trigger \u2192 Generate conflict \u2192 Resolve successfully.","test_detect_generate_escalate_resolve:126:(self, store, detector, generator, escalation_mgr, resolution_mgr)::Conflict escalates before resolution.","test_poor_resolution_leads_to_escalation:166:(self, store, detector, generator, escalation_mgr, resolution_mgr)::Poor resolution attempts lead to escalation."]],"TestBreakupScenarios":["190",["test_low_score_triggers_breakup:193:(self, store, breakup_mgr)::Score below threshold triggers breakup.","test_three_crises_triggers_breakup:205:(self, store, breakup_mgr)::Three consecutive crises trigger breakup.","test_resolved_crises_prevent_breakup:226:(self, store, breakup_mgr, resolution_mgr)::Resolving crises prevents breakup."]],"TestEscalationTimeline":["256",["test_check_escalation_timeline:259:(self, store, escalation_mgr)::Get escalation timeline for a conflict.","test_acknowledge_resets_timer:274:(self, store, escalation_mgr)::Acknowledging a conflict resets the escalation timer."]],"TestConflictPipeline":["296",["test_chapter_sensitivity_affects_detection:299:(self, store, detector, config)::Chapter affects trigger detection sensitivity.","test_relationship_score_affects_generation:324:(self, store, generator)::Relationship score affects conflict severity."]],"TestStoreIntegration":["359",["test_store_summary_updates:362:(self, store, generator, resolution_mgr)::Conflict summary updates correctly through lifecycle.","test_multiple_users_isolated:382:(self, store, breakup_mgr)::Different users have isolated conflict data."]],"TestEdgeCases":["401",["test_multiple_triggers_same_message:404:(self, detector, store)::Message with multiple trigger types.","test_no_trigger_in_neutral_message:423:(self, detector, store)::Neutral message doesn't trigger conflict.","test_cooldown_prevents_rapid_conflicts:435:(self, store, generator)::Cooldown prevents generating conflicts too quickly."]]}],"t/conflicts/test_resolution.py":["p",["store:39:()::","config:45:()::","manager:51:(store, config)::","active_conflict:57:(store)::"],{"TestResolutionQualityEnum":["72",["test_all_quality_levels_exist:75:(self)::All 5 quality levels should exist.","test_quality_from_string:83:(self)::Quality can be created from string."]],"TestResolutionContext":["94",["test_context_creation:97:(self, active_conflict)::Context can be created with required fields.","test_context_with_history:107:(self, active_conflict)::Context can track previous attempts."]],"TestResolutionEvaluation":["124",["test_evaluation_defaults:127:(self)::Evaluation has sensible defaults.","test_evaluation_full:137:(self)::Evaluation can have all fields."]],"TestRuleBasedEvaluation":["155",["test_excellent_apology:158:(self, manager, active_conflict)::Sincere apology with understanding = EXCELLENT.","test_good_apology:168:(self, manager, active_conflict)::Thoughtful apology = GOOD.","test_adequate_acknowledgment:178:(self, manager, active_conflict)::Minimal acknowledgment = ADEQUATE.","test_poor_dismissive:188:(self, manager, active_conflict)::Dismissive response = POOR.","test_poor_short_message:198:(self, manager, active_conflict)::Very short message = POOR.","test_harmful_blaming:207:(self, manager, active_conflict)::Blaming response = HARMFUL.","test_harmful_gaslighting:217:(self, manager, active_conflict)::Gaslighting response = HARMFUL.","test_longer_message_without_keywords_adequate:226:(self, manager, active_conflict)::Longer message without clear indicators = ADEQUATE."]],"TestResolutionTypeDetermination":["241",["test_excellent_gives_full_resolution:244:(self, manager, active_conflict)::EXCELLENT quality = FULL resolution.","test_good_gives_partial_resolution:254:(self, manager, active_conflict)::GOOD quality = PARTIAL resolution.","test_adequate_gives_partial_resolution:264:(self, manager, active_conflict)::ADEQUATE quality = PARTIAL resolution.","test_poor_gives_failed_resolution:274:(self, manager, active_conflict)::POOR quality = FAILED resolution.","test_harmful_gives_failed_resolution:284:(self, manager, active_conflict)::HARMFUL quality = FAILED resolution."]],"TestEscalationLevelMultipliers":["300",["test_subtle_level_full_multiplier:303:(self, manager, store)::SUBTLE level has 1.0 multiplier.","test_direct_level_reduced_multiplier:320:(self, manager, store)::DIRECT level has 0.8 multiplier.","test_crisis_level_lowest_multiplier:340:(self, manager, store)::CRISIS level has 0.5 multiplier.","test_crisis_only_excellent_resolves_fully:360:(self, manager, store)::At CRISIS level, only EXCELLENT quality resolves fully."]],"TestSeverityReductionMapping":["394",["test_excellent_full_reduction:397:(self, manager, active_conflict)::EXCELLENT = 1.0 (full) severity reduction.","test_good_moderate_reduction:406:(self, manager, active_conflict)::GOOD = 0.6 severity reduction.","test_adequate_small_reduction:415:(self, manager, active_conflict)::ADEQUATE = 0.3 severity reduction.","test_poor_no_reduction:424:(self, manager, active_conflict)::POOR = 0.0 severity reduction.","test_harmful_negative_reduction:433:(self, manager, active_conflict)::HARMFUL = -0.2 (increases severity)."]],"TestResolveMethod":["448",["test_resolve_reduces_severity:451:(self, manager, store, active_conflict)::resolve() reduces conflict severity.","test_resolve_full_marks_resolved:468:(self, manager, store, active_conflict)::FULL resolution marks conflict as resolved.","test_resolve_harmful_increases_severity:482:(self, manager, store, active_conflict)::HARMFUL response increases severity.","test_resolve_increments_attempts:498:(self, manager, store, active_conflict)::Each resolution attempt increments counter.","test_resolve_nonexistent_returns_none:515:(self, manager)::Resolving nonexistent conflict returns None.","test_resolve_already_resolved_returns_none:527:(self, manager, store, active_conflict)::Can't resolve already resolved conflict.","test_partial_resolution_at_zero_severity_resolves:542:(self, manager, store)::Partial resolution that reduces severity to 0 resolves conflict."]],"TestGlobalManager":["570",["test_get_resolution_manager_returns_instance:573:(self, monkeypatch)::get_resolution_manager() returns a ResolutionManager.","test_get_resolution_manager_singleton:584:(self, monkeypatch)::get_resolution_manager() returns same instance."]],"TestAsyncEvaluation":["602",["test_async_evaluate_falls_back_to_rules:606:async (self, store, config)::async evaluate falls back to rules when LLM disabled.","test_async_evaluate_with_llm_error_falls_back:626:async (self, store, config)::async evaluate falls back to rules on LLM error."]]}],"t/conftest.py":["p",["clear_singleton_caches:21:()::"]],"t/context/test_store.py":["p",["mock_session:22:()::","sample_package:29:()::"],{"TestPackageStoreInit":["41",["test_init_with_session:44:(self, mock_session)::AC-T003.1: Store initializes with session."]],"TestPackageStoreGet":["50",["test_get_returns_none_when_not_found:54:async (self, mock_session)::AC-T003.1: get() returns None when no package exists.","test_get_returns_package_when_found:68:async (self, mock_session, sample_package)::AC-T003.1: get() returns package when found.","test_get_latency_under_50ms:86:async (self, mock_session, sample_package)::AC-T003.4: get() completes in <50ms (mocked)."]],"TestPackageStoreSet":["105",["test_set_stores_package:109:async (self, mock_session, sample_package)::AC-T003.1: set() stores package.","test_set_with_custom_ttl:118:async (self, mock_session, sample_package)::AC-T003.3: set() supports custom TTL.","test_set_default_ttl_24h:128:async (self, mock_session, sample_package)::AC-T003.3: Default TTL is 24 hours."]],"TestPackageStoreDelete":["143",["test_delete_returns_true_when_deleted:147:async (self, mock_session)::AC-T003.1: delete() returns True when package deleted.","test_delete_returns_false_when_not_found:160:async (self, mock_session)::AC-T003.1: delete() returns False when no package existed."]],"TestPackageStoreCleanup":["172",["test_cleanup_expired_returns_count:176:async (self, mock_session)::AC-T003.3: cleanup_expired() removes expired packages."]],"TestPackageStoreExists":["189",["test_exists_returns_true_when_found:193:async (self, mock_session)::AC-T003.1: exists() returns True when package exists.","test_exists_returns_false_when_not_found:205:async (self, mock_session)::AC-T003.1: exists() returns False when no package."]]}],"t/db/integration/conftest.py":["p",["_get_database_url:38:()>str | None::","can_reach_database:64:(max_retries:int = 2)>tuple[bool, str]::","test_database_url:164:()>str:_get_database_url:","engine:176:async (test_database_url:str)::","session_maker:197:async (engine)>async_sessionmaker[AsyncSession]::","session:210:async (session_maker)>AsyncGenerator[AsyncSession, None]:session_maker:","clean_session:235:async (session_maker)>AsyncGenerator[AsyncSession, None]:session_maker:","test_user_id:246:()>str::","test_telegram_id:252:()>int::","can_reach_supabase:259:()>bool::"]],"t/db/repositories/test_memory_fact_repository.py":["p",["user_id:12:()::","mock_session:17:()::","repo:27:(mock_session)::"],{"TestAddFact":["31",["test_add_fact_creates_memory_fact:35:async (self, repo, mock_session, user_id)::add_fact inserts a new MemoryFact.","test_add_fact_flushes_session:61:async (self, repo, mock_session, user_id)::add_fact flushes to persist.","test_add_fact_with_conversation_id:74:async (self, repo, mock_session, user_id)::add_fact supports optional conversation_id."]],"TestSemanticSearch":["90",["test_semantic_search_executes_query:94:async (self, repo, mock_session, user_id)::semantic_search calls execute with a query.","test_semantic_search_with_graph_type_filter:110:async (self, repo, mock_session, user_id)::semantic_search respects graph_type filter.","test_semantic_search_with_min_confidence:126:async (self, repo, mock_session, user_id)::semantic_search respects min_confidence filter."]],"TestGetRecent":["141",["test_get_recent_returns_list:145:async (self, repo, mock_session, user_id)::get_recent returns list of MemoryFacts ordered by created_at DESC.","test_get_recent_with_graph_type:157:async (self, repo, mock_session, user_id)::get_recent filters by graph_type."]],"TestDeactivate":["168",["test_deactivate_sets_inactive:172:async (self, repo, mock_session)::deactivate sets is_active=False.","test_deactivate_with_superseded_by:194:async (self, repo, mock_session)::deactivate sets superseded_by when provided.","test_deactivate_returns_false_for_missing:217:async (self, repo, mock_session)::deactivate returns False if fact not found."]],"TestGetByUser":["226",["test_get_by_user_returns_list:230:async (self, repo, mock_session, user_id)::get_by_user returns all facts for a user.","test_get_by_user_with_graph_type:242:async (self, repo, mock_session, user_id)::get_by_user filters by graph_type.","test_get_by_user_active_only_default:253:async (self, repo, mock_session, user_id)::get_by_user defaults to active_only=True."]]}],"t/db/repositories/test_ready_prompt_repository.py":["p",["user_id:12:()::","mock_session:17:()::","repo:27:(mock_session)::"],{"TestGetCurrent":["31",["test_get_current_returns_prompt:35:async (self, repo, mock_session, user_id)::get_current returns active prompt for user/platform.","test_get_current_returns_none_when_empty:58:async (self, repo, mock_session, user_id)::get_current returns None when no prompt exists."]],"TestSetCurrent":["69",["test_set_current_deactivates_old_and_inserts_new:73:async (self, repo, mock_session, user_id)::set_current deactivates old prompt and inserts new.","test_set_current_with_conversation_id:98:async (self, repo, mock_session, user_id)::set_current stores conversation_id.","test_set_current_flushes:115:async (self, repo, mock_session, user_id)::set_current flushes to persist."]],"TestGetHistory":["128",["test_get_history_returns_list:132:async (self, repo, mock_session, user_id)::get_history returns past prompts.","test_get_history_with_platform_filter:144:async (self, repo, mock_session, user_id)::get_history filters by platform.","test_get_history_with_limit:155:async (self, repo, mock_session, user_id)::get_history respects limit parameter."]]}],"t/e2e/conftest.py":["p",["event_loop:31:()::","backend_url:39:()>str::","webhook_url:48:(backend_url:str)>str::Get the webhook endpoint URL.","auth_confirm_url:54:(backend_url:str)>str::Get the auth confirm endpoint URL.","supabase_url:60:()>str::","test_email:69:()>str::","test_telegram_id:75:()>int::","browser_context:84:async ()::","page:99:async (browser_context)::","webhook_simulator:110:(webhook_url:str)>TelegramWebhookSimulator::Create a webhook simulator for testing.","unique_telegram_id:116:()>int::","unique_test_email:126:(unique_telegram_id:int)>str::Generate a unique test email based on Telegram ID.","test_data:132:()>WebhookTestData::","mock_agent:144:():mock_agent,test_something:","mock_mode:156:()>bool::","cleanup_pending_registration:165:async (unique_telegram_id:int)::","cleanup_test_user:186:async (unique_telegram_id:int)::"]],"t/e2e/full_journey/test_full_journey.py":["p",["run_manual_journey:293:()::"],{"TestFullJourneyE2E":["39",["orchestrator:43:(self)::Create journey orchestrator.","context:49:(self)::Create fresh journey context.","evidence:54:(self, context)::Create evidence collector.","test_context_creation:60:(self, orchestrator)::Test context is created with valid test IDs.","test_phase1_instructions_generated:69:(self, orchestrator, context)::Test Phase 1 instructions are complete.","test_phase2_instructions_generated:78:(self, orchestrator, context)::Test Phase 2 instructions include real messages.","test_phase3_instructions_generated:85:(self, orchestrator, context)::Test Phase 3 instructions include portal steps.","test_phase4_instructions_generated:94:(self, orchestrator, context)::Test Phase 4 instructions include verification.","test_cleanup_instructions_generated:101:(self, orchestrator, context)::Test cleanup instructions generated.","test_all_instructions_organized:108:(self, orchestrator, context)::Test all instructions are organized by phase.","test_evidence_phase_tracking:120:(self, evidence)::Test evidence tracks phases correctly.","test_evidence_verification_recording:131:(self, evidence)::Test evidence records verifications.","test_evidence_report_generation:145:(self, evidence)::Test report generation.","test_phase1_otp_extraction:164:(self)::Test Phase 1 OTP extraction.","test_phase2_sample_messages:179:(self)::Test Phase 2 has sample messages.","test_phase3_magic_link_extraction:186:(self)::Test Phase 3 magic link extraction.","test_phase4_chapter_calculation:200:(self)::Test Phase 4 chapter calculation."]],"TestJourneyManualExecution":["217",["orchestrator:226:(self)::","test_print_all_instructions:230:(self, orchestrator, capsys)::Print all instructions for manual execution.","test_cleanup_sql_generated:242:(self, orchestrator)::Test cleanup SQL is properly generated."]],"TestJourneyIntegration":["260",["orchestrator:268:(self)::","test_phase1_webhook_connectivity:274:async (self, orchestrator)::Test webhook endpoint is reachable."]]}],"t/e2e/helpers/gmail_helper.py":["p",["extract_magic_link_from_html:308:(html_content:str)>Optional[str]::","extract_tokens_from_url:322:(url:str)>dict::"],{"GmailMCPClient":["25",["__init__:35:(self, test_email:str)::","wait_for_otp:51:async (self, timeout_seconds:int = 90, poll_interval:float = 3.0, since_timestamp:Optional[float] = None, search_fn:Optional[Callable] = None, read_fn:Optional[Callable] = None,)>OTPEmail::","wait_for_magic_link:123:async (self, timeout_seconds:int = 60, poll_interval:float = 3.0, since_timestamp:Optional[float] = None, search_fn:Optional[Callable] = None, read_fn:Optional[Callable] = None,)>MagicLinkEmail::"]],"GmailHelper":["183",["__init__:189:(self, test_email:str)::","wait_for_magic_link:203:async (self, timeout_seconds:int = 60, poll_interval:float = 2.0, since_timestamp:Optional[float] = None)>str:_extract_magic_link,_get_latest_magic_link_email:","_get_latest_magic_link_email:249:async (self, since_timestamp:float)>Optional[str]::","_extract_magic_link:280:(self, email_content:str)>Optional[str]::"]]}],"t/e2e/helpers/mock_agent_helper.py":["p",["is_mock_mode:171:()>bool::","get_mock_response_for_message:188:(message:str)>str::"],{"MockAgentResponse":["24",[]],"MockAgentHelper":["32",["patch_generate_response:58:(cls, response_text:Optional[str] = None, delay_seconds:float = 0.0,):mock_generate,patch_generate_response:","mock_generate:74:async (*args, **kwargs)>str::","patch_message_handler:90:(cls, response_text:Optional[str] = None,):mock_handle:","mock_handle:98:async (*args, **kwargs)>None::","create_mock_deps:116:(cls, user_id:str = \"test-user-id\", telegram_id:int = 999888777, game_status:str = \"active\", chapter:int = 1, relationship_score:float = 50.0,)>MagicMock::","patch_get_nikita_agent_for_user:152:(cls, mock_deps:Optional[MagicMock] = None,):create_mock_deps,mock_get_agent:","mock_get_agent:157:async (user_id):create_mock_deps:"]]}],"t/e2e/helpers/supabase_helper.py":["p",["create_pending_sql:551:(telegram_id:int, email::sql_create_pending:Convenience function to create pending registration SQL.","cleanup_test_data_sql:556:(telegram_id:int, email:::Generate SQL to cleanup all test data.","verify_user_created_sql:572:(telegram_id:int)>str::Generate SQL to verify user was created.","verify_pending_deleted_sql:577:(email:str)>str::Generate SQL to verify pending registration was deleted."],{"PendingRegistration":["25",[]],"User":["34",[]],"Conversation":["44",[]],"ScoreHistoryEntry":["54",[]],"UserMetrics":["65",[]],"VerificationResult":["76",[]],"SupabaseHelper":["85",["__init__:88:(self)::Initialize Supabase helper.","sql_create_pending:99:(telegram_id:int, email:str)>str::Generate SQL to create a pending registration.","sql_get_pending_by_email:117:(email:str)>str::Generate SQL to get pending registration by email.","sql_delete_pending:127:(telegram_id:int)>str::Generate SQL to delete a pending registration.","sql_get_user_by_telegram_id:135:(telegram_id:int)>str::Generate SQL to get user by Telegram ID.","sql_get_user_by_supabase_id:147:(supabase_user_id:str)>str::Generate SQL to get user by Supabase user ID.","sql_delete_user_by_telegram_id:159:(telegram_id:int)>str::Generate SQL to delete user and related data by Telegram ID.","sql_count_users_by_telegram_id:172:(telegram_id:int)>str::Generate SQL to count users with a specific Telegram ID.","sql_update_user_telegram_id:184:(supabase_user_id:str, telegram_id:Optional[int])>str::Generate SQL to update user's Telegram ID.","sql_create_test_user:199:(user_id:str, telegram_id:Optional[int] = None, supabase_user_id:Optional[str] = None)>str::Generate SQL to create a test user (for portal-first scenario).","sql_get_conversations_by_user:218:(user_id:str)>str::Generate SQL to get all conversations for a user.","sql_get_conversations_by_telegram_id:229:(telegram_id:int)>str::Generate SQL to get all conversations for a user by Telegram ID.","sql_get_latest_conversation:241:(telegram_id:int)>str::Generate SQL to get the latest conversation for a user.","sql_get_conversation_messages:254:(conversation_id:str)>str::Generate SQL to get all messages in a conversation.","sql_count_messages_by_telegram_id:264:(telegram_id:int)>str::Generate SQL to count total messages for a user.","sql_get_user_metrics:277:(telegram_id:int)>str::Generate SQL to get full user metrics.","sql_get_score_history:289:(telegram_id:int, limit:int = 10)>str::Generate SQL to get score history for a user.","sql_get_latest_score:302:(telegram_id:int)>str::Generate SQL to get the latest score for a user.","sql_full_cleanup_by_telegram_id:315:(telegram_id:int)>str::Generate SQL to delete ALL data for a test user (comprehensive cleanup).","sql_full_cleanup_by_email:346:(email:str)>str::Generate SQL to delete ALL data for a test user by email.","sql_cleanup_test_range:373:(min_telegram_id:int = 900000000, max_telegram_id:int = 999999999)>str::Generate SQL to cleanup ALL test users in the test ID range.","sql_verify_registration_complete:412:(telegram_id:int)>str::Generate SQL to verify complete registration (user exists, pending deleted).","sql_verify_conversation_exists:424:(telegram_id:int)>str::Generate SQL to verify at least one conversation exists.","sql_get_test_users_count:439:()>str::Generate SQL to count test users in the test range.","generate_test_telegram_id:450:()>int::Generate a unique test Telegram ID in the 900M-999M range.","generate_test_user_id:457:()>str::Generate a unique test user UUID.","generate_test_email:462:(base_email:str, telegram_id:int)>str::","parse_mcp_result:478:(result:Any)>List[Dict[str, Any]]::","verify_registration_from_result:503:(result:Any)>VerificationResult:parse_mcp_result:"]]}],"t/e2e/helpers/telegram_helper.py":["p",["generate_test_telegram_id:218:()>int::","generate_test_email:227:(telegram_id:int)>str::Generate a test email address for a given Telegram ID."],{"TelegramUser":["28",[]],"TelegramChat":["39",[]],"TelegramWebhookSimulator":["48",["__init__:63:(self, webhook_url:str = WEBHOOK_URL, secret_token:Optional[str] = None,)::","_next_update_id:75:(self)>int::Generate next unique update ID.","_next_message_id:80:(self)>int::Generate next unique message ID.","_build_user:85:(self, telegram_id:int)>dict::Build Telegram user object.","_build_chat:96:(self, telegram_id:int)>dict::Build Telegram chat object (private chat = same ID as user).","_build_message:106:(self, telegram_id:int, text:str)>dict:_build_chat,_build_user,_next_message_id:Build Telegram message object.","_build_update:116:(self, telegram_id:int, text:str)>dict:_build_message,_next_update_id:","_build_command_update:131:(self, telegram_id:int, command:str, args:Optional[str] = None,)>dict:_build_update:","send_message:155:async (self, text:str, telegram_id:int, timeout:float = 30.0,)>httpx.Response:_build_headers,_build_update:","send_command:183:async (self, command:str, telegram_id:int, args:Optional[str] = None, timeout:float = 30.0,)>httpx.Response:_build_command_update,_build_headers:","_build_headers:206:(self)>dict::Build request headers including optional secret token."]],"WebhookTestData":["235",["create:242:(cls)>\"WebhookTestData\":generate_test_email,generate_test_telegram_id:Create new test data with unique IDs."]]}],"t/e2e/manual_journey_test.py":["p",["query_supabase:93:async (query:str, client:::Execute a raw SQL query via Supabase REST API.","call_backend:105:async (path:str, method::dict = None, client:httpx.AsyncClient = None)>dict::Call backend API endpoint.","main:129:async ():add_section,call_backend,generate_report,print_section:"],{"JourneyReport":["46",["__init__:49:(self)::","add_section:53:(self, title:str, content:dict)::","print_section:60:(self, title:str, data:Any)::Print a section immediately for real-time visibility.","generate_report:70:(self)>str::Generate final markdown report."]]}],"t/e2e/portal/conftest.py":["p",["login_page:22:()::","dashboard_page:28:()::","conversations_page:34:()::","test_email:40:()::"]],"t/e2e/test_otp_gmail_e2e.py":["p",["otp_test:256:()::","test_context:263:():create:","run_manual_otp_test:356:async ():create,step1_send_start,step2_send_email,step3_build_otp_search_query:","print_test_summary:414:(ctx:OTPTestContext)::Print test summary."],{"OTPTestContext":["60",["create:80:(cls, base_email:str = TEST_EMAIL_BASE)>\"OTPTestContext\"::Create a new test context with unique IDs."]],"OTPFlowE2ETest":["92",["__init__:116:(self, secret_token:Optional[str] = None)::Initialize E2E test orchestrator.","step1_send_start:122:async (self, ctx:OTPTestContext)>bool::Step 1: Send /start command to initiate registration.","step2_send_email:140:async (self, ctx:OTPTestContext)>bool::Step 2: Send email to trigger OTP.","step3_build_otp_search_query:164:(self, ctx:OTPTestContext)>str::","step3_parse_otp_from_email:176:(self, ctx:OTPTestContext, email_body:str)>Optional[str]::","step4_submit_otp:193:async (self, ctx:OTPTestContext)>bool::Step 4: Submit OTP code to complete registration.","step5_build_verification_query:215:(self, ctx:OTPTestContext)>str::","step5_verify_result:224:(self, ctx:OTPTestContext, result:Any)>VerificationResult::","build_cleanup_query:243:(self, ctx:OTPTestContext)>str::"]],"TestOTPFlowSteps":["268",["test_step1_start_command:272:async (self, otp_test, test_context):step1_send_start:Test /start command sends successfully.","test_step2_email_submission:278:async (self, otp_test, test_context):step1_send_start,step2_send_email:Test email submission sends successfully.","test_step3_otp_parsing:286:(self, otp_test, test_context):step3_parse_otp_from_email:Test OTP code extraction from email body.","test_step5_verification_parsing:302:(self, otp_test, test_context):create,step5_verify_result:Test verification result parsing."]],"TestOTPFlowIntegration":["317",["test_otp_flow_steps_1_and_2:332:async (self, otp_test, test_context):build_cleanup_query,step1_send_start,step2_send_email,step3_build_otp_search_query:Test steps 1-2: /start and email submission."]]}],"t/emotional_state/test_computation.py":["p",["user_id:35:()::","computer:41:()::"],{"TestBaseStateCalculation":["46",["test_morning_increases_arousal:49:(self, computer)::AC-T005.2: Morning should increase arousal.","test_night_decreases_arousal:57:(self, computer)::AC-T005.2: Night should decrease arousal.","test_late_night_low_arousal:65:(self, computer)::Late night (2 AM) should have lowest arousal.","test_weekend_increases_valence:72:(self, computer)::AC-T005.3: Weekend should increase valence.","test_friday_anticipation:80:(self, computer)::Friday should have anticipation boost.","test_weekday_neutral_valence:97:(self, computer)::Weekday should have neutral valence.","test_all_dimensions_returned:106:(self, computer)::Base state should return all 4 dimensions.","test_values_clamped_to_range:116:(self, computer)::All values should be in 0.0-1.0 range."]],"TestLifeEventDeltas":["131",["test_positive_event_increases_valence:134:(self, computer)::Positive event should increase valence.","test_negative_event_decreases_valence:145:(self, computer)::Negative event should decrease valence.","test_multiple_events_combined:156:(self, computer)::Multiple events should be combined.","test_deltas_clamped:168:(self, computer)::Deltas should be clamped to prevent extreme swings.","test_empty_events_no_change:180:(self, computer)::Empty events list should return zero deltas."]],"TestConversationDeltas":["190",["test_supportive_increases_valence_intimacy:193:(self, computer)::AC-T007.4: Supportive tone increases valence and intimacy.","test_dismissive_decreases_valence_intimacy:201:(self, computer)::AC-T007.4: Dismissive tone decreases valence and intimacy.","test_romantic_increases_intimacy:209:(self, computer)::Romantic tone should increase intimacy significantly.","test_cold_decreases_intimacy:217:(self, computer)::Cold tone should decrease intimacy.","test_playful_increases_arousal:225:(self, computer)::Playful tone should increase arousal.","test_anxious_increases_arousal_decreases_dominance:233:(self, computer)::Anxious tone affects arousal and dominance.","test_neutral_no_effect:241:(self, computer)::Neutral tone should have minimal effect.","test_multiple_tones_combined:249:(self, computer)::Multiple tones should be combined.","test_conversation_deltas_clamped:257:(self, computer)::Conversation deltas should be clamped."]],"TestRelationshipModifier":["267",["test_chapter_1_lower_intimacy:270:(self, computer)::AC-T008.2: Chapter 1 has lower baseline intimacy.","test_chapter_5_higher_intimacy:277:(self, computer)::AC-T008.2: Chapter 5 has higher baseline intimacy.","test_high_score_positive_valence:284:(self, computer)::AC-T008.3: High relationship score increases valence.","test_low_score_negative_valence:290:(self, computer)::AC-T008.3: Low relationship score decreases valence.","test_neutral_score_no_valence_change:296:(self, computer)::Neutral score (0.5) should have no valence effect."]],"TestStateComputerOrchestration":["303",["test_compute_with_no_inputs:306:(self, computer, user_id)::Should compute base state with no additional inputs.","test_compute_with_current_state:316:(self, computer, user_id)::Should modify existing state.","test_compute_with_life_events:335:(self, computer, user_id)::Should apply life event deltas.","test_compute_with_conversation_tones:349:(self, computer, user_id)::Should apply conversation tone deltas.","test_compute_with_relationship_modifier:361:(self, computer, user_id)::Should apply relationship modifiers.","test_compute_combines_all_sources:381:(self, computer, user_id)::AC-T009.2: Should combine all sources.","test_compute_preserves_conflict_state:404:(self, computer, user_id)::Should preserve conflict state from current.","test_compute_clamps_all_dimensions:417:(self, computer, user_id)::AC-T009.3: All dimensions should be clamped to 0.0-1.0.","test_compute_with_specific_timestamp:433:(self, computer, user_id)::Should use provided timestamp for base state."]],"TestGetStateComputer":["444",["test_returns_state_computer:447:(self)::Should return StateComputer instance.","test_singleton_same_instance:452:(self)::Should return same instance."]]}],"t/emotional_state/test_conflict.py":["p",["user_id:28:()::","detector:34:()::"],{"TestConflictDetectorClass":["39",["test_has_threshold_maps:42:(self, detector)::AC-T011.1: Should have threshold maps.","test_has_detect_method:50:(self, detector)::AC-T011.2: Should have detect_conflict_state method.","test_supports_four_conflict_states:55:(self, detector)::AC-T011.3: Should support 4 conflict states.","test_has_valid_transitions:59:(self, detector)::Should have valid transitions map."]],"TestPassiveAggressiveDetection":["66",["test_no_ignored_messages:69:(self, detector, user_id)::Should not detect passive-aggressive with 0 ignored messages.","test_one_ignored_message:78:(self, detector, user_id)::Should not detect passive-aggressive with 1 ignored message.","test_two_ignored_messages_triggers:87:(self, detector, user_id)::AC-T012.1: Should detect passive-aggressive with 2+ ignored messages.","test_many_ignored_messages:96:(self, detector, user_id)::Should detect passive-aggressive with many ignored messages."]],"TestColdDetection":["107",["test_high_valence_not_cold:110:(self, detector, user_id)::Should not detect cold with high valence.","test_neutral_valence_not_cold:119:(self, detector, user_id)::Should not detect cold with neutral valence.","test_threshold_valence_not_cold:128:(self, detector, user_id)::Should not detect cold at exactly 0.3 valence.","test_low_valence_triggers_cold:137:(self, detector, user_id)::AC-T012.2: Should detect cold with valence < 0.3.","test_very_low_valence:146:(self, detector, user_id)::Should detect cold with very low valence."]],"TestVulnerableDetection":["157",["test_no_intimacy_drop:160:(self, detector, user_id)::Should not detect vulnerable without intimacy drop.","test_small_intimacy_drop:168:(self, detector, user_id)::Should not detect vulnerable with small intimacy drop.","test_threshold_intimacy_drop:176:(self, detector, user_id)::AC-T012.3: Should detect vulnerable with intimacy drop >= 0.2.","test_large_intimacy_drop:184:(self, detector, user_id)::Should detect vulnerable with large intimacy drop."]],"TestExplosiveDetection":["193",["test_high_arousal_only_not_explosive:196:(self, detector, user_id)::Should not detect explosive with only high arousal.","test_low_valence_only_not_explosive:206:(self, detector, user_id)::Should not detect explosive with only low valence.","test_explosive_requires_both_conditions:216:(self, detector, user_id)::AC-T012.4: Should detect explosive with arousal >= 0.8 AND valence < 0.3.","test_explosive_boundary_conditions:228:(self, detector, user_id)::Should not detect explosive at exactly boundary.","test_explosive_requires_valid_transition:240:(self, detector, user_id)::Should not jump to explosive from NONE."]],"TestStateTransitions":["253",["test_none_to_passive_aggressive_valid:256:(self, detector)::Can transition from NONE to PASSIVE_AGGRESSIVE.","test_none_to_cold_valid:262:(self, detector)::Can transition from NONE to COLD.","test_none_to_vulnerable_valid:266:(self, detector)::Can transition from NONE to VULNERABLE.","test_none_to_explosive_invalid:270:(self, detector)::AC-T013.2: Cannot jump from NONE to EXPLOSIVE.","test_cold_to_explosive_valid:276:(self, detector)::Can escalate from COLD to EXPLOSIVE.","test_vulnerable_to_explosive_valid:280:(self, detector)::Can escalate from VULNERABLE to EXPLOSIVE.","test_explosive_to_none_invalid:286:(self, detector)::Cannot de-escalate directly from EXPLOSIVE to NONE.","test_explosive_to_cold_valid:292:(self, detector)::AC-T013.3: Can de-escalate from EXPLOSIVE to COLD.","test_cold_to_none_valid:296:(self, detector)::Can de-escalate from COLD to NONE.","test_same_state_valid:300:(self, detector)::Staying in same state is valid."]],"TestApplyTransition":["306",["test_apply_valid_transition:309:(self, detector, user_id)::Should apply valid transition.","test_apply_invalid_transition_raises:323:(self, detector, user_id)::Should raise ValueError for invalid transition."]],"TestCheckEscalation":["334",["test_no_escalation_needed:337:(self, detector, user_id)::Should not escalate when no conflict detected.","test_escalation_detected:352:(self, detector, user_id)::Should detect escalation when triggers met.","test_escalation_from_cold_to_explosive:366:(self, detector, user_id)::Should escalate from cold to explosive when conditions met."]],"TestCheckDeEscalation":["381",["test_no_de_escalation_from_none:384:(self, detector, user_id)::Should not de-escalate from NONE.","test_de_escalation_from_explosive:395:(self, detector, user_id)::Should de-escalate from EXPLOSIVE with positive interaction.","test_de_escalation_from_cold:410:(self, detector, user_id)::Should de-escalate from COLD with positive interaction and high valence.","test_de_escalation_from_vulnerable:425:(self, detector, user_id)::Should de-escalate from VULNERABLE with support.","test_de_escalation_from_passive_aggressive:440:(self, detector, user_id)::Should de-escalate from PASSIVE_AGGRESSIVE with engagement.","test_no_de_escalation_without_positive_interaction:455:(self, detector, user_id)::Should not de-escalate without positive interaction (in most cases)."]],"TestGetConflictDetector":["471",["test_returns_conflict_detector:474:(self)::Should return ConflictDetector instance.","test_singleton_same_instance:479:(self)::Should return same instance."]],"TestSeverityOrder":["486",["test_severity_order_exists:489:(self, detector)::Should have severity order.","test_none_is_lowest_severity:494:(self, detector)::NONE should be lowest severity.","test_explosive_is_highest_severity:498:(self, detector)::EXPLOSIVE should be highest severity.","test_get_severity_method:502:(self, detector)::Should get correct severity levels."]],"TestTriggerReasons":["508",["test_passive_aggressive_trigger_reason:511:(self, detector, user_id)::Should generate passive-aggressive trigger reason.","test_cold_trigger_reason:518:(self, detector, user_id)::Should generate cold trigger reason.","test_explosive_trigger_reason:524:(self, detector, user_id)::Should generate explosive trigger reason."]]}],"t/emotional_state/test_recovery.py":["p",["user_id:30:()::","manager:36:()::"],{"TestRecoveryManagerClass":["41",["test_has_can_recover_method:44:(self, manager)::AC-T015.2: Should have can_recover method.","test_has_apply_recovery_method:49:(self, manager)::AC-T015.3: Should have apply_recovery method.","test_has_approach_rates:54:(self, manager)::Should have approach rates configured.","test_has_decay_rates:60:(self, manager)::Should have decay rates configured."]],"TestCanRecover":["66",["test_cannot_recover_from_none:69:(self, manager, user_id)::Should not recover from NONE state.","test_can_recover_from_conflict:77:(self, manager, user_id)::Should allow recovery from conflict state.","test_cannot_recover_with_dismissive:85:(self, manager, user_id)::Should block recovery with dismissive approach.","test_can_recover_with_apologetic:93:(self, manager, user_id)::Should allow recovery with apologetic approach.","test_can_recover_with_validating:101:(self, manager, user_id)::Should allow recovery with validating approach.","test_can_recover_with_defensive:109:(self, manager, user_id)::Should allow (but hard) recovery with defensive approach."]],"TestApplyRecovery":["119",["test_apply_recovery_with_apologetic:122:(self, manager, user_id)::Should apply recovery with apologetic approach.","test_apply_recovery_blocked_by_dismissive:135:(self, manager, user_id)::Should block recovery with dismissive approach.","test_apply_recovery_updates_progress:148:(self, manager, user_id)::Should update recovery progress in metadata.","test_apply_recovery_accumulates_progress:160:(self, manager, user_id)::Should accumulate progress across multiple interactions.","test_apply_recovery_de_escalates_when_threshold_met:172:(self, manager, user_id)::Should de-escalate when threshold is met.","test_apply_recovery_de_escalates_explosive_to_cold:189:(self, manager, user_id)::Should de-escalate EXPLOSIVE to COLD, not directly to NONE.","test_apply_recovery_intensity_affects_amount:206:(self, manager, user_id)::Should scale recovery by intensity."]],"TestRecoveryRateCalculation":["219",["test_apologetic_fastest_recovery:222:(self, manager)::AC-T016.2: Apology = fastest recovery.","test_validating_fast_recovery:233:(self, manager)::AC-T016.2: Validation = fast recovery.","test_dismissive_no_recovery:244:(self, manager)::AC-T016.3: Dismissive = no recovery.","test_defensive_minimal_recovery:252:(self, manager)::Defensive = minimal recovery.","test_explosive_harder_to_recover:263:(self, manager)::Explosive state should be harder to recover from.","test_rate_depends_on_approach:274:(self, manager)::AC-T016.1: Recovery rate depends on user's approach."]],"TestDecayBasedRecovery":["293",["test_no_decay_from_none:296:(self, manager, user_id)::Should not decay from NONE state.","test_no_decay_during_cooldown:307:(self, manager, user_id)::Should not decay during cooldown period.","test_decay_after_cooldown:321:(self, manager, user_id)::Should apply decay after cooldown period.","test_decay_rate_configurable_per_state:336:(self, manager)::AC-T017.2: Decay rate configurable per conflict state.","test_explosive_slowest_decay:344:(self, manager)::AC-T017.1: Explosive should have slowest decay (needs 6+ days).","test_passive_aggressive_fastest_decay:354:(self, manager)::Passive-aggressive should have fastest decay (2-3 days).","test_decay_updates_metadata:363:(self, manager, user_id)::Should update decay metadata.","test_full_decay_recovery_after_days:379:(self, manager, user_id)::Should fully recover after enough days of decay."]],"TestDeEscalationPaths":["402",["test_explosive_de_escalates_to_cold:405:(self, manager)::EXPLOSIVE should de-escalate to COLD.","test_cold_de_escalates_to_none:410:(self, manager)::COLD should de-escalate to NONE.","test_vulnerable_de_escalates_to_none:415:(self, manager)::VULNERABLE should de-escalate to NONE.","test_passive_aggressive_de_escalates_to_none:420:(self, manager)::PASSIVE_AGGRESSIVE should de-escalate to NONE.","test_none_stays_none:425:(self, manager)::NONE should stay NONE."]],"TestEstimatedRecoveryTime":["431",["test_no_time_from_none:434:(self, manager, user_id)::Should return zero time from NONE.","test_faster_with_apologetic:445:(self, manager, user_id)::Should estimate faster recovery with apologetic approach.","test_dismissive_falls_back_to_decay:457:(self, manager, user_id)::Should use decay estimate for dismissive approach."]],"TestGetRecoveryManager":["470",["test_returns_recovery_manager:473:(self)::Should return RecoveryManager instance.","test_singleton_same_instance:478:(self)::Should return same instance."]],"TestRecoveryResult":["485",["test_default_values:488:(self)::Should have sensible defaults.","test_custom_values:497:(self)::Should accept custom values."]]}],"t/emotional_state/test_store.py":["p",["user_id:55:()::","mock_session:61:()::","mock_session_factory:70:(mock_session):factory:","store:79:(mock_session_factory)::"],{"MockMappings":["30",["__init__:33:(self, rows:list[dict[str, Any]] | None = None)::","first:36:(self)>dict[str, Any] | None::","all:39:(self)>list[dict[str, Any]]::"]],"MockResult":["43",["__init__:46:(self, rows:list[dict[str, Any]] | None = None, rowcount:int = 0)::","mappings:50:(self)>MockMappings::"]],"TestStateStoreGetCurrentState":["84",["test_get_current_state_returns_latest:88:async (self, store, mock_session, user_id)::Should return the most recent state for a user.","test_get_current_state_returns_none_if_not_found:117:async (self, store, mock_session, user_id)::Should return None if no state exists for user.","test_get_current_state_handles_conflict_state:126:async (self, store, mock_session, user_id)::Should properly deserialize conflict states."]],"TestStateStoreSaveState":["156",["test_save_state_inserts_new_record:160:async (self, store, mock_session, user_id)::Should insert a new state record.","test_save_state_with_conflict:177:async (self, store, mock_session, user_id)::Should save state with conflict information.","test_save_state_with_metadata:193:async (self, store, mock_session, user_id)::Should save state with metadata."]],"TestStateStoreUpdateState":["207",["test_update_state_creates_if_not_exists:211:async (self, store, mock_session, user_id)::Should create new state if none exists.","test_update_state_modifies_existing:233:async (self, store, mock_session, user_id)::Should update existing state.","test_update_state_partial_update:270:async (self, store, mock_session, user_id)::Should only update specified fields."]],"TestStateStoreHistory":["307",["test_get_state_history:311:async (self, store, mock_session, user_id)::Should return historical states.","test_get_conflict_history:354:async (self, store, mock_session, user_id)::Should return only states with conflict."]],"TestStateStoreDelete":["382",["test_delete_state:386:async (self, store, mock_session)::Should delete a specific state.","test_delete_state_not_found:397:async (self, store, mock_session)::Should return False if state not found.","test_delete_user_states:407:async (self, store, mock_session, user_id)::Should delete all states for a user."]],"TestStateStoreGetState":["416",["test_get_state_by_id:420:async (self, store, mock_session)::Should retrieve state by ID.","test_get_state_not_found:449:async (self, store, mock_session)::Should return None if state not found."]],"TestGetStateStore":["458",["test_get_state_store_returns_instance:461:(self)::Should return StateStore instance.","test_get_state_store_singleton:466:(self)::Should return same instance on multiple calls."]]}],"t/engine/decay/test_calculator.py":["p",["create_mock_user:25:(*, chapter:int = 1, relationship_score::datetime | None = None, game_status:str = \"active\",)>MagicMock::Create a mock user with specified attributes."],{"TestDecayCalculatorIsOverdue":["36",["test_is_overdue_no_interaction_returns_true:39:(self):create_mock_user:User with no last_interaction_at is considered overdue.","test_is_overdue_within_grace_returns_false:46:(self):create_mock_user:User within grace period is NOT overdue.","test_is_overdue_past_grace_returns_true:55:(self):create_mock_user:User past grace period IS overdue.","test_is_overdue_just_inside_grace_returns_false:64:(self):create_mock_user:User just inside grace period is NOT overdue.","test_is_overdue_respects_chapter_grace_periods:84:(self, chapter:int, grace_hours:int):create_mock_user:Each chapter has correct grace period from GRACE_PERIODS."]],"TestDecayCalculatorCalculateDecay":["99",["test_calculate_decay_within_grace_returns_none:102:(self):create_mock_user:No decay if user is within grace period.","test_calculate_decay_past_grace_returns_decay_result:116:(self):create_mock_user:Returns DecayResult when user is past grace.","test_calculate_decay_correct_amount_ch1:134:(self):create_mock_user:Ch1: 2h overdue \u00d7 0.8%/h = 1.6% decay.","test_calculate_decay_correct_amount_ch1_10h_overdue:155:(self):create_mock_user:Ch1: 10h overdue \u00d7 0.8%/h = 8.0% decay.","test_calculate_decay_uses_chapter_specific_rates:185:(self, chapter:int, rate:Decimal):create_mock_user:Each chapter uses correct decay rate from DECAY_RATES.","test_calculate_decay_capped_at_max:206:(self):create_mock_user:Decay capped at MAX_DECAY_PER_CYCLE (default 20%).","test_calculate_decay_configurable_max:226:(self):create_mock_user:Max decay can be configured.","test_calculate_decay_floor_at_zero:246:(self):create_mock_user:Score floors at 0 when decay exceeds score.","test_calculate_decay_game_over_triggered_at_zero:267:(self):create_mock_user:game_over_triggered is True when score reaches 0.","test_calculate_decay_no_game_over_when_score_above_zero:285:(self):create_mock_user:game_over_triggered is False when score remains above 0.","test_calculate_decay_includes_hours_overdue:304:(self):create_mock_user:DecayResult includes hours_overdue for audit trail.","test_calculate_decay_includes_timestamp:322:(self):create_mock_user:DecayResult includes calculation timestamp.","test_calculate_decay_sets_decay_reason:342:(self):create_mock_user:DecayResult includes decay_reason='inactivity'."]],"TestDecayCalculatorDefaultMaxDecay":["359",["test_default_max_decay_is_20:362:(self)::Default MAX_DECAY_PER_CYCLE is 20%.","test_custom_max_decay_accepted:368:(self)::Custom max_decay_per_cycle is accepted."]]}],"t/engine/decay/test_processor.py":["p",["create_mock_user:29:(*, user_id=None, chapter:int = 1, relationship_score::datetime | None = None, game_status:str = \"active\",)>MagicMock::Create a mock user with specified attributes."],{"TestDecayProcessorShouldSkipUser":["40",["test_skip_boss_fight_status:44:async (self):create_mock_user:AC-T7.2: Skip users in boss_fight status.","test_skip_game_over_status:58:async (self):create_mock_user:AC-T7.2: Skip users in game_over status.","test_skip_won_status:72:async (self):create_mock_user:AC-T7.2: Skip users in won status.","test_process_active_status:86:async (self):create_mock_user:AC-T5.2: Process users with active status."]],"TestDecayProcessorProcessUser":["100",["test_process_user_applies_decay_when_overdue:104:async (self):create_mock_user:AC-T5.4: Apply decay to users past grace period.","test_process_user_returns_none_when_within_grace:134:async (self):create_mock_user:AC-T5.4: No decay for users within grace period.","test_process_user_logs_decay_event:162:async (self):create_mock_user:AC-T6.1: Log decay event to score_history.","test_process_user_skips_boss_fight:193:async (self):create_mock_user:AC-T7.1/T7.2: Skip users in boss_fight status."]],"TestDecayProcessorProcessAll":["221",["test_process_all_returns_summary:225:async (self):create_mock_user:AC-T5.5: Return summary with processed, decayed, game_overs counts.","test_process_all_filters_inactive_statuses:267:async (self)::AC-T5.2: Filter out boss_fight, game_over, won statuses.","test_process_all_tracks_game_overs:290:async (self):create_mock_user:AC-T5.5: Track game_overs count in summary."]],"TestDecayProcessorBatchSize":["328",["test_default_batch_size:332:async (self)::AC-T5.3: Default batch size is reasonable.","test_configurable_batch_size:345:async (self)::AC-T5.3: Batch size is configurable."]],"TestDecayProcessorNoCatchUp":["359",["test_no_catch_up_decay_after_boss_resolved:363:async (self):create_mock_user:AC-T7.3: No catch-up on missed decay after boss resolved."]]}],"t/memory/test_supabase_memory.py":["p",["mock_session:26:()::","mock_embedding_client:37:()::","user_id:51:()::","memory:57:(mock_session, mock_embedding_client, user_id)::"],{"TestSupabaseMemoryInit":["71",["test_init_stores_session:74:(self, mock_session)::","test_init_stores_openai_key:85:(self, mock_session)::","test_async_context_manager:95:(self, mock_session)::SupabaseMemory supports async with statement."]],"TestAddFact":["108",["test_add_fact_returns_memory_fact:112:async (self, memory)::add_fact returns the created MemoryFact.","test_add_fact_generates_embedding:131:async (self, memory)::add_fact calls _generate_embedding internally.","test_add_fact_passes_all_fields_to_repo:147:async (self, memory, user_id)::add_fact forwards all arguments to repository.","test_add_fact_with_metadata:175:async (self, memory)::add_fact passes metadata to repository."]],"TestSearch":["193",["test_search_returns_facts:197:async (self, memory)::search returns list of dicts with fact, graph_type, created_at.","test_search_generates_query_embedding:219:async (self, memory)::search calls _generate_embedding with the query text.","test_search_filters_by_graph_types:229:async (self, memory)::search filters by graph_types when provided.","test_search_respects_limit:243:async (self, memory)::search passes limit to repository.","test_search_respects_min_confidence:254:async (self, memory)::search passes min_confidence to repository.","test_search_all_graphs_by_default:265:async (self, memory)::search queries all 3 graphs when graph_types is None.","test_search_returns_distance_scores:276:async (self, memory)::search results include distance score for ranking."]],"TestGetRecent":["293",["test_get_recent_returns_facts:297:async (self, memory)::get_recent returns list of MemoryFact records.","test_get_recent_filters_by_graph_type:310:async (self, memory)::get_recent passes graph_type filter.","test_get_recent_respects_limit:320:async (self, memory)::get_recent passes limit."]],"TestGetContextForPrompt":["330",["test_returns_formatted_context:334:async (self, memory)::Returns format: [date] (label) fact.","test_empty_results_returns_message:359:async (self, memory)::Returns default message when no memories found.","test_graph_type_labels:366:async (self, memory)::Maps graph types to human-readable labels."]],"TestFindSimilar":["384",["test_find_similar_returns_match:388:async (self, memory)::Returns existing fact if similarity > threshold.","test_find_similar_returns_none_below_threshold:404:async (self, memory)::Returns None if no facts are similar enough.","test_find_similar_empty_results:418:async (self, memory)::Returns None when no results at all."]],"TestDeduplication":["428",["test_add_fact_supersedes_duplicate:432:async (self, memory)::If similar fact exists, old fact is deactivated and new one points to it.","test_add_fact_no_dedup_when_no_similar:462:async (self, memory)::If no similar fact, just inserts normally (no deactivation)."]],"TestEmbeddingGeneration":["483",["test_generate_embedding_calls_openai:487:async (self, memory)::_generate_embedding calls OpenAI embeddings API.","test_generate_embedding_uses_correct_model:508:async (self, memory)::Uses text-embedding-3-small model."]],"TestBatchEmbedding":["529",["test_batch_embed_multiple_texts:533:async (self, memory)::generate_embeddings_batch handles multiple texts."]],"TestEmbeddingRetry":["563",["test_retries_on_api_error:567:async (self, memory)::Retries up to 3 times on OpenAI API failure."]],"TestEmbeddingFailure":["594",["test_raises_after_max_retries:598:async (self)::Raises EmbeddingError after 3 failed attempts."]],"TestNikitaMemoryCompat":["622",["test_add_user_fact:626:async (self, memory)::add_user_fact wraps add_fact with graph_type='user'.","test_get_user_facts:637:async (self, memory)::get_user_facts returns list of fact strings from user graph.","test_add_relationship_episode:651:async (self, memory)::add_relationship_episode wraps add_fact with graph_type='relationship'.","test_get_relationship_episodes:660:async (self, memory)::get_relationship_episodes returns list of episode strings.","test_add_nikita_event:672:async (self, memory)::add_nikita_event wraps add_fact with graph_type='nikita'.","test_get_nikita_events:681:async (self, memory)::get_nikita_events returns list of event strings from nikita graph.","test_search_memory_compat:693:async (self, memory)::search_memory wraps search for NikitaMemory compatibility."]],"TestFactory":["707",["test_factory_creates_instance:711:async (self)::Factory returns initialized SupabaseMemory."]]}],"t/pipeline/conftest.py":["p",["make_context:25:():_factory,make_context,test_something:","mock_session:69:():test_stage:","rich_context:93:(make_context):make_context,test_prompt_generation:","mock_conversation:170:():make_context,test_extraction:","mock_user:205:():make_context,test_game_state:","mock_haiku:251:():test_prompt_enrichment:","mock_embeddings:265:():test_memory_embedding:","mock_extraction:279:():test_extraction:","mock_prompt_repo:293:():test_prompt_storage:"]],"t/pipeline/test_e2e_unified.py":["p",["make_pipeline:58:(session, stages_config)::"],{"FakeStage":["31",["__init__:36:(self, name:str, critical:bool = False, fail:bool = False, timeout:bool = False, delay:float = 0, ctx_updates:dict | None = None, session=None):__init__:","_run:45:async (self, ctx:PipelineContext)>dict | None::"]],"TestFullPipelineE2E":["84",["session:88:(self)::","all_stages_config:96:(self)::9 stages matching real pipeline definition.","test_full_text_pipeline:132:async (self, session, all_stages_config):make_pipeline:AC-X.2.1: Full 9-stage text pipeline completes successfully.","test_full_voice_pipeline:146:async (self, session, all_stages_config):make_pipeline:AC-X.2.2: Full 9-stage voice pipeline works identically.","test_context_propagation_across_stages:156:async (self, session, all_stages_config):make_pipeline:Context data set by earlier stages is available to later stages.","test_stage_timings_recorded:168:async (self, session, all_stages_config):make_pipeline:Each stage's execution time is recorded.","test_pipeline_with_user_and_conversation_ids:178:async (self, session, all_stages_config):make_pipeline:Pipeline correctly propagates conversation_id and user_id."]],"TestCriticalFailureE2E":["191",["session:195:(self)::","test_extraction_failure_stops_pipeline:203:async (self, session):make_pipeline:Critical extraction failure aborts before any other stage runs.","test_memory_update_failure_stops_pipeline:219:async (self, session):make_pipeline:Second critical stage failure aborts after extraction succeeds."]],"TestNonCriticalFailureE2E":["236",["session:240:(self)::","test_life_sim_failure_continues:248:async (self, session):make_pipeline:Non-critical life_sim failure doesn't stop pipeline.","test_multiple_non_critical_failures:265:async (self, session):make_pipeline:Multiple non-critical failures logged, pipeline still succeeds."]],"TestMixedFailureE2E":["287",["session:291:(self)::","test_non_critical_fails_then_critical_fails:299:async (self, session):make_pipeline:Non-critical failure followed by critical failure \u2192 pipeline fails.","test_all_non_critical_fail_critical_succeed:316:async (self, session):make_pipeline:All non-critical fail but critical stages succeed \u2192 pipeline succeeds."]],"TestEmptyPipelineE2E":["339",["session:343:(self)::","test_empty_pipeline:351:async (self, session)::Pipeline with no stages succeeds immediately.","test_single_stage_pipeline:360:async (self, session):make_pipeline:Pipeline with one stage works."]],"TestTimeoutE2E":["372",["session:376:(self)::","test_non_critical_timeout_continues:384:async (self, session)::Non-critical stage timeout doesn't stop pipeline.","test_critical_timeout_stops_pipeline:402:async (self, session)::Critical stage timeout aborts pipeline."]]}],"t/pipeline/test_models.py":["p",["_make_ctx:17:(**kwargs)>PipelineContext::"],{"TestPipelineContext":["28",["test_create_minimal:32:(self):_make_ctx:","test_create_voice_platform:39:(self):_make_ctx:","test_defaults_empty_collections:43:(self):_make_ctx:","test_defaults_zero_values:54:(self):_make_ctx:","test_record_stage_error:66:(self):_make_ctx:","test_record_multiple_errors:73:(self):_make_ctx:","test_record_stage_timing:79:(self):_make_ctx:","test_total_duration_ms:86:(self):_make_ctx:","test_total_duration_empty:93:(self):_make_ctx:","test_extraction_fields:97:(self):_make_ctx:","test_game_state_fields:106:(self):_make_ctx:","test_user_state_fields:115:(self):_make_ctx:","test_mutable_defaults_isolation:128:(self):_make_ctx:Each instance gets its own mutable containers."]],"TestPipelineResult":["138",["test_succeeded:142:(self):_make_ctx:","test_failed:153:(self):_make_ctx:","test_stages_total_default:162:(self):_make_ctx:","test_context_preserved:167:(self):_make_ctx:","test_failed_zero_stages:174:(self):_make_ctx:"]],"TestStageResultImport":["181",["test_stage_result_importable:184:(self)::","test_stage_result_fail:191:(self)::","test_stage_error_importable:197:(self)::"]]}],"t/pipeline/test_orchestrator.py":["p",["_make_orchestrator:54:(stages:list[tuple[str, FakeStage, bool]])>PipelineOrchestrator::Create orchestrator with injected fake stages."],{"FakeStage":["25",["__init__:35:(self, name:str = \"fake\", success:bool = True, error:str | None = None, raise_error:Exception | None = None, delay:float = 0.0,)::","execute:43:async (self, context:PipelineContext)::"]],"TestPipelineOrchestratorHappyPath":["61",["test_all_stages_succeed:63:async (self):_make_orchestrator:AC-2.2.1: Runs stages sequentially, all succeed.","test_all_stages_called_in_order:79:async (self):_make_orchestrator,execute:AC-2.2.1: Stages execute in declared order.","execute:84:async (self, context)::","test_platform_passed_to_context:98:async (self):_make_orchestrator:Context receives the platform parameter."]],"TestPipelineOrchestratorCriticalFailure":["107",["test_critical_stage_failure_stops_pipeline:109:async (self):_make_orchestrator:AC-2.2.2: Critical stage failure stops pipeline.","test_critical_stage_exception_stops_pipeline:125:async (self):_make_orchestrator:AC-2.2.2: Unhandled exception in critical stage stops pipeline."]],"TestPipelineOrchestratorNonCriticalFailure":["141",["test_non_critical_failure_continues:143:async (self):_make_orchestrator:AC-2.2.3: Non-critical stage failure logs error, continues.","test_non_critical_exception_continues:158:async (self):_make_orchestrator:AC-2.2.3: Unhandled exception in non-critical stage continues.","test_multiple_non_critical_failures:172:async (self):_make_orchestrator:Multiple non-critical failures are all recorded."]],"TestPipelineOrchestratorTiming":["189",["test_per_stage_timing_recorded:191:async (self):_make_orchestrator:AC-2.2.4: Per-stage timing logged in stage_timings.","test_total_duration_calculated:205:async (self):_make_orchestrator:Total duration is sum of stage timings."]]}],"t/pipeline/test_performance.py":["p",["test_jinja2_render_under_5ms:55:async ()::","test_voice_template_render_under_5ms:91:async ()::","test_memory_search_under_100ms:126:async ()::","test_memory_store_under_100ms:134:async ()::","test_full_pipeline_with_fake_stages_under_1s:146:async (mock_session, make_context)::","test_pipeline_overhead_minimal:179:async (mock_session, make_context)::","test_critical_stage_failure_fast_abort:205:async (mock_session, make_context):__init__,execute:","test_ready_prompt_load_under_100ms:249:async (mock_session)::","test_ready_prompt_vs_generation_speedup:257:async (mock_session, make_context)::","test_token_counting_under_10ms:270:async ()::"],{"FakeStage":["28",["__init__:31:(self, name=\"fake\", delay=0.001, is_critical=False, session=None, **kwargs)::","execute:38:async (self, ctx:PipelineContext)>StageResult::Simulate stage execution with configurable delay."]]}],"t/pipeline/test_prompt_builder.py":["p",["_make_context:25:(**overrides)>PipelineContext::"],{"TestPromptBuilderStage":["55",["test_ac_3_3_1_renders_jinja2_template:58:async (self):_make_context:AC-3.3.1: Loads Jinja2 template, renders with PipelineContext data.","test_ac_3_3_5_generates_both_text_and_voice:71:async (self):_make_context:AC-3.3.5: Generates BOTH text and voice prompts in one pass.","test_sets_prompt_on_context_matching_platform:84:async (self):_make_context:Generated prompt matches ctx.platform.","test_ac_3_3_3_fallback_on_haiku_failure:101:async (self):_make_context:AC-3.3.3: Falls back to raw Jinja2 output if Haiku fails.","test_ac_3_4_1_text_token_budget_warning:113:async (self, caplog):_make_context:AC-3.4.1: Text prompt post-enrichment: 5,500-6,500 tokens (warn if outside ra...","test_ac_3_4_2_voice_token_budget_warning:123:async (self, caplog):_make_context:AC-3.4.2: Voice prompt post-enrichment: 1,800-2,200 tokens (warn if outside r...","test_ac_3_4_3_truncates_over_budget_prompt:133:async (self):_make_context:AC-3.4.3: If over budget, truncate lower-priority sections.","test_ac_3_3_4_stores_in_ready_prompts:155:async (self):_make_context:AC-3.3.4: Stores result in ready_prompts via ReadyPromptRepository.set_curren...","test_graceful_failure_on_template_error:170:async (self):_make_context:Stage handles template render failures gracefully.","test_graceful_failure_on_storage_error:182:async (self):_make_context:Stage handles storage failures gracefully (logs warning, continues).","test_no_session_skips_storage:195:async (self, caplog):_make_context:If session is None, skip storage and log warning.","test_build_template_vars_extracts_context:205:async (self):_make_context:_build_template_vars extracts all relevant fields from PipelineContext.","test_remove_section_handles_missing_section:222:async (self)::_remove_section handles missing section gracefully.","test_remove_section_removes_middle_section:233:async (self)::_remove_section removes middle section correctly.","test_remove_section_removes_last_section:245:async (self)::_remove_section removes last section correctly.","test_stage_is_non_critical:256:async (self)::PromptBuilderStage is non-critical (pipeline continues on failure).","test_stage_timeout:260:async (self)::PromptBuilderStage has 30s timeout."]],"TestHaikuEnrichment":["266",["test_enrichment_called_when_api_key_present:269:async (self):_make_context,mock_enrich:Enrichment is called when ANTHROPIC_API_KEY is set.","mock_enrich:322:async (raw, platform)::","test_fallback_when_enrichment_fails:284:async (self):_make_context,mock_fail:Falls back to raw Jinja2 when enrichment fails.","mock_fail:290:async (raw, platform)::","test_fallback_when_enrichment_returns_too_short:300:async (self):_make_context,mock_short:Falls back when enrichment returns suspiciously short result.","mock_short:306:async (raw, platform)::","test_enrichment_result_used_when_successful:316:async (self):_make_context,mock_enrich:Enrichment result is used when it succeeds.","test_enrichment_preserves_factual_content:331:async (self):_make_context:Enrichment prompt instructs to preserve ALL factual content.","test_enrichment_varies_by_platform:352:async (self)::Enrichment prompt mentions platform (text vs voice).","test_enrichment_skipped_when_no_api_key:380:async (self):_make_context:Enrichment is skipped when ANTHROPIC_API_KEY is not set.","test_enrichment_uses_haiku_model:394:async (self)::Enrichment uses claude-haiku-4-5 for cost efficiency."]],"TestPromptStorage":["418",["test_prompts_stored_via_repository:421:async (self):_make_context:Both text and voice prompts stored via ReadyPromptRepository.set_current().","test_is_current_flag_set:435:async (self):_make_context:Stored prompts have is_current=True flag.","test_storage_includes_context_snapshot:449:async (self):_make_context:Stored prompts include context_snapshot with key metadata.","test_storage_handles_none_session_gracefully:477:async (self, caplog):_make_context:Storage is skipped gracefully when session is None.","test_storage_failure_doesnt_crash_stage:490:async (self):_make_context:Storage failure is logged but doesn't crash stage."]]}],"t/pipeline/test_stages.py":["p",["_make_context:17:(**overrides)>PipelineContext::","_mock_session:28:()>MagicMock::"],{"TestExtractionStage":["33",["test_extraction_happy_path:35:async (self):_make_context,_mock_session:","test_extraction_no_conversation_raises:60:async (self):_make_context,_mock_session:","test_extraction_empty_messages_skips:68:async (self):_make_context,_mock_session:","test_extraction_llm_failure_raises_stage_error:77:async (self):_make_context,_mock_session:","test_extraction_is_critical:90:async (self)::"]],"TestMemoryUpdateStage":["97",["test_memory_update_stores_facts:99:async (self):_make_context,_mock_session:","test_memory_update_deduplicates:127:async (self):_make_context,_mock_session:","test_memory_update_no_facts_skips:145:async (self):_make_context,_mock_session:","test_memory_update_fact_error_continues:153:async (self):_make_context,_mock_session:","test_classify_graph_type_nikita:170:async (self):_mock_session:","test_classify_graph_type_user:176:async (self):_mock_session:","test_classify_graph_type_relationship:182:async (self):_mock_session:","test_memory_update_is_critical:188:async (self)::"]],"TestLifeSimStage":["194",["test_life_sim_generates_events:196:async (self):_make_context,_mock_session:","test_life_sim_empty_events:207:async (self):_make_context,_mock_session:","test_life_sim_is_non_critical:216:async (self)::"]],"TestEmotionalStage":["222",["test_emotional_computes_4d_state:224:async (self):_make_context,_mock_session:","test_emotional_passes_life_events:240:async (self):_make_context,_mock_session:","test_emotional_empty_events_as_none:255:async (self):_make_context,_mock_session:","test_emotional_is_non_critical:270:async (self)::"]],"TestGameStateStage":["276",["test_game_state_returns_defaults:278:async (self):_make_context,_mock_session:","test_game_state_with_extraction:287:async (self):_make_context,_mock_session:","test_game_state_populates_context:295:async (self):_make_context,_mock_session:","test_game_state_is_non_critical:304:async (self)::"]],"TestConflictStage":["310",["test_conflict_no_trigger:312:async (self):_make_context,_mock_session:","test_conflict_low_score_triggers:323:async (self):_make_context,_mock_session:","test_conflict_emotional_distance_triggers:333:async (self):_make_context,_mock_session:","test_conflict_cold_early_chapter_no_trigger:344:async (self):_make_context,_mock_session:","test_conflict_is_non_critical:354:async (self)::"]],"TestTouchpointStage":["360",["test_touchpoint_evaluates:362:async (self):_make_context,_mock_session:","test_touchpoint_scheduled_true:371:async (self):_make_context,_mock_session:","test_touchpoint_engine_error_graceful:381:async (self):_make_context,_mock_session:","test_touchpoint_is_non_critical:391:async (self)::"]],"TestSummaryStage":["397",["test_summary_with_conversation_returns_status:399:async (self):_make_context,_mock_session:","test_summary_no_conversation_skips:408:async (self):_make_context,_mock_session:","test_summary_is_non_critical:416:async (self)::"]],"TestPromptBuilderStage":["422",["test_prompt_builder_placeholder:424:async (self):_make_context,_mock_session:","test_prompt_builder_is_non_critical:436:async (self)::"]]}],"t/pipeline/test_triggers.py":["p",["make_pipeline_result:20:(conv_id, user_id, success:bool = True)>PipelineResult::Helper to create PipelineResult with minimal context.","test_pipeline_orchestrator_called_when_flag_enabled:37:async (mock_session)::","test_pipeline_orchestrator_accepts_voice_platform:59:async (mock_session)::","test_pipeline_result_has_expected_structure:78:async ():make_pipeline_result:","test_pipeline_result_failed_structure:94:async ():make_pipeline_result:","test_settings_has_unified_pipeline_flag:108:async ()::","test_settings_flag_defaults_to_true:124:async ()::: pipeline activated).","test_feature_flag_controls_branch_logic:138:async ():choose_path:","test_pipeline_orchestrator_handles_multiple_conversations:160:async (mock_session)::"]],"t/pipeline_fixes/test_session_chain.py":["p",["test_session_flows_through_handler:13:async ():mock_get_agent:","test_no_new_sessions_created:67:async ():track_session_maker:","test_session_propagates_to_build_prompt:108:async ():mock_generate_prompt:"]],"t/platforms/telegram/test_message_handler.py":["p",["mock_text_patterns:26:():passthrough:"],{"TestMessageHandler":["41",["mock_user_repository:45:(self)::Mock UserRepository for testing.","mock_conversation_repository:51:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:63:(self)::Mock text agent MessageHandler.","mock_response_delivery:69:(self)::Mock ResponseDelivery for testing.","mock_bot:75:(self)::Mock TelegramBot for testing.","handler:88:(self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot,)::Create MessageHandler instance with mocked dependencies.","sample_message:99:(self)::Create sample Telegram message for testing.","test_ac_fr002_001_authenticated_user_message_routed_to_text_agent:111:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_1_handle_processes_text_messages:149:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_2_checks_authentication_prompts_registration:177:async (self, handler, mock_user_repository, mock_bot, sample_message)::","test_ac_t015_4_routes_to_text_agent_with_user_context:200:async (self, handler, mock_user_repository, mock_text_agent_handler, sample_message)::","test_ac_t015_5_queues_response_for_delivery:230:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_response_delivery, sample_message)::","test_skip_response_not_queued:265:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_response_delivery, sample_message)::","test_typing_indicator_sent_before_processing:295:async (self, handler, mock_user_repository, mock_text_agent_handler, mock_bot, sample_message)::","test_empty_message_handled_gracefully:321:async (self, handler, mock_user_repository, mock_bot)::","test_ac_t025_1_minute_limit_sends_in_character_response:351:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_1_daily_limit_sends_in_character_response:395:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_2_warning_when_approaching_daily_limit:439:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_ac_t025_3_no_harsh_technical_error_messages:489:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::","test_rate_limiting_disabled_when_no_limiter_configured:528:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message)::"]],"TestScoringIntegration":["563",["mock_user_repository:567:(self)::Mock UserRepository for testing.","mock_conversation_repository:575:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:586:(self)::Mock text agent MessageHandler.","mock_response_delivery:592:(self)::Mock ResponseDelivery for testing.","mock_bot:598:(self)::Mock TelegramBot for testing.","mock_scoring_service:604:(self)::Mock ScoringService for testing.","sample_message:610:(self)::Create sample Telegram message for testing.","mock_user_with_metrics:620:(self)::Create mock user with metrics for scoring tests.","test_b2_scoring_called_after_response:643:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_user_score_updated_when_delta_nonzero:698:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_boss_threshold_triggers_boss_fight_status:753:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_boss_opening_message_sent:814:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_scoring_failure_does_not_break_message_flow:881:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::","test_b2_no_scoring_when_should_respond_false:921:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_scoring_service, sample_message, mock_user_with_metrics)::"]],"TestProfileGate":["956",["mock_user_repository:960:(self)::Mock UserRepository for testing.","mock_conversation_repository:966:(self)::Mock ConversationRepository for conversation tracking.","mock_text_agent_handler:976:(self)::Mock text agent MessageHandler.","mock_response_delivery:982:(self)::Mock ResponseDelivery for testing.","mock_bot:988:(self)::Mock TelegramBot for testing.","mock_profile_repository:994:(self)::Mock ProfileRepository for testing.","mock_backstory_repository:1000:(self)::Mock BackstoryRepository for testing.","mock_onboarding_handler:1006:(self)::Mock OnboardingHandler for testing.","sample_message:1012:(self)::Create sample Telegram message for testing.","test_fr012_profile_gate_passes_when_profile_and_backstory_exist:1032:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_redirects_when_profile_missing:1082:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_redirects_when_backstory_missing:1128:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, mock_profile_repository, mock_backstory_repository, sample_message,)::","test_fr012_profile_gate_skipped_when_repos_not_configured:1170:async (self, mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot, sample_message,)::"]]}],"t/platforms/telegram/test_message_handler_refresh.py":["p",["mock_dependencies:16:()::","test_messages_refreshed_after_append:63:async (mock_dependencies):fake_refresh:","test_agent_receives_latest_messages:138:async (mock_dependencies):capture_messages,fake_refresh:"]],"t/platforms/telegram/test_rate_limiter.py":["p",["mock_cache:21:()::","rate_limiter:31:(mock_cache)::"],{"TestRateLimiter":["36",["test_ac_fr006_001_rate_limit_hit_after_20_messages_per_minute:44:async (self, rate_limiter, mock_cache,)::","test_ac_t024_1_check_returns_rate_limit_status:72:async (self, rate_limiter, mock_cache,)::","test_ac_t024_2_tracks_per_minute_and_per_day_limits:93:async (self, rate_limiter, mock_cache,):mock_incr:","mock_incr:272:async (key)::","test_ac_fr006_002_warning_when_approaching_daily_limit:127:async (self, rate_limiter, mock_cache,):mock_incr:","test_daily_limit_exceeded_blocks_message:156:async (self, rate_limiter, mock_cache,):mock_incr:","test_ac_t024_4_keys_expire_appropriately:183:async (self, rate_limiter, mock_cache,)::","test_ac_fr006_003_rate_limit_resets_after_cooldown:208:async (self, rate_limiter, mock_cache,)::","test_ac_t024_3_get_remaining_returns_quota_info:234:async (self, rate_limiter, mock_cache,):mock_get:","mock_get:241:async (key)::","test_multiple_users_isolated:262:async (self, rate_limiter, mock_cache,):mock_incr:","test_edge_case_exactly_20_messages_allowed:299:async (self, rate_limiter, mock_cache,)::"]]}],"t/platforms/telegram/test_session_integration.py":["p",["mock_user_repository:24:()::","mock_text_agent_handler:34:()::","mock_response_delivery:42:()::","mock_bot:50:()::","mock_conversation_repository:59:()::","message_handler:85:(mock_user_repository, mock_conversation_repository, mock_text_agent_handler, mock_response_delivery, mock_bot,)::"],{"TestSessionPersistence":["96",["test_ac_fr005_001_context_maintained_across_multiple_messages:110:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::","test_ac_fr005_002_context_restored_after_time_gap:205:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::","test_ac_fr005_003_no_cross_user_contamination:263:async (self, message_handler, mock_user_repository, mock_text_agent_handler,):get_user_by_telegram_id,handle_message:","get_user_by_telegram_id:279:async (telegram_id:int)::","handle_message:291:async (user_id, text)::","test_session_isolation_via_user_id_scoping:354:async (self, message_handler, mock_user_repository, mock_text_agent_handler,)::"]]}],"t/touchpoints/test_delivery.py":["p",["mock_session:33:()::","mock_store:42:()::","mock_scheduler:48:()::","mock_generator:54:()::","mock_silence:60:()::","sample_touchpoint:66:()::","engine_with_mocks:83:(mock_session, mock_store, mock_scheduler, mock_generator, mock_silence)::"],{"TestTouchpointEngineClass":["109",["test_engine_exists:112:(self, mock_session)::AC-T021.1: TouchpointEngine class exists.","test_engine_has_session:121:(self, engine_with_mocks, mock_session)::Engine stores session.","test_engine_has_config:125:(self, engine_with_mocks)::Engine has config.","test_engine_has_min_gap:130:(self, engine_with_mocks)::Engine has min_gap_minutes."]],"TestDeliverDueTouchpoints":["135",["test_deliver_processes_queue:139:async (self, engine_with_mocks, sample_touchpoint)::AC-T021.2: deliver_due_touchpoints() processes queue.","test_deliver_empty_queue:158:async (self, engine_with_mocks)::Empty queue returns empty results.","test_deliver_handles_error_gracefully:167:async (self, engine_with_mocks, sample_touchpoint)::AC-T021.3: Handles errors gracefully."]],"TestDeliverySingleTouchpoint":["183",["test_successful_delivery:187:async (self, engine_with_mocks, sample_touchpoint)::Successful delivery marks as delivered.","test_skipped_for_silence:203:async (self, engine_with_mocks, sample_touchpoint)::Touchpoint skipped for strategic silence.","test_telegram_failure_marks_failed:218:async (self, engine_with_mocks, sample_touchpoint)::Telegram failure marks touchpoint for retry."]],"TestTelegramDelivery":["240",["test_send_uses_existing_bot:244:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.1: Use existing TelegramBot.send_message().","test_no_chat_id_fails:265:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.2: Fails if no chat_id found.","test_telegram_exception_returns_false:274:async (self, engine_with_mocks, sample_touchpoint)::AC-T023.3: Handle send failures."]],"TestDeduplication":["293",["test_skip_if_recent_touchpoint:297:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.1: Check recent touchpoints before scheduling.","test_proceed_if_no_recent:323:async (self, engine_with_mocks, sample_touchpoint)::Proceed if no recent touchpoints.","test_min_gap_respected:338:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.2: Minimum gap between touchpoints.","test_excludes_self_from_dedup:366:async (self, engine_with_mocks, sample_touchpoint)::AC-T024.3: Exclude current touchpoint from dedup check."]],"TestPhasECoverage":["382",["test_engine_module_importable:385:(self)::AC-T025.1: Engine module importable.","test_engine_in_package_exports:397:(self)::Engine exported from package.","test_delivery_result_repr:409:(self)::DeliveryResult has useful repr.","test_convenience_function:433:async (self, mock_session)::Convenience function works."]],"TestEngineScheduling":["453",["test_evaluate_and_schedule:457:async (self, engine_with_mocks)::Engine can evaluate and schedule for user.","test_skip_if_recent_contact:486:async (self, engine_with_mocks)::Skip scheduling if recent touchpoint exists.","test_skip_if_not_eligible:499:async (self, engine_with_mocks)::Skip scheduling if user not eligible."]],"TestDeliveryTimeComputation":["521",["test_time_trigger_immediate:524:(self, engine_with_mocks)::TIME triggers deliver immediately.","test_event_trigger_delayed:536:(self, engine_with_mocks)::EVENT triggers have small delay.","test_gap_trigger_soon:551:(self, engine_with_mocks)::GAP triggers deliver soon."]]}],"t/touchpoints/test_generation.py":["p",["mock_session:27:()::","mock_user:33:()::","mock_agent_class:42:()::","generator:54:(mock_session, mock_agent_class)::"],{"TestMessageGeneratorClass":["67",["test_generator_exists:70:(self, generator)::AC-T012.1: MessageGenerator class exists.","test_generator_has_session:74:(self, generator, mock_session)::Generator stores session.","test_generator_has_agent:78:(self, generator)::Generator has Haiku agent.","test_generator_loads_template:82:(self, generator)::Generator loads template."]],"TestGenerateMethod":["88",["test_generate_returns_string:92:async (self, generator, mock_user)::AC-T012.2: generate() returns string content.","test_generate_with_life_event:115:async (self, generator, mock_user)::Generate with life event context."]],"TestMetaPromptIntegration":["145",["test_uses_haiku_agent:148:(self, generator)::AC-T013.1: Uses Haiku agent like MetaPromptService.","test_passes_trigger_context:154:async (self, generator, mock_user)::AC-T013.2: Passes trigger context for personalization.","test_uses_proactive_template:179:(self, generator)::AC-T013.3: Uses proactive message template."]],"TestLifeEventContext":["190",["test_loads_life_event:194:async (self, generator, mock_user)::AC-T014.1: Loads relevant life event from trigger_context.","test_includes_event_in_prompt:221:async (self, generator, mock_user)::AC-T014.2: Includes event description in prompt."]],"TestEmotionalStateContext":["252",["test_format_emotional_state_positive:255:(self, generator)::AC-T015.2: High valence affects message tone.","test_format_emotional_state_negative:268:(self, generator)::AC-T015.2: Low valence affects message tone.","test_format_emotional_state_neutral:281:(self, generator)::Neutral emotional state.","test_emotional_state_in_prompt:294:async (self, generator, mock_user)::AC-T015.3: Emotional state included in generation prompt."]],"TestMoodComputation":["328",["test_compute_mood_gap_trigger:331:(self, generator)::Gap trigger has specific mood.","test_compute_mood_morning:342:(self, generator)::Morning slot has optimistic mood.","test_compute_mood_evening:353:(self, generator)::Evening slot has relaxed mood.","test_compute_mood_from_emotional_state:364:(self, generator)::Mood from emotional state overrides defaults.","test_compute_energy_morning:380:(self, generator)::Morning has waking up energy.","test_compute_energy_evening:391:(self, generator)::Evening has winding down energy.","test_compute_energy_event:402:(self, generator)::Event trigger has high energy."]],"TestTemplate":["421",["test_template_file_exists:424:(self)::Template file should exist.","test_template_has_placeholders:428:(self, generator)::Template has required placeholders.","test_format_template:436:(self, generator)::Template formatting replaces placeholders."]],"TestConvenienceFunction":["464",["test_convenience_function_exists:467:(self)::Convenience function is importable."]],"TestPhaseCCoverage":["480",["test_generator_module_importable:483:(self, mock_agent_class)::AC-T016.1: Generator module importable.","test_generator_in_package_exports:493:(self, mock_agent_class)::Generator exported from package.","test_template_exists:500:(self)::Template file exists.","test_all_trigger_types_handled:506:(self, generator)::All trigger types handled in mood/energy computation."]]}]},"g":[["VoiceOnboardingFlow.process_ready_response","_initiate_call"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockMappings.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PunctuationProcessor.__init__"],["TelegramWebhookSimulator._build_update","_build_message"],["ConflictStage.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ExtractionStage.__init__"],["VenueResearchService.create_venue_from_user_input","VenueResearchService._extract_vibe"],["ProfileRepository.update_from_onboarding","EngagementStateRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PortalLoginE2ETest.__init__"],["DailySummaryRepository.__init__","SupabaseMemory.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step1_navigate_command"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DailySummaryRepository.__init__"],["BaseRepository.update","TestCriticalFailureE2E.session"],["UserNotFoundError.__init__","JourneyReport.__init__"],["TestPipelineStatusEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["VicePreferenceRepository.__init__","TelegramAuth.__init__"],["ConflictStage.__init__","TTSConfigService.__init__"],["LoginPage.__init__","OnboardingServerToolHandler.__init__"],["ReadyPromptRepository.__init__","MessageGenerator.__init__"],["TestResponseTimer.test_ac_4_1_6_jitter_prevents_exact_patterns","mock_production_settings"],["DailySummaryRepository.__init__","MissingVariableError.__init__"],["UserRepository.__init__","LifeSimStage.__init__"],["VoiceCallVerifier._verify_database","_check_conversation"],["FakeStage.__init__","EntityManager.__init__"],["JobExecutionRepository.__init__","PendingRegistrationRepository.__init__"],["ProfileRepository.__init__","ReadyPromptRepository.__init__"],["ScoreHistoryRepository.__init__","TouchpointStage.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_distant_recovery"],["PiiSafeFormatter.__init__","EngagementStateMachine.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TextPatternProcessor.__init__"],["ProfileRepository.__init__","InstructionSelector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BaseRepository.__init__"],["UserMetricsRepository.__init__","TriggerDetector.__init__"],["BaseRepository.delete_by_id","BaseRepository.delete"],["ViceScorer.close","SupabaseMemory.close"],["ConflictStage.__init__","OTPVerificationHandler.__init__"],["ClinginessDetector._frequency_signal","StateComputer._clamp"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RateLimiter.__init__"],["MockStage.__init__","ServerToolHandler.__init__"],["test_critical_stage_failure_fast_abort","MemoryFactRepository.__init__"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.can_resume_onboarding"],["BaseStage.execute","PromptBuilderStage._run"],["ConversationRepository.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationThreadRepository.__init__"],["ConversationThreadRepository.__init__","OnboardingServerToolHandler.__init__"],["MessageHandler.handle","MessageHandler._get_or_create_conversation"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EngagementStateMachine.__init__"],["LoginPage.__init__","ExperimentLoader.__init__"],["UserRepository.set_boss_fight_status","PackageStore.get"],["TouchpointStage.__init__","PromptBuilderStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BackstoryGeneratorService.__init__"],["DashboardPage.__init__","TestVicePreferenceRepository.__init__"],["PromptBuilderStage._run","PromptBuilderStage._generate_prompt"],["EventStore.get_recent_events","EventStore._row_to_event"],["TestPipelineOrchestratorCriticalFailure.test_critical_stage_exception_stops_pipeline","_make_orchestrator"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationsE2ETest.__init__"],["NeglectDetector._frequency_signal","StateComputer._clamp"],["MessageHandler._needs_onboarding","MessageHandler._offer_onboarding_choice"],["GameStateStage.__init__","NikitaThoughtRepository.__init__"],["MemoryUpdateStage.__init__","MockMappings.__init__"],["MockStage.__init__","PendingRegistrationRepository.__init__"],["ScoreHistoryRepository.__init__","RecoveryManager.__init__"],["MemoryUpdateStage.__init__","PunctuationProcessor.__init__"],["ConversationRepository.__init__","StateComputer.__init__"],["TelegramWebhookSimulator._build_command_update","_build_update"],["TestAuditLogsEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["MissingVariableError.__init__","TouchpointStage.__init__"],["LifeSimulator.get_events_for_context","NarrativeArcRepository.get_active_arcs"],["generate_daily_summaries","_generate_summary_with_llm"],["EngagementStateRepository.__init__","VoiceSessionManager.__init__"],["NarrativeArcRepository.create_arc","_count_active_arcs"],["BackstoryRepository.__init__","TelegramWebhookSimulator.__init__"],["MemoryUpdateStage.__init__","DailySummaryRepository.__init__"],["FakeStage.__init__","ViceAnalyzer.__init__"],["MemoryUpdateStage.__init__","PromptBuilderStage.__init__"],["ReadyPromptRepository.__init__","VoiceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NarrativeArcRepository.__init__"],["analyze_distraction","StateComputer._clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockReadyPromptRepo.__init__"],["UserMetricsRepository.__init__","InMemoryCache.__init__"],["PiiSafeFormatter.__init__","ViceScorer.__init__"],["GameStateStage.__init__","ResponseDelivery.__init__"],["test_critical_stage_failure_fast_abort","TranscriptManager.__init__"],["PreferenceConfigurator.configure","configure"],["DashboardPage.__init__","ConversationsPage.__init__"],["LifeSimStage.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DashboardE2ETest.__init__"],["GameStateStage.__init__","FakeStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramBot.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceScorer.__init__"],["get_agent_id","get_agents_dict"],["MissingVariableError.__init__","RecoveryManager.__init__"],["JobExecutionRepository.__init__","TelegramAuth.__init__"],["GameStateStage.__init__","EntityManager.__init__"],["ConversationsPage.__init__","TextPatternProcessor.__init__"],["NikitaThoughtRepository.__init__","ResolutionManager.__init__"],["EventDeliveryHandler.deliver","_deliver_telegram_event"],["ConflictStage.__init__","MetaNikitaConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GeneratedPromptRepository.__init__"],["ConversationsPage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","HistoryLoader.__init__"],["test_critical_stage_failure_fast_abort","TokenValidator.__init__"],["TouchpointScheduler._evaluate_gap_trigger","TouchpointScheduler._should_trigger"],["ReadyPromptRepository.__init__","PiiSafeFormatter.__init__"],["DashboardPage.__init__","PackageStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase3Portal.__init__"],["EmotionalStage.__init__","TelegramLinkRepository.__init__"],["BackstoryRepository.__init__","VenueResearchService.__init__"],["ConversationThreadRepository.__init__","PsychologyMapper.__init__"],["TouchpointStage.__init__","TouchpointStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointEngine.__init__"],["NikitaThoughtRepository.__init__","ExperimentLoader.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._get_day_of_week"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","JourneyReport.__init__"],["BackstoryRepository.__init__","PromptLoader.__init__"],["FakeStage.__init__","ConversationConfigBuilder.__init__"],["UserRepository.update_onboarding_status","BaseRepository.get"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._update_onboarding_status"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","half_second_timeout"],["ConversationRepository.__init__","TouchpointScheduler.__init__"],["MockStage.__init__","TelegramAuth.__init__"],["TouchpointStage.__init__","_ProfileFromAnswers.__init__"],["FakeStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._build_context"],["StageError.__init__","TextPatternProcessor.__init__"],["VoiceCallVerifier._verify_database","_check_user_exists"],["VoiceService._load_context","VoiceService._enrich_from_memory"],["MemoryFactRepository.__init__","TestVicePreferenceRepository.__init__"],["GameStateStage.__init__","ViceAnalyzer.__init__"],["StageError.__init__","RateLimiter.__init__"],["UserRepository.is_onboarded","UserRepository.get"],["EngagementStateRepository.__init__","JourneyReport.__init__"],["_AgentProxy._real_agent","get_nikita_agent"],["BackstoryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ExtractionStage.__init__","VoiceSessionManager.__init__"],["TouchpointStage.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MemoryFactRepository.__init__"],["MemoryUpdateStage.__init__","_ProfileFromAnswers.__init__"],["TouchpointStage.__init__","StateComputer.__init__"],["UserMetricsRepository.__init__","MetaInstructionEngine.__init__"],["ConflictStage.__init__","GmailMCPClient.__init__"],["UserMetricsRepository.__init__","BaseStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreHistoryRepository.__init__"],["ConflictStore.increment_resolution_attempts","update_conflict"],["VicePromptInjector._build_vice_section","_intensity_label"],["BaseStage.execute","BaseStage._run"],["LifeSimulator.generate_next_day_events","EventStore.get_active_arcs"],["estimate_tokens_fast","get_token_estimator"],["InMemoryCache.incr","_ChapterBehaviorsProxy.get"],["LifeSimStage.__init__","ConversationRepository.__init__"],["UserMetricsRepository.__init__","TokenEstimator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageHandler.__init__"],["ConversationRepository.__init__","EmotionalStage.__init__"],["HandoffManager.execute_handoff_with_voice_callback","_generate_profile_summary"],["VicePreferenceRepository.__init__","FactExtractor.__init__"],["MemoryUpdateStage.__init__","StateComputer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SupabaseHelper.__init__"],["ScoreHistoryRepository.__init__","PsychologyMapper.__init__"],["DailySummaryRepository.__init__","SocialCircleGenerator.__init__"],["SupabaseMemory.add_fact","MemoryFactRepository.add_fact"],["DynamicVariablesBuilder.build_from_user","_get_time_of_day"],["PromptBuilderStage.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TranscriptManager.__init__"],["MessageHandler.handle","MessageHandler._needs_onboarding"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointScheduler.__init__"],["GameStateStage.__init__","ConversationConfigBuilder.__init__"],["VicePreferenceRepository.__init__","DeliveryResult.__init__"],["OnboardingHandler.handle","_handle_skip"],["BackstoryRepository.__init__","StateStore.__init__"],["MessageHandler.handle","_send_error_response"],["ReadyPromptRepository.__init__","UserMetricsRepository.__init__"],["EmotionalStage.__init__","MockMappings.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OTPVerificationHandler.__init__"],["EmotionalStage.__init__","PunctuationProcessor.__init__"],["VicePreferenceRepository.__init__","SkipDecision.__init__"],["ScoreHistoryRepository.__init__","UserRepository.__init__"],["BaseRepository.delete","delete"],["PiiSafeFormatter.__init__","MessageHandler.__init__"],["MemoryFactRepository.__init__","PackageStore.__init__"],["OnboardingServerToolHandler.complete_onboarding","UserRepository.complete_onboarding"],["HandoffManager.transition","HandoffManager._update_user_status"],["TestLLMTimeoutHandling.test_llm_timeout_returns_graceful_error","TestLLMTimeoutHandling.slow_llm_call"],["EmotionalStage.__init__","DailySummaryRepository.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","TestHelpers.navigate_and_get_content"],["PromptBuilderStage.__init__","VenueCacheRepository.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase4_instructions"],["VicePreferenceRepository.__init__","AuditLog.__init__"],["MissingVariableError.__init__","PsychologyMapper.__init__"],["ViceAnalyzer.analyze_exchange","ViceAnalyzer._convert_llm_signals"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenValidator.__init__"],["ConversationRepository.__init__","__init__"],["BackstoryGeneratorService.generate_scenarios","_call_llm"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageHandler.__init__"],["EntityManager.get_places","EntityManager.get_entities_by_type"],["BackstoryRepository.__init__","DecayProcessor.__init__"],["ExtractionStage.__init__","JourneyReport.__init__"],["UserNotFoundError.__init__","ConversationsPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EmotionalStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestVicePreferenceRepository.__init__"],["UserNotFoundError.__init__","LifeSimStage.__init__"],["TestUserListEndpoint.app","TestUserListEndpoint.mock_get_session"],["TestUserDetailEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["BackstoryRepository.__init__","MoodCalculator.__init__"],["TouchpointStore.get_due_touchpoints","TouchpointStore._to_pydantic"],["StateStore.update_state","save_state"],["LifeSimStage.__init__","VoiceCallScorer.__init__"],["MissingVariableError.__init__","UserRepository.__init__"],["MemoryUpdateStage.__init__","TouchpointScheduler.__init__"],["ViceService.close","SupabaseMemory.close"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceCallVerifier.__init__"],["clean_session","session_maker"],["FakeStage.__init__","TouchpointStage.__init__"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","TestBaseRepositorySubclassing.custom_method"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreCalculator.__init__"],["VoiceOnboardingFlow.process_phone_input","get_ready_confirmation_message"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictStore.__init__"],["MetaInstructionEngine.format_for_prompt","MetaInstructionEngine.format_for_prompt"],["JobExecutionRepository.__init__","FactExtractor.__init__"],["RateLimiter.__init__","get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BreakupManager.__init__"],["EmotionalStage.__init__","ConfigLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingServerToolHandler.__init__"],["TestUserDetailEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["PromptLoader._substitute_variables","replace_match"],["PiiSafeFormatter.__init__","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationsPage.__init__"],["UserNotFoundError.__init__","PackageStore.__init__"],["ConflictStage.__init__","ConflictDetector.__init__"],["MessageHandler._score_and_check_boss","MessageHandler._send_boss_opening"],["SupabaseMemory.get_recent","SupabaseMemory.get_recent"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LengthAdjuster.__init__"],["VoiceService.initiate_call","InboundCallHandler._generate_fallback_prompt"],["build_system_prompt","VoiceService._try_load_ready_prompt"],["ConversationThreadRepository.__init__","DecayCalculator.__init__"],["AuditLog.__init__","MessageSplitter.__init__"],["JobExecutionRepository.__init__","DeliveryResult.__init__"],["ConflictStage.__init__","Phase1Registration.__init__"],["UserRepository.__init__","TelegramLinkRepository.__init__"],["PunctuationProcessor.apply","_add_trailing_dots"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LoginPage.__init__"],["FakeStage.__init__","RecoveryManager.__init__"],["JobExecutionRepository.__init__","SkipDecision.__init__"],["MemoryUpdateStage.__init__","EmotionalStage.__init__"],["upgrade","table_exists"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ExperimentLoader.__init__"],["PiiSafeFormatter.__init__","VoiceCallVerifier.__init__"],["TestConversationsE2E.test_verification_instructions","ConversationsE2ETest.get_verification_instructions"],["ConversationThreadRepository.__init__","TTSConfigService.__init__"],["test_critical_stage_failure_fast_abort","BaseStage.execute"],["MockStage.__init__","FactExtractor.__init__"],["EntityManager.get_projects","get_entities_by_type"],["analyze_distraction","_call_distraction_llm"],["UserMetricsRepository.__init__","TextPatternProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PackageStore.__init__"],["JobExecutionRepository.__init__","AuditLog.__init__"],["MemoryFactRepository.__init__","BaseRepository.__init__"],["TouchpointStage.__init__","UserRepository.__init__"],["UserMetricsRepository.__init__","RateLimiter.__init__"],["AuditLog.__init__","VenueCacheRepository.__init__"],["ConversationThreadRepository.__init__","OTPVerificationHandler.__init__"],["TestInboundReadyPrompt.test_fallback_on_no_prompt","_make_handler"],["UserRepository.update_game_status","TouchpointStore.get"],["BackstoryRepository.__init__","InstructionSelector.__init__"],["test_critical_stage_failure_fast_abort","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResponseTimer.__init__"],["VoiceService.initiate_call","_try_load_ready_prompt"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictGenerator.__init__"],["SummaryStage.__init__","NarrativeArcRepository.__init__"],["MockStage.__init__","DeliveryResult.__init__"],["TestBossEncountersEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["InboundCallHandler._get_conversation_config_override","InboundCallHandler._try_load_ready_prompt"],["MemoryFactRepository.__init__","BackstoryGeneratorService.__init__"],["ConflictStage.__init__","ExtractionStage.__init__"],["MockStage.__init__","SkipDecision.__init__"],["RateLimiter.check","_get_day_key"],["EvidenceCollector.print_summary","generate_report"],["MockAgentHelper.patch_generate_response","MockAgentHelper.mock_generate"],["GameStateStage.__init__","TouchpointStage.__init__"],["OnboardingStateRepository.delete","BaseRepository.delete"],["PendingRegistrationRepository.delete","TelegramLinkRepository.delete"],["TestUserListEndpointAuditLogging.app","TestUserListEndpointAuditLogging.mock_get_session"],["ConflictDetector._find_intermediate_state","ConflictDetector._get_severity"],["LifeSimStage.__init__","GameStateStage.__init__"],["MockStage.__init__","AuditLog.__init__"],["LoginPage.__init__","BreakupManager.__init__"],["PiiSafeFormatter.__init__","OnboardingStateRepository.__init__"],["GeneratedPromptRepository.__init__","NarrativeArcSystem.__init__"],["EngagementStateRepository.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationsPage.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow._save_phone_number"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LifeSimStage.__init__"],["MemoryUpdateStage.__init__","__init__"],["LifeSimulator.get_active_arcs","NarrativeArcManager.get_active_arcs"],["GameStateStage.__init__","_ProfileFromAnswers.__init__"],["LifeSimulator.get_active_arcs","get_active_arcs"],["MessageHandler.handle","_is_new_day"],["ScoreHistoryRepository.__init__","DecayCalculator.__init__"],["LoginPage.__init__","LengthAdjuster.__init__"],["ReadyPromptRepository.__init__","BasePage.__init__"],["OnboardingStateRepository.add_answer","InMemoryCache.get"],["PiiSafeFormatter.__init__","ResponseTimer.__init__"],["TestSystemOverviewEndpoint.app","TestThreadsList.mock_admin_auth"],["ConflictStage.__init__","ConversationThreadRepository.__init__"],["ConversationRepository.__init__","EventStore.__init__"],["ScoreHistoryRepository.__init__","TTSConfigService.__init__"],["DashboardPage.__init__","ProfileRepository.__init__"],["GameStateStage.__init__","RecoveryManager.__init__"],["MemoryFactRepository.__init__","EscalationManager.__init__"],["EngagementStateRepository.__init__","ConversationsPage.__init__"],["ProfileRepository.__init__","NarrativeArcSystem.__init__"],["ConversationRepository.search","search"],["GameStateStage.__init__","StateComputer.__init__"],["EngagementStateRepository.__init__","LifeSimStage.__init__"],["TelegramWebhookSimulator._build_update","_next_update_id"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResponseTimer.__init__"],["UserRepository.__init__","MockMappings.__init__"],["TestUserMemoryEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["ViceAnalyzer._analyze_with_llm","_get_agent"],["UserRepository.__init__","PunctuationProcessor.__init__"],["ConversationsPage.__init__","TestVicePreferenceRepository.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","get_complete_flow_instructions"],["DailySummaryRepository.__init__","DashboardPage.__init__"],["ConversationThreadRepository.__init__","MetaNikitaConfig.__init__"],["UserRepository.__init__","DailySummaryRepository.__init__"],["PromptLoader._substitute_variables","PromptLoader._get_nested_value"],["UserRepository.__init__","PromptBuilderStage.__init__"],["MissingVariableError.__init__","DecayCalculator.__init__"],["NeglectDetector.detect","ClinginessDetector._frequency_signal"],["ConflictStage.__init__","MockReadyPromptRepo.__init__"],["TestDashboardE2E.test_verification_with_telegram_id","get_verification_instructions"],["PromptBuilderStage.__init__","EngagementStateMachine.__init__"],["test_critical_stage_failure_fast_abort","JourneyReport.__init__"],["LifeSimStage.__init__","ScoreAnalyzer.__init__"],["TouchpointScheduler.evaluate_user","_evaluate_time_trigger"],["ViceService.get_prompt_context","ViceService.get_probe_categories"],["EmotionalStage.__init__","TouchpointScheduler.__init__"],["ConflictStage.__init__","DashboardE2ETest.__init__"],["MissingVariableError.__init__","TTSConfigService.__init__"],["ScoreHistoryRepository.__init__","MockStage.__init__"],["_get_processor_instance","_get_text_pattern_processor"],["PromptBuilderStage._enforce_token_budget","PromptBuilderStage._truncate_prompt"],["TestHaikuEnrichment.test_enrichment_called_when_api_key_present","mock_enrich"],["DashboardPage.__init__","EventGenerator.__init__"],["SocialCircleGenerator.generate_social_circle","_apply_tech_hub_adaptations"],["TestAuditLogsEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig._get_chapter_tts_settings"],["TestGetCurrentAdminUser.test_admin_email_subdomain_access","make_token"],["TestErrorLogEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["NikitaThoughtRepository.__init__","BreakupManager.__init__"],["ReadyPromptRepository.__init__","VoiceOnboardingFlow.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BackstoryGeneratorService.__init__"],["PromptLoader.render","HistoryLoader.load"],["FakeStage.__init__","PsychologyMapper.__init__"],["DailySummaryRepository.__init__","ConflictStage.__init__"],["JourneyContext.fail","transition_to"],["NeglectDetector.detect","NeglectDetector._abrupt_ending_signal"],["BackstoryRepository.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EventStore.__init__"],["NikitaThoughtRepository.__init__","LengthAdjuster.__init__"],["RateLimiter.__init__","expire"],["SummaryStage.__init__","SupabaseHelper.__init__"],["DailySummaryRepository.__init__","InMemoryCache.__init__"],["EmotionalStage.__init__","TouchpointStore.__init__"],["ReadyPromptRepository.__init__","PipelineOrchestrator.__init__"],["ExtractionStage.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceSessionManager.__init__"],["BackstoryRepository.__init__","JobExecutionRepository.__init__"],["InboundCallHandler.handle_incoming_call","create_session"],["_ChapterBehaviorsProxy.values","_ChapterBehaviorsProxy.values"],["ScoreAnalyzer.analyze","_call_llm"],["ScoreHistoryRepository.__init__","HandoffManager.__init__"],["ConflictStage.__init__","TouchpointEngine.__init__"],["TestSessionDetector.test_detect_and_queue_marks_all_found","mock_get_stale"],["ConversationThreadRepository.__init__","GmailMCPClient.__init__"],["MemoryFactRepository.__init__","ScoreHistoryRepository.__init__"],["EmotionalStage.__init__","EmotionalStage.__init__"],["MissingVariableError.__init__","MockStage.__init__"],["PromptBuilderStage.__init__","ViceScorer.__init__"],["ConversationRepository.__init__","SupabaseMemory.__init__"],["FakeStage.__init__","UserRepository.__init__"],["RecoveryManager.check_recovery_complete","_check_out_of_zone_recovery"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestDailySummaryRepositoryExtras.__init__"],["LoginPage.__init__","Phase2Conversation.__init__"],["TouchpointStage.__init__","DecayCalculator.__init__"],["ConversationsPage.__init__","PackageStore.__init__"],["CallAvailability.is_available","CallAvailability.get_availability_rate"],["TelegramWebhookSimulator._build_message","_next_message_id"],["ScoreHistoryRepository.__init__","MetaNikitaConfig.__init__"],["StateStore.get_conflict_history","StateStore._row_to_state"],["ConversationRepository.__init__","MissingVariableError.__init__"],["TelegramLinkRepository.delete","PendingRegistrationRepository.delete"],["PromptBuilderStage._generate_prompt","PromptBuilderStage._enforce_token_budget"],["DailySummaryRepository.__init__","ScheduledEventRepository.__init__"],["VicePreferenceRepository.__init__","OnboardingStateRepository.__init__"],["TouchpointStage.__init__","TTSConfigService.__init__"],["ExtractionStage.__init__","ConversationsPage.__init__"],["ExtractionStage.__init__","LifeSimStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase1Registration.__init__"],["_create_nikita_agent","add_personalized_context"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BaseRepository.__init__"],["MemoryFactRepository.__init__","ProfileRepository.__init__"],["CalibrationCalculator._content_component","UserMetricsRepository._clamp"],["ConflictStage.__init__","MemoryFactRepository.__init__"],["VenueResearchService.research_venues","VenueResearchService._search_firecrawl"],["ScoreHistoryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MissingVariableError.__init__","HandoffManager.__init__"],["UserRepository.__init__","_ProfileFromAnswers.__init__"],["mock_conversation","test_extraction"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BackstoryGeneratorService.__init__"],["VicePreferenceRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["MemoryUpdateStage.__init__","EventStore.__init__"],["ReadyPromptRepository.__init__","FullJourneyOrchestrator.__init__"],["AuditLog.__init__","EngagementStateMachine.__init__"],["MissingVariableError.__init__","MetaNikitaConfig.__init__"],["TestErrorLogEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["SummaryStage.__init__","Phase4GameState.__init__"],["InMemoryCache.incr","TouchpointStore.get"],["DashboardPage.__init__","ConfigLoader.__init__"],["EmotionalStage.__init__","__init__"],["ServerToolHandler._get_context","ServerToolHandler._try_load_ready_prompt"],["BaseRepository.delete_by_id","PackageStore.get"],["TestTimeoutFallback.test_timeout_decorator_returns_fallback_on_timeout","TestTimeoutFallback.slow_function"],["TouchpointStage.__init__","MockStage.__init__"],["LifeSimStage.__init__","RegistrationHandler.__init__"],["UserRepository.__init__","StateComputer.__init__"],["MemoryFactRepository.__init__","EventGenerator.__init__"],["ScoreHistoryRepository.__init__","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NarrativeArcRepository.__init__"],["MissingVariableError.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConflictStage.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","JourneyReport.__init__"],["NikitaThoughtRepository.__init__","Phase2Conversation.__init__"],["EscalationManager._check_natural_resolution","EscalationManager._get_natural_resolution_probability"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ServerToolHandler.__init__"],["VoiceService._load_context","VoiceService._compute_nikita_mood"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MissingVariableError.__init__"],["TouchpointStore.get_user_touchpoints","TouchpointStore._to_pydantic"],["GameStateStage.__init__","UserRepository.__init__"],["ServerToolHandler._get_context","VoiceService._compute_nikita_mood"],["LifeSimulator.get_events_for_context","get_today_events"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EscalationManager.__init__"],["Phase2Conversation.execute_all_messages","Phase2Conversation.execute_message"],["TouchpointStage.__init__","HandoffManager.__init__"],["test_context","TelegramLinkCode.create"],["AuditLog.__init__","ViceScorer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationThreadRepository.__init__"],["LifeSimStage.__init__","MessageGenerator.__init__"],["VicePreferenceRepository.__init__","StateStore.__init__"],["ConversationsPage.__init__","BaseRepository.__init__"],["LoginPage.__init__","Phase1Registration.__init__"],["TouchpointStage.__init__","SupabaseMemory.__init__"],["VenueResearchService.research_venues","_search_firecrawl"],["JobExecutionRepository.__init__","OnboardingStateRepository.__init__"],["MessageGenerator.__init__","MessageGenerator._load_template"],["TestUserListEndpointAuditLogging.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PendingRegistrationRepository.__init__"],["ConflictStage.__init__","TokenValidator.__init__"],["TestErrorLogEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["MissingVariableError.__init__","GmailMCPClient.__init__"],["UserRepository.update_last_interaction","PackageStore.get"],["ConversationThreadRepository.__init__","ConflictDetector.__init__"],["HandoffManager.execute_handoff","_extract_location_from_timezone"],["TestPipelineContext.test_total_duration_empty","_make_ctx"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ProfileRepository.__init__"],["ConversationsPage.__init__","BackstoryGeneratorService.__init__"],["TestHaikuEnrichment.test_fallback_when_enrichment_fails","TestHaikuEnrichment.mock_fail"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StageError.__init__"],["TestConflictStage.test_conflict_low_score_triggers","_mock_session"],["TestBossEncountersEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["MemoryUpdateStage.__init__","SupabaseMemory.__init__"],["UserNotFoundError.__init__","EventGenerator.__init__"],["ConversationThreadRepository.__init__","Phase1Registration.__init__"],["TokenBudgetManager.allocate","HistoryLoader._truncate_to_budget"],["JobExecutionRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["VicePreferenceRepository.__init__","DecayProcessor.__init__"],["ReadyPromptRepository.__init__","PortalLoginE2ETest.__init__"],["UserRepository.update_onboarding_status","OnboardingStateRepository.get"],["TouchpointStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MockStage.__init__","VenueResearchService.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_past_grace_returns_decay_result","create_mock_user"],["BossStateMachine.trigger_boss","BossStateMachine.initiate_boss"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VenueCacheRepository.__init__"],["UserRepository.__init__","TouchpointScheduler.__init__"],["MemoryUpdateStage.__init__","MissingVariableError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EvidenceCollector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DashboardE2ETest.__init__"],["StageError.__init__","BaseRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenBudgetManager.__init__"],["UserMetricsRepository.__init__","TestVicePreferenceRepository.__init__"],["PromptBuilderStage.__init__","MessageHandler.__init__"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._apply_creative_adaptations"],["FakeStage.__init__","DecayCalculator.__init__"],["ElevenLabsConversationsClient.save_transcript_to_file","get_conversation"],["UserRepository.advance_chapter","BaseRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BreakupManager.__init__"],["TestProcessingStatsEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["test_critical_stage_failure_fast_abort","ConflictGenerator.__init__"],["UserNotFoundError.__init__","PunctuationProcessor.__init__"],["FakeStage.__init__","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EventGenerator.__init__"],["GeneratedPromptRepository.__init__","GameStateStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreHistoryRepository.__init__"],["MockStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ConversationThreadRepository.__init__","ExtractionStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LengthAdjuster.__init__"],["ConversationsPage.__init__","EscalationManager.__init__"],["ReadyPromptRepository.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceAgentConfig.__init__"],["ReadyPromptRepository.__init__","ConversationsE2ETest.__init__"],["LoginPage.__init__","ConversationThreadRepository.__init__"],["UserRepository.__init__","EmotionalStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramLinkRepository.__init__"],["ConflictDetector.check_escalation","ConflictDetector._can_transition"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SessionDetector.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase1_instructions"],["OnboardingStateRepository.get_or_create","_ChapterBehaviorsProxy.get"],["TestSystemOverviewEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["ScoreHistoryRepository.__init__","ConflictDetector.__init__"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig._get_first_message"],["JobExecutionRepository.__init__","StateStore.__init__"],["ConversationRepository.__init__","SocialCircleGenerator.__init__"],["NarrativeArcManager.maybe_resolve_arcs","check_arc_resolution"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SupabaseHelper.__init__"],["test_critical_stage_failure_fast_abort","ConversationsPage.__init__"],["test_session_propagates_to_build_prompt","mock_generate_prompt"],["test_critical_stage_failure_fast_abort","LifeSimStage.__init__"],["StageError.__init__","NarrativeArcRepository.__init__"],["ReadyPromptRepository.__init__","SummaryStage.__init__"],["TelegramLinkRepository.delete","TouchpointStore.delete"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","CommandHandler.__init__"],["MessageSplitter._find_split_points","MessageSplitter._split_at_markers"],["ScoreCalculator.update_metrics","ScoreCalculator.clamp"],["UserRepository.set_boss_fight_status","get"],["ReadyPromptRepository.__init__","EngagementStateRepository.__init__"],["LifeSimStage.__init__","PiiSafeFormatter.__init__"],["ConversationThreadRepository.__init__","InboundCallHandler.__init__"],["ProfileRepository.__init__","GameStateStage.__init__"],["EmotionalStage.__init__","EventStore.__init__"],["UserRepository.delete_user_cascade","BaseRepository.get"],["ScoreAnalyzer.analyze_batch","_call_llm_raw"],["TestUserScoresEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["FakeStage.__init__","MockStage.__init__"],["ConversationThreadRepository.__init__","ConversationThreadRepository.__init__"],["LoginPage.__init__","StageError.__init__"],["PromptBuilderStage.__init__","LoginPage.__init__"],["TTSConfigService.get_final_settings","_blend_settings"],["EngagementStateRepository.__init__","TelegramLinkRepository.__init__"],["_create_nikita_agent","note_user_fact"],["VicePreferenceRepository.__init__","InstructionSelector.__init__"],["StageError.__init__","EscalationManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SupabaseHelper.__init__"],["JobExecutionRepository.__init__","DecayProcessor.__init__"],["PreferenceConfigurator.to_dict","PreferenceConfigurator.get_preferences"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MemoryFactRepository.__init__"],["ReadyPromptRepository.__init__","TelegramBot.__init__"],["DecayProcessor.process_all","DecayProcessor.process_user"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingServerToolHandler.__init__"],["UserNotFoundError.__init__","ConfigLoader.__init__"],["MockStage.__init__","StateStore.__init__"],["DashboardPage.__init__","TokenCounter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LifeSimulator.__init__"],["LoginPage.__init__","DashboardE2ETest.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_drug_tolerance_step"],["MissingVariableError.__init__","ConflictDetector.__init__"],["BackstoryRepository.__init__","NarrativeArcSystem.__init__"],["DailySummaryRepository.__init__","TextPatternProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PreferenceConfigurator.__init__"],["GameStateStage.__init__","DecayCalculator.__init__"],["DashboardPage.__init__","TouchpointStore.__init__"],["DailySummaryRepository.__init__","RateLimiter.__init__"],["PromptBuilderStage.__init__","VoiceCallVerifier.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","OTPFlowE2ETest.step5_verify_result"],["ReadyPromptRepository.__init__","HistoryLoader.__init__"],["UserRepository.__init__","__init__"],["TestConflictStage.test_conflict_cold_early_chapter_no_trigger","_make_context"],["TestEventStore.mock_session_factory","SupabaseMemory.__aexit__"],["ScoreHistoryRepository.__init__","DatabaseRateLimiter.__init__"],["FakeStage.__init__","HandoffManager.__init__"],["ConversationThreadRepository.__init__","MockReadyPromptRepo.__init__"],["ScoreHistoryRepository.__init__","ExtractionStage.__init__"],["AuditLog.__init__","MessageHandler.__init__"],["ReadyPromptRepository.__init__","Phase3Portal.__init__"],["GameStateStage.__init__","TTSConfigService.__init__"],["ConversationsPage.__init__","ScoreHistoryRepository.__init__"],["SocialCircleGenerator.generate_social_circle","_apply_creative_adaptations"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ExperimentLoader.__init__"],["ConversationThreadRepository.__init__","DashboardE2ETest.__init__"],["NeglectDetector._frequency_signal","_clamp"],["LifeSimStage.__init__","UserNotFoundError.__init__"],["MockStage.__init__","DecayProcessor.__init__"],["FakeStage.__init__","MetaNikitaConfig.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SocialCircleGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConfigLoader.__init__"],["GeneratedPromptRepository.__init__","TokenBudgetManager.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._evaluate_silence"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step2_send_email"],["TextPatternProcessor.process_for_sending","PipelineOrchestrator.process"],["ScoreHistoryRepository.__init__","InboundCallHandler.__init__"],["ConversationsPage.__init__","ProfileRepository.__init__"],["SupabaseMemory.add_fact","_generate_embedding"],["TestResponseTimer.test_invalid_chapter_uses_default","mock_production_settings"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockMappings.__init__"],["LoginPage.__init__","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PunctuationProcessor.__init__"],["PiiSafeFormatter.__init__","ResolutionManager.__init__"],["MissingVariableError.__init__","DatabaseRateLimiter.__init__"],["FakeStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["PromptBuilderStage.__init__","OnboardingStateRepository.__init__"],["MissingVariableError.__init__","ExtractionStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase4GameState.__init__"],["NikitaThoughtRepository.__init__","StageError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DailySummaryRepository.__init__"],["get_pool_status","get_async_engine"],["TestConversationPromptsEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["InMemoryCache.get","BaseRepository.get"],["GameStateStage.__init__","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PromptBuilderStage.__init__"],["ConversationThreadRepository.__init__","TouchpointEngine.__init__"],["StageError.__init__","ScoreHistoryRepository.__init__"],["BaseRepository.session","session"],["ProfileRepository.__init__","TokenBudgetManager.__init__"],["PiiSafeFormatter.__init__","ExperimentLoader.__init__"],["LifeSimStage.__init__","UserMetricsRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenValidator.__init__"],["GeneratedPromptRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResolutionManager.__init__"],["TestVoicePerformance.test_flag_check_fast","_make_server_handler"],["EmotionalStage.__init__","MissingVariableError.__init__"],["PromptBuilderStage.__init__","ResponseTimer.__init__"],["TestTypingIndicators.test_no_periodic_typing_for_short_delays","mock_sleep"],["JobExecutionRepository.__init__","InstructionSelector.__init__"],["ExtractionStage.__init__","TelegramLinkRepository.__init__"],["EngagementStateRepository.__init__","MockMappings.__init__"],["AuditLog.__init__","LoginPage.__init__"],["NikitaThoughtRepository.__init__","DashboardE2ETest.__init__"],["TestUserMemoryEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["EngagementStateRepository.__init__","PunctuationProcessor.__init__"],["StageError.__init__","SupabaseHelper.__init__"],["TestInboundReadyPrompt.test_returns_string","TestInboundReadyPrompt._make_handler"],["MissingVariableError.__init__","InboundCallHandler.__init__"],["UserMetricsRepository.__init__","BaseRepository.__init__"],["ScoreHistoryRepository.__init__","MockReadyPromptRepo.__init__"],["EngagementStateRepository.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationsPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceService.__init__"],["MemoryUpdateStage.__init__","SocialCircleGenerator.__init__"],["ConversationsPage.__init__","EventGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ExperimentLoader.__init__"],["FakeStage.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LifeSimStage.__init__"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step4_db_query"],["TestPromptBuilderStage.test_build_template_vars_extracts_context","_make_context"],["BaseRepository.get","PendingRegistrationRepository.get"],["ClinginessDetector.detect","StateComputer._clamp"],["GameStateStage.__init__","HandoffManager.__init__"],["ConversationThreadRepository.__init__","MemoryFactRepository.__init__"],["ConflictStage.__init__","VoiceSessionManager.__init__"],["ProfileRepository.__init__","MockResult.__init__"],["AuditLog.__init__","VoiceCallVerifier.__init__"],["MemoryFactRepository.__init__","TokenCounter.__init__"],["GameStateStage.__init__","SupabaseMemory.__init__"],["UserMetricsRepository.__init__","BackstoryGeneratorService.__init__"],["GeneratedPromptRepository.__init__","RegistrationHandler.__init__"],["VicePreferenceRepository.__init__","GmailHelper.__init__"],["MockStage.__init__","InstructionSelector.__init__"],["ScoreHistoryRepository.__init__","ProfileCollector.__init__"],["TouchpointStage.__init__","DatabaseRateLimiter.__init__"],["GeneratedPromptRepository.__init__","LifeSimulator.__init__"],["NeglectDetector.detect","NeglectDetector._response_time_signal"],["run_in_transaction","_wrapped"],["VicePreferenceRepository.__init__","JobExecutionRepository.__init__"],["LoginPage.__init__","ViceService.__init__"],["PiiSafeFormatter.__init__","OTPFlowE2ETest.__init__"],["LengthAdjuster.is_within_bounds","LengthAdjuster._get_config"],["GeneratedPromptRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PackageStore.__init__"],["NikitaThoughtRepository.__init__","CommandHandler.__init__"],["MissingVariableError.__init__","MockReadyPromptRepo.__init__"],["UserMetricsRepository.__init__","NarrativeArcRepository.__init__"],["ScoreHistoryRepository.__init__","TouchpointEngine.__init__"],["GameStateStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OTPFlowE2ETest.__init__"],["EngagementStateRepository.__init__","ConfigLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase1Registration.__init__"],["UserNotFoundError.__init__","TouchpointScheduler.__init__"],["ProfileRepository.__init__","RegistrationHandler.__init__"],["ConversationThreadRepository.__init__","TranscriptManager.__init__"],["TestServerTools.test_server_tool_timeout_handling","slow_operation"],["TouchpointStage.__init__","InboundCallHandler.__init__"],["SummaryStage.__init__","MessageSplitter.__init__"],["GeneratedPromptRepository.__init__","MessageGenerator.__init__"],["ProfileRepository.__init__","LifeSimulator.__init__"],["BossStateMachine.process_outcome","process_pass"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceScorer.__init__"],["DashboardPage.__init__","TelegramAuth.__init__"],["MemoryFactRepository.__init__","ServerToolHandler.__init__"],["LoginPage.__init__","TokenValidator.__init__"],["AuditLog.__init__","OnboardingStateRepository.__init__"],["MissingVariableError.__init__","ProfileCollector.__init__"],["ProfileRepository.__init__","PreferenceConfigurator.__init__"],["VoiceService.initiate_call","_log_call_started"],["UserRepository.__init__","EventStore.__init__"],["UserMetricsRepository.__init__","EscalationManager.__init__"],["TouchpointEngine._evaluate_silence","_check_conflict_active"],["PunctuationProcessor.apply","_normalize_laugh"],["UserNotFoundError.__init__","TokenCounter.__init__"],["AuditLog.__init__","ResponseTimer.__init__"],["ExtractionStage.__init__","MockMappings.__init__"],["TestUserListEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["SummaryStage.__init__","VenueCacheRepository.__init__"],["EmotionalStage.__init__","SessionDetector.__init__"],["ReadyPromptRepository.__init__","ConflictStore.__init__"],["UserRepository.increment_boss_attempts","PendingRegistrationRepository.get"],["ReadyPromptRepository.__init__","ScoreCalculator.__init__"],["ExtractionStage.__init__","PunctuationProcessor.__init__"],["UserNotFoundError.__init__","TouchpointStore.__init__"],["GeneratedPromptRepository.__init__","Phase4GameState.__init__"],["ConversationRepository.__init__","DashboardPage.__init__"],["ScoreHistoryRepository.__init__","TriggerDetector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EmojiProcessor.__init__"],["MissingVariableError.__init__","TouchpointEngine.__init__"],["MemoryFactRepository.__init__","PendingRegistrationRepository.__init__"],["TokenBudgetManager.allocate","_truncate_to_budget"],["ConversationThreadRepository.__init__","TokenValidator.__init__"],["ProfileRepository.__init__","MessageGenerator.__init__"],["TestBossEncountersEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["ExtractionStage.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","AuditLog.__init__"],["VoiceOnboardingFlow.resume_onboarding","VoiceOnboardingFlow.get_ready_confirmation_message"],["TouchpointStage.__init__","MockReadyPromptRepo.__init__"],["ConflictStage.__init__","JourneyReport.__init__"],["run_migration","export_neo4j_facts"],["NikitaThoughtRepository.__init__","ViceService.__init__"],["JobExecutionRepository.__init__","GmailHelper.__init__"],["TestUserScoresEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenCounter.__init__"],["GeneratedPromptRepository.__init__","VoiceService.__init__"],["JobExecutionRepository.__init__","JobExecutionRepository.__init__"],["ProfileRepository.__init__","Phase4GameState.__init__"],["ConflictGenerator.generate","_calculate_severity"],["FakeStage.__init__","ConflictDetector.__init__"],["TextPatternProcessor.process","EmojiProcessor.process"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointStore.__init__"],["MessageHandler.handle","_apply_text_patterns"],["TouchpointStage.__init__","ProfileCollector.__init__"],["TextPatternProcessor.process","TextPatternProcessor._context_to_emoji_context"],["ConversationRepository.__init__","ConflictStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationThreadRepository.__init__"],["MissingVariableError.__init__","TriggerDetector.__init__"],["ScoreHistoryRepository.__init__","TranscriptManager.__init__"],["ConversationRepository.__init__","InMemoryCache.__init__"],["OTPEmailParser.parse_magic_link_email","_extract_body"],["LifeSimulator.generate_next_day_events","LifeSimulator.initialize_user"],["TestP2Security.test_sec4_xss_in_error_description_escaped","TestHelpers.navigate_and_get_content"],["LifeSimStage.__init__","BasePage.__init__"],["UserMetricsRepository.__init__","ScoreHistoryRepository.__init__"],["ExtractionStage.__init__","ConfigLoader.__init__"],["TelegramBot.send_message","escape_html"],["MockStage.__init__","GmailHelper.__init__"],["TouchpointStage.__init__","TouchpointEngine.__init__"],["ProfileRepository.__init__","VoiceService.__init__"],["UserRepository.__init__","SupabaseMemory.__init__"],["MockStage.__init__","JobExecutionRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DashboardPage.__init__"],["VicePreferenceRepository.__init__","OTPFlowE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StageError.__init__"],["RecoveryManager.check_point_of_no_return","_get_game_over_reason"],["LifeSimulator.generate_next_day_events","NarrativeArcManager.get_active_arcs"],["ResponseDelivery._send_now","ResponseDelivery._split_message"],["create_app","global_exception_handler"],["test_critical_stage_failure_fast_abort","TelegramLinkRepository.__init__"],["EmotionalStage.__init__","SocialCircleGenerator.__init__"],["TestExtractionStage.test_extraction_no_conversation_raises","_make_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SocialCircleRepository.__init__"],["ConversationRepository.__init__","ScheduledEventRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","MissingVariableError.__init__"],["MemoryFactRepository.__init__","TelegramAuth.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointScheduler.__init__"],["UserMetricsRepository.__init__","ProfileRepository.__init__"],["MissingVariableError.__init__","TranscriptManager.__init__"],["FakeStage.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DashboardE2ETest.__init__"],["FakeStage.__init__","ExtractionStage.__init__"],["HandoffManager.execute_handoff_with_voice_callback","initiate_nikita_callback"],["TestPromptStorage.test_storage_failure_doesnt_crash_stage","_make_context"],["ConversationsPage.build_verification_sequence","js_wait_for_conversations_loaded"],["ProfileRepository.get_by_user_id","BaseRepository.get"],["StateStore.update_state","StateStore.get_current_state"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NarrativeArcManager.__init__"],["TestProcessingStatsEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["BackstoryRepository.__init__","GameStateStage.__init__"],["TouchpointStage.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictStage.__init__"],["EngagementStateRepository.__init__","TouchpointScheduler.__init__"],["BreakupManager.get_relationship_status","BossStateMachine.check_threshold"],["TestErrorLogEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InMemoryCache.__init__"],["LifeSimStage.__init__","VoiceOnboardingFlow.__init__"],["FakeStage.__init__","InboundCallHandler.__init__"],["LoginPage.__init__","OnboardingHandler.__init__"],["MessageHandler.handle","ServerToolHandler.handle"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EmotionalStage.__init__"],["TestAuditLogsEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["MemoryUpdateStage.__init__","DashboardPage.__init__"],["test_context","create"],["MockEmbeddingClient.embed_batch","MockEmbeddingClient.embed"],["UserMetricsRepository.__init__","EventGenerator.__init__"],["OnboardingStateRepository.get_or_create","TouchpointStore.get"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","TestTelegramAuth.store_impl"],["TestUserDetailEndpoint.app","TestConversationListEndpoint.mock_get_session"],["DatabaseRateLimiter.check","_get_day_window"],["ScoreHistoryRepository.__init__","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","CommandHandler.__init__"],["DatabaseRateLimiter.check","RateLimiter._seconds_until_midnight"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","TestHelpers.navigate_and_get_content"],["EngagementStateRepository.__init__","TouchpointStore.__init__"],["TouchpointStage.__init__","TranscriptManager.__init__"],["ScoreHistoryRepository.__init__","BaseStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ServerToolHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScheduledEventRepository.__init__"],["TestPipelineOrchestratorTiming.test_per_stage_timing_recorded","_make_orchestrator"],["PiiSafeFormatter.__init__","ConversationRepository.__init__"],["ScoreHistoryRepository.__init__","TokenEstimator.__init__"],["MemoryUpdateStage.__init__","NarrativeArcManager.__init__"],["JobExecutionRepository.__init__","OTPFlowE2ETest.__init__"],["LoginPage.__init__","ElevenLabsConversationsClient.__init__"],["FakeStage.__init__","MockReadyPromptRepo.__init__"],["BackstoryRepository.__init__","ScoreAnalyzer.__init__"],["EngagementStateMachine.update","EngagementStateMachine._evaluate_transition"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BreakupManager.__init__"],["TestRateLimiter.test_ac_t024_2_tracks_per_minute_and_per_day_limits","mock_incr"],["MemoryUpdateStage.__init__","ConflictStage.__init__"],["GameStateStage.__init__","DatabaseRateLimiter.__init__"],["test_critical_stage_failure_fast_abort","PunctuationProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PendingRegistrationRepository.__init__"],["SocialCircle.to_dict","MoodState.to_dict"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MemoryUpdateStage.__init__"],["GeneratedPromptRepository.__init__","UserMetricsRepository.__init__"],["MemoryUpdateStage.__init__","InMemoryCache.__init__"],["DashboardPage.__init__","DeliveryResult.__init__"],["TestP1ErrorHandling.test_ep1_otp_expired_shows_expiry_message","TestHelpers.navigate_and_get_content"],["UserRepository.is_onboarded","PackageStore.get"],["ConversationsPage.__init__","TokenCounter.__init__"],["test_critical_stage_failure_fast_abort","DailySummaryRepository.__init__"],["ClinginessDetector._length_ratio_signal","UserMetricsRepository._clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ReadyPromptRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramAuth.__init__"],["VicePreferenceRepository.__init__","NarrativeArcSystem.__init__"],["MissingVariableError.__init__","MetaInstructionEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LengthAdjuster.__init__"],["BreakupManager.get_relationship_status","BreakupManager.check_threshold"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LoginPage.__init__"],["DashboardPage.__init__","SkipDecision.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","__init__"],["InboundCallHandler._get_conversation_config_override","ServerToolHandler._try_load_ready_prompt"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MetaNikitaConfig.__init__"],["MissingVariableError.__init__","BaseStage.__init__"],["FakeStage.__init__","ProfileCollector.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","TestSessionPersistence.get_user_by_telegram_id"],["MissingVariableError.__init__","TokenEstimator.__init__"],["LifeSimStage.__init__","FullJourneyOrchestrator.__init__"],["TestResponseTimer.test_calculate_delay_within_chapter_range","mock_production_settings"],["ReadyPromptRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["BackstoryRepository.__init__","TokenBudgetManager.__init__"],["build_meta_nikita_config_override","build_meta_nikita_config_override"],["TestMemoryUpdateStage.test_memory_update_fact_error_continues","_mock_session"],["UserRepository.update_settings","PendingRegistrationRepository.get"],["BaseRepository.delete","TouchpointStore.delete"],["NikitaThoughtRepository.__init__","OnboardingHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramLinkRepository.__init__"],["GameStateStage.__init__","InboundCallHandler.__init__"],["TestUserMemoryEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageSplitter.__init__"],["LifeSimStage.__init__","VicePreferenceRepository.__init__"],["MemoryUpdateStage.__init__","ScheduledEventRepository.__init__"],["LifeEvent.model_dump_for_db","DynamicVariables.to_dict"],["VoiceOnboardingFlow.handle_onboard_command","can_resume_onboarding"],["InMemoryCache.get","get"],["ExtractionStage.__init__","TouchpointScheduler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","JourneyReport.__init__"],["ProfileRepository.__init__","UserMetricsRepository.__init__"],["PiiSafeFormatter.__init__","BreakupManager.__init__"],["FakeStage.__init__","TouchpointEngine.__init__"],["EngagementStateRepository.__init__","__init__"],["TextPatternProcessor.process","TextPatternProcessor._detect_context"],["TestUserListEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["EmotionalStage.__init__","EmojiProcessor.__init__"],["ConversationConfigBuilder.build_config","ConversationConfigBuilder._generate_system_prompt"],["TokenEstimator.estimate_accurate","estimate_fast"],["ConversationThreadRepository.__init__","VoiceSessionManager.__init__"],["UserRepository.advance_chapter","OnboardingStateRepository.get"],["ConversationsPage.__init__","ServerToolHandler.__init__"],["PiiSafeFormatter.__init__","LengthAdjuster.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VenueCacheRepository.__init__"],["test_critical_stage_failure_fast_abort","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BreakupManager.__init__"],["DatabaseRateLimiter.get_remaining","DatabaseRateLimiter._get_day_window"],["TestConversationPromptsEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","MemoryUpdateStage.__init__"],["BackstoryRepository.__init__","MockResult.__init__"],["ExtractionStage.__init__","TouchpointStore.__init__"],["SummaryStage.__init__","ViceScorer.__init__"],["NikitaThoughtRepository.__init__","ElevenLabsConversationsClient.__init__"],["TouchpointStage.__init__","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenValidator.__init__"],["GameStateStage.__init__","MockReadyPromptRepo.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GmailMCPClient.__init__"],["DashboardPage.__init__","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LengthAdjuster.__init__"],["TouchpointStage.__init__","BaseStage.__init__"],["ExtractionStage.__init__","EmotionalStage.__init__"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step1_navigate_command"],["OnboardingHandler.handle","OnboardingHandler._handle_interest_step"],["MockAgentHelper.patch_get_nikita_agent_for_user","MockAgentHelper.mock_get_agent"],["FakeStage.__init__","TriggerDetector.__init__"],["TouchpointStage.__init__","TokenEstimator.__init__"],["ConversationsPage.__init__","PendingRegistrationRepository.__init__"],["TestOTPFlowSteps.test_step3_otp_parsing","OTPFlowE2ETest.step3_parse_otp_from_email"],["ConflictStage.__init__","ConversationsPage.__init__"],["ClinginessDetector.detect","_frequency_signal"],["UserRepository.__init__","SocialCircleGenerator.__init__"],["ConflictStage.__init__","LifeSimStage.__init__"],["PackageStore.exists","InMemoryCache.get"],["MemoryFactRepository.__init__","FactExtractor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingStateRepository.__init__"],["TestConversationListEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["TestUserListEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["TestUserDetailEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["JobExecutionRepository.__init__","NarrativeArcSystem.__init__"],["StageError.__init__","ServerToolHandler.__init__"],["PromptBuilderStage.__init__","ResolutionManager.__init__"],["GameStateStage.__init__","ProfileCollector.__init__"],["TestPipelineOrchestratorNonCriticalFailure.test_non_critical_exception_continues","_make_orchestrator"],["BackstoryRepository.__init__","RegistrationHandler.__init__"],["UserRepository.delete_user_cascade","OnboardingStateRepository.get"],["LoginPage.__init__","ScoringService.__init__"],["EntityManager.entity_exists","EntityManager.entity_exists"],["VicePreferenceRepository.__init__","ConversationRepository.__init__"],["BackstoryRepository.__init__","LifeSimulator.__init__"],["BaseRepository.delete_by_id","get"],["MemoryFactRepository.__init__","DeliveryResult.__init__"],["BackstoryRepository.__init__","PreferenceConfigurator.__init__"],["TestRateLimiter.test_daily_limit_exceeded_blocks_message","mock_incr"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestDailySummaryRepositoryContextEngineering.__init__"],["EmotionalStage.__init__","DashboardPage.__init__"],["PromptBuilderStage.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","TextPatternProcessor.__init__"],["MemoryFactRepository.__init__","SkipDecision.__init__"],["get_agent_id","get_elevenlabs_config"],["ConflictStage.__init__","PackageStore.__init__"],["FakeStage.__init__","TranscriptManager.__init__"],["GameStateStage.__init__","TouchpointEngine.__init__"],["DailySummaryRepository.__init__","BaseRepository.__init__"],["EmotionalStage.__init__","SocialCircleRepository.__init__"],["EvidenceCollector.start_phase","log"],["NarrativeArcRepository.resolve_arc","advance_arc"],["OnboardingStateRepository.update_step","PendingRegistrationRepository.get"],["ConversationRepository.__init__","RateLimiter.__init__"],["StageError.__init__","PendingRegistrationRepository.__init__"],["ScoreHistoryRepository.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PunctuationProcessor.__init__"],["PackageStore.delete","PackageStore.delete"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PipelineOrchestrator.__init__"],["MemoryFactRepository.__init__","AuditLog.__init__"],["PromptLoader.load","_resolve_path"],["get_pii_safe_logger","get_pii_safe_logger"],["ExtractionStage.__init__","__init__"],["MockStage.__init__","NarrativeArcSystem.__init__"],["BackstoryRepository.__init__","MessageGenerator.__init__"],["SocialCircle.to_dict","PsychologicalState.to_dict"],["UserNotFoundError.__init__","MissingVariableError.__init__"],["ConversationThreadRepository.__init__","JourneyReport.__init__"],["EmotionalStage.__init__","NarrativeArcManager.__init__"],["RecoveryManager.apply_decay_recovery","RecoveryManager._get_de_escalated_state"],["TestBossEncountersEndpoint.app","TestVoiceStats.mock_admin_auth"],["GeneratedPromptRepository.__init__","MessageSplitter.__init__"],["LifeSimStage.__init__","BackstoryRepository.__init__"],["PiiSafeFormatter.__init__","Phase2Conversation.__init__"],["ReadyPromptRepository.__init__","TouchpointStage.__init__"],["StageError.__init__","VenueCacheRepository.__init__"],["LifeSimStage.__init__","ConversationsE2ETest.__init__"],["VicePromptInjector.inject","_build_vice_section"],["EmotionalStage.__init__","ConflictStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EventStore.__init__"],["UserRepository.update_last_interaction","get"],["ConversationsPage.__init__","TelegramAuth.__init__"],["SocialCircleGenerator.generate_social_circle","_apply_job_adaptations"],["GameStateStage.__init__","TriggerDetector.__init__"],["GeneratedPromptRepository.__init__","BasePage.__init__"],["EmotionalStage.__init__","InMemoryCache.__init__"],["ReadyPromptRepository.__init__","EvidenceCollector.__init__"],["PromptBuilderStage.__init__","OTPFlowE2ETest.__init__"],["MissingVariableError.__init__","VoiceSessionManager.__init__"],["SituationDetector._detect_situation_type","SituationDetector._is_morning"],["DailySummaryRepository.__init__","NarrativeArcRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase2Conversation.__init__"],["LifeSimStage.__init__","SummaryStage.__init__"],["TestUserListEndpointAuditLogging.app","TestPipelineStatusEndpoint.mock_get_session"],["LifeSimStage.__init__","EngagementStateRepository.__init__"],["NikitaThoughtRepository.__init__","ScoringService.__init__"],["ProfileRepository.__init__","MessageSplitter.__init__"],["WebhookTestData.create","generate_test_email"],["Phase3Portal.extract_magic_link","OTPEmailParser.extract_magic_link"],["mock_text_patterns","passthrough"],["LoginPage.__init__","TestUserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","FactExtractor.__init__"],["EngagementStateRepository.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConfigLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TextPatternProcessor.__init__"],["VicePreferenceRepository.__init__","VoiceCallScorer.__init__"],["TestProcessingStatsEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["DailySummaryRepository.__init__","EscalationManager.__init__"],["EmotionalStage.__init__","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","ConversationRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StrategicSilence.__init__"],["ReadyPromptRepository.__init__","VoiceAgentConfig.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RateLimiter.__init__"],["ProfileRepository.__init__","BasePage.__init__"],["AuditLog.__init__","ResolutionManager.__init__"],["BackstoryRepository.__init__","VoiceService.__init__"],["EscalationManager.get_escalation_timeline","_get_time_in_level"],["TestTimeoutFallback.test_timeout_fallback_includes_error_message","timeout_function"],["LifeSimStage.__init__","TelegramBot.__init__"],["UserRepository.update_settings","InMemoryCache.get"],["downgrade","column_exists"],["GameStateStage.__init__","TranscriptManager.__init__"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow.get_phone_request_message"],["test_critical_stage_failure_fast_abort","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase1Registration.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DeliveryResult.__init__"],["TestOTPFlowSteps.test_step2_email_submission","OTPFlowE2ETest.step2_send_email"],["AuditLog.__init__","ExperimentLoader.__init__"],["LifeSimStage.__init__","HistoryLoader.__init__"],["DashboardPage.__init__","TelegramWebhookSimulator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SkipDecision.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingHandler.__init__"],["FakeStage.__init__","MetaInstructionEngine.__init__"],["EmotionalStage.__init__","MemoryUpdateStage.__init__"],["UserMetricsRepository.__init__","TokenCounter.__init__"],["FakeStage.__init__","BaseStage.__init__"],["LifeSimStage.__init__","Phase3Portal.__init__"],["GeneratedPromptRepository.__init__","VoiceOnboardingFlow.__init__"],["EmotionalStage.__init__","ReadyPromptRepository.__init__"],["TouchpointStage.__init__","VoiceSessionManager.__init__"],["FakeStage.__init__","TokenEstimator.__init__"],["SituationDetector.detect","_build_metadata"],["MockStage.__init__","ConversationRepository.__init__"],["TestInboundReadyPrompt.test_uses_voice_platform","_make_handler"],["HistoryLoader.load","TokenBudgetManager._truncate_to_budget"],["test_critical_stage_failure_fast_abort","TouchpointStore.__init__"],["BackstoryRepository.__init__","PiiSafeFormatter.__init__"],["UserNotFoundError.__init__","SessionDetector.__init__"],["OTPEmailParser.parse_magic_link_email","extract_pkce_code"],["TestUserDetailEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictGenerator.__init__"],["GeneratedPromptRepository.__init__","PipelineOrchestrator.__init__"],["ReadyPromptRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GeneratedPromptRepository.__init__"],["MemoryUpdateStage.__init__","TextPatternProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ExtractionStage.__init__"],["MemoryUpdateStage.__init__","RateLimiter.__init__"],["InstructionSelector.select","InstructionSelector._parse_instruction"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ElevenLabsConversationsClient.__init__"],["TestConversationPromptsEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MissingVariableError.__init__"],["ProfileRepository.__init__","VoiceOnboardingFlow.__init__"],["AuditLog.__init__","OTPFlowE2ETest.__init__"],["NikitaThoughtRepository.__init__","TestUserMetricsRepository.__init__"],["NarrativeArcManager.maybe_resolve_arcs","EventStore.get_active_arcs"],["UserMetricsRepository.__init__","ServerToolHandler.__init__"],["DailySummaryRepository.__init__","ScoreHistoryRepository.__init__"],["TestSessionDetector.test_detect_and_queue_skips_failed_marks","mock_mark"],["TestUIUX.test_error_page_has_telegram_link","TestHelpers.navigate_and_get_content"],["ElevenLabsConversationsClient.list_conversations","ElevenLabsConversationsClient._headers"],["CalibrationCalculator._content_component","_clamp"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceScorer.__init__"],["DashboardPage.__init__","VenueResearchService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PortalLoginE2ETest.__init__"],["LoginPage.__init__","StrategicSilence.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LifeSimStage.__init__"],["ProfileRepository.update_from_onboarding","UserRepository.get"],["SummaryStage.__init__","LoginPage.__init__"],["get_current_admin_user","_is_admin_email"],["JobExecutionRepository.__init__","VoiceCallScorer.__init__"],["DashboardPage.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SessionDetector.__init__"],["ProfileRepository.__init__","PipelineOrchestrator.__init__"],["LengthAdjuster.is_within_bounds","_get_config"],["TestPortalLoginFlow.test_magic_link_extraction","PortalLoginTestContext.create"],["ExtractionStage.__init__","EventStore.__init__"],["TestSystemOverviewEndpoint.app","mock_admin_auth"],["NarrativeArcRepository._count_active_arcs","EventStore.get_active_arcs"],["LoginPage.build_login_sequence","LoginPage.js_wait_for_magic_link_sent"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationThreadRepository.__init__"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser.extract_magic_link"],["EngagementStateRepository.__init__","MissingVariableError.__init__"],["TestCriticalFailureE2E.test_memory_update_failure_stops_pipeline","make_pipeline"],["VicePreferenceRepository.__init__","GameStateStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InstructionSelector.__init__"],["VoiceOnboardingFlow._initiate_call","VoiceOnboardingFlow.initiate_onboarding_call"],["DailySummaryRepository.__init__","SupabaseHelper.__init__"],["run_manual_otp_test","OTPTestContext.create"],["UserMetricsRepository.__init__","PendingRegistrationRepository.__init__"],["DashboardPage.__init__","EmojiProcessor.__init__"],["UserRepository.__init__","DashboardPage.__init__"],["TestSystemOverviewEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["OnboardingStateRepository.update_step","InMemoryCache.get"],["TestExtractionStage.test_extraction_llm_failure_raises_stage_error","_make_context"],["StateStore.get_current_state","_row_to_state"],["GameStateStage.__init__","MetaInstructionEngine.__init__"],["test_context","BaseRepository.create"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","AuditLog.__init__"],["SummaryStage.__init__","VoiceCallVerifier.__init__"],["GameStateStage.__init__","BaseStage.__init__"],["ExperimentLoader._load_experiment_with_inheritance","_load_experiment_with_inheritance"],["test_critical_stage_failure_fast_abort","__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StageError.__init__"],["GameStateStage.__init__","TokenEstimator.__init__"],["MockStage.__init__","VoiceCallScorer.__init__"],["UserNotFoundError.__init__","SocialCircleGenerator.__init__"],["VenueResearchService.research_venues","_parse_search_results"],["VoiceService.initiate_call","VoiceService._generate_signed_token"],["SituationDetector._detect_situation_type","SituationDetector._is_evening"],["LoginPage.__init__","ConflictGenerator.__init__"],["ReadyPromptRepository.__init__","PsychologyMapper.__init__"],["UserRepository.__init__","NarrativeArcManager.__init__"],["OnboardingStateRepository.get_or_create","UserRepository.get"],["TestDecayProcessorProcessUser.test_process_user_applies_decay_when_overdue","create_mock_user"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DashboardE2ETest.__init__"],["InstructionSelector.instruction_library","_load_instructions"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointScheduler.__init__"],["ProfileRepository.__init__","FullJourneyOrchestrator.__init__"],["ConversationsPage.__init__","FactExtractor.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step6_extract_data_js"],["UserRepository.__init__","ConflictStage.__init__"],["BackstoryRepository.__init__","UserMetricsRepository.__init__"],["TestPipelineStatusEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["VenueCacheRepository.cleanup_expired","delete"],["UserRepository.__init__","InMemoryCache.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","TouchpointEngine._compute_hours_since_contact"],["TestConflictStage.test_conflict_cold_early_chapter_no_trigger","_mock_session"],["VicePreferenceRepository.__init__","ScoreAnalyzer.__init__"],["SummaryStage.__init__","OnboardingStateRepository.__init__"],["mock_session_factory","TestEventStore.factory"],["NikitaThoughtRepository.__init__","StrategicSilence.__init__"],["PiiSafeFormatter.__init__","StageError.__init__"],["LoginPage.__init__","LifeSimStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SessionDetector.__init__"],["ConversationsPage.__init__","DeliveryResult.__init__"],["GeneratedPromptRepository.__init__","EngagementStateMachine.__init__"],["DashboardPage.__init__","StateStore.__init__"],["TokenValidator.truncate","count_tokens"],["BaseRepository.update","VenueCacheRepository.session"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointStore.__init__"],["LifeSimulator.get_active_arcs","NarrativeArcRepository.get_active_arcs"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoringService.__init__"],["ConversationsPage.__init__","SkipDecision.__init__"],["DashboardPage.__init__","SocialCircleRepository.__init__"],["ConflictStage.__init__","TelegramLinkRepository.__init__"],["PromptBuilderStage.__init__","ConversationRepository.__init__"],["UserMetricsRepository.__init__","TelegramAuth.__init__"],["TestUserDetailEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["UserRepository.__init__","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","GameStateStage.__init__"],["FakeStage.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StageError.__init__"],["MemoryFactRepository.__init__","VenueResearchService.__init__"],["ExtractionStage.__init__","MissingVariableError.__init__"],["LifeSimStage.__init__","ScoreCalculator.__init__"],["MockEmbeddingClient.embed_batch","embed"],["StageError.__init__","FactExtractor.__init__"],["ConversationThreadRepository.__init__","ConversationsPage.__init__"],["ConversationsPage.__init__","AuditLog.__init__"],["TestDecayProcessorProcessUser.test_process_user_returns_none_when_within_grace","create_mock_user"],["TouchpointScheduler.evaluate_user","_can_trigger_after_recent"],["UserNotFoundError.__init__","TelegramWebhookSimulator.__init__"],["ConversationThreadRepository.__init__","LifeSimStage.__init__"],["TestP0CriticalHappyPath.test_ep6_invalid_jwt_format_returns_error","navigate_and_get_content"],["TestHaikuEnrichment.test_enrichment_called_when_api_key_present","_make_context"],["EngagementStateRepository.__init__","SessionDetector.__init__"],["TestWebhookSignatureValidation.test_valid_signature_accepted","create_webhook_signature"],["ScoringService.score_batch","_log_history"],["GeneratedPromptRepository.__init__","PortalLoginE2ETest.__init__"],["_get_encoder","encoder"],["ConflictDetector.detect_conflict_state","_can_transition"],["DashboardPage.__init__","NarrativeArcManager.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","TouchpointStore.create"],["DashboardPage.__init__","DecayProcessor.__init__"],["StageError.__init__","ViceScorer.__init__"],["ProfileRepository.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DashboardE2ETest.__init__"],["ProfileRepository.get_by_user_id","OnboardingStateRepository.get"],["PromptBuilderStage._enforce_token_budget","_truncate_prompt"],["UserRepository.__init__","MemoryUpdateStage.__init__"],["NikitaThoughtRepository.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MemoryFactRepository.__init__"],["DashboardPage.__init__","MoodCalculator.__init__"],["generate_first_nikita_message","generate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GmailHelper.__init__"],["MemoryFactRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["MockStage.__init__","GameStateStage.__init__"],["EmotionalStage.__init__","RateLimiter.__init__"],["RateLimiter.check","expire"],["VicePreferenceRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","JobExecutionRepository.__init__"],["ConversationThreadRepository.__init__","PackageStore.__init__"],["ScoreHistoryRepository.__init__","TestVicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramWebhookSimulator.__init__"],["ProfileRepository.__init__","PortalLoginE2ETest.__init__"],["TestPipelineOrchestratorHappyPath.test_all_stages_called_in_order","BaseStage.execute"],["PiiSafeFormatter.__init__","CommandHandler.__init__"],["StageError.__init__","AuditLog.__init__"],["LifeSimStage.__init__","ResponseDelivery.__init__"],["_ChapterBehaviorsProxy.values","_load_chapter_behaviors"],["DatabaseRateLimiter.check","DatabaseRateLimiter._get_day_window"],["PromptBuilderStage.__init__","BreakupManager.__init__"],["GeneratedPromptRepository.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SocialCircleGenerator.__init__"],["TestConflictStage.test_conflict_emotional_distance_triggers","_make_context"],["TestConversationListEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","__init__"],["TestPipelineContext.test_record_stage_error","_make_ctx"],["JobExecutionRepository.__init__","ScoreAnalyzer.__init__"],["UserNotFoundError.__init__","VenueResearchService.__init__"],["TestGameStateStage.test_game_state_returns_defaults","_make_context"],["UserRepository.complete_onboarding","BaseRepository.get"],["RateLimiter.check","InMemoryCache.incr"],["SupabaseMemory.get_context_for_prompt","search"],["UserNotFoundError.__init__","PromptLoader.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","CommandHandler.__init__"],["PromptBuilderStage.__init__","LengthAdjuster.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestUserMetricsRepository.__init__"],["test_critical_stage_failure_fast_abort","EventStore.__init__"],["BaseRepository.update","BaseRepository.get"],["ScoreHistoryRepository.__init__","ConversationsPage.__init__"],["LifeSimStage.__init__","EntityManager.__init__"],["VicePreferenceRepository.__init__","RegistrationHandler.__init__"],["GameStateStage.__init__","VoiceSessionManager.__init__"],["StateComputer._apply_life_event_deltas","_apply_life_event_deltas"],["ProfileRepository.create_profile","OTPTestContext.create"],["MissingVariableError.__init__","TestVicePreferenceRepository.__init__"],["EngagementStateRepository.__init__","SocialCircleGenerator.__init__"],["UserNotFoundError.__init__","EmojiProcessor.__init__"],["EventDeliveryHandler.deliver","EventDeliveryHandler._mark_delivered"],["UserRepository.update_onboarding_profile","BaseRepository.get"],["EmotionalStage.__init__","GeneratedPromptRepository.__init__"],["ProfileRepository.__init__","ConversationsE2ETest.__init__"],["DashboardPage.__init__","MemoryUpdateStage.__init__"],["ConflictStage.__init__","PunctuationProcessor.__init__"],["MemoryFactRepository.__init__","StateStore.__init__"],["TestProcessingStatsEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["TestOTPFlowSteps.test_step5_verification_parsing","BackstoryRepository.create"],["ElevenLabsConversationsClient.get_conversation","ElevenLabsConversationsClient._headers"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler._trigger_handoff"],["DashboardPage.__init__","ReadyPromptRepository.__init__"],["MockStage.__init__","ScoreAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VenueResearchService.__init__"],["_ChapterBehaviorsProxy.get","PendingRegistrationRepository.get"],["ConflictStage.__init__","DailySummaryRepository.__init__"],["GeneratedPromptRepository.__init__","TelegramBot.__init__"],["should_apply_silence","apply_strategic_silence"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResolutionManager.__init__"],["ExtractionStage.__init__","SessionDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PromptLoader.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","FakeStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenValidator.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","get_email_impl"],["ScoreHistoryRepository.__init__","PackageStore.__init__"],["PiiSafeFormatter.__init__","ViceService.__init__"],["GeneratedPromptRepository.__init__","HistoryLoader.__init__"],["VicePreferenceRepository.__init__","MessageGenerator.__init__"],["TestUserScoresEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["MissingVariableError.__init__","ConversationsPage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EmojiProcessor.__init__"],["BackstoryRepository.__init__","BasePage.__init__"],["MemoryFactRepository.__init__","DecayProcessor.__init__"],["BackstoryRepository.create_from_scenario","TouchpointStore.create"],["ReadyPromptRepository.__init__","DecayCalculator.__init__"],["JobExecutionRepository.__init__","MockResult.__init__"],["MockStage.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LoginPage.__init__"],["PendingRegistrationRepository.get_email","PendingRegistrationRepository.get"],["ProfileRepository.__init__","TelegramBot.__init__"],["BaseRepository.session","TestCriticalFailureE2E.session"],["TestUserMemoryEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["MemoryFactRepository.__init__","MoodCalculator.__init__"],["TouchpointEngine._deliver_single","_generate_message"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceService.__init__"],["ReadyPromptRepository.__init__","TTSConfigService.__init__"],["ViceScorer.process_signals","process_signals"],["TouchpointStage.__init__","TestVicePreferenceRepository.__init__"],["ProfileRepository.__init__","HistoryLoader.__init__"],["LoginPage.__init__","NikitaThoughtRepository.__init__"],["ConflictStage.__init__","ConfigLoader.__init__"],["PiiSafeFormatter.__init__","UserNotFoundError.__init__"],["EngagementStateRepository.__init__","TelegramWebhookSimulator.__init__"],["ReadyPromptRepository.__init__","OTPVerificationHandler.__init__"],["UserNotFoundError.__init__","DashboardPage.__init__"],["AuditLog.__init__","BreakupManager.__init__"],["TestPipelineOrchestratorNonCriticalFailure.test_multiple_non_critical_failures","_make_orchestrator"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._compute_nikita_activity"],["MissingVariableError.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceCallVerifier.__init__"],["ProfileRepository.__init__","Phase3Portal.__init__"],["UserNotFoundError.__init__","SocialCircleRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StrategicSilence.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictStore.__init__"],["MockStage.__init__","MockResult.__init__"],["ExtractionStage._run","ViceAnalyzer._get_agent"],["PromptBuilderStage.__init__","Phase2Conversation.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OTPFlowE2ETest.__init__"],["JobExecutionRepository.__init__","RegistrationHandler.__init__"],["AuditLog.__init__","LengthAdjuster.__init__"],["build_dynamic_variables","build_from_user"],["UserMetricsRepository.__init__","FactExtractor.__init__"],["test_critical_stage_failure_fast_abort","MissingVariableError.__init__"],["VicePreferenceRepository.__init__","VoiceService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingStateRepository.__init__"],["ExtractionStage.__init__","SocialCircleGenerator.__init__"],["UserNotFoundError.__init__","NarrativeArcManager.__init__"],["TestBossEncountersEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramLinkRepository.__init__"],["TestPromptBuilderStage.test_prompt_builder_placeholder","_mock_session"],["ConflictStore.increment_resolution_attempts","ConflictStore.update_conflict"],["GeneratedPromptRepository.__init__","MessageHandler.__init__"],["LifeSimStage.__init__","ConversationConfigBuilder.__init__"],["BackstoryRepository.__init__","VoiceOnboardingFlow.__init__"],["OnboardingStateRepository.add_answer","_ChapterBehaviorsProxy.get"],["VoiceCallVerifier.verify_all","_verify_database"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StateStore.__init__"],["LoginPage.__init__","FakeStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SocialCircleRepository.__init__"],["UserMetricsRepository.__init__","DeliveryResult.__init__"],["UserNotFoundError.__init__","MoodCalculator.__init__"],["LifeSimStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["BackstoryRepository.create_from_scenario","BackstoryRepository.create"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EventStore.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestDailySummaryRepositoryContextEngineering.__init__"],["BackstoryRepository.__init__","PipelineOrchestrator.__init__"],["TestUserMemoryEndpoint.app","mock_get_session"],["UserMetricsRepository.__init__","SkipDecision.__init__"],["MockStage.__init__","RegistrationHandler.__init__"],["JobExecutionRepository.__init__","MessageGenerator.__init__"],["MemoryFactRepository.__init__","InstructionSelector.__init__"],["ConversationRepository.__init__","BaseRepository.__init__"],["TestExtractionStage.test_extraction_no_conversation_raises","_mock_session"],["TestVoicePerformance.test_load_under_100ms","_make_server_handler"],["UserRepository.__init__","TextPatternProcessor.__init__"],["EngagementStateRepository.__init__","PromptLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictGenerator.__init__"],["TouchpointStage.__init__","PackageStore.__init__"],["MockStage.__init__","PreferenceConfigurator.__init__"],["UserRepository.__init__","RateLimiter.__init__"],["UserMetricsRepository.__init__","AuditLog.__init__"],["ProfileRepository.__init__","MessageHandler.__init__"],["ProfileCollector.get_missing_fields","get_profile"],["VicePreferenceRepository.__init__","PiiSafeFormatter.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DecayProcessor.__init__"],["DynamicVariablesBuilder.build_from_context","_build_context_block"],["ConfigLoader.__init__","ConfigLoader._load_all_configs"],["TestConversationPromptsEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResponseTimer.__init__"],["PendingRegistrationRepository.delete","PendingRegistrationRepository.delete"],["StageError.__init__","LoginPage.__init__"],["ConflictStore.escalate_conflict","update_conflict"],["ClinginessDetector._double_text_signal","UserMetricsRepository._clamp"],["NikitaThoughtRepository.__init__","NikitaThoughtRepository.__init__"],["UserNotFoundError.__init__","ScheduledEventRepository.__init__"],["EngagementStateRepository.__init__","EmojiProcessor.__init__"],["LifeEvent.model_dump_for_db","TriggerContext.to_dict"],["ReadyPromptRepository.__init__","MetaNikitaConfig.__init__"],["TestHaikuEnrichment.test_enrichment_skipped_when_no_api_key","_make_context"],["SocialCircle.to_dict","FriendCharacter.to_dict"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MoodCalculator.__init__"],["OTPEmailParser.parse_otp_email","OTPEmailParser.extract_otp_code"],["MockStage.__init__","MessageGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LifeSimStage.__init__"],["TestFullPipelineE2E.test_full_voice_pipeline","make_pipeline"],["ConversationsPage.__init__","VenueResearchService.__init__"],["LoginPage.__init__","ViceAnalyzer.__init__"],["UserRepository.is_onboarded","get"],["TestUserListEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step1_navigate_command"],["ConversationRepository.__init__","NarrativeArcRepository.__init__"],["UserNotFoundError.__init__","MemoryUpdateStage.__init__"],["BackstoryRepository.__init__","FullJourneyOrchestrator.__init__"],["HandoffManager.initiate_nikita_callback","_get_post_onboarding_first_message"],["AuditLog.__init__","Phase2Conversation.__init__"],["LoginPage.__init__","TelegramLinkRepository.__init__"],["UserNotFoundError.__init__","ReadyPromptRepository.__init__"],["ViceBoundaryEnforcer.apply_cap","max_intensity_for_chapter"],["OptimalFrequencyCalculator.get_bounds","OptimalFrequencyCalculator.get_optimal"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DashboardPage.__init__"],["VoiceService.initiate_call","_load_context"],["NikitaThoughtRepository.__init__","FakeStage.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","TelegramLinkCode.create"],["_ChapterBehaviorsProxy.get","InMemoryCache.get"],["MissingVariableError.__init__","BackstoryGeneratorService.__init__"],["DailySummaryRepository.__init__","ServerToolHandler.__init__"],["GeneratedPromptRepository.__init__","VoiceCallVerifier.__init__"],["get_signed_url","VoiceService.initiate_call"],["test_critical_stage_failure_fast_abort","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SocialCircleRepository.__init__"],["MessageHandler.handle","handle"],["VicePreferenceRepository.__init__","UserNotFoundError.__init__"],["TestSystemOverviewEndpoint.app","TestTextStats.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockMappings.__init__"],["TestMemoryUpdateStage.test_classify_graph_type_relationship","_mock_session"],["ConversationRepository.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BaseRepository.__init__"],["NikitaThoughtRepository.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PunctuationProcessor.__init__"],["GeneratedPromptRepository.__init__","ScoreCalculator.__init__"],["GeneratedPromptRepository.__init__","ConflictStore.__init__"],["ConversationsPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step2_wait_js"],["main","JourneyReport.add_section"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DailySummaryRepository.__init__"],["TelegramLinkRepository.delete_for_user","PackageStore.delete"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._apply_hobby_adaptations"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PromptBuilderStage.__init__"],["TestUserDetailEndpoint.app","TestPipelineStatus.mock_admin_auth"],["FakeStage.__init__","TestVicePreferenceRepository.__init__"],["ConversationThreadRepository.__init__","TelegramLinkRepository.__init__"],["ReadyPromptRepository.__init__","GmailMCPClient.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step3_extract_all_js"],["TestP1ErrorHandling.test_ep3_access_denied_shows_invalid_message","navigate_and_get_content"],["TestServerToolsReadyPrompt.test_flag_disabled_skips","_make_server_handler"],["TTSConfigService.get_final_settings","get_chapter_settings"],["EngagementStateRepository.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NarrativeArcManager.__init__"],["PiiSafeFormatter.__init__","OnboardingHandler.__init__"],["ConflictStage.__init__","TouchpointScheduler.__init__"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_verify_conversations_exist"],["DailySummaryRepository.__init__","PendingRegistrationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ReadyPromptRepository.__init__"],["MockStage.__init__","VoiceService.__init__"],["StageError.__init__","OnboardingStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MissingVariableError.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InstructionSelector.__init__"],["SessionDetector.detect_and_queue","mark_for_processing"],["EngagementStateRepository.__init__","SocialCircleRepository.__init__"],["ProfileRepository.__init__","VoiceCallVerifier.__init__"],["JobExecutionRepository.__init__","PiiSafeFormatter.__init__"],["TestUserDetailEndpoint.app","TestVoiceStats.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictStage.__init__"],["TestPipelineStatusEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["TestUserListEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["ProfileRepository.__init__","ScoreCalculator.__init__"],["ProfileRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InMemoryCache.__init__"],["TestConversationListEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingHandler.__init__"],["VicePreferenceRepository.__init__","UserMetricsRepository.__init__"],["BackstoryRepository.__init__","EngagementStateMachine.__init__"],["DecayProcessor.process_user","should_skip_user"],["ExtractionStage.__init__","EmojiProcessor.__init__"],["EngagementStateRepository.__init__","NarrativeArcManager.__init__"],["FakeStage.__init__","ConversationsPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NarrativeArcRepository.__init__"],["DailySummaryRepository.__init__","VenueCacheRepository.__init__"],["LifeSimStage.__init__","TouchpointStage.__init__"],["StageError.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ConflictStage.__init__","TouchpointStore.__init__"],["NikitaThoughtRepository.__init__","ViceAnalyzer.__init__"],["MemoryFactRepository.__init__","GmailHelper.__init__"],["TouchpointStage.__init__","BackstoryGeneratorService.__init__"],["DashboardPage.__init__","GeneratedPromptRepository.__init__"],["PiiSafeFormatter.__init__","ElevenLabsConversationsClient.__init__"],["MemoryFactRepository.__init__","JobExecutionRepository.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_cleanup_instructions"],["MemoryUpdateStage.__init__","BaseRepository.__init__"],["GeneratedPromptRepository.__init__","ResponseTimer.__init__"],["EngagementStateRepository.__init__","ConflictStage.__init__"],["LifeSimStage.__init__","EvidenceCollector.__init__"],["ConversationsPage.__init__","StateStore.__init__"],["EntityManager.entity_exists","EventStore.entity_exists"],["BaseStage.execute","StageResult.ok"],["EmojiProcessor._validate_existing_emojis","EmojiProcessor._count_emojis"],["NikitaThoughtRepository.__init__","TelegramLinkRepository.__init__"],["MockStage.__init__","PiiSafeFormatter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScheduledEventRepository.__init__"],["PackageStore.cleanup_expired","TelegramLinkRepository.delete"],["EngagementStateRepository.__init__","InMemoryCache.__init__"],["TestDecayProcessorShouldSkipUser.test_skip_game_over_status","create_mock_user"],["BackstoryRepository.__init__","PortalLoginE2ETest.__init__"],["TestConflictStage.test_conflict_no_trigger","_make_context"],["test_critical_stage_failure_fast_abort","SocialCircleGenerator.__init__"],["BaseRepository.update","TestMixedFailureE2E.session"],["ConflictDetector.check_escalation","_find_intermediate_state"],["TokenBudgetManager.allocate","TokenBudgetManager._truncate_to_budget"],["ConversationRepository.__init__","ScoreHistoryRepository.__init__"],["LifeEvent.model_dump_for_db","UserSocialCircle.to_dict"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ElevenLabsConversationsClient.__init__"],["PromptBuilderStage._generate_prompt","PromptBuilderStage._render_template"],["LoginPage.__init__","MockMappings.__init__"],["LoginPage.__init__","PunctuationProcessor.__init__"],["FakeStage.__init__","PackageStore.__init__"],["SummaryStage.__init__","ResolutionManager.__init__"],["TestCallScoring.test_call_scoring_applies_engagement_multiplier","capture_engagement"],["TestUserDetailEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["JobExecutionRepository.__init__","UserNotFoundError.__init__"],["ProfileCollector.get_missing_fields","ViceScorer.get_profile"],["ClinginessDetector._double_text_signal","StateComputer._clamp"],["LoginPage.__init__","DailySummaryRepository.__init__"],["LifeSimStage.__init__","VoiceAgentConfig.__init__"],["PendingRegistrationRepository.cleanup_expired","BaseRepository.delete"],["ProfileRepository.__init__","ResponseTimer.__init__"],["PromptBuilderStage.__init__","StageError.__init__"],["ConversationsPage.__init__","DecayProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MemoryUpdateStage.__init__"],["LoginPage.__init__","PromptBuilderStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationRepository.__init__"],["EngagementStateRepository.__init__","ScheduledEventRepository.__init__"],["GameStateStage.__init__","TestVicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InstructionSelector.__init__"],["ConversationRepository.__init__","SupabaseHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ReadyPromptRepository.__init__"],["TouchpointStage.__init__","EscalationManager.__init__"],["SummaryStage.__init__","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","ProfileRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","_ProfileFromAnswers.__init__"],["TestHaikuEnrichment.test_enrichment_result_used_when_successful","mock_enrich"],["MemoryUpdateStage.__init__","NarrativeArcRepository.__init__"],["ConversationsPage.__init__","MoodCalculator.__init__"],["NikitaThoughtRepository.__init__","ConversationConfigBuilder.__init__"],["ConversationThreadRepository.__init__","PunctuationProcessor.__init__"],["BackstoryRepository.__init__","BackstoryRepository.__init__"],["ExtractionStage.__init__","DashboardPage.__init__"],["TestAuditLogsEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["SocialCircleGenerator.generate_social_circle","_apply_meeting_adaptations"],["TestServerToolsReadyPrompt.test_returns_string","_make_server_handler"],["TestSummaryStage.test_summary_no_conversation_skips","_make_context"],["BackstoryRepository.__init__","ConversationsE2ETest.__init__"],["run_manual_otp_test","TelegramLinkCode.create"],["ExtractionStage.__init__","SocialCircleRepository.__init__"],["RateLimiter.check","_get_minute_key"],["ConflictStage.__init__","__init__"],["EngagementStateRepository.__init__","MemoryUpdateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SessionDetector.__init__"],["TestProcessingStatsEndpoint.app","TestVoiceStats.mock_admin_auth"],["PendingRegistrationRepository.delete","TouchpointStore.delete"],["JobExecutionRepository.__init__","UserMetricsRepository.__init__"],["MemoryUpdateStage.__init__","EscalationManager.__init__"],["EngagementStateRepository.__init__","ReadyPromptRepository.__init__"],["ReadyPromptRepository.__init__","ConflictDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StateComputer.__init__"],["BackstoryRepository.__init__","SummaryStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NikitaThoughtRepository.__init__"],["test_critical_stage_failure_fast_abort","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","JourneyReport.__init__"],["ExtractionStage.__init__","NarrativeArcManager.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","step3_extract_magic_link"],["TestConversationsE2E.test_empty_conversations","ConversationsE2ETest.step3_process_data"],["MissingVariableError.__init__","ProfileRepository.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_uses_chapter_specific_rates","create_mock_user"],["VoiceOnboardingFlow._initiate_call","initiate_onboarding_call"],["ConfigLoader.__new__","__new__"],["TokenEstimator.estimate","estimate_fast"],["ReadyPromptRepository.__init__","Phase1Registration.__init__"],["ScoreHistoryRepository.__init__","EventGenerator.__init__"],["ViceBoundaryEnforcer.max_intensity_for_chapter","max_intensity_for_chapter"],["SummaryStage.__init__","OTPFlowE2ETest.__init__"],["ExtractionStage.__init__","ConflictStage.__init__"],["TelegramLinkRepository.verify_code","get_by_code"],["atomic","decorator"],["BackstoryRepository.__init__","TelegramBot.__init__"],["NikitaThoughtRepository.__init__","MockMappings.__init__"],["ExtractionStage.__init__","InMemoryCache.__init__"],["PromptBuilderStage.__init__","CommandHandler.__init__"],["MockStage.__init__","UserMetricsRepository.__init__"],["MessageHandler.handle","MessageHandler._send_rate_limit_response"],["GameStateStage.__init__","PackageStore.__init__"],["ClinginessDetector._length_ratio_signal","_clamp"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SupabaseHelper.__init__"],["PiiSafeFormatter.__init__","ScoringService.__init__"],["ConversationThreadRepository.__init__","ConfigLoader.__init__"],["NikitaThoughtRepository.__init__","DailySummaryRepository.__init__"],["NikitaThoughtRepository.__init__","PromptBuilderStage.__init__"],["generate_social_circle_for_user","SocialCircleGenerator.generate_social_circle"],["InstructionSet.format_for_prompt","by_category"],["BackstoryRepository.__init__","HistoryLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","FakeStage.__init__"],["ConversationsPage.__init__","InstructionSelector.__init__"],["TouchpointStage.__init__","ScoreHistoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceCallScorer.__init__"],["UserMetricsRepository.__init__","VenueResearchService.__init__"],["BackstoryRepository.__init__","Phase3Portal.__init__"],["LoginPage.__init__","_ProfileFromAnswers.__init__"],["ReadyPromptRepository.__init__","ExtractionStage.__init__"],["VoiceService.initiate_call","InboundCallHandler._get_first_message"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoringService.__init__"],["ExtractionStage.__init__","ScheduledEventRepository.__init__"],["MissingVariableError.__init__","EventGenerator.__init__"],["AuditLog.__init__","StageError.__init__"],["DashboardPage.__init__","NarrativeArcSystem.__init__"],["UserRepository.update_game_status","BaseRepository.get"],["OnboardingServerToolHandler.configure_preferences","OnboardingServerToolHandler._persist_profile_to_db"],["test_critical_stage_failure_fast_abort","PromptLoader.__init__"],["GeneratedPromptRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SocialCircleGenerator.__init__"],["VicePreferenceRepository.__init__","BasePage.__init__"],["NarrativeArcManager.maybe_create_arc","get_active_arcs"],["TouchpointStage.__init__","ProfileRepository.__init__"],["MemoryUpdateStage.__init__","ScoreHistoryRepository.__init__"],["TestUserMemoryEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointScheduler.__init__"],["LoginPage.__init__","RecoveryManager.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_within_grace_returns_false","create_mock_user"],["LoginPage.__init__","StateComputer.__init__"],["StateComputer.compute","StateComputer._apply_life_event_deltas"],["ExtractionStage.__init__","MemoryUpdateStage.__init__"],["ProfileCollector.collect","_set_field"],["EmotionalStage.__init__","BaseRepository.__init__"],["test_critical_stage_failure_fast_abort","EmojiProcessor.__init__"],["TestBossEncountersEndpoint.app","TestThreadsList.mock_admin_auth"],["UserRepository.apply_decay","UserRepository.update_score"],["UserMetricsRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["load_message_history","PromptLoader.load"],["VoiceAgentConfig.get_agent_config","_get_chapter_tts_settings"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GmailHelper.__init__"],["LifeSimStage.__init__","PsychologyMapper.__init__"],["NeglectDetector.detect","_abrupt_ending_signal"],["PreferenceConfigurator.to_dict","get_preferences"],["ExtractionStage.__init__","ReadyPromptRepository.__init__"],["UserNotFoundError.__init__","GeneratedPromptRepository.__init__"],["ReadyPromptRepository.__init__","ConversationThreadRepository.__init__"],["PiiSafeFormatter.__init__","VicePreferenceRepository.__init__"],["MemoryUpdateStage.__init__","SupabaseHelper.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","JobExecutionRepository.__init__"],["PromptBuilderStage.__init__","ViceService.__init__"],["ProfileRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestUserMemoryEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["EmojiProcessor.process","_validate_existing_emojis"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceAnalyzer.__init__"],["VoiceService._load_context","VoiceService._compute_nikita_energy"],["ScoreHistoryRepository.__init__","ConfigLoader.__init__"],["BackstoryRepository.__init__","MessageHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VicePreferenceRepository.__init__"],["ServerToolHandler._get_context","VoiceService._compute_nikita_energy"],["StateComputer.compute","StateComputer._compute_base_state"],["TouchpointStage.__init__","EventGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EmotionalStage.__init__"],["PackageStore.cleanup_expired","BaseRepository.delete"],["PiiSafeFormatter.__init__","TestUserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramLinkRepository.__init__"],["TestConversationPromptsEndpoint.app","TestVoiceStats.mock_admin_auth"],["UserRepository.complete_onboarding","OnboardingStateRepository.get"],["OnboardingStateRepository.add_answer","TouchpointStore.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GeneratedPromptRepository.__init__"],["ReadyPromptRepository.__init__","MockReadyPromptRepo.__init__"],["AuditLog.__init__","CommandHandler.__init__"],["VicePreferenceRepository.__init__","VoiceOnboardingFlow.__init__"],["LengthAdjuster.adjust","LengthAdjuster._get_config"],["TestExtractionStage.test_extraction_happy_path","_make_context"],["ConflictStage.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramWebhookSimulator.__init__"],["NikitaThoughtRepository.__init__","_ProfileFromAnswers.__init__"],["EmotionalStage.__init__","NarrativeArcRepository.__init__"],["PromptBuilderStage.__init__","UserNotFoundError.__init__"],["TestUserDetailEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase2Conversation.__init__"],["BaseRepository.update","OnboardingStateRepository.get"],["ReadyPromptRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestUserMetricsRepository.__init__"],["BackstoryRepository.create_from_scenario","WebhookTestData.create"],["SupabaseMemory.find_similar","SupabaseMemory._generate_embedding"],["UserMetricsRepository.__init__","StateStore.__init__"],["DailySummaryRepository.__init__","FactExtractor.__init__"],["MessageHandler.handle","_send_game_status_response"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TextPatternProcessor.__init__"],["TestP1ErrorHandling.test_ep1_otp_expired_shows_expiry_message","navigate_and_get_content"],["UserRepository.update_onboarding_profile","OnboardingStateRepository.get"],["test_critical_stage_failure_fast_abort","DashboardPage.__init__"],["MissingVariableError.__init__","ConfigLoader.__init__"],["EventStore.get_active_arcs","_row_to_arc"],["GameStateStage.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RateLimiter.__init__"],["LifeSimulator.generate_next_day_events","NarrativeArcRepository.get_active_arcs"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResolutionManager.__init__"],["NikitaThoughtRepository.__init__","RecoveryManager.__init__"],["OTPEmailParser.parse_magic_link_email","extract_magic_link"],["DailySummaryRepository.__init__","ViceScorer.__init__"],["JobExecutionRepository.__init__","BasePage.__init__"],["TelegramLinkRepository.verify_code","OnboardingStateRepository.delete"],["test_critical_stage_failure_fast_abort","SocialCircleRepository.__init__"],["TestPipelineStatusEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["NikitaThoughtRepository.__init__","StateComputer.__init__"],["UserRepository.update_score","PendingRegistrationRepository.get"],["MemoryFactRepository.__init__","NarrativeArcSystem.__init__"],["PromptBuilderStage._render_template","PromptBuilderStage._build_template_vars"],["ConversationsPage.__init__","GmailHelper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingServerToolHandler.__init__"],["VoiceOnboardingFlow.should_start_onboarding","is_already_onboarded"],["UserMetricsRepository.__init__","DecayProcessor.__init__"],["ConversationsPage.__init__","JobExecutionRepository.__init__"],["ReadyPromptRepository.__init__","TouchpointEngine.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","__init__"],["test_critical_stage_failure_fast_abort","NarrativeArcManager.__init__"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.get_phone_request_message"],["_build_pipeline_stages","_get_stage_result"],["ConversationThreadRepository.__init__","TouchpointScheduler.__init__"],["TestConversationListEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["DailySummaryRepository.__init__","AuditLog.__init__"],["TestExtractionStage.test_extraction_llm_failure_raises_stage_error","_mock_session"],["MockStage.__init__","BasePage.__init__"],["test_critical_stage_failure_fast_abort","ConflictStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PromptLoader.__init__"],["TouchpointStore.mark_skipped","_to_pydantic"],["AuditLog.__init__","ViceService.__init__"],["VoiceService._generate_fallback_prompt","InboundCallHandler._generate_fallback_prompt"],["LoginPage.__init__","EmotionalStage.__init__"],["GameStateStage.__init__","EscalationManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ExperimentLoader.__init__"],["TestP0CriticalHappyPath.test_ep4_no_auth_params_returns_error","TestHelpers.navigate_and_get_content"],["VicePreferenceRepository.__init__","FullJourneyOrchestrator.__init__"],["generate_response","build_system_prompt"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GeneratedPromptRepository.__init__"],["BackstoryRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreAnalyzer.__init__"],["BackstoryRepository.__init__","ScoreCalculator.__init__"],["HandoffManager.transition","execute_handoff"],["GeneratedPromptRepository.__init__","EvidenceCollector.__init__"],["PiiSafeFormatter.__init__","StrategicSilence.__init__"],["TouchpointStage.__init__","ConfigLoader.__init__"],["run_migration","validate_counts"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EmojiProcessor.__init__"],["StageError.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockMappings.__init__"],["ReadyPromptRepository.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PunctuationProcessor.__init__"],["ConversationThreadRepository.__init__","TouchpointStore.__init__"],["VicePreferenceRepository.__init__","VicePreferenceRepository.__init__"],["StageError.__init__","JobExecutionRepository.__init__"],["JobExecutionRepository.__init__","VoiceOnboardingFlow.__init__"],["FakeStage.__init__","ProfileRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OTPFlowE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DailySummaryRepository.__init__"],["VenueCacheRepository.cleanup_expired","PendingRegistrationRepository.delete"],["SummaryStage.__init__","ConversationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PromptBuilderStage.__init__"],["test_critical_stage_failure_fast_abort","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StrategicSilence.__init__"],["AuditLog.__init__","UserNotFoundError.__init__"],["ConflictStage.__init__","MissingVariableError.__init__"],["TokenEstimator.estimate_fast","TokenCounter.count"],["EngagementStateRepository.__init__","GeneratedPromptRepository.__init__"],["GeneratedPromptRepository.__init__","VoiceAgentConfig.__init__"],["SupabaseMemory.add_nikita_event","MemoryFactRepository.add_fact"],["LoginPage.__init__","UserRepository.__init__"],["ProfileRepository.__init__","EvidenceCollector.__init__"],["VenueResearchService.research_venues","VenueResearchService._is_expired"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LifeSimStage.__init__"],["TestConversationPromptsEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["EmotionalStage.__init__","SupabaseHelper.__init__"],["test_critical_stage_failure_fast_abort","MemoryUpdateStage.__init__"],["MockStage.__init__","VoiceOnboardingFlow.__init__"],["TestSystemOverviewEndpoint.app","TestUserListEndpoint.mock_get_session"],["ReadyPromptRepository.__init__","TranscriptManager.__init__"],["UserMetricsRepository.__init__","InstructionSelector.__init__"],["InMemoryCache.incr","BaseRepository.get"],["LoginPage.__init__","__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NarrativeArcSystem.__init__"],["ConflictStore.count_consecutive_unresolved_crises","get_user_conflicts"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_no_game_over_when_score_above_zero","create_mock_user"],["test_critical_stage_failure_fast_abort","ReadyPromptRepository.__init__"],["BackstoryRepository.__init__","ResponseTimer.__init__"],["FakeStage.__init__","EventGenerator.__init__"],["BaseRepository.session","TestNonCriticalFailureE2E.session"],["ClinginessDetector._response_time_signal","UserMetricsRepository._clamp"],["LifeSimStage.__init__","DecayCalculator.__init__"],["UserRepository.__init__","BaseRepository.__init__"],["ProfileRepository.__init__","VoiceAgentConfig.__init__"],["MockStage.__init__","PipelineOrchestrator.__init__"],["GameStateStage.__init__","ScoreHistoryRepository.__init__"],["NikitaThoughtRepository.__init__","EmotionalStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DashboardPage.__init__"],["LifeSimStage.__init__","TTSConfigService.__init__"],["StageError.__init__","ResolutionManager.__init__"],["ScoreHistoryRepository.__init__","TokenCounter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictGenerator.__init__"],["PromptBuilderStage.__init__","OnboardingHandler.__init__"],["ConversationThreadRepository.__init__","__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SocialCircleRepository.__init__"],["GeneratedPromptRepository.__init__","OnboardingServerToolHandler.__init__"],["ScoreHistoryRepository.__init__","TouchpointStore.__init__"],["ReadyPromptRepository.__init__","TokenValidator.__init__"],["VicePreferenceRepository.__init__","PortalLoginE2ETest.__init__"],["LifeSimStage.__init__","OTPVerificationHandler.__init__"],["JobExecutionRepository.__init__","FullJourneyOrchestrator.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","create"],["SummaryStage.__init__","LengthAdjuster.__init__"],["GameStateStage.__init__","ProfileRepository.__init__"],["EntityManager.get_projects","EntityManager.get_entities_by_type"],["BaseRepository.session","OnboardingStateRepository.session"],["JobExecutionRepository.__init__","VicePreferenceRepository.__init__"],["TestPipelineStatusEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NarrativeArcManager.__init__"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._build_chat"],["SummaryStage.__init__","VoiceCallScorer.__init__"],["TestUserDetailEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["UserRepository.__init__","NarrativeArcRepository.__init__"],["GeneratedPromptRepository.__init__","ExperimentLoader.__init__"],["PromptBuilderStage.__init__","ElevenLabsConversationsClient.__init__"],["NikitaThoughtRepository.__init__","UserRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","_ProfileFromAnswers.__init__"],["UserRepository.set_boss_fight_status","InMemoryCache.get"],["HandoffManager.execute_handoff_with_voice_callback","HandoffManager._generate_profile_summary"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EventStore.__init__"],["MissingVariableError.__init__","TokenCounter.__init__"],["ProfileRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictStage.__init__"],["EmotionalStage.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MoodCalculator.__init__"],["TestAuditLogsEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["ConversationRepository.__init__","ServerToolHandler.__init__"],["TestConflictStage.test_conflict_emotional_distance_triggers","_mock_session"],["ExtractionStage.__init__","GeneratedPromptRepository.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_fallback_on_timeout","slow_function"],["MissingVariableError.__init__","TouchpointStore.__init__"],["PromptLoader.render","load"],["MockStage.__init__","FullJourneyOrchestrator.__init__"],["ConflictStage.__init__","SessionDetector.__init__"],["VicePreferenceRepository.__init__","BackstoryRepository.__init__"],["TestGameStateStage.test_game_state_returns_defaults","_mock_session"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NarrativeArcSystem.__init__"],["DashboardPage.__init__","GameStateStage.__init__"],["ServerToolHandler.handle","ServerToolHandler._get_memory"],["UserRepository.__init__","EscalationManager.__init__"],["NikitaThoughtRepository.__init__","__init__"],["VicePreferenceRepository.__init__","ConversationsE2ETest.__init__"],["EngagementStateMachine._apply_transition","_reset_counters"],["BreakupManager.trigger_breakup","_get_breakup_message"],["StageError.__init__","OTPFlowE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StateComputer.__init__"],["GameStateStage.__init__","EventGenerator.__init__"],["StateComputer.compute","StateComputer._apply_relationship_modifier"],["ProfileRepository.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","PendingRegistrationRepository.__init__"],["VicePreferenceRepository.__init__","SummaryStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScheduledEventRepository.__init__"],["FakeStage.__init__","ConfigLoader.__init__"],["VicePreferenceRepository.__init__","EngagementStateRepository.__init__"],["ProfileCollector.is_complete","ViceScorer.get_profile"],["EvidenceCollector.start_phase","EvidenceCollector.log"],["NarrativeArcRepository.resolve_arc","NarrativeArcRepository.advance_arc"],["DailySummaryRepository.__init__","LoginPage.__init__"],["TestWebhookHandler.test_call_initiation_failure_logged","create_webhook_signature"],["LifeSimStage.__init__","MetaNikitaConfig.__init__"],["AuditLog.__init__","OnboardingHandler.__init__"],["ConversationRepository.__init__","VenueCacheRepository.__init__"],["TouchpointStage.__init__","TokenCounter.__init__"],["VicePreferenceRepository.__init__","TelegramBot.__init__"],["UserMetricsRepository.__init__","GmailHelper.__init__"],["JobExecutionRepository.__init__","PortalLoginE2ETest.__init__"],["TestUserScoresEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["ProfileRepository.update_from_onboarding","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MemoryUpdateStage.__init__"],["UserMetricsRepository.__init__","JobExecutionRepository.__init__"],["TouchpointStage.__init__","TouchpointStore.__init__"],["test_pipeline_result_has_expected_structure","make_pipeline_result"],["get_nikita_agent","_create_nikita_agent"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ReadyPromptRepository.__init__"],["TestUserMemoryEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ServerToolHandler.__init__"],["SummaryStage.__init__","Phase2Conversation.__init__"],["VicePreferenceRepository.__init__","HistoryLoader.__init__"],["VoiceOnboardingFlow.process_ready_response","_save_deferred_state"],["LoginPage.__init__","EventStore.__init__"],["BackstoryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestProcessingStatsEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["PromptBuilderStage._store_prompt","PromptBuilderStage._sync_cached_voice_prompt"],["VenueCacheRepository.cleanup_expired","TouchpointStore.delete"],["ConflictStage.__init__","SocialCircleGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SupabaseMemory.__init__"],["VicePreferenceRepository.__init__","Phase3Portal.__init__"],["UserRepository.__init__","ScoreHistoryRepository.__init__"],["ConversationsPage.__init__","NarrativeArcSystem.__init__"],["AuditLog.__init__","ElevenLabsConversationsClient.__init__"],["StateStore.get_state_history","_row_to_state"],["MockStage.__init__","PortalLoginE2ETest.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MissingVariableError.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.is_valid_phone"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PendingRegistrationRepository.__init__"],["JobExecutionRepository.__init__","BackstoryRepository.__init__"],["EngagementStateMachine._apply_transition","_get_transition_reason"],["VoiceService.initiate_call","_get_first_message"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageSplitter.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step2_submit_js"],["JobExecutionRepository.__init__","ConversationsE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationRepository.__init__"],["DashboardPage.__init__","TokenBudgetManager.__init__"],["PromptBuilderStage.__init__","ScoringService.__init__"],["ConversationThreadRepository.__init__","EventStore.__init__"],["ScoreHistoryRepository.__init__","TelegramAuth.__init__"],["LifeSimStage.__init__","GmailMCPClient.__init__"],["UserRepository.__init__","SupabaseHelper.__init__"],["TestBossEncountersEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["TestPipelineStatusEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["VoiceOnboardingFlow.initiate_onboarding_call","_update_onboarding_status"],["DailySummaryRepository.__init__","OnboardingStateRepository.__init__"],["MemoryFactRepository.__init__","GameStateStage.__init__"],["GameStateStage.__init__","ConfigLoader.__init__"],["UserMetricsRepository.update_metrics","UserMetricsRepository.get_by_user_id"],["LoginPage.__init__","MockStage.__init__"],["JobExecutionRepository.__init__","SummaryStage.__init__"],["RecoveryManager.apply_recovery","_get_de_escalated_state"],["JobExecutionRepository.__init__","EngagementStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VenueCacheRepository.__init__"],["TokenEstimator.encoder","TokenEstimator.encoder"],["MemoryUpdateStage.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PiiSafeFormatter.__init__"],["MockStage.__init__","BackstoryRepository.__init__"],["PiiSafeFormatter.__init__","NikitaThoughtRepository.__init__"],["MockStage.__init__","ConversationsE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EmotionalStage.__init__"],["DashboardPage.__init__","MockResult.__init__"],["DailySummaryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["JobExecutionRepository.__init__","TelegramBot.__init__"],["ConversationConfigBuilder._generate_system_prompt","VoiceService._generate_fallback_prompt"],["ConflictStage.__init__","TelegramWebhookSimulator.__init__"],["MissingVariableError.__init__","TelegramAuth.__init__"],["BackstoryRepository.create_from_scenario","PendingRegistrationRepository.get"],["NikitaThoughtRepository.get_thoughts_for_prompt","get_active_thoughts"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceService.__init__"],["LoginPage.__init__","HandoffManager.__init__"],["MemoryUpdateStage.__init__","PendingRegistrationRepository.__init__"],["MockStage.__init__","SummaryStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NikitaThoughtRepository.__init__"],["PiiSafeFormatter.__init__","ResponseDelivery.__init__"],["PromptBuilderStage.__init__","VicePreferenceRepository.__init__"],["MockStage.__init__","EngagementStateRepository.__init__"],["JobExecutionRepository.__init__","HistoryLoader.__init__"],["LoginPage.__init__","SupabaseMemory.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_just_inside_grace_returns_false","create_mock_user"],["EscalationManager.check_escalation","_get_next_level"],["TouchpointStore.mark_failed","_to_pydantic"],["JobExecutionRepository.__init__","Phase3Portal.__init__"],["TestConversationListEndpoint.app","TestVoiceStats.mock_admin_auth"],["PiiSafeFormatter.__init__","FakeStage.__init__"],["test_critical_stage_failure_fast_abort","GeneratedPromptRepository.__init__"],["MemoryFactRepository.__init__","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserRepository.__init__"],["DashboardPage.__init__","RegistrationHandler.__init__"],["MockStage.__init__","TelegramBot.__init__"],["MemoryUpdateStage.__init__","VenueCacheRepository.__init__"],["DashboardPage.__init__","LifeSimulator.__init__"],["PiiSafeFormatter.__init__","EntityManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserNotFoundError.__init__"],["ReadyPromptRepository.__init__","VoiceSessionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceCallScorer.__init__"],["NikitaThoughtRepository.bulk_create_thoughts","create_thought"],["PromptBuilderStage.__init__","TestUserMetricsRepository.__init__"],["DashboardPage.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BreakupManager.__init__"],["LoginPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestAuditLogsEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","FakeStage.__init__"],["ConflictGenerator.should_generate_conflict","_check_should_skip"],["NikitaThoughtRepository.__init__","MockStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","__init__"],["MockStage.__init__","HistoryLoader.__init__"],["AuditLog.__init__","ScoringService.__init__"],["HandoffManager.execute_handoff","HandoffManager._send_first_message"],["FakeStage.__init__","TokenCounter.__init__"],["ConversationThreadRepository.__init__","MissingVariableError.__init__"],["PackageStore.exists","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramLinkRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LengthAdjuster.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EntityManager.__init__"],["TouchpointStage.__init__","TelegramAuth.__init__"],["ConflictStage.__init__","PromptLoader.__init__"],["UserRepository.update_game_status","OnboardingStateRepository.get"],["MockStage.__init__","Phase3Portal.__init__"],["MemoryFactRepository.__init__","TokenBudgetManager.__init__"],["PromptLoader._substitute_variables","_get_nested_value"],["FakeStage.__init__","TouchpointStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GameStateStage.__init__"],["InboundCallHandler.handle_incoming_call","VoiceService._generate_signed_token"],["DashboardPage.__init__","MessageGenerator.__init__"],["BackstoryRepository.__init__","EvidenceCollector.__init__"],["LifeSimStage.__init__","ConflictDetector.__init__"],["StageError.__init__","ConversationRepository.__init__"],["ConflictStage.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserMetricsRepository.__init__"],["recall_memory","format_memory_results"],["NikitaThoughtRepository.__init__","HandoffManager.__init__"],["VicePreferenceRepository.__init__","ScoreCalculator.__init__"],["PiiSafeFormatter.__init__","ViceAnalyzer.__init__"],["VicePreferenceRepository.__init__","ConflictStore.__init__"],["ScoreCalculator.calculate","ScoreCalculator.calculate_composite"],["DashboardPage.__init__","Phase4GameState.__init__"],["NikitaThoughtRepository.__init__","SupabaseMemory.__init__"],["TestUserDetailEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["EntityManager.get_entities_by_type","get_entities_by_type"],["GeneratedPromptRepository.__init__","OTPVerificationHandler.__init__"],["TestUserMemoryEndpoint.app","TestElevenLabsList.mock_admin_auth"],["MemoryFactRepository.__init__","MockResult.__init__"],["BackstoryRepository.__init__","VoiceAgentConfig.__init__"],["AuditLog.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ViceAnalyzer.__init__"],["TestHaikuEnrichment.test_fallback_when_enrichment_returns_too_short","TestHaikuEnrichment.mock_short"],["BaseRepository.delete_by_id","delete"],["can_reach_database","_get_database_url"],["TestDecayCalculatorIsOverdue.test_is_overdue_no_interaction_returns_true","create_mock_user"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SocialCircleGenerator.__init__"],["UserNotFoundError.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramLinkRepository.__init__"],["NikitaThoughtRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase2Conversation.__init__"],["DashboardPage.__init__","VoiceService.__init__"],["ReadyPromptRepository.__init__","JourneyReport.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step4_db_query"],["PromptBuilderStage.__init__","StrategicSilence.__init__"],["LifeSimStage.__init__","DatabaseRateLimiter.__init__"],["ProfileRepository.__init__","OTPVerificationHandler.__init__"],["ConversationRepository.__init__","FactExtractor.__init__"],["LifeSimStage.__init__","ExtractionStage.__init__"],["VicePreferenceRepository.__init__","ResponseDelivery.__init__"],["AuditLog.__init__","TestUserMetricsRepository.__init__"],["MemoryFactRepository.__init__","RegistrationHandler.__init__"],["GameStateStage.__init__","TokenCounter.__init__"],["TestUserListEndpointAuditLogging.app","mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BaseRepository.__init__"],["MemoryFactRepository.__init__","LifeSimulator.__init__"],["ConflictStage.__init__","DashboardPage.__init__"],["PiiSafeFormatter.__init__","ConversationConfigBuilder.__init__"],["GameStateStage.__init__","TouchpointStore.__init__"],["ConversationRepository.__init__","ViceScorer.__init__"],["TestConflictStage.test_conflict_no_trigger","_mock_session"],["EmojiProcessor.process","EmojiProcessor._count_emojis"],["MemoryFactRepository.__init__","PreferenceConfigurator.__init__"],["NarrativeArcManager.maybe_resolve_arcs","resolve_arc"],["BackstoryRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockMappings.__init__"],["ConflictStage.__init__","SocialCircleRepository.__init__"],["UserMetricsRepository.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PunctuationProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase2Conversation.__init__"],["ConversationThreadRepository.__init__","SessionDetector.__init__"],["ClinginessDetector._double_text_signal","_clamp"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenBudgetManager.__init__"],["GeneratedPromptRepository.__init__","BreakupManager.__init__"],["ScoreHistoryRepository.__init__","DeliveryResult.__init__"],["LengthAdjuster.adjust","_get_config"],["HistoryLoader.__init__","HistoryLoader.load"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DailySummaryRepository.__init__"],["LifeSimStage.__init__","InboundCallHandler.__init__"],["StageError.__init__","VoiceCallScorer.__init__"],["DailySummaryRepository.__init__","InstructionSelector.__init__"],["EmotionalStage.__init__","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PromptBuilderStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationConfigBuilder.__init__"],["ScoreHistoryRepository.__init__","SkipDecision.__init__"],["EmotionalStage.__init__","MessageSplitter.__init__"],["DecayCalculator.calculate_decay","DecayCalculator.is_overdue"],["UserRepository.update_settings","_ChapterBehaviorsProxy.get"],["ConflictStage.__init__","NarrativeArcManager.__init__"],["GeneratedPromptRepository.__init__","LengthAdjuster.__init__"],["MemoryFactRepository.__init__","MessageGenerator.__init__"],["JobExecutionRepository.__init__","ScoreCalculator.__init__"],["ConversationRepository.__init__","AuditLog.__init__"],["GeneratedPromptRepository.__init__","MetaNikitaConfig.__init__"],["BackstoryRepository.__init__","ExperimentLoader.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._get_day_of_week"],["ConflictStage.__init__","ConflictStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NarrativeArcRepository.__init__"],["TestSummaryStage.test_summary_no_conversation_skips","_mock_session"],["ConflictStage.__init__","MoodCalculator.__init__"],["ProfileRepository.__init__","BreakupManager.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.end_call"],["EmotionalStage.__init__","VenueCacheRepository.__init__"],["UserNotFoundError.__init__","SupabaseHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EventStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockResult.__init__"],["PiiSafeFormatter.__init__","MockMappings.__init__"],["ConflictStore.get_conflict_summary","get_active_conflict"],["SummaryStage.__init__","CommandHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreAnalyzer.__init__"],["MissingVariableError.__init__","DeliveryResult.__init__"],["TestDecayProcessorShouldSkipUser.test_skip_boss_fight_status","create_mock_user"],["UserNotFoundError.__init__","LifeSimulator.__init__"],["LoginPage.__init__","SocialCircleGenerator.__init__"],["LifeSimStage.__init__","MockReadyPromptRepo.__init__"],["ProfileRepository.__init__","LengthAdjuster.__init__"],["FakeStage.__init__","TelegramAuth.__init__"],["MissingVariableError.__init__","SkipDecision.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step1_navigate_command"],["UserNotFoundError.__init__","PreferenceConfigurator.__init__"],["PiiSafeFormatter.__init__","PromptBuilderStage.__init__"],["VoiceAgentConfig.get_agent_config","VoiceAgentConfig.generate_system_prompt"],["ProfileRepository.__init__","MetaNikitaConfig.__init__"],["ViceBoundaryEnforcer.apply_cap","ViceBoundaryEnforcer.max_intensity_for_chapter"],["MockStage.__init__","ScoreCalculator.__init__"],["HistoryLoader.load","TokenBudgetManager._estimate_tokens"],["MockStage.__init__","ConflictStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceScorer.__init__"],["ConversationsPage.__init__","GameStateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockMappings.__init__"],["EngagementStateRepository.__init__","NarrativeArcRepository.__init__"],["ConflictStage.__init__","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","ResponseDelivery.__init__"],["AuditLog.__init__","StrategicSilence.__init__"],["ProfileRepository.update_from_onboarding","UserMetricsRepository.get_by_user_id"],["ScoreHistoryRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PromptBuilderStage.__init__"],["BackstoryRepository.__init__","PsychologyMapper.__init__"],["ConversationThreadRepository.__init__","SocialCircleGenerator.__init__"],["MemoryFactRepository.__init__","VoiceService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RegistrationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockStage.__init__"],["TouchpointStage.__init__","FactExtractor.__init__"],["GeneratedPromptRepository.__init__","GmailMCPClient.__init__"],["MetaInstructionEngine.format_for_prompt","PsychologicalState.format_for_prompt"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LifeSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BasePage.__init__"],["TestInboundReadyPrompt.test_returns_string","_make_handler"],["TestNikitaThoughtRepository.test_bulk_create_thoughts_creates_all","mock_create_thought"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PreferenceConfigurator.__init__"],["TestProcessingStatsEndpoint.app","TestThreadsList.mock_admin_auth"],["TestWebhookSignatureValidation.test_expired_timestamp_rejected","create_webhook_signature"],["UserMetricsRepository.__init__","ConversationRepository.__init__"],["ConflictStage.__init__","MemoryUpdateStage.__init__"],["StageError.__init__","Phase2Conversation.__init__"],["LifeSimStage.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase1Registration.__init__"],["NikitaThoughtRepository.expire_missing_him_thoughts","NikitaThoughtRepository.get_active_thoughts"],["ConflictStage.__init__","ReadyPromptRepository.__init__"],["InMemoryCache.incr","OnboardingStateRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","_ProfileFromAnswers.__init__"],["TouchpointStage.__init__","DeliveryResult.__init__"],["TestPipelineContext.test_defaults_empty_collections","_make_ctx"],["UserNotFoundError.__init__","Phase4GameState.__init__"],["MemoryUpdateStage.__init__","FactExtractor.__init__"],["OTPVerificationHandler.handle","OTPVerificationHandler._offer_onboarding_choice"],["OnboardingStateRepository.update_step","_ChapterBehaviorsProxy.get"],["SummaryStage.__init__","ViceService.__init__"],["TestHaikuEnrichment.test_fallback_when_enrichment_fails","mock_fail"],["TouchpointStage.__init__","SkipDecision.__init__"],["MissingVariableError.__init__","SessionDetector.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_current_time_slot"],["ProfileRepository.__init__","GmailMCPClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","HandoffManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageGenerator.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._lookup_user_by_phone"],["MemoryUpdateStage.__init__","ViceScorer.__init__"],["mock_agent","test_something"],["BaseStage.execute","MockStage._run"],["AuditLog.__init__","ConflictGenerator.__init__"],["TestPipelineStatusEndpoint.app","TestVoiceStats.mock_admin_auth"],["MemoryFactRepository.__init__","PiiSafeFormatter.__init__"],["ConversationsPage.__init__","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SupabaseMemory.__init__"],["VicePreferenceRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StateComputer.__init__"],["RateLimiter.check","RateLimiter._get_day_key"],["DailySummaryRepository.__init__","GmailHelper.__init__"],["GameStateStage.__init__","TelegramAuth.__init__"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler.complete_onboarding"],["LifeSimStage.__init__","MemoryFactRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MissingVariableError.__init__"],["NarrativeArcManager.get_active_arcs","get_active_arcs"],["UserNotFoundError.__init__","VoiceService.__init__"],["LifeSimStage.__init__","TriggerDetector.__init__"],["DailySummaryRepository.__init__","JobExecutionRepository.__init__"],["ExperimentLoader._load_experiment_with_inheritance","_list_available_experiments"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase4GameState.__init__"],["ConversationThreadRepository.__init__","TelegramWebhookSimulator.__init__"],["MessageHandler._needs_onboarding","_offer_onboarding_choice"],["TouchpointEngine._deliver_single","TouchpointEngine._should_skip_for_dedup"],["SummaryStage.__init__","UserNotFoundError.__init__"],["PiiSafeFormatter.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceOnboardingFlow.__init__"],["TestGameStateStage.test_game_state_populates_context","_make_context"],["MemoryUpdateStage.__init__","AuditLog.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SupabaseHelper.__init__"],["ConversationsPage.__init__","TokenBudgetManager.__init__"],["ExtractionStage.__init__","NarrativeArcRepository.__init__"],["NarrativeArcSystem.update_arc","advance_stage"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestVicePreferenceRepositoryExtras.__init__"],["VoiceService.make_outbound_call","make_outbound_call"],["OTPEmailParser.parse_otp_email","extract_otp_code"],["UserRepository.__init__","ServerToolHandler.__init__"],["StageError.__init__","ScoreAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","_ProfileFromAnswers.__init__"],["PiiSafeFormatter.__init__","RecoveryManager.__init__"],["RecoveryManager.can_recover","can_recover"],["BaseRepository.get","OnboardingStateRepository.get"],["BaseRepository.delete_by_id","InMemoryCache.get"],["PiiSafeFormatter.__init__","StateComputer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceService.__init__"],["PackageStore.delete","TelegramLinkRepository.delete"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationThreadRepository.__init__"],["UserMetricsRepository.__init__","VoiceCallScorer.__init__"],["NikitaThoughtRepository.__init__","DatabaseRateLimiter.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DashboardPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoringService.__init__"],["LifeSimStage.__init__","TranscriptManager.__init__"],["InstructionSelector.get_instructions_for_situation","_parse_instruction"],["TestDashboardE2E.test_verification_instructions","get_verification_instructions"],["EngagementStateRepository.__init__","SupabaseHelper.__init__"],["TestExtractionStage.test_extraction_happy_path","_mock_session"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageGenerator.__init__"],["VoiceCallVerifier._verify_database","_check_score_history"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RecoveryManager.__init__"],["TestAuditLogsEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["TestSessionDetector.test_detect_and_queue_marks_all_found","TestSessionDetector.mock_get_stale"],["UserRepository.__init__","PendingRegistrationRepository.__init__"],["EngagementStateRepository.__init__","LifeSimulator.__init__"],["ConversationsPage.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StateComputer.__init__"],["TestUserMemoryEndpoint.app","TestConversationListEndpoint.mock_get_session"],["LoginPage.__init__","ProfileCollector.__init__"],["ConversationRepository.__init__","LoginPage.__init__"],["DailySummaryRepository.__init__","ResolutionManager.__init__"],["EventStore.get_event","_row_to_event"],["ConversationThreadRepository.__init__","PromptLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StageError.__init__"],["StateComputer.compute","_apply_conversation_deltas"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointScheduler.__init__"],["BaseRepository.session","ScheduledEventRepository.session"],["ReadyPromptRepository.__init__","ConversationsPage.__init__"],["ReadyPromptRepository.__init__","LifeSimStage.__init__"],["TestEventStore.mock_session_factory","__aenter__"],["ScoreHistoryRepository.__init__","TelegramWebhookSimulator.__init__"],["GeneratedPromptRepository.__init__","Phase1Registration.__init__"],["ViceBoundaryEnforcer.max_intensity_for_chapter","ViceBoundaryEnforcer.max_intensity_for_chapter"],["JobExecutionRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["SituationDetector.map_conflict_to_situation","_is_conflict_active"],["UserRepository.__init__","VenueCacheRepository.__init__"],["RateLimiter.get_remaining","PendingRegistrationRepository.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictStage.__init__"],["MemoryFactRepository.__init__","UserMetricsRepository.__init__"],["TestConversationPromptsEndpoint.app","TestThreadsList.mock_admin_auth"],["ConversationThreadRepository.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DashboardE2ETest.__init__"],["run_manual_otp_test","step2_send_email"],["PromptBuilderStage.__init__","NikitaThoughtRepository.__init__"],["UserRepository.update_last_interaction","InMemoryCache.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InMemoryCache.__init__"],["TelegramLinkRepository.cleanup_expired","TelegramLinkRepository.delete"],["ConversationsPage.__init__","RegistrationHandler.__init__"],["TokenBudgetManager._truncate_to_budget","HistoryLoader._estimate_tokens"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VicePreferenceRepository.__init__"],["verify_user_created_sql","SupabaseHelper.sql_get_user_by_telegram_id"],["TestOTPFlowSteps.test_step5_verification_parsing","PortalLoginTestContext.create"],["ConversationsPage.__init__","PreferenceConfigurator.__init__"],["TestSystemOverviewEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["PreferenceConfigurator.get_behavioral_config","PreferenceConfigurator.get_preferences"],["ReadyPromptRepository.__init__","PackageStore.__init__"],["PromptBuilderStage.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EmotionalStage.__init__"],["ProfileRepository.__init__","Phase1Registration.__init__"],["BaseStage.execute","StageResult.fail"],["EngagementStateRepository.__init__","Phase4GameState.__init__"],["PackageStore.exists","TouchpointStore.get"],["FakeStage.__init__","DeliveryResult.__init__"],["MockStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["MissingVariableError.__init__","TelegramWebhookSimulator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScheduledEventRepository.__init__"],["GeneratedPromptRepository.__init__","ExtractionStage.__init__"],["VicePreferenceRepository.__init__","TouchpointStage.__init__"],["DashboardPage.__init__","MessageSplitter.__init__"],["FakeStage.__init__","SkipDecision.__init__"],["RecoveryManager.check_recovery_complete","_check_distant_recovery"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestUserMetricsRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestConversationListEndpoint.mock_admin_auth"],["PromptBuilderStage.__init__","FakeStage.__init__"],["DailySummaryRepository.__init__","OTPFlowE2ETest.__init__"],["BaseRepository.update","OTPTestContext.create"],["ScoreHistoryRepository.__init__","VenueResearchService.__init__"],["ConversationsPage.__init__","MessageGenerator.__init__"],["VicePreferenceRepository.__init__","EvidenceCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LoginPage.__init__"],["VoiceOnboardingFlow.get_current_step_message","get_ready_confirmation_message"],["UserMetricsRepository.__init__","GameStateStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","CommandHandler.__init__"],["ScoreHistoryRepository.__init__","PromptLoader.__init__"],["ConversationRepository.__init__","OnboardingStateRepository.__init__"],["ExtractionStage.__init__","SupabaseHelper.__init__"],["PromptBuilderStage.__init__","EntityManager.__init__"],["NikitaThoughtRepository.__init__","ProfileCollector.__init__"],["EmotionalStage.__init__","ViceScorer.__init__"],["ViceService.__aexit__","ViceService.close"],["BackstoryRepository.__init__","OTPVerificationHandler.__init__"],["TestConversationListEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["OnboardingStateRepository.delete","delete"],["ConversationThreadRepository.__init__","DashboardPage.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","list_conversations"],["ProfileRepository.__init__","ExtractionStage.__init__"],["TestUserListEndpointAuditLogging.app","TestUserDetailEndpoint.mock_get_session"],["SummaryStage.__init__","OnboardingHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PiiSafeFormatter.__init__"],["GeneratedPromptRepository.__init__","ConversationThreadRepository.__init__"],["PiiSafeFormatter.__init__","EmotionalStage.__init__"],["ScoreHistoryRepository.__init__","EmojiProcessor.__init__"],["ConversationThreadRepository.__init__","SocialCircleRepository.__init__"],["LifeSimulator.get_active_arcs","LifeSimulator.get_active_arcs"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceCallVerifier.__init__"],["VicePreferenceRepository.__init__","VoiceAgentConfig.__init__"],["ConversationRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["LoginPage.__init__","ConflictStage.__init__"],["TestUserScoresEndpoint.app","mock_get_session"],["validate_prompt","validate"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","__init__"],["HandoffManager.execute_handoff_with_voice_callback","generate"],["LoginPage.__init__","InMemoryCache.__init__"],["MissingVariableError.__init__","VenueResearchService.__init__"],["GameStateStage.__init__","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EmotionalStage.__init__"],["TextPatternProcessor.process_for_sending","TextPatternProcessor.process"],["TestNikitaCallbackRetry.test_initiate_nikita_callback_includes_first_message_override","capture_call"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SocialCircleGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceService.__init__"],["TouchpointStage.__init__","TelegramWebhookSimulator.__init__"],["MissingVariableError.__init__","PromptLoader.__init__"],["ConversationThreadRepository.__init__","NarrativeArcManager.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","create_fake_jwt"],["MessageSplitter._split_at_markers","_force_split"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","StageError.__init__"],["ScoreAnalyzer._call_llm","_call_llm_raw"],["FakeStage.__init__","SessionDetector.__init__"],["AuditLog.__init__","NikitaThoughtRepository.__init__"],["NarrativeArcRepository.advance_arc","get_arc_by_id"],["ProfileRepository.__init__","ConversationThreadRepository.__init__"],["PromptBuilderStage.__init__","ViceAnalyzer.__init__"],["TestUserMemoryEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["ConversationsPage.__init__","VoiceService.__init__"],["test_critical_stage_failure_fast_abort","NarrativeArcRepository.__init__"],["MemoryUpdateStage.__init__","LoginPage.__init__"],["SummaryStage.__init__","ElevenLabsConversationsClient.__init__"],["EventDeliveryHandler.deliver","EventDeliveryHandler._deliver_voice_event"],["PiiSafeFormatter.__init__","UserRepository.__init__"],["HistoryLoader.load","_convert_to_model_messages"],["ConversationThreadRepository.__init__","MoodCalculator.__init__"],["MissingVariableError.__init__","EmojiProcessor.__init__"],["GameStateStage.__init__","DeliveryResult.__init__"],["UserMetricsRepository.__init__","ScoreAnalyzer.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step1_send_start"],["GeneratedPromptRepository.__init__","DashboardE2ETest.__init__"],["ConflictStage.__init__","GeneratedPromptRepository.__init__"],["BackstoryRepository.__init__","BreakupManager.__init__"],["ExtractionStage.__init__","Phase4GameState.__init__"],["GameStateStage.__init__","SkipDecision.__init__"],["TestBossEncountersEndpoint.app","TestThoughtsList.mock_admin_auth"],["OnboardingServerToolHandler.handle_request","configure_preferences"],["TestHaikuEnrichment.test_enrichment_result_used_when_successful","_make_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingStateRepository.__init__"],["AuditLog.__init__","ResponseDelivery.__init__"],["JobExecutionRepository.__init__","TouchpointStage.__init__"],["TestUserDetailEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserNotFoundError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BackstoryRepository.__init__"],["TestEventStore.mock_session_factory","ViceService.__aenter__"],["VicePreferenceRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StrategicSilence.__init__"],["ProfileRepository.__init__","StageError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserRepository.__init__"],["DashboardPage.__init__","PipelineOrchestrator.__init__"],["BackstoryRepository.__init__","LengthAdjuster.__init__"],["TouchpointStore.get","TouchpointStore._to_pydantic"],["test_pipeline_result_failed_structure","make_pipeline_result"],["JobExecutionRepository.__init__","EvidenceCollector.__init__"],["ScoreHistoryRepository.__init__","StateStore.__init__"],["BackstoryRepository.__init__","MetaNikitaConfig.__init__"],["AuditLog.__init__","FakeStage.__init__"],["EntityManager.entity_exists","entity_exists"],["ConversationThreadRepository.__init__","ScheduledEventRepository.__init__"],["VoiceService.initiate_call","VoiceService._try_load_ready_prompt"],["PipelineOrchestrator.process","_get_stages"],["TestEmotionalStage.test_emotional_computes_4d_state","_make_context"],["ScoreHistoryRepository.__init__","SocialCircleRepository.__init__"],["EventGenerator.generate_events_for_day","BossJudgment._call_llm"],["TouchpointStage.__init__","VenueResearchService.__init__"],["ConversationsPage.__init__","PiiSafeFormatter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","__init__"],["ProfileRepository.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SummaryStage.__init__"],["AuditLog.__init__","EntityManager.__init__"],["RateLimiter.check","DatabaseRateLimiter._seconds_until_midnight"],["TouchpointStage.__init__","PromptLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EngagementStateRepository.__init__"],["ProfileRepository.update_from_onboarding","get"],["TestErrorLogEndpoint.app","TestConversationListEndpoint.mock_get_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenValidator.__init__"],["MemoryFactRepository.__init__","BasePage.__init__"],["NikitaThoughtRepository.__init__","ConflictStage.__init__"],["PromptBuilderStage.__init__","ConversationConfigBuilder.__init__"],["MockStage.__init__","TouchpointStage.__init__"],["InboundCallHandler._get_conversation_config_override","VoiceService._generate_fallback_prompt"],["HandoffManager.execute_handoff","_generate_profile_summary"],["Phase4GameState.verify_metrics","Phase4GameState.expected_chapter_for_score"],["ScoreHistoryRepository.__init__","NarrativeArcManager.__init__"],["JobExecutionRepository.__init__","VoiceAgentConfig.__init__"],["NikitaThoughtRepository.__init__","InMemoryCache.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserMetricsRepository.__init__"],["ScoreHistoryRepository.__init__","DecayProcessor.__init__"],["ConversationThreadRepository.__init__","MemoryUpdateStage.__init__"],["TouchpointStage.__init__","EmojiProcessor.__init__"],["MockStage.__init__","EvidenceCollector.__init__"],["generate_touchpoint_message","generate"],["ConversationThreadRepository.__init__","ReadyPromptRepository.__init__"],["LoginPage.__init__","MetaInstructionEngine.__init__"],["MissingVariableError.__init__","StateStore.__init__"],["TestBossEncountersEndpoint.app","mock_admin_auth"],["MemoryUpdateStage.__init__","OnboardingStateRepository.__init__"],["TouchpointStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["UserMetricsRepository.__init__","MockResult.__init__"],["ScoreHistoryRepository.__init__","MoodCalculator.__init__"],["LoginPage.__init__","BaseStage.__init__"],["MissingVariableError.__init__","SocialCircleRepository.__init__"],["LoginPage.__init__","TokenEstimator.__init__"],["GeneratedPromptRepository.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","HistoryLoader.__init__"],["StageError.__init__","PiiSafeFormatter.__init__"],["EvidenceCollector.add_db_snapshot","log"],["TestBossEncountersEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["BackstoryRepository.__init__","GmailMCPClient.__init__"],["VoiceService.initiate_call","_generate_fallback_prompt"],["AuditLog.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase3Portal.__init__"],["TestPipelineContext.test_user_state_fields","_make_ctx"],["MockStage.__init__","VoiceAgentConfig.__init__"],["TouchpointScheduler._evaluate_time_trigger","_get_initiation_rate"],["OnboardingStateRepository.get_or_create","get"],["UserNotFoundError.__init__","MessageSplitter.__init__"],["MissingVariableError.__init__","NarrativeArcManager.__init__"],["MemoryUpdateStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["VicePreferenceRepository.__init__","PsychologyMapper.__init__"],["HandoffManager.transition","ConflictGenerator.generate"],["MissingVariableError.__init__","DecayProcessor.__init__"],["PromptBuilderStage.__init__","MockMappings.__init__"],["LifeSimStage.__init__","VoiceSessionManager.__init__"],["StageError.__init__","ViceService.__init__"],["JobExecutionRepository.__init__","OnboardingServerToolHandler.__init__"],["SummaryStage.__init__","ScoringService.__init__"],["TestProcessingStatsEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["MemoryFactRepository.__init__","VoiceOnboardingFlow.__init__"],["UserMetricsRepository.__init__","RegistrationHandler.__init__"],["MissingVariableError.__init__","MoodCalculator.__init__"],["test_critical_stage_failure_fast_abort","SupabaseHelper.__init__"],["ProfileRepository.__init__","MemoryFactRepository.__init__"],["PromptBuilderStage.__init__","PromptBuilderStage.__init__"],["ViceAnalyzer._analyze_with_llm","ViceAnalyzer._get_agent"],["ClinginessDetector._response_time_signal","_clamp"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EventStore.__init__"],["UserNotFoundError.__init__","VenueCacheRepository.__init__"],["PiiSafeFormatter.format","_redact_pii"],["UserMetricsRepository.__init__","PreferenceConfigurator.__init__"],["test_critical_stage_failure_fast_abort","LifeSimulator.__init__"],["UserRepository.__init__","ViceScorer.__init__"],["TouchpointStage.__init__","StateStore.__init__"],["_ChapterBehaviorsProxy.get","_ChapterBehaviorsProxy.get"],["MemoryFactRepository.__init__","PipelineOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageSplitter.__init__"],["FakeStage.__init__","TelegramWebhookSimulator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ProfileCollector.__init__"],["ScoreHistoryRepository.__init__","MemoryUpdateStage.__init__"],["TestSystemOverviewEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["VoiceService._load_context","_enrich_from_memory"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TextPatternProcessor.__init__"],["ConversationsPage.__init__","UserMetricsRepository.__init__"],["generate_first_nikita_message","FirstMessageGenerator.generate"],["ScoreHistoryRepository.__init__","ReadyPromptRepository.__init__"],["OnboardingServerToolHandler.complete_onboarding","_trigger_handoff"],["StageError.__init__","UserNotFoundError.__init__"],["ConversationRepository.__init__","InstructionSelector.__init__"],["DailySummaryRepository.__init__","ConversationRepository.__init__"],["DashboardPage.__init__","EngagementStateMachine.__init__"],["_call_distraction_llm","_get_distraction_agent"],["TestUserMemoryEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RateLimiter.__init__"],["MockStage.__init__","OnboardingServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BasePage.__init__"],["TestTouchpointStage.test_touchpoint_evaluates","_make_context"],["NikitaThoughtRepository.__init__","MetaInstructionEngine.__init__"],["AuditLog.__init__","ConversationConfigBuilder.__init__"],["UserMetricsRepository.__init__","MessageGenerator.__init__"],["PreferenceConfigurator.get_behavioral_config","PreferenceConfigurator.get_conversation_style_config"],["TestUserDetailEndpoint.app","TestTextConversationList.mock_admin_auth"],["BaseRepository.delete_by_id","OnboardingStateRepository.delete"],["NikitaThoughtRepository.__init__","BaseStage.__init__"],["CalibrationCalculator.compute","StateComputer._clamp"],["EmotionalStage.__init__","LoginPage.__init__"],["TestBossEncountersEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["HistoryLoader.load","HistoryLoader._ensure_tool_call_pairing"],["NikitaThoughtRepository.__init__","TokenEstimator.__init__"],["UserRepository.__init__","AuditLog.__init__"],["GeneratedPromptRepository.__init__","TokenValidator.__init__"],["TouchpointStage.__init__","DecayProcessor.__init__"],["SummaryStage.__init__","VicePreferenceRepository.__init__"],["_ChapterBehaviorsProxy.keys","_ChapterBehaviorsProxy.keys"],["VoiceSessionManager.attempt_recovery","finalize_session"],["ReadyPromptRepository.__init__","TelegramLinkRepository.__init__"],["TestConversationPromptsEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["TestServerToolsReadyPrompt.test_fallback_on_no_prompt","_make_server_handler"],["DashboardPage.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenBudgetManager.__init__"],["TestP0CriticalHappyPath.test_ep4_no_auth_params_returns_error","navigate_and_get_content"],["MissingVariableError.__init__","MemoryUpdateStage.__init__"],["TouchpointStage.__init__","MoodCalculator.__init__"],["TestErrorLogEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["TestSystemOverviewEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ServerToolHandler.__init__"],["MissingVariableError.__init__","ReadyPromptRepository.__init__"],["EmotionalStage.__init__","VoiceCallVerifier.__init__"],["test_critical_stage_failure_fast_abort","Phase4GameState.__init__"],["estimate_tokens_accurate","get_token_estimator"],["FakeStage.__init__","VenueResearchService.__init__"],["MemoryFactRepository.__init__","FullJourneyOrchestrator.__init__"],["JobExecutionRepository.__init__","PsychologyMapper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingHandler.__init__"],["UserNotFoundError.__init__","PipelineOrchestrator.__init__"],["LifeSimStage.__init__","JourneyReport.__init__"],["FakeStage.__init__","PromptLoader.__init__"],["SummaryStage.__init__","TestUserMetricsRepository.__init__"],["ProfileRepository.__init__","TokenValidator.__init__"],["UserRepository.increment_boss_attempts","UserRepository.get"],["RateLimiter.__init__","_ChapterBehaviorsProxy.get"],["AuditLog.__init__","MockMappings.__init__"],["MetaInstructionEngine.get_instructions_for_context","PsychologicalState.format_for_prompt"],["TestPipelineStatusEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["PiiSafeFormatter.__init__","MockStage.__init__"],["BackstoryRepository.__init__","ConflictDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SupabaseMemory.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PendingRegistrationRepository.__init__"],["UserMetricsRepository.__init__","VoiceService.__init__"],["PromptBuilderStage.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageSplitter.__init__"],["FakeStage.__init__","EmojiProcessor.__init__"],["AuditLog.__init__","PromptBuilderStage.__init__"],["GameStateStage.__init__","TelegramWebhookSimulator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MissingVariableError.__init__"],["LoginPage.__init__","TextPatternProcessor.__init__"],["BackstoryRepository.__init__","Phase1Registration.__init__"],["ConflictDetector.check_escalation","_can_transition"],["MockStage.__init__","PsychologyMapper.__init__"],["TestWebhookNoneContentHandling.test_conversation_persisted_before_scoring","create_webhook_signature"],["TokenBudgetManager.allocate","TokenBudgetManager._estimate_tokens"],["DailySummaryRepository.__init__","VoiceCallScorer.__init__"],["LoginPage.__init__","RateLimiter.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockStage.__init__"],["TokenEstimator.estimate","TokenEstimator.estimate_fast"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ElevenLabsConversationsClient.__init__"],["SupabaseMemory.add_fact","SupabaseMemory._generate_embedding"],["EmotionalStage.__init__","OnboardingStateRepository.__init__"],["PromptBuilderStage.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VenueCacheRepository.__init__"],["PromptBuilderStage.__init__","StateComputer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictStage.__init__"],["DatabaseRateLimiter.check","DatabaseRateLimiter._get_minute_window"],["EngagementStateRepository.__init__","MessageSplitter.__init__"],["PiiSafeFormatter.__init__","HandoffManager.__init__"],["TestConversationPromptsEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SupabaseHelper.__init__"],["TouchpointStage.__init__","InstructionSelector.__init__"],["test_critical_stage_failure_fast_abort","execute"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScoreCalculator.__init__"],["StateComputer._apply_relationship_modifier","_apply_relationship_modifier"],["PiiSafeFormatter.__init__","SupabaseMemory.__init__"],["TestNikitaThoughtRepository.test_get_thoughts_for_prompt_groups_by_type","TestNikitaThoughtRepository.mock_get_active_thoughts"],["TestUserScoresEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["TestUserListEndpointAuditLogging.app","TestProcessingStatsEndpoint.mock_get_session"],["UserMetricsRepository.__init__","PiiSafeFormatter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LifeSimulator.__init__"],["DashboardPage.__init__","TelegramBot.__init__"],["NeglectDetector._short_message_signal","StateComputer._clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","HandoffManager.__init__"],["BackstoryRepository.__init__","ExtractionStage.__init__"],["ReadyPromptRepository.__init__","PunctuationProcessor.__init__"],["TestConversationListEndpoint.app","TestThreadsList.mock_admin_auth"],["EngagementStateRepository.__init__","VenueCacheRepository.__init__"],["ConversationRepository.__init__","GmailHelper.__init__"],["GameStateStage.__init__","VenueResearchService.__init__"],["count_tokens","_get_encoder"],["ReadyPromptRepository.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SupabaseMemory.__init__"],["ConversationRepository.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NikitaThoughtRepository.__init__"],["MemoryFactRepository.__init__","PortalLoginE2ETest.__init__"],["GameStateStage.__init__","PromptLoader.__init__"],["EventDeliveryHandler.deliver","_deliver_voice_event"],["VicePreferenceRepository.__init__","DecayCalculator.__init__"],["FakeStage.__init__","StateStore.__init__"],["TestUserScoresEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["BaseRepository.session","TestFullPipelineE2E.session"],["PiiSafeFormatter.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceOnboardingFlow.__init__"],["SummaryStage.__init__","StrategicSilence.__init__"],["VoiceOnboardingFlow.resume_onboarding","VoiceOnboardingFlow._update_state"],["PackageStore.exists","UserRepository.get"],["FakeStage.__init__","SocialCircleRepository.__init__"],["VicePreferenceRepository.__init__","TTSConfigService.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","TestHelpers.create_fake_jwt"],["GameStateStage.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResponseDelivery.__init__"],["ProfileRepository.create_profile","TouchpointStore.create"],["BackstoryRepository.__init__","ConversationThreadRepository.__init__"],["ConversationsPage.__init__","BasePage.__init__"],["TestDecayProcessorNoCatchUp.test_no_catch_up_decay_after_boss_resolved","create_mock_user"],["NikitaThoughtRepository.__init__","TextPatternProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestVicePreferenceRepositoryExtras.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step2_wait_for_success_js"],["VicePreferenceRepository.__init__","OTPVerificationHandler.__init__"],["NikitaThoughtRepository.__init__","RateLimiter.__init__"],["ConversationThreadRepository.__init__","GeneratedPromptRepository.__init__"],["FakeStage.__init__","NarrativeArcManager.__init__"],["AuditLog.__init__","_ProfileFromAnswers.__init__"],["GeneratedPromptRepository.__init__","OnboardingHandler.__init__"],["TestCriticalFailureE2E.test_extraction_failure_stops_pipeline","make_pipeline"],["SummaryStage.__init__","EngagementStateRepository.__init__"],["FakeStage.__init__","DecayProcessor.__init__"],["UserNotFoundError.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoringService.__init__"],["DailySummaryRepository.__init__","Phase2Conversation.__init__"],["EventStore.save_events","save_event"],["VoiceService._load_context","VoiceService._get_user_name"],["MemoryFactRepository.__init__","BackstoryRepository.__init__"],["MemoryFactRepository.__init__","ConversationsE2ETest.__init__"],["ReadyPromptRepository.__init__","ConfigLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EntityManager.__init__"],["FakeStage.__init__","MoodCalculator.__init__"],["TelegramAuth.verify_magic_link","TelegramAuth.verify_otp_code"],["TestErrorLogEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["BackstoryRepository.__init__","StageError.__init__"],["AuditLog.__init__","RecoveryManager.__init__"],["ExtractionStage.__init__","PendingRegistrationRepository.__init__"],["ConversationRepository.__init__","ResolutionManager.__init__"],["ExtractionStage.__init__","MessageSplitter.__init__"],["AuditLog.__init__","StateComputer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GmailHelper.__init__"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._get_onboarding_state"],["UserRepository.__init__","LoginPage.__init__"],["MemoryFactRepository.__init__","SummaryStage.__init__"],["TestAuditLogsEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BaseStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoringService.__init__"],["MessageSplitter._find_split_points","split"],["DashboardPage.__init__","MessageHandler.__init__"],["BackstoryRepository.__init__","DashboardE2ETest.__init__"],["GeneratedPromptRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenEstimator.__init__"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._evaluate_time_trigger"],["UserMetricsRepository.__init__","UserMetricsRepository.__init__"],["PromptBuilderStage.__init__","EmotionalStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","FullJourneyOrchestrator.__init__"],["ExtractionStage.__init__","VenueCacheRepository.__init__"],["TestPromptStorage.test_is_current_flag_set","_make_context"],["GameStateStage.__init__","StateStore.__init__"],["UserNotFoundError.__init__","ViceScorer.__init__"],["UserRepository.update_onboarding_profile","PackageStore.get"],["ConversationsPage.__init__","VoiceOnboardingFlow.__init__"],["MemoryFactRepository.__init__","TelegramBot.__init__"],["JobExecutionRepository.__init__","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VicePreferenceRepository.__init__"],["TouchpointStore.delete","BaseRepository.delete"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PortalLoginE2ETest.__init__"],["ProfileRepository.create_profile","BackstoryRepository.create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ViceAnalyzer.__init__"],["TouchpointStage.__init__","JobExecutionRepository.__init__"],["JobExecutionRepository.__init__","TTSConfigService.__init__"],["ScoreHistoryRepository.__init__","GeneratedPromptRepository.__init__"],["ConversationsPage.__init__","PipelineOrchestrator.__init__"],["MemoryFactRepository.__init__","HistoryLoader.__init__"],["ScoreCalculator.calculate","ScoreCalculator.apply_multiplier"],["FakeStage.__init__","MemoryUpdateStage.__init__"],["VicePreferenceRepository.__init__","MetaNikitaConfig.__init__"],["DailySummaryRepository.__init__","ScoreAnalyzer.__init__"],["FakeStage.__init__","ReadyPromptRepository.__init__"],["MemoryFactRepository.__init__","Phase3Portal.__init__"],["JobExecutionRepository.__init__","OTPVerificationHandler.__init__"],["GameStateStage.__init__","DecayProcessor.__init__"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","five_second_timeout"],["PromptBuilderStage.__init__","UserRepository.__init__"],["MemoryUpdateStage.__init__","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SocialCircleGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestUserMetricsRepository.__init__"],["LifeSimStage.__init__","TestVicePreferenceRepository.__init__"],["TestWebhookPostProcessing.test_webhook_normalizes_agent_role","capture_add"],["ConversationRepository.__init__","OTPFlowE2ETest.__init__"],["UserRepository.update_settings","UserRepository.get"],["MemoryUpdateStage.__init__","JobExecutionRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResolutionManager.__init__"],["MockStage.__init__","DecayCalculator.__init__"],["GameStateStage.__init__","MoodCalculator.__init__"],["StageError.__init__","VoiceOnboardingFlow.__init__"],["TestAuditLogsEndpoint.app","mock_get_session"],["UserRepository.__init__","OnboardingStateRepository.__init__"],["MockStage.__init__","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationsE2ETest.__init__"],["MissingVariableError.__init__","GeneratedPromptRepository.__init__"],["BackstoryRepository.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestUserMetricsRepository.__init__"],["SocialCircle.to_dict","ActiveArc.to_dict"],["MockStage.__init__","OTPVerificationHandler.__init__"],["DashboardPage.__init__","VoiceCallVerifier.__init__"],["TestUserListEndpointAuditLogging.app","TestElevenLabsList.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationConfigBuilder.__init__"],["LifeSimStage.__init__","ConversationsPage.__init__"],["TestGetCurrentAdminUser.test_non_admin_email_raises_403","make_token"],["EventGenerator.generate_events_for_day","ScoreAnalyzer._call_llm"],["ConversationsPage.__init__","FullJourneyOrchestrator.__init__"],["StageError.__init__","ScoringService.__init__"],["DashboardPage.__init__","ConflictStore.__init__"],["UserRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["MessageSplitter._split_at_markers","MessageSplitter.split"],["mock_conversation","make_context"],["EventStore.get_entities_by_type","_row_to_entity"],["VicePreferenceRepository.__init__","GmailMCPClient.__init__"],["TestRateLimiter.test_multiple_users_isolated","mock_incr"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestDailySummaryRepositoryExtras.__init__"],["TestUserListEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["MemoryFactRepository.__init__","MessageHandler.__init__"],["AuditLog.__init__","EmotionalStage.__init__"],["EngagementStateRepository.__init__","EngagementStateMachine.__init__"],["TestErrorLogEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["PortalLoginE2ETest.get_complete_flow_instructions","step6_extract_data_js"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramBot.__init__"],["MemoryUpdateStage.__init__","ResolutionManager.__init__"],["ConversationThreadRepository.bulk_resolve_threads","ConversationThreadRepository.resolve_thread"],["LifeSimStage.__init__","PackageStore.__init__"],["TelegramWebhookSimulator._build_update","TelegramWebhookSimulator._build_message"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OTPFlowE2ETest.__init__"],["TouchpointScheduler.evaluate_user","get_config"],["ReadyPromptRepository.__init__","TouchpointScheduler.__init__"],["GeneratedPromptRepository.__init__","JourneyReport.__init__"],["JobExecutionRepository.__init__","MetaNikitaConfig.__init__"],["TestUserListEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["GameStateStage.__init__","InstructionSelector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceScorer.__init__"],["OnboardingStateRepository.delete","OnboardingStateRepository.delete"],["_ChapterBehaviorsProxy.get","TouchpointStore.get"],["StageError.__init__","FullJourneyOrchestrator.__init__"],["ViceService.__aexit__","SupabaseMemory.close"],["ViceScorer.process_signals","ViceScorer._get_vice_repo"],["LifeSimulator.get_current_mood","LifeSimulator.get_recent_events"],["Phase3Portal.extract_magic_link","Phase3Portal.extract_magic_link"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BackstoryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TextPatternProcessor.__init__"],["PiiSafeFormatter.__init__","DatabaseRateLimiter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationsE2ETest.__init__"],["AuditLog.__init__","UserRepository.__init__"],["StageError.__init__","VicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RateLimiter.__init__"],["OnboardingStateRepository.update_step","UserRepository.get"],["DashboardPage.__init__","ResponseTimer.__init__"],["TokenBudgetManager.allocate","_estimate_tokens"],["BackstoryRepository.__init__","TokenValidator.__init__"],["StateStore.get_current_state","StateStore._row_to_state"],["ReadyPromptRepository.__init__","TouchpointStore.__init__"],["TestGameStateStage.test_game_state_populates_context","_mock_session"],["ConflictDetector._find_intermediate_state","_get_severity"],["ProfileRepository.__init__","JourneyReport.__init__"],["test_critical_stage_failure_fast_abort","MessageSplitter.__init__"],["EngagementStateRepository.__init__","ViceScorer.__init__"],["TestOTPFlowSteps.test_step2_email_submission","step1_send_start"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SummaryStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","AuditLog.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DatabaseRateLimiter.__init__"],["UserNotFoundError.__init__","MessageHandler.__init__"],["MockStage.__init__","MetaNikitaConfig.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EngagementStateRepository.__init__"],["UserMetricsRepository.__init__","BasePage.__init__"],["ScoreHistoryRepository.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StrategicSilence.__init__"],["TestPipelineStatusEndpoint.app","TestThreadsList.mock_admin_auth"],["StageError.__init__","TestUserMetricsRepository.__init__"],["PiiSafeFormatter.__init__","InboundCallHandler.__init__"],["ConversationsPage.__init__","PortalLoginE2ETest.__init__"],["BaseRepository.session","TestMixedFailureE2E.session"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step1_navigate_command"],["TestOTPFlowSteps.test_step2_email_submission","OTPFlowE2ETest.step1_send_start"],["MemoryUpdateStage.__init__","OTPFlowE2ETest.__init__"],["test_critical_stage_failure_fast_abort","VenueCacheRepository.__init__"],["JobExecutionRepository.__init__","GmailMCPClient.__init__"],["LifeEvent.model_dump_for_db","MoodState.to_dict"],["EventStore.get_recent_events","_row_to_event"],["SummaryStage.__init__","NikitaThoughtRepository.__init__"],["MemoryFactRepository.__init__","ScoreCalculator.__init__"],["MemoryFactRepository.__init__","ConflictStore.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MessageHandler.__init__"],["RateLimiter.__init__","TouchpointStore.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","HistoryLoader.__init__"],["TestUserDetailEndpoint.app","TestThoughtsList.mock_admin_auth"],["EmotionalStage.__init__","GmailHelper.__init__"],["MissingVariableError.__init__","NarrativeArcSystem.__init__"],["SummaryStage.__init__","ResponseDelivery.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase3Portal.__init__"],["TestMixedFailureE2E.test_all_non_critical_fail_critical_succeed","make_pipeline"],["VicePreferenceRepository.__init__","ConflictDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictGenerator.__init__"],["ConversationsPage.__init__","BackstoryRepository.__init__"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step3_extract_all_js"],["LoginPage.build_login_sequence","js_is_on_login_page"],["TokenCounter.count","TokenValidator.count_tokens"],["_ChapterBehaviorsProxy.items","_load_chapter_behaviors"],["ConversationsPage.__init__","ConversationsE2ETest.__init__"],["TestUserMemoryEndpoint.app","TestPipelineStatus.mock_admin_auth"],["MockStage.__init__","GmailMCPClient.__init__"],["UserNotFoundError.__init__","LoginPage.__init__"],["ReadyPromptRepository.__init__","__init__"],["TestUserScoresEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointStage.__init__"],["SummaryStage.__init__","FakeStage.__init__"],["UserMetricsRepository.__init__","VoiceOnboardingFlow.__init__"],["VicePreferenceRepository.__init__","Phase1Registration.__init__"],["TelegramLinkRepository.verify_code","TelegramLinkRepository.get_by_code"],["ConflictStage.__init__","SupabaseHelper.__init__"],["OTPEmailParser.parse_magic_link_email","Phase3Portal.extract_magic_link"],["SummaryStage.__init__","EntityManager.__init__"],["ConversationsPage.__init__","SummaryStage.__init__"],["PiiSafeFormatter.__init__","ProfileCollector.__init__"],["UserRepository.set_boss_fight_status","_ChapterBehaviorsProxy.get"],["ConversationsPage.__init__","EngagementStateRepository.__init__"],["EventGenerator.generate_events_for_day","_call_llm"],["UserMetricsRepository.__init__","PipelineOrchestrator.__init__"],["VoiceService._load_context","ServerToolHandler._compute_nikita_mood"],["ConflictStage.__init__","LifeSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","LifeSimStage.__init__"],["generate_social_circle_for_user","generate_social_circle"],["UserNotFoundError.__init__","VoiceCallVerifier.__init__"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_mood"],["NikitaThoughtRepository.__init__","TestVicePreferenceRepository.__init__"],["ExtractionStage.__init__","ViceScorer.__init__"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._next_message_id"],["PromptBuilderStage.__init__","MockStage.__init__"],["MemoryFactRepository.__init__","ResponseTimer.__init__"],["UserNotFoundError.__init__","ConflictStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BaseRepository.__init__"],["ConversationRepository.__init__","ConversationRepository.__init__"],["GameStateStage.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DashboardPage.__init__"],["StageError.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ProfileCollector.__init__"],["StageError.__init__","StrategicSilence.__init__"],["ConversationsPage.__init__","TelegramBot.__init__"],["TouchpointStage.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SocialCircleRepository.__init__"],["TestConversationListEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["main","print_section"],["VicePreferenceRepository.__init__","ExtractionStage.__init__"],["EmotionalStage.__init__","ResolutionManager.__init__"],["ResponseDelivery.queue","ResponseDelivery._wait_with_typing"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.build_cleanup_query"],["FullJourneyOrchestrator.get_all_instructions","get_phase2_instructions"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BackstoryGeneratorService.__init__"],["FakeStage.__init__","GeneratedPromptRepository.__init__"],["ConversationsPage.__init__","HistoryLoader.__init__"],["MessageSplitter._force_split","split"],["StageError.__init__","SummaryStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageSplitter.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceCallVerifier.__init__"],["LifeSimulator.get_events_for_context","_format_arc"],["DailySummaryRepository.__init__","PiiSafeFormatter.__init__"],["StageError.__init__","EngagementStateRepository.__init__"],["PromptBuilderStage.__init__","HandoffManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NarrativeArcManager.__init__"],["SummaryStage.__init__","ViceAnalyzer.__init__"],["ResolutionManager.__init__","_get_evaluation_prompt"],["ConversationsPage.__init__","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictStore.__init__"],["TestUserMemoryEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["PromptBuilderStage.__init__","SupabaseMemory.__init__"],["DailySummaryRepository.get_for_date","get_by_date"],["TestProcessingStatsEndpoint.app","TestThoughtsList.mock_admin_auth"],["VicePreferenceRepository.__init__","InboundCallHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictStage.__init__"],["UserMetricsRepository.__init__","FullJourneyOrchestrator.__init__"],["JobExecutionRepository.__init__","ConflictDetector.__init__"],["ConflictStage.__init__","Phase4GameState.__init__"],["PiiSafeFormatter.__init__","TriggerDetector.__init__"],["VicePreferenceRepository.__init__","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NarrativeArcRepository.__init__"],["EngagementStateRepository.__init__","MessageHandler.__init__"],["EventStore.save_entities","save_entity"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InMemoryCache.__init__"],["DailySummaryRepository.__init__","ViceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VenueCacheRepository.__init__"],["TouchpointScheduler.evaluate_event_trigger","_get_initiation_rate"],["UserNotFoundError.__init__","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TriggerDetector.__init__"],["StageError.__init__","HistoryLoader.__init__"],["PromptBuilderStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationRepository.__init__"],["GeneratedPromptRepository.__init__","ConflictGenerator.__init__"],["StageError.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScheduledEventRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestConversationListEndpoint.mock_get_session"],["TestUserMemoryEndpoint.app","TestTextStats.mock_admin_auth"],["TestNikitaThoughtRepository.test_create_missing_him_thought_48h","TestNikitaThoughtRepository.mock_create_thought"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LoginPage.__init__"],["EmotionalStage.__init__","OTPFlowE2ETest.__init__"],["MockStage.__init__","ConflictDetector.__init__"],["LoginPage.__init__","BaseRepository.__init__"],["TriggerDetector.__init__","_get_detection_prompt"],["PromptBuilderStage._generate_prompt","_store_prompt"],["VicePreferenceRepository.__init__","MockReadyPromptRepo.__init__"],["ConversationRepository.__init__","VoiceCallScorer.__init__"],["ViceAnalyzer.analyze_exchange","ViceAnalyzer._analyze_with_llm"],["DailySummaryRepository.__init__","UserNotFoundError.__init__"],["TestPromptBuilderStage.test_ac_3_4_1_text_token_budget_warning","_make_context"],["VoiceOnboardingFlow.is_already_onboarded","VoiceOnboardingFlow._get_user_onboarding_status"],["SummaryStage.__init__","ConversationConfigBuilder.__init__"],["AuditLog.__init__","MockStage.__init__"],["TestUserDetailEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResponseTimer.__init__"],["PiiSafeFormatter.__init__","InMemoryCache.__init__"],["MockStage.__init__","Phase1Registration.__init__"],["JobExecutionRepository.__init__","DatabaseRateLimiter.__init__"],["JobExecutionRepository.__init__","ExtractionStage.__init__"],["LoginPage.__init__","BackstoryGeneratorService.__init__"],["GeneratedPromptRepository.__init__","LifeSimStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MemoryUpdateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceCallVerifier.__init__"],["ProfileRepository.__init__","ConflictGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictStage.__init__"],["EngagementStateRepository.__init__","LoginPage.__init__"],["ReadyPromptRepository.__init__","EventStore.__init__"],["TestSystemOverviewEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["TestEmotionalStage.test_emotional_computes_4d_state","_mock_session"],["BackstoryRepository.__init__","VoiceSessionManager.__init__"],["test_critical_stage_failure_fast_abort","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InMemoryCache.__init__"],["TestProcessingStatsEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["OnboardingStateRepository.add_answer","BaseRepository.get"],["AuditLog.__init__","HandoffManager.__init__"],["DailySummaryRepository.__init__","UserMetricsRepository.__init__"],["MemoryUpdateStage.__init__","ConversationRepository.__init__"],["UserRepository.__init__","GmailHelper.__init__"],["LoginPage.__init__","NarrativeArcRepository.__init__"],["JobExecutionRepository.__init__","InboundCallHandler.__init__"],["UserMetricsRepository.__init__","PortalLoginE2ETest.__init__"],["VicePreferenceRepository.__init__","TouchpointEngine.__init__"],["EngagementStateRepository.__init__","VoiceCallVerifier.__init__"],["MemoryFactRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["AuditLog.__init__","SupabaseMemory.__init__"],["UserRepository.__init__","JobExecutionRepository.__init__"],["MockStage.__init__","ExtractionStage.__init__"],["ProfileRepository.__init__","LifeSimStage.__init__"],["mock_user","make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PsychologyMapper.__init__"],["ConflictDetector.apply_transition","ConflictDetector._can_transition"],["TestUserScoresEndpoint.app","TestElevenLabsList.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreHistoryRepository.__init__"],["RateLimiter.check","incr"],["LifeSimulator.get_recent_events","LifeSimulator.get_recent_events"],["LoginPage.__init__","EscalationManager.__init__"],["SummaryStage.__init__","PromptBuilderStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceCallScorer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingStateRepository.__init__"],["FakeStage.__init__","NarrativeArcSystem.__init__"],["VoiceOnboardingFlow.process_phone_input","_save_phone_number"],["TestUserDetailEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["NikitaThoughtRepository.__init__","BaseRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NikitaThoughtRepository.__init__"],["TestErrorLogEndpoint.app","TestVoiceStats.mock_admin_auth"],["test_critical_stage_failure_fast_abort","ViceScorer.__init__"],["AuditLog.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","UserRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SupabaseHelper.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_venue_research_step"],["TestSystemOverviewEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["DashboardPage.__init__","EvidenceCollector.__init__"],["VicePreferenceRepository.__init__","MemoryFactRepository.__init__"],["TestConversationPromptsEndpoint.app","TestThoughtsList.mock_admin_auth"],["ConversationRepository.__init__","Phase2Conversation.__init__"],["UserMetricsRepository.__init__","BackstoryRepository.__init__"],["JobExecutionRepository.__init__","MockReadyPromptRepo.__init__"],["VicePreferenceRepository.__init__","TriggerDetector.__init__"],["MockStage.__init__","ConversationThreadRepository.__init__"],["LifeSimStage.__init__","EventGenerator.__init__"],["VoiceOnboardingFlow.should_start_onboarding","_get_user_onboarding_status"],["mock_agent","mock_agent"],["UserMetricsRepository.__init__","ConversationsE2ETest.__init__"],["OnboardingHandler.handle","_is_skip_request"],["NikitaThoughtRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestDailySummaryRepositoryContextEngineering.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EntityManager.__init__"],["ScoreHistoryRepository.__init__","GameStateStage.__init__"],["EngagementStateRepository.__init__","OnboardingStateRepository.__init__"],["PiiSafeFormatter.__init__","MetaInstructionEngine.__init__"],["TestProcessingStatsEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["ConversationsPage.__init__","ScoreCalculator.__init__"],["ConversationsPage.__init__","ConflictStore.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_game_over_triggered_at_zero","create_mock_user"],["PiiSafeFormatter.__init__","BaseStage.__init__"],["UserMetricsRepository.__init__","SummaryStage.__init__"],["UserRepository.__init__","ResolutionManager.__init__"],["PiiSafeFormatter.__init__","TokenEstimator.__init__"],["UserMetricsRepository.__init__","EngagementStateRepository.__init__"],["DashboardPage.__init__","VoiceAgentConfig.__init__"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step3_extract_all_js"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","FakeStage.__init__"],["ExtractionStage.__init__","LoginPage.__init__"],["BackstoryRepository.__init__","JourneyReport.__init__"],["PromptLoader.replace_match","PromptLoader._get_nested_value"],["ConversationThreadRepository.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MetaInstructionEngine.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","TouchpointEngine._compute_delivery_time"],["NikitaThoughtRepository.__init__","NarrativeArcRepository.__init__"],["ReadyPromptRepository.__init__","MissingVariableError.__init__"],["MockStage.__init__","MockReadyPromptRepo.__init__"],["TestUserListEndpointAuditLogging.app","TestAuditLogsEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BaseStage.__init__"],["MemoryUpdateStage.__init__","VoiceCallScorer.__init__"],["VicePreferenceRepository.__init__","TranscriptManager.__init__"],["TestErrorLogEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["TestUserMemoryEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenEstimator.__init__"],["UserMetricsRepository.__init__","TelegramBot.__init__"],["generate_response","add_personalized_context"],["JobExecutionRepository.__init__","TouchpointEngine.__init__"],["MockStage.__init__","DashboardE2ETest.__init__"],["MissingVariableError.__init__","GameStateStage.__init__"],["generate_social_circle_for_user","get_social_generator"],["LoginPage.__init__","ScoreHistoryRepository.__init__"],["ExtractionStage.__init__","VoiceCallVerifier.__init__"],["SummaryStage.__init__","TouchpointStage.__init__"],["TestConversationPromptsEndpoint.app","mock_admin_auth"],["NikitaThoughtRepository.__init__","EscalationManager.__init__"],["StageError.__init__","ScoreCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestDailySummaryRepositoryExtras.__init__"],["UserMetricsRepository.__init__","HistoryLoader.__init__"],["GameStateStage.__init__","NarrativeArcSystem.__init__"],["_ChapterBehaviorsProxy.get","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase2Conversation.__init__"],["TestInboundReadyPrompt.test_flag_disabled_skips","_make_handler"],["ConversationRepository.__init__","ScoreAnalyzer.__init__"],["SummaryStage.__init__","_ProfileFromAnswers.__init__"],["ConversationsPage.__init__","ResponseTimer.__init__"],["TestConversationPromptsEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["UserMetricsRepository.__init__","Phase3Portal.__init__"],["build_system_prompt","InboundCallHandler._try_load_ready_prompt"],["VicePreferenceRepository.__init__","TokenValidator.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._should_trigger"],["DashboardPage.__init__","OnboardingServerToolHandler.__init__"],["LoginPage.__init__","ProfileRepository.__init__"],["TestOTPFlowSteps.test_step3_otp_parsing","step3_parse_otp_from_email"],["StageError.__init__","NikitaThoughtRepository.__init__"],["MockStage.__init__","TouchpointEngine.__init__"],["TestMemoryUpdateStage.test_classify_graph_type_user","_mock_session"],["JobExecutionRepository.__init__","MemoryFactRepository.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase4_instructions"],["ViceScorer.close","close"],["JobExecutionRepository.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceAnalyzer.__init__"],["UserRepository.__init__","OTPFlowE2ETest.__init__"],["TestPipelineStatusEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["SummaryStage.__init__","RecoveryManager.__init__"],["analyze_neediness","UserMetricsRepository._clamp"],["LifeSimStage.__init__","ConfigLoader.__init__"],["SummaryStage.__init__","StateComputer.__init__"],["PendingRegistrationRepository.get_email","UserRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramLinkRepository.__init__"],["MemoryFactRepository.__init__","EvidenceCollector.__init__"],["PromptBuilderStage.__init__","DatabaseRateLimiter.__init__"],["BackstoryRepository.create_from_scenario","BaseRepository.get"],["ExtractionStage.__init__","OnboardingStateRepository.__init__"],["ConversationThreadRepository.__init__","SupabaseHelper.__init__"],["ScoreHistoryRepository.__init__","TokenBudgetManager.__init__"],["StageError.__init__","ResponseDelivery.__init__"],["DashboardPage.__init__","ExperimentLoader.__init__"],["TouchpointStage.__init__","GameStateStage.__init__"],["ConversationThreadRepository.__init__","LifeSimulator.__init__"],["DailySummaryRepository.__init__","BasePage.__init__"],["EmotionalStage.__init__","ConversationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationConfigBuilder.__init__"],["TokenValidator.truncate_layers","TokenValidator.truncate"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TextPatternProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceScorer.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator._format_arc"],["StageError.__init__","FakeStage.__init__"],["MockStage.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RateLimiter.__init__"],["MemoryUpdateStage.__init__","Phase2Conversation.__init__"],["JobExecutionRepository.__init__","TranscriptManager.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.get_ready_confirmation_message"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestDailySummaryRepositoryExtras.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","create_fake_jwt"],["MemoryFactRepository.__init__","VoiceAgentConfig.__init__"],["NikitaThoughtRepository.__init__","ScoreHistoryRepository.__init__"],["StageError.__init__","EntityManager.__init__"],["ReadyPromptRepository.__init__","SessionDetector.__init__"],["PromptBuilderStage.__init__","InboundCallHandler.__init__"],["EvidenceCollector.print_summary","EvidenceCollector.generate_report"],["UserRepository.update_onboarding_status","PendingRegistrationRepository.get"],["test_critical_stage_failure_fast_abort","MessageHandler.__init__"],["ScoreHistoryRepository.__init__","MockResult.__init__"],["TestPipelineContext.test_total_duration_ms","_make_ctx"],["TestConversationPromptsEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DecayCalculator.__init__"],["MissingVariableError.__init__","TokenBudgetManager.__init__"],["ConflictStore.get_conflict_summary","ConflictStore.get_user_conflicts"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TTSConfigService.__init__"],["NikitaThoughtRepository.__init__","ProfileRepository.__init__"],["UserRepository.set_boss_fight_status","TouchpointStore.get"],["MoodCalculator.compute_from_event","compute_from_events"],["TestAuditLogsEndpoint.app","TestThreadsList.mock_admin_auth"],["TestUserDetailEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","TextPatternProcessor.__init__"],["JobExecutionRepository.__init__","TokenValidator.__init__"],["get_conversation_pipeline","_build_pipeline_stages"],["MockStage.__init__","TranscriptManager.__init__"],["StateComputer._apply_relationship_modifier","StateComputer._apply_relationship_modifier"],["PiiSafeFormatter.__init__","RateLimiter.__init__"],["ConversationThreadRepository.__init__","Phase4GameState.__init__"],["NarrativeArcSystem.__init__","_index_templates"],["SocialCircle.to_dict","DynamicVariables.to_dict"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BaseRepository.__init__"],["TestPromptBuilderStage.test_graceful_failure_on_template_error","_make_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GeneratedPromptRepository.__init__"],["DailySummaryRepository.__init__","VoiceOnboardingFlow.__init__"],["RegistrationHandler.handle_email_input","is_valid_email"],["_get_chapter_behaviors","_load_chapter_behaviors"],["ScoreHistoryRepository.__init__","RegistrationHandler.__init__"],["MissingVariableError.__init__","MockResult.__init__"],["MemoryFactRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TextPatternProcessor.__init__"],["TestUserListEndpointAuditLogging.app","TestConversationPromptsEndpoint.mock_admin_auth"],["StageError.__init__","ViceAnalyzer.__init__"],["ScoreHistoryRepository.__init__","LifeSimulator.__init__"],["ProfileCollector.collect","ProfileCollector._set_field"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RateLimiter.__init__"],["ScoreHistoryRepository.__init__","PreferenceConfigurator.__init__"],["TelegramWebhookSimulator._build_message","TelegramWebhookSimulator._build_user"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BackstoryGeneratorService.__init__"],["ConflictStage.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockMappings.__init__"],["LoginPage.build_login_sequence","LoginPage.js_enter_email"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PunctuationProcessor.__init__"],["EmotionalStage.__init__","VoiceCallScorer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EvidenceCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockStage.__init__"],["MemoryUpdateStage.__init__","ScoreAnalyzer.__init__"],["AuditLog.__init__","DatabaseRateLimiter.__init__"],["test_critical_stage_failure_fast_abort","LoginPage.__init__"],["MockStage.__init__","TokenValidator.__init__"],["DynamicVariablesBuilder.build_from_context","ServerToolHandler._compute_nikita_activity"],["PromptBuilderStage.__init__","ProfileCollector.__init__"],["TestDecayProcessorShouldSkipUser.test_skip_won_status","create_mock_user"],["ConfigLoader._load_all_configs","_load_yaml"],["TouchpointStage.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DailySummaryRepository.__init__"],["DailySummaryRepository.__init__","ScoringService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PromptBuilderStage.__init__"],["ConversationsPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["ReadyPromptRepository.__init__","SocialCircleGenerator.__init__"],["SummaryStage.__init__","EmotionalStage.__init__"],["GeneratedPromptRepository.__init__","TelegramLinkRepository.__init__"],["ScoreHistoryRepository.__init__","MessageGenerator.__init__"],["TokenCounter.count","count_tokens"],["ConflictStage.__init__","VenueCacheRepository.__init__"],["TestUserMemoryEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["CommandHandler._handle_status","CommandHandler._get_score_hint"],["MissingVariableError.__init__","RegistrationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NarrativeArcRepository.__init__"],["TestPromptBuilderStage.test_ac_3_3_3_fallback_on_haiku_failure","_make_context"],["TestUserScoresEndpoint.app","TestConversationListEndpoint.mock_get_session"],["TestErrorLogEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["MissingVariableError.__init__","LifeSimulator.__init__"],["TelegramLinkRepository.delete_for_user","delete"],["UserMetricsRepository.__init__","ScoreCalculator.__init__"],["UserMetricsRepository.__init__","ConflictStore.__init__"],["UserMetricsRepository.update_metrics","ProfileRepository.get_by_user_id"],["test_critical_stage_failure_fast_abort","VoiceCallVerifier.__init__"],["TestAuditLogsEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceAgentConfig.__init__"],["MissingVariableError.__init__","PreferenceConfigurator.__init__"],["AuditLog.__init__","InboundCallHandler.__init__"],["analyze_neediness","StateComputer._clamp"],["BaseRepository.get","PackageStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","HandoffManager.__init__"],["TestConversationThreadRepository.test_get_threads_for_prompt_groups_by_type","TestConversationThreadRepository.mock_get_open_threads"],["BackstoryRepository.__init__","ConflictGenerator.__init__"],["ServerToolHandler.handle","_get_memory"],["mock_haiku","test_prompt_enrichment"],["StageError.__init__","ConversationConfigBuilder.__init__"],["TouchpointStage.__init__","MockResult.__init__"],["LifeSimStage.__init__","TouchpointScheduler.__init__"],["ScoreHistoryRepository.__init__","Phase4GameState.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EscalationManager.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_user_exists"],["_ChapterBehaviorsProxy.__len__","_load_chapter_behaviors"],["TelegramWebhookSimulator.send_message","TelegramWebhookSimulator._build_headers"],["ProfileRepository.__init__","TelegramLinkRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MetaNikitaConfig.__init__"],["DailySummaryRepository.__init__","FullJourneyOrchestrator.__init__"],["BaseStage.execute","ExtractionStage._run"],["UserNotFoundError.__init__","ResolutionManager.__init__"],["SummaryStage.__init__","UserRepository.__init__"],["TestProcessingStatsEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["FakeStage.__init__","GameStateStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointStage.__init__"],["MissingVariableError.__init__","MessageGenerator.__init__"],["BaseStage.execute","_run"],["DailySummaryRepository.__init__","VicePreferenceRepository.__init__"],["MemoryFactRepository.__init__","PsychologyMapper.__init__"],["CalibrationCalculator._frequency_component","StateComputer._clamp"],["LifeSimStage.__init__","TokenCounter.__init__"],["PromptBuilderStage.__init__","TriggerDetector.__init__"],["BackstoryRepository.__init__","ConversationsPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageHandler.__init__"],["BackstoryRepository.__init__","LifeSimStage.__init__"],["LifeSimStage.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestVicePreferenceRepositoryExtras.__init__"],["UserNotFoundError.__init__","ExperimentLoader.__init__"],["ScoreHistoryRepository.__init__","VoiceService.__init__"],["test_critical_stage_failure_fast_abort","OnboardingStateRepository.__init__"],["ReadyPromptRepository.__init__","TelegramWebhookSimulator.__init__"],["main","update_agent_tools"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingServerToolHandler.__init__"],["TouchpointStage.__init__","RegistrationHandler.__init__"],["InboundCallHandler._get_conversation_config_override","ConversationConfigBuilder._get_first_message"],["MissingVariableError.__init__","Phase4GameState.__init__"],["ExtractionStage._run","ExtractionStage._get_agent"],["EmotionalStage.__init__","Phase2Conversation.__init__"],["TouchpointStage.__init__","LifeSimulator.__init__"],["DailySummaryRepository.__init__","TestUserMetricsRepository.__init__"],["InboundCallHandler.handle_incoming_call","_check_availability"],["TouchpointStage.__init__","PreferenceConfigurator.__init__"],["BaseRepository.delete_by_id","_ChapterBehaviorsProxy.get"],["test_critical_stage_failure_fast_abort","ResponseTimer.__init__"],["VicePreferenceRepository.__init__","VoiceSessionManager.__init__"],["EscalationManager.escalate","EscalationManager._get_next_level"],["UserRepository.__init__","ConversationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RecoveryManager.__init__"],["TestUserMemoryEndpoint.app","TestUserListEndpoint.mock_get_session"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","TestHelpers.create_fake_jwt"],["AuditLog.__init__","ProfileCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GmailHelper.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ExperimentLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GmailMCPClient.__init__"],["GeneratedPromptRepository.__init__","MockMappings.__init__"],["TestGetCurrentAdminUser.test_admin_email_returns_user_id","make_token"],["GeneratedPromptRepository.__init__","PunctuationProcessor.__init__"],["EscalationManager.escalate","_get_next_level"],["UserRepository.increment_boss_attempts","PackageStore.get"],["PromptBuilderStage.__init__","InMemoryCache.__init__"],["MissingVariableError.__init__","VoiceService.__init__"],["ConversationRepository.__init__","PiiSafeFormatter.__init__"],["TouchpointStage.__init__","MessageGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreHistoryRepository.__init__"],["GeneratedPromptRepository.__init__","DailySummaryRepository.__init__"],["GeneratedPromptRepository.__init__","PromptBuilderStage.__init__"],["ViceService.close","close"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LoginPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StateComputer.__init__"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._evaluate_gap_trigger"],["TestEventStore.mock_session_factory","TestEventStore.__aexit__"],["EvidenceCollector.add_db_snapshot","EvidenceCollector.log"],["ReadyPromptRepository.__init__","PromptLoader.__init__"],["ConversationRepository.__init__","ViceService.__init__"],["GameStateStage.__init__","GameStateStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","CommandHandler.__init__"],["TouchpointStage.__init__","Phase4GameState.__init__"],["VoiceService.initiate_call","VoiceService._build_dynamic_variables"],["ProfileRepository.__init__","MockMappings.__init__"],["ProfileRepository.__init__","PunctuationProcessor.__init__"],["UserRepository.update_last_interaction","_ChapterBehaviorsProxy.get"],["NarrativeArcRepository.increment_conversation_count","get_arc_by_id"],["ConversationsPage.__init__","EvidenceCollector.__init__"],["FakeStage.__init__","TokenBudgetManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ServerToolHandler.__init__"],["PackageStore.delete","PendingRegistrationRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceCallVerifier.__init__"],["TestUserScoresEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["ProfileRepository.__init__","DailySummaryRepository.__init__"],["ReadyPromptRepository.__init__","EmojiProcessor.__init__"],["ConflictDetector.check_escalation","ConflictDetector._find_intermediate_state"],["ProfileRepository.__init__","PromptBuilderStage.__init__"],["DashboardPage.__init__","OTPVerificationHandler.__init__"],["MockAgentHelper.patch_message_handler","mock_handle"],["LifeEvent.model_dump_for_db","FriendCharacter.to_dict"],["AuditLog.__init__","TriggerDetector.__init__"],["OnboardingServerToolHandler.collect_profile","OnboardingServerToolHandler._persist_profile_to_db"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResolutionManager.__init__"],["EntityManager.get_entities_by_type","EventStore.get_entities_by_type"],["TestConversationListEndpoint.app","TestThoughtsList.mock_admin_auth"],["TestConversationsE2E.test_data_processing","ConversationsE2ETest.step3_process_data"],["ConversationRepository.__init__","UserNotFoundError.__init__"],["TouchpointStage.__init__","VoiceService.__init__"],["DailySummaryRepository.__init__","BackstoryRepository.__init__"],["UserRepository.__init__","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PendingRegistrationRepository.__init__"],["DailySummaryRepository.__init__","StrategicSilence.__init__"],["ConversationsPage.__init__","VoiceAgentConfig.__init__"],["StageError.__init__","TouchpointStage.__init__"],["JobExecutionRepository.__init__","VoiceSessionManager.__init__"],["VicePreferenceRepository.__init__","JourneyReport.__init__"],["ScoringService.score_interaction","_log_history"],["FakeStage.__init__","MockResult.__init__"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow._get_onboarding_state"],["handle_server_tool","_validate_signed_token"],["EngagementStateRepository.__init__","ResolutionManager.__init__"],["LifeSimulator.get_events_for_context","get_active_arcs"],["TestErrorLogEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["DailySummaryRepository.__init__","SummaryStage.__init__"],["TelegramAuth.verify_magic_link","register_user"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingStateRepository.__init__"],["PromptBuilderStage.__init__","MetaInstructionEngine.__init__"],["DailySummaryRepository.__init__","EngagementStateRepository.__init__"],["DynamicVariablesBuilder.build_from_user","VoiceService._compute_nikita_energy"],["SummaryStage.__init__","DecayCalculator.__init__"],["TestAuditLogsEndpoint.app","TestElevenLabsList.mock_admin_auth"],["ConflictStage.__init__","EngagementStateMachine.__init__"],["PromptBuilderStage.__init__","BaseStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceService.__init__"],["ConversationsE2ETest.get_verification_instructions","step4_db_query"],["AuditLog.__init__","InMemoryCache.__init__"],["PromptBuilderStage.__init__","TokenEstimator.__init__"],["ConversationRepository.__init__","UserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","_ProfileFromAnswers.__init__"],["EngagementStateRepository.__init__","ExperimentLoader.__init__"],["LifeSimStage.__init__","TelegramAuth.__init__"],["TestUserListEndpoint.app","TestConversationListEndpoint.mock_get_session"],["StageError.__init__","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResponseTimer.__init__"],["MockStage.__init__","VoiceSessionManager.__init__"],["TouchpointStage.__init__","PiiSafeFormatter.__init__"],["DashboardPage.__init__","BreakupManager.__init__"],["ReadyPromptRepository.__init__","DashboardPage.__init__"],["OnboardingStateRepository.add_answer","OnboardingStateRepository.get"],["UserRepository.invalidate_voice_cache","BaseRepository.get"],["UserMetricsRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestConversationThreadRepository.test_create_thread_valid_types","TestConversationThreadRepository.mock_create"],["atomic","atomic"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictDetector.__init__"],["FakeStage.__init__","RegistrationHandler.__init__"],["TestConversationPromptsEndpoint.app","TestTextStats.mock_admin_auth"],["ReadyPromptRepository.__init__","SocialCircleRepository.__init__"],["ConversationsPage.__init__","OnboardingServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PsychologyMapper.__init__"],["FakeStage.__init__","LifeSimulator.__init__"],["LoginPage.__init__","ServerToolHandler.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step1_verify_js"],["GameStateStage.__init__","TokenBudgetManager.__init__"],["DashboardPage.__init__","LengthAdjuster.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OTPFlowE2ETest.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","TestHelpers.create_fake_jwt"],["TestAuditLogsEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["FakeStage.__init__","PreferenceConfigurator.__init__"],["GeneratedPromptRepository.__init__","StateComputer.__init__"],["DailySummaryRepository.__init__","HistoryLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserNotFoundError.__init__"],["TestConversationListEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","PiiSafeFormatter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EmotionalStage.__init__"],["ProfileRepository.__init__","_ProfileFromAnswers.__init__"],["ReadyPromptRepository.__init__","NarrativeArcManager.__init__"],["MemoryFactRepository.__init__","TTSConfigService.__init__"],["DailySummaryRepository.__init__","Phase3Portal.__init__"],["MessageHandler.handle","MessageHandler._apply_text_patterns"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","UserRepository.__init__"],["ConflictStage.__init__","ViceScorer.__init__"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow.process_ready_response"],["SummaryStage.__init__","MockStage.__init__"],["LoginPage.__init__","PendingRegistrationRepository.__init__"],["PiiSafeFormatter.__init__","TestVicePreferenceRepository.__init__"],["ReadyPromptRepository.__init__","ConflictStage.__init__"],["EngagementStateRepository.__init__","OTPFlowE2ETest.__init__"],["MemoryFactRepository.__init__","OTPVerificationHandler.__init__"],["FakeStage.__init__","MessageGenerator.__init__"],["NikitaThoughtRepository.__init__","TokenCounter.__init__"],["UserRepository.__init__","Phase2Conversation.__init__"],["ReadyPromptRepository.__init__","MoodCalculator.__init__"],["MemoryUpdateStage.__init__","ViceService.__init__"],["JobExecutionRepository.__init__","JourneyReport.__init__"],["GameStateStage.__init__","MockResult.__init__"],["test_context","WebhookTestData.create"],["ProfileRepository.__init__","StateComputer.__init__"],["TestUserMemoryEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ExtractionStage.__init__"],["ProfileRepository.update_from_onboarding","ProfileRepository.get_by_user_id"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserRepository.__init__"],["TestResponseTimer.test_ac_4_1_5_distribution_not_uniform","mock_production_settings"],["ConversationThreadRepository.__init__","MessageSplitter.__init__"],["FakeStage.__init__","Phase4GameState.__init__"],["ExtractionStage.__init__","ResolutionManager.__init__"],["OnboardingHandler._handle_location_step","_validate_location"],["SummaryStage.__init__","HandoffManager.__init__"],["ElevenLabsConversationsClient.list_conversations","_headers"],["ReadyPromptRepository.__init__","ScheduledEventRepository.__init__"],["AuditLog.__init__","MetaInstructionEngine.__init__"],["TestUserScoresEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","UserNotFoundError.__init__"],["ConversationConfigBuilder.build_config","build_from_user"],["SummaryStage.__init__","SupabaseMemory.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","__init__"],["AuditLog.__init__","BaseStage.__init__"],["NarrativeArcSystem.update_arc","should_advance"],["MockStage.__init__","JourneyReport.__init__"],["GameStateStage.__init__","RegistrationHandler.__init__"],["ConversationsPage.__init__","PsychologyMapper.__init__"],["HandoffManager.execute_handoff_with_voice_callback","_extract_meeting_context"],["MessageHandler.handle","_score_and_check_boss"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InboundCallHandler.__init__"],["NikitaThoughtRepository.__init__","ServerToolHandler.__init__"],["AuditLog.__init__","TokenEstimator.__init__"],["PromptLoader.render","PromptLoader._substitute_variables"],["GameStateStage.__init__","LifeSimulator.__init__"],["TestConversationListEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["ConversationThreadRepository.__init__","VenueCacheRepository.__init__"],["TestDashboardE2E.test_verification_with_telegram_id","DashboardE2ETest.get_verification_instructions"],["TouchpointStage.__init__","UserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","TouchpointScheduler.__init__"],["SituationDetector._detect_situation_type","_is_morning"],["GameStateStage.__init__","PreferenceConfigurator.__init__"],["FakeStage.__init__","VoiceService.__init__"],["MemoryFactRepository.__init__","BreakupManager.__init__"],["ReadyPromptRepository.__init__","MemoryUpdateStage.__init__"],["FactExtractor.extract_facts","_deduplicate_facts"],["ReadyPromptRepository.__init__","ReadyPromptRepository.__init__"],["TestUserDetailEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["PackageStore.delete","TouchpointStore.delete"],["SummaryStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["UserRepository.__init__","ScoreAnalyzer.__init__"],["MessageHandler.handle","_get_or_create_conversation"],["NikitaThoughtRepository.__init__","PendingRegistrationRepository.__init__"],["UserRepository.update_score","UserRepository.get"],["InMemoryCache.get","InMemoryCache._cleanup_expired"],["MemoryFactRepository.__init__","MetaNikitaConfig.__init__"],["GameStateStage.__init__","MessageGenerator.__init__"],["TestUserListEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["UserMetricsRepository.__init__","TouchpointStage.__init__"],["ProfileRepository.__init__","TouchpointScheduler.__init__"],["BackstoryRepository.__init__","TelegramLinkRepository.__init__"],["audit_admin_action","audit_admin_action"],["PromptBuilderStage.__init__","TextPatternProcessor.__init__"],["StageError.__init__","PsychologyMapper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockReadyPromptRepo.__init__"],["ExtractionStage.__init__","OTPFlowE2ETest.__init__"],["TestBossEncountersEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["TokenValidator.validate","TokenValidator.count_tokens"],["EmotionalStage.__init__","CommandHandler.__init__"],["BackstoryGeneratorService.generate_scenarios","BackstoryGeneratorService._build_scenario_prompt"],["GeneratedPromptRepository.__init__","EmotionalStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OTPVerificationHandler.__init__"],["PromptBuilderStage.__init__","RateLimiter.__init__"],["ScoreHistoryRepository.__init__","MessageSplitter.__init__"],["UserMetricsRepository.__init__","EvidenceCollector.__init__"],["run_manual_otp_test","OTPFlowE2ETest.step3_build_otp_search_query"],["VoiceCallVerifier._verify_database","_check_metrics"],["TestMemoryUpdateStage.test_memory_update_no_facts_skips","_make_context"],["GameStateStage.__init__","Phase4GameState.__init__"],["BackstoryRepository.create_from_scenario","OnboardingStateRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ProfileCollector.__init__"],["MessageHandler._needs_onboarding","OTPVerificationHandler._offer_onboarding_choice"],["StageError.__init__","UserRepository.__init__"],["TouchpointStore.get_due_touchpoints","_to_pydantic"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BaseRepository.__init__"],["LifeSimStage.__init__","MissingVariableError.__init__"],["UserNotFoundError.__init__","BreakupManager.__init__"],["LifeSimulator.generate_next_day_events","initialize_user"],["ScoreHistoryRepository.__init__","VenueCacheRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingHandler.__init__"],["BaseRepository.update","session"],["UserMetricsRepository.__init__","VoiceAgentConfig.__init__"],["ProfileRepository.__init__","EmotionalStage.__init__"],["TokenEstimator.encoder","encoder"],["TestDashboardE2E.test_data_verification_logic","step4_verify_data"],["UserNotFoundError.__init__","LengthAdjuster.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointEngine.__init__"],["MissingVariableError.__init__","MessageSplitter.__init__"],["MemoryFactRepository.__init__","GmailMCPClient.__init__"],["GameStateStage.__init__","VoiceService.__init__"],["DailySummaryRepository.__init__","ScoreCalculator.__init__"],["ConflictStage.__init__","MessageHandler.__init__"],["PendingRegistrationRepository.cleanup_expired","delete"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DecayCalculator.__init__"],["TestUserListEndpointAuditLogging.app","TestPipelineStatus.mock_admin_auth"],["OnboardingStateRepository.update_step","PackageStore.get"],["HistoryLoader.__init__","load"],["run_manual_otp_test","PortalLoginTestContext.create"],["TestPipelineOrchestratorHappyPath.test_all_stages_called_in_order","execute"],["NikitaThoughtRepository.__init__","TelegramAuth.__init__"],["HandoffManager.transition","HandoffManager.execute_handoff"],["GeneratedPromptRepository.__init__","__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TTSConfigService.__init__"],["LifeSimulator.get_events_for_context","_summarize_mood"],["VicePreferenceRepository.__init__","ConversationsPage.__init__"],["TestPipelineStatusEndpoint.app","TestThoughtsList.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BreakupManager.__init__"],["VicePreferenceRepository.__init__","LifeSimStage.__init__"],["LifeSimStage.__init__","SkipDecision.__init__"],["BackstoryGeneratorService.process_custom_backstory","_build_extraction_prompt"],["EmotionalStage.__init__","ViceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ElevenLabsConversationsClient.__init__"],["PiiSafeFormatter.__init__","BaseRepository.__init__"],["UserRepository.advance_chapter","PendingRegistrationRepository.get"],["DailySummaryRepository.__init__","NikitaThoughtRepository.__init__"],["DashboardPage.__init__","Phase1Registration.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NarrativeArcRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","FactExtractor.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OTPVerificationHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LengthAdjuster.__init__"],["ConversationRepository.__init__","VoiceOnboardingFlow.__init__"],["BaseRepository.delete_by_id","TouchpointStore.get"],["TTSConfigService.get_final_settings","TTSConfigService.get_chapter_settings"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationRepository.__init__"],["UserMetricsRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TriggerDetector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceScorer.__init__"],["BackstoryRepository.__init__","MockMappings.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EventStore.__init__"],["PiiSafeFormatter.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BaseRepository.__init__"],["EntityManager.get_entities_by_type","EntityManager.get_entities_by_type"],["BackstoryRepository.__init__","PunctuationProcessor.__init__"],["GameStateStage.__init__","PiiSafeFormatter.__init__"],["MockAgentHelper.patch_get_nikita_agent_for_user","create_mock_deps"],["AuditLog.__init__","TextPatternProcessor.__init__"],["ProfileRepository.__init__","__init__"],["DailySummaryRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EscalationManager.__init__"],["EscalationManager._check_natural_resolution","_get_time_in_level"],["VicePreferenceRepository.__init__","PackageStore.__init__"],["BackstoryRepository.__init__","DailySummaryRepository.__init__"],["ScoreHistoryRepository.__init__","PipelineOrchestrator.__init__"],["AuditLog.__init__","RateLimiter.__init__"],["BaseStage.execute","FakeContextReadStage._run"],["EmotionalStage.__init__","UserNotFoundError.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockStage.__init__"],["test_critical_stage_failure_fast_abort","ResolutionManager.__init__"],["ConflictStage.__init__","LoginPage.__init__"],["ConversationRepository.__init__","ScoringService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BackstoryGeneratorService.__init__"],["TestBossEncountersEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["EngagementStateRepository.__init__","ConversationRepository.__init__"],["HandoffManager.execute_handoff_with_voice_callback","FirstMessageGenerator.generate"],["UserRepository.delete_user_cascade","PendingRegistrationRepository.get"],["TouchpointStage.__init__","BasePage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","AuditLog.__init__"],["TestUserListEndpointAuditLogging.app","TestAuditLogsEndpoint.mock_admin_auth"],["test_critical_stage_failure_fast_abort","ExperimentLoader.__init__"],["DailySummaryRepository.__init__","EntityManager.__init__"],["OnboardingHandler._handle_venue_research_step","OnboardingHandler._present_scenarios"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TranscriptManager.__init__"],["LifeSimStage.__init__","SessionDetector.__init__"],["DatabaseRateLimiter.check","DatabaseRateLimiter._seconds_until_midnight"],["ConversationsPage.__init__","DecayCalculator.__init__"],["main","update_agent_prompt_and_first_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockStage.__init__"],["MessageHandler.handle","MessageHandler._send_error_response"],["ConflictStage.__init__","VoiceCallVerifier.__init__"],["UserRepository.update_last_interaction","TouchpointStore.get"],["TestUserListEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NarrativeArcRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","HandoffManager.__init__"],["PiiSafeFormatter.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ServerToolHandler.__init__"],["UserNotFoundError.__init__","Phase2Conversation.__init__"],["MissingVariableError.__init__","PipelineOrchestrator.__init__"],["ConversationsPage.__init__","TTSConfigService.__init__"],["PackageStore.exists","BaseRepository.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GmailMCPClient.__init__"],["InboundCallHandler._get_conversation_config_override","VoiceService._get_first_message"],["ConversationThreadRepository.__init__","EngagementStateMachine.__init__"],["ViceScorer.get_profile","_get_vice_repo"],["DashboardPage.__init__","ConversationThreadRepository.__init__"],["BackstoryRepository.__init__","ConfigLoader.__init__"],["JobExecutionRepository.__init__","ConversationsPage.__init__"],["JobExecutionRepository.__init__","LifeSimStage.__init__"],["ConversationRepository.__init__","FullJourneyOrchestrator.__init__"],["NarrativeArcManager.maybe_create_arc","LifeSimulator.get_active_arcs"],["ConversationsPage.__init__","OTPVerificationHandler.__init__"],["TestErrorLogEndpoint.app","TestThreadsList.mock_admin_auth"],["VoiceCallVerifier._verify_database","_check_engagement"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MetaNikitaConfig.__init__"],["LoginPage.__init__","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EscalationManager.__init__"],["TestPromptBuilderStage.test_sets_prompt_on_context_matching_platform","_make_context"],["MemoryFactRepository.__init__","ConflictDetector.__init__"],["UserMetricsRepository.__init__","PsychologyMapper.__init__"],["ConversationRepository.__init__","VicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","HandoffManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceCallScorer.__init__"],["TouchpointScheduler._evaluate_gap_trigger","_get_initiation_rate"],["LoginPage.__init__","ViceScorer.__init__"],["test_critical_stage_failure_fast_abort","OTPFlowE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreHistoryRepository.__init__"],["StageError.__init__","DecayCalculator.__init__"],["DailySummaryRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SupabaseMemory.__init__"],["TextPatternProcessor.process","TextPatternProcessor.process"],["DashboardPage.__init__","StageError.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestVicePreferenceRepositoryExtras.__init__"],["MemoryFactRepository.__init__","Phase1Registration.__init__"],["LoginPage.__init__","DeliveryResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoringService.__init__"],["BaseRepository.update","TouchpointStore.create"],["UserRepository.__init__","CommandHandler.__init__"],["TouchpointStage.__init__","VoiceOnboardingFlow.__init__"],["ConflictStage.__init__","OnboardingStateRepository.__init__"],["SummaryStage.__init__","DatabaseRateLimiter.__init__"],["SocialCircle.to_dict","TriggerContext.to_dict"],["StageError.__init__","TTSConfigService.__init__"],["JobExecutionRepository.__init__","PackageStore.__init__"],["EngagementStateRepository.__init__","LengthAdjuster.__init__"],["MockStage.__init__","ConversationsPage.__init__"],["ProfileRepository.update_from_onboarding","InMemoryCache.get"],["TextPatternProcessor.process_for_sending","EmojiProcessor.process"],["TelegramLinkRepository.verify_code","PackageStore.delete"],["GameStateStage.__init__","UserMetricsRepository.__init__"],["MockStage.__init__","LifeSimStage.__init__"],["TelegramLinkRepository.delete","BaseRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SupabaseHelper.__init__"],["ConversationRepository.__init__","TestUserMetricsRepository.__init__"],["EngagementStateRepository.__init__","VoiceCallScorer.__init__"],["DashboardPage.__init__","DashboardE2ETest.__init__"],["ConversationThreadRepository.__init__","ViceScorer.__init__"],["ConflictStage.__init__","ResponseTimer.__init__"],["TouchpointStage.__init__","PipelineOrchestrator.__init__"],["LoginPage.__init__","AuditLog.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","create"],["VoiceService.initiate_call","ConversationConfigBuilder._generate_fallback_prompt"],["ExtractionStage.__init__","ConversationRepository.__init__"],["GeneratedPromptRepository.__init__","EventStore.__init__"],["InMemoryCache.get","PendingRegistrationRepository.get"],["PackageStore.cleanup_expired","delete"],["generate_touchpoint_message","FirstMessageGenerator.generate"],["VoiceCallScorer.apply_score","score_call"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestVicePreferenceRepositoryExtras.__init__"],["ScoreCalculator.calculate","ScoreCalculator.update_metrics"],["TestPipelineStatusEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","VoiceOnboardingFlow.__init__"],["ReadyPromptRepository.__init__","GeneratedPromptRepository.__init__"],["PiiSafeFormatter.__init__","ScoreHistoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GmailMCPClient.__init__"],["SummaryStage.__init__","InboundCallHandler.__init__"],["log_critical","log_error"],["ConversationsPage.__init__","BreakupManager.__init__"],["ScoreHistoryRepository.__init__","EngagementStateMachine.__init__"],["MemoryFactRepository.__init__","ExtractionStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MetaInstructionEngine.__init__"],["ProfileRepository.create_profile","PortalLoginTestContext.create"],["MockStage.__init__","PackageStore.__init__"],["ProfileCollector.collect","ProfileCollector.collect"],["RecoveryManager.check_point_of_no_return","RecoveryManager._get_game_over_reason"],["UserRepository.__init__","PiiSafeFormatter.__init__"],["RateLimiter.check","RateLimiter._get_minute_key"],["StageError.__init__","MockStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BaseStage.__init__"],["build_system_prompt","ServerToolHandler._try_load_ready_prompt"],["DailySummaryRepository.__init__","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResolutionManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenEstimator.__init__"],["TelegramAuth.register_user","TelegramAuth.send_otp_code"],["NikitaThoughtRepository.__init__","FactExtractor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreHistoryRepository.__init__"],["ConversationsPage.__init__","MetaNikitaConfig.__init__"],["ProfileRepository.__init__","EventStore.__init__"],["MemoryUpdateStage.__init__","ScoringService.__init__"],["StateComputer._compute_base_state","_clamp"],["run_async_migrations","get_url"],["PiiSafeFormatter.__init__","ProfileRepository.__init__"],["UserNotFoundError.__init__","Phase1Registration.__init__"],["ScoreHistoryRepository.__init__","PortalLoginE2ETest.__init__"],["ScoreCalculator.update_metrics","clamp"],["DashboardPage.__init__","CommandHandler.__init__"],["EmotionalStage.__init__","OnboardingHandler.__init__"],["UserRepository.__init__","ViceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ExperimentLoader.__init__"],["FakeStage.__init__","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase2Conversation.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","get_user_by_telegram_id"],["MemoryFactRepository.__init__","ConversationThreadRepository.__init__"],["UserRepository.is_onboarded","_ChapterBehaviorsProxy.get"],["TouchpointStage.__init__","FullJourneyOrchestrator.__init__"],["BaseRepository.update","BackstoryRepository.create"],["MissingVariableError.__init__","EngagementStateMachine.__init__"],["NikitaThoughtRepository.__init__","DeliveryResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ProfileRepository.__init__"],["StageError.__init__","HandoffManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestUserMetricsRepository.__init__"],["NikitaThoughtRepository.__init__","SkipDecision.__init__"],["LifeSimStage.__init__","TelegramWebhookSimulator.__init__"],["TestUserListEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["DashboardPage.__init__","MemoryFactRepository.__init__"],["VoiceCallVerifier.verify_all","_verify_neo4j"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase1Registration.__init__"],["StageError.__init__","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","AuditLog.__init__"],["ConversationRepository.__init__","BackstoryRepository.__init__"],["MemoryUpdateStage.__init__","FullJourneyOrchestrator.__init__"],["MemoryFactRepository.__init__","StageError.__init__"],["SummaryStage.__init__","ProfileCollector.__init__"],["ConversationRepository.__init__","StrategicSilence.__init__"],["UserRepository.__init__","UserNotFoundError.__init__"],["EngagementStateRepository.__init__","Phase2Conversation.__init__"],["MissingVariableError.__init__","PortalLoginE2ETest.__init__"],["PiiSafeFormatter.__init__","EventGenerator.__init__"],["EmotionalStage.__init__","ElevenLabsConversationsClient.__init__"],["ExtractionStage.__init__","VoiceCallScorer.__init__"],["UserRepository.delete_user_cascade","InMemoryCache.get"],["MemoryFactRepository.__init__","MockReadyPromptRepo.__init__"],["GeneratedPromptRepository.__init__","SupabaseMemory.__init__"],["MemoryUpdateStage.__init__","VicePreferenceRepository.__init__"],["BaseRepository.get","get"],["PromptBuilderStage.__init__","TestVicePreferenceRepository.__init__"],["ConversationsPage.__init__","GmailMCPClient.__init__"],["GmailHelper.wait_for_magic_link","GmailHelper._extract_magic_link"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LoginPage.__init__"],["BackstoryRepository.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OTPFlowE2ETest.__init__"],["StageError.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MemoryFactRepository.__init__","DashboardE2ETest.__init__"],["TestUserListEndpointAuditLogging.app","TestPipelineStatusEndpoint.mock_admin_auth"],["GeneratedPromptRepository.__init__","MissingVariableError.__init__"],["ConversationRepository.__init__","SummaryStage.__init__"],["ConversationRepository.__init__","EngagementStateRepository.__init__"],["ViceScorer.close","ViceService.close"],["TestServerToolsReadyPrompt.test_uses_voice_platform","_make_server_handler"],["UserNotFoundError.__init__","ConversationThreadRepository.__init__"],["TouchpointStore.get_user_touchpoints","_to_pydantic"],["TouchpointStage.__init__","EngagementStateMachine.__init__"],["MemoryUpdateStage.__init__","TestUserMetricsRepository.__init__"],["LifeSimStage.__init__","VenueResearchService.__init__"],["ProfileRepository.__init__","SupabaseMemory.__init__"],["EscalationManager.get_escalation_timeline","EscalationManager._get_natural_resolution_probability"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreAnalyzer.__init__"],["BackstoryRepository.__init__","TouchpointStore.__init__"],["LifeSimStage.__init__","PromptLoader.__init__"],["MissingVariableError.__init__","ConversationsE2ETest.__init__"],["TestConversationThreadRepository.test_bulk_resolve_threads_resolves_found","TestConversationThreadRepository.mock_resolve_thread"],["ScoreHistoryRepository.__init__","TelegramBot.__init__"],["TelegramLinkRepository.delete_for_user","PendingRegistrationRepository.delete"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictDetector.__init__"],["MessageHandler._score_and_check_boss","_update_engagement_after_scoring"],["NeglectDetector.detect","NeglectDetector._short_message_signal"],["MetaInstructionEngine.format_for_prompt","format_for_prompt"],["UserRepository.invalidate_voice_cache","OnboardingStateRepository.get"],["ProfileRepository.__init__","MissingVariableError.__init__"],["ScoreCalculator.calculate","apply_multiplier"],["BackstoryRepository.__init__","EmotionalStage.__init__"],["StageError.__init__","GmailMCPClient.__init__"],["MemoryFactRepository.__init__","TouchpointEngine.__init__"],["ProfileRepository.update_from_onboarding","get_by_user_id"],["StateStore.update_state","get_current_state"],["UserMetricsRepository.__init__","DecayCalculator.__init__"],["main","get_current_agent_config"],["UserNotFoundError.__init__","StageError.__init__"],["TouchpointStage.__init__","PortalLoginE2ETest.__init__"],["ConversationThreadRepository.__init__","MessageHandler.__init__"],["TestTimeoutFallback.test_timeout_decorator_returns_normal_on_success","TestTimeoutFallback.fast_function"],["analyze_neediness","_clamp"],["ConversationRepository.__init__","HistoryLoader.__init__"],["SummaryStage.__init__","TriggerDetector.__init__"],["LifeSimStage.__init__","EmojiProcessor.__init__"],["FakeStage.__init__","PipelineOrchestrator.__init__"],["GameStateStage.__init__","BasePage.__init__"],["TestRateLimiter.test_ac_fr006_002_warning_when_approaching_daily_limit","TestRateLimiter.mock_incr"],["DashboardPage.__init__","TokenValidator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StrategicSilence.__init__"],["UserMetricsRepository.__init__","TTSConfigService.__init__"],["ConversationRepository.__init__","Phase3Portal.__init__"],["SituationDetector.detect","SituationDetector._detect_situation_type"],["UserNotFoundError.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SocialCircleGenerator.__init__"],["UserMetricsRepository.__init__","OTPVerificationHandler.__init__"],["TestUserScoresEndpoint.app","TestPipelineStatus.mock_admin_auth"],["OnboardingHandler.handle","_handle_scene_step"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingStateRepository.__init__"],["DailySummaryRepository.__init__","TouchpointStage.__init__"],["MissingVariableError.__init__","TelegramBot.__init__"],["TestLLMTimeoutHandling.test_llm_timeout_logs_error","slow_llm_call"],["BaseStage.execute","FakeContextSetStage._run"],["UserRepository.increment_boss_attempts","get"],["ExtractionStage.__init__","Phase2Conversation.__init__"],["test_critical_stage_failure_fast_abort","ConversationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EngagementStateRepository.__init__"],["MemoryFactRepository.__init__","MemoryFactRepository.__init__"],["SituationDetector.detect","SituationDetector._build_metadata"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StageError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceSessionManager.__init__"],["TouchpointStage.__init__","BackstoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DatabaseRateLimiter.__init__"],["TouchpointStage.__init__","ConversationsE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ExtractionStage.__init__"],["RateLimiter.get_remaining","OnboardingStateRepository.get"],["AuditLog.__init__","TestVicePreferenceRepository.__init__"],["OnboardingServerToolHandler.configure_preferences","_get_or_create_profile"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestDailySummaryRepositoryContextEngineering.__init__"],["BackstoryRepository.__init__","__init__"],["EmotionalStage.__init__","ScoringService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DashboardE2ETest.__init__"],["TestResponseTimer.test_development_mode_returns_zero","mock_development_settings"],["ConversationThreadRepository.__init__","LoginPage.__init__"],["ConflictStore.resolve_conflict","update_conflict"],["DailySummaryRepository.__init__","RecoveryManager.__init__"],["MemoryUpdateStage.__init__","BackstoryRepository.__init__"],["LifeEvent.model_dump_for_db","SocialCircle.to_dict"],["EscalationManager.get_escalation_timeline","EscalationManager._get_time_in_level"],["VicePreferenceRepository.__init__","EventGenerator.__init__"],["MemoryUpdateStage.__init__","StrategicSilence.__init__"],["ConversationsPage.__init__","ConflictDetector.__init__"],["GameStateStage.__init__","VoiceOnboardingFlow.__init__"],["LifeSimStage.__init__","DashboardPage.__init__"],["ProfileRepository.get_by_user_id","PendingRegistrationRepository.get"],["UserNotFoundError.__init__","CommandHandler.__init__"],["MemoryUpdateStage._run","_classify_graph_type"],["BaseRepository.delete","TelegramLinkRepository.delete"],["ScoreHistoryRepository.__init__","MessageHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InboundCallHandler.__init__"],["LifeSimStage.__init__","SocialCircleRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","FactExtractor.__init__"],["MemoryFactRepository.__init__","TranscriptManager.__init__"],["HandoffManager.initiate_nikita_callback","HandoffManager._get_post_onboarding_first_message"],["OnboardingServerToolHandler.configure_preferences","_persist_profile_to_db"],["TokenValidator.validate","count_tokens"],["ConversationsPage.__init__","Phase1Registration.__init__"],["GameStateStage.__init__","PipelineOrchestrator.__init__"],["ConversationThreadRepository.__init__","VoiceCallVerifier.__init__"],["TouchpointStage.__init__","TelegramBot.__init__"],["MemoryUpdateStage.__init__","SummaryStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceScorer.__init__"],["TestEmptyPipelineE2E.test_single_stage_pipeline","make_pipeline"],["PendingRegistrationRepository.get_email","PackageStore.get"],["MemoryUpdateStage.__init__","EngagementStateRepository.__init__"],["TriggerDetector.__init__","TriggerDetector._get_detection_prompt"],["TestUserScoresEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["LifeSimStage.__init__","NarrativeArcManager.__init__"],["VicePreferenceRepository.__init__","PunctuationProcessor.__init__"],["LifeSimStage.__init__","DecayProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DeliveryResult.__init__"],["UserMetricsRepository.__init__","MetaNikitaConfig.__init__"],["TouchpointStage.__init__","HistoryLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","CommandHandler.__init__"],["test_critical_stage_failure_fast_abort","LengthAdjuster.__init__"],["EmotionalStage.__init__","VicePreferenceRepository.__init__"],["ConflictGenerator.generate","_select_conflict_type"],["LoginPage.__init__","OnboardingStateRepository.__init__"],["TestPipelineStatusEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["VoiceOnboardingFlow.resume_onboarding","_update_state"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._get_experiment_path"],["MemoryFactRepository.__init__","TokenValidator.__init__"],["StageError.__init__","ConflictDetector.__init__"],["MissingVariableError.__init__","MessageHandler.__init__"],["LifeSimStage.__init__","MoodCalculator.__init__"],["TouchpointStage.__init__","Phase3Portal.__init__"],["ConversationThreadRepository.bulk_create_threads","create_thread"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockReadyPromptRepo.__init__"],["test_critical_stage_failure_fast_abort","VoiceCallScorer.__init__"],["TestUserMemoryEndpoint.app","TestTextConversationList.mock_admin_auth"],["PackageStore.exists","get"],["PromptBuilderStage.__init__","BaseRepository.__init__"],["SupabaseMemory.get_recent","MemoryFactRepository.get_recent"],["FakeStage.__init__","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","AuditLog.__init__"],["ConversationsPage.__init__","ExtractionStage.__init__"],["VoiceAgentConfig.get_agent_config","ConversationConfigBuilder._get_first_message"],["MockStage.__init__","TelegramLinkRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MemoryFactRepository.__init__"],["MemoryUpdateStage.__init__","HistoryLoader.__init__"],["TestUserListEndpointAuditLogging.app","TestUserScoresEndpoint.mock_get_session"],["VoiceService._generate_fallback_prompt","_generate_fallback_prompt"],["LoginPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["GeneratedPromptRepository.__init__","SocialCircleGenerator.__init__"],["ConversationThreadRepository.__init__","OnboardingStateRepository.__init__"],["EmotionalStage.__init__","TestUserMetricsRepository.__init__"],["UserNotFoundError.__init__","ViceService.__init__"],["PromptBuilderStage.__init__","BackstoryGeneratorService.__init__"],["SummaryStage.__init__","MetaInstructionEngine.__init__"],["MemoryUpdateStage.__init__","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ProfileCollector.__init__"],["GameStateStage.__init__","FullJourneyOrchestrator.__init__"],["SummaryStage.__init__","BaseStage.__init__"],["LifeSimStage.__init__","ScheduledEventRepository.__init__"],["FakeStage.__init__","PortalLoginE2ETest.__init__"],["DashboardPage.__init__","OnboardingHandler.__init__"],["SummaryStage.__init__","TokenEstimator.__init__"],["ConversationThreadRepository.__init__","ResponseTimer.__init__"],["Phase2Conversation.execute_all_messages","execute_message"],["JobExecutionRepository.__init__","EventGenerator.__init__"],["ScoreHistoryRepository.__init__","VoiceCallVerifier.__init__"],["ConversationsPage.__init__","ConversationThreadRepository.__init__"],["VicePreferenceRepository.__init__","ConfigLoader.__init__"],["TestErrorLogEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["UserMetricsRepository.__init__","GmailMCPClient.__init__"],["SupabaseMemory.find_similar","_generate_embedding"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointEngine.__init__"],["StageError.__init__","DatabaseRateLimiter.__init__"],["ConversationRepository.__init__","ScoreCalculator.__init__"],["HandoffManager.execute_handoff_with_voice_callback","HandoffManager._send_first_message"],["ScoreHistoryRepository.__init__","ConflictStore.__init__"],["StageError.__init__","ExtractionStage.__init__"],["ProfileRepository.__init__","SocialCircleGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ProfileCollector.__init__"],["TelegramLinkRepository.delete_for_user","TouchpointStore.delete"],["TouchpointStage.__init__","MessageHandler.__init__"],["LifeSimStage.__init__","MemoryUpdateStage.__init__"],["TestDailySummaryLLM.test_llm_timeout_prevents_blocking","TestDailySummaryLLM.slow_run"],["OTPEmailParser.parse_otp_email","_extract_body"],["PromptBuilderStage._store_prompt","_sync_cached_voice_prompt"],["build_dynamic_variables","get_dynamic_variables_builder"],["LifeSimStage.__init__","ReadyPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","CommandHandler.__init__"],["OnboardingServerToolHandler.handle_request","UserRepository.complete_onboarding"],["NikitaThoughtRepository.__init__","OnboardingStateRepository.__init__"],["PromptBuilderStage.__init__","EscalationManager.__init__"],["JobExecutionRepository.__init__","PunctuationProcessor.__init__"],["DashboardPage.__init__","ElevenLabsConversationsClient.__init__"],["ConversationRepository.__init__","NikitaThoughtRepository.__init__"],["LoginPage.__init__","StateStore.__init__"],["TestUserDetailEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["FakeStage.__init__","ConversationsE2ETest.__init__"],["MessageHandler.handle","generate_response"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow._get_onboarding_state"],["ProfileCollector.get_profile","ProfileCollector.get_profile"],["RecoveryManager.apply_recovery","RecoveryManager._get_de_escalated_state"],["ConversationsPage.__init__","MockReadyPromptRepo.__init__"],["BackstoryRepository.__init__","EventStore.__init__"],["StageError.__init__","InboundCallHandler.__init__"],["MissingVariableError.__init__","VoiceCallVerifier.__init__"],["DailySummaryRepository.__init__","PsychologyMapper.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","BaseRepository.create"],["TouchpointScheduler._evaluate_time_trigger","_get_current_time_slot"],["TestAuditLogsEndpoint.app","mock_admin_auth"],["estimate_tokens_accurate","TokenEstimator.estimate_accurate"],["GameStateStage.__init__","EngagementStateMachine.__init__"],["ViceService.close","ViceService.close"],["PiiSafeFormatter.__init__","TokenCounter.__init__"],["UserRepository.__init__","VoiceOnboardingFlow.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TriggerDetector.__init__"],["test_critical_stage_failure_fast_abort","Phase2Conversation.__init__"],["TestHaikuEnrichment.test_enrichment_called_when_api_key_present","TestHaikuEnrichment.mock_enrich"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ServerToolHandler.__init__"],["ConversationsPage.__init__","DashboardE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenValidator.__init__"],["MissingVariableError.__init__","ConflictStore.__init__"],["MessageGenerator._load_template","_get_default_template"],["ConversationRepository.__init__","ResponseDelivery.__init__"],["EngagementStateRepository.__init__","CommandHandler.__init__"],["NikitaThoughtRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["AuditLog.__init__","BaseRepository.__init__"],["TestUserListEndpoint.app","TestPipelineStatus.mock_admin_auth"],["TestAuditLogsEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BreakupManager.__init__"],["create_app","root"],["OnboardingHandler.handle","_handle_life_stage_step"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InstructionSelector.__init__"],["ScoreHistoryRepository.__init__","ResponseTimer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenCounter.__init__"],["MockStage.__init__","PunctuationProcessor.__init__"],["EmotionalStage.__init__","StrategicSilence.__init__"],["ConflictStage.__init__","ResolutionManager.__init__"],["DailySummaryRepository.__init__","UserRepository.__init__"],["PipelineContext.update_from_result","record_stage_error"],["TestUserMemoryEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["GameStateStage.__init__","PortalLoginE2ETest.__init__"],["UserRepository.update_settings","get"],["PendingRegistrationRepository.cleanup_expired","OnboardingStateRepository.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PendingRegistrationRepository.__init__"],["MockStage.__init__","DailySummaryRepository.__init__"],["UserRepository.__init__","ScoringService.__init__"],["AuditLog.__init__","BackstoryGeneratorService.__init__"],["FakeStage.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","LengthAdjuster.__init__"],["TestUserListEndpoint.app","TestVoiceStats.mock_admin_auth"],["ViceScorer.get_top_vices","ViceScorer.get_profile"],["StageError.__init__","MockReadyPromptRepo.__init__"],["ConversationRepository.__init__","EntityManager.__init__"],["ProfileRepository.get_by_user_id","InMemoryCache.get"],["ConversationsPage.__init__","TouchpointEngine.__init__"],["ConflictStage.__init__","ExperimentLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TranscriptManager.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_scene_step"],["JobExecutionRepository.__init__","ConfigLoader.__init__"],["EmotionalStage.__init__","EngagementStateRepository.__init__"],["PiiSafeFormatter.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceService.__init__"],["load_entity_config","_get_default_entities_config"],["DatabaseRateLimiter.check","_seconds_until_midnight"],["DecayProcessor.process_user","DecayProcessor.should_skip_user"],["UserRepository.is_onboarded","TouchpointStore.get"],["MockAgentHelper.mock_get_agent","MockAgentHelper.create_mock_deps"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VenueCacheRepository.__init__"],["AuditLog.__init__","NarrativeArcRepository.__init__"],["PromptBuilderStage.__init__","ScoreHistoryRepository.__init__"],["StageError.__init__","ProfileCollector.__init__"],["MissingVariableError.__init__","ResponseTimer.__init__"],["TouchpointStage.__init__","ScoreCalculator.__init__"],["TouchpointStage.__init__","ConflictStore.__init__"],["GameStateStage.__init__","BackstoryRepository.__init__"],["NikitaThoughtRepository.__init__","StateStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictStage.__init__"],["TestUserMemoryEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["GameStateStage.__init__","ConversationsE2ETest.__init__"],["NeglectDetector.detect","NeglectDetector._frequency_signal"],["TestUserScoresEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","PendingRegistrationRepository.__init__"],["UserRepository.__init__","FullJourneyOrchestrator.__init__"],["UserMetricsRepository.__init__","ConflictDetector.__init__"],["EngagementStateRepository.__init__","ViceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InMemoryCache.__init__"],["ConversationsPage.__init__","MemoryFactRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResponseDelivery.__init__"],["AuditLog.__init__","EscalationManager.__init__"],["DecayProcessor.process_user","_handle_game_over"],["TouchpointEngine._deliver_single","_send_telegram_message"],["MockStage.__init__","ConfigLoader.__init__"],["TestProcessingStatsEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserNotFoundError.__init__"],["StageError.__init__","TouchpointEngine.__init__"],["PromptBuilderStage.__init__","ProfileRepository.__init__"],["UserRepository.__init__","VicePreferenceRepository.__init__"],["TestUserListEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["ConversationRepository.__init__","ViceAnalyzer.__init__"],["PromptLoader._substitute_variables","PromptLoader.replace_match"],["SummaryStage.__init__","TextPatternProcessor.__init__"],["ConflictStage.__init__","OTPFlowE2ETest.__init__"],["test_no_fk_violation_with_session","track_commit"],["MemoryUpdateStage.__init__","ScoreCalculator.__init__"],["UserMetricsRepository.__init__","Phase1Registration.__init__"],["BackstoryRepository.__init__","MissingVariableError.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_past_grace_returns_true","create_mock_user"],["SummaryStage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PendingRegistrationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","FakeStage.__init__"],["NikitaThoughtRepository.__init__","DecayProcessor.__init__"],["ExtractionStage.__init__","CommandHandler.__init__"],["LoginPage.__init__","InstructionSelector.__init__"],["VicePreferenceRepository.__init__","TouchpointScheduler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EntityManager.__init__"],["DashboardPage.__init__","JourneyReport.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step3_build_otp_search_query"],["EngagementStateRepository.__init__","UserNotFoundError.__init__"],["UserNotFoundError.__init__","OnboardingHandler.__init__"],["UserRepository.__init__","TestUserMetricsRepository.__init__"],["GameStateStage.__init__","TelegramBot.__init__"],["MemoryUpdateStage.__init__","NikitaThoughtRepository.__init__"],["FakeStage.__init__","MessageHandler.__init__"],["TouchpointStage.__init__","ResponseTimer.__init__"],["ConversationsPage.__init__","TranscriptManager.__init__"],["OnboardingStateRepository.update_step","get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TestVicePreferenceRepository.__init__"],["StageError.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase2Conversation.__init__"],["MemoryFactRepository.__init__","VoiceSessionManager.__init__"],["PromptBuilderStage.__init__","EventGenerator.__init__"],["GameStateStage.__init__","HistoryLoader.__init__"],["HandoffManager.execute_handoff","HandoffManager._generate_profile_summary"],["UserMetricsRepository.__init__","ExtractionStage.__init__"],["VicePreferenceRepository.__init__","TouchpointStore.__init__"],["MemoryUpdateStage.__init__","ResponseDelivery.__init__"],["TestMemoryUpdateStage.test_memory_update_no_facts_skips","_mock_session"],["GameStateStage.__init__","Phase3Portal.__init__"],["GeneratedPromptRepository.__init__","DashboardPage.__init__"],["LifeSimulator.generate_next_day_events","LifeSimulator.get_recent_events"],["ConversationRepository.__init__","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GmailHelper.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenEstimator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","JobExecutionRepository.__init__"],["UserNotFoundError.__init__","ElevenLabsConversationsClient.__init__"],["ConversationsE2ETest.get_verification_instructions","step3_extract_all_js"],["PiiSafeFormatter.__init__","TelegramAuth.__init__"],["MemoryUpdateStage.__init__","FakeStage.__init__"],["ConversationsPage.__init__","TokenValidator.__init__"],["ClinginessDetector._frequency_signal","UserMetricsRepository._clamp"],["AuditLog.__init__","ScoreHistoryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ViceAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationsPage.__init__"],["MemoryUpdateStage.__init__","EntityManager.__init__"],["StageError.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MetaInstructionEngine.__init__"],["UserMetricsRepository.__init__","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OnboardingStateRepository.__init__"],["ExtractionStage.__init__","ViceService.__init__"],["_ChapterBehaviorsProxy.__iter__","_load_chapter_behaviors"],["GeneratedPromptRepository.__init__","NarrativeArcManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BaseStage.__init__"],["DailySummaryRepository.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramAuth.__init__"],["ProfileRepository.__init__","DashboardPage.__init__"],["TestPromptStorage.test_prompts_stored_via_repository","_make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenEstimator.__init__"],["NikitaThoughtRepository.__init__","InstructionSelector.__init__"],["AuditLog.__init__","ProfileRepository.__init__"],["ProfileRepository.__init__","SocialCircleRepository.__init__"],["GeneratedPromptRepository.__init__","ConflictStage.__init__"],["PackageStore.cleanup_expired","OnboardingStateRepository.delete"],["DailySummaryRepository.__init__","TTSConfigService.__init__"],["extract_magic_link_from_html","_extract_magic_link"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ElevenLabsConversationsClient.__init__"],["TestUserListEndpointAuditLogging.app","TestTextConversationDetail.mock_admin_auth"],["JobExecutionRepository.__init__","TouchpointScheduler.__init__"],["GeneratedPromptRepository.__init__","InMemoryCache.__init__"],["BackstoryRepository.__init__","SessionDetector.__init__"],["SocialCircleGenerator.__init__","_load_adaptation_rules"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PackageStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestDailySummaryRepositoryContextEngineering.__init__"],["TestProcessingStatsEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["GameStateStage.__init__","MessageHandler.__init__"],["MissingVariableError.__init__","TestDailySummaryRepositoryExtras.__init__"],["UserRepository.__init__","BackstoryRepository.__init__"],["UserRepository.__init__","StrategicSilence.__init__"],["FakeStage.__init__","VoiceCallVerifier.__init__"],["test_critical_stage_failure_fast_abort","StageError.__init__"],["ExtractionStage.__init__","UserNotFoundError.__init__"],["ProfileRepository.__init__","NarrativeArcManager.__init__"],["VoiceOnboardingFlow.handle_onboard_command","is_already_onboarded"],["UserMetricsRepository.__init__","MockReadyPromptRepo.__init__"],["BaseStage.execute","FakeCriticalOkStage._run"],["ServerToolHandler.handle","ServerToolHandler._update_memory"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResolutionManager.__init__"],["FakeStage.__init__","ConflictStore.__init__"],["LifeSimStage.__init__","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationConfigBuilder.__init__"],["JobExecutionRepository.__init__","TokenCounter.__init__"],["UserMetricsRepository.__init__","DashboardE2ETest.__init__"],["MemoryFactRepository.__init__","JourneyReport.__init__"],["MemoryUpdateStage.__init__","ViceAnalyzer.__init__"],["ProfileRepository.__init__","ConflictStage.__init__"],["GeneratedPromptRepository.__init__","ScheduledEventRepository.__init__"],["JobExecutionRepository.__init__","TouchpointStore.__init__"],["RateLimiter.__init__","BaseRepository.get"],["BackstoryRepository.create_from_scenario","OTPTestContext.create"],["UserRepository.__init__","SummaryStage.__init__"],["ProfileRepository.__init__","InMemoryCache.__init__"],["LoginPage.__init__","GmailHelper.__init__"],["AuditLog.__init__","EventGenerator.__init__"],["DailySummaryRepository.__init__","MockStage.__init__"],["UserRepository.__init__","EngagementStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingHandler.__init__"],["MockStage.__init__","TouchpointScheduler.__init__"],["LoginPage.__init__","JobExecutionRepository.__init__"],["_ChapterBehaviorsProxy.keys","keys"],["MetaInstructionEngine.get_instructions_for_context","format_for_prompt"],["ReadyPromptRepository.__init__","SupabaseHelper.__init__"],["ConversationConfigBuilder.build_config","InboundCallHandler._get_first_message"],["ReadyPromptRepository.__init__","LifeSimulator.__init__"],["TestUserScoresEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["GeneratedPromptRepository.__init__","MemoryUpdateStage.__init__"],["UserMetricsRepository.__init__","TouchpointEngine.__init__"],["ProfileRepository.__init__","ScheduledEventRepository.__init__"],["EngagementStateRepository.__init__","OnboardingHandler.__init__"],["main","add_dynamic_variables"],["MockStage.__init__","TouchpointStore.__init__"],["TouchpointStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["StageError.__init__","MetaInstructionEngine.__init__"],["UserNotFoundError.__init__","ScoringService.__init__"],["DailySummaryRepository.__init__","HandoffManager.__init__"],["OnboardingServerToolHandler.complete_onboarding","complete_onboarding"],["TestUserListEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ElevenLabsConversationsClient.__init__"],["BackstoryRepository.__init__","SocialCircleGenerator.__init__"],["StageError.__init__","BaseStage.__init__"],["FakeStage.__init__","ResponseTimer.__init__"],["MemoryUpdateStage.__init__","ConversationConfigBuilder.__init__"],["EmotionalStage.__init__","NikitaThoughtRepository.__init__"],["test_critical_stage_failure_fast_abort","CommandHandler.__init__"],["StageError.__init__","TokenEstimator.__init__"],["EventStore.get_entities","EventStore._row_to_entity"],["UserRepository.__init__","Phase3Portal.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OTPFlowE2ETest.__init__"],["SupabaseMemory.add_fact","SupabaseMemory.find_similar"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PromptBuilderStage.__init__"],["SupabaseMemory.search_memory","ConversationRepository.search"],["DailySummaryRepository.__init__","MetaNikitaConfig.__init__"],["ProfileRepository.__init__","MemoryUpdateStage.__init__"],["CommandHandler._handle_status","CommandHandler._get_chapter_name"],["ConversationRepository.__init__","TouchpointStage.__init__"],["UserMetricsRepository.__init__","MemoryFactRepository.__init__"],["LoginPage.__init__","ResolutionManager.__init__"],["GameStateStage.__init__","ScoreCalculator.__init__"],["GameStateStage.__init__","ConflictStore.__init__"],["EngagementStateRepository.__init__","ElevenLabsConversationsClient.__init__"],["EmotionalStage.__init__","ResponseDelivery.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceScorer.__init__"],["ScoreHistoryRepository.__init__","EvidenceCollector.__init__"],["DailySummaryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["NarrativeArcManager.get_active_arcs","LifeSimulator.get_active_arcs"],["detect_stale_sessions","SessionDetector.detect_and_queue"],["NikitaThoughtRepository.__init__","GmailHelper.__init__"],["ReadyPromptRepository.__init__","Phase4GameState.__init__"],["format_markdown","format_check"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._initiate_call"],["EscalationManager.check_escalation","EscalationManager._get_escalation_threshold"],["WebhookTestData.create","SupabaseHelper.generate_test_telegram_id"],["NikitaThoughtRepository.__init__","JobExecutionRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","JourneyReport.__init__"],["EmotionalStage.__init__","FakeStage.__init__"],["HandoffManager.execute_handoff_with_voice_callback","HandoffManager.initiate_nikita_callback"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TextPatternProcessor.__init__"],["DashboardPage.__init__","ConflictGenerator.__init__"],["ConversationThreadRepository.__init__","ResolutionManager.__init__"],["ConversationRepository.__init__","RecoveryManager.__init__"],["EmotionalStage.__init__","EntityManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RateLimiter.__init__"],["TestUserScoresEndpoint.app","TestUserListEndpoint.mock_get_session"],["NarrativeArcManager.maybe_create_arc","NarrativeArcSystem.create_arc"],["TestConversationPromptsEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["UserRepository.update_score","PackageStore.get"],["TokenCounter.__init__","_get_encoder"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step2_wait_js"],["PiiSafeFormatter.__init__","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","AuditLog.__init__"],["MockStage.__init__","__init__"],["ScoreHistoryRepository.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StageError.__init__"],["UserMetricsRepository.__init__","TranscriptManager.__init__"],["SessionDetector.detect_and_queue","SessionDetector.get_stale_sessions"],["ConversationThreadRepository.__init__","ExperimentLoader.__init__"],["DailySummaryRepository.__init__","GmailMCPClient.__init__"],["MissingVariableError.__init__","EvidenceCollector.__init__"],["test_critical_stage_failure_fast_abort","ViceService.__init__"],["VoiceAgentConfig.get_agent_config","VoiceService._get_first_message"],["UserNotFoundError.__init__","TestUserMetricsRepository.__init__"],["VicePreferenceRepository.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","FactExtractor.__init__"],["ExtractionStage.__init__","OnboardingHandler.__init__"],["DashboardPage.__init__","LifeSimStage.__init__"],["BackstoryGeneratorService.generate_scenarios","ScoreAnalyzer._call_llm"],["EngagementStateMachine._apply_transition","EngagementStateMachine._get_transition_reason"],["GameStateStage.__init__","ResponseTimer.__init__"],["PiiSafeFormatter.__init__","DeliveryResult.__init__"],["ConflictStage.__init__","BreakupManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointStage.__init__"],["ConversationsE2ETest.get_verification_instructions","step2_wait_js"],["LoginPage.__init__","OTPFlowE2ETest.__init__"],["PiiSafeFormatter.__init__","SkipDecision.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InstructionSelector.__init__"],["UserMetricsRepository.__init__","TokenValidator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","_ProfileFromAnswers.__init__"],["ConflictStage.__init__","LengthAdjuster.__init__"],["MissingVariableError.__init__","VoiceAgentConfig.__init__"],["TestAuditLogsEndpoint.app","TestTextStats.mock_admin_auth"],["PiiSafeFormatter.__init__","AuditLog.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DeliveryResult.__init__"],["EmotionalStage.__init__","ViceAnalyzer.__init__"],["ConversationsPage.__init__","VoiceSessionManager.__init__"],["test_critical_stage_failure_fast_abort","UserNotFoundError.__init__"],["BossStateMachine.process_outcome","BossStateMachine.process_pass"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoringService.__init__"],["TestPipelineOrchestratorHappyPath.test_platform_passed_to_context","_make_orchestrator"],["UserRepository.complete_onboarding","PendingRegistrationRepository.get"],["ScoreHistoryRepository.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SkipDecision.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","JourneyReport.__init__"],["SummaryStage.__init__","TestVicePreferenceRepository.__init__"],["ConversationThreadRepository.__init__","OTPFlowE2ETest.__init__"],["ExtractionStage.__init__","ElevenLabsConversationsClient.__init__"],["TestSystemOverviewEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["TestDecayProcessorProcessAll.test_process_all_tracks_game_overs","create_mock_user"],["PromptBuilderStage.__init__","TokenCounter.__init__"],["BaseRepository.update","PendingRegistrationRepository.get"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RecoveryManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","AuditLog.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StateComputer.__init__"],["TouchpointStage.__init__","EvidenceCollector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","CommandHandler.__init__"],["UserRepository.update_onboarding_profile","PendingRegistrationRepository.get"],["NeglectDetector.detect","StateComputer._clamp"],["EngagementStateRepository.__init__","ScoringService.__init__"],["ScoreHistoryRepository.__init__","ExperimentLoader.__init__"],["EscalationManager.check_escalation","_get_time_in_level"],["BackstoryRepository.__init__","EmojiProcessor.__init__"],["MemoryUpdateStage.__init__","TouchpointStage.__init__"],["TestSystemOverviewEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["StageError.__init__","VoiceSessionManager.__init__"],["MissingVariableError.__init__","OnboardingServerToolHandler.__init__"],["NeglectDetector._response_time_signal","UserMetricsRepository._clamp"],["TestBossEncountersEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["ConversationsE2ETest.get_verification_instructions","step1_navigate_command"],["MemoryFactRepository.__init__","ConflictGenerator.__init__"],["TouchpointStage.__init__","VoiceAgentConfig.__init__"],["EmotionalStage.__init__","ConversationConfigBuilder.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VicePreferenceRepository.__init__"],["GeneratedPromptRepository.__init__","TextPatternProcessor.__init__"],["UserNotFoundError.__init__","StrategicSilence.__init__"],["NikitaThoughtRepository.__init__","OTPFlowE2ETest.__init__"],["PromptBuilderStage.__init__","ServerToolHandler.__init__"],["GeneratedPromptRepository.__init__","RateLimiter.__init__"],["TestUserListEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["initiate_call","VoiceService.initiate_call"],["VicePreferenceRepository.__init__","MissingVariableError.__init__"],["SocialCircleRepository.deactivate_friend","get_friend_by_name"],["MissingVariableError.__init__","ExperimentLoader.__init__"],["MemoryUpdateStage.__init__","RecoveryManager.__init__"],["MemoryFactRepository.__init__","ConversationsPage.__init__"],["NeglectDetector.detect","_short_message_signal"],["UserRepository.__init__","NikitaThoughtRepository.__init__"],["SummaryStage.__init__","PackageStore.__init__"],["DailySummaryRepository.__init__","ConflictDetector.__init__"],["MemoryFactRepository.__init__","LifeSimStage.__init__"],["TestEventStore.mock_session_factory","factory"],["ConversationRepository.__init__","PsychologyMapper.__init__"],["NarrativeArcRepository.advance_arc","NarrativeArcRepository.get_arc_by_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestUserMetricsRepository.__init__"],["EngagementStateRepository.__init__","VicePreferenceRepository.__init__"],["TestPromptBuilderStage.test_ac_3_4_3_truncates_over_budget_prompt","_make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ProfileRepository.__init__"],["ConversationsPage.__init__","JourneyReport.__init__"],["PromptBuilderStage.__init__","PendingRegistrationRepository.__init__"],["ProfileRepository.__init__","TextPatternProcessor.__init__"],["ConflictStage.__init__","Phase2Conversation.__init__"],["InstructionSelector.get_instructions_for_situation","InstructionSelector._parse_instruction"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceService.__init__"],["LoginPage.__init__","NarrativeArcSystem.__init__"],["SupabaseMemory.add_relationship_episode","MemoryFactRepository.add_fact"],["_ChapterBehaviorsProxy.get","get"],["MockStage.__init__","EventStore.__init__"],["ProfileRepository.__init__","RateLimiter.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_includes_hours_overdue","create_mock_user"],["UserRepository.__init__","ResponseDelivery.__init__"],["BackstoryRepository.__init__","DashboardPage.__init__"],["TestConversationsE2E.test_empty_conversations","step3_process_data"],["TouchpointStage.__init__","OnboardingServerToolHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationRepository.__init__"],["UserNotFoundError.__init__","ConflictGenerator.__init__"],["ConversationRepository.__init__","UserRepository.__init__"],["BackstoryRepository.__init__","SocialCircleRepository.__init__"],["EngagementStateRepository.__init__","TestUserMetricsRepository.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","WebhookTestData.create"],["AuditLog.__init__","TokenCounter.__init__"],["TestErrorLogEndpoint.app","TestThoughtsList.mock_admin_auth"],["GameStateStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["GeneratedPromptRepository.__init__","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GmailHelper.__init__"],["UserRepository.__init__","FakeStage.__init__"],["ViceAnalyzer._analyze_with_llm","ExtractionStage._get_agent"],["EmotionalStage.__init__","PromptBuilderStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","JobExecutionRepository.__init__"],["TestInboundReadyPrompt.test_exception_returns_none","TestInboundReadyPrompt._make_handler"],["ExtractionStage.__init__","ScoringService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserNotFoundError.__init__"],["UserRepository.__init__","EntityManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LoginPage.__init__"],["TestUserScoresEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["PendingRegistrationRepository.get_email","get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EventGenerator.__init__"],["BackstoryRepository.__init__","NarrativeArcManager.__init__"],["DailySummaryRepository.__init__","DatabaseRateLimiter.__init__"],["create_app","health_deep"],["TouchpointStage.__init__","ExperimentLoader.__init__"],["DailySummaryRepository.__init__","ExtractionStage.__init__"],["RecoveryManager.check_recovery_complete","_check_clingy_recovery"],["BackstoryRepository.__init__","ConflictStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictGenerator.__init__"],["test_critical_stage_failure_fast_abort","OnboardingHandler.__init__"],["TestUserMemoryEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["ProfileRepository.__init__","GeneratedPromptRepository.__init__"],["MessageHandler.handle","store_pending_response"],["BackstoryRepository.__init__","InMemoryCache.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_score_history"],["JobExecutionRepository.__init__","MissingVariableError.__init__"],["DynamicVariablesBuilder._build_context_block","_compute_emotional_context"],["AuditLog.__init__","ServerToolHandler.__init__"],["DailySummaryRepository.__init__","InboundCallHandler.__init__"],["PromptBuilderStage.__init__","TelegramAuth.__init__"],["VicePreferenceRepository.__init__","SessionDetector.__init__"],["FakeStage.__init__","EvidenceCollector.__init__"],["NikitaThoughtRepository.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StrategicSilence.__init__"],["TouchpointStore.create","TouchpointStore._to_pydantic"],["UserRepository.complete_onboarding","InMemoryCache.get"],["FullJourneyOrchestrator.get_cleanup_instructions","FullJourneyOrchestrator.get_cleanup_sql"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LifeSimStage.__init__"],["SummaryStage.__init__","BaseRepository.__init__"],["ExtractionStage.__init__","VicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserRepository.__init__"],["UserRepository.__init__","ViceAnalyzer.__init__"],["BackstoryRepository.__init__","ScheduledEventRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResolutionManager.__init__"],["DashboardPage.__init__","FakeStage.__init__"],["test_critical_stage_failure_fast_abort","ElevenLabsConversationsClient.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step3_extract_all_js"],["TouchpointStage.__init__","PsychologyMapper.__init__"],["NeglectDetector._response_time_signal","StateComputer._clamp"],["AuditLog.__init__","PendingRegistrationRepository.__init__"],["BaseRepository.update","InMemoryCache.get"],["LoginPage.__init__","ConversationRepository.__init__"],["RecoveryManager.apply_recovery","apply_recovery"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceCallScorer.__init__"],["ViceAnalyzer.analyze_exchange","_analyze_with_llm"],["ScoreAnalyzer.analyze","ScoreAnalyzer._call_llm"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SummaryStage.__init__"],["MockStage.__init__","MissingVariableError.__init__"],["EmotionalStage.__init__","TouchpointStage.__init__"],["SummaryStage.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EngagementStateRepository.__init__"],["UserRepository.update_onboarding_profile","InMemoryCache.get"],["FakeStage.__init__","VoiceAgentConfig.__init__"],["EngagementStateRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingStateRepository.__init__"],["ExtractionStage.__init__","TestUserMetricsRepository.__init__"],["BackstoryRepository.__init__","MemoryUpdateStage.__init__"],["DailySummaryRepository.__init__","MockReadyPromptRepo.__init__"],["TestConversationListEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["MemoryUpdateStage.__init__","PsychologyMapper.__init__"],["EmotionalStage.__init__","_ProfileFromAnswers.__init__"],["UserMetricsRepository.__init__","VoiceSessionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TestVicePreferenceRepository.__init__"],["VoiceService._load_context","DynamicVariablesBuilder._compute_nikita_energy"],["BackstoryRepository.__init__","ReadyPromptRepository.__init__"],["ConflictDetector.check_escalation","ConflictDetector._get_trigger_reason"],["BaseRepository.delete_by_id","PackageStore.delete"],["ServerToolHandler._get_context","DynamicVariablesBuilder._compute_nikita_energy"],["TestOTPFlowSteps.test_step5_verification_parsing","TelegramLinkCode.create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConfigLoader.__init__"],["get_session_maker","get_async_engine"],["EngagementStateRepository.__init__","EngagementStateRepository.__init__"],["TestUserMemoryEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestDailySummaryRepositoryContextEngineering.__init__"],["VoiceAgentConfig.get_agent_config","generate_system_prompt"],["TestTimeoutFallback.test_timeout_fallback_includes_cache_friendly","TestTimeoutFallback.timeout_function"],["EvidenceCollector.add_api_response","log"],["EmotionalStage.__init__","RecoveryManager.__init__"],["DailySummaryRepository.__init__","ProfileCollector.__init__"],["UserRepository.__init__","ConversationConfigBuilder.__init__"],["UserRepository.set_boss_fight_status","BaseRepository.get"],["MemoryUpdateStage.__init__","UserRepository.__init__"],["EmotionalStage.__init__","StateComputer.__init__"],["VoiceOnboardingFlow.process_phone_input","is_valid_phone"],["PiiSafeFormatter.__init__","VenueResearchService.__init__"],["VicePreferenceRepository.__init__","SocialCircleGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationsPage.__init__"],["SummaryStage.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OTPFlowE2ETest.__init__"],["ReadyPromptRepository.__init__","MessageSplitter.__init__"],["ScoreAnalyzer._call_llm","ScoreAnalyzer._call_llm_raw"],["FakeStage.__init__","OnboardingServerToolHandler.__init__"],["TestP0CriticalConcurrency.test_cc1_double_click_returns_success_both_times","navigate_and_get_content"],["GameStateStage.__init__","EvidenceCollector.__init__"],["TestP1ErrorHandling.test_ep2_otp_disabled_shows_already_used","TestHelpers.navigate_and_get_content"],["DailySummaryRepository.__init__","TouchpointEngine.__init__"],["DashboardPage.__init__","TelegramLinkRepository.__init__"],["JobExecutionRepository.__init__","SessionDetector.__init__"],["ConversationRepository.__init__","DecayCalculator.__init__"],["TestErrorLogEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["TestHaikuEnrichment.test_fallback_when_enrichment_returns_too_short","_make_context"],["BackstoryRepository.create_from_scenario","PackageStore.get"],["ServerToolHandler._get_context","_compute_nikita_activity"],["AuditLog.__init__","TelegramAuth.__init__"],["NikitaThoughtRepository.__init__","ConversationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingStateRepository.__init__"],["ConversationRepository.__init__","TTSConfigService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingHandler.__init__"],["LoginPage.__init__","VoiceCallScorer.__init__"],["PiiSafeFormatter.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ReadyPromptRepository.__init__","VenueCacheRepository.__init__"],["ConversationThreadRepository.__init__","BreakupManager.__init__"],["TestMemoryUpdateStage.test_memory_update_fact_error_continues","_make_context"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_engagement"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase2Conversation.__init__"],["FakeStage.__init__","ExperimentLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PackageStore.__init__"],["GameStateStage.__init__","VoiceAgentConfig.__init__"],["ScoreHistoryRepository.__init__","OTPVerificationHandler.__init__"],["main","add_section"],["ConversationThreadRepository.__init__","LengthAdjuster.__init__"],["ConflictStage.__init__","StageError.__init__"],["test_critical_stage_failure_fast_abort","ScoringService.__init__"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_elevenlabs"],["MockStage.__init__","SessionDetector.__init__"],["ExtractionStage.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["DailySummaryRepository.__init__","TriggerDetector.__init__"],["ConversationsPage.__init__","ConflictGenerator.__init__"],["MessageGenerator.__init__","_load_template"],["UserMetricsRepository.__init__","JourneyReport.__init__"],["main","EvidenceCollector.generate_report"],["VoiceOnboardingFlow.get_current_step_message","get_phone_request_message"],["UserNotFoundError.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ElevenLabsConversationsClient.__init__"],["TestNikitaThoughtRepository.test_create_thought_valid_types","TestNikitaThoughtRepository.mock_create"],["VicePreferenceRepository.__init__","TelegramWebhookSimulator.__init__"],["ConversationRepository.__init__","MockStage.__init__"],["RateLimiter.__init__","OnboardingStateRepository.get"],["ExtractionStage.__init__","EngagementStateRepository.__init__"],["TouchpointStore.mark_delivered","TouchpointStore._to_pydantic"],["EvidenceCollector.add_verification","log"],["SummaryStage.__init__","ScoreHistoryRepository.__init__"],["TestConversationListEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["TestUserMemoryEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestUserListEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["RateLimiter.get_remaining","_get_day_key"],["ConversationsPage.__init__","ConversationsPage.__init__"],["BackstoryRepository.create_from_scenario","TelegramLinkCode.create"],["BossStateMachine.process_outcome","BossStateMachine.process_fail"],["MissingVariableError.__init__","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DecayCalculator.__init__"],["ScoreAnalyzer.analyze","_neutral_analysis"],["ConversationsPage.__init__","LifeSimStage.__init__"],["PiiSafeFormatter.__init__","StateStore.__init__"],["TestSystemOverviewEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["JobExecutionRepository.__init__","SocialCircleGenerator.__init__"],["GameStateStage.__init__","OnboardingServerToolHandler.__init__"],["BreakupManager.check_and_process","BossStateMachine.check_threshold"],["StageError.__init__","TestVicePreferenceRepository.__init__"],["Phase4GameState.verify_metrics","expected_chapter_for_score"],["DailySummaryRepository.__init__","TranscriptManager.__init__"],["LifeSimStage.__init__","TokenBudgetManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TTSConfigService.__init__"],["PromptBuilderStage.__init__","FactExtractor.__init__"],["ScoreHistoryRepository.__init__","BreakupManager.__init__"],["SummaryStage.__init__","ProfileRepository.__init__"],["ClinginessDetector.detect","NeglectDetector._frequency_signal"],["ConversationRepository.__init__","HandoffManager.__init__"],["test_critical_stage_failure_fast_abort","VicePreferenceRepository.__init__"],["UserNotFoundError.__init__","FakeStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreAnalyzer.__init__"],["NikitaThoughtRepository.__init__","VoiceCallScorer.__init__"],["DashboardPage.__init__","MockMappings.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","StateStore.__init__"],["DashboardPage.__init__","PunctuationProcessor.__init__"],["TestUserListEndpointAuditLogging.app","TestTextConversationList.mock_admin_auth"],["HandoffManager.transition","_send_first_message"],["PromptBuilderStage._enforce_token_budget","PromptBuilderStage._count_tokens"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NarrativeArcSystem.__init__"],["UserNotFoundError.__init__","EntityManager.__init__"],["NeglectDetector.detect","_frequency_signal"],["DashboardPage.__init__","DailySummaryRepository.__init__"],["PiiSafeFormatter.__init__","DecayProcessor.__init__"],["ScoreHistoryRepository.__init__","LengthAdjuster.__init__"],["MemoryFactRepository.__init__","TelegramLinkRepository.__init__"],["ConflictStage.__init__","CommandHandler.__init__"],["GameStateStage.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","MetaNikitaConfig.__init__"],["DashboardPage.__init__","PromptBuilderStage.__init__"],["VicePreferenceRepository.__init__","VenueResearchService.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._update_state"],["PromptBuilderStage.__init__","DeliveryResult.__init__"],["LoginPage.__init__","GameStateStage.__init__"],["StageError.__init__","ConversationsPage.__init__"],["HandoffManager.execute_handoff","generate"],["MockStage.__init__","SocialCircleGenerator.__init__"],["VicePreferenceRepository.__init__","PromptLoader.__init__"],["PromptBuilderStage.__init__","SkipDecision.__init__"],["test_critical_stage_failure_fast_abort","TestUserMetricsRepository.__init__"],["UserRepository.__init__","TouchpointStage.__init__"],["LifeSimStage.__init__","MockResult.__init__"],["MetaInstructionEngine.format_for_prompt","InstructionSet.format_for_prompt"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DecayProcessor.__init__"],["TestAuditLogsEndpoint.app","TestUserListEndpoint.mock_get_session"],["InMemoryCache.incr","InMemoryCache._cleanup_expired"],["ConversationThreadRepository.__init__","Phase2Conversation.__init__"],["MemoryUpdateStage.__init__","DecayCalculator.__init__"],["TouchpointStage.__init__","OTPVerificationHandler.__init__"],["ConversationRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["MissingVariableError.__init__","BreakupManager.__init__"],["PromptBuilderStage.__init__","AuditLog.__init__"],["VicePreferenceRepository.__init__","EmojiProcessor.__init__"],["SummaryStage.__init__","EventGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenCounter.__init__"],["EmotionalStage.__init__","UserRepository.__init__"],["BackstoryRepository.__init__","RateLimiter.__init__"],["JobExecutionRepository.__init__","TelegramWebhookSimulator.__init__"],["MemoryUpdateStage.__init__","TTSConfigService.__init__"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow.is_deferral"],["TestDecayProcessorProcessAll.test_process_all_returns_summary","create_mock_user"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointStore.__init__"],["MissingVariableError.__init__","LengthAdjuster.__init__"],["StageError.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BaseRepository.__init__"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","TestTimeoutFallback.half_second_timeout"],["UserNotFoundError.__init__","ViceAnalyzer.__init__"],["UserRepository.update_game_status","PendingRegistrationRepository.get"],["LifeSimStage.__init__","SupabaseHelper.__init__"],["UserRepository.__init__","RecoveryManager.__init__"],["GameStateStage.__init__","PsychologyMapper.__init__"],["TestTouchpointStage.test_touchpoint_scheduled_true","_make_context"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","HandoffManager.__init__"],["PunctuationProcessor.apply","PunctuationProcessor._add_trailing_dots"],["TestUserDetailEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","create_fake_jwt"],["LifeSimStage.__init__","LifeSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoringService.__init__"],["TestBossEncountersEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["UserNotFoundError.__init__","TelegramLinkRepository.__init__"],["ConversationRepository.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NikitaThoughtRepository.__init__"],["PendingRegistrationRepository.delete","BaseRepository.delete"],["EmojiProcessor.process","_add_emoji"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SupabaseMemory.__init__"],["LifeSimStage.__init__","PreferenceConfigurator.__init__"],["LoginPage.__init__","ScoreAnalyzer.__init__"],["ConflictStage.__init__","ViceService.__init__"],["DailySummaryRepository.__init__","MetaInstructionEngine.__init__"],["MockStage.__init__","TelegramWebhookSimulator.__init__"],["ProfileCollector.collect","collect"],["DailySummaryRepository.__init__","BaseStage.__init__"],["BaseRepository.update","TestNonCriticalFailureE2E.session"],["LifeEvent.model_dump_for_db","ActiveArc.to_dict"],["AuditLog.__init__","FactExtractor.__init__"],["MemoryUpdateStage.__init__","MockStage.__init__"],["ViceScorer.close","TelegramBot.close"],["TestMixedFailureE2E.test_non_critical_fails_then_critical_fails","make_pipeline"],["PiiSafeFormatter.__init__","InstructionSelector.__init__"],["DailySummaryRepository.__init__","TokenEstimator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResponseDelivery.__init__"],["TouchpointStage.__init__","BreakupManager.__init__"],["NikitaThoughtRepository.__init__","GameStateStage.__init__"],["verify_task_secret","_get_task_secret"],["BackstoryRepository.__init__","GeneratedPromptRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationRepository.__init__"],["EngagementStateRepository.__init__","NikitaThoughtRepository.__init__"],["JobExecutionRepository.__init__","VenueResearchService.__init__"],["_generate_summary_with_llm","_build_summary_prompt"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NarrativeArcRepository.__init__"],["UserMetricsRepository.calculate_composite","EngagementStateRepository.get_by_user_id"],["ViceScorer.get_profile","ViceScorer._get_vice_repo"],["VicePreferenceRepository.__init__","DashboardPage.__init__"],["ProfileCollector.get_completeness_percentage","get_profile"],["DashboardPage.__init__","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestVicePreferenceRepositoryExtras.__init__"],["MemoryFactRepository.__init__","MockMappings.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_capped_at_max","create_mock_user"],["MemoryFactRepository.__init__","PunctuationProcessor.__init__"],["JobExecutionRepository.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TelegramLinkRepository.__init__"],["TestPipelineStatusEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["ReadyPromptRepository.__init__","EngagementStateMachine.__init__"],["ScoreCalculator.calculate","UserMetricsRepository.update_metrics"],["VicePreferenceRepository.__init__","SocialCircleRepository.__init__"],["TouchpointStage.__init__","LengthAdjuster.__init__"],["AuditLog.__init__","DeliveryResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","FakeStage.__init__"],["ConflictStage.__init__","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InstructionSelector.__init__"],["test_critical_stage_failure_fast_abort","StrategicSilence.__init__"],["UserNotFoundError.__init__","ConversationConfigBuilder.__init__"],["MemoryFactRepository.__init__","DailySummaryRepository.__init__"],["TouchpointStage.__init__","MetaNikitaConfig.__init__"],["AuditLog.__init__","SkipDecision.__init__"],["UserMetricsRepository.update_metrics","GeneratedPromptRepository.get_by_user_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EntityManager.__init__"],["EngagementStateRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VicePreferenceRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EscalationManager.__init__"],["MemoryUpdateStage.__init__","HandoffManager.__init__"],["BaseRepository.update","OnboardingStateRepository.session"],["JobExecutionRepository.__init__","EmojiProcessor.__init__"],["LifeSimStage.__init__","Phase4GameState.__init__"],["DashboardPage.__init__","StateComputer.__init__"],["VicePreferenceRepository.__init__","NarrativeArcManager.__init__"],["AuditLog.__init__","AuditLog.__init__"],["TouchpointStore.delete","delete"],["ProfileRepository.update_from_onboarding","_ChapterBehaviorsProxy.get"],["EngagementStateRepository.__init__","FakeStage.__init__"],["MemoryUpdateStage.__init__","MetaNikitaConfig.__init__"],["MockStage.__init__","PromptLoader.__init__"],["PromptLoader.replace_match","_get_nested_value"],["VicePreferenceRepository.__init__","MoodCalculator.__init__"],["TestErrorLogEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["EngagementStateRepository.__init__","EntityManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestUserMetricsRepository.__init__"],["TelegramLinkRepository.create_link_code","TelegramLinkRepository.delete_for_user"],["TestSystemOverviewEndpoint.app","TestElevenLabsList.mock_admin_auth"],["NikitaThoughtRepository.__init__","ScoreAnalyzer.__init__"],["TestUserListEndpointAuditLogging.app","TestErrorLogEndpoint.mock_get_session"],["LifeSimStage.__init__","VoiceService.__init__"],["ReadyPromptRepository.__init__","ViceScorer.__init__"],["MockStage.__init__","EmojiProcessor.__init__"],["MessageHandler._needs_onboarding","_redirect_to_onboarding"],["MemoryUpdateStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["UserNotFoundError.__init__","MockMappings.__init__"],["BaseRepository.update","PortalLoginTestContext.create"],["MemoryFactRepository.__init__","ConfigLoader.__init__"],["GeneratedPromptRepository.__init__","BaseRepository.__init__"],["StageError.__init__","BackstoryGeneratorService.__init__"],["VoiceService._load_context","_compute_nikita_energy"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ViceAnalyzer.__init__"],["OnboardingHandler.handle","_handle_location_step"],["ServerToolHandler._get_context","_compute_nikita_energy"],["TouchpointStage.__init__","GmailMCPClient.__init__"],["EscalationManager.get_escalation_timeline","_get_escalation_threshold"],["UserNotFoundError.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","JobExecutionRepository.__init__"],["UserNotFoundError.__init__","PromptBuilderStage.__init__"],["VicePreferenceRepository.__init__","ScheduledEventRepository.__init__"],["FakeStage.__init__","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceCallScorer.__init__"],["UserMetricsRepository.__init__","ConversationsPage.__init__"],["SocialCircle.to_dict","EmotionalImpact.to_dict"],["TestDecayProcessorProcessUser.test_process_user_logs_decay_event","create_mock_user"],["LoginPage.__init__","RegistrationHandler.__init__"],["UserMetricsRepository.__init__","LifeSimStage.__init__"],["ClinginessDetector.detect","UserMetricsRepository._clamp"],["OnboardingStateRepository.delete","PackageStore.delete"],["ConversationRepository.__init__","ConflictDetector.__init__"],["JobExecutionRepository.__init__","DashboardPage.__init__"],["EmotionalStage.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramAuth.__init__"],["EventStore.get_events_for_date","_row_to_event"],["ConflictGenerator.generate","ConflictGenerator._select_conflict_type"],["ExtractionStage.__init__","NikitaThoughtRepository.__init__"],["UserRepository.__init__","PsychologyMapper.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ProfileRepository.__init__"],["TokenEstimator.estimate","TokenEstimator.estimate_accurate"],["JobExecutionRepository.__init__","SocialCircleRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreHistoryRepository.__init__"],["MemoryUpdateStage.__init__","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockMappings.__init__"],["EngagementStateRepository.__init__","ViceAnalyzer.__init__"],["ProfileRepository.__init__","BaseRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PunctuationProcessor.__init__"],["EmotionalStage.__init__","TTSConfigService.__init__"],["TelegramWebhookSimulator.send_command","TelegramWebhookSimulator._build_headers"],["ExperimentLoader.load_experiment_config","ExperimentLoader._load_experiment_with_inheritance"],["DashboardPage.__init__","TouchpointScheduler.__init__"],["ScoreHistoryRepository.__init__","Phase1Registration.__init__"],["TestConversationsE2E.test_verification_instructions","get_verification_instructions"],["VicePreferenceRepository.__init__","MemoryUpdateStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DailySummaryRepository.__init__"],["TestInboundReadyPrompt.test_flag_enabled_loads","TestInboundReadyPrompt._make_handler"],["DashboardE2ETest.get_verification_instructions","step4_db_query"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PromptBuilderStage.__init__"],["VicePreferenceRepository.__init__","ReadyPromptRepository.__init__"],["ExtractionStage.__init__","ResponseDelivery.__init__"],["UserRepository.update_score","get"],["PiiSafeFormatter.__init__","GmailHelper.__init__"],["GeneratedPromptRepository.__init__","NarrativeArcRepository.__init__"],["BaseStage.execute","MemoryUpdateStage._run"],["handle_webhook","_process_webhook_event"],["ConflictDetector.detect_conflict_state","_get_severity"],["UserMetricsRepository.__init__","PackageStore.__init__"],["TestPipelineStatusEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["JobExecutionRepository.__init__","NarrativeArcManager.__init__"],["PiiSafeFormatter.__init__","JobExecutionRepository.__init__"],["LoginPage.__init__","MessageGenerator.__init__"],["UserRepository.__init__","UserRepository.__init__"],["NikitaThoughtRepository.__init__","MockResult.__init__"],["PersonaAdaptationService.format_for_prompt","generate_persona_overrides"],["UserRepository.invalidate_voice_cache","PackageStore.get"],["MockStage.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationConfigBuilder.__init__"],["ExtractionStage.__init__","FakeStage.__init__"],["RecoveryManager.can_recover","RecoveryManager.can_recover"],["MockStage.__init__","SocialCircleRepository.__init__"],["JobExecutionRepository.__init__","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GmailHelper.__init__"],["ClinginessDetector._frequency_signal","_clamp"],["ConversationThreadRepository.__init__","StageError.__init__"],["DailySummaryRepository.__init__","VoiceSessionManager.__init__"],["GeneratedPromptRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResolutionManager.__init__"],["ClinginessDetector.detect","_double_text_signal"],["UserRepository.delete_user_cascade","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StrategicSilence.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EventGenerator.__init__"],["ConversationRepository.__init__","DatabaseRateLimiter.__init__"],["FakeStage.__init__","BreakupManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","JobExecutionRepository.__init__"],["ExtractionStage.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PiiSafeFormatter.__init__"],["ConversationRepository.__init__","ExtractionStage.__init__"],["EmotionalStage.__init__","MockStage.__init__"],["MissingVariableError.__init__","Phase1Registration.__init__"],["DashboardPage.__init__","EmotionalStage.__init__"],["ProfileRepository.__init__","NarrativeArcRepository.__init__"],["ProfileCollector.get_completeness_percentage","ViceScorer.get_profile"],["InMemoryCache.incr","PendingRegistrationRepository.get"],["MockStage.__init__","NarrativeArcManager.__init__"],["EngagementStateRepository.__init__","ConversationConfigBuilder.__init__"],["ConflictStage.__init__","OnboardingHandler.__init__"],["FakeStage.__init__","LengthAdjuster.__init__"],["ConversationsPage.__init__","TelegramLinkRepository.__init__"],["MetaInstructionEngine.get_instructions_for_context","MetaInstructionEngine.format_for_prompt"],["ScoreAnalyzer._call_llm","ScoreAnalyzer._build_analysis_prompt"],["mock_prompt_repo","test_prompt_storage"],["GameStateStage.__init__","OTPVerificationHandler.__init__"],["NikitaThoughtRepository.__init__","RegistrationHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceService.__init__"],["JobExecutionRepository.__init__","ScheduledEventRepository.__init__"],["InstructionSelector.select","_parse_instruction"],["MockStage.__init__","ConflictStage.__init__"],["UserNotFoundError.__init__","_ProfileFromAnswers.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase2Conversation.__init__"],["ProfileRepository.__init__","EscalationManager.__init__"],["MockStage.__init__","MoodCalculator.__init__"],["ConversationRepository.__init__","InboundCallHandler.__init__"],["PromptBuilderStage.__init__","VenueResearchService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GameStateStage.__init__"],["RateLimiter.get_remaining","PackageStore.get"],["analyze_distraction","_clamp"],["ScoreHistoryRepository.__init__","ConversationThreadRepository.__init__"],["EmotionalStage.__init__","HandoffManager.__init__"],["TestLifeSimStage.test_life_sim_generates_events","_make_context"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.resolve_arc"],["StrategicSilence.apply_strategic_silence","_compute_emotional_modifier"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictGenerator.__init__"],["TouchpointStage.__init__","ConflictDetector.__init__"],["EmotionalStage.__init__","SupabaseMemory.__init__"],["UserNotFoundError.__init__","RecoveryManager.__init__"],["ExtractionStage.__init__","ViceAnalyzer.__init__"],["JobExecutionRepository.__init__","MemoryUpdateStage.__init__"],["get_signed_url","initiate_call"],["ConflictStage.__init__","ElevenLabsConversationsClient.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._get_conversation_config_override"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._list_available_experiments"],["UserNotFoundError.__init__","StateComputer.__init__"],["LengthAdjuster.adjust","_truncate"],["MessageHandler.handle","_handle_boss_response"],["RateLimiter.__init__","InMemoryCache.expire"],["VenueCacheRepository.cleanup_expired","TelegramLinkRepository.delete"],["TestOTPFlowSteps.test_step5_verification_parsing","create"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserNotFoundError.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.configure_preferences"],["SummaryStage.__init__","TokenCounter.__init__"],["NikitaThoughtRepository.__init__","MessageGenerator.__init__"],["JobExecutionRepository.__init__","ReadyPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OTPFlowE2ETest.__init__"],["MockStage.__init__","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","_ProfileFromAnswers.__init__"],["TouchpointStage.__init__","Phase1Registration.__init__"],["ConversationThreadRepository.__init__","CommandHandler.__init__"],["DashboardPage.__init__","__init__"],["ReadyPromptRepository.__init__","MessageHandler.__init__"],["ScoreHistoryRepository.__init__","StageError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DatabaseRateLimiter.__init__"],["MemoryFactRepository.__init__","TouchpointScheduler.__init__"],["PromptBuilderStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["GeneratedPromptRepository.__init__","ScoreHistoryRepository.__init__"],["ConversationRepository.__init__","MockReadyPromptRepo.__init__"],["MemoryUpdateStage.__init__","ConflictDetector.__init__"],["TestUserScoresEndpoint.app","TestTextConversationList.mock_admin_auth"],["StageError.__init__","ProfileRepository.__init__"],["EmotionalStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["EngagementStateRepository.__init__","PromptBuilderStage.__init__"],["MissingVariableError.__init__","ConversationThreadRepository.__init__"],["TestTouchpointStage.test_touchpoint_engine_error_graceful","_make_context"],["GameStateStage.__init__","BreakupManager.__init__"],["LoginPage.__init__","PiiSafeFormatter.__init__"],["TestProcessingStatsEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["VoiceService.initiate_call","VoiceAgentConfig._get_first_message"],["ViceService.close","TelegramBot.close"],["DecayProcessor.process_user","DecayProcessor._handle_game_over"],["ScoreHistoryRepository.__init__","DashboardE2ETest.__init__"],["MockStage.__init__","MemoryUpdateStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StateComputer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConfigLoader.__init__"],["SocialCircle.to_dict","PreferenceConfigurator.to_dict"],["GeneratedPromptRepository.__init__","SupabaseHelper.__init__"],["MockStage.__init__","ReadyPromptRepository.__init__"],["GameStateStage.__init__","LengthAdjuster.__init__"],["TestUserMemoryEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["ConversationRepository.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreAnalyzer.__init__"],["MemoryFactRepository.__init__","TouchpointStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InboundCallHandler.__init__"],["GameStateStage.__init__","MetaNikitaConfig.__init__"],["ProfileRepository.__init__","ScoreHistoryRepository.__init__"],["TouchpointStage.__init__","ExtractionStage.__init__"],["SummaryStage.__init__","ServerToolHandler.__init__"],["ExtractionStage.__init__","ConversationConfigBuilder.__init__"],["MissingVariableError.__init__","StageError.__init__"],["ConversationConfigBuilder._generate_system_prompt","InboundCallHandler._generate_fallback_prompt"],["UserRepository.set_boss_fight_status","OnboardingStateRepository.get"],["ConversationsPage.__init__","PunctuationProcessor.__init__"],["ProfileCollector.collect","ProfileCollector._validate_and_process"],["OnboardingServerToolHandler.handle_request","collect_profile"],["NikitaThoughtRepository.__init__","VoiceService.__init__"],["make_context","test_something"],["SituationDetector._detect_situation_type","_is_conflict_active"],["BaseRepository.delete_by_id","BaseRepository.get"],["ConversationsPage.__init__","DailySummaryRepository.__init__"],["ConversationRepository.__init__","TouchpointEngine.__init__"],["test_critical_stage_failure_fast_abort","NikitaThoughtRepository.__init__"],["StageError.__init__","EventGenerator.__init__"],["TestBossEncountersEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["ProfileRepository.__init__","SupabaseHelper.__init__"],["ReadyPromptRepository.__init__","LoginPage.__init__"],["PromptBuilderStage.__init__","StateStore.__init__"],["MemoryUpdateStage.__init__","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointStage.__init__"],["MissingVariableError.__init__","DashboardE2ETest.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","TestHelpers.create_fake_jwt"],["UserRepository.__init__","DecayCalculator.__init__"],["MemoryUpdateStage.__init__","ExtractionStage.__init__"],["TelegramLinkRepository.cleanup_expired","OnboardingStateRepository.delete"],["SummaryStage.__init__","PendingRegistrationRepository.__init__"],["ConversationThreadRepository.__init__","ViceService.__init__"],["TestTypingIndicators.test_ac_fr009_002_periodic_typing_during_delay","TestTypingIndicators.mock_sleep"],["AuditLog.__init__","VenueResearchService.__init__"],["TestUserListEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["ProfileRepository.update_from_onboarding","GeneratedPromptRepository.get_by_user_id"],["ScoreHistoryRepository.__init__","CommandHandler.__init__"],["LoginPage.__init__","UserNotFoundError.__init__"],["TouchpointStage.__init__","ConversationThreadRepository.__init__"],["UserRepository.__init__","TTSConfigService.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","_call_elevenlabs"],["ConversationRepository.recover_stuck","ConversationRepository.detect_stuck"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","_ProfileFromAnswers.__init__"],["test_critical_stage_failure_fast_abort","ResponseDelivery.__init__"],["NarrativeArcManager.create_arc","_generate_initial_state"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockReadyPromptRepo.__init__"],["RecoveryManager.get_estimated_recovery_time","RecoveryManager.calculate_recovery_rate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DeliveryResult.__init__"],["ReadyPromptRepository.__init__","VoiceCallVerifier.__init__"],["ConversationRepository.search","SupabaseMemory.search"],["TouchpointScheduler._evaluate_gap_trigger","TouchpointScheduler._get_initiation_rate"],["EngagementStateRepository.__init__","TouchpointStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SkipDecision.__init__"],["ServerToolHandler._get_context","_try_load_ready_prompt"],["PromptBuilderStage.__init__","DecayProcessor.__init__"],["MemoryUpdateStage.__init__","InboundCallHandler.__init__"],["GameStateStage.__init__","GmailMCPClient.__init__"],["NikitaThoughtRepository.__init__","PiiSafeFormatter.__init__"],["ScoreHistoryRepository.__init__","MemoryFactRepository.__init__"],["ConversationRepository.__init__","TriggerDetector.__init__"],["DynamicVariablesBuilder._build_context_block","DynamicVariablesBuilder._compute_emotional_context"],["test_critical_stage_failure_fast_abort","FakeStage.__init__"],["ConflictStage.__init__","ScoringService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RecoveryManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointScheduler.__init__"],["AuditLog.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestSystemOverviewEndpoint.app","TestConversationListEndpoint.mock_get_session"],["TouchpointStage.__init__","StageError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ProfileCollector.__init__"],["TestUserDetailEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["UserRepository.update_onboarding_status","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StateComputer.__init__"],["MemoryFactRepository.__init__","__init__"],["EngagementStateRepository.__init__","_ProfileFromAnswers.__init__"],["ConversationsPage.__init__","ConfigLoader.__init__"],["test_critical_stage_failure_fast_abort","EntityManager.__init__"],["UserNotFoundError.__init__","EmotionalStage.__init__"],["ExtractionStage.__init__","PromptBuilderStage.__init__"],["ConversationConfigBuilder.build_config","ConversationConfigBuilder._get_first_message"],["_ChapterBehaviorsProxy.__getitem__","_load_chapter_behaviors"],["UserRepository.update_last_interaction","BaseRepository.get"],["PromptBuilderStage._run","_generate_prompt"],["MissingVariableError.__init__","CommandHandler.__init__"],["BaseRepository.delete","PendingRegistrationRepository.delete"],["LoginPage.__init__","UserMetricsRepository.__init__"],["EventGenerator.generate_events_for_day","_convert_to_life_events"],["UserRepository.__init__","MockStage.__init__"],["TouchpointStage.__init__","DashboardE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointEngine.__init__"],["EngagementStateRepository.__init__","RecoveryManager.__init__"],["EngagementStateRepository.__init__","StateComputer.__init__"],["ReadyPromptRepository.__init__","OnboardingStateRepository.__init__"],["MemoryUpdateStage.__init__","MockReadyPromptRepo.__init__"],["MissingVariableError.__init__","MemoryFactRepository.__init__"],["LifeSimStage.__init__","MessageSplitter.__init__"],["ConversationRepository.__init__","TranscriptManager.__init__"],["VoiceOnboardingFlow.process_ready_response","is_deferral"],["VoiceOnboardingFlow.handle_message","process_phone_input"],["DashboardPage.__init__","EventStore.__init__"],["VicePreferenceRepository.__init__","GeneratedPromptRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EmotionalStage.__init__"],["TestPromptBuilderStage.test_prompt_builder_placeholder","_make_context"],["SummaryStage.__init__","TelegramAuth.__init__"],["FakeStage.__init__","Phase1Registration.__init__"],["UserNotFoundError.__init__","UserRepository.__init__"],["TestConversationPromptsEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["StageError.__init__","ConfigLoader.__init__"],["PiiSafeFormatter.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SessionDetector.__init__"],["NikitaThoughtRepository.__init__","UserNotFoundError.__init__"],["ReadyPromptRepository.__init__","ResponseTimer.__init__"],["ConflictStage.__init__","VicePreferenceRepository.__init__"],["UserRepository.__init__","HandoffManager.__init__"],["test_critical_stage_failure_fast_abort","ViceAnalyzer.__init__"],["AuditLog.__init__","StateStore.__init__"],["MemoryUpdateStage.__init__","ProfileCollector.__init__"],["UserMetricsRepository.__init__","TelegramLinkRepository.__init__"],["LifeSimStage.__init__","VenueCacheRepository.__init__"],["UserNotFoundError.__init__","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TriggerDetector.__init__"],["TestUserScoresEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow._update_state"],["LifeSimulator.generate_next_day_events","get_active_arcs"],["TestMemoryUpdateStage.test_classify_graph_type_nikita","_mock_session"],["TouchpointStore.get_recent_touchpoints","get_user_touchpoints"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NarrativeArcSystem.__init__"],["ScoreHistoryRepository.__init__","TokenValidator.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_user_local_time"],["TestNikitaThoughtRepository.test_create_thought_valid_types","TestConversationThreadRepository.mock_create"],["PromptBuilderStage.__init__","InstructionSelector.__init__"],["ProfileRepository.update_from_onboarding","TouchpointStore.get"],["TestMemoryUpdateStage.test_memory_update_stores_facts","_make_context"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageGenerator.__init__"],["ConflictStage.__init__","TestUserMetricsRepository.__init__"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser.extract_pkce_code"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NikitaThoughtRepository.__init__"],["ExtractionStage.__init__","TouchpointStage.__init__"],["create_telegram_router","receive_webhook"],["MemoryUpdateStage.__init__","TouchpointEngine.__init__"],["VenueResearchService.research_venues","VenueResearchService._parse_search_results"],["BaseRepository.get","InMemoryCache.get"],["AuditLog.__init__","DecayProcessor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BasePage.__init__"],["UserRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["NikitaThoughtRepository.__init__","UserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenCounter.__init__"],["BackstoryRepository.__init__","BaseRepository.__init__"],["TouchpointStage.__init__","MemoryFactRepository.__init__"],["ExtractionStage.__init__","_ProfileFromAnswers.__init__"],["TouchpointStore.get_recent_touchpoints","TouchpointStore.get_user_touchpoints"],["TokenValidator.truncate","TokenValidator.count_tokens"],["TestPipelineContext.test_create_voice_platform","_make_ctx"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TouchpointStore.__init__"],["TestUserListEndpoint.app","TestTextConversationList.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ResponseDelivery.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TranscriptManager.__init__"],["deep_merge","deep_merge"],["GameStateStage.__init__","ConflictDetector.__init__"],["test_critical_stage_failure_fast_abort","ConversationConfigBuilder.__init__"],["HistoryLoader.load","HistoryLoader._estimate_tokens"],["MissingVariableError.__init__","TokenValidator.__init__"],["_generate_summary_with_llm","_fallback_summary"],["TouchpointScheduler._evaluate_time_trigger","_get_user_local_time"],["EmotionalStage.__init__","DatabaseRateLimiter.__init__"],["ExtractionStage.__init__","RecoveryManager.__init__"],["FakeStage.__init__","ConversationThreadRepository.__init__"],["DailySummaryRepository.__init__","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","FakeStage.__init__"],["MemoryUpdateStage.__init__","TriggerDetector.__init__"],["ExtractionStage.__init__","StateComputer.__init__"],["GameStateStage.__init__","Phase1Registration.__init__"],["DashboardPage.__init__","SupabaseMemory.__init__"],["JobExecutionRepository.__init__","GeneratedPromptRepository.__init__"],["TestSystemOverviewEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["LifeSimStage.__init__","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EntityManager.__init__"],["ConversationRepository.__init__","MetaInstructionEngine.__init__"],["ConversationRepository.__init__","BaseStage.__init__"],["DashboardPage.__init__","MissingVariableError.__init__"],["OnboardingServerToolHandler.handle_request","VoiceService.end_call"],["BackstoryRepository.__init__","NarrativeArcRepository.__init__"],["VoiceOnboardingFlow.process_ready_response","_get_onboarding_state"],["ConversationRepository.__init__","TokenEstimator.__init__"],["ConversationThreadRepository.__init__","OnboardingHandler.__init__"],["ConflictStore.resolve_conflict","ConflictStore.update_conflict"],["MemoryFactRepository.__init__","EventStore.__init__"],["FakeStage.__init__","StageError.__init__"],["EngagementStateRepository.__init__","EmotionalStage.__init__"],["ConversationsPage.__init__","TouchpointScheduler.__init__"],["EmotionalStage.__init__","InboundCallHandler.__init__"],["DailySummaryRepository.__init__","ConversationsPage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceOnboardingFlow.__init__"],["UserMetricsRepository.__init__","PunctuationProcessor.__init__"],["MessageSplitter._find_split_points","_split_at_markers"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserRepository.__init__"],["test_critical_stage_failure_fast_abort","MockMappings.__init__"],["TestSummaryStage.test_summary_with_conversation_returns_status","_make_context"],["MemoryUpdateStage.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationRepository.__init__"],["UserRepository.increment_boss_attempts","InMemoryCache.get"],["TestDecayProcessorShouldSkipUser.test_process_active_status","create_mock_user"],["MockStage.__init__","GeneratedPromptRepository.__init__"],["MessageHandler._apply_text_patterns","_get_processor_instance"],["GameStateStage.__init__","ExtractionStage.__init__"],["FakeStage.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ServerToolHandler.__init__"],["ConflictStage.__init__","StrategicSilence.__init__"],["AuditLog.__init__","InstructionSelector.__init__"],["test_session_flows_through_handler","mock_get_agent"],["EngagementStateMachine.update","_update_counters"],["LoginPage.__init__","BasePage.__init__"],["TouchpointStage.__init__","TokenValidator.__init__"],["TestFullPipelineE2E.test_full_text_pipeline","make_pipeline"],["test_critical_stage_failure_fast_abort","PromptBuilderStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PiiSafeFormatter.__init__"],["ConversationsPage.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ViceAnalyzer.__init__"],["ProfileCollector.get_profile","get_profile"],["ConversationThreadRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoringService.__init__"],["EngagementStateRepository.__init__","UserRepository.__init__"],["DailySummaryRepository.__init__","PackageStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramWebhookSimulator.__init__"],["EmotionalStage.__init__","MockReadyPromptRepo.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PendingRegistrationRepository.__init__"],["ResolutionManager.__init__","ResolutionManager._get_evaluation_prompt"],["TestUserDetailEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["PromptBuilderStage.__init__","GmailHelper.__init__"],["TestUserListEndpointAuditLogging.app","TestUserScoresEndpoint.mock_admin_auth"],["FullJourneyOrchestrator.get_cleanup_instructions","get_cleanup_sql"],["GameStateStage.__init__","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MetaInstructionEngine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ViceService.__init__"],["PromptBuilderStage.__init__","JobExecutionRepository.__init__"],["generate_response","_generate_response"],["UserNotFoundError.__init__","EventStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BaseStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenEstimator.__init__"],["ScoreHistoryRepository.__init__","OnboardingHandler.__init__"],["UserMetricsRepository.__init__","ConfigLoader.__init__"],["FakeStage.__init__","CommandHandler.__init__"],["StageError.__init__","TokenCounter.__init__"],["EmotionalStage.__init__","ProfileCollector.__init__"],["upgrade","column_exists"],["SummaryStage.__init__","FactExtractor.__init__"],["ConflictStage.__init__","ConflictGenerator.__init__"],["StageError.__init__","TouchpointStore.__init__"],["PiiSafeFormatter.__init__","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","FullJourneyOrchestrator.__init__"],["GameStateStage.__init__","StageError.__init__"],["test_messages_refreshed_after_append","fake_refresh"],["TestOTPFlowSteps.test_step5_verification_parsing","BaseRepository.create"],["TestHaikuEnrichment.test_enrichment_result_used_when_successful","TestHaikuEnrichment.mock_enrich"],["TestAuditLogsEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["LoginPage.__init__","VoiceOnboardingFlow.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserNotFoundError.__init__"],["VoiceService._generate_fallback_prompt","ConversationConfigBuilder._generate_fallback_prompt"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VicePreferenceRepository.__init__"],["EmotionalStage.__init__","TouchpointEngine.__init__"],["TestRateLimiter.test_ac_t024_2_tracks_per_minute_and_per_day_limits","TestRateLimiter.mock_incr"],["FakeStage.__init__","MemoryFactRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EventStore.__init__"],["SummaryStage.__init__","DeliveryResult.__init__"],["MessageSplitter._split_at_markers","MessageSplitter._force_split"],["MemoryFactRepository.__init__","MissingVariableError.__init__"],["BaseRepository.update","ScheduledEventRepository.session"],["UserRepository.__init__","ConflictDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramAuth.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VenueResearchService.__init__"],["LifeSimStage.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceCallScorer.__init__"],["TestServerToolsReadyPrompt.test_converts_str_to_uuid","_make_server_handler"],["GameStateStage.__init__","DashboardE2ETest.__init__"],["UserNotFoundError.__init__","MockStage.__init__"],["SummaryStage.__init__","SkipDecision.__init__"],["NikitaThoughtRepository.__init__","BasePage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PromptLoader.__init__"],["TouchpointStore.delete","OnboardingStateRepository.delete"],["ConversationsPage.__init__","__init__"],["test_critical_stage_failure_fast_abort","TouchpointStage.__init__"],["ScoreHistoryRepository.__init__","ElevenLabsConversationsClient.__init__"],["MissingVariableError.__init__","OnboardingHandler.__init__"],["MemoryUpdateStage.__init__","MetaInstructionEngine.__init__"],["BackstoryRepository.__init__","SupabaseHelper.__init__"],["SummaryStage.__init__","AuditLog.__init__"],["MemoryUpdateStage.__init__","BaseStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestUserMetricsRepository.__init__"],["test_critical_stage_failure_fast_abort","_ProfileFromAnswers.__init__"],["TestNikitaThoughtRepository.test_expire_missing_him_thoughts_marks_used","TestNikitaThoughtRepository.mock_get_active"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase2Conversation.__init__"],["MemoryUpdateStage.__init__","TokenEstimator.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","TestHelpers.navigate_and_get_content"],["LifeSimStage.__init__","PortalLoginE2ETest.__init__"],["TestSystemOverviewEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","UserMetricsRepository.__init__"],["TestP2EdgeCases.test_ec1_empty_email_in_jwt_returns_error","navigate_and_get_content"],["EmotionalStage.__init__","TriggerDetector.__init__"],["ExtractionStage.__init__","UserRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestVoiceConversationList.mock_admin_auth"],["GeneratedPromptRepository.__init__","ServerToolHandler.__init__"],["UserNotFoundError.__init__","HandoffManager.__init__"],["ConversationRepository.__init__","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockMappings.__init__"],["test_critical_stage_failure_fast_abort","RecoveryManager.__init__"],["TestProcessingStatsEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["VoiceService.initiate_call","VoiceService._get_tts_settings"],["TokenEstimator.estimate_accurate","count"],["ConversationThreadRepository.__init__","ScoringService.__init__"],["UserNotFoundError.__init__","SupabaseMemory.__init__"],["AuditLog.__init__","GmailHelper.__init__"],["test_critical_stage_failure_fast_abort","StateComputer.__init__"],["MissingVariableError.__init__","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DailySummaryRepository.__init__"],["AuditLog.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PromptBuilderStage.__init__"],["VoiceOnboardingFlow.handle_onboard_command","get_phone_request_message"],["DailySummaryRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DecayCalculator.__init__"],["LoginPage.__init__","FullJourneyOrchestrator.__init__"],["GeneratedPromptRepository.__init__","PendingRegistrationRepository.__init__"],["DynamicVariablesBuilder.build_from_user","ServerToolHandler._compute_nikita_activity"],["NikitaThoughtRepository.__init__","VoiceOnboardingFlow.__init__"],["DashboardPage.__init__","SocialCircleGenerator.__init__"],["ProfileRepository.__init__","ServerToolHandler.__init__"],["FakeStage.__init__","TokenValidator.__init__"],["LoginPage.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TTSConfigService.__init__"],["EmotionalStage.__init__","TranscriptManager.__init__"],["NarrativeArcManager.maybe_create_arc","create_arc"],["UserNotFoundError.__init__","TestVicePreferenceRepositoryExtras.__init__"],["GameStateStage.__init__","MemoryFactRepository.__init__"],["PiiSafeFormatter.__init__","GameStateStage.__init__"],["BackstoryRepository.__init__","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SupabaseMemory.__init__"],["UserRepository.__init__","InboundCallHandler.__init__"],["TestTouchpointStage.test_touchpoint_scheduled_true","_mock_session"],["VoiceOnboardingFlow.get_current_step_message","VoiceOnboardingFlow.get_ready_confirmation_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StateStore.__init__"],["StateComputer._compute_base_state","_compute_base_state"],["GeneratedPromptRepository.__init__","VenueCacheRepository.__init__"],["EngagementStateRepository.__init__","DecayCalculator.__init__"],["EvidenceCollector.save_report","EvidenceCollector.generate_report"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MissingVariableError.__init__"],["ProfileRepository.__init__","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoreAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SocialCircleRepository.__init__"],["MemoryFactRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GameStateStage.__init__"],["VoiceService.initiate_call","InboundCallHandler._try_load_ready_prompt"],["ConversationThreadRepository.__init__","VicePreferenceRepository.__init__"],["InboundCallHandler._generate_fallback_prompt","ConversationConfigBuilder._get_relationship_score"],["InMemoryCache.get","OnboardingStateRepository.get"],["estimate_tokens_fast","TokenEstimator.estimate_fast"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BackstoryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceSessionManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationsE2ETest.__init__"],["TestRateLimiter.test_daily_limit_exceeded_blocks_message","TestRateLimiter.mock_incr"],["NikitaThoughtRepository.expire_missing_him_thoughts","get_active_thoughts"],["UserMetricsRepository.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockStage.__init__"],["EventDeliveryHandler.deliver","_mark_delivered"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NarrativeArcManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DecayProcessor.__init__"],["StageError.__init__","TelegramAuth.__init__"],["ProfileRepository.__init__","VenueCacheRepository.__init__"],["ClinginessDetector.detect","ClinginessDetector._double_text_signal"],["UserRepository.__init__","MockReadyPromptRepo.__init__"],["ConversationThreadRepository.__init__","TestUserMetricsRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SummaryStage.__init__"],["ScoreHistoryRepository.__init__","JourneyReport.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MoodCalculator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EngagementStateRepository.__init__"],["PiiSafeFormatter.__init__","ScoreAnalyzer.__init__"],["NikitaThoughtRepository.__init__","FullJourneyOrchestrator.__init__"],["CalibrationCalculator.compute","CalibrationCalculator._timing_component"],["TestPipelineResult.test_stages_total_default","_make_ctx"],["EngagementStateRepository.__init__","MockStage.__init__"],["UserMetricsRepository.__init__","TouchpointStore.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","ConversationsE2ETest.step1_navigate_command"],["ConversationsPage.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","_ProfileFromAnswers.__init__"],["TestWebhookPostProcessing.test_webhook_normalizes_agent_role","TestWebhookPostProcessing.capture_add"],["UserRepository.__init__","ProfileCollector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","HandoffManager.__init__"],["NikitaThoughtRepository.__init__","VicePreferenceRepository.__init__"],["GameStateStage.__init__","TokenValidator.__init__"],["ServerToolHandler._get_context","_add_humanization_context"],["TestSystemOverviewEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SupabaseMemory.__init__"],["BreakupManager.trigger_breakup","BreakupManager._get_breakup_message"],["test_critical_stage_failure_fast_abort","EmotionalStage.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._get_default_dynamic_variables"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RecoveryManager.__init__"],["MemoryUpdateStage.__init__","VoiceSessionManager.__init__"],["TestConversationListEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["PiiSafeFormatter.__init__","TokenBudgetManager.__init__"],["EmotionalStage.__init__","MetaInstructionEngine.__init__"],["SocialCircleRepository.create_circle_for_user","get_circle"],["MissingVariableError.__init__","JourneyReport.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","HistoryLoader.__init__"],["MemoryFactRepository.__init__","SocialCircleGenerator.__init__"],["ReadyPromptRepository.__init__","ResolutionManager.__init__"],["ConflictStage.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StateComputer.__init__"],["UserRepository.__init__","TouchpointEngine.__init__"],["BaseRepository.delete_by_id","OnboardingStateRepository.get"],["EmotionalStage.__init__","BaseStage.__init__"],["ConversationConfigBuilder.build_config","VoiceService._get_first_message"],["DynamicVariablesBuilder.build_from_context","_compute_emotional_context"],["EngagementStateRepository.__init__","HandoffManager.__init__"],["LoginPage.build_login_sequence","js_click_submit"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase3Portal.__init__"],["EmotionalStage.__init__","TokenEstimator.__init__"],["ExtractionStage.__init__","DecayCalculator.__init__"],["TestBossEncountersEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BasePage.__init__"],["EngagementStateRepository.__init__","SupabaseMemory.__init__"],["LoginPage.__init__","BackstoryRepository.__init__"],["HandoffManager.execute_handoff_with_voice_callback","_send_first_message"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestVicePreferenceRepositoryExtras.__init__"],["TestNikitaThoughtRepository.test_create_missing_him_thought_24h","TestNikitaThoughtRepository.mock_create_thought"],["ReadyPromptRepository.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MemoryUpdateStage.__init__"],["LoginPage.__init__","ConversationsE2ETest.__init__"],["PromptBuilderStage.__init__","NarrativeArcSystem.__init__"],["ConflictStage.__init__","ResponseDelivery.__init__"],["ExtractionStage.__init__","TTSConfigService.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DeliveryResult.__init__"],["LifeSimStage.__init__","MessageHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ReadyPromptRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","FactExtractor.__init__"],["test_critical_stage_failure_fast_abort","UserRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SkipDecision.__init__"],["ConflictStore.count_consecutive_unresolved_crises","ConflictStore.get_user_conflicts"],["SummaryStage.__init__","TelegramWebhookSimulator.__init__"],["TestAuditLogsEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["PiiSafeFormatter.__init__","MockResult.__init__"],["DailySummaryRepository.__init__","ProfileRepository.__init__"],["EngagementStateMachine.update","_evaluate_transition"],["LoginPage.__init__","SummaryStage.__init__"],["ConflictStage.__init__","FakeStage.__init__"],["run_manual_otp_test","step3_build_otp_search_query"],["UserRepository.__init__","TriggerDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceScorer.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_within_grace_returns_none","create_mock_user"],["LoginPage.__init__","EngagementStateRepository.__init__"],["UserMetricsRepository.__init__","__init__"],["FakeStage.__init__","OnboardingHandler.__init__"],["ConversationThreadRepository.__init__","StrategicSilence.__init__"],["EngagementStateRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["LoginPage.build_login_sequence","LoginPage.js_is_on_login_page"],["ConflictStage.__init__","EntityManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DeliveryResult.__init__"],["UserRepository.is_onboarded","BaseRepository.get"],["NikitaThoughtRepository.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockResult.__init__"],["UserRepository.update_last_interaction","OnboardingStateRepository.get"],["EventStore.save_entities","EventStore.save_entity"],["TouchpointStage.__init__","JourneyReport.__init__"],["InboundCallHandler._get_conversation_config_override","InboundCallHandler._generate_fallback_prompt"],["ConfigLoader.__new__","ConfigLoader.__new__"],["LoginPage.__init__","TelegramBot.__init__"],["ExtractionStage.__init__","MockStage.__init__"],["MemoryFactRepository.__init__","TelegramWebhookSimulator.__init__"],["TestDashboardE2E.test_verification_instructions","DashboardE2ETest.get_verification_instructions"],["ReadyPromptRepository.__init__","OTPFlowE2ETest.__init__"],["RateLimiter.get_remaining","get"],["TestUserMemoryEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["EvidenceCollector.add_api_response","EvidenceCollector.log"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","AuditLog.__init__"],["ConversationsPage.__init__","MissingVariableError.__init__"],["TestUserDetailEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","RegistrationHandler.__init__"],["UserRepository.advance_chapter","UserRepository.get"],["MessageHandler.handle","CommandHandler.handle"],["TestUserListEndpoint.app","TestThoughtsList.mock_admin_auth"],["TestAuditLogsEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceOnboardingFlow.__init__"],["LoginPage.__init__","HistoryLoader.__init__"],["DailySummaryRepository.__init__","EventGenerator.__init__"],["FakeStage.__init__","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","TranscriptManager.__init__"],["TestBossEncountersEndpoint.app","mock_get_session"],["PiiSafeFormatter.__init__","PreferenceConfigurator.__init__"],["SummaryStage.__init__","VenueResearchService.__init__"],["TestConversationThreadRepository.test_get_threads_for_prompt_groups_by_type","mock_get_open_threads"],["LifeSimStage.__init__","LoginPage.__init__"],["LoginPage.__init__","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SessionDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","RegistrationHandler.__init__"],["OnboardingServerToolHandler.configure_preferences","OnboardingServerToolHandler._get_or_create_profile"],["ConversationThreadRepository.__init__","ConflictGenerator.__init__"],["NikitaThoughtRepository.__init__","BackstoryRepository.__init__"],["TestUserScoresEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SocialCircleGenerator.__init__"],["InboundCallHandler._get_conversation_config_override","_try_load_ready_prompt"],["NikitaThoughtRepository.__init__","ConversationsE2ETest.__init__"],["ExtractionStage.__init__","HandoffManager.__init__"],["ConflictStage.__init__","ViceAnalyzer.__init__"],["DashboardPage.__init__","DashboardPage.__init__"],["UserMetricsRepository.calculate_composite","GeneratedPromptRepository.get_by_user_id"],["ExtractionStage.__init__","SupabaseMemory.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator.get_active_arcs"],["PiiSafeFormatter.__init__","MessageGenerator.__init__"],["LifeSimStage.__init__","VoiceCallVerifier.__init__"],["NikitaThoughtRepository.__init__","SummaryStage.__init__"],["AuditLog.__init__","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EmotionalStage.__init__"],["SummaryStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["NikitaThoughtRepository.__init__","EngagementStateRepository.__init__"],["UserRepository.delete_user_cascade","UserRepository.get"],["LifeSimStage.__init__","ConflictStore.__init__"],["VicePreferenceRepository.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","CommandHandler.__init__"],["EntityManager.get_colleagues","get_entities_by_type"],["MemoryFactRepository.__init__","PromptLoader.__init__"],["TestLifeSimStage.test_life_sim_generates_events","_mock_session"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageGenerator.__init__"],["TouchpointScheduler.evaluate_user","_evaluate_gap_trigger"],["ExtractionStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["main","TouchpointScheduler.get_config"],["NikitaThoughtRepository.__init__","TelegramBot.__init__"],["MemoryFactRepository.__init__","EmojiProcessor.__init__"],["DashboardPage.__init__","ConflictStage.__init__"],["StageError.__init__","DeliveryResult.__init__"],["BossStateMachine.trigger_boss","initiate_boss"],["EmotionalStage.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","FullJourneyOrchestrator.__init__"],["UserMetricsRepository.update_metrics","UserMetricsRepository._clamp"],["DashboardPage.__init__","InMemoryCache.__init__"],["StageError.__init__","SkipDecision.__init__"],["GeneratedPromptRepository.__init__","ViceScorer.__init__"],["ConflictStage.__init__","ConversationConfigBuilder.__init__"],["TestInboundReadyPrompt.test_uses_voice_platform","TestInboundReadyPrompt._make_handler"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserRepository.__init__"],["NikitaThoughtRepository.__init__","HistoryLoader.__init__"],["TelegramLinkRepository.verify_code","delete"],["ConversationRepository.__init__","TestVicePreferenceRepository.__init__"],["EvidenceCollector.add_verification","EvidenceCollector.log"],["BaseStage.execute","FakeStage._run"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ScoreCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VicePreferenceRepository.__init__"],["ClinginessDetector.detect","_clamp"],["ScoreHistoryRepository.__init__","ConflictGenerator.__init__"],["TestProcessingStatsEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","VoiceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PiiSafeFormatter.__init__"],["NikitaThoughtRepository.__init__","Phase3Portal.__init__"],["TestTouchpointStage.test_touchpoint_engine_error_graceful","_mock_session"],["ConversationsPage.__init__","SessionDetector.__init__"],["DailySummaryRepository.__init__","ConfigLoader.__init__"],["HistoryLoader.__init__","PromptLoader.load"],["SummaryStage.__init__","StateStore.__init__"],["TestUserScoresEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["UserRepository.__init__","MetaInstructionEngine.__init__"],["LifeSimStage.__init__","ResponseTimer.__init__"],["StateComputer.compute","_apply_relationship_modifier"],["DashboardPage.__init__","ScheduledEventRepository.__init__"],["TestFullPipelineE2E.test_pipeline_with_user_and_conversation_ids","make_pipeline"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","TestSessionPersistence.handle_message"],["UserRepository.__init__","BaseStage.__init__"],["CalibrationCalculator.compute","_content_component"],["UserMetricsRepository.__init__","EventStore.__init__"],["ServerToolHandler._get_context","DynamicVariablesBuilder._compute_nikita_activity"],["GeneratedPromptRepository.__init__","AuditLog.__init__"],["TokenBudgetManager.allocate","HistoryLoader._estimate_tokens"],["ProfileRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceService.__init__"],["UserRepository.__init__","TokenEstimator.__init__"],["UserMetricsRepository.update_metrics","BackstoryRepository.get_by_user_id"],["TokenBudgetManager._truncate_to_budget","_estimate_tokens"],["atomic","wrapper"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceService.__init__"],["VicePreferenceRepository.__init__","SupabaseHelper.__init__"],["ConversationRepository.__init__","ConversationsPage.__init__"],["PromptBuilderStage.__init__","VoiceCallScorer.__init__"],["ScoreHistoryRepository.__init__","LifeSimStage.__init__"],["EmojiProcessor.validate_only","_validate_existing_emojis"],["MockStage.__init__","NarrativeArcRepository.__init__"],["StateStore.get_state","StateStore._row_to_state"],["VicePreferenceRepository.__init__","LifeSimulator.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_location_step"],["FakeStage.__init__","JourneyReport.__init__"],["PunctuationProcessor.apply","_apply_lowercase"],["ConflictStage.__init__","MockMappings.__init__"],["MissingVariableError.__init__","ConflictGenerator.__init__"],["SummaryStage.__init__","DecayProcessor.__init__"],["UserNotFoundError.__init__","ProfileCollector.__init__"],["VicePreferenceRepository.__init__","PreferenceConfigurator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResponseDelivery.__init__"],["MemoryFactRepository.__init__","DashboardPage.__init__"],["JobExecutionRepository.__init__","TokenBudgetManager.__init__"],["AuditLog.__init__","ConversationRepository.__init__"],["TestPipelineOrchestratorCriticalFailure.test_critical_stage_failure_stops_pipeline","_make_orchestrator"],["PiiSafeFormatter.__init__","PiiSafeFormatter.__init__"],["StageError.__init__","SessionDetector.__init__"],["run_migrations_online","run_async_migrations"],["ConfigLoader.__init__","_load_all_configs"],["UserRepository.complete_onboarding","_ChapterBehaviorsProxy.get"],["MemoryFactRepository.__init__","SocialCircleRepository.__init__"],["ProfileRepository.__init__","AuditLog.__init__"],["ConflictStage.__init__","PromptBuilderStage.__init__"],["SummaryStage.__init__","MoodCalculator.__init__"],["TestUserListEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DatabaseRateLimiter.__init__"],["BackstoryRepository.__init__","PendingRegistrationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserNotFoundError.__init__"],["BaseRepository.update","TestFullPipelineE2E.session"],["BackstoryRepository.__init__","MessageSplitter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestVicePreferenceRepository.__init__"],["ConversationRepository.__init__","PackageStore.__init__"],["DashboardE2ETest.get_verification_instructions","step3_extract_all_js"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PiiSafeFormatter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramWebhookSimulator.__init__"],["test_critical_stage_failure_fast_abort","MockStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EntityManager.__init__"],["MemoryFactRepository.__init__","NarrativeArcManager.__init__"],["MissingVariableError.__init__","LifeSimStage.__init__"],["UserRepository.update_onboarding_profile","_ChapterBehaviorsProxy.get"],["_generate_summary_with_llm","_parse_summary_response"],["LoginPage.__init__","ScoreCalculator.__init__"],["LifeSimulator.get_active_arcs","EventStore.get_active_arcs"],["TestLLMAnalysisFunctions.test_ac_2_3_6_results_cached_per_session","mock_llm"],["ConversationsPage.__init__","SocialCircleGenerator.__init__"],["TestPipelineStatusEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["TestErrorLogEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["TestHaikuEnrichment.test_fallback_when_enrichment_returns_too_short","mock_short"],["BackstoryRepository.__init__","VenueCacheRepository.__init__"],["MemoryFactRepository.__init__","ConflictStage.__init__"],["EngagementStateRepository.__init__","DatabaseRateLimiter.__init__"],["PreferenceConfigurator.configure","PreferenceConfigurator.configure"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InboundCallHandler.__init__"],["MemoryFactRepository.__init__","InMemoryCache.__init__"],["VicePreferenceRepository.__init__","Phase4GameState.__init__"],["TelegramAuth.verify_magic_link","verify_otp_code"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GeneratedPromptRepository.__init__"],["TestServerToolsReadyPrompt.test_exception_handled","_make_server_handler"],["TouchpointStage.__init__","ConflictGenerator.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step5_wait_for_dashboard_js"],["test_critical_stage_failure_fast_abort","HandoffManager.__init__"],["TestUserScoresEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestSystemOverviewEndpoint.app","TestPipelineStatus.mock_admin_auth"],["test_critical_stage_failure_fast_abort","SupabaseMemory.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","BackstoryRepository.__init__"],["JobExecutionRepository.__init__","SupabaseHelper.__init__"],["UserMetricsRepository.__init__","MissingVariableError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationsE2ETest.__init__"],["EngagementStateRepository.__init__","InboundCallHandler.__init__"],["TestPipelineContext.test_mutable_defaults_isolation","_make_ctx"],["MemoryFactRepository.__init__","ScheduledEventRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ViceAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VenueResearchService.__init__"],["PromptBuilderStage._generate_prompt","_enrich_with_haiku"],["TestUserListEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","TestVicePreferenceRepository.__init__"],["GameStateStage.__init__","JourneyReport.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserNotFoundError.__init__"],["LoginPage.__init__","ResponseDelivery.__init__"],["SummaryStage.__init__","InstructionSelector.__init__"],["UserMetricsRepository.update_metrics","StateComputer._clamp"],["JobExecutionRepository.__init__","LifeSimulator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PromptLoader.__init__"],["AuditLog.__init__","VoiceCallScorer.__init__"],["PromptBuilderStage.__init__","GameStateStage.__init__"],["ConversationThreadRepository.__init__","NikitaThoughtRepository.__init__"],["TestSystemOverviewEndpoint.app","TestVoiceStats.mock_admin_auth"],["TouchpointStage.__init__","ConversationsPage.__init__"],["TestConversationPromptsEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["JobExecutionRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockReadyPromptRepo.__init__"],["TouchpointStage.__init__","LifeSimStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PackageStore.__init__"],["TouchpointEngine._deliver_single","_evaluate_silence"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SummaryStage.__init__"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_database"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EngagementStateRepository.__init__"],["TestTimeoutFallback.test_timeout_fallback_includes_error_message","TestTimeoutFallback.timeout_function"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DashboardPage.__init__"],["test_critical_stage_failure_fast_abort","TestVicePreferenceRepositoryExtras.__init__"],["PiiSafeFormatter.__init__","UserMetricsRepository.__init__"],["UserNotFoundError.__init__","ConflictStage.__init__"],["ConflictStage.__init__","_ProfileFromAnswers.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EmojiProcessor.__init__"],["ConversationsPage.__init__","TelegramWebhookSimulator.__init__"],["MemoryFactRepository.__init__","MemoryUpdateStage.__init__"],["ConversationThreadRepository.__init__","ResponseDelivery.__init__"],["LoginPage.__init__","EntityManager.__init__"],["OnboardingServerToolHandler.collect_profile","_get_or_create_profile"],["MockStage.__init__","SupabaseHelper.__init__"],["UserNotFoundError.__init__","InMemoryCache.__init__"],["SocialCircleRepository.deactivate_friend","SocialCircleRepository.get_friend_by_name"],["MemoryFactRepository.__init__","ReadyPromptRepository.__init__"],["NikitaThoughtRepository.__init__","ScoreCalculator.__init__"],["MemoryUpdateStage.__init__","ConversationsPage.__init__"],["NikitaThoughtRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OnboardingStateRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ProfileCollector.__init__"],["TestUserListEndpointAuditLogging.app","TestElevenLabsDetail.mock_admin_auth"],["load_message_history","load"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramBot.__init__"],["MockStage.__init__","LifeSimulator.__init__"],["ReadyPromptRepository.__init__","BreakupManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","UserMetricsRepository.__init__"],["TestMemoryUpdateStage.test_memory_update_stores_facts","_mock_session"],["ConversationThreadRepository.__init__","FakeStage.__init__"],["ConflictStage.__init__","RecoveryManager.__init__"],["UserRepository.__init__","VoiceSessionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NarrativeArcManager.__init__"],["EntityManager.get_friends","get_entities_by_type"],["NeglectDetector._abrupt_ending_signal","UserMetricsRepository._clamp"],["ConflictStage.__init__","StateComputer.__init__"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._check_availability"],["DailySummaryRepository.__init__","TokenCounter.__init__"],["SocialCircleGenerator.__init__","SocialCircleGenerator._load_adaptation_rules"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","HistoryLoader.__init__"],["ExtractionStage.__init__","DatabaseRateLimiter.__init__"],["ConversationThreadRepository.__init__","EntityManager.__init__"],["ReadyPromptRepository.__init__","LengthAdjuster.__init__"],["ConversationRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointEngine.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictStage.__init__"],["OnboardingServerToolHandler.collect_profile","_persist_profile_to_db"],["JobExecutionRepository.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["TestPromptBuilderStage.test_ac_3_3_1_renders_jinja2_template","_make_context"],["TestSystemOverviewEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["DailySummaryRepository.__init__","TouchpointStore.__init__"],["EngagementStateRepository.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InMemoryCache.__init__"],["StageError.__init__","TelegramWebhookSimulator.__init__"],["PromptBuilderStage.__init__","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestDailySummaryRepositoryExtras.__init__"],["MemoryUpdateStage.__init__","PackageStore.__init__"],["TestBossEncountersEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockStage.__init__"],["BasePage.navigate_command","url"],["TestErrorLogEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["GeneratedPromptRepository.__init__","LoginPage.__init__"],["NikitaThoughtRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","OnboardingHandler.__init__"],["MetaInstructionEngine.format_for_prompt","PersonaAdaptationService.format_for_prompt"],["TestConversationListEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["ConversationsPage.__init__","PromptLoader.__init__"],["ExtractionStage.__init__","InboundCallHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StateStore.__init__"],["JobExecutionRepository.__init__","VoiceService.__init__"],["UserMetricsRepository.__init__","SessionDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScheduledEventRepository.__init__"],["MockStage.__init__","Phase4GameState.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SocialCircleRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TriggerDetector.__init__"],["TestBossEncountersEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["PromptBuilderStage.__init__","TokenBudgetManager.__init__"],["AuditLog.__init__","GameStateStage.__init__"],["ConversationsPage.__init__","EmojiProcessor.__init__"],["DashboardPage.__init__","TextPatternProcessor.__init__"],["ConversationThreadRepository.__init__","ViceAnalyzer.__init__"],["ProfileRepository.__init__","LoginPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","NarrativeArcSystem.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","HandoffManager.__init__"],["DashboardPage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","StateStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SupabaseMemory.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NarrativeArcManager.__init__"],["ScoreHistoryRepository.__init__","FakeStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ElevenLabsConversationsClient.__init__"],["UserNotFoundError.__init__","MetaInstructionEngine.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DecayProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MemoryUpdateStage.__init__"],["StageError.__init__","VenueResearchService.__init__"],["SummaryStage.__init__","GmailHelper.__init__"],["FakeStage.__init__","ConflictGenerator.__init__"],["ProfileRepository.get_by_user_id","UserRepository.get"],["EngagementStateRepository.__init__","TriggerDetector.__init__"],["UserNotFoundError.__init__","BaseStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BackstoryGeneratorService.__init__"],["StageError.__init__","PromptLoader.__init__"],["TestSummaryStage.test_summary_with_conversation_returns_status","_mock_session"],["SummaryStage.__init__","JobExecutionRepository.__init__"],["UserNotFoundError.__init__","TokenEstimator.__init__"],["PendingRegistrationRepository.get_email","InMemoryCache.get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MoodCalculator.__init__"],["NarrativeArcRepository.create_arc","NarrativeArcRepository._count_active_arcs"],["PromptBuilderStage.__init__","MockResult.__init__"],["LoginPage.__init__","ConversationConfigBuilder.__init__"],["DashboardPage.build_verification_sequence","js_get_all_dashboard_data"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TranscriptManager.__init__"],["DashboardE2ETest.get_verification_instructions","step2_wait_js"],["StageError.__init__","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestVicePreferenceRepositoryExtras.__init__"],["GeneratedPromptRepository.__init__","OnboardingStateRepository.__init__"],["LoginPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["ReadyPromptRepository.__init__","Phase2Conversation.__init__"],["ExtractionStage.__init__","ProfileCollector.__init__"],["EmotionalStage.__init__","TestVicePreferenceRepository.__init__"],["FakeStage.__init__","LifeSimStage.__init__"],["MissingVariableError.__init__","FakeStage.__init__"],["ProfileRepository.update_from_onboarding","BackstoryRepository.get_by_user_id"],["ConversationThreadRepository.__init__","ConversationConfigBuilder.__init__"],["AuditLog.__init__","ScoreAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ScheduledEventRepository.__init__"],["ConflictStage.__init__","EmotionalStage.__init__"],["ConversationsPage.__init__","DashboardPage.__init__"],["UserMetricsRepository.__init__","SocialCircleGenerator.__init__"],["TelegramLinkRepository.delete","delete"],["TouchpointStore.get","_to_pydantic"],["RateLimiter.check","InMemoryCache.expire"],["PromptBuilderStage.__init__","RegistrationHandler.__init__"],["GeneratedPromptRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ConversationsPage.__init__","SocialCircleRepository.__init__"],["TestUserListEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EscalationManager.__init__"],["PiiSafeFormatter.__init__","BasePage.__init__"],["ProfileRepository.__init__","OnboardingStateRepository.__init__"],["UserRepository.update_onboarding_status","PackageStore.get"],["NeglectDetector._abrupt_ending_signal","StateComputer._clamp"],["MemoryUpdateStage.__init__","BackstoryGeneratorService.__init__"],["PromptBuilderStage.__init__","PreferenceConfigurator.__init__"],["ScoreHistoryRepository.__init__","TelegramLinkRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MemoryUpdateStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointStage.__init__"],["AuditLog.__init__","TokenBudgetManager.__init__"],["ConversationsPage.__init__","NarrativeArcManager.__init__"],["ResponseDelivery.queue","ResponseDelivery._send_now"],["BaseRepository.delete_by_id","TelegramLinkRepository.delete"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ReadyPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BasePage.__init__"],["BackstoryRepository.__init__","ViceScorer.__init__"],["BaseStage.execute","EmotionalStage._run"],["HandoffManager.execute_handoff","_extract_meeting_context"],["DailySummaryRepository.__init__","TelegramAuth.__init__"],["GameStateStage.__init__","ConflictGenerator.__init__"],["ConflictStage.__init__","UserRepository.__init__"],["ConversationRepository.__init__","ProfileRepository.__init__"],["NarrativeArcManager.create_arc","NarrativeArcManager._generate_initial_state"],["ProfileRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["ConversationsPage.__init__","ConflictStage.__init__"],["DashboardE2ETest.get_verification_instructions","step1_navigate_command"],["StageError.__init__","StateStore.__init__"],["PromptBuilderStage.__init__","MessageGenerator.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_cleanup_instructions"],["ConversationThreadRepository.__init__","MockMappings.__init__"],["SocialCircle.to_dict","UserNarrativeArc.to_dict"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScoreCalculator.__init__"],["ExtractionStage.__init__","TriggerDetector.__init__"],["StageError.__init__","SocialCircleRepository.__init__"],["ConversationThreadRepository.__init__","DailySummaryRepository.__init__"],["EmotionalStage.__init__","PackageStore.__init__"],["test_critical_stage_failure_fast_abort","DatabaseRateLimiter.__init__"],["VoiceEventScheduler.schedule_voice_call","_create_event"],["ConversationThreadRepository.__init__","PromptBuilderStage.__init__"],["NikitaThoughtRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ScoringService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InstructionSelector.__init__"],["AuditLog.__init__","MockResult.__init__"],["MissingVariableError.__init__","TelegramLinkRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RecoveryManager.__init__"],["UserRepository.is_onboarded","OnboardingStateRepository.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MetaInstructionEngine.__init__"],["UserMetricsRepository.__init__","TelegramWebhookSimulator.__init__"],["GameStateStage.__init__","ConversationsPage.__init__"],["GameStateStage.__init__","LifeSimStage.__init__"],["SituationDetector._detect_situation_type","_is_after_gap"],["BaseStage.execute","ConflictStage._run"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BaseStage.__init__"],["BaseRepository.update","BaseRepository.session"],["TestSystemOverviewEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","VoiceOnboardingFlow.__init__"],["StageError.__init__","DecayProcessor.__init__"],["ConversationsPage.__init__","ScheduledEventRepository.__init__"],["LengthAdjuster.get_target_length","LengthAdjuster._get_config"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenEstimator.__init__"],["UserRepository.apply_decay","update_score"],["LifeSimStage.__init__","OnboardingServerToolHandler.__init__"],["TestEventStore.mock_session_factory","TestEventStore.__aenter__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreHistoryRepository.__init__"],["VicePreferenceRepository.discover","get_by_category"],["ConversationRepository.__init__","EventGenerator.__init__"],["deliver_due_touchpoints","TouchpointEngine.deliver_due_touchpoints"],["VoiceOnboardingFlow._save_deferred_state","_update_state"],["StageError.__init__","MoodCalculator.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector.detect_conflict_state"],["test_critical_stage_failure_fast_abort","InboundCallHandler.__init__"],["ExtractionStage.__init__","TranscriptManager.__init__"],["PiiSafeFormatter.__init__","PipelineOrchestrator.__init__"],["TestUserDetailEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["TestP2Security.test_sec4_xss_in_error_description_escaped","navigate_and_get_content"],["EngagementStateRepository.__init__","MetaInstructionEngine.__init__"],["VoiceOnboardingFlow.handle_message","_get_onboarding_state"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceOnboardingFlow.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResponseDelivery.__init__"],["MemoryFactRepository.__init__","GeneratedPromptRepository.__init__"],["EngagementStateRepository.__init__","BaseStage.__init__"],["PromptBuilderStage.__init__","VoiceService.__init__"],["UserNotFoundError.__init__","TextPatternProcessor.__init__"],["InboundCallHandler.handle_incoming_call","_lookup_user_by_phone"],["AuditLog.__init__","RegistrationHandler.__init__"],["ConversationsPage.__init__","MemoryUpdateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","FullJourneyOrchestrator.__init__"],["EngagementStateRepository.__init__","TokenEstimator.__init__"],["LoginPage.__init__","TouchpointStage.__init__"],["LifeSimStage.__init__","ExperimentLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ProfileRepository.__init__"],["UserNotFoundError.__init__","RateLimiter.__init__"],["ConversationsPage.__init__","ReadyPromptRepository.__init__"],["PiiSafeFormatter.format","format"],["AuditLog.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VicePreferenceRepository.__init__"],["ScoreHistoryRepository.__init__","MockMappings.__init__"],["ScoreHistoryRepository.__init__","PunctuationProcessor.__init__"],["LoginPage.__init__","EvidenceCollector.__init__"],["VicePreferenceRepository.__init__","MessageSplitter.__init__"],["TouchpointStage.__init__","TelegramLinkRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EntityManager.__init__"],["Phase3Portal.extract_magic_link","extract_magic_link"],["UserMetricsRepository.__init__","PromptLoader.__init__"],["ScoreHistoryRepository.__init__","DailySummaryRepository.__init__"],["UserRepository.update_onboarding_profile","TouchpointStore.get"],["TestNonCriticalFailureE2E.test_multiple_non_critical_failures","make_pipeline"],["ScoreHistoryRepository.__init__","PromptBuilderStage.__init__"],["EngagementStateMachine.on_chapter_change","_reset_counters"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TextPatternProcessor.__init__"],["EventStore.get_entities","_row_to_entity"],["AuditLog.__init__","MessageGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestUserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RateLimiter.__init__"],["PromptBuilderStage.__init__","PiiSafeFormatter.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._compute_emotional_context"],["RateLimiter.get_remaining","_get_minute_key"],["VicePreferenceRepository.__init__","VenueCacheRepository.__init__"],["UserMetricsRepository.__init__","EmojiProcessor.__init__"],["ViceService.__aexit__","ViceScorer.close"],["PiiSafeFormatter.__init__","FullJourneyOrchestrator.__init__"],["ConversationThreadRepository.__init__","_ProfileFromAnswers.__init__"],["LoginPage.__init__","VoiceAgentConfig.__init__"],["EntityManager.get_places","EventStore.get_entities_by_type"],["TestTimeoutFallback.test_timeout_decorator_returns_normal_on_success","fast_function"],["_build_system_prompt_legacy","build_system_prompt"],["EngagementStateMachine._apply_transition","EngagementStateMachine._reset_counters"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EventGenerator.__init__"],["TestAuditLogsEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["StageError.__init__","ReadyPromptRepository.__init__"],["MissingVariableError.__init__","MockMappings.__init__"],["StageError.__init__","InstructionSelector.__init__"],["test_critical_stage_failure_fast_abort","ProfileCollector.__init__"],["MissingVariableError.__init__","PunctuationProcessor.__init__"],["TestUserDetailEndpoint.app","mock_get_session"],["TestPipelineStatusEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","ProfileRepository.__init__"],["UserRepository.__init__","TestVicePreferenceRepository.__init__"],["MissingVariableError.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","FullJourneyOrchestrator.__init__"],["MissingVariableError.__init__","PromptBuilderStage.__init__"],["ConversationThreadRepository.__init__","RecoveryManager.__init__"],["EmotionalStage.__init__","BackstoryGeneratorService.__init__"],["ConversationRepository.__init__","ConfigLoader.__init__"],["ConversationThreadRepository.__init__","StateComputer.__init__"],["VoiceService.initiate_call","ServerToolHandler._try_load_ready_prompt"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","navigate_and_get_content"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DatabaseRateLimiter.__init__"],["TestUserScoresEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GmailHelper.__init__"],["TestProcessingStatsEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["NikitaThoughtRepository.__init__","TouchpointStage.__init__"],["ExtractionStage.__init__","MetaInstructionEngine.__init__"],["ReadyPromptRepository.__init__","StageError.__init__"],["TestEmotionalStage.test_emotional_empty_events_as_none","_make_context"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_get_all_conversations_data"],["MockAgentHelper.patch_get_nikita_agent_for_user","MockAgentHelper.create_mock_deps"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","JobExecutionRepository.__init__"],["ViceService.__aexit__","close"],["ExtractionStage.__init__","BaseStage.__init__"],["SupabaseMemory.get_context_for_prompt","SupabaseMemory.search"],["BaseStage.execute","TouchpointStage._run"],["FakeStage.__init__","FakeStage.__init__"],["AuditLog.__init__","VoiceService.__init__"],["HandoffManager.execute_handoff","FirstMessageGenerator.generate"],["ExtractionStage.__init__","TokenEstimator.__init__"],["NikitaThoughtRepository.__init__","EvidenceCollector.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PsychologyMapper.__init__"],["SummaryStage.__init__","NarrativeArcSystem.__init__"],["LengthAdjuster.adjust","LengthAdjuster._truncate"],["UserRepository.__init__","ConversationsPage.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_out_of_zone_recovery"],["JobExecutionRepository.__init__","MessageSplitter.__init__"],["TestConversationListEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["UserMetricsRepository.__init__","DashboardPage.__init__"],["MemoryUpdateStage.__init__","EventGenerator.__init__"],["TestAuditLogsEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","GameStateStage.__init__"],["VicePreferenceRepository.__init__","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InboundCallHandler.__init__"],["TouchpointStage.__init__","MockMappings.__init__"],["UserMetricsRepository.__init__","SocialCircleRepository.__init__"],["TouchpointStage.__init__","PunctuationProcessor.__init__"],["ProfileRepository.create_profile","TelegramLinkCode.create"],["TestBossEncountersEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["test_critical_stage_failure_fast_abort","TriggerDetector.__init__"],["ScoreHistoryRepository.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceSessionManager.__init__"],["SocialCircle.to_dict","to_dict"],["EmotionalStage.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","UserRepository.__init__"],["VoiceOnboardingFlow.initiate_onboarding_call","_update_state"],["TouchpointStage.__init__","DailySummaryRepository.__init__"],["NikitaThoughtRepository.__init__","VoiceAgentConfig.__init__"],["ScoringService.score_batch","ScoringService._log_history"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationConfigBuilder.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._get_time_of_day"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StrategicSilence.__init__"],["TestInboundReadyPrompt.test_exception_returns_none","_make_handler"],["JobExecutionRepository.__init__","VenueCacheRepository.__init__"],["PiiSafeFormatter.__init__","PortalLoginE2ETest.__init__"],["DailySummaryRepository.__init__","DeliveryResult.__init__"],["UserRepository.__init__","PackageStore.__init__"],["TestDashboardE2E.test_verification_with_telegram_id","ConversationsE2ETest.get_verification_instructions"],["UserMetricsRepository.__init__","NarrativeArcManager.__init__"],["BackstoryRepository.__init__","LoginPage.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","TouchpointStore.create"],["main","generate_report"],["AuditLog.__init__","PiiSafeFormatter.__init__"],["ConflictStage.__init__","MockStage.__init__"],["DailySummaryRepository.__init__","SkipDecision.__init__"],["PromptBuilderStage.__init__","UserMetricsRepository.__init__"],["EngagementStateRepository.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestDailySummaryRepositoryExtras.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConfigLoader.__init__"],["MockStage.__init__","MessageSplitter.__init__"],["TokenCounter.truncate_to_budget","TokenValidator.count_tokens"],["TouchpointScheduler.evaluate_user","TouchpointScheduler._can_trigger_after_recent"],["TestSystemOverviewEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["OTPEmailParser.parse_otp_email","OTPEmailParser._extract_body"],["ScoreHistoryRepository.__init__","StateComputer.__init__"],["test_agent_receives_latest_messages","fake_refresh"],["EngagementStateRepository.__init__","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResolutionManager.__init__"],["UserMetricsRepository.__init__","ConflictStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SummaryStage.__init__"],["TestProcessingStatsEndpoint.app","mock_get_session"],["UserMetricsRepository.__init__","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PortalLoginE2ETest.__init__"],["ReadyPromptRepository.__init__","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EngagementStateRepository.__init__"],["CalibrationCalculator.compute","map_score_to_state"],["MissingVariableError.__init__","_ProfileFromAnswers.__init__"],["NikitaThoughtRepository.create_missing_him_thought","create_thought"],["BackstoryRepository.__init__","VoiceCallVerifier.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GeneratedPromptRepository.__init__"],["test_critical_stage_failure_fast_abort","InMemoryCache.__init__"],["test_context","OTPTestContext.create"],["TelegramAuth.verify_magic_link","TelegramAuth.register_user"],["FakeStage.__init__","TelegramLinkRepository.__init__"],["MockStage.__init__","VenueCacheRepository.__init__"],["PiiSafeFormatter.__init__","BackstoryRepository.__init__"],["ConflictStage.__init__","HandoffManager.__init__"],["NikitaThoughtRepository.__init__","OnboardingServerToolHandler.__init__"],["PiiSafeFormatter.__init__","ConversationsE2ETest.__init__"],["LoginPage.__init__","PsychologyMapper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ProfileCollector.__init__"],["HistoryLoader.load","HistoryLoader._truncate_to_budget"],["ConflictStage.__init__","SupabaseMemory.__init__"],["UserMetricsRepository.__init__","ScheduledEventRepository.__init__"],["MissingVariableError.__init__","StateComputer.__init__"],["ConversationThreadRepository.__init__","EmotionalStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","BackstoryRepository.__init__"],["get_nikita_agent_for_user","get_memory_client"],["PiiSafeFormatter.__init__","SummaryStage.__init__"],["EmotionalStage.__init__","ScoreHistoryRepository.__init__"],["GeneratedPromptRepository.__init__","GmailHelper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationsE2ETest.__init__"],["PiiSafeFormatter.__init__","EngagementStateRepository.__init__"],["DailySummaryRepository.__init__","SessionDetector.__init__"],["MemoryUpdateStage.__init__","ConfigLoader.__init__"],["JobExecutionRepository.__init__","PipelineOrchestrator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenBudgetManager.__init__"],["GeneratedPromptRepository.__init__","JobExecutionRepository.__init__"],["TestDecayCalculatorIsOverdue.test_is_overdue_respects_chapter_grace_periods","create_mock_user"],["ServerToolHandler.handle","_get_context"],["BackstoryRepository.__init__","OnboardingStateRepository.__init__"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.get_active_arcs"],["UserMetricsRepository.__init__","MemoryUpdateStage.__init__"],["NarrativeArcManager.maybe_resolve_arcs","get_active_arcs"],["TestPortalLoginFlow.test_magic_link_extraction","BackstoryRepository.create"],["ConflictStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OTPFlowE2ETest.__init__"],["TestP1UserLinking.test_ep5_no_pending_registration_shows_error","navigate_and_get_content"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SummaryStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EngagementStateRepository.__init__"],["UserMetricsRepository.__init__","ReadyPromptRepository.__init__"],["PiiSafeFormatter.__init__","TelegramBot.__init__"],["ScoreHistoryRepository.__init__","TouchpointScheduler.__init__"],["ReadyPromptRepository.__init__","ViceService.__init__"],["EmotionalStage.__init__","ProfileRepository.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.complete_onboarding"],["PendingRegistrationRepository.cleanup_expired","PackageStore.delete"],["BackstoryGeneratorService.generate_scenarios","_parse_scenarios_response"],["PiiSafeFormatter.format","PiiSafeFormatter._redact_pii"],["EvidenceCollector.end_phase","log"],["NarrativeArcRepository._count_active_arcs","NarrativeArcManager.get_active_arcs"],["EventStore.get_events_by_domain","EventStore._row_to_event"],["NarrativeArcRepository._count_active_arcs","get_active_arcs"],["ProfileRepository.__init__","GmailHelper.__init__"],["VicePreferenceRepository.__init__","EngagementStateMachine.__init__"],["ConversationThreadRepository.__init__","UserRepository.__init__"],["ExtractionStage.__init__","TextPatternProcessor.__init__"],["ProfileRepository.__init__","JobExecutionRepository.__init__"],["PiiSafeFormatter.__init__","HistoryLoader.__init__"],["AuditLog.__init__","UserMetricsRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramBot.__init__"],["ExtractionStage.__init__","RateLimiter.__init__"],["ConversationRepository.__init__","TokenCounter.__init__"],["ConversationsPage.__init__","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TriggerDetector.__init__"],["PiiSafeFormatter.__init__","Phase3Portal.__init__"],["GameStateStage.__init__","TelegramLinkRepository.__init__"],["ConversationRepository.__init__","TouchpointStore.__init__"],["ServerToolHandler._get_context","ServerToolHandler._query_graph"],["UserRepository.__init__","BackstoryGeneratorService.__init__"],["OnboardingStateRepository.delete","TelegramLinkRepository.delete"],["test_critical_stage_failure_fast_abort","MetaInstructionEngine.__init__"],["ReadyPromptRepository.__init__","UserNotFoundError.__init__"],["NikitaThoughtRepository.__init__","PsychologyMapper.__init__"],["MetaInstructionEngine.get_instructions_for_context","PersonaAdaptationService.format_for_prompt"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","HistoryLoader.__init__"],["VoiceEventScheduler.schedule_voice_call","VoiceEventScheduler._create_event"],["TelegramLinkRepository.verify_code","PendingRegistrationRepository.delete"],["test_critical_stage_failure_fast_abort","BaseStage.__init__"],["FakeStage.__init__","MockMappings.__init__"],["MissingVariableError.__init__","TouchpointScheduler.__init__"],["FakeStage.__init__","PunctuationProcessor.__init__"],["GeneratedPromptRepository.__init__","ResolutionManager.__init__"],["ScoreHistoryRepository.__init__","EmotionalStage.__init__"],["TokenCounter.fits_budget","TokenValidator.count_tokens"],["create_pending_sql","sql_create_pending"],["EmotionalStage.__init__","EventGenerator.__init__"],["test_critical_stage_failure_fast_abort","TokenEstimator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase3Portal.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointStage.__init__"],["VenueResearchService.research_venues","_create_fallback_result"],["FakeStage.__init__","DailySummaryRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DecayCalculator.__init__"],["FakeStage.__init__","PromptBuilderStage.__init__"],["TestUserListEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RegistrationHandler.__init__"],["VoiceOnboardingFlow.process_ready_response","is_confirmation"],["BaseStage.execute","LifeSimStage._run"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EvidenceCollector.__init__"],["TestConversationPromptsEndpoint.app","mock_get_session"],["VicePreferenceRepository.__init__","ViceScorer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LifeSimulator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TTSConfigService.__init__"],["OnboardingStateRepository.add_answer","PendingRegistrationRepository.get"],["StageError.__init__","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InMemoryCache.__init__"],["TestPromptStorage.test_storage_handles_none_session_gracefully","_make_context"],["TestBossEncountersEndpoint.app","TestElevenLabsList.mock_admin_auth"],["UserNotFoundError.__init__","TestVicePreferenceRepository.__init__"],["ProfileRepository.__init__","ResolutionManager.__init__"],["DashboardPage.__init__","BaseRepository.__init__"],["UserRepository.update_score","InMemoryCache.get"],["PromptBuilderStage.__init__","BasePage.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","_compute_hours_since_contact"],["MissingVariableError.__init__","EmotionalStage.__init__"],["TestResponseTimer.test_ac_4_1_4_calculate_delay_returns_int","mock_production_settings"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RecoveryManager.__init__"],["TestTurnScoring.test_score_turn_respects_chapter_weights","capture_context"],["WebhookTestData.create","generate_test_telegram_id"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceAgentConfig.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenCounter.__init__"],["TestUserMemoryEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["TestExtractionStage.test_extraction_empty_messages_skips","_make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageGenerator.__init__"],["DashboardPage.__init__","BackstoryGeneratorService.__init__"],["LifeSimStage.__init__","BreakupManager.__init__"],["JobExecutionRepository.__init__","EngagementStateMachine.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TouchpointStore.__init__"],["TouchpointStage.__init__","TouchpointScheduler.__init__"],["ScoreHistoryRepository.__init__","__init__"],["TestUserListEndpointAuditLogging.app","TestSystemOverviewEndpoint.mock_get_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NarrativeArcSystem.__init__"],["BaseRepository.get","_ChapterBehaviorsProxy.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockStage.__init__"],["TestBossEncountersEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["GeneratedPromptRepository.__init__","OTPFlowE2ETest.__init__"],["LifeSimStage.__init__","LengthAdjuster.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase4GameState.__init__"],["DailySummaryRepository.__init__","TelegramWebhookSimulator.__init__"],["BaseStage.execute","FakeSlowStage._run"],["GameStateStage.__init__","MockMappings.__init__"],["DashboardPage.__init__","NarrativeArcRepository.__init__"],["GameStateStage.__init__","PunctuationProcessor.__init__"],["ConversationRepository.search","ConversationRepository.search"],["EscalationManager.check_escalation","_check_natural_resolution"],["LoginPage.__init__","DecayCalculator.__init__"],["TouchpointEngine._send_telegram_message","TouchpointEngine._get_chat_id"],["GameStateStage.__init__","DailySummaryRepository.__init__"],["MockStage.__init__","EngagementStateMachine.__init__"],["GameStateStage.__init__","PromptBuilderStage.__init__"],["TestPipelineStatusEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","HandoffManager.__init__"],["ProfileRepository.__init__","OTPFlowE2ETest.__init__"],["PromptBuilderStage.__init__","VoiceOnboardingFlow.__init__"],["MissingVariableError.__init__","__init__"],["run_manual_otp_test","OTPFlowE2ETest.step2_send_email"],["TouchpointStage.__init__","EmotionalStage.__init__"],["LoginPage.__init__","TTSConfigService.__init__"],["detect_stale_sessions","detect_and_queue"],["DashboardPage.__init__","EscalationManager.__init__"],["UserRepository.complete_onboarding","UserRepository.get"],["FakeStage.__init__","_ProfileFromAnswers.__init__"],["MemoryUpdateStage.__init__","TokenCounter.__init__"],["JobExecutionRepository.__init__","ViceScorer.__init__"],["SummaryStage.__init__","GameStateStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceService.__init__"],["TestUIUX.test_error_page_has_telegram_link","navigate_and_get_content"],["BaseRepository.update","UserRepository.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MetaNikitaConfig.__init__"],["LoginPage.__init__","OTPVerificationHandler.__init__"],["MemoryUpdateStage.__init__","TouchpointStore.__init__"],["PromptBuilderStage.__init__","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NikitaThoughtRepository.__init__"],["run_manual_otp_test","create"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MetaInstructionEngine.__init__"],["PackageStore.cleanup_expired","PackageStore.delete"],["ProfileCollector.get_missing_fields","ProfileCollector.get_profile"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BaseStage.__init__"],["UserRepository.update_onboarding_profile","UserRepository.get"],["FakeStage.__init__","StateComputer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenEstimator.__init__"],["ConversationRepository.__init__","TelegramAuth.__init__"],["SocialCircle.to_dict","SocialCircle.to_dict"],["AuditLog.__init__","BasePage.__init__"],["DailySummaryRepository.__init__","VenueResearchService.__init__"],["VoiceOnboardingFlow.handle_message","process_ready_response"],["PiiSafeFormatter.__init__","ScoreCalculator.__init__"],["UserMetricsRepository.update_metrics","_clamp"],["PiiSafeFormatter.__init__","ConflictStore.__init__"],["ReadyPromptRepository.__init__","OnboardingHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestVicePreferenceRepositoryExtras.__init__"],["TestSystemOverviewEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["DailySummaryRepository.__init__","PromptLoader.__init__"],["UserRepository.__init__","ProfileRepository.__init__"],["UserRepository.advance_chapter","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ResponseDelivery.__init__"],["EvidenceCollector.save_report","log"],["test_critical_stage_failure_fast_abort","TextPatternProcessor.__init__"],["ExperimentLoader._load_experiment_with_inheritance","deep_merge"],["UserRepository.increment_boss_attempts","_ChapterBehaviorsProxy.get"],["BaseStage.execute","FakeFailStage._run"],["MockStage.__init__","ViceScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestVicePreferenceRepository.__init__"],["test_critical_stage_failure_fast_abort","RateLimiter.__init__"],["ClinginessDetector.detect","ClinginessDetector._length_ratio_signal"],["SessionDetector.detect_and_queue","SessionDetector.mark_for_processing"],["_ChapterBehaviorsProxy.items","items"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","FakeStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScoreCalculator.__init__"],["ConflictStage.__init__","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictStore.__init__"],["DailySummaryRepository.__init__","EmojiProcessor.__init__"],["StageError.__init__","NarrativeArcSystem.__init__"],["TouchpointStage.__init__","__init__"],["TelegramLinkRepository.delete","OnboardingStateRepository.delete"],["PersonaAdaptationService.format_for_prompt","PersonaAdaptationService.generate_persona_overrides"],["LifeSimStage.__init__","Phase2Conversation.__init__"],["TestProcessingStatsEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["VicePreferenceRepository.__init__","MessageHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EntityManager.__init__"],["TouchpointEngine._evaluate_silence","_load_emotional_state"],["NikitaThoughtRepository.__init__","DecayCalculator.__init__"],["SummaryStage.__init__","ScoreAnalyzer.__init__"],["VoiceOnboardingFlow.can_resume_onboarding","VoiceOnboardingFlow._get_onboarding_state"],["ConversationThreadRepository.__init__","MockStage.__init__"],["PromptBuilderStage.__init__","FullJourneyOrchestrator.__init__"],["TestSessionDetector.test_detect_and_queue_marks_all_found","TestSessionDetector.mock_mark"],["SocialCircle.to_dict","VerificationReport.to_dict"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GmailMCPClient.__init__"],["ReadyPromptRepository.__init__","ElevenLabsConversationsClient.__init__"],["EngagementStateRepository.__init__","TestVicePreferenceRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PsychologyMapper.__init__"],["DashboardPage.__init__","ScoreHistoryRepository.__init__"],["TelegramLinkRepository.verify_code","TouchpointStore.delete"],["EscalationManager.get_escalation_timeline","_get_natural_resolution_probability"],["NikitaThoughtRepository.__init__","TTSConfigService.__init__"],["UserMetricsRepository.calculate_composite","BackstoryRepository.get_by_user_id"],["UserRepository.__init__","EventGenerator.__init__"],["UserRepository.delete_user_cascade","PackageStore.get"],["MemoryFactRepository.__init__","NarrativeArcRepository.__init__"],["TestConversationsE2E.test_data_processing","step3_process_data"],["ConflictStage.__init__","InboundCallHandler.__init__"],["UserMetricsRepository.__init__","GeneratedPromptRepository.__init__"],["TestProcessingStatsEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["HistoryLoader.load","_truncate_to_budget"],["NikitaThoughtRepository.__init__","OTPVerificationHandler.__init__"],["AuditLog.__init__","VoiceOnboardingFlow.__init__"],["LoginPage.__init__","MetaNikitaConfig.__init__"],["EventStore.get_events_for_date","EventStore._row_to_event"],["UserNotFoundError.__init__","BaseRepository.__init__"],["DashboardPage.__init__","SupabaseHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramAuth.__init__"],["SummaryStage.__init__","TokenBudgetManager.__init__"],["SupabaseMemory.get_recent","DailySummaryRepository.get_recent"],["ScoreHistoryRepository.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ResponseDelivery.__init__"],["FakeStage.__init__","TouchpointScheduler.__init__"],["ConversationThreadRepository.__init__","HandoffManager.__init__"],["LengthAdjuster.get_target_length","_get_config"],["AuditLog.__init__","PipelineOrchestrator.__init__"],["ConversationThreadRepository.__init__","SupabaseMemory.__init__"],["SituationDetector._detect_situation_type","SituationDetector._is_conflict_active"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PackageStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ViceAnalyzer.__init__"],["UserNotFoundError.__init__","BackstoryGeneratorService.__init__"],["mock_session_factory","factory"],["DailySummaryRepository.__init__","StateStore.__init__"],["VicePreferenceRepository.__init__","LoginPage.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._compute_nikita_energy"],["DailySummaryRepository.__init__","SocialCircleRepository.__init__"],["TestErrorLogEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BaseRepository.__init__"],["SummaryStage.__init__","MockResult.__init__"],["CalibrationCalculator.compute","_timing_component"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceCallScorer.__init__"],["_ChapterBehaviorsProxy.values","values"],["MissingVariableError.__init__","EventStore.__init__"],["EngagementStateRepository.__init__","PackageStore.__init__"],["ConversationThreadRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["UserNotFoundError.__init__","NarrativeArcRepository.__init__"],["PreferenceConfigurator.get_conversation_style_config","get_conversation_style_config"],["FakeStage.__init__","EmotionalStage.__init__"],["DailySummaryRepository.__init__","NarrativeArcManager.__init__"],["ConflictDetector.can_transition_to","ConflictDetector._can_transition"],["VicePreferenceRepository.__init__","VoiceCallVerifier.__init__"],["JobExecutionRepository.__init__","MessageHandler.__init__"],["DailySummaryRepository.__init__","DecayProcessor.__init__"],["LoginPage.__init__","GmailMCPClient.__init__"],["ConflictStage.__init__","ProfileCollector.__init__"],["MemoryUpdateStage.__init__","TelegramAuth.__init__"],["PromptBuilderStage.__init__","PortalLoginE2ETest.__init__"],["EmotionalStage.__init__","TokenCounter.__init__"],["ConfigLoader._load_all_configs","ConfigLoader._load_yaml"],["UserRepository.update_onboarding_status","get"],["LifeSimStage.__init__","Phase1Registration.__init__"],["ExtractionStage.__init__","TestVicePreferenceRepository.__init__"],["DailySummaryRepository.__init__","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TextPatternProcessor.__init__"],["UserNotFoundError.__init__","EscalationManager.__init__"],["AuditLog.__init__","FullJourneyOrchestrator.__init__"],["GeneratedPromptRepository.__init__","ConversationRepository.__init__"],["InMemoryCache.get","PackageStore.get"],["downgrade","table_exists"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationConfigBuilder.__init__"],["NikitaThoughtRepository.__init__","MetaNikitaConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RateLimiter.__init__"],["DynamicVariablesBuilder.build_from_user","_compute_nikita_activity"],["UserRepository.__init__","ConfigLoader.__init__"],["SummaryStage.__init__","RegistrationHandler.__init__"],["SummaryStage.__init__","LifeSimulator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NarrativeArcRepository.__init__"],["TestBossEncountersEndpoint.app","TestConversationListEndpoint.mock_get_session"],["TouchpointEngine._deliver_single","_should_skip_for_dedup"],["ProfileRepository.create_profile","create"],["ReadyPromptRepository.__init__","ScoringService.__init__"],["GameStateStage.__init__","TouchpointScheduler.__init__"],["SupabaseMemory.add_nikita_event","SupabaseMemory.add_fact"],["ScoreHistoryRepository.__init__","SupabaseMemory.__init__"],["SummaryStage.__init__","PreferenceConfigurator.__init__"],["TouchpointScheduler._evaluate_time_trigger","_should_trigger"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictDetector.__init__"],["MockStage.__init__","MessageHandler.__init__"],["TestEventStore.mock_session_factory","__aexit__"],["ScoreCalculator.calculate","ScoreCalculator._detect_events"],["generate_first_nikita_message","ConflictGenerator.generate"],["TestConversationPromptsEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["RateLimiter.__init__","InMemoryCache.incr"],["TestPortalLoginFlow.test_magic_link_extraction","WebhookTestData.create"],["PromptBuilderStage.__init__","BackstoryRepository.__init__"],["ScoreHistoryRepository.__init__","MissingVariableError.__init__"],["SocialCircleGenerator.generate_social_circle","_copy_character"],["TouchpointStage.__init__","EventStore.__init__"],["PromptBuilderStage.__init__","ConversationsE2ETest.__init__"],["ProfileRepository.__init__","ConversationRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EscalationManager.__init__"],["MemoryFactRepository.__init__","SupabaseHelper.__init__"],["VoiceService.format_text_history_for_voice","VoiceService.get_context_with_text_history"],["FakeStage.__init__","__init__"],["TelegramWebhookSimulator._build_message","_build_user"],["TokenCounter.truncate_to_budget","count_tokens"],["TestInboundReadyPrompt.test_flag_enabled_loads","_make_handler"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","GameStateStage.__init__"],["EmotionalStage.__init__","ServerToolHandler.__init__"],["TestP0CriticalHappyPath.test_ep6_invalid_jwt_format_returns_error","TestHelpers.navigate_and_get_content"],["SummaryStage.__init__","MessageGenerator.__init__"],["JobExecutionRepository.__init__","LoginPage.__init__"],["VicePreferenceRepository.__init__","ResponseTimer.__init__"],["ConflictStage.__init__","TriggerDetector.__init__"],["NeglectDetector._abrupt_ending_signal","_clamp"],["TestConversationListEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["PromptBuilderStage.__init__","SummaryStage.__init__"],["TestConversationPromptsEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["VoiceOnboardingFlow.process_phone_input","_update_state"],["TestUserDetailEndpoint.app","TestThreadsList.mock_admin_auth"],["TestTimeoutFallback.test_timeout_decorator_configurable_seconds","TestTimeoutFallback.five_second_timeout"],["PromptBuilderStage.__init__","EngagementStateRepository.__init__"],["DailySummaryRepository.__init__","MemoryUpdateStage.__init__"],["MissingVariableError.__init__","SupabaseMemory.__init__"],["GameStateStage.__init__","EmotionalStage.__init__"],["ConversationRepository.__init__","DeliveryResult.__init__"],["PiiSafeFormatter.__init__","TestDailySummaryRepositoryExtras.__init__"],["HandoffManager.execute_handoff","HandoffManager._bootstrap_pipeline"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BackstoryGeneratorService.__init__"],["NikitaThoughtRepository.__init__","GmailMCPClient.__init__"],["BackstoryRepository.__init__","ResolutionManager.__init__"],["DailySummaryRepository.__init__","ReadyPromptRepository.__init__"],["TestPromptBuilderStage.test_no_session_skips_storage","_make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GameStateStage.__init__"],["ConversationRepository.__init__","SkipDecision.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","BaseRepository.create"],["TestLLMTimeoutHandling.test_llm_timeout_logs_error","TestLLMTimeoutHandling.slow_llm_call"],["ExtractionStage.__init__","PackageStore.__init__"],["ReadyPromptRepository.__init__","VicePreferenceRepository.__init__"],["JobExecutionRepository.__init__","VoiceCallVerifier.__init__"],["MissingVariableError.__init__","MissingVariableError.__init__"],["LifeSimStage.__init__","ConversationThreadRepository.__init__"],["EngagementStateRepository.__init__","BaseRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DatabaseRateLimiter.__init__"],["UserNotFoundError.__init__","ScoreHistoryRepository.__init__"],["BackstoryRepository.create_from_scenario","InMemoryCache.get"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ExtractionStage.__init__"],["PromptBuilderStage.__init__","TelegramBot.__init__"],["JobExecutionRepository.__init__","ConflictStore.__init__"],["MockStage.__init__","LoginPage.__init__"],["MessageSplitter._split_at_markers","split"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TestDailySummaryRepositoryExtras.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DecayCalculator.__init__"],["GeneratedPromptRepository.__init__","VoiceCallScorer.__init__"],["AuditLog.__init__","PortalLoginE2ETest.__init__"],["EngagementStateRepository.__init__","BackstoryGeneratorService.__init__"],["PromptBuilderStage.__init__","HistoryLoader.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TTSConfigService.__init__"],["ConflictStage.__init__","InMemoryCache.__init__"],["ReadyPromptRepository.__init__","TestUserMetricsRepository.__init__"],["LifeSimStage.__init__","StageError.__init__"],["UserNotFoundError.__init__","ProfileRepository.__init__"],["SummaryStage.__init__","VoiceService.__init__"],["LoginPage.__init__","ConflictDetector.__init__"],["MemoryFactRepository.__init__","Phase4GameState.__init__"],["PromptBuilderStage.__init__","Phase3Portal.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","FactExtractor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","InboundCallHandler.__init__"],["TestUserScoresEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["MockStage.__init__","VoiceCallVerifier.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","OTPVerificationHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreHistoryRepository.__init__"],["PromptLoader.render","_substitute_variables"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EscalationManager.__init__"],["ProfileRepository.update_from_onboarding","BaseRepository.get"],["TestRateLimiter.test_ac_t024_3_get_remaining_returns_quota_info","mock_get"],["FactExtractor.extract_facts","FactExtractor._deduplicate_facts"],["ProfileRepository.__init__","VoiceCallScorer.__init__"],["GameStateStage.__init__","__init__"],["LifeSimStage.__init__","DashboardE2ETest.__init__"],["TestUserDetailEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TestConversationListEndpoint.app","mock_get_session"],["TestUserMemoryEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["AuditLog.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageSplitter.__init__"],["ConversationRepository.__init__","SessionDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DeliveryResult.__init__"],["AuditLog.__init__","ConversationsE2ETest.__init__"],["TouchpointStage.__init__","MissingVariableError.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SupabaseHelper.__init__"],["BackstoryRepository.__init__","OTPFlowE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenBudgetManager.__init__"],["JobExecutionRepository.__init__","ResponseTimer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SkipDecision.__init__"],["HistoryLoader._truncate_to_budget","TokenBudgetManager._estimate_tokens"],["BaseRepository.get","TouchpointStore.get"],["EngagementStateRepository.__init__","EscalationManager.__init__"],["ServerToolHandler._get_context","_query_graph"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointStage.__init__"],["SummaryStage.__init__","PiiSafeFormatter.__init__"],["EmotionalStage.__init__","TelegramAuth.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockReadyPromptRepo.__init__"],["AuditLog.__init__","SummaryStage.__init__"],["ClinginessDetector.detect","ClinginessDetector._response_time_signal"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","AuditLog.__init__"],["AuditLog.__init__","EngagementStateRepository.__init__"],["LoginPage.__init__","DatabaseRateLimiter.__init__"],["MockStage.__init__","OnboardingStateRepository.__init__"],["make_context","make_context"],["RegistrationHandler.handle_email_input","RegistrationHandler.is_valid_email"],["LoginPage.__init__","ExtractionStage.__init__"],["TokenCounter.fits_budget","count_tokens"],["VoiceOnboardingFlow.get_current_step_message","_get_onboarding_state"],["StageError.__init__","GameStateStage.__init__"],["VoiceService.make_outbound_call","VoiceService.make_outbound_call"],["ConversationsPage.__init__","NarrativeArcRepository.__init__"],["OnboardingStateRepository.get_or_create","BaseRepository.get"],["ExtractionStage.__init__","BaseRepository.__init__"],["BaseRepository.update","TestTimeoutE2E.session"],["LifeSimStage.__init__","CommandHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockResult.__init__"],["test_critical_stage_failure_fast_abort","TestVicePreferenceRepository.__init__"],["GeneratedPromptRepository.__init__","Phase2Conversation.__init__"],["MockStage.__init__","ResponseTimer.__init__"],["ConfigLoader.get_boss_threshold","get_chapter"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ProfileCollector.__init__"],["AuditLog.__init__","TelegramBot.__init__"],["UserRepository.__init__","TokenCounter.__init__"],["FakeStage.__init__","EventStore.__init__"],["NikitaThoughtRepository.__init__","ConflictDetector.__init__"],["EscalationManager._check_natural_resolution","EscalationManager._get_time_in_level"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RecoveryManager.__init__"],["BackstoryGeneratorService.process_custom_backstory","BossJudgment._call_llm"],["ConversationThreadRepository.__init__","DatabaseRateLimiter.__init__"],["UserRepository.__init__","TouchpointStore.__init__"],["CalibrationCalculator._content_component","StateComputer._clamp"],["DatabaseRateLimiter.get_remaining","_get_day_window"],["ExtractionStage.__init__","BackstoryGeneratorService.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","ElevenLabsConversationsClient.get_conversation"],["ConflictStage.__init__","MetaInstructionEngine.__init__"],["LoginPage.__init__","InboundCallHandler.__init__"],["MemoryUpdateStage.__init__","DeliveryResult.__init__"],["ReadyPromptRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreHistoryRepository.__init__"],["PiiSafeFormatter.__init__","TouchpointStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MetaNikitaConfig.__init__"],["run_manual_otp_test","BaseRepository.create"],["AuditLog.__init__","HistoryLoader.__init__"],["ConflictStage.__init__","BaseStage.__init__"],["MemoryUpdateStage.__init__","SkipDecision.__init__"],["NikitaThoughtRepository.__init__","Phase1Registration.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointEngine.__init__"],["ConflictStage.__init__","TokenEstimator.__init__"],["AuditLog.__init__","Phase3Portal.__init__"],["PiiSafeFormatter.__init__","EvidenceCollector.__init__"],["ProfileRepository.__init__","Phase2Conversation.__init__"],["ScoreHistoryRepository.__init__","SocialCircleGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","RegistrationHandler.__init__"],["ProfileRepository.get_by_user_id","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LifeSimulator.__init__"],["TestProcessingStatsEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ProfileRepository.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_configurable_max","create_mock_user"],["EngagementStateRepository.__init__","ScoreHistoryRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PreferenceConfigurator.__init__"],["UserRepository.increment_boss_attempts","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EvidenceCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PipelineOrchestrator.__init__"],["UserRepository.invalidate_voice_cache","PendingRegistrationRepository.get"],["test_critical_stage_failure_fast_abort","FakeStage.execute"],["LoginPage.__init__","MockReadyPromptRepo.__init__"],["TouchpointStage.__init__","SessionDetector.__init__"],["TestEmotionalStage.test_emotional_empty_events_as_none","_mock_session"],["PiiSafeFormatter.__init__","VoiceAgentConfig.__init__"],["_ChapterBehaviorsProxy.keys","_load_chapter_behaviors"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler.get_config"],["ExtractionStage.__init__","EscalationManager.__init__"],["LifeSimStage.__init__","ViceService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RegistrationHandler.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TriggerDetector.__init__"],["NikitaThoughtRepository.__init__","ExtractionStage.__init__"],["EscalationManager.check_escalation","EscalationManager._check_natural_resolution"],["ReadyPromptRepository.__init__","ConflictGenerator.__init__"],["UserRepository.update_game_status","UserRepository.get"],["test_critical_stage_failure_fast_abort","PackageStore.__init__"],["estimate_tokens_accurate","estimate_accurate"],["EngagementStateRepository.__init__","ProfileRepository.__init__"],["TestLifeSimStage.test_life_sim_empty_events","_make_context"],["SummaryStage.__init__","UserMetricsRepository.__init__"],["GeneratedPromptRepository.__init__","ScoreAnalyzer.__init__"],["DecayProcessor.process_all","process_user"],["MissingVariableError.__init__","SocialCircleGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GmailMCPClient.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceAgentConfig.__init__"],["ProfileCollector.is_complete","ProfileCollector.get_profile"],["BaseStage.execute","GameStateStage._run"],["StageError.__init__","TokenBudgetManager.__init__"],["MemoryUpdateStage.__init__","SessionDetector.__init__"],["PromptBuilderStage.__init__","ScoreCalculator.__init__"],["PromptBuilderStage.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EventGenerator.__init__"],["ConversationsE2ETest.get_verification_instructions","PortalLoginE2ETest.step1_navigate_command"],["GameStateStage.__init__","EventStore.__init__"],["ViceService.get_prompt_context","get_probe_categories"],["FakeStage.__init__","SupabaseMemory.__init__"],["VoiceService.end_call","VoiceService.end_session"],["NikitaThoughtRepository.__init__","InboundCallHandler.__init__"],["TelegramWebhookSimulator.send_message","TelegramWebhookSimulator._build_update"],["ConversationRepository.__init__","TelegramWebhookSimulator.__init__"],["DynamicVariablesBuilder.build_from_user","_compute_nikita_energy"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase4GameState.__init__"],["LifeSimStage.__init__","TokenValidator.__init__"],["VoiceService.end_call","_load_user"],["NikitaThoughtRepository.__init__","ConversationThreadRepository.__init__"],["ServerToolHandler.handle","ServerToolHandler._score_turn"],["ConflictGenerator.generate","ConflictGenerator._prioritize_triggers"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MessageGenerator.__init__"],["TestSystemOverviewEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["LifeSimulator.get_events_for_context","get_current_mood"],["ProfileRepository.__init__","ScoreAnalyzer.__init__"],["FakeStage.__init__","MissingVariableError.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TranscriptManager.__init__"],["LoginPage.__init__","TouchpointEngine.__init__"],["RateLimiter.get_remaining","RateLimiter._get_day_key"],["TokenValidator.truncate_layers","TokenValidator.count_tokens"],["PiiSafeFormatter.__init__","OnboardingServerToolHandler.__init__"],["ConversationThreadRepository.__init__","ProfileCollector.__init__"],["ConversationsPage.__init__","SupabaseHelper.__init__"],["DashboardPage.__init__","ServerToolHandler.__init__"],["EngagementStateRepository.__init__","EventGenerator.__init__"],["TextPatternProcessor.process","process"],["TestBossEncountersEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["BaseStage.execute","fail"],["StageError.__init__","MockResult.__init__"],["ConversationsPage.__init__","LifeSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestVicePreferenceRepository.__init__"],["BaseRepository.delete","OnboardingStateRepository.delete"],["TestUserDetailEndpoint.app","TestElevenLabsList.mock_admin_auth"],["TestUserListEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["DailySummaryRepository.__init__","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OnboardingServerToolHandler.__init__"],["TestPipelineStatusEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceService.__init__"],["TestErrorLogEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["TouchpointStage.__init__","SocialCircleGenerator.__init__"],["NikitaThoughtRepository.__init__","MockReadyPromptRepo.__init__"],["ExtractionStage.__init__","ScoreHistoryRepository.__init__"],["ConversationConfigBuilder._generate_fallback_prompt","InboundCallHandler._get_relationship_score"],["DashboardPage.__init__","PendingRegistrationRepository.__init__"],["LoginPage.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PsychologyMapper.__init__"],["LoginPage.__init__","TriggerDetector.__init__"],["EmotionalStage.__init__","FactExtractor.__init__"],["ConversationRepository.__init__","VenueResearchService.__init__"],["TestP1ErrorHandling.test_ep3_access_denied_shows_invalid_message","TestHelpers.navigate_and_get_content"],["UserRepository.__init__","TelegramAuth.__init__"],["ConversationRepository.__init__","PromptLoader.__init__"],["TestUserDetailEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["EmojiProcessor._validate_existing_emojis","_count_emojis"],["BossJudgment.judge_boss_outcome","BossJudgment._call_llm"],["StageError.__init__","RegistrationHandler.__init__"],["ServerToolHandler.handle","ServerToolHandler._get_context"],["ExtractionStage.__init__","ProfileRepository.__init__"],["test_critical_stage_failure_fast_abort","BaseRepository.__init__"],["BackstoryRepository.__init__","ConversationRepository.__init__"],["StageError.__init__","LifeSimulator.__init__"],["ConflictStage.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramWebhookSimulator.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step4_db_query"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EngagementStateMachine.__init__"],["DashboardPage.__init__","VenueCacheRepository.__init__"],["TestPromptBuilderStage.test_ac_3_3_4_stores_in_ready_prompts","_make_context"],["StageError.__init__","PreferenceConfigurator.__init__"],["TestConversationPromptsEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["ConflictStage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserRepository.__init__"],["ConversationThreadRepository.__init__","TriggerDetector.__init__"],["EmotionalStage.__init__","DeliveryResult.__init__"],["ConversationRepository.__init__","EmojiProcessor.__init__"],["ConversationsPage.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConfigLoader.__init__"],["EmotionalStage.__init__","SkipDecision.__init__"],["AuditLog.__init__","ScoreCalculator.__init__"],["AuditLog.__init__","ConflictStore.__init__"],["test_critical_stage_failure_fast_abort","BackstoryGeneratorService.__init__"],["NikitaThoughtRepository.__init__","TouchpointEngine.__init__"],["ProfileRepository.create_profile","BaseRepository.create"],["LoginPage.__init__","TranscriptManager.__init__"],["GameStateStage.__init__","MissingVariableError.__init__"],["PiiSafeFormatter.__init__","PsychologyMapper.__init__"],["RecoveryManager.check_recovery_complete","RecoveryManager._check_clingy_recovery"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PortalLoginE2ETest.__init__"],["EmotionalStage.__init__","AuditLog.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictDetector.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","build_cleanup_query"],["StageError.__init__","MessageGenerator.__init__"],["TestPipelineStatusEndpoint.app","mock_get_session"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step1_send_start"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MetaInstructionEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PiiSafeFormatter.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","BaseStage.__init__"],["DecayProcessor.process_user","_log_decay_event"],["ExtractionStage.__init__","EventGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PsychologyMapper.__init__"],["ConversationThreadRepository.__init__","ConflictStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenEstimator.__init__"],["ResponseDelivery.queue","_wait_with_typing"],["TestProcessingStatsEndpoint.app","TestElevenLabsList.mock_admin_auth"],["ConversationThreadRepository.__init__","InMemoryCache.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VenueResearchService.__init__"],["UserRepository.invalidate_voice_cache","InMemoryCache.get"],["StageError.__init__","Phase4GameState.__init__"],["NikitaThoughtRepository.__init__","MemoryFactRepository.__init__"],["NikitaThoughtRepository.__init__","TriggerDetector.__init__"],["MemoryUpdateStage.__init__","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ViceService.__init__"],["TestConversationListEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PromptLoader.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_floor_at_zero","create_mock_user"],["EvidenceCollector.save_report","generate_report"],["run_in_transaction","atomic"],["SummaryStage.__init__","BasePage.__init__"],["CalibrationCalculator.compute","UserMetricsRepository._clamp"],["BackstoryRepository.create_from_scenario","PortalLoginTestContext.create"],["test_critical_stage_failure_fast_abort","EscalationManager.__init__"],["HistoryLoader._truncate_to_budget","_estimate_tokens"],["TestSystemOverviewEndpoint.app","TestTextConversationList.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationsE2ETest.__init__"],["PackageStore.delete","BaseRepository.delete"],["ConversationRepository.__init__","StateStore.__init__"],["LifeSimStage.__init__","OnboardingHandler.__init__"],["ScoreHistoryRepository.__init__","DashboardPage.__init__"],["VicePreferenceRepository.__init__","ResolutionManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DatabaseRateLimiter.__init__"],["UserRepository.update_settings","TouchpointStore.get"],["BackstoryRepository.__init__","VoiceCallScorer.__init__"],["ConversationRepository.__init__","SocialCircleRepository.__init__"],["MemoryFactRepository.__init__","MessageSplitter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ExtractionStage.__init__"],["TestProcessingStatsEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["UserMetricsRepository.__init__","TokenBudgetManager.__init__"],["TestConversationListEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["TestGetCurrentAdminUser.test_similar_domain_raises_403","make_token"],["StageError.__init__","VoiceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserNotFoundError.__init__"],["DailySummaryRepository.__init__","NarrativeArcSystem.__init__"],["InMemoryCache.incr","UserRepository.get"],["VicePreferenceRepository.__init__","ExperimentLoader.__init__"],["NikitaThoughtRepository.__init__","TranscriptManager.__init__"],["ReadyPromptRepository.__init__","NikitaThoughtRepository.__init__"],["run_migration","import_to_supabase"],["GmailHelper.wait_for_magic_link","_get_latest_magic_link_email"],["HandoffManager.transition","_update_user_status"],["ResponseTimer.calculate_delay_human_readable","calculate_delay"],["PunctuationProcessor.apply","PunctuationProcessor._normalize_laugh"],["ConversationRepository.__init__","NarrativeArcManager.__init__"],["GeneratedPromptRepository.__init__","CommandHandler.__init__"],["ConversationRepository.__init__","DecayProcessor.__init__"],["MemoryFactRepository.__init__","VenueCacheRepository.__init__"],["RateLimiter.get_remaining","InMemoryCache.get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","InboundCallHandler.__init__"],["MemoryUpdateStage.__init__","VenueResearchService.__init__"],["FakeStage.__init__","SocialCircleGenerator.__init__"],["UserNotFoundError.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramBot.__init__"],["LifeSimStage.__init__","ElevenLabsConversationsClient.__init__"],["PromptBuilderStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["SupabaseMemory.search","SupabaseMemory._generate_embedding"],["MissingVariableError.__init__","DashboardPage.__init__"],["MemoryUpdateStage.__init__","PromptLoader.__init__"],["ScoreHistoryRepository.__init__","ConflictStage.__init__"],["ConversationRepository.__init__","MoodCalculator.__init__"],["GameStateStage.__init__","SessionDetector.__init__"],["PreferenceConfigurator.get_conversation_style_config","PreferenceConfigurator.get_preferences"],["ReadyPromptRepository.__init__","ResponseDelivery.__init__"],["TestExtractionStage.test_extraction_empty_messages_skips","_mock_session"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BaseRepository.__init__"],["ScoreHistoryRepository.__init__","InMemoryCache.__init__"],["SummaryStage.__init__","VoiceOnboardingFlow.__init__"],["TelegramLinkRepository.cleanup_expired","BaseRepository.delete"],["get_default_entities","load_entity_config"],["PromptBuilderStage._truncate_prompt","PromptBuilderStage._remove_section"],["NikitaThoughtRepository.__init__","TokenValidator.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._generate_message"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","UserMetricsRepository.__init__"],["MemoryUpdateStage.__init__","EmojiProcessor.__init__"],["ReadyPromptRepository.__init__","FakeStage.__init__"],["ProfileRepository.__init__","CommandHandler.__init__"],["UserNotFoundError.__init__","PendingRegistrationRepository.__init__"],["test_critical_stage_failure_fast_abort","ScoreHistoryRepository.__init__"],["ConversationThreadRepository.__init__","MetaInstructionEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StateStore.__init__"],["SummaryStage.__init__","PipelineOrchestrator.__init__"],["UserRepository.advance_chapter","get"],["ConversationThreadRepository.__init__","BaseStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ServerToolHandler.__init__"],["ReadyPromptRepository.__init__","EntityManager.__init__"],["GeneratedPromptRepository.__init__","PiiSafeFormatter.__init__"],["NarrativeArcSystem.update_arc","ActiveArc.should_advance"],["ScoreHistoryRepository.__init__","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DecayCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockReadyPromptRepo.__init__"],["ConversationThreadRepository.__init__","TokenEstimator.__init__"],["UserMetricsRepository.__init__","SupabaseHelper.__init__"],["ScoreAnalyzer.analyze_batch","_build_batch_prompt"],["TestPipelineOrchestratorTiming.test_total_duration_calculated","_make_orchestrator"],["MissingVariableError.__init__","ConflictStage.__init__"],["TestErrorLogEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["PackageStore.exists","PendingRegistrationRepository.get"],["UserRepository.__init__","FactExtractor.__init__"],["PromptBuilderStage._generate_prompt","_count_tokens"],["BaseRepository.get","UserRepository.get"],["UserMetricsRepository.__init__","LifeSimulator.__init__"],["MissingVariableError.__init__","InMemoryCache.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TTSConfigService.__init__"],["JobExecutionRepository.__init__","ResolutionManager.__init__"],["test_critical_stage_failure_fast_abort","ProfileRepository.__init__"],["TestVoiceIntegrationFlow.test_no_meta_prompt_when_ready","_make_server_handler"],["BackstoryRepository.__init__","Phase2Conversation.__init__"],["NeglectDetector._short_message_signal","UserMetricsRepository._clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NarrativeArcRepository.__init__"],["TestP2EdgeCases.test_ec2_malformed_base64_in_jwt_returns_error","TestHelpers.navigate_and_get_content"],["GeneratedPromptRepository.__init__","ViceService.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PendingRegistrationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DecayProcessor.__init__"],["OnboardingStateRepository.update_step","TouchpointStore.get"],["TouchpointStage.__init__","DashboardPage.__init__"],["MockAgentHelper.patch_message_handler","MockAgentHelper.mock_handle"],["ConversationRepository.__init__","MemoryUpdateStage.__init__"],["TestConversationPromptsEndpoint.app","TestElevenLabsList.mock_admin_auth"],["PendingRegistrationRepository.delete","delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenCounter.__init__"],["CalibrationCalculator._timing_component","UserMetricsRepository._clamp"],["ProfileRepository.__init__","PiiSafeFormatter.__init__"],["TouchpointStage.__init__","SocialCircleRepository.__init__"],["JobExecutionRepository.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","ReadyPromptRepository.__init__"],["TestVoicePerformance.test_no_context_engine_when_ready","_make_server_handler"],["UserRepository.__init__","DeliveryResult.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","TestHelpers.navigate_and_get_content"],["LifeEvent.model_dump_for_db","EmotionalImpact.to_dict"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TouchpointStore.__init__"],["TestPromptStorage.test_storage_includes_context_snapshot","_make_context"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceSessionManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EscalationManager.__init__"],["UserRepository.__init__","SkipDecision.__init__"],["MissingVariableError.__init__","ScheduledEventRepository.__init__"],["UserRepository.delete_user_cascade","get"],["GameStateStage.__init__","SocialCircleGenerator.__init__"],["PiiSafeFormatter.__init__","DecayCalculator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MessageHandler.__init__"],["ReadyPromptRepository.__init__","ViceAnalyzer.__init__"],["SummaryStage.__init__","FullJourneyOrchestrator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointEngine.__init__"],["MemoryUpdateStage.__init__","StateStore.__init__"],["EventGenerator.generate_events_for_day","_build_generation_prompt"],["MockStage.__init__","ResolutionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VenueCacheRepository.__init__"],["TouchpointStage.__init__","NarrativeArcManager.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._build_context_block"],["ProfileRepository.__init__","ViceService.__init__"],["InboundCallHandler._get_conversation_config_override","InboundCallHandler._get_first_message"],["GeneratedPromptRepository.__init__","UserNotFoundError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockStage.__init__"],["AuditLog.__init__","TestDailySummaryRepositoryExtras.__init__"],["MemoryUpdateStage.__init__","SocialCircleRepository.__init__"],["PiiSafeFormatter.__init__","TTSConfigService.__init__"],["EngagementStateRepository.__init__","TokenCounter.__init__"],["PendingRegistrationRepository.get_email","_ChapterBehaviorsProxy.get"],["test_critical_stage_failure_fast_abort","EventGenerator.__init__"],["EmotionalStage.__init__","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DecayCalculator.__init__"],["TouchpointStage.__init__","ConflictStage.__init__"],["UserNotFoundError.__init__","TelegramAuth.__init__"],["OTPVerificationHandler.handle","_offer_onboarding_choice"],["EntityManager.get_colleagues","EventStore.get_entities_by_type"],["MockStage.__init__","ExperimentLoader.__init__"],["UserMetricsRepository.__init__","Phase4GameState.__init__"],["ExperimentLoader.load_experiment_config","_load_experiment_with_inheritance"],["PiiSafeFormatter.__init__","OTPVerificationHandler.__init__"],["LifeSimStage.__init__","ScoringService.__init__"],["TouchpointStage.__init__","InMemoryCache.__init__"],["DashboardPage.__init__","FactExtractor.__init__"],["StageError.__init__","UserMetricsRepository.__init__"],["PromptBuilderStage._generate_prompt","PromptBuilderStage._enrich_with_haiku"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TTSConfigService.__init__"],["MemoryUpdateStage.__init__","DecayProcessor.__init__"],["BackstoryGeneratorService.process_custom_backstory","ScoreAnalyzer._call_llm"],["create_app","health"],["ProfileRepository.__init__","UserNotFoundError.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MemoryFactRepository.__init__"],["DashboardPage.__init__","ViceScorer.__init__"],["PromptBuilderStage.__init__","TouchpointStage.__init__"],["TouchpointScheduler.evaluate_event_trigger","_should_trigger"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TriggerDetector.__init__"],["MockAgentHelper.patch_get_nikita_agent_for_user","mock_get_agent"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","HandoffManager.__init__"],["TestBaseRepositorySubclassing.test_subclass_can_access_session","custom_method"],["ProfileRepository.update_from_onboarding","OnboardingStateRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","OTPVerificationHandler.__init__"],["EventStore.save_events","EventStore.save_event"],["MemoryUpdateStage.__init__","MoodCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageSplitter.__init__"],["PromptBuilderStage.__init__","EvidenceCollector.__init__"],["TouchpointStage.__init__","ScheduledEventRepository.__init__"],["UserRepository.__init__","SessionDetector.__init__"],["ReadyPromptRepository.__init__","ConversationConfigBuilder.__init__"],["EngagementStateRepository.__init__","ServerToolHandler.__init__"],["TestUserListEndpointAuditLogging.app","TestConversationPromptsEndpoint.mock_get_session"],["DatabaseRateLimiter.get_remaining","_get_minute_window"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","InstructionSelector.__init__"],["SummaryStage.__init__","EngagementStateMachine.__init__"],["get_async_session","get_session_maker"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreHistoryRepository.__init__"],["MockStage.__init__","OTPFlowE2ETest.__init__"],["EmotionalStage.__init__","VenueResearchService.__init__"],["ClinginessDetector.detect","ClinginessDetector._frequency_signal"],["DashboardPage.__init__","AuditLog.__init__"],["LoginPage.__init__","VoiceSessionManager.__init__"],["VoiceOnboardingFlow.should_start_onboarding","VoiceOnboardingFlow.is_already_onboarded"],["TestPipelineResult.test_failed","_make_ctx"],["EmotionalStage.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VenueCacheRepository.__init__"],["TouchpointStage.__init__","MemoryUpdateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestVicePreferenceRepositoryExtras.__init__"],["PromptBuilderStage.__init__","VoiceAgentConfig.__init__"],["EngagementStateRepository.__init__","PendingRegistrationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceCallVerifier.__init__"],["BaseStage.execute","JourneyContext.fail"],["SummaryStage.__init__","PortalLoginE2ETest.__init__"],["TouchpointStage.__init__","ReadyPromptRepository.__init__"],["BaseRepository.update","PendingRegistrationRepository.session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BasePage.__init__"],["ConversationThreadRepository.__init__","TextPatternProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ProfileRepository.__init__"],["MemoryFactRepository.__init__","EngagementStateMachine.__init__"],["OnboardingStateRepository.get_or_create","OnboardingStateRepository.get"],["ConflictStage.__init__","TestVicePreferenceRepository.__init__"],["ConversationThreadRepository.__init__","RateLimiter.__init__"],["ExtractionStage.__init__","TokenCounter.__init__"],["EmotionalStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["PiiSafeFormatter.__init__","MetaNikitaConfig.__init__"],["TestProcessingStatsEndpoint.app","TestConversationListEndpoint.mock_get_session"],["ReadyPromptRepository.__init__","MockMappings.__init__"],["VoiceService.initiate_call","InboundCallHandler._generate_signed_token"],["LifeSimStage.__init__","TestUserMetricsRepository.__init__"],["TestPipelineStatusEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["MemoryUpdateStage.__init__","ReadyPromptRepository.__init__"],["MemoryUpdateStage.__init__","InstructionSelector.__init__"],["ReadyPromptRepository.__init__","PromptBuilderStage.__init__"],["CalibrationCalculator._timing_component","StateComputer._clamp"],["TestUserMemoryEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["ResponseDelivery._send_now","_split_message"],["FakeStage.__init__","DashboardPage.__init__"],["VoiceService.initiate_call","_generate_signed_token"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MetaNikitaConfig.__init__"],["SummaryStage.__init__","BackstoryRepository.__init__"],["ConversationsPage.__init__","MessageSplitter.__init__"],["NarrativeArcManager.maybe_create_arc","EventStore.get_active_arcs"],["SummaryStage.__init__","ConversationsE2ETest.__init__"],["PromptBuilderStage.__init__","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramAuth.__init__"],["SupabaseMemory.add_user_fact","SupabaseMemory.add_fact"],["TestPipelineStatusEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["BaseRepository.delete_by_id","PendingRegistrationRepository.delete"],["LifeEvent.model_dump_for_db","PreferenceConfigurator.to_dict"],["AuditLog.__init__","TouchpointStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EventGenerator.__init__"],["EscalationManager.get_escalation_timeline","EscalationManager._get_escalation_threshold"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PipelineOrchestrator.__init__"],["MemoryFactRepository.__init__","ViceScorer.__init__"],["UserMetricsRepository.calculate_composite","UserMetricsRepository.get_by_user_id"],["ExtractionStage.__init__","ServerToolHandler.__init__"],["AuditLog.__init__","EvidenceCollector.__init__"],["SummaryStage.__init__","SummaryStage.__init__"],["get_package_store","get_package_store"],["TestNikitaCallbackRetry.test_initiate_nikita_callback_includes_first_message_override","TestNikitaCallbackRetry.capture_call"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ResponseTimer.__init__"],["NikitaThoughtRepository.__init__","VoiceSessionManager.__init__"],["ConversationsPage.__init__","VenueCacheRepository.__init__"],["PreferenceConfigurator.get_conversation_style_config","PreferenceConfigurator.get_conversation_style_config"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceOnboardingFlow.__init__"],["DashboardPage.build_verification_sequence","js_wait_for_dashboard_loaded"],["EmotionalStage.__init__","StateStore.__init__"],["LoginPage.__init__","JourneyReport.__init__"],["EngagementStateRepository.__init__","TelegramAuth.__init__"],["PiiSafeFormatter.__init__","GmailMCPClient.__init__"],["FakeStage.__init__","ConflictStage.__init__"],["ScoreHistoryRepository.__init__","TextPatternProcessor.__init__"],["TokenValidator.truncate_layers","count_tokens"],["DailySummaryRepository.__init__","GameStateStage.__init__"],["ScoreHistoryRepository.__init__","RateLimiter.__init__"],["FakeStage.__init__","InMemoryCache.__init__"],["StageError.__init__","MessageSplitter.__init__"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcRepository.get_active_arcs"],["TestBossEncountersEndpoint.app","TestPipelineStatus.mock_admin_auth"],["SummaryStage.__init__","TelegramBot.__init__"],["EvidenceCollector.end_phase","EvidenceCollector.log"],["TestConversationListEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["BaseRepository.session","TestEmptyPipelineE2E.session"],["AuditLog.__init__","VoiceAgentConfig.__init__"],["UserRepository.complete_onboarding","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GmailMCPClient.__init__"],["ProfileRepository.__init__","OnboardingHandler.__init__"],["BossJudgment.judge_boss_outcome","ScoreAnalyzer._call_llm"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","JobExecutionRepository.__init__"],["StageError.__init__","BasePage.__init__"],["TelegramLinkCode.create","generate_link_code"],["NarrativeArcRepository._count_active_arcs","NarrativeArcRepository.get_active_arcs"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","step2_send_email"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase1_instructions"],["EmotionalStage.__init__","DecayProcessor.__init__"],["SummaryStage.__init__","HistoryLoader.__init__"],["VoiceService.initiate_call","_load_user"],["BackstoryGeneratorService.process_custom_backstory","_call_llm"],["ClinginessDetector._length_ratio_signal","StateComputer._clamp"],["UserNotFoundError.__init__","FactExtractor.__init__"],["BaseRepository.update","PackageStore.get"],["UserRepository.__init__","TelegramWebhookSimulator.__init__"],["LifeSimStage.__init__","StrategicSilence.__init__"],["FakeStage.__init__","ScheduledEventRepository.__init__"],["SummaryStage.__init__","Phase3Portal.__init__"],["EmotionalStage.__init__","MoodCalculator.__init__"],["GameStateStage.__init__","DashboardPage.__init__"],["MissingVariableError.__init__","TextPatternProcessor.__init__"],["VicePreferenceRepository.__init__","BreakupManager.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","OTPTestContext.create"],["ReadyPromptRepository.__init__","_ProfileFromAnswers.__init__"],["MissingVariableError.__init__","RateLimiter.__init__"],["PromptBuilderStage.__init__","PsychologyMapper.__init__"],["GameStateStage.__init__","SocialCircleRepository.__init__"],["UserNotFoundError.__init__","DeliveryResult.__init__"],["TestConversationThreadRepository.test_create_thread_valid_types","mock_create"],["ConversationRepository.__init__","GeneratedPromptRepository.__init__"],["ConflictGenerator.generate","_prioritize_triggers"],["ProfileRepository.__init__","ElevenLabsConversationsClient.__init__"],["VicePreferenceRepository.__init__","LengthAdjuster.__init__"],["UserNotFoundError.__init__","SkipDecision.__init__"],["TelegramLinkRepository.cleanup_expired","PackageStore.delete"],["TelegramLinkRepository.delete_for_user","TelegramLinkRepository.delete"],["ProfileCollector.collect","_validate_and_process"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","FullJourneyOrchestrator.__init__"],["AuditLog.__init__","OnboardingServerToolHandler.__init__"],["EntityManager.get_friends","EventStore.get_entities_by_type"],["TestConversationPromptsEndpoint.app","TestConversationListEndpoint.mock_get_session"],["ReadyPromptRepository.__init__","RecoveryManager.__init__"],["GameStateStage.__init__","NarrativeArcManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConflictDetector.__init__"],["UserNotFoundError.__init__","AuditLog.__init__"],["ReadyPromptRepository.__init__","StateComputer.__init__"],["NikitaThoughtRepository.__init__","JourneyReport.__init__"],["ConfigLoader.get_boss_threshold","ConfigLoader.get_chapter"],["BackstoryRepository.__init__","CommandHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VicePreferenceRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceScorer.__init__"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase2_instructions"],["RecoveryManager.get_estimated_recovery_time","calculate_recovery_rate"],["TestBossEncountersEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["LifeSimStage.__init__","ConflictGenerator.__init__"],["GameStateStage.__init__","ConflictStage.__init__"],["DashboardPage.__init__","LoginPage.__init__"],["UserRepository.__init__","VenueResearchService.__init__"],["ExtractionStage.__init__","TelegramAuth.__init__"],["GameStateStage.__init__","InMemoryCache.__init__"],["UserRepository.__init__","PromptLoader.__init__"],["TestErrorLogEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["SummaryStage.__init__","MessageHandler.__init__"],["BaseRepository.update","TelegramLinkCode.create"],["ConflictStage.__init__","BaseRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EngagementStateMachine.__init__"],["DailySummaryRepository.__init__","TokenBudgetManager.__init__"],["TestSystemOverviewEndpoint.app","TestThoughtsList.mock_admin_auth"],["TouchpointStage.__init__","TextPatternProcessor.__init__"],["EngagementStateMachine.update","_apply_transition"],["StageError.__init__","PipelineOrchestrator.__init__"],["TouchpointStage.__init__","RateLimiter.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","AuditLog.__init__"],["EmotionalStage.__init__","InstructionSelector.__init__"],["test_critical_stage_failure_fast_abort","TokenCounter.__init__"],["UserRepository.__init__","EmojiProcessor.__init__"],["LifeSimStage.__init__","LifeSimStage.__init__"],["PiiSafeFormatter.__init__","ConflictDetector.__init__"],["ConflictStage.__init__","BackstoryGeneratorService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TestVicePreferenceRepository.__init__"],["GameStateStage.__init__","ScheduledEventRepository.__init__"],["ProfileRepository.get_by_user_id","get"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DatabaseRateLimiter.__init__"],["TestBossEncountersEndpoint.app","TestTextStats.mock_admin_auth"],["TranscriptManager.extract_facts","TranscriptManager._extract_facts_via_llm"],["ServerToolHandler._get_context","ServerToolHandler._add_humanization_context"],["PiiSafeFormatter.__init__","Phase1Registration.__init__"],["JobExecutionRepository.__init__","BreakupManager.__init__"],["EntityManager.get_colleagues","EntityManager.get_entities_by_type"],["DailySummaryRepository.__init__","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConflictDetector.__init__"],["GeneratedPromptRepository.__init__","ScoringService.__init__"],["HandoffManager.transition","HandoffManager._generate_profile_summary"],["BackstoryRepository.__init__","ViceService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","FactExtractor.__init__"],["ConflictStage.__init__","NarrativeArcRepository.__init__"],["AuditLog.__init__","PsychologyMapper.__init__"],["GameStateStage.__init__","MemoryUpdateStage.__init__"],["JobExecutionRepository.__init__","LengthAdjuster.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase1Registration.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConversationsPage.__init__"],["GameStateStage.__init__","ReadyPromptRepository.__init__"],["BaseRepository.delete_by_id","TouchpointStore.delete"],["test_critical_stage_failure_fast_abort","ServerToolHandler.__init__"],["VicePreferenceRepository.__init__","Phase2Conversation.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InboundCallHandler.__init__"],["DashboardPage.__init__","OnboardingStateRepository.__init__"],["TouchpointStage.__init__","GeneratedPromptRepository.__init__"],["ConflictStage.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DeliveryResult.__init__"],["MockStage.__init__","BreakupManager.__init__"],["ProfileRepository.__init__","ScoringService.__init__"],["PiiSafeFormatter.__init__","ExtractionStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceSessionManager.__init__"],["EngagementStateRepository.__init__","FactExtractor.__init__"],["DailySummaryRepository.__init__","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","SkipDecision.__init__"],["UserRepository.__init__","StateStore.__init__"],["BossJudgment.judge_boss_outcome","_call_llm"],["UserMetricsRepository.__init__","MessageSplitter.__init__"],["ConversationsPage.__init__","EngagementStateMachine.__init__"],["BackstoryRepository.__init__","UserNotFoundError.__init__"],["DailySummaryRepository.__init__","LifeSimulator.__init__"],["EventStore.get_entities_by_type","EventStore._row_to_entity"],["GeneratedPromptRepository.__init__","FullJourneyOrchestrator.__init__"],["LoginPage.build_login_sequence","js_wait_for_magic_link_sent"],["test_critical_stage_failure_fast_abort","PendingRegistrationRepository.__init__"],["UserRepository.__init__","SocialCircleRepository.__init__"],["DashboardPage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["MemoryUpdateStage.__init__","GeneratedPromptRepository.__init__"],["DailySummaryRepository.__init__","PreferenceConfigurator.__init__"],["MockStage.__init__","LengthAdjuster.__init__"],["EvidenceCollector.save_report","EvidenceCollector.log"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PackageStore.__init__"],["TestConversationListEndpoint.app","TestElevenLabsList.mock_admin_auth"],["MemoryFactRepository.__init__","LoginPage.__init__"],["SummaryStage.__init__","ScoreCalculator.__init__"],["TestVoiceIntegrationFlow.test_voice_text_isolation","_make_server_handler"],["SummaryStage.__init__","ConflictStore.__init__"],["ConversationRepository.__init__","NarrativeArcSystem.__init__"],["GeneratedPromptRepository.__init__","VicePreferenceRepository.__init__"],["ReadyPromptRepository.__init__","EmotionalStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ExtractionStage.__init__"],["PendingRegistrationRepository.get_email","TouchpointStore.get"],["SupabaseMemory.get_context_for_prompt","ConversationRepository.search"],["RateLimiter.check","_seconds_until_midnight"],["EngagementStateRepository.__init__","DeliveryResult.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationsE2ETest.__init__"],["VicePromptInjector.inject","VicePromptInjector.inject"],["TestConversationPromptsEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["LoginPage.__init__","TestVicePreferenceRepository.__init__"],["ConflictGenerator.should_generate_conflict","ConflictGenerator._check_should_skip"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockReadyPromptRepo.__init__"],["UserMetricsRepository.__init__","VenueCacheRepository.__init__"],["EngagementStateRepository.__init__","SkipDecision.__init__"],["FactExtractor.extract_facts","_call_llm_for_extraction"],["InboundCallHandler._get_conversation_config_override","_get_first_message"],["LifeSimulator.get_events_for_context","LifeSimulator.get_current_mood"],["PiiSafeFormatter.__init__","ConversationThreadRepository.__init__"],["FullJourneyOrchestrator.print_instructions","FullJourneyOrchestrator.get_all_instructions"],["TestRateLimiter.test_multiple_users_isolated","TestRateLimiter.mock_incr"],["UserRepository.__init__","DecayProcessor.__init__"],["ScoreAnalyzer.analyze_batch","_neutral_analysis"],["TestUserScoresEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["DailySummaryRepository.__init__","MessageGenerator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramBot.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SummaryStage.__init__"],["MemoryFactRepository.__init__","VoiceCallVerifier.__init__"],["TestProcessingStatsEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["EngagementStateRepository.__init__","AuditLog.__init__"],["TestLifeSimStage.test_life_sim_empty_events","_mock_session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EngagementStateRepository.__init__"],["GeneratedPromptRepository.__init__","TestUserMetricsRepository.__init__"],["LifeSimulator.generate_next_day_events","LifeSimulator.get_active_arcs"],["TestConversationListEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["StageError.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","InboundCallHandler.__init__"],["UserRepository.__init__","MoodCalculator.__init__"],["PromptBuilderStage.__init__","DecayCalculator.__init__"],["ProfileRepository.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ProfileCollector.__init__"],["ConversationThreadRepository.__init__","TestVicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationThreadRepository.__init__"],["ConversationsPage.__init__","ViceScorer.__init__"],["with_timeout_fallback","wrapper"],["ReadyPromptRepository.__init__","UserRepository.__init__"],["LoginPage.__init__","ConversationsPage.__init__"],["TestPipelineOrchestratorNonCriticalFailure.test_non_critical_failure_continues","_make_orchestrator"],["TestUserListEndpointAuditLogging.app","TestErrorLogEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TokenCounter.__init__"],["PromptBuilderStage.__init__","TTSConfigService.__init__"],["DailySummaryRepository.__init__","Phase4GameState.__init__"],["EmotionalStage.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramBot.__init__"],["ConflictStage.__init__","ScoreHistoryRepository.__init__"],["PiiSafeFormatter.__init__","MockReadyPromptRepo.__init__"],["JobExecutionRepository.__init__","Phase2Conversation.__init__"],["TelegramLinkRepository.delete_for_user","BaseRepository.delete"],["TestSystemOverviewEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointEngine.__init__"],["SummaryStage.__init__","ResponseTimer.__init__"],["ServerToolHandler._get_context","VoiceService._try_load_ready_prompt"],["FakeStage.__init__","TextPatternProcessor.__init__"],["StageError.__init__","PortalLoginE2ETest.__init__"],["PromptBuilderStage.__init__","OTPVerificationHandler.__init__"],["ProfileRepository.__init__","TestUserMetricsRepository.__init__"],["PiiSafeFormatter.__init__","DashboardE2ETest.__init__"],["FakeStage.__init__","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","HistoryLoader.__init__"],["DatabaseRateLimiter.check","_get_minute_window"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","JourneyReport.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","NarrativeArcSystem.__init__"],["test_critical_stage_failure_fast_abort","TelegramAuth.__init__"],["TestBossEncountersEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["TestPipelineStatusEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["TokenValidator.truncate_layers","truncate"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MockReadyPromptRepo.__init__"],["MemoryFactRepository.__init__","OnboardingStateRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EvidenceCollector.__init__"],["ExtractionStage.__init__","FactExtractor.__init__"],["TestUserMemoryEndpoint.app","TestVoiceStats.mock_admin_auth"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","Phase3Portal.__init__"],["BaseRepository.session","BaseRepository.session"],["ConflictStage.__init__","ProfileRepository.__init__"],["TestDecayProcessorProcessUser.test_process_user_skips_boss_fight","create_mock_user"],["DailySummaryRepository.__init__","VoiceService.__init__"],["LoginPage.__init__","PackageStore.__init__"],["LifeSimulator.get_events_for_context","get_recent_events"],["StateComputer.compute","_compute_base_state"],["should_apply_silence","StrategicSilence.apply_strategic_silence"],["TouchpointEngine._send_telegram_message","_get_chat_id"],["MockStage.__init__","Phase2Conversation.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ServerToolHandler.__init__"],["LifeSimStage.__init__","NikitaThoughtRepository.__init__"],["UserRepository.update_score","_ChapterBehaviorsProxy.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TriggerDetector.__init__"],["UserRepository.__init__","ReadyPromptRepository.__init__"],["ExtractionStage.__init__","DeliveryResult.__init__"],["ConversationConfigBuilder._generate_system_prompt","_generate_fallback_prompt"],["TestUserDetailEndpoint.app","mock_admin_auth"],["UserRepository.__init__","InstructionSelector.__init__"],["PiiSafeFormatter.__init__","TouchpointEngine.__init__"],["StageError.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","VoiceAgentConfig.__init__"],["ExtractionStage.__init__","SkipDecision.__init__"],["OnboardingStateRepository.delete","PendingRegistrationRepository.delete"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MessageHandler.__init__"],["ClinginessDetector.detect","NeglectDetector._response_time_signal"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcManager.check_arc_resolution"],["TestUserDetailEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["EventGenerator.generate_events_for_day","EventGenerator._build_generation_prompt"],["GeneratedPromptRepository.__init__","BackstoryRepository.__init__"],["GeneratedPromptRepository.__init__","StrategicSilence.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PendingRegistrationRepository.__init__"],["ExtractionStage.__init__","AuditLog.__init__"],["EmojiProcessor.process","_count_emojis"],["TestSystemOverviewEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["ConflictStage.__init__","EventGenerator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointEngine.__init__"],["NikitaThoughtRepository.__init__","ConversationsPage.__init__"],["NikitaThoughtRepository.__init__","LifeSimStage.__init__"],["TestPipelineOrchestratorHappyPath.test_all_stages_called_in_order","_make_orchestrator"],["HistoryLoader.load","_ensure_tool_call_pairing"],["MemoryUpdateStage.__init__","NarrativeArcSystem.__init__"],["ConflictDetector.check_escalation","ConflictDetector.detect_conflict_state"],["AuditLog.__init__","DecayCalculator.__init__"],["LifeSimStage.__init__","FakeStage.__init__"],["BackstoryRepository.__init__","OnboardingHandler.__init__"],["UserNotFoundError.__init__","OnboardingStateRepository.__init__"],["OnboardingServerToolHandler.collect_profile","OnboardingServerToolHandler._get_or_create_profile"],["TestPipelineOrchestratorHappyPath.test_all_stages_succeed","_make_orchestrator"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TranscriptManager.__init__"],["PiiSafeFormatter.__init__","MemoryFactRepository.__init__"],["GeneratedPromptRepository.__init__","SummaryStage.__init__"],["TestPipelineContext.test_record_multiple_errors","_make_ctx"],["GameStateStage.__init__","TextPatternProcessor.__init__"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._copy_character"],["PromptBuilderStage.__init__","MetaNikitaConfig.__init__"],["AuditLog.__init__","TTSConfigService.__init__"],["GeneratedPromptRepository.__init__","EngagementStateRepository.__init__"],["InstructionSelector.instruction_library","InstructionSelector._load_instructions"],["StageError.__init__","TelegramBot.__init__"],["EscalationManager.check_escalation","EscalationManager._get_time_in_level"],["GameStateStage.__init__","RateLimiter.__init__"],["ProfileRepository.__init__","BackstoryRepository.__init__"],["ProfileRepository.__init__","StrategicSilence.__init__"],["PendingRegistrationRepository.delete","OnboardingStateRepository.delete"],["JobExecutionRepository.__init__","Phase1Registration.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingServerToolHandler.__init__"],["RecoveryManager.apply_recovery","can_recover"],["EntityManager.get_friends","EntityManager.get_entities_by_type"],["TestConversationPromptsEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["AuditLog.__init__","OTPVerificationHandler.__init__"],["NikitaThoughtRepository.__init__","PackageStore.__init__"],["TouchpointStore.delete","PackageStore.delete"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MemoryFactRepository.__init__"],["UserNotFoundError.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["DashboardPage.__init__","InstructionSelector.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","DashboardE2ETest.step1_navigate_command"],["VicePreferenceRepository.__init__","StageError.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OnboardingStateRepository.__init__"],["BackstoryRepository.__init__","ElevenLabsConversationsClient.__init__"],["ProfileRepository.__init__","SummaryStage.__init__"],["ProfileRepository.__init__","EngagementStateRepository.__init__"],["TestAuditLogsEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["PiiSafeFormatter.__init__","TranscriptManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ExperimentLoader.__init__"],["ConversationsPage.__init__","MessageHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramWebhookSimulator.__init__"],["VicePreferenceRepository.__init__","DashboardE2ETest.__init__"],["SupabaseMemory.add_nikita_event","add_fact"],["GeneratedPromptRepository.__init__","Phase3Portal.__init__"],["LifeSimStage.__init__","ViceAnalyzer.__init__"],["TestProcessingStatsEndpoint.app","mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceCallVerifier.__init__"],["OnboardingHandler.resume","OnboardingHandler.has_incomplete_onboarding"],["SummaryStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestDailySummaryRepositoryContextEngineering.__init__"],["TelegramWebhookSimulator.send_message","_build_update"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramAuth.__init__"],["GameStateStage.__init__","GeneratedPromptRepository.__init__"],["UserMetricsRepository.__init__","EngagementStateMachine.__init__"],["PromptBuilderStage.__init__","GmailMCPClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictStore.__init__"],["ConversationThreadRepository.__init__","BaseRepository.__init__"],["TestAuditLogsEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TranscriptManager.__init__"],["LifeSimStage.__init__","TelegramLinkRepository.__init__"],["VicePreferenceRepository.discover","VicePreferenceRepository.get_by_category"],["LifeSimulator.get_events_for_context","LifeSimulator._summarize_mood"],["TestUserListEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["TestDailySummaryLLM.test_llm_timeout_prevents_blocking","slow_run"],["PiiSafeFormatter.__init__","TokenValidator.__init__"],["UserNotFoundError.__init__","StateStore.__init__"],["ConversationThreadRepository.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScoreCalculator.__init__"],["JobExecutionRepository.__init__","ConversationThreadRepository.__init__"],["StageError.__init__","MessageHandler.__init__"],["RateLimiter.__init__","PendingRegistrationRepository.get"],["UserRepository.update_game_status","PackageStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MetaInstructionEngine.__init__"],["AuditLog.__init__","MetaNikitaConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenValidator.__init__"],["VicePreferenceRepository.__init__","CommandHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BaseStage.__init__"],["TestUserListEndpointAuditLogging.app","TestUserListEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VenueResearchService.__init__"],["ReadyPromptRepository.__init__","MockStage.__init__"],["test_critical_stage_failure_fast_abort","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenEstimator.__init__"],["ConversationsPage.__init__","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PromptLoader.__init__"],["UserNotFoundError.__init__","DecayProcessor.__init__"],["TestPipelineStatusEndpoint.app","TestElevenLabsList.mock_admin_auth"],["ConversationThreadRepository.__init__","NarrativeArcRepository.__init__"],["UserMetricsRepository.__init__","ViceScorer.__init__"],["TestConversationListEndpoint.app","TestConversationListEndpoint.mock_get_session"],["PendingRegistrationRepository.cleanup_expired","TelegramLinkRepository.delete"],["SupabaseMemory.get_recent","ConversationRepository.get_recent"],["JobExecutionRepository.__init__","StageError.__init__"],["_create_nikita_agent","recall_memory"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ResponseTimer.__init__"],["InboundCallHandler.handle_incoming_call","_build_context"],["make_context","_factory"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ProfileRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EmojiProcessor.__init__"],["EngagementStateRepository.__init__","VenueResearchService.__init__"],["test_critical_stage_failure_fast_abort","DeliveryResult.__init__"],["test_database_url","_get_database_url"],["ConversationThreadRepository.__init__","EscalationManager.__init__"],["TokenEstimator.estimate","estimate_accurate"],["ConversationsPage.__init__","VoiceCallVerifier.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TestVicePreferenceRepository.__init__"],["ScoreHistoryRepository.__init__","BaseRepository.__init__"],["ConversationRepository.__init__","GameStateStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ResponseDelivery.__init__"],["JobExecutionRepository.__init__","DashboardE2ETest.__init__"],["test_critical_stage_failure_fast_abort","SkipDecision.__init__"],["MessageSplitter.split","MessageSplitter._find_split_points"],["ReadyPromptRepository.__init__","HandoffManager.__init__"],["HandoffManager.transition","HandoffManager.transition"],["BackstoryRepository.__init__","ScoringService.__init__"],["TestPipelineStatusEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["EmojiProcessor.validate_only","EmojiProcessor._validate_existing_emojis"],["VoiceService._load_context","_get_user_name"],["TestTypingIndicators.test_ac_fr009_002_periodic_typing_during_delay","mock_sleep"],["EmotionalStage.__init__","NarrativeArcSystem.__init__"],["OnboardingStateRepository.delete","TouchpointStore.delete"],["DashboardPage.__init__","GmailHelper.__init__"],["ReadyPromptRepository.__init__","SupabaseMemory.__init__"],["test_critical_stage_failure_fast_abort","AuditLog.__init__"],["MockStage.__init__","StageError.__init__"],["DashboardPage.__init__","JobExecutionRepository.__init__"],["ScoreHistoryRepository.__init__","BackstoryGeneratorService.__init__"],["AuditLog.__init__","GmailMCPClient.__init__"],["TestSystemOverviewEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["LifeSimStage.__init__","MockMappings.__init__"],["LifeSimStage.__init__","PunctuationProcessor.__init__"],["EngagementStateRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EntityManager.__init__"],["VicePreferenceRepository.__init__","ViceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConversationsPage.__init__"],["ExtractionStage.__init__","TelegramWebhookSimulator.__init__"],["ViceScorer.close","ViceScorer.close"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EventGenerator.__init__"],["LifeSimStage.__init__","DailySummaryRepository.__init__"],["ConflictGenerator.generate","ConflictGenerator._calculate_severity"],["LifeSimStage.__init__","PromptBuilderStage.__init__"],["test_context","TouchpointStore.create"],["MissingVariableError.__init__","BaseRepository.__init__"],["PromptBuilderStage.__init__","ConflictDetector.__init__"],["StageError.__init__","VoiceCallVerifier.__init__"],["CalibrationCalculator.compute","_clamp"],["ReadyPromptRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConversationsPage.__init__","OnboardingStateRepository.__init__"],["ScoreHistoryRepository.__init__","NarrativeArcRepository.__init__"],["TestBossEncountersEndpoint.app","TestUserListEndpoint.mock_get_session"],["render_template","_get_env"],["StageError.__init__","ConflictStore.__init__"],["JobExecutionRepository.__init__","CommandHandler.__init__"],["UserNotFoundError.__init__","InstructionSelector.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StateStore.__init__"],["PromptBuilderStage.__init__","Phase1Registration.__init__"],["LoginPage.build_login_sequence","LoginPage.js_click_submit"],["UserRepository.__init__","GeneratedPromptRepository.__init__"],["SummaryStage.__init__","EvidenceCollector.__init__"],["BackstoryRepository.__init__","VicePreferenceRepository.__init__"],["SocialCircleRepository.create_circle_for_user","SocialCircleRepository.get_circle"],["BaseRepository.update","create"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PackageStore.__init__"],["ScoreHistoryRepository.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GameStateStage.__init__"],["ConversationThreadRepository.__init__","ScoreHistoryRepository.__init__"],["TestOTPFlowSteps.test_step2_email_submission","step2_send_email"],["DashboardPage.__init__","ResolutionManager.__init__"],["EngagementStateRepository.__init__","StateStore.__init__"],["ExtractionStage.__init__","VenueResearchService.__init__"],["TestUserScoresEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["MissingVariableError.__init__","NarrativeArcRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DecayProcessor.__init__"],["MockStage.__init__","CommandHandler.__init__"],["MessageHandler.handle","get_nikita_agent_for_user"],["BackstoryRepository.__init__","TestUserMetricsRepository.__init__"],["SummaryStage.__init__","VoiceAgentConfig.__init__"],["DailySummaryRepository.__init__","MessageSplitter.__init__"],["ExtractionStage.__init__","PromptLoader.__init__"],["ConversationRepository.__init__","TokenBudgetManager.__init__"],["GeneratedPromptRepository.__init__","NikitaThoughtRepository.__init__"],["PromptBuilderStage.__init__","ExtractionStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","FactExtractor.__init__"],["ConversationThreadRepository.__init__","ProfileRepository.__init__"],["TouchpointStage.__init__","BaseRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MoodCalculator.__init__"],["TestErrorLogEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["StageError.__init__","ResponseTimer.__init__"],["NarrativeArcSystem.__init__","NarrativeArcSystem._index_templates"],["ConflictStage.__init__","TokenCounter.__init__"],["MissingVariableError.__init__","EscalationManager.__init__"],["VoiceService.initiate_call","VoiceService._log_call_started"],["test_context","BackstoryRepository.create"],["CalibrationCalculator._frequency_component","UserMetricsRepository._clamp"],["LoginPage.__init__","EventGenerator.__init__"],["GeneratedPromptRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceSessionManager.__init__"],["EngagementStateRepository.__init__","DecayProcessor.__init__"],["JobExecutionRepository.__init__","ViceService.__init__"],["VoiceAgentConfig.get_agent_config","InboundCallHandler._get_first_message"],["ExtractionStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DeliveryResult.__init__"],["UserMetricsRepository.__init__","MessageHandler.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","PortalLoginE2ETest.get_complete_flow_instructions"],["with_timeout_fallback","decorator"],["ProfileRepository.__init__","NikitaThoughtRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConfigLoader.__init__"],["MemoryUpdateStage.__init__","GameStateStage.__init__"],["BackstoryRepository.create_from_scenario","_ChapterBehaviorsProxy.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SkipDecision.__init__"],["RateLimiter.__init__","InMemoryCache.get"],["EngagementStateRepository.__init__","MoodCalculator.__init__"],["LifeSimStage.__init__","_ProfileFromAnswers.__init__"],["ConversationRepository.__init__","MockResult.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreAnalyzer.__init__"],["PromptBuilderStage.__init__","ConversationThreadRepository.__init__"],["GeneratedPromptRepository.__init__","FakeStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationConfigBuilder.__init__"],["AuditLog.__init__","ConflictDetector.__init__"],["SummaryStage.__init__","OnboardingServerToolHandler.__init__"],["CommandHandler._handle_status","_get_score_hint"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","AuditLog.__init__"],["ConversationsE2ETest.get_verification_instructions","DashboardE2ETest.step2_wait_js"],["ConversationThreadRepository.__init__","EventGenerator.__init__"],["BreakupManager.check_and_process","check_threshold"],["GeneratedPromptRepository.__init__","EntityManager.__init__"],["ScoreHistoryRepository.__init__","ScoreHistoryRepository.__init__"],["DashboardPage.__init__","OTPFlowE2ETest.__init__"],["TestTimingProgression.test_average_delay_decreases_through_chapters","mock_production_settings"],["NeglectDetector._short_message_signal","_clamp"],["TouchpointStage.__init__","NarrativeArcRepository.__init__"],["VoiceService.initiate_call","VoiceService._generate_fallback_prompt"],["ProfileRepository.__init__","ResponseDelivery.__init__"],["MessageHandler.handle","_send_rate_limit_response"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestDailySummaryRepositoryExtras.__init__"],["LifeSimStage.__init__","RecoveryManager.__init__"],["AuditLog.__init__","Phase1Registration.__init__"],["ConflictStage.__init__","ServerToolHandler.__init__"],["InMemoryCache.incr","PackageStore.get"],["MockStage.__init__","ViceService.__init__"],["PiiSafeFormatter.format","PiiSafeFormatter.format"],["LifeSimStage.__init__","StateComputer.__init__"],["PiiSafeFormatter.__init__","VoiceSessionManager.__init__"],["CalibrationCalculator._timing_component","_clamp"],["HandoffManager.execute_handoff_with_voice_callback","ConflictGenerator.generate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenBudgetManager.__init__"],["UserRepository.update_score","TouchpointStore.get"],["ScoreHistoryRepository.__init__","SupabaseHelper.__init__"],["ProfileRepository.__init__","FakeStage.__init__"],["PromptBuilderStage.__init__","MockReadyPromptRepo.__init__"],["ConversationRepository.__init__","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","InstructionSelector.__init__"],["UserRepository.complete_onboarding","get"],["VoiceService.initiate_call","_build_dynamic_variables"],["ConversationRepository.__init__","LifeSimulator.__init__"],["TestErrorLogEndpoint.app","mock_get_session"],["LifeSimulator.get_current_mood","get_recent_events"],["TestProcessingStatsEndpoint.app","TestPipelineStatus.mock_admin_auth"],["ProfileRepository.__init__","EntityManager.__init__"],["ExtractionStage.__init__","StateStore.__init__"],["BackstoryRepository.__init__","StrategicSilence.__init__"],["UserNotFoundError.__init__","GmailHelper.__init__"],["PromptBuilderStage.__init__","DashboardE2ETest.__init__"],["ConversationRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VoiceSessionManager.__init__"],["ConflictStage.__init__","PendingRegistrationRepository.__init__"],["UserMetricsRepository.__init__","LoginPage.__init__"],["BaseRepository.update","get"],["MemoryFactRepository.__init__","ResolutionManager.__init__"],["MissingVariableError.__init__","ScoreHistoryRepository.__init__"],["UserNotFoundError.__init__","JobExecutionRepository.__init__"],["DailySummaryRepository.__init__","PipelineOrchestrator.__init__"],["test_no_fk_violation_with_session","TestScorePersistence.track_commit"],["make_token","_make"],["MockStage.__init__","UserNotFoundError.__init__"],["BackstoryGeneratorService.process_custom_backstory","_parse_extraction_response"],["UserRepository.__init__","NarrativeArcSystem.__init__"],["AuditLog.__init__","ExtractionStage.__init__"],["GeneratedPromptRepository.__init__","ViceAnalyzer.__init__"],["NikitaThoughtRepository.__init__","EventGenerator.__init__"],["UserRepository.update_onboarding_profile","get"],["NarrativeArcManager.get_active_arcs","EventStore.get_active_arcs"],["TestUserDetailEndpoint.app","TestTextStats.mock_admin_auth"],["OnboardingHandler.handle","_handle_scenario_selection_step"],["TestNikitaThoughtRepository.test_create_missing_him_thought_48h","mock_create_thought"],["EngagementStateRepository.__init__","InstructionSelector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MockResult.__init__"],["TestPipelineOrchestratorHappyPath.test_all_stages_called_in_order","FakeStage.execute"],["BackstoryRepository.__init__","EngagementStateRepository.__init__"],["MemoryFactRepository.__init__","ExperimentLoader.__init__"],["ConversationRepository.__init__","MessageGenerator.__init__"],["MissingVariableError.__init__","SupabaseHelper.__init__"],["LoginPage.__init__","ConfigLoader.__init__"],["ExtractionStage.__init__","DecayProcessor.__init__"],["UserMetricsRepository.__init__","VoiceCallVerifier.__init__"],["VicePreferenceRepository.__init__","OnboardingHandler.__init__"],["TouchpointEngine._evaluate_silence","TouchpointEngine._load_emotional_state"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","GmailHelper.__init__"],["PromptBuilderStage.__init__","TouchpointEngine.__init__"],["ViceService.__aexit__","TelegramBot.close"],["SummaryStage.__init__","PsychologyMapper.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","BreakupManager.__init__"],["MemoryUpdateStage.__init__","TokenBudgetManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","JobExecutionRepository.__init__"],["ExtractionStage.__init__","MoodCalculator.__init__"],["EntityManager.get_projects","EventStore.get_entities_by_type"],["TestPipelineStatusEndpoint.app","TestConversationListEndpoint.mock_get_session"],["ProfileRepository.__init__","ViceAnalyzer.__init__"],["NikitaThoughtRepository.__init__","PunctuationProcessor.__init__"],["TestBossEncountersEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["AuditLog.__init__","ConversationThreadRepository.__init__"],["ConversationRepository.__init__","Phase4GameState.__init__"],["DecayCalculator.calculate_decay","is_overdue"],["TestOTPFlowSteps.test_step5_verification_parsing","WebhookTestData.create"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LengthAdjuster.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","RegistrationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LifeSimulator.__init__"],["TestInboundReadyPrompt.test_flag_disabled_skips","TestInboundReadyPrompt._make_handler"],["SituationDetector._detect_situation_type","_is_evening"],["StageError.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestProcessingStatsEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["FakeStage.__init__","BaseRepository.__init__"],["PiiSafeFormatter.__init__","JourneyReport.__init__"],["VicePreferenceRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PreferenceConfigurator.__init__"],["ReadyPromptRepository.__init__","DatabaseRateLimiter.__init__"],["GeneratedPromptRepository.__init__","ConversationConfigBuilder.__init__"],["generate_touchpoint_message","ConflictGenerator.generate"],["MemoryFactRepository.__init__","OTPFlowE2ETest.__init__"],["TestConversationListEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["ConversationConfigBuilder.build_config","VoiceAgentConfig._get_first_message"],["TouchpointScheduler._evaluate_gap_trigger","_should_trigger"],["PromptBuilderStage.__init__","MemoryFactRepository.__init__"],["UserMetricsRepository.__init__","OnboardingStateRepository.__init__"],["MemoryUpdateStage.__init__","MockResult.__init__"],["test_critical_stage_failure_fast_abort","VenueResearchService.__init__"],["ConflictStage.__init__","TelegramAuth.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EvidenceCollector.__init__"],["TestUserListEndpointAuditLogging.app","TestProcessingStatsEndpoint.mock_admin_auth"],["ConversationRepository.__init__","VoiceService.__init__"],["TestP2EdgeCases.test_ec2_malformed_base64_in_jwt_returns_error","navigate_and_get_content"],["AuditLog.__init__","MockReadyPromptRepo.__init__"],["NarrativeArcManager.maybe_create_arc","NarrativeArcManager.get_active_arcs"],["TouchpointStage.__init__","SupabaseHelper.__init__"],["FakeStage.__init__","BackstoryGeneratorService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","JourneyReport.__init__"],["ViceService.close","ViceScorer.close"],["ScoreAnalyzer._call_llm","_build_analysis_prompt"],["LifeSimStage.__init__","EmotionalStage.__init__"],["UserMetricsRepository.__init__","ResponseTimer.__init__"],["PunctuationProcessor.apply","PunctuationProcessor._apply_lowercase"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageGenerator.__init__"],["AuditLog.__init__","DashboardE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointStage.__init__"],["TestP0CriticalSecurity.test_sec3_jwt_signature_not_validated","navigate_and_get_content"],["HandoffManager.execute_handoff_with_voice_callback","generate_and_store_social_circle"],["TestUserListEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResolutionManager.__init__"],["TestUserScoresEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["ReadyPromptRepository.__init__","InboundCallHandler.__init__"],["ProfileRepository.__init__","ConversationConfigBuilder.__init__"],["VenueCacheRepository.cleanup_expired","OnboardingStateRepository.delete"],["EmotionalStage.__init__","GameStateStage.__init__"],["NikitaThoughtRepository.__init__","ConfigLoader.__init__"],["HandoffManager.transition","generate"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EvidenceCollector.__init__"],["TestProcessingStatsEndpoint.app","TestTextStats.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","VoiceAgentConfig.__init__"],["ExtractionStage.__init__","InstructionSelector.__init__"],["ConversationConfigBuilder._generate_fallback_prompt","_get_relationship_score"],["test_critical_stage_failure_fast_abort","TestDailySummaryRepositoryContextEngineering.__init__"],["build_system_prompt","_build_system_prompt_legacy"],["FakeStage.__init__","NarrativeArcRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenCounter.__init__"],["MemoryUpdateStage.__init__","RegistrationHandler.__init__"],["JobExecutionRepository.__init__","OnboardingHandler.__init__"],["PromptBuilderStage.__init__","TranscriptManager.__init__"],["TelegramBot.send_message_with_keyboard","escape_html"],["UserRepository.update_onboarding_status","InMemoryCache.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","JobExecutionRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase4GameState.__init__"],["MemoryUpdateStage.__init__","LifeSimulator.__init__"],["DailySummaryRepository.__init__","EngagementStateMachine.__init__"],["TestConversationPromptsEndpoint.app","TestPipelineStatus.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TouchpointStore.__init__"],["TestUserListEndpointAuditLogging.app","TestBossEncountersEndpoint.mock_get_session"],["MemoryUpdateStage.__init__","PreferenceConfigurator.__init__"],["InboundCallHandler._get_conversation_config_override","VoiceService._try_load_ready_prompt"],["UserNotFoundError.__init__","OTPFlowE2ETest.__init__"],["AuditLog.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","RecoveryManager.__init__"],["LifeSimStage.__init__","UserRepository.__init__"],["FakeStage.__init__","EscalationManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceAgentConfig.__init__"],["EngagementStateRepository.__init__","GmailHelper.__init__"],["ConversationConfigBuilder._generate_fallback_prompt","ConversationConfigBuilder._get_relationship_score"],["MessageSplitter.split","MessageSplitter._calculate_delay"],["DailySummaryRepository.__init__","PortalLoginE2ETest.__init__"],["EngagementStateRepository.__init__","JobExecutionRepository.__init__"],["GameStateStage.__init__","BaseRepository.__init__"],["ViceAnalyzer.analyze_exchange","_convert_llm_signals"],["PromptBuilderStage.__init__","TokenValidator.__init__"],["LifeSimStage.__init__","__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceService.__init__"],["MemoryUpdateStage.__init__","MessageGenerator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ProfileRepository.__init__"],["MockStage.__init__","OnboardingHandler.__init__"],["EvidenceCollector.print_summary","JourneyReport.generate_report"],["get_nikita_agent_for_user","get_user_by_id"],["JobExecutionRepository.__init__","ElevenLabsConversationsClient.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingServerToolHandler.__init__"],["TelegramWebhookSimulator.send_message","_build_headers"],["VicePromptInjector.inject","VicePromptInjector._build_vice_section"],["UserRepository.set_boss_fight_status","PendingRegistrationRepository.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","OTPFlowE2ETest.__init__"],["EmotionalStage.__init__","ScoreAnalyzer.__init__"],["analyze_neediness","_get_cache_key"],["test_critical_stage_failure_fast_abort","StateStore.__init__"],["ReadyPromptRepository.__init__","ProfileCollector.__init__"],["DashboardPage.__init__","ConversationRepository.__init__"],["AuditLog.__init__","MemoryFactRepository.__init__"],["LoginPage.__init__","TouchpointScheduler.__init__"],["TokenEstimator.estimate_accurate","TokenCounter.count"],["VicePreferenceRepository.__init__","ScoringService.__init__"],["MemoryUpdateStage.__init__","Phase4GameState.__init__"],["EngagementStateMachine.update","EngagementStateMachine._apply_transition"],["InboundCallHandler._get_conversation_config_override","_generate_fallback_prompt"],["LifeSimulator.get_events_for_context","EventStore.get_recent_events"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ExperimentLoader.__init__"],["DailySummaryRepository.__init__","ConversationsE2ETest.__init__"],["MockStage.__init__","ElevenLabsConversationsClient.__init__"],["TestConversationPromptsEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["GameStateStage.__init__","NarrativeArcRepository.__init__"],["LoginPage.__init__","TokenCounter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PiiSafeFormatter.__init__"],["EmotionalStage.__init__","TokenBudgetManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EventGenerator.__init__"],["test_critical_stage_failure_fast_abort","DecayProcessor.__init__"],["TranscriptManager.extract_facts","_extract_facts_via_llm"],["ResponseTimer.calculate_delay_human_readable","ResponseTimer.calculate_delay"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VenueResearchService.__init__"],["main","build_tools_config"],["LoginPage.__init__","TouchpointStore.__init__"],["StageError.__init__","EvidenceCollector.__init__"],["FakeStage.__init__","ScoreHistoryRepository.__init__"],["MemoryUpdateStage.__init__","VoiceService.__init__"],["GeneratedPromptRepository.__init__","TouchpointStage.__init__"],["ElevenLabsConversationsClient.get_agent_config","ElevenLabsConversationsClient._headers"],["test_critical_stage_failure_fast_abort","MoodCalculator.__init__"],["TestSystemOverviewEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["AuditLog.__init__","TranscriptManager.__init__"],["HandoffManager.execute_handoff","_send_first_message"],["CommandHandler._handle_status","_get_chapter_name"],["FullJourneyOrchestrator.get_all_instructions","FullJourneyOrchestrator.get_phase3_instructions"],["ViceScorer.process_signals","_get_vice_repo"],["log_warning","log_error"],["ConversationThreadRepository.__init__","TokenCounter.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","PortalLoginE2ETest.step3_extract_magic_link"],["BaseRepository.update","BaseRepository.create"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TestVicePreferenceRepository.__init__"],["SummaryStage.__init__","TTSConfigService.__init__"],["ProfileCollector.is_complete","get_profile"],["FakeStage.__init__","SupabaseHelper.__init__"],["ReadyPromptRepository.__init__","TriggerDetector.__init__"],["ExtractionStage.__init__","GmailHelper.__init__"],["StageError.__init__","VoiceAgentConfig.__init__"],["EmotionalStage.__init__","MockResult.__init__"],["DailySummaryRepository.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestDailySummaryRepositoryContextEngineering.__init__"],["TestConversationListEndpoint.app","mock_admin_auth"],["ExtractionStage.__init__","JobExecutionRepository.__init__"],["SummaryStage.__init__","OTPVerificationHandler.__init__"],["UserNotFoundError.__init__","NarrativeArcSystem.__init__"],["MockAgentHelper.mock_get_agent","create_mock_deps"],["ProfileRepository.__init__","TouchpointStage.__init__"],["TestProcessingStatsEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["AuditLog.__init__","TokenValidator.__init__"],["BackstoryRepository.__init__","NikitaThoughtRepository.__init__"],["GeneratedPromptRepository.__init__","RecoveryManager.__init__"],["TestPipelineResult.test_succeeded","_make_ctx"],["ConversationsPage.__init__","ResolutionManager.__init__"],["NikitaThoughtRepository.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","Phase1Registration.__init__"],["DashboardPage.__init__","VoiceCallScorer.__init__"],["ConflictStage.__init__","FactExtractor.__init__"],["VicePreferenceRepository.__init__","TestUserMetricsRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConversationsPage.__init__"],["LifeSimulator.get_recent_events","get_recent_events"],["UserRepository.invalidate_voice_cache","_ChapterBehaviorsProxy.get"],["JobExecutionRepository.__init__","ScoringService.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramAuth.__init__"],["atomic","transfer_funds"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PsychologyMapper.__init__"],["HistoryLoader.load","HistoryLoader._convert_to_model_messages"],["BackstoryRepository.__init__","ResponseDelivery.__init__"],["TestErrorLogEndpoint.app","TestConversationListEndpoint.mock_admin_auth"],["DynamicVariablesBuilder.build_from_user","_get_day_of_week"],["ConversationThreadRepository.__init__","ServerToolHandler.__init__"],["ConversationsPage.__init__","ExperimentLoader.__init__"],["VenueResearchService._parse_search_results","_extract_vibe"],["EmotionalStage.__init__","RegistrationHandler.__init__"],["BaseStage.execute","FakeOkStage._run"],["PiiSafeFormatter.__init__","ConflictGenerator.__init__"],["MemoryFactRepository.__init__","ConversationRepository.__init__"],["PromptBuilderStage._truncate_prompt","_remove_section"],["EmotionalStage.__init__","LifeSimulator.__init__"],["ConflictStage.__init__","DeliveryResult.__init__"],["VoiceService.initiate_call","VoiceService._generate_session_id"],["ReadyPromptRepository.__init__","InMemoryCache.__init__"],["ProfileRepository.__init__","RecoveryManager.__init__"],["test_critical_stage_failure_fast_abort","InstructionSelector.__init__"],["NikitaThoughtRepository.__init__","TouchpointStore.__init__"],["StageError.__init__","OnboardingServerToolHandler.__init__"],["EmotionalStage.__init__","PreferenceConfigurator.__init__"],["UserRepository.__init__","GameStateStage.__init__"],["ConflictStage.__init__","SkipDecision.__init__"],["BackstoryRepository.__init__","FakeStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConfigLoader.__init__"],["TestEventStore.mock_session_factory","SupabaseMemory.__aenter__"],["TestUserListEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","UserMetricsRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","StateStore.__init__"],["LifeSimStage.__init__","EventStore.__init__"],["BackstoryRepository.create_from_scenario","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PackageStore.__init__"],["TestErrorLogEndpoint.app","TestUserDetailEndpoint.mock_get_session"],["InboundCallHandler.handle_incoming_call","InboundCallHandler._generate_signed_token"],["ConversationThreadRepository.__init__","PendingRegistrationRepository.__init__"],["BackstoryRepository.__init__","EntityManager.__init__"],["ConflictStage.__init__","AuditLog.__init__"],["SummaryStage.__init__","BreakupManager.__init__"],["mock_session","test_stage"],["VoiceAgentConfig.get_agent_config","_get_first_message"],["MockStage.__init__","ScoringService.__init__"],["PiiSafeFormatter.__init__","ConversationsPage.__init__"],["PiiSafeFormatter.__init__","LifeSimStage.__init__"],["HandoffManager.execute_handoff","_bootstrap_pipeline"],["EmotionalStage.__init__","MessageGenerator.__init__"],["StageError.__init__","ExperimentLoader.__init__"],["GameStateStage.__init__","SupabaseHelper.__init__"],["InboundCallHandler.handle_incoming_call","_generate_signed_token"],["ConversationsPage.__init__","OTPFlowE2ETest.__init__"],["StateComputer.compute","StateComputer._apply_conversation_deltas"],["RateLimiter.get_remaining","_ChapterBehaviorsProxy.get"],["DailySummaryRepository.__init__","MessageHandler.__init__"],["SummaryStage.__init__","MetaNikitaConfig.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConversationsPage.__init__"],["LifeEvent.model_dump_for_db","UserNarrativeArc.to_dict"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DecayProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConversationThreadRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LifeSimStage.__init__"],["PreferenceConfigurator.get_conversation_style_config","get_preferences"],["UserNotFoundError.__init__","ConversationRepository.__init__"],["PipelineOrchestrator.process","PipelineOrchestrator._get_stages"],["LifeSimStage.__init__","MockStage.__init__"],["WebhookTestData.create","SupabaseHelper.generate_test_email"],["get_supabase_client","_get_supabase_sync_client"],["PiiSafeFormatter.__init__","PackageStore.__init__"],["DashboardPage.__init__","Phase2Conversation.__init__"],["TestUserMemoryEndpoint.app","TestThreadsList.mock_admin_auth"],["ScoreHistoryRepository.__init__","ServerToolHandler.__init__"],["BaseRepository.get","BaseRepository.get"],["BackstoryRepository.__init__","ViceAnalyzer.__init__"],["LoginPage.__init__","TelegramAuth.__init__"],["JobExecutionRepository.__init__","TestUserMetricsRepository.__init__"],["BaseRepository.session","TestTimeoutE2E.session"],["MemoryFactRepository.__init__","LengthAdjuster.__init__"],["VicePreferenceRepository.__init__","StrategicSilence.__init__"],["PreferenceConfigurator.get_behavioral_config","get_darkness_config"],["MemoryUpdateStage.__init__","UserMetricsRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StageError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","NarrativeArcSystem.__init__"],["MockStage.__init__","VicePreferenceRepository.__init__"],["MemoryFactRepository.__init__","VoiceCallScorer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PackageStore.__init__"],["ScoreHistoryRepository.__init__","PendingRegistrationRepository.__init__"],["EmotionalStage.__init__","VoiceService.__init__"],["ConversationRepository.__init__","MessageSplitter.__init__"],["PromptBuilderStage.__init__","VoiceSessionManager.__init__"],["ReadyPromptRepository.__init__","MetaInstructionEngine.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationRepository.__init__"],["LifeSimStage.__init__","HandoffManager.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DashboardE2ETest.__init__"],["TestConversationPromptsEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["ReadyPromptRepository.__init__","BaseStage.__init__"],["ConversationThreadRepository.__init__","TelegramAuth.__init__"],["UserRepository.__init__","TokenBudgetManager.__init__"],["SummaryStage.__init__","GmailMCPClient.__init__"],["ReadyPromptRepository.__init__","TokenEstimator.__init__"],["LifeSimStage.__init__","SupabaseMemory.__init__"],["MissingVariableError.__init__","ServerToolHandler.__init__"],["GeneratedPromptRepository.__init__","PsychologyMapper.__init__"],["ConversationRepository.__init__","BasePage.__init__"],["EngagementStateRepository.__init__","NarrativeArcSystem.__init__"],["MockStage.__init__","TestUserMetricsRepository.__init__"],["SupabaseMemory.add_user_fact","add_fact"],["UserRepository.update_game_status","get"],["ConflictStore.reduce_severity","update_conflict"],["VicePreferenceRepository.__init__","ConflictGenerator.__init__"],["MetaNikitaConfig.get_agent_config","build_meta_nikita_config_override"],["VoiceCallVerifier.verify_all","VoiceCallVerifier._verify_neo4j"],["TestUserDetailEndpoint.app","TestUserListEndpoint.mock_get_session"],["MockAgentHelper.patch_generate_response","MockAgentHelper.patch_generate_response"],["BackstoryRepository.__init__","ConversationConfigBuilder.__init__"],["PreferenceConfigurator.get_behavioral_config","get_conversation_style_config"],["test_critical_stage_failure_fast_abort","GmailHelper.__init__"],["RecoveryManager.apply_recovery","RecoveryManager.apply_recovery"],["TestPipelineContext.test_defaults_zero_values","_make_ctx"],["DailySummaryRepository.__init__","VoiceCallVerifier.__init__"],["TelegramWebhookSimulator._build_message","_build_chat"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","InstructionSelector.__init__"],["MissingVariableError.__init__","PendingRegistrationRepository.__init__"],["GeneratedPromptRepository.__init__","UserRepository.__init__"],["OptimalFrequencyCalculator.get_bounds","OptimalFrequencyCalculator.get_tolerance_band"],["InMemoryCache.get","_cleanup_expired"],["LifeSimStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["test_critical_stage_failure_fast_abort","JobExecutionRepository.__init__"],["DashboardPage.__init__","ScoreAnalyzer.__init__"],["EmotionalStage.__init__","PiiSafeFormatter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BackstoryGeneratorService.__init__"],["UserRepository.__init__","MockResult.__init__"],["DailySummaryRepository.__init__","ConflictStore.__init__"],["ProfileRepository.__init__","PsychologyMapper.__init__"],["TouchpointStore.create","_to_pydantic"],["UserNotFoundError.__init__","VoiceCallScorer.__init__"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","handle_message"],["ClinginessDetector._response_time_signal","StateComputer._clamp"],["ScoreCalculator.calculate","calculate_composite"],["UserRepository.increment_boss_attempts","BaseRepository.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","CommandHandler.__init__"],["initiate_call","initiate_call"],["TestNikitaThoughtRepository.test_bulk_create_thoughts_creates_all","TestNikitaThoughtRepository.mock_create_thought"],["TestUserListEndpointAuditLogging.app","TestVoiceStats.mock_admin_auth"],["StateStore.get_state_history","StateStore._row_to_state"],["MissingVariableError.__init__","VenueCacheRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointScheduler.__init__"],["JobExecutionRepository.__init__","StrategicSilence.__init__"],["TestUserScoresEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["TouchpointStage.__init__","ServerToolHandler.__init__"],["ProfileRepository.__init__","UserRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DecayCalculator.__init__"],["TestLLMTimeoutHandling.test_llm_timeout_returns_graceful_error","slow_llm_call"],["MemoryFactRepository.__init__","Phase2Conversation.__init__"],["OnboardingStateRepository.get_or_create","PackageStore.get"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MemoryFactRepository.__init__"],["UserMetricsRepository.update_metrics","get_by_user_id"],["TextPatternProcessor.process","PipelineOrchestrator.process"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BasePage.__init__"],["UserRepository.__init__","RegistrationHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceCallScorer.__init__"],["TokenEstimator.estimate_accurate","TokenEstimator.estimate_fast"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TTSConfigService.__init__"],["StrategicSilence.apply_strategic_silence","StrategicSilence._compute_emotional_modifier"],["PromptBuilderStage.__init__","JourneyReport.__init__"],["UserRepository.__init__","LifeSimulator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenCounter.__init__"],["UserMetricsRepository.__init__","ResolutionManager.__init__"],["VoiceSessionManager.attempt_recovery","VoiceSessionManager.finalize_session"],["TestDashboardE2E.test_verification_instructions","ConversationsE2ETest.get_verification_instructions"],["ConversationRepository.__init__","PipelineOrchestrator.__init__"],["UserRepository.__init__","PreferenceConfigurator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DeliveryResult.__init__"],["AuditLog.__init__","VoiceSessionManager.__init__"],["OptimalFrequencyCalculator.get_bounds","get_optimal"],["TestAuditLogsEndpoint.app","TestConversationListEndpoint.mock_get_session"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TouchpointStore.__init__"],["TouchpointStage.__init__","PendingRegistrationRepository.__init__"],["BackstoryRepository.__init__","PromptBuilderStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","OTPVerificationHandler.__init__"],["TouchpointStage.__init__","MessageSplitter.__init__"],["DailySummaryRepository.__init__","ResponseTimer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SkipDecision.__init__"],["TestScorePersistence.test_score_changes_reflected_in_user","TestScorePersistence.track_commit"],["MockStage.__init__","StrategicSilence.__init__"],["ExtractionStage.__init__","NarrativeArcSystem.__init__"],["TestPromptBuilderStage.test_ac_3_3_5_generates_both_text_and_voice","_make_context"],["UserMetricsRepository.__init__","ExperimentLoader.__init__"],["JobExecutionRepository.__init__","ConflictGenerator.__init__"],["EscalationManager.check_escalation","EscalationManager._get_next_level"],["TestPipelineStatusEndpoint.app","mock_admin_auth"],["UserRepository.__init__","MessageGenerator.__init__"],["TestConversationListEndpoint.app","TestPipelineStatus.mock_admin_auth"],["NikitaThoughtRepository.__init__","EventStore.__init__"],["TouchpointStage.__init__","VenueCacheRepository.__init__"],["TestProcessingStatsEndpoint.app","TestUserListEndpoint.mock_get_session"],["SummaryStage.__init__","ConflictDetector.__init__"],["MemoryUpdateStage.__init__","MessageSplitter.__init__"],["create_pending_sql","SupabaseHelper.sql_create_pending"],["LifeEvent.model_dump_for_db","to_dict"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BreakupManager.__init__"],["TestPipelineStatusEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["OnboardingStateRepository.add_answer","UserRepository.get"],["run_manual_otp_test","step1_send_start"],["EmotionalStage.__init__","UserMetricsRepository.__init__"],["MemoryUpdateStage.__init__","BasePage.__init__"],["SummaryStage.__init__","Phase1Registration.__init__"],["LoginPage.__init__","MissingVariableError.__init__"],["UserNotFoundError.__init__","GameStateStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceOnboardingFlow.__init__"],["UserRepository.__init__","Phase4GameState.__init__"],["ConflictDetector.detect_conflict_state","detect_conflict_state"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LengthAdjuster.__init__"],["ReadyPromptRepository.__init__","TextPatternProcessor.__init__"],["ConversationsPage.__init__","ConversationRepository.__init__"],["MockStage.__init__","ConflictGenerator.__init__"],["ReadyPromptRepository.__init__","RateLimiter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TokenValidator.__init__"],["UserMetricsRepository.__init__","OTPFlowE2ETest.__init__"],["run_migrations_offline","get_url"],["run_manual_otp_test","OTPFlowE2ETest.step1_send_start"],["TestHaikuEnrichment.test_enrichment_preserves_factual_content","_make_context"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GmailHelper.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SessionDetector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","JobExecutionRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase2Conversation.__init__"],["ConflictStage.__init__","VenueResearchService.__init__"],["DashboardE2ETest.get_verification_instructions","PortalLoginE2ETest.step1_navigate_command"],["BackstoryRepository.__init__","TouchpointStage.__init__"],["TestConversationPromptsEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["UserRepository.__init__","VoiceService.__init__"],["ConversationThreadRepository.__init__","FactExtractor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MetaNikitaConfig.__init__"],["SummaryStage.__init__","ExtractionStage.__init__"],["LifeSimulator.get_current_mood","EventStore.get_recent_events"],["AuditLog.__init__","JourneyReport.__init__"],["LoginPage.__init__","SkipDecision.__init__"],["VoiceService.initiate_call","_get_tts_settings"],["TestUserListEndpointAuditLogging.app","TestVoiceConversationDetail.mock_admin_auth"],["GeneratedPromptRepository.__init__","DecayCalculator.__init__"],["BackstoryRepository.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ProfileRepository.__init__"],["TouchpointStore.mark_delivered","_to_pydantic"],["StageError.__init__","OTPVerificationHandler.__init__"],["TestConversationListEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["LifeSimStage.__init__","SocialCircleGenerator.__init__"],["GeneratedPromptRepository.__init__","TTSConfigService.__init__"],["ConversationThreadRepository.__init__","DeliveryResult.__init__"],["ConflictStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["UserNotFoundError.__init__","ScoreAnalyzer.__init__"],["TestConversationsE2E.test_verification_instructions","DashboardE2ETest.get_verification_instructions"],["_create_nikita_agent","add_chapter_behavior"],["ConversationRepository.__init__","EngagementStateMachine.__init__"],["ConversationThreadRepository.__init__","SkipDecision.__init__"],["BackstoryRepository.__init__","RecoveryManager.__init__"],["TestErrorLogEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["BackstoryRepository.__init__","StateComputer.__init__"],["SummaryStage.__init__","ConversationThreadRepository.__init__"],["BossStateMachine.process_pass","_get_user_repo"],["TestBossEncountersEndpoint.app","TestTextConversationList.mock_admin_auth"],["FakeStage.__init__","ServerToolHandler.__init__"],["PiiSafeFormatter.__init__","TelegramLinkRepository.__init__"],["VoiceOnboardingFlow.resume_onboarding","get_ready_confirmation_message"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","FullJourneyOrchestrator.__init__"],["TestUserListEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["VoiceService._load_context","ServerToolHandler._compute_nikita_energy"],["ProfileRepository.__init__","DecayCalculator.__init__"],["VoiceOnboardingFlow.process_phone_input","normalize_phone"],["MemoryUpdateStage.__init__","PipelineOrchestrator.__init__"],["InMemoryCache.incr","get"],["NikitaThoughtRepository.__init__","MissingVariableError.__init__"],["ConversationThreadRepository.__init__","AuditLog.__init__"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_energy"],["PortalLoginE2ETest.get_complete_flow_instructions","step3_build_gmail_query"],["TestAuditLogsEndpoint.app","TestAuditLogsEndpoint.mock_get_session"],["ConversationsPage.__init__","LengthAdjuster.__init__"],["VicePreferenceRepository.__init__","NikitaThoughtRepository.__init__"],["ProfileRepository.__init__","TTSConfigService.__init__"],["ConversationsPage.__init__","VoiceCallScorer.__init__"],["ConversationRepository.__init__","PortalLoginE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EventGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","GmailMCPClient.__init__"],["UserRepository.advance_chapter","InMemoryCache.get"],["TestConversationListEndpoint.app","TestTextStats.mock_admin_auth"],["DailySummaryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramAuth.__init__"],["GeneratedPromptRepository.__init__","MockStage.__init__"],["UserRepository.invalidate_voice_cache","TouchpointStore.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreAnalyzer.__init__"],["LoginPage.__init__","SessionDetector.__init__"],["FakeStage.__init__","PendingRegistrationRepository.__init__"],["SummaryStage.__init__","StageError.__init__"],["TestUserMemoryEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["ScoreHistoryRepository.__init__","FactExtractor.__init__"],["UserRepository.update_settings","BaseRepository.get"],["DashboardE2ETest.get_verification_instructions","ConversationsE2ETest.step4_db_query"],["SummaryStage.__init__","MockReadyPromptRepo.__init__"],["BossStateMachine.process_outcome","process_fail"],["StageError.__init__","BreakupManager.__init__"],["TestConversationPromptsEndpoint.app","TestUserListEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GameStateStage.__init__"],["TouchpointScheduler._evaluate_time_trigger","TouchpointScheduler._get_initiation_rate"],["ConflictStage.__init__","StateStore.__init__"],["PromptLoader.render","PromptLoader.load"],["TestEmotionalStage.test_emotional_passes_life_events","_make_context"],["ScoreHistoryRepository.__init__","ViceScorer.__init__"],["SummaryStage.__init__","DashboardE2ETest.__init__"],["OnboardingServerToolHandler.handle_request","OnboardingServerToolHandler.collect_profile"],["VicePreferenceRepository.__init__","FakeStage.__init__"],["build_dynamic_variables","DynamicVariablesBuilder.build_from_user"],["VoiceOnboardingFlow.should_start_onboarding","VoiceOnboardingFlow._get_user_onboarding_status"],["StageError.__init__","LengthAdjuster.__init__"],["BaseRepository.delete_by_id","PendingRegistrationRepository.get"],["FakeStage.__init__","VenueCacheRepository.__init__"],["UserNotFoundError.__init__","MockResult.__init__"],["ProfileRepository.__init__","MockStage.__init__"],["GeneratedPromptRepository.__init__","HandoffManager.__init__"],["test_critical_stage_failure_fast_abort","NarrativeArcSystem.__init__"],["VicePreferenceRepository.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EngagementStateMachine.__init__"],["ConversationRepository.__init__","ConversationsE2ETest.__init__"],["TestDashboardE2E.test_data_verification_logic","DashboardE2ETest.step4_verify_data"],["DashboardPage.__init__","PiiSafeFormatter.__init__"],["BackstoryRepository.create_from_scenario","UserRepository.get"],["EngagementStateRepository.__init__","GameStateStage.__init__"],["SupabaseMemory.add_fact","find_similar"],["VenueResearchService.research_venues","VenueResearchService._create_fallback_result"],["MissingVariableError.__init__","FactExtractor.__init__"],["ConflictStage.__init__","DecayProcessor.__init__"],["PromptBuilderStage.__init__","ConflictGenerator.__init__"],["ScoreHistoryRepository.__init__","AuditLog.__init__"],["RateLimiter.get_remaining","TouchpointStore.get"],["TestServerTools.test_server_tool_timeout_handling","TestServerTools.slow_operation"],["EmotionalStage.__init__","BasePage.__init__"],["TestSessionDetector.test_detect_and_queue_marks_all_found","mock_mark"],["OnboardingServerToolHandler.handle_request","complete_onboarding"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","OnboardingHandler.__init__"],["GameStateStage.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EventGenerator.__init__"],["SummaryStage.__init__","TouchpointEngine.__init__"],["NarrativeArcSystem.update_arc","ActiveArc.advance_stage"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramWebhookSimulator.__init__"],["MissingVariableError.__init__","ViceScorer.__init__"],["TestProcessingStatsEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PortalLoginE2ETest.__init__"],["DashboardPage.__init__","ViceService.__init__"],["ProfileRepository.__init__","HandoffManager.__init__"],["RateLimiter.get_remaining","RateLimiter._get_minute_key"],["PiiSafeFormatter.__init__","PunctuationProcessor.__init__"],["UserNotFoundError.__init__","RegistrationHandler.__init__"],["InboundCallHandler.handle_incoming_call","_get_conversation_config_override"],["VenueResearchService.research_venues","_is_expired"],["GeneratedPromptRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["JobExecutionRepository.__init__","NikitaThoughtRepository.__init__"],["UserRepository.__init__","UserMetricsRepository.__init__"],["TestUserMemoryEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["ConversationsPage.__init__","Phase2Conversation.__init__"],["PiiSafeFormatter.__init__","DailySummaryRepository.__init__"],["NikitaThoughtRepository.__init__","SessionDetector.__init__"],["deliver_due_touchpoints","deliver_due_touchpoints"],["ConversationRepository.__init__","TelegramBot.__init__"],["PromptBuilderStage.__init__","ConversationsPage.__init__"],["UserRepository.update_last_interaction","PendingRegistrationRepository.get"],["PromptBuilderStage.__init__","LifeSimStage.__init__"],["GameStateStage.__init__","PendingRegistrationRepository.__init__"],["TestBossEncountersEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["NarrativeArcManager.maybe_resolve_arcs","LifeSimulator.get_active_arcs"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._apply_meeting_adaptations"],["GameStateStage.__init__","MessageSplitter.__init__"],["VicePreferenceRepository.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ConfigLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PunctuationProcessor.__init__"],["PipelineContext.update_from_result","PipelineContext.record_stage_error"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_correct_amount_ch1","create_mock_user"],["MissingVariableError.__init__","AuditLog.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ElevenLabsConversationsClient.__init__"],["MemoryUpdateStage.__init__","EngagementStateMachine.__init__"],["SummaryStage.__init__","MemoryFactRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","Phase1Registration.__init__"],["VicePreferenceRepository.__init__","TelegramLinkRepository.__init__"],["SessionDetector.detect_and_queue","get_stale_sessions"],["DashboardPage.__init__","UserNotFoundError.__init__"],["NarrativeArcRepository._count_active_arcs","LifeSimulator.get_active_arcs"],["LifeSimStage.__init__","ProfileCollector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BackstoryRepository.__init__"],["OnboardingStateRepository.update_step","BaseRepository.get"],["MemoryFactRepository.__init__","CommandHandler.__init__"],["ProfileRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["EngagementStateRepository.__init__","ScoreAnalyzer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationsE2ETest.__init__"],["UserNotFoundError.__init__","MessageGenerator.__init__"],["RateLimiter.__init__","incr"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenBudgetManager.__init__"],["GameStateStage.__init__","VenueCacheRepository.__init__"],["MockStage.__init__","NikitaThoughtRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConflictDetector.__init__"],["JobExecutionRepository.__init__","FakeStage.__init__"],["EscalationManager.check_escalation","_get_escalation_threshold"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VenueResearchService.__init__"],["PromptBuilderStage.__init__","PackageStore.__init__"],["BossStateMachine.process_pass","BossStateMachine._get_user_repo"],["EmotionalStage.__init__","VoiceOnboardingFlow.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PromptLoader.__init__"],["TouchpointStage.__init__","ViceScorer.__init__"],["MemoryUpdateStage.__init__","PortalLoginE2ETest.__init__"],["JobExecutionRepository.__init__","EntityManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","SummaryStage.__init__"],["CalibrationCalculator._frequency_component","_clamp"],["InMemoryCache.get","InMemoryCache.get"],["TestAuditLogsEndpoint.app","TestConversationPromptsEndpoint.mock_admin_auth"],["TestBossEncountersEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["PiiSafeFormatter.__init__","ConfigLoader.__init__"],["BackstoryRepository.__init__","UserRepository.__init__"],["TestPipelineStatusEndpoint.app","TestPipelineStatus.mock_admin_auth"],["TestConversationListEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["ConflictStage.__init__","InstructionSelector.__init__"],["MockStage.__init__","ResponseDelivery.__init__"],["DailySummaryRepository.__init__","EvidenceCollector.__init__"],["MockAgentHelper.patch_generate_response","patch_generate_response"],["EmotionalStage.__init__","PipelineOrchestrator.__init__"],["TestUserScoresEndpoint.app","TestVoiceStats.mock_admin_auth"],["ExtractionStage.__init__","GameStateStage.__init__"],["EngagementStateRepository.__init__","TokenBudgetManager.__init__"],["ScoringService.score_interaction","ScoringService._log_history"],["SummaryStage.__init__","TranscriptManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EmojiProcessor.__init__"],["LoginPage.__init__","TelegramWebhookSimulator.__init__"],["DashboardPage.__init__","UserMetricsRepository.__init__"],["VicePreferenceRepository.__init__","ConversationConfigBuilder.__init__"],["TouchpointEngine._evaluate_silence","TouchpointEngine._check_conflict_active"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MockResult.__init__"],["TestErrorLogEndpoint.app","TestElevenLabsList.mock_admin_auth"],["MockStage.__init__","FakeStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ConfigLoader.__init__"],["TouchpointStage.__init__","AuditLog.__init__"],["NikitaThoughtRepository.__init__","SocialCircleGenerator.__init__"],["TestSystemOverviewEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","NarrativeArcSystem.__init__"],["MockStage.__init__","EntityManager.__init__"],["NarrativeArcManager.get_active_arcs","NarrativeArcManager.get_active_arcs"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DatabaseRateLimiter.__init__"],["DailySummaryRepository.__init__","VoiceAgentConfig.__init__"],["ConversationRepository.__init__","MessageHandler.__init__"],["MemoryUpdateStage.__init__","ConversationsE2ETest.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","HistoryLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ExtractionStage.__init__"],["MemoryFactRepository.__init__","ViceService.__init__"],["OnboardingServerToolHandler.handle_request","end_call"],["SummaryStage.__init__","TokenValidator.__init__"],["JobExecutionRepository.__init__","ViceAnalyzer.__init__"],["EngagementStateRepository.__init__","MockResult.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConversationThreadRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase3Portal.__init__"],["AuditLog.__init__","ConversationsPage.__init__"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._apply_job_adaptations"],["UserMetricsRepository.__init__","BreakupManager.__init__"],["AuditLog.__init__","LifeSimStage.__init__"],["TestErrorLogEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","RegistrationHandler.__init__"],["SituationDetector._build_metadata","SituationDetector._is_long_gap"],["JobExecutionRepository.__init__","TelegramLinkRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LifeSimulator.__init__"],["EmotionalStage.__init__","FullJourneyOrchestrator.__init__"],["TestConversationPromptsEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["TelegramWebhookSimulator.send_command","TelegramWebhookSimulator._build_command_update"],["VicePreferenceRepository.__init__","MockMappings.__init__"],["UserMetricsRepository.__init__","LengthAdjuster.__init__"],["TTSConfigService.get_final_settings","TTSConfigService.get_mood_modulation"],["LoginPage.__init__","VenueResearchService.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PreferenceConfigurator.__init__"],["BaseRepository.session","PendingRegistrationRepository.session"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","InboundCallHandler.__init__"],["MessageGenerator._load_template","MessageGenerator._get_default_template"],["ExtractionStage.__init__","ScoreAnalyzer.__init__"],["LoginPage.__init__","PromptLoader.__init__"],["ReadyPromptRepository.__init__","TestVicePreferenceRepository.__init__"],["TestPipelineStatusEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StageError.__init__"],["TestOTPFlowIntegration.test_otp_flow_steps_1_and_2","OTPFlowE2ETest.step3_build_otp_search_query"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SkipDecision.__init__"],["VicePreferenceRepository.__init__","DailySummaryRepository.__init__"],["LifeEvent.model_dump_for_db","VerificationReport.to_dict"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","StateStore.__init__"],["MemoryFactRepository.__init__","UserNotFoundError.__init__"],["LifeSimStage.__init__","ConflictStage.__init__"],["VicePreferenceRepository.__init__","PromptBuilderStage.__init__"],["LifeSimulator.get_recent_events","EventStore.get_recent_events"],["MemoryUpdateStage.__init__","TelegramBot.__init__"],["UserNotFoundError.__init__","PiiSafeFormatter.__init__"],["MockStage.__init__","ViceAnalyzer.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","SocialCircleRepository.__init__"],["ExperimentLoader._load_experiment_with_inheritance","_get_experiment_path"],["AuditLog.__init__","PackageStore.__init__"],["LifeSimStage.__init__","InMemoryCache.__init__"],["EngagementStateRepository.__init__","RegistrationHandler.__init__"],["DailySummaryRepository.__init__","OnboardingServerToolHandler.__init__"],["VoiceOnboardingFlow.is_already_onboarded","_get_user_onboarding_status"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","JourneyReport.__init__"],["NikitaThoughtRepository.__init__","TelegramWebhookSimulator.__init__"],["count_tokens","TokenValidator.count_tokens"],["LoginPage.__init__","EmojiProcessor.__init__"],["UserRepository.__init__","MessageSplitter.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DashboardE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageGenerator.__init__"],["StageError.__init__","Phase1Registration.__init__"],["ConversationThreadRepository.__init__","VenueResearchService.__init__"],["EngagementStateRepository.__init__","PreferenceConfigurator.__init__"],["GeneratedPromptRepository.__init__","ConflictDetector.__init__"],["ScoreHistoryRepository.__init__","LoginPage.__init__"],["DatabaseRateLimiter.get_remaining","DatabaseRateLimiter._get_minute_window"],["ExtractionStage.__init__","TokenBudgetManager.__init__"],["JobExecutionRepository.__init__","ConversationConfigBuilder.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NarrativeArcManager.__init__"],["UserRepository.__init__","BasePage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MessageHandler.__init__"],["UserMetricsRepository.calculate_composite","ProfileRepository.get_by_user_id"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","DecayProcessor.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MockReadyPromptRepo.__init__"],["TelegramLinkRepository.delete","PackageStore.delete"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PiiSafeFormatter.__init__"],["DailySummaryRepository.__init__","ExperimentLoader.__init__"],["TestPipelineStatusEndpoint.app","TestTextStats.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase4GameState.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MoodCalculator.__init__"],["EngagementStateRepository.__init__","MessageGenerator.__init__"],["TestWebhookNoneContentHandling.test_webhook_handles_none_content_in_transcript","create_webhook_signature"],["ConversationRepository.__init__","VoiceCallVerifier.__init__"],["EmotionalStage.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationRepository.__init__"],["FakeStage.__init__","FactExtractor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenCounter.__init__"],["ConflictStage.__init__","GmailHelper.__init__"],["ConversationThreadRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestPipelineContext.test_create_minimal","_make_ctx"],["ProfileRepository.__init__","ConflictDetector.__init__"],["TestUserScoresEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["TestAuditLogsEndpoint.app","TestBossEncountersEndpoint.mock_get_session"],["ConversationRepository.__init__","ConflictStore.__init__"],["ConflictStage.__init__","JobExecutionRepository.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector._get_severity"],["MessageSplitter._find_split_points","_merge_short_sentences"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TouchpointStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SessionDetector.__init__"],["UserNotFoundError.__init__","UserNotFoundError.__init__"],["ExtractionStage.__init__","MockResult.__init__"],["MockStage.__init__","ConversationConfigBuilder.__init__"],["FakeStage.__init__","ViceScorer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceService.__init__"],["MissingVariableError.__init__","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","CommandHandler.__init__"],["NikitaThoughtRepository.__init__","VenueResearchService.__init__"],["PiiSafeFormatter.__init__","TouchpointScheduler.__init__"],["TestWebhookHandler.test_unknown_event_type_handled","create_webhook_signature"],["UserRepository.increment_boss_attempts","OnboardingStateRepository.get"],["EmotionalStage.__init__","PortalLoginE2ETest.__init__"],["BackstoryRepository.__init__","DecayCalculator.__init__"],["GeneratedPromptRepository.__init__","DatabaseRateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceService.__init__"],["NikitaThoughtRepository.__init__","PromptLoader.__init__"],["JobExecutionRepository.__init__","MockMappings.__init__"],["ConversationsPage.__init__","StageError.__init__"],["LoginPage.__init__","DashboardPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointEngine.__init__"],["UserMetricsRepository.__init__","Phase2Conversation.__init__"],["BackstoryRepository.__init__","TTSConfigService.__init__"],["JobExecutionRepository.__init__","DailySummaryRepository.__init__"],["LoginPage.__init__","SocialCircleRepository.__init__"],["MemoryUpdateStage.__init__","MessageHandler.__init__"],["JobExecutionRepository.__init__","PromptBuilderStage.__init__"],["SupabaseMemory.add_user_fact","MemoryFactRepository.add_fact"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointScheduler.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator.get_today_events"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MemoryFactRepository.__init__"],["StageError.__init__","ConversationThreadRepository.__init__"],["VicePreferenceRepository.__init__","_ProfileFromAnswers.__init__"],["FakeStage.__init__","AuditLog.__init__"],["NikitaThoughtRepository.__init__","EmojiProcessor.__init__"],["DashboardPage.__init__","BasePage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserNotFoundError.__init__"],["ScoreHistoryRepository.__init__","OnboardingStateRepository.__init__"],["LifeSimStage.__init__","MetaInstructionEngine.__init__"],["ExtractionStage.__init__","RegistrationHandler.__init__"],["PiiSafeFormatter.__init__","TouchpointStore.__init__"],["TestOTPFlowSteps.test_step5_verification_parsing","step5_verify_result"],["UserNotFoundError.__init__","UserMetricsRepository.__init__"],["test_critical_stage_failure_fast_abort","GameStateStage.__init__"],["EngagementStateRepository.__init__","VoiceService.__init__"],["LifeSimStage.__init__","BaseStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MemoryUpdateStage.__init__"],["ExtractionStage.__init__","LifeSimulator.__init__"],["GeneratedPromptRepository.__init__","InboundCallHandler.__init__"],["ProfileRepository.__init__","DatabaseRateLimiter.__init__"],["VoiceService.end_call","end_session"],["EvidenceCollector.add_screenshot","log"],["ConversationThreadRepository.__init__","StateStore.__init__"],["LifeSimStage.__init__","TokenEstimator.__init__"],["LoginPage.__init__","NarrativeArcManager.__init__"],["UserRepository.__init__","PipelineOrchestrator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ReadyPromptRepository.__init__"],["ExtractionStage.__init__","PreferenceConfigurator.__init__"],["ConversationRepository.__init__","ResponseTimer.__init__"],["LoginPage.__init__","DecayProcessor.__init__"],["MockStage.__init__","MockMappings.__init__"],["EmotionalStage.__init__","BackstoryRepository.__init__"],["build_system_prompt","_try_load_ready_prompt"],["VicePreferenceRepository.__init__","RecoveryManager.__init__"],["EmotionalStage.__init__","ConversationsE2ETest.__init__"],["DailySummaryRepository.get_for_date","DailySummaryRepository.get_by_date"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PiiSafeFormatter.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MemoryFactRepository.__init__"],["VicePreferenceRepository.__init__","StateComputer.__init__"],["StageError.__init__","StageError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TriggerDetector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TouchpointStore.__init__"],["TouchpointStage.__init__","LoginPage.__init__"],["ScoreHistoryRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ScoreCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictStore.__init__"],["LoginPage.__init__","MoodCalculator.__init__"],["MockStage.__init__","PromptBuilderStage.__init__"],["BackstoryRepository.__init__","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceCallScorer.__init__"],["EmotionalStage.__init__","SummaryStage.__init__"],["MissingVariableError.__init__","OnboardingStateRepository.__init__"],["ExtractionStage.__init__","MessageGenerator.__init__"],["ProfileRepository.__init__","InboundCallHandler.__init__"],["ConversationThreadRepository.__init__","DecayProcessor.__init__"],["StageError.__init__","DashboardE2ETest.__init__"],["BaseRepository.delete","BaseRepository.delete"],["OnboardingServerToolHandler.complete_onboarding","_get_or_create_profile"],["GameStateStage.__init__","ViceScorer.__init__"],["MemoryFactRepository.__init__","OnboardingHandler.__init__"],["ConversationsPage.__init__","CommandHandler.__init__"],["EngagementStateRepository.__init__","PiiSafeFormatter.__init__"],["GeneratedPromptRepository.__init__","MockReadyPromptRepo.__init__"],["VoiceService.initiate_call","ConversationConfigBuilder._get_first_message"],["TouchpointStage.__init__","VoiceCallVerifier.__init__"],["HistoryLoader.load","_estimate_tokens"],["ConflictDetector.check_escalation","_get_trigger_reason"],["TestPortalLoginFlow.test_flow_instructions_generation","TouchpointStore.create"],["UserRepository.invalidate_voice_cache","UserRepository.get"],["TestNikitaThoughtRepository.test_create_missing_him_thought_72h","mock_create_thought"],["LoginPage.__init__","ScheduledEventRepository.__init__"],["DashboardPage.__init__","VoiceOnboardingFlow.__init__"],["ConflictDetector.can_transition_to","_can_transition"],["NikitaThoughtRepository.__init__","DashboardPage.__init__"],["PackageStore.exists","OnboardingStateRepository.get"],["PromptBuilderStage.__init__","TelegramLinkRepository.__init__"],["EmotionalStage.__init__","TelegramBot.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TranscriptManager.__init__"],["BackstoryRepository.__init__","HandoffManager.__init__"],["ReadyPromptRepository.__init__","BaseRepository.__init__"],["MissingVariableError.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["test_critical_stage_failure_fast_abort","ScoreAnalyzer.__init__"],["NikitaThoughtRepository.__init__","SocialCircleRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TokenValidator.__init__"],["PiiSafeFormatter.__init__","__init__"],["TestPipelineContext.test_record_stage_timing","_make_ctx"],["BackstoryRepository.__init__","SupabaseMemory.__init__"],["GeneratedPromptRepository.__init__","ProfileCollector.__init__"],["MemoryUpdateStage.__init__","VoiceCallVerifier.__init__"],["GameStateStage.__init__","AuditLog.__init__"],["EngagementStateMachine.update","EngagementStateMachine._update_counters"],["TestPipelineStatusEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["EmotionalStage.__init__","HistoryLoader.__init__"],["TestConversationListEndpoint.app","TestUserListEndpoint.mock_get_session"],["VicePromptInjector.inject","inject"],["JobExecutionRepository.__init__","_ProfileFromAnswers.__init__"],["ProfileRepository.__init__","MockReadyPromptRepo.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ResponseTimer.__init__"],["MemoryFactRepository.__init__","ElevenLabsConversationsClient.__init__"],["MemoryUpdateStage.__init__","ConflictStore.__init__"],["ReadyPromptRepository.__init__","BackstoryGeneratorService.__init__"],["LoginPage.__init__","MemoryUpdateStage.__init__"],["SummaryStage.__init__","VoiceSessionManager.__init__"],["EmotionalStage.__init__","Phase3Portal.__init__"],["NikitaThoughtRepository.__init__","NarrativeArcManager.__init__"],["DashboardPage.__init__","ScoringService.__init__"],["StageError.__init__","CommandHandler.__init__"],["ProfileRepository.update_from_onboarding","create_profile"],["LoginPage.__init__","ReadyPromptRepository.__init__"],["TestUserDetailEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["ExtractionStage.__init__","VoiceService.__init__"],["test_critical_stage_failure_fast_abort","TokenBudgetManager.__init__"],["GeneratedPromptRepository.__init__","TouchpointEngine.__init__"],["TouchpointStage.__init__","OnboardingStateRepository.__init__"],["SupabaseHelper.verify_registration_from_result","SupabaseHelper.parse_mcp_result"],["PortalLoginE2ETest.get_complete_flow_instructions","step5_wait_for_dashboard_js"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramAuth.__init__"],["BackstoryRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["JobExecutionRepository.__init__","RecoveryManager.__init__"],["NikitaThoughtRepository.__init__","MoodCalculator.__init__"],["ProfileRepository.__init__","ProfileCollector.__init__"],["JobExecutionRepository.__init__","StateComputer.__init__"],["RateLimiter.get_remaining","UserRepository.get"],["ReadyPromptRepository.__init__","NarrativeArcRepository.__init__"],["ConversationsPage.__init__","ViceService.__init__"],["StageError.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","UserMetricsRepository.__init__"],["MockStage.__init__","_ProfileFromAnswers.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictGenerator.__init__"],["ConversationThreadRepository.__init__","InstructionSelector.__init__"],["UserRepository.__init__","EngagementStateMachine.__init__"],["HandoffManager.execute_handoff_with_voice_callback","_extract_location_from_timezone"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GameStateStage.__init__"],["ProfileRepository.__init__","TouchpointEngine.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","BackstoryRepository.create"],["DashboardPage.__init__","FullJourneyOrchestrator.__init__"],["test_critical_stage_failure_fast_abort","MockResult.__init__"],["ReadyPromptRepository.__init__","EscalationManager.__init__"],["TestGameStateStage.test_game_state_with_extraction","_make_context"],["GeneratedPromptRepository.__init__","TriggerDetector.__init__"],["NikitaThoughtRepository.__init__","ScheduledEventRepository.__init__"],["VicePreferenceRepository.__init__","EmotionalStage.__init__"],["ExtractionStage.__init__","PiiSafeFormatter.__init__"],["MockStage.__init__","RecoveryManager.__init__"],["MemoryUpdateStage.__init__","ResponseTimer.__init__"],["DashboardPage.__init__","VicePreferenceRepository.__init__"],["MockStage.__init__","StateComputer.__init__"],["EngagementStateRepository.__init__","UserMetricsRepository.__init__"],["EmotionalStage.__init__","MessageHandler.__init__"],["_ChapterBehaviorsProxy.get","BaseRepository.get"],["LifeSimStage.__init__","TextPatternProcessor.__init__"],["ConversationsPage.__init__","UserNotFoundError.__init__"],["TestUserListEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["NarrativeArcManager.maybe_resolve_arcs","NarrativeArcRepository.resolve_arc"],["ConversationRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["OnboardingHandler._handle_venue_research_step","_present_scenarios"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","LifeSimStage.__init__"],["UserRepository.__init__","PortalLoginE2ETest.__init__"],["LifeSimStage.__init__","RateLimiter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VenueResearchService.__init__"],["PromptBuilderStage.__init__","PunctuationProcessor.__init__"],["AuditLog.__init__","TelegramLinkRepository.__init__"],["PendingRegistrationRepository.cleanup_expired","PendingRegistrationRepository.delete"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PromptLoader.__init__"],["ConflictStore.get_conflict_summary","ConflictStore.get_active_conflict"],["UserNotFoundError.__init__","BasePage.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator.get_recent_events"],["NikitaThoughtRepository.__init__","MemoryUpdateStage.__init__"],["PromptBuilderStage.__init__","DailySummaryRepository.__init__"],["ConversationConfigBuilder._generate_system_prompt","ConversationConfigBuilder._generate_fallback_prompt"],["load_message_history","HistoryLoader.load"],["FakeStage.__init__","LoginPage.__init__"],["ProfileRepository.__init__","TriggerDetector.__init__"],["NikitaThoughtRepository.__init__","ReadyPromptRepository.__init__"],["DashboardPage.__init__","TestUserMetricsRepository.__init__"],["test_critical_stage_failure_fast_abort","RegistrationHandler.__init__"],["UserRepository.update_settings","OnboardingStateRepository.get"],["EventStore.get_active_arcs","EventStore._row_to_arc"],["SummaryStage.__init__","JourneyReport.__init__"],["VicePreferenceRepository.__init__","UserRepository.__init__"],["TestLLMAnalysisFunctions.test_ac_2_3_6_results_cached_per_session","TestLLMAnalysisFunctions.mock_llm"],["GeneratedPromptRepository.__init__","TranscriptManager.__init__"],["run_manual_otp_test","TouchpointStore.create"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EmojiProcessor.__init__"],["rich_context","test_prompt_generation"],["PendingRegistrationRepository.get_email","BaseRepository.get"],["test_critical_stage_failure_fast_abort","PreferenceConfigurator.__init__"],["TestPipelineResult.test_failed_zero_stages","_make_ctx"],["UserMetricsRepository.__init__","StageError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreAnalyzer.__init__"],["DailySummaryRepository.__init__","OTPVerificationHandler.__init__"],["StageError.__init__","TokenValidator.__init__"],["ConflictStage.__init__","NarrativeArcSystem.__init__"],["HandoffManager.transition","_get_user_telegram_id"],["ScoreHistoryRepository.__init__","InstructionSelector.__init__"],["MemoryFactRepository.__init__","ScoringService.__init__"],["test_context","PortalLoginTestContext.create"],["VicePreferenceRepository.__init__","__init__"],["UserRepository.__init__","ConversationsE2ETest.__init__"],["NarrativeArcManager.maybe_create_arc","NarrativeArcRepository.get_active_arcs"],["MessageSplitter._find_split_points","MessageSplitter._merge_short_sentences"],["BaseRepository.session","VenueCacheRepository.session"],["ReadyPromptRepository.__init__","ScoreHistoryRepository.__init__"],["test_critical_stage_failure_fast_abort","MessageGenerator.__init__"],["ProfileRepository.__init__","TranscriptManager.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","OnboardingHandler.__init__"],["PiiSafeFormatter.__init__","EventStore.__init__"],["PromptBuilderStage.__init__","ConfigLoader.__init__"],["TestUserListEndpoint.app","mock_get_session"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TestDailySummaryRepositoryExtras.__init__"],["UserNotFoundError.__init__","VoiceOnboardingFlow.__init__"],["JobExecutionRepository.__init__","EmotionalStage.__init__"],["TestTypingIndicators.test_no_periodic_typing_for_short_delays","TestTypingIndicators.mock_sleep"],["NarrativeArcSystem.update_arc","UserNarrativeArc.should_advance"],["ReadyPromptRepository.__init__","ProfileRepository.__init__"],["MissingVariableError.__init__","InstructionSelector.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EventStore.__init__"],["TestUserListEndpointAuditLogging.app","TestThreadsList.mock_admin_auth"],["TouchpointStore.delete","TelegramLinkRepository.delete"],["ExtractionStage.__init__","UserMetricsRepository.__init__"],["EmotionalStage.__init__","ScoreCalculator.__init__"],["EmotionalStage.__init__","ConflictStore.__init__"],["UserRepository.__init__","TelegramBot.__init__"],["UserRepository.is_onboarded","PendingRegistrationRepository.get"],["FakeStage.__init__","OnboardingStateRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","StateStore.__init__"],["ConversationThreadRepository.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DashboardPage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GeneratedPromptRepository.__init__"],["BackstoryGeneratorService.generate_scenarios","_create_fallback_scenarios"],["TestAuditLogsEndpoint.app","TestPipelineStatus.mock_admin_auth"],["MemoryFactRepository.__init__","VicePreferenceRepository.__init__"],["GameStateStage.__init__","LoginPage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ElevenLabsConversationsClient.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SocialCircleRepository.__init__"],["DailySummaryRepository.__init__","BreakupManager.__init__"],["ConversationThreadRepository.__init__","JobExecutionRepository.__init__"],["AuditLog.__init__","PunctuationProcessor.__init__"],["run_manual_otp_test","BackstoryRepository.create"],["NeglectDetector.detect","UserMetricsRepository._clamp"],["UserMetricsRepository.__init__","CommandHandler.__init__"],["TestConversationListEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["UserRepository.__init__","HistoryLoader.__init__"],["DashboardPage.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MockResult.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceOnboardingFlow.__init__"],["DashboardPage.__init__","StrategicSilence.__init__"],["AuditLog.__init__","DailySummaryRepository.__init__"],["MockStage.__init__","EmotionalStage.__init__"],["DashboardPage.__init__","ConversationsE2ETest.__init__"],["InboundCallHandler.handle_incoming_call","_get_default_dynamic_variables"],["TestAuditLogsEndpoint.app","TestVoiceStats.mock_admin_auth"],["JobExecutionRepository.__init__","UserRepository.__init__"],["VoiceOnboardingFlow.process_phone_input","VoiceOnboardingFlow.normalize_phone"],["test_critical_stage_failure_fast_abort","VoiceService.__init__"],["DailySummaryRepository.__init__","LengthAdjuster.__init__"],["OnboardingStateRepository.update_step","OnboardingStateRepository.get"],["FakeStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","NarrativeArcManager.__init__"],["GeneratedPromptRepository.__init__","MetaInstructionEngine.__init__"],["TestBossEncountersEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler._get_initiation_rate"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","FactExtractor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","DecayProcessor.__init__"],["MemoryFactRepository.__init__","TestUserMetricsRepository.__init__"],["GameStateStage.__init__","VoiceCallVerifier.__init__"],["MemoryUpdateStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["ReadyPromptRepository.__init__","EventGenerator.__init__"],["GeneratedPromptRepository.__init__","BaseStage.__init__"],["DashboardPage.__init__","SummaryStage.__init__"],["JobExecutionRepository.__init__","__init__"],["DashboardPage.__init__","EngagementStateRepository.__init__"],["GeneratedPromptRepository.__init__","TokenEstimator.__init__"],["ConflictStage.__init__","ConversationRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MoodCalculator.__init__"],["ConversationRepository.__init__","EvidenceCollector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoringService.__init__"],["ConversationsPage.__init__","OnboardingHandler.__init__"],["TestProcessingStatsEndpoint.app","TestTextConversationList.mock_admin_auth"],["UserNotFoundError.__init__","FullJourneyOrchestrator.__init__"],["EmotionalStage.__init__","ResponseTimer.__init__"],["InboundCallHandler._generate_fallback_prompt","InboundCallHandler._get_relationship_score"],["DynamicVariablesBuilder.build_from_context","_compute_nikita_activity"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DeliveryResult.__init__"],["ElevenLabsConversationsClient.get_latest_conversation","get_conversation"],["TestUserMemoryEndpoint.app","TestThoughtsList.mock_admin_auth"],["MockStage.__init__","UserRepository.__init__"],["EngagementStateRepository.__init__","BasePage.__init__"],["ScoreCalculator.calculate","UserMetricsRepository.calculate_composite"],["ProfileRepository.__init__","MetaInstructionEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SkipDecision.__init__"],["BackstoryRepository.__init__","DatabaseRateLimiter.__init__"],["UserNotFoundError.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PreferenceConfigurator.__init__"],["test_critical_stage_failure_fast_abort","PiiSafeFormatter.__init__"],["AuditLog.__init__","ConfigLoader.__init__"],["ProfileRepository.__init__","BaseStage.__init__"],["PiiSafeFormatter.__init__","MissingVariableError.__init__"],["PackageStore.cleanup_expired","PendingRegistrationRepository.delete"],["TestUserDetailEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["estimate_tokens_fast","estimate_fast"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VoiceSessionManager.__init__"],["ScoreHistoryRepository.__init__","GmailHelper.__init__"],["ProfileRepository.__init__","TokenEstimator.__init__"],["TestAuditLogsEndpoint.app","TestAuditLogsEndpoint.mock_admin_auth"],["ConversationRepository.__init__","VoiceAgentConfig.__init__"],["ConversationThreadRepository.get_threads_for_prompt","ConversationThreadRepository.get_open_threads"],["TestTurnScoring.test_score_turn_respects_chapter_weights","TestTurnScoring.capture_context"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ScheduledEventRepository.__init__"],["DashboardPage.__init__","HistoryLoader.__init__"],["ScoreHistoryRepository.__init__","JobExecutionRepository.__init__"],["UserMetricsRepository.__init__","ViceService.__init__"],["UserRepository.__init__","MessageHandler.__init__"],["GameStateStage.__init__","OnboardingStateRepository.__init__"],["LoginPage.__init__","GeneratedPromptRepository.__init__"],["TestPipelineStatusEndpoint.app","TestUserListEndpoint.mock_get_session"],["CalibrationCalculator.compute","CalibrationCalculator._content_component"],["ConversationsPage.__init__","ElevenLabsConversationsClient.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","FullJourneyOrchestrator.__init__"],["DashboardPage.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MissingVariableError.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MessageGenerator.__init__"],["StageError.__init__","OnboardingHandler.__init__"],["TouchpointStore.mark_skipped","TouchpointStore._to_pydantic"],["PendingRegistrationRepository.cleanup_expired","TouchpointStore.delete"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceOnboardingFlow.__init__"],["ConflictStore.escalate_conflict","ConflictStore.update_conflict"],["BackstoryRepository.__init__","InboundCallHandler.__init__"],["BaseRepository.delete","PackageStore.delete"],["count_tokens","count_tokens"],["DecayProcessor.process_user","DecayProcessor._log_decay_event"],["UserMetricsRepository.calculate_composite","get_by_user_id"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VicePreferenceRepository.__init__"],["MessageHandler.handle","OTPVerificationHandler.handle"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MemoryUpdateStage.__init__"],["GameStateStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ReadyPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PipelineOrchestrator.__init__"],["TestBossEncountersEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["MissingVariableError.__init__","GmailHelper.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","EvidenceCollector.__init__"],["UserMetricsRepository.__init__","UserNotFoundError.__init__"],["TestUserDetailEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["TestUserMemoryEndpoint.app","mock_admin_auth"],["PromptBuilderStage.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","FakeStage.__init__"],["MissingVariableError.__init__","JobExecutionRepository.__init__"],["MemoryFactRepository.__init__","StrategicSilence.__init__"],["EngagementStateRepository.__init__","VoiceOnboardingFlow.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","SessionDetector.__init__"],["ConversationRepository.__init__","OnboardingServerToolHandler.__init__"],["ConflictStage.__init__","VoiceCallScorer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestUserMetricsRepository.__init__"],["StageError.__init__","ElevenLabsConversationsClient.__init__"],["TestUserMemoryEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["TestNikitaThoughtRepository.test_create_thought_valid_types","mock_create"],["VicePreferenceRepository.__init__","MockStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","NarrativeArcSystem.__init__"],["ScoreCalculator.calculate","_detect_events"],["SummaryStage.__init__","ConflictGenerator.__init__"],["BackstoryRepository.__init__","MockReadyPromptRepo.__init__"],["ScoreHistoryRepository.__init__","ResolutionManager.__init__"],["EngagementStateRepository.__init__","PipelineOrchestrator.__init__"],["UserNotFoundError.__init__","PortalLoginE2ETest.__init__"],["BreakupManager.check_and_process","BreakupManager.trigger_breakup"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","VoiceAgentConfig.__init__"],["MemoryFactRepository.__init__","EngagementStateRepository.__init__"],["TestEmotionalStage.test_emotional_passes_life_events","_mock_session"],["PromptBuilderStage.__init__","TouchpointStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceService.__init__"],["ExtractionStage.__init__","BasePage.__init__"],["SupabaseMemory.search_memory","search"],["ConversationRepository.__init__","ExperimentLoader.__init__"],["PromptBuilderStage._generate_prompt","PromptBuilderStage._count_tokens"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","JourneyReport.__init__"],["NikitaThoughtRepository.__init__","GeneratedPromptRepository.__init__"],["BackstoryRepository.__init__","ProfileCollector.__init__"],["TestProcessingStatsEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["test_critical_stage_failure_fast_abort","UserMetricsRepository.__init__"],["SummaryStage.__init__","ConversationsPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","FullJourneyOrchestrator.__init__"],["PiiSafeFormatter.__init__","SessionDetector.__init__"],["UserRepository.__init__","VoiceCallVerifier.__init__"],["ConversationConfigBuilder.build_config","_generate_system_prompt"],["EventDeliveryHandler.deliver","EventDeliveryHandler._deliver_telegram_event"],["SummaryStage.__init__","LifeSimStage.__init__"],["UserRepository.is_onboarded","InMemoryCache.get"],["VicePreferenceRepository.__init__","HandoffManager.__init__"],["TouchpointEngine._deliver_single","TouchpointEngine._send_telegram_message"],["TouchpointStage.__init__","GmailHelper.__init__"],["MemoryUpdateStage.__init__","EvidenceCollector.__init__"],["TestOTPFlowSteps.test_step1_start_command","step1_send_start"],["UserRepository.update_onboarding_status","_ChapterBehaviorsProxy.get"],["UserRepository.__init__","ScoreCalculator.__init__"],["UserRepository.__init__","ConflictStore.__init__"],["MissingVariableError.__init__","ResolutionManager.__init__"],["UserNotFoundError.__init__","BackstoryRepository.__init__"],["VicePreferenceRepository.__init__","SupabaseMemory.__init__"],["extract_magic_link_from_html","GmailHelper._extract_magic_link"],["TestConversationPromptsEndpoint.app","TestTextConversationList.mock_admin_auth"],["JobExecutionRepository.__init__","EventStore.__init__"],["ElevenLabsConversationsClient.save_transcript_to_file","ElevenLabsConversationsClient.get_conversation"],["UserNotFoundError.__init__","ConversationsE2ETest.__init__"],["GeneratedPromptRepository.__init__","VoiceSessionManager.__init__"],["BackstoryRepository.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SessionDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TelegramLinkRepository.__init__"],["EmotionalStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PiiSafeFormatter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OnboardingServerToolHandler.__init__"],["TestOTPFlowSteps.test_step1_start_command","OTPFlowE2ETest.step1_send_start"],["EngagementStateRepository.__init__","FullJourneyOrchestrator.__init__"],["FakeStage.__init__","InstructionSelector.__init__"],["ConversationsPage.__init__","ScoringService.__init__"],["TestUserMemoryEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["UserNotFoundError.__init__","SummaryStage.__init__"],["MemoryUpdateStage.__init__","VoiceAgentConfig.__init__"],["ScoreHistoryRepository.__init__","OTPFlowE2ETest.__init__"],["UserNotFoundError.__init__","EngagementStateRepository.__init__"],["TestBossEncountersEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["VoiceOnboardingFlow.can_resume_onboarding","_get_onboarding_state"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow._save_deferred_state"],["TestProcessingStatsEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["VicePreferenceRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["analyze_distraction","_get_cache_key"],["LifeSimulator.get_events_for_context","EventStore.get_active_arcs"],["AuditLog.__init__","TouchpointScheduler.__init__"],["ExtractionStage.__init__","VoiceOnboardingFlow.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BackstoryRepository.__init__"],["ScoreAnalyzer.analyze_batch","ScoreAnalyzer._call_llm_raw"],["PromptBuilderStage.__init__","__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","StrategicSilence.__init__"],["DailySummaryRepository.__init__","Phase1Registration.__init__"],["ProfileRepository.__init__","VoiceSessionManager.__init__"],["ConversationsPage.build_verification_sequence","js_verify_conversations_exist"],["ConflictStage.__init__","GameStateStage.__init__"],["VoiceService.initiate_call","VoiceService._get_first_message"],["JobExecutionRepository.__init__","MockStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ExperimentLoader.__init__"],["BackstoryRepository.__init__","TriggerDetector.__init__"],["UserNotFoundError.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EngagementStateMachine.__init__"],["OnboardingStateRepository.add_answer","PackageStore.get"],["ExtractionStage.__init__","PipelineOrchestrator.__init__"],["UserRepository.__init__","ResponseTimer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","SummaryStage.__init__"],["TouchpointStage.__init__","ResolutionManager.__init__"],["OTPEmailParser.parse_magic_link_email","OTPEmailParser._extract_body"],["DashboardPage.__init__","ScoreCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EngagementStateRepository.__init__"],["PiiSafeFormatter.__init__","SocialCircleGenerator.__init__"],["TestVoiceIntegrationFlow.test_prompt_returned_verbatim","_make_server_handler"],["AuditLog.__init__","TouchpointStore.__init__"],["ConversationThreadRepository.__init__","NarrativeArcSystem.__init__"],["UserNotFoundError.__init__","HistoryLoader.__init__"],["PromptBuilderStage._enforce_token_budget","_count_tokens"],["MissingVariableError.__init__","OTPFlowE2ETest.__init__"],["ViceScorer.get_top_vices","ProfileCollector.get_profile"],["PackageStore.cleanup_expired","TouchpointStore.delete"],["ConversationsPage.__init__","VicePreferenceRepository.__init__"],["MemoryUpdateStage.__init__","OnboardingServerToolHandler.__init__"],["TestAuditLogsEndpoint.app","TestPipelineStatusEndpoint.mock_admin_auth"],["UserNotFoundError.__init__","Phase3Portal.__init__"],["StageError.__init__","JourneyReport.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PortalLoginE2ETest.__init__"],["JobExecutionRepository.__init__","HandoffManager.__init__"],["UserMetricsRepository.__init__","OnboardingHandler.__init__"],["MockStage.__init__","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SocialCircleGenerator.__init__"],["LifeSimulator.get_events_for_context","LifeSimulator._format_event"],["TestPipelineStatusEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TelegramWebhookSimulator.__init__"],["DashboardPage.__init__","NikitaThoughtRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestUserMemoryEndpoint.mock_admin_auth"],["BackstoryRepository.__init__","TranscriptManager.__init__"],["JobExecutionRepository.__init__","SupabaseMemory.__init__"],["PackageStore.delete","delete"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","PsychologyMapper.__init__"],["TestServerToolsReadyPrompt.test_flag_enabled_loads","_make_server_handler"],["TokenEstimator.encoder","_get_encoder"],["ConversationsPage.__init__","TestUserMetricsRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","HistoryLoader.__init__"],["EngagementStateRepository.__init__","PortalLoginE2ETest.__init__"],["MemoryUpdateStage.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MockMappings.__init__"],["ConflictStage.__init__","ScoreAnalyzer.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PunctuationProcessor.__init__"],["DashboardPage.__init__","ResponseDelivery.__init__"],["ExtractionStage.__init__","FullJourneyOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StrategicSilence.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","Phase3Portal.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","UserMetricsRepository.__init__"],["TestConversationPromptsEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["DailySummaryRepository.__init__","ConversationThreadRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BackstoryRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DailySummaryRepository.__init__"],["TestErrorLogEndpoint.app","mock_admin_auth"],["ReadyPromptRepository.__init__","TokenCounter.__init__"],["MockStage.__init__","HandoffManager.__init__"],["UserMetricsRepository.__init__","ElevenLabsConversationsClient.__init__"],["JobExecutionRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","PromptBuilderStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationsE2ETest.__init__"],["TestScorePersistence.test_score_changes_reflected_in_user","track_commit"],["TouchpointStage.__init__","OTPFlowE2ETest.__init__"],["MockStage.__init__","SupabaseMemory.__init__"],["TestUserScoresEndpoint.app","TestThreadsList.mock_admin_auth"],["PiiSafeFormatter.__init__","TelegramWebhookSimulator.__init__"],["TestErrorLogEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["AuditLog.__init__","__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","TestTelegramAuth.get_email_impl"],["InstructionSet.format_for_prompt","InstructionSet.by_category"],["DashboardPage.__init__","EntityManager.__init__"],["ConflictStage.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VenueResearchService.__init__"],["FakeStage.__init__","GmailHelper.__init__"],["DailySummaryRepository.__init__","StageError.__init__"],["test_critical_stage_failure_fast_abort","BasePage.__init__"],["TelegramLinkRepository.cleanup_expired","delete"],["EngagementStateRepository.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PromptLoader.__init__"],["FakeStage.__init__","JobExecutionRepository.__init__"],["EngagementStateRepository.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TelegramWebhookSimulator.__init__"],["EmotionalStage.__init__","EvidenceCollector.__init__"],["BaseStage.execute","SummaryStage._run"],["MockStage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["ConversationThreadRepository.__init__","ConversationRepository.__init__"],["TestConversationPromptsEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictGenerator.__init__"],["TestUserListEndpointAuditLogging.app","TestUserMemoryEndpoint.mock_get_session"],["DailySummaryRepository.__init__","DashboardE2ETest.__init__"],["ReadyPromptRepository.__init__","ServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EmojiProcessor.__init__"],["EngagementStateRepository.__init__","SummaryStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","GeneratedPromptRepository.__init__"],["ExtractionStage.__init__","EngagementStateMachine.__init__"],["VoiceOnboardingFlow._save_deferred_state","VoiceOnboardingFlow._update_state"],["ConflictStage.__init__","MockResult.__init__"],["ConversationConfigBuilder.build_config","_get_first_message"],["run_manual_otp_test","WebhookTestData.create"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","HistoryLoader.__init__"],["PromptBuilderStage.__init__","EventStore.__init__"],["EmotionalStage.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TestVicePreferenceRepository.__init__"],["EscalationManager._check_natural_resolution","_get_natural_resolution_probability"],["BackstoryRepository.__init__","MetaInstructionEngine.__init__"],["DashboardPage.__init__","ViceAnalyzer.__init__"],["LifeSimStage.__init__","BaseRepository.__init__"],["LifeSimulator.generate_next_day_events","get_recent_events"],["PiiSafeFormatter.__init__","PromptLoader.__init__"],["ReadyPromptRepository.__init__","PendingRegistrationRepository.__init__"],["ConversationsPage.__init__","StrategicSilence.__init__"],["BackstoryRepository.__init__","BaseStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase3Portal.__init__"],["EngagementStateRepository.__init__","TelegramBot.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","LifeSimStage.__init__"],["_ChapterBehaviorsProxy.get","OnboardingStateRepository.get"],["MemoryFactRepository.__init__","NikitaThoughtRepository.__init__"],["MessageSplitter.split","_calculate_delay"],["UserRepository.update_score","BaseRepository.get"],["UserRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["ExtractionStage.__init__","PortalLoginE2ETest.__init__"],["BackstoryRepository.__init__","TokenEstimator.__init__"],["DynamicVariablesBuilder.build_from_user","DynamicVariablesBuilder._build_context_block"],["VoiceOnboardingFlow.handle_onboard_command","resume_onboarding"],["ConversationRepository.recover_stuck","detect_stuck"],["EntityManager.get_places","get_entities_by_type"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VenueResearchService.__init__"],["FakeStage.__init__","ResolutionManager.__init__"],["test_critical_stage_failure_fast_abort","VoiceOnboardingFlow.__init__"],["LifeSimStage.__init__","BackstoryGeneratorService.__init__"],["PiiSafeFormatter.__init__","EmojiProcessor.__init__"],["EngagementStateRepository.__init__","HistoryLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PromptLoader.__init__"],["TouchpointStore.mark_failed","TouchpointStore._to_pydantic"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","_ProfileFromAnswers.__init__"],["DailySummaryRepository.__init__","CommandHandler.__init__"],["ConflictStage.__init__","RegistrationHandler.__init__"],["TextPatternProcessor.process","_detect_context"],["MemoryFactRepository.__init__","ResponseDelivery.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConversationsPage.__init__"],["EngagementStateRepository.__init__","Phase3Portal.__init__"],["GameStateStage.__init__","GmailHelper.__init__"],["DashboardPage.build_verification_sequence","DashboardPage.js_wait_for_dashboard_loaded"],["ConflictStage.__init__","PreferenceConfigurator.__init__"],["test_critical_stage_failure_fast_abort","PipelineOrchestrator.__init__"],["PendingRegistrationRepository.get_email","OnboardingStateRepository.get"],["ConversationRepository.__init__","OTPVerificationHandler.__init__"],["UserNotFoundError.__init__","ScoreCalculator.__init__"],["UserMetricsRepository.__init__","ScoringService.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","EmojiProcessor.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","StateStore.__init__"],["ScoreHistoryRepository.__init__","ConversationRepository.__init__"],["HandoffManager.transition","FirstMessageGenerator.generate"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","GameStateStage.__init__"],["EmotionalStage.__init__","OnboardingServerToolHandler.__init__"],["MemoryFactRepository.__init__","FakeStage.__init__"],["TestSystemOverviewEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["LifeSimStage.__init__","NarrativeArcRepository.__init__"],["ExtractionStage.__init__","BackstoryRepository.__init__"],["DailySummaryRepository.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","StateComputer.__init__"],["VicePreferenceRepository.__init__","DatabaseRateLimiter.__init__"],["ExtractionStage.__init__","ConversationsE2ETest.__init__"],["ConversationThreadRepository.__init__","VoiceCallScorer.__init__"],["MemoryFactRepository.__init__","EntityManager.__init__"],["DashboardPage.__init__","ConversationConfigBuilder.__init__"],["OTPVerificationHandler.handle","MessageHandler._offer_onboarding_choice"],["TextPatternProcessor.process","_context_to_emoji_context"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MessageHandler.__init__"],["TestPortalLoginFlow.test_magic_link_extraction","OTPTestContext.create"],["TestAuditLogsEndpoint.app","TestUserScoresEndpoint.mock_get_session"],["ConflictStage.__init__","MessageGenerator.__init__"],["DashboardE2ETest.get_verification_instructions","DashboardE2ETest.step2_wait_js"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PackageStore.__init__"],["EventStore.get_events_by_domain","_row_to_event"],["TTSConfigService.get_final_settings","get_mood_modulation"],["LifeSimStage.__init__","EscalationManager.__init__"],["DashboardPage.__init__","TestDailySummaryRepositoryExtras.__init__"],["ExtractionStage.__init__","SummaryStage.__init__"],["EmotionalStage.__init__","ExperimentLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","DecayProcessor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ScoreCalculator.__init__"],["ConflictGenerator.should_generate_conflict","ConflictGenerator._prioritize_triggers"],["ReadyPromptRepository.__init__","TelegramAuth.__init__"],["verify_user_created_sql","sql_get_user_by_telegram_id"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BasePage.__init__"],["MissingVariableError.__init__","ConversationRepository.__init__"],["FakeStage.__init__","OTPFlowE2ETest.__init__"],["SummaryStage.__init__","TelegramLinkRepository.__init__"],["PiiSafeFormatter.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MoodCalculator.__init__"],["UserNotFoundError.__init__","ResponseDelivery.__init__"],["FactExtractor.extract_facts","FactExtractor._call_llm_for_extraction"],["AuditLog.__init__","EventStore.__init__"],["PromptBuilderStage.__init__","MissingVariableError.__init__"],["test_critical_stage_failure_fast_abort","FullJourneyOrchestrator.__init__"],["InboundCallHandler._get_conversation_config_override","ConversationConfigBuilder._generate_fallback_prompt"],["PiiSafeFormatter.__init__","SocialCircleRepository.__init__"],["StageError.__init__","ConflictGenerator.__init__"],["UserMetricsRepository.__init__","VicePreferenceRepository.__init__"],["ExtractionStage.__init__","TelegramBot.__init__"],["TestMemoryUpdateStage.test_memory_update_deduplicates","_make_context"],["ConversationRepository.__init__","BreakupManager.__init__"],["GameStateStage.__init__","ResolutionManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","NikitaThoughtRepository.__init__"],["MemoryFactRepository.__init__","ViceAnalyzer.__init__"],["ProfileRepository.update_from_onboarding","ProfileRepository.create_profile"],["VenueResearchService.create_venue_from_user_input","_extract_vibe"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","DashboardPage.__init__"],["LifeEvent.model_dump_for_db","PsychologicalState.to_dict"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","OTPVerificationHandler.__init__"],["GeneratedPromptRepository.__init__","TestVicePreferenceRepository.__init__"],["TestVoiceHandoffIntegration.test_execute_handoff_with_voice_callback_passes_user_name","capture_callback"],["TestConversationThreadRepository.test_create_thread_valid_types","TestNikitaThoughtRepository.mock_create"],["ExtractionStage.__init__","HistoryLoader.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SocialCircleRepository.__init__"],["PiiSafeFormatter.__init__","NarrativeArcManager.__init__"],["ConversationRepository.__init__","LengthAdjuster.__init__"],["ConflictStage.__init__","VoiceService.__init__"],["StateStore.get_conflict_history","_row_to_state"],["get_nikita_agent_for_user","_get_nikita_agent_for_user"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ResponseDelivery.__init__"],["UserMetricsRepository.__init__","TestUserMetricsRepository.__init__"],["EmotionalStage.__init__","PsychologyMapper.__init__"],["ExtractionStage.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TouchpointScheduler.__init__"],["ScoreHistoryRepository.__init__","VoiceCallScorer.__init__"],["DailySummaryRepository.__init__","TokenValidator.__init__"],["StageError.__init__","LifeSimStage.__init__"],["PiiSafeFormatter.__init__","ConflictStage.__init__"],["TestFullPipelineE2E.test_stage_timings_recorded","make_pipeline"],["PiiSafeFormatter.__init__","MoodCalculator.__init__"],["TestUserListEndpoint.app","TestThreadsList.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","NarrativeArcManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TokenBudgetManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","FakeStage.__init__"],["ProfileRepository.__init__","TestVicePreferenceRepository.__init__"],["TouchpointStage.__init__","ConversationRepository.__init__"],["UserRepository.__init__","EvidenceCollector.__init__"],["GeneratedPromptRepository.__init__","ConversationsPage.__init__"],["LifeSimStage.__init__","ScoreHistoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceOnboardingFlow.__init__"],["BackstoryRepository.__init__","TextPatternProcessor.__init__"],["VicePreferenceRepository.__init__","ProfileCollector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","EntityManager.__init__"],["ConversationThreadRepository.__init__","GameStateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MoodCalculator.__init__"],["TestInboundReadyPrompt.test_fallback_on_no_prompt","TestInboundReadyPrompt._make_handler"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","ReadyPromptRepository.__init__"],["VoiceService._generate_fallback_prompt","VoiceService._generate_fallback_prompt"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictStore.__init__"],["UserRepository.update_onboarding_status","TouchpointStore.get"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","InstructionSelector.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_metrics"],["NarrativeArcManager.maybe_create_arc","NarrativeArcRepository.create_arc"],["BreakupManager.check_and_process","BreakupManager.check_threshold"],["ProfileRepository.create_profile","WebhookTestData.create"],["MemoryFactRepository.__init__","ConversationConfigBuilder.__init__"],["PiiSafeFormatter.__init__","ScheduledEventRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PipelineOrchestrator.__init__"],["ConflictStage.__init__","PiiSafeFormatter.__init__"],["TestNikitaCallbackRetry.test_initiate_nikita_callback_retries_on_failure","TestNikitaCallbackRetry.mock_call"],["GameStateStage.__init__","OTPFlowE2ETest.__init__"],["MissingVariableError.__init__","VoiceCallScorer.__init__"],["VoiceCallScorer.apply_score","VoiceCallScorer.score_call"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EmotionalStage.__init__"],["MemoryUpdateStage.__init__","OTPVerificationHandler.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","BreakupManager.__init__"],["LifeSimStage.__init__","ProfileRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MockResult.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","NikitaThoughtRepository.__init__"],["UserRepository.__init__","VoiceAgentConfig.__init__"],["MockStage.__init__","DatabaseRateLimiter.__init__"],["ProfileRepository.__init__","ConversationsPage.__init__"],["SummaryStage.__init__","MockMappings.__init__"],["test_critical_stage_failure_fast_abort","PortalLoginE2ETest.__init__"],["GeneratedPromptRepository.__init__","PackageStore.__init__"],["SummaryStage.__init__","PunctuationProcessor.__init__"],["ExtractionStage.__init__","MessageHandler.__init__"],["EngagementStateRepository.__init__","ScoreCalculator.__init__"],["EngagementStateRepository.__init__","ConflictStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ScheduledEventRepository.__init__"],["TestErrorLogEndpoint.app","TestPipelineStatus.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LengthAdjuster.__init__"],["TestConversationListEndpoint.app","TestTextConversationList.mock_admin_auth"],["AuditLog.__init__","MissingVariableError.__init__"],["SupabaseMemory.add_fact","SupabaseMemory.add_fact"],["SummaryStage.__init__","DailySummaryRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MetaNikitaConfig.__init__"],["PiiSafeFormatter.__init__","MemoryUpdateStage.__init__"],["EvidenceCollector.save_report","_ensure_dirs"],["PromptBuilderStage.__init__","SessionDetector.__init__"],["_call_neediness_llm","_get_neediness_agent"],["DashboardPage.__init__","TouchpointStage.__init__"],["PiiSafeFormatter.__init__","ReadyPromptRepository.__init__"],["ConversationThreadRepository.bulk_resolve_threads","resolve_thread"],["SupabaseMemory.add_relationship_episode","SupabaseMemory.add_fact"],["TestUserListEndpoint.app","TestProcessingStatsEndpoint.mock_get_session"],["InMemoryCache.incr","_cleanup_expired"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ViceAnalyzer.__init__"],["StateComputer._compute_base_state","UserMetricsRepository._clamp"],["TestGameStateStage.test_game_state_with_extraction","_mock_session"],["MockStage.__init__","InboundCallHandler.__init__"],["TestP2Security.test_sec5_sql_injection_in_jwt_email_safe","create_fake_jwt"],["TestBossEncountersEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MemoryUpdateStage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","FakeStage.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","RegistrationHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ResponseTimer.__init__"],["ProfileRepository.__init__","PackageStore.__init__"],["UserMetricsRepository.__init__","StrategicSilence.__init__"],["ConversationThreadRepository.__init__","ScoreAnalyzer.__init__"],["ScoreHistoryRepository.__init__","Phase2Conversation.__init__"],["VenueResearchService._parse_search_results","VenueResearchService._extract_vibe"],["TestUserScoresEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","LifeSimulator.__init__"],["OnboardingHandler.resume","has_incomplete_onboarding"],["LoginPage.__init__","TokenBudgetManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","ReadyPromptRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","FullJourneyOrchestrator.__init__"],["test_critical_stage_failure_fast_abort","BackstoryRepository.__init__"],["SupabaseMemory.search","_generate_embedding"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PreferenceConfigurator.__init__"],["test_critical_stage_failure_fast_abort","ConversationsE2ETest.__init__"],["UserRepository.__init__","OnboardingServerToolHandler.__init__"],["VoiceService._load_context","_compute_time_of_day"],["MemoryFactRepository.__init__","PromptBuilderStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","__init__"],["TouchpointStage.__init__","VoiceCallScorer.__init__"],["TestNikitaThoughtRepository.test_get_thoughts_for_prompt_groups_by_type","mock_get_active_thoughts"],["MemoryUpdateStage.__init__","BreakupManager.__init__"],["VoiceEventScheduler.schedule_telegram_message","_create_event"],["DashboardPage.__init__","RecoveryManager.__init__"],["UserNotFoundError.__init__","TestDailySummaryRepositoryExtras.__init__"],["JobExecutionRepository.__init__","ProfileCollector.__init__"],["PromptLoader.load","PromptLoader._resolve_path"],["SummaryStage.__init__","ConfigLoader.__init__"],["EngagementStateRepository.__init__","ResponseTimer.__init__"],["test_critical_stage_failure_fast_abort","SummaryStage.__init__"],["MemoryUpdateStage.__init__","LengthAdjuster.__init__"],["test_critical_stage_failure_fast_abort","EngagementStateRepository.__init__"],["ConflictGenerator.generate","ConflictGenerator._check_should_skip"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","GmailMCPClient.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageGenerator.__init__"],["ConversationsPage.__init__","NikitaThoughtRepository.__init__"],["SupabaseMemory.search_memory","SupabaseMemory.search"],["VicePreferenceRepository.__init__","ConflictStage.__init__"],["LoginPage.__init__","MockResult.__init__"],["MissingVariableError.__init__","Phase2Conversation.__init__"],["UserRepository.__init__","ExperimentLoader.__init__"],["ReadyPromptRepository.__init__","FactExtractor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConversationConfigBuilder.__init__"],["VicePreferenceRepository.__init__","InMemoryCache.__init__"],["ConflictStage.__init__","UserMetricsRepository.__init__"],["UserMetricsRepository.__init__","ConflictGenerator.__init__"],["TestTouchpointStage.test_touchpoint_evaluates","_mock_session"],["PortalLoginE2ETest.get_complete_flow_instructions","step1_verify_js"],["PromptBuilderStage.__init__","SocialCircleGenerator.__init__"],["main","JourneyReport.generate_report"],["test_critical_stage_failure_fast_abort","TelegramBot.__init__"],["DailySummaryRepository.__init__","OnboardingHandler.__init__"],["NikitaThoughtRepository.get_thoughts_for_prompt","NikitaThoughtRepository.get_active_thoughts"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ViceAnalyzer.__init__"],["MockStage.__init__","ProfileCollector.__init__"],["ConversationsPage.__init__","ResponseDelivery.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","Phase4GameState.__init__"],["ExtractionStage.__init__","ScoreCalculator.__init__"],["ExtractionStage.__init__","ConflictStore.__init__"],["TestPipelineContext.test_game_state_fields","_make_ctx"],["ReadyPromptRepository.__init__","DeliveryResult.__init__"],["TestUserDetailEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["NarrativeArcManager.get_active_arcs","NarrativeArcRepository.get_active_arcs"],["ConversationThreadRepository.__init__","MockResult.__init__"],["ServerToolHandler.handle","_update_memory"],["test_critical_stage_failure_fast_abort","HistoryLoader.__init__"],["ScoreHistoryRepository.__init__","ScoreAnalyzer.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","TelegramLinkRepository.__init__"],["ReadyPromptRepository.__init__","SkipDecision.__init__"],["main","JourneyReport.print_section"],["AuditLog.__init__","SessionDetector.__init__"],["LoginPage.__init__","SupabaseHelper.__init__"],["ConflictStore.reduce_severity","ConflictStore.update_conflict"],["FakeStage.__init__","ConversationRepository.__init__"],["TestUserScoresEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["ConversationsPage.__init__","FakeStage.__init__"],["PromptBuilderStage._generate_prompt","PromptBuilderStage._store_prompt"],["TestProcessingStatsEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["test_critical_stage_failure_fast_abort","Phase3Portal.__init__"],["test_critical_stage_failure_fast_abort","TestPipelineOrchestratorHappyPath.execute"],["NikitaThoughtRepository.__init__","TokenBudgetManager.__init__"],["GeneratedPromptRepository.__init__","BackstoryGeneratorService.__init__"],["LoginPage.__init__","LifeSimulator.__init__"],["TestConversationListEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["ReadyPromptRepository.__init__","AuditLog.__init__"],["UserRepository.advance_chapter","_ChapterBehaviorsProxy.get"],["TestErrorLogEndpoint.app","TestTextStats.mock_admin_auth"],["ConversationsPage.__init__","EntityManager.__init__"],["MemoryFactRepository.__init__","TouchpointStage.__init__"],["test_feature_flag_controls_branch_logic","choose_path"],["LoginPage.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PortalLoginE2ETest.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceService.__init__"],["DailySummaryRepository.__init__","ElevenLabsConversationsClient.__init__"],["create_telegram_router","render_error_page"],["ConversationRepository.__init__","Phase1Registration.__init__"],["TouchpointStage.__init__","Phase2Conversation.__init__"],["MemoryFactRepository.__init__","_ProfileFromAnswers.__init__"],["TestAuditLogsEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["ConversationThreadRepository.__init__","RegistrationHandler.__init__"],["main","get_config"],["EmotionalStage.__init__","OTPVerificationHandler.__init__"],["MissingVariableError.__init__","ScoreAnalyzer.__init__"],["ProfileRepository.__init__","BackstoryGeneratorService.__init__"],["ConversationThreadRepository.__init__","PreferenceConfigurator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ProfileRepository.__init__"],["PromptBuilderStage.__init__","TelegramWebhookSimulator.__init__"],["ExtractionStage.__init__","ResponseTimer.__init__"],["UserRepository.update_game_status","InMemoryCache.get"],["MockStage.__init__","TriggerDetector.__init__"],["TestUserDetailEndpoint.app","TestPipelineStatusEndpoint.mock_get_session"],["StateComputer._compute_base_state","StateComputer._clamp"],["MemoryFactRepository.__init__","RecoveryManager.__init__"],["JobExecutionRepository.__init__","ConflictStage.__init__"],["TestConversationListEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["MemoryFactRepository.__init__","StateComputer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","BackstoryRepository.__init__"],["JobExecutionRepository.__init__","InMemoryCache.__init__"],["RateLimiter.__init__","UserRepository.get"],["VicePreferenceRepository.__init__","MetaInstructionEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConversationsE2ETest.__init__"],["TestUIUX.test_error_page_has_instructions","TestHelpers.navigate_and_get_content"],["ConversationsPage.__init__","ViceAnalyzer.__init__"],["OnboardingHandler.handle","_handle_venue_research_step"],["VicePreferenceRepository.__init__","BaseStage.__init__"],["LoginPage.__init__","Phase4GameState.__init__"],["ConversationThreadRepository.__init__","MessageGenerator.__init__"],["VicePreferenceRepository.__init__","TokenEstimator.__init__"],["AuditLog.__init__","SocialCircleGenerator.__init__"],["UserNotFoundError.__init__","TouchpointStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictDetector.__init__"],["NikitaThoughtRepository.__init__","SupabaseHelper.__init__"],["OnboardingHandler._handle_drug_tolerance_step","_validate_drug_tolerance"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","EventStore.__init__"],["DashboardPage.__init__","PsychologyMapper.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","SummaryStage.__init__"],["GameStateStage.__init__","ConversationRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EngagementStateRepository.__init__"],["FakeStage.__init__","VoiceCallScorer.__init__"],["TestProcessingStatsEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["UserNotFoundError.__init__","EvidenceCollector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EventGenerator.__init__"],["NikitaThoughtRepository.__init__","LifeSimulator.__init__"],["TestUserListEndpoint.app","TestElevenLabsList.mock_admin_auth"],["EngagementStateRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MockMappings.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","Phase1Registration.__init__"],["RecoveryManager.apply_decay_recovery","_get_de_escalated_state"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PunctuationProcessor.__init__"],["NikitaThoughtRepository.__init__","PreferenceConfigurator.__init__"],["MockStage.__init__","InMemoryCache.__init__"],["TouchpointStage.__init__","ScoreAnalyzer.__init__"],["EmotionalStage.__init__","BreakupManager.__init__"],["SummaryStage.__init__","TouchpointScheduler.__init__"],["ConversationRepository.__init__","ConversationThreadRepository.__init__"],["LoginPage.__init__","VoiceService.__init__"],["TestSystemOverviewEndpoint.app","TestErrorLogEndpoint.mock_admin_auth"],["BaseStage.execute","FakeCriticalFailStage._run"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DailySummaryRepository.__init__"],["PromptBuilderStage.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","PromptBuilderStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TelegramBot.__init__"],["DashboardPage.__init__","UserRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointStage.__init__"],["EmotionalStage.__init__","LengthAdjuster.__init__"],["UserNotFoundError.__init__","VoiceAgentConfig.__init__"],["EmotionalStage.__init__","MetaNikitaConfig.__init__"],["ConversationsPage.__init__","ConversationConfigBuilder.__init__"],["TestUserListEndpoint.app","TestUserMemoryEndpoint.mock_admin_auth"],["StageError.__init__","TelegramLinkRepository.__init__"],["ConversationThreadRepository.bulk_create_threads","ConversationThreadRepository.create_thread"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","HistoryLoader.__init__"],["PromptBuilderStage.__init__","EmojiProcessor.__init__"],["ScoreCalculator.apply_multiplier","adjust"],["ConversationRepository.__init__","StageError.__init__"],["ConversationThreadRepository.__init__","VoiceService.__init__"],["EvidenceCollector.add_screenshot","EvidenceCollector.log"],["SummaryStage.__init__","TouchpointStore.__init__"],["GmailHelper.wait_for_magic_link","GmailHelper._get_latest_magic_link_email"],["ConflictStage.__init__","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase3Portal.__init__"],["TelegramWebhookSimulator.send_command","_build_headers"],["TestConversationPromptsEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ExtractionStage.__init__"],["TokenCounter.count_multiple","TokenValidator.count_tokens"],["PackageStore.delete","OnboardingStateRepository.delete"],["ScoreAnalyzer.agent","_create_score_analyzer_agent"],["AuditLog.__init__","TelegramWebhookSimulator.__init__"],["PiiSafeFormatter.__init__","GeneratedPromptRepository.__init__"],["InMemoryCache.get","_ChapterBehaviorsProxy.get"],["NikitaThoughtRepository.__init__","Phase4GameState.__init__"],["DailySummaryRepository.__init__","JourneyReport.__init__"],["ConversationRepository.__init__","DashboardE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","RecoveryManager.__init__"],["HandoffManager.transition","HandoffManager._send_first_message"],["TestPipelineStatusEndpoint.app","TestTextConversationList.mock_admin_auth"],["JobExecutionRepository.__init__","MetaInstructionEngine.__init__"],["MemoryUpdateStage.__init__","Phase1Registration.__init__"],["JobExecutionRepository.__init__","BaseStage.__init__"],["BackstoryRepository.__init__","TestVicePreferenceRepository.__init__"],["GeneratedPromptRepository.__init__","ProfileRepository.__init__"],["test_critical_stage_failure_fast_abort","ScoreCalculator.__init__"],["test_critical_stage_failure_fast_abort","ConflictStore.__init__"],["JobExecutionRepository.__init__","TokenEstimator.__init__"],["NeglectDetector.detect","_clamp"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","GeneratedPromptRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SupabaseMemory.__init__"],["UserNotFoundError.__init__","OnboardingServerToolHandler.__init__"],["GameStateStage.__init__","VoiceCallScorer.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationThreadRepository.__init__"],["ConversationsPage.__init__","MockMappings.__init__"],["ConversationThreadRepository.__init__","PiiSafeFormatter.__init__"],["FakeStage.__init__","Phase2Conversation.__init__"],["MemoryFactRepository.__init__","EmotionalStage.__init__"],["UserMetricsRepository.__init__","NikitaThoughtRepository.__init__"],["EmotionalStage.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","MissingVariableError.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ConfigLoader.__init__"],["ExtractionStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestConversationThreadRepository.test_bulk_create_threads_creates_all","TestConversationThreadRepository.mock_create_thread"],["ConversationsPage.__init__","PromptBuilderStage.__init__"],["MockStage.__init__","MetaInstructionEngine.__init__"],["UserRepository.update_score","OnboardingStateRepository.get"],["PromptBuilderStage.__init__","DashboardPage.__init__"],["TelegramLinkRepository.verify_code","TelegramLinkRepository.delete"],["PendingRegistrationRepository.delete","PackageStore.delete"],["ProfileRepository.__init__","ProfileRepository.__init__"],["MockStage.__init__","BaseStage.__init__"],["OnboardingStateRepository.add_answer","get"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","TokenBudgetManager.__init__"],["ConflictStage.__init__","VoiceOnboardingFlow.__init__"],["PromptBuilderStage.__init__","SocialCircleRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","StageError.__init__"],["ConversationRepository.__init__","CommandHandler.__init__"],["UserMetricsRepository.__init__","ResponseDelivery.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","_ProfileFromAnswers.__init__"],["MockStage.__init__","TokenEstimator.__init__"],["SummaryStage.__init__","__init__"],["TelegramAuth.register_user","send_otp_code"],["AuditLog.__init__","PromptLoader.__init__"],["TouchpointEngine.deliver_due_touchpoints","_deliver_single"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","EvidenceCollector.__init__"],["GeneratedPromptRepository.__init__","EventGenerator.__init__"],["TestTelegramAuth.test_ac_t046_6_persistence_across_restarts","store_impl"],["VicePreferenceRepository.__init__","TextPatternProcessor.__init__"],["MemoryFactRepository.__init__","UserRepository.__init__"],["ConflictStage.__init__","PipelineOrchestrator.__init__"],["EvidenceCollector.save_report","EvidenceCollector._ensure_dirs"],["UserMetricsRepository.__init__","FakeStage.__init__"],["StageError.__init__","MockMappings.__init__"],["TestConversationPromptsEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","DashboardE2ETest.__init__"],["TestUserListEndpointAuditLogging.app","TestThoughtsList.mock_admin_auth"],["StageError.__init__","PunctuationProcessor.__init__"],["PromptBuilderStage.__init__","NarrativeArcManager.__init__"],["UserRepository.__init__","OTPVerificationHandler.__init__"],["VicePreferenceRepository.__init__","RateLimiter.__init__"],["AuditLog.__init__","EmojiProcessor.__init__"],["ConversationRepository.__init__","MemoryFactRepository.__init__"],["TestPromptBuilderStage.test_ac_3_4_2_voice_token_budget_warning","_make_context"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","StateComputer.__init__"],["BackstoryRepository.create_from_scenario","create"],["UserMetricsRepository.__init__","EntityManager.__init__"],["StageError.__init__","DailySummaryRepository.__init__"],["BackstoryRepository.__init__","PackageStore.__init__"],["MemoryUpdateStage.__init__","ConversationThreadRepository.__init__"],["ConversationThreadRepository.__init__","UserNotFoundError.__init__"],["StageError.__init__","PromptBuilderStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MockResult.__init__"],["EngagementStateRepository.__init__","EvidenceCollector.__init__"],["PromptBuilderStage.__init__","ConflictStage.__init__"],["MessageSplitter._find_split_points","MessageSplitter.split"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","VoiceAgentConfig.__init__"],["PromptBuilderStage.__init__","MoodCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","NarrativeArcSystem.__init__"],["LifeSimStage.__init__","ServerToolHandler.__init__"],["ProfileRepository.__init__","EventGenerator.__init__"],["TestRateLimiter.test_ac_t024_3_get_remaining_returns_quota_info","TestRateLimiter.mock_get"],["get_agent_id","ElevenLabsConfig.get_agents_dict"],["ScoreHistoryRepository.__init__","PiiSafeFormatter.__init__"],["FakeStage.__init__","ScoreAnalyzer.__init__"],["LifeSimulator.get_events_for_context","_format_event"],["InMemoryCache.incr","InMemoryCache.get"],["UserNotFoundError.__init__","PsychologyMapper.__init__"],["MessageHandler.handle","MessageHandler.handle"],["VoiceEventScheduler.schedule_telegram_message","VoiceEventScheduler._create_event"],["TestPortalLoginFlow.test_magic_link_extraction","TelegramLinkCode.create"],["_ChapterBehaviorsProxy.items","_ChapterBehaviorsProxy.items"],["test_agent_receives_latest_messages","capture_messages"],["GameStateStage.__init__","Phase2Conversation.__init__"],["MemoryUpdateStage.__init__","StageError.__init__"],["ReadyPromptRepository.__init__","VenueResearchService.__init__"],["DashboardPage.__init__","DecayCalculator.__init__"],["EngagementStateRepository.__init__","VoiceAgentConfig.__init__"],["TestPipelineStatusEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["LifeSimStage.__init__","PendingRegistrationRepository.__init__"],["ConversationsPage.__init__","TouchpointStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","SupabaseHelper.__init__"],["ScoreHistoryRepository.__init__","ViceService.__init__"],["PromptBuilderStage.__init__","ScheduledEventRepository.__init__"],["ConflictDetector.check_escalation","detect_conflict_state"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","RegistrationHandler.__init__"],["DashboardPage.__init__","TTSConfigService.__init__"],["ConversationThreadRepository.__init__","UserMetricsRepository.__init__"],["ConflictStage.__init__","FullJourneyOrchestrator.__init__"],["LifeSimulator.generate_next_day_events","EventStore.get_recent_events"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LifeSimulator.__init__"],["MemoryUpdateStage.__init__","DashboardE2ETest.__init__"],["TelegramLinkRepository.create_link_code","delete_for_user"],["TestUserListEndpointAuditLogging.app","mock_admin_auth"],["UserMetricsRepository.__init__","ViceAnalyzer.__init__"],["ConversationsPage.__init__","_ProfileFromAnswers.__init__"],["UserRepository.__init__","BreakupManager.__init__"],["ConflictGenerator.should_generate_conflict","_prioritize_triggers"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PreferenceConfigurator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OnboardingServerToolHandler.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","PsychologyMapper.__init__"],["HandoffManager.transition","HandoffManager._get_user_telegram_id"],["MissingVariableError.__init__","PiiSafeFormatter.__init__"],["AuditLog.__init__","DashboardPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictStore.__init__"],["ReadyPromptRepository.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["FullJourneyOrchestrator.print_instructions","get_all_instructions"],["PreferenceConfigurator.get_behavioral_config","get_preferences"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","MemoryFactRepository.__init__"],["TestUserListEndpointAuditLogging.app","TestUserDetailEndpoint.mock_admin_auth"],["AuditLog.__init__","SocialCircleRepository.__init__"],["PromptBuilderStage.__init__","MemoryUpdateStage.__init__"],["EmotionalStage.__init__","ConflictDetector.__init__"],["UserRepository.__init__","LengthAdjuster.__init__"],["MetaInstructionEngine.get_instructions_for_context","InstructionSet.format_for_prompt"],["TestSystemOverviewEndpoint.app","TestUserListEndpoint.mock_admin_auth"],["GeneratedPromptRepository.__init__","ConfigLoader.__init__"],["UserRepository.__init__","MetaNikitaConfig.__init__"],["TouchpointStage.__init__","CommandHandler.__init__"],["ConversationRepository.__init__","TokenValidator.__init__"],["ConversationsPage.__init__","RecoveryManager.__init__"],["VenueCacheRepository.cleanup_expired","BaseRepository.delete"],["ScoreHistoryRepository.__init__","UserNotFoundError.__init__"],["PromptBuilderStage.__init__","ReadyPromptRepository.__init__"],["JobExecutionRepository.__init__","TextPatternProcessor.__init__"],["ConversationsPage.__init__","StateComputer.__init__"],["ConflictDetector.apply_transition","_can_transition"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.is_already_onboarded"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageSplitter.__init__"],["NeglectDetector.detect","_response_time_signal"],["TestPipelineStatusEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["MissingVariableError.__init__","ViceService.__init__"],["JobExecutionRepository.__init__","RateLimiter.__init__"],["TestWebhookHandler.test_extracts_session_metadata","create_webhook_signature"],["EmotionalStage.__init__","Phase1Registration.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","UserRepository.__init__"],["EngagementStateRepository.__init__","OnboardingServerToolHandler.__init__"],["TestConversationPromptsEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_includes_timestamp","create_mock_user"],["DashboardPage.__init__","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ExperimentLoader.__init__"],["TestConversationThreadRepository.test_bulk_create_threads_creates_all","mock_create_thread"],["AuditLog.__init__","NarrativeArcManager.__init__"],["BossStateMachine.process_fail","_get_user_repo"],["StageError.__init__","_ProfileFromAnswers.__init__"],["LifeSimulator.get_events_for_context","NarrativeArcManager.get_active_arcs"],["NeglectDetector._response_time_signal","_clamp"],["ScoreCalculator.calculate","update_metrics"],["ExtractionStage.__init__","EvidenceCollector.__init__"],["PackageStore.exists","PackageStore.get"],["MemoryUpdateStage.__init__","CommandHandler.__init__"],["GameStateStage.__init__","ScoreAnalyzer.__init__"],["AuditLog.__init__","ConflictStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointScheduler.__init__"],["ProfileRepository.__init__","ConfigLoader.__init__"],["TelegramLinkRepository.cleanup_expired","PendingRegistrationRepository.delete"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VenueCacheRepository.__init__"],["AuditLog.__init__","MoodCalculator.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","Phase4GameState.__init__"],["UserMetricsRepository.__init__","ConversationConfigBuilder.__init__"],["VoiceOnboardingFlow.handle_message","VoiceOnboardingFlow.process_phone_input"],["MockStage.__init__","TextPatternProcessor.__init__"],["CallAvailability.is_available","get_availability_rate"],["MissingVariableError.__init__","UserNotFoundError.__init__"],["ScoreHistoryRepository.__init__","UserMetricsRepository.__init__"],["SummaryStage.__init__","EventStore.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EmotionalStage.__init__"],["MockStage.__init__","RateLimiter.__init__"],["BackstoryRepository.__init__","BackstoryGeneratorService.__init__"],["BackstoryRepository.create_from_scenario","get"],["ReadyPromptRepository.__init__","StateStore.__init__"],["DashboardPage.__init__","HandoffManager.__init__"],["StageError.__init__","StateComputer.__init__"],["MemoryUpdateStage.__init__","MemoryFactRepository.__init__"],["EmotionalStage.__init__","ExtractionStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TokenCounter.__init__"],["OnboardingHandler.handle","OnboardingHandler._handle_life_stage_step"],["ProfileRepository.get_by_user_id","_ChapterBehaviorsProxy.get"],["ExperimentLoader._load_experiment_with_inheritance","ExperimentLoader._load_experiment_with_inheritance"],["ExtractionStage.__init__","VoiceAgentConfig.__init__"],["DailySummaryRepository.__init__","ConflictGenerator.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","SocialCircleGenerator.__init__"],["test_critical_stage_failure_fast_abort","TestDailySummaryRepositoryExtras.__init__"],["VoiceCallVerifier.verify_all","_verify_elevenlabs"],["ConflictStage.__init__","PortalLoginE2ETest.__init__"],["UserRepository.__init__","GmailMCPClient.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TouchpointStore.__init__"],["DynamicVariablesBuilder.build_from_user","_build_context_block"],["UserRepository.advance_chapter","TouchpointStore.get"],["TestUserListEndpointAuditLogging.app","TestSystemOverviewEndpoint.mock_admin_auth"],["VoiceService.initiate_call","_generate_session_id"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","PsychologyMapper.__init__"],["MemoryFactRepository.__init__","DecayCalculator.__init__"],["AuditLog.__init__","ScheduledEventRepository.__init__"],["DashboardPage.__init__","MetaNikitaConfig.__init__"],["HistoryLoader._truncate_to_budget","HistoryLoader._estimate_tokens"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceService.__init__"],["TouchpointStage.__init__","ViceService.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TokenValidator.__init__"],["ConflictDetector.detect_conflict_state","ConflictDetector._can_transition"],["TelegramLinkRepository.verify_code","BaseRepository.delete"],["EmojiProcessor.process","EmojiProcessor._validate_existing_emojis"],["TouchpointScheduler.evaluate_user","TouchpointScheduler.get_config"],["ExtractionStage._run","_get_agent"],["ReadyPromptRepository.__init__","DecayProcessor.__init__"],["MissingVariableError.__init__","UserMetricsRepository.__init__"],["UserMetricsRepository.__init__","MockMappings.__init__"],["EmotionalStage.__init__","ConversationThreadRepository.__init__"],["DailySummaryRepository.__init__","LifeSimStage.__init__"],["DashboardPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["LoginPage.__init__","MessageSplitter.__init__"],["AuditLog.__init__","MemoryUpdateStage.__init__"],["EngagementStateRepository.__init__","PsychologyMapper.__init__"],["BackstoryRepository.__init__","EscalationManager.__init__"],["UserMetricsRepository.__init__","DailySummaryRepository.__init__"],["ConflictStage.__init__","BackstoryRepository.__init__"],["AuditLog.__init__","ReadyPromptRepository.__init__"],["UserMetricsRepository.__init__","PromptBuilderStage.__init__"],["RateLimiter.get_remaining","BaseRepository.get"],["TestErrorLogEndpoint.app","TestUserListEndpoint.mock_get_session"],["TouchpointStage.__init__","UserNotFoundError.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PipelineOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","__init__"],["ConflictStage.__init__","ConversationsE2ETest.__init__"],["SocialCircleGenerator.generate_social_circle","_apply_hobby_adaptations"],["ExtractionStage.__init__","OnboardingServerToolHandler.__init__"],["CalibrationCalculator.compute","CalibrationCalculator._frequency_component"],["UserRepository.delete_user_cascade","TouchpointStore.get"],["LoginPage.__init__","VenueCacheRepository.__init__"],["FullJourneyOrchestrator.get_all_instructions","get_phase3_instructions"],["EmotionalStage.__init__","StageError.__init__"],["TestPortalLoginFlow.test_flow_instructions_generation","PortalLoginTestContext.create"],["MemoryFactRepository.__init__","MockStage.__init__"],["ConflictStage.__init__","SummaryStage.__init__"],["ConversationsPage.__init__","EmotionalStage.__init__"],["TelegramWebhookSimulator._build_update","TelegramWebhookSimulator._next_update_id"],["ConflictStage.__init__","EngagementStateRepository.__init__"],["VoiceService.end_call","VoiceService._load_user"],["UserNotFoundError.__init__","DecayCalculator.__init__"],["StageError.__init__","TouchpointScheduler.__init__"],["DashboardPage.__init__","GmailMCPClient.__init__"],["MemoryUpdateStage.__init__","TokenValidator.__init__"],["ConversationThreadRepository.__init__","BasePage.__init__"],["SituationDetector._build_metadata","_is_long_gap"],["EmotionalStage.__init__","DashboardE2ETest.__init__"],["ExtractionStage.__init__","ExperimentLoader.__init__"],["SupabaseMemory.get_recent","get_recent"],["UserNotFoundError.__init__","TTSConfigService.__init__"],["TestAuditLogsEndpoint.app","TestUserMemoryEndpoint.mock_get_session"],["UserRepository.update_settings","PackageStore.get"],["ClinginessDetector.detect","_length_ratio_signal"],["SummaryStage.__init__","MissingVariableError.__init__"],["ConversationRepository.__init__","OnboardingHandler.__init__"],["ConflictStage.__init__","TelegramBot.__init__"],["test_no_new_sessions_created","track_session_maker"],["UserRepository.set_boss_fight_status","UserRepository.get"],["UserNotFoundError.__init__","OTPVerificationHandler.__init__"],["MemoryFactRepository.__init__","HandoffManager.__init__"],["ServerToolHandler._get_context","ServerToolHandler._compute_nikita_activity"],["BossStateMachine.process_fail","BossStateMachine._get_user_repo"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DecayCalculator.__init__"],["ReadyPromptRepository.__init__","InstructionSelector.__init__"],["ConversationsPage.__init__","UserRepository.__init__"],["ConflictStage.__init__","HistoryLoader.__init__"],["MemoryFactRepository.__init__","SupabaseMemory.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","step2_submit_js"],["StageError.__init__","EmotionalStage.__init__"],["GeneratedPromptRepository.__init__","TokenCounter.__init__"],["NikitaThoughtRepository.__init__","MessageSplitter.__init__"],["StateComputer.compute","_apply_life_event_deltas"],["BackstoryRepository.__init__","ScoreHistoryRepository.__init__"],["ConflictStage.__init__","Phase3Portal.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TTSConfigService.__init__"],["GeneratedPromptRepository.__init__","TouchpointStore.__init__"],["TestSessionDetector.test_detect_and_queue_skips_failed_marks","TestSessionDetector.mock_mark"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TestDailySummaryRepositoryExtras.__init__"],["ConversationRepository.__init__","ElevenLabsConversationsClient.__init__"],["LoginPage.__init__","PipelineOrchestrator.__init__"],["ExtractionStage.__init__","PsychologyMapper.__init__"],["test_session_flows_through_handler","MockAgentHelper.mock_get_agent"],["SituationDetector._detect_situation_type","SituationDetector._is_after_gap"],["TestMemoryUpdateStage.test_memory_update_deduplicates","_mock_session"],["atomic","is_deadlock_error"],["UserMetricsRepository.__init__","_ProfileFromAnswers.__init__"],["TestNikitaCallbackRetry.test_initiate_nikita_callback_retries_on_failure","mock_call"],["UserRepository.__init__","Phase1Registration.__init__"],["NikitaThoughtRepository.__init__","VenueCacheRepository.__init__"],["FakeStage.__init__","PiiSafeFormatter.__init__"],["TelegramLinkRepository.delete","TelegramLinkRepository.delete"],["ConversationThreadRepository.__init__","VoiceOnboardingFlow.__init__"],["MemoryFactRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["InMemoryCache.get","TouchpointStore.get"],["BackstoryRepository.__init__","ProfileRepository.__init__"],["test_critical_stage_failure_fast_abort","EvidenceCollector.__init__"],["ProfileRepository.update_from_onboarding","PendingRegistrationRepository.get"],["ProfileRepository.__init__","TokenCounter.__init__"],["ScoreHistoryRepository.__init__","BasePage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramAuth.__init__"],["DynamicVariablesBuilder.build_from_context","DynamicVariablesBuilder._compute_nikita_activity"],["TestConversationListEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["ProfileRepository.__init__","TouchpointStore.__init__"],["TextPatternProcessor.process_for_sending","process"],["EmotionalStage.__init__","MemoryFactRepository.__init__"],["TestCallScoring.test_call_scoring_applies_engagement_multiplier","TestCallScoring.capture_engagement"],["ConversationThreadRepository.__init__","PipelineOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","GameStateStage.__init__"],["VicePreferenceRepository.__init__","TestVicePreferenceRepository.__init__"],["UserMetricsRepository.__init__","RecoveryManager.__init__"],["TelegramLinkRepository.cleanup_expired","TouchpointStore.delete"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockStage.__init__"],["FakeStage.__init__","ViceService.__init__"],["UserMetricsRepository.__init__","StateComputer.__init__"],["LifeSimStage.__init__","FactExtractor.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EngagementStateMachine.__init__"],["MessageSplitter._force_split","MessageSplitter.split"],["DashboardPage.build_verification_sequence","DashboardPage.js_get_all_dashboard_data"],["StageError.__init__","__init__"],["test_critical_stage_failure_fast_abort","VoiceAgentConfig.__init__"],["GmailHelper.wait_for_magic_link","_extract_magic_link"],["GameStateStage.__init__","CommandHandler.__init__"],["LifeSimStage.__init__","ViceScorer.__init__"],["UserNotFoundError.__init__","MetaNikitaConfig.__init__"],["UserRepository.__init__","ExtractionStage.__init__"],["TestEventStore.mock_session_factory","TestEventStore.factory"],["ProfileCollector.get_completeness_percentage","ProfileCollector.get_profile"],["TestUserScoresEndpoint.app","TestThoughtsList.mock_admin_auth"],["TelegramWebhookSimulator._build_command_update","TelegramWebhookSimulator._build_update"],["PromptBuilderStage.__init__","GeneratedPromptRepository.__init__"],["BackstoryRepository.__init__","EventGenerator.__init__"],["DashboardPage.__init__","ConflictDetector.__init__"],["VoiceOnboardingFlow.handle_onboard_command","VoiceOnboardingFlow.resume_onboarding"],["SummaryStage.__init__","SessionDetector.__init__"],["ScoreCalculator.apply_multiplier","LengthAdjuster.adjust"],["LifeSimStage.__init__","DeliveryResult.__init__"],["MissingVariableError.__init__","BasePage.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","EventStore.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","PortalLoginE2ETest.__init__"],["TouchpointStage.__init__","OnboardingHandler.__init__"],["FakeStage.__init__","UserNotFoundError.__init__"],["InboundCallHandler._generate_fallback_prompt","_get_relationship_score"],["SituationDetector.map_conflict_to_situation","SituationDetector._is_conflict_active"],["OnboardingStateRepository.get_or_create","PendingRegistrationRepository.get"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","HandoffManager.__init__"],["TestProcessingStatsEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["ProfileCollector.get_profile","ViceScorer.get_profile"],["LifeSimStage.__init__","AuditLog.__init__"],["MoodCalculator.compute_from_event","MoodCalculator.compute_from_events"],["NikitaThoughtRepository.__init__","PipelineOrchestrator.__init__"],["TokenCounter.count_multiple","count_tokens"],["ScoreHistoryRepository.__init__","VoiceOnboardingFlow.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","OTPVerificationHandler.__init__"],["TouchpointScheduler.evaluate_event_trigger","TouchpointScheduler._should_trigger"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","DashboardPage.__init__"],["ConversationThreadRepository.__init__","FullJourneyOrchestrator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MetaNikitaConfig.__init__"],["UserRepository.__init__","ConversationThreadRepository.__init__"],["BackstoryRepository.create_from_scenario","BaseRepository.create"],["MemoryUpdateStage.__init__","OnboardingHandler.__init__"],["TokenBudgetManager._truncate_to_budget","TokenBudgetManager._estimate_tokens"],["TestAuditLogsEndpoint.app","TestTextConversationList.mock_admin_auth"],["test_critical_stage_failure_fast_abort","OnboardingServerToolHandler.__init__"],["ConversationsPage.build_verification_sequence","ConversationsPage.js_wait_for_conversations_loaded"],["EngagementStateRepository.__init__","TTSConfigService.__init__"],["TestErrorLogEndpoint.app","TestTextConversationDetail.mock_admin_auth"],["ReadyPromptRepository.__init__","GmailHelper.__init__"],["TouchpointStage.__init__","ElevenLabsConversationsClient.__init__"],["EmotionalStage.__init__","TokenValidator.__init__"],["TestConversationListEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TestVicePreferenceRepositoryExtras.__init__"],["FakeStage.__init__","UserMetricsRepository.__init__"],["ReadyPromptRepository.__init__","JobExecutionRepository.__init__"],["UserNotFoundError.__init__","GmailMCPClient.__init__"],["EngagementStateRepository.__init__","OTPVerificationHandler.__init__"],["TestUserScoresEndpoint.app","mock_admin_auth"],["TestSystemOverviewEndpoint.app","TestProcessingStatsEndpoint.mock_admin_auth"],["UserRepository.__init__","StageError.__init__"],["DashboardPage.__init__","DatabaseRateLimiter.__init__"],["ScoreHistoryRepository.__init__","ScoringService.__init__"],["DailySummaryRepository.__init__","FakeStage.__init__"],["GameStateStage.__init__","ViceService.__init__"],["StateComputer._apply_life_event_deltas","StateComputer._apply_life_event_deltas"],["DashboardPage.__init__","ExtractionStage.__init__"],["TokenEstimator.estimate_fast","count"],["JobExecutionRepository.__init__","TestVicePreferenceRepository.__init__"],["VoiceService._load_context","VoiceService._compute_time_of_day"],["PiiSafeFormatter.__init__","NarrativeArcRepository.__init__"],["VenueCacheRepository.cleanup_expired","PackageStore.delete"],["LoginPage.__init__","EngagementStateMachine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","TokenBudgetManager.__init__"],["MissingVariableError.__init__","VoiceOnboardingFlow.__init__"],["ConversationRepository.__init__","JourneyReport.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ConflictStage.__init__"],["TestUserScoresEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["StateStore.update_state","StateStore.save_state"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TouchpointStage.__init__"],["MemoryUpdateStage.__init__","ElevenLabsConversationsClient.__init__"],["UserRepository.__init__","DashboardE2ETest.__init__"],["BreakupManager.get_relationship_status","check_threshold"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","InMemoryCache.__init__"],["SummaryStage.__init__","SocialCircleGenerator.__init__"],["GeneratedPromptRepository.__init__","TelegramAuth.__init__"],["TouchpointStore.delete","PendingRegistrationRepository.delete"],["ElevenLabsConversationsClient.get_conversation","_headers"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","EvidenceCollector.__init__"],["ConflictStage.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","BreakupManager.__init__"],["DashboardPage.__init__","InboundCallHandler.__init__"],["ConflictStage.__init__","ConflictStore.__init__"],["ViceScorer.process_signals","ViceScorer.process_signals"],["LoginPage.__init__","PortalLoginE2ETest.__init__"],["GameStateStage.__init__","UserNotFoundError.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SupabaseMemory.__init__"],["SituationDetector.detect","_detect_situation_type"],["test_no_fk_violation_with_session","generate_prompt"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","TelegramBot.__init__"],["AuditLog.__init__","GeneratedPromptRepository.__init__"],["HandoffManager.transition","_generate_profile_summary"],["UserMetricsRepository.__init__","EmotionalStage.__init__"],["OnboardingHandler.handle","_handle_drug_tolerance_step"],["MockStage.__init__","TestVicePreferenceRepository.__init__"],["MissingVariableError.__init__","ScoringService.__init__"],["ScoreHistoryRepository.__init__","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MockResult.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","LengthAdjuster.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","ScheduledEventRepository.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MissingVariableError.__init__"],["TestP1ErrorHandling.test_ep2_otp_disabled_shows_already_used","navigate_and_get_content"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MetaNikitaConfig.__init__"],["_ChapterBehaviorsProxy.get","_load_chapter_behaviors"],["TestUserListEndpointAuditLogging.app","TestTextStats.mock_admin_auth"],["ScoreHistoryRepository.__init__","VicePreferenceRepository.__init__"],["ProfileRepository.__init__","TelegramAuth.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageSplitter.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","VoiceAgentConfig.__init__"],["VoiceService.format_text_history_for_voice","get_context_with_text_history"],["ConversationThreadRepository.__init__","PortalLoginE2ETest.__init__"],["EngagementStateRepository.__init__","BreakupManager.__init__"],["test_critical_stage_failure_fast_abort","PsychologyMapper.__init__"],["PromptBuilderStage._render_template","_build_template_vars"],["UserRepository.invalidate_voice_cache","get"],["ConversationsPage.__init__","MockStage.__init__"],["TestFullPipelineE2E.test_context_propagation_across_stages","make_pipeline"],["DashboardPage.__init__","MockReadyPromptRepo.__init__"],["StageError.__init__","EventStore.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","TokenBudgetManager.__init__"],["DailySummaryRepository.__init__","TelegramLinkRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MissingVariableError.__init__"],["UserMetricsRepository.__init__","UserRepository.__init__"],["EngagementStateRepository.__init__","MetaNikitaConfig.__init__"],["TestPipelineResult.test_context_preserved","_make_ctx"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VenueCacheRepository.__init__"],["TelegramLinkRepository.delete_for_user","OnboardingStateRepository.delete"],["VicePreferenceRepository.__init__","BaseRepository.__init__"],["ScoreHistoryRepository.__init__","TestUserMetricsRepository.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","JourneyReport.__init__"],["NikitaThoughtRepository.__init__","EngagementStateMachine.__init__"],["TestUserScoresEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["MissingVariableError.__init__","FullJourneyOrchestrator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","RegistrationHandler.__init__"],["NarrativeArcRepository.increment_conversation_count","NarrativeArcRepository.get_arc_by_id"],["async_session","session_maker"],["TestConversationPromptsEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["MockReadyPromptRepo.clear","MockReadyPromptRepo.clear"],["EventStore.get_event","EventStore._row_to_event"],["TestConversationListEndpoint.app","TestBossEncountersEndpoint.mock_admin_auth"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","LifeSimulator.__init__"],["ExtractionStage.__init__","OTPVerificationHandler.__init__"],["PromptBuilderStage._generate_prompt","_render_template"],["EmojiProcessor.process","EmojiProcessor._add_emoji"],["UserRepository.__init__","MemoryFactRepository.__init__"],["MissingVariableError.__init__","VicePreferenceRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PreferenceConfigurator.__init__"],["DashboardPage.__init__","ProfileCollector.__init__"],["ConversationThreadRepository.__init__","BackstoryRepository.__init__"],["SupabaseHelper.verify_registration_from_result","parse_mcp_result"],["TouchpointStage.__init__","ScoringService.__init__"],["VicePreferenceRepository.__init__","BackstoryGeneratorService.__init__"],["ConversationThreadRepository.__init__","ConversationsE2ETest.__init__"],["HandoffManager.transition","transition"],["MemoryFactRepository.__init__","DatabaseRateLimiter.__init__"],["ProfileRepository.get_by_user_id","TouchpointStore.get"],["ConversationsPage.__init__","HandoffManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OnboardingServerToolHandler.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","GmailMCPClient.__init__"],["UserNotFoundError.__init__","ConflictDetector.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SkipDecision.__init__"],["ConversationsPage.__init__","SupabaseMemory.__init__"],["ConversationThreadRepository.__init__","SummaryStage.__init__"],["DashboardPage.__init__","TouchpointEngine.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageGenerator.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","MessageHandler.__init__"],["MissingVariableError.__init__","TestUserMetricsRepository.__init__"],["PiiSafeFormatter.__init__","SupabaseHelper.__init__"],["ConversationThreadRepository.__init__","EngagementStateRepository.__init__"],["OnboardingStateRepository.get_or_create","InMemoryCache.get"],["TTSConfigService.get_final_settings","TTSConfigService._blend_settings"],["VicePreferenceRepository.__init__","NarrativeArcRepository.__init__"],["NikitaThoughtRepository.create_missing_him_thought","NikitaThoughtRepository.create_thought"],["MemoryUpdateStage._run","MemoryUpdateStage._classify_graph_type"],["PiiSafeFormatter.__init__","LifeSimulator.__init__"],["NikitaThoughtRepository.__init__","ViceScorer.__init__"],["MessageHandler.handle","MessageHandler._score_and_check_boss"],["OnboardingHandler.handle","_handle_interest_step"],["MemoryFactRepository.__init__","InboundCallHandler.__init__"],["TestP0CriticalConcurrency.test_cc1_double_click_returns_success_both_times","TestHelpers.navigate_and_get_content"],["EngagementStateRepository.__init__","GmailMCPClient.__init__"],["MemoryUpdateStage.__init__","JourneyReport.__init__"],["VoiceCallVerifier._verify_database","VoiceCallVerifier._check_conversation"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","SupabaseHelper.__init__"],["ConversationsPage.__init__","TestVicePreferenceRepositoryExtras.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_sets_decay_reason","create_mock_user"],["ConversationThreadRepository.__init__","TelegramBot.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","Phase4GameState.__init__"],["SummaryStage.__init__","PromptLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ConflictDetector.__init__"],["ExtractionStage.__init__","BreakupManager.__init__"],["VicePreferenceRepository.__init__","EscalationManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PipelineOrchestrator.__init__"],["FakeStage.__init__","BasePage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","LifeSimulator.__init__"],["TestRateLimiter.test_ac_fr006_002_warning_when_approaching_daily_limit","mock_incr"],["TouchpointStage.__init__","VicePreferenceRepository.__init__"],["StageError.__init__","SupabaseMemory.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PreferenceConfigurator.__init__"],["DashboardPage.__init__","TriggerDetector.__init__"],["TestPipelineStatusEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["ConversationThreadRepository.__init__","HistoryLoader.__init__"],["TouchpointEngine.deliver_due_touchpoints","TouchpointEngine._deliver_single"],["UserNotFoundError.__init__","DatabaseRateLimiter.__init__"],["SummaryStage.__init__","EmojiProcessor.__init__"],["ExtractionStage.__init__","LengthAdjuster.__init__"],["UserNotFoundError.__init__","ExtractionStage.__init__"],["DailySummaryRepository.__init__","MockMappings.__init__"],["DailySummaryRepository.__init__","PunctuationProcessor.__init__"],["JobExecutionRepository.__init__","BaseRepository.__init__"],["ScoreHistoryRepository.__init__","BackstoryRepository.__init__"],["ExtractionStage.__init__","MetaNikitaConfig.__init__"],["StageError.__init__","MissingVariableError.__init__"],["UserRepository.__init__","TokenValidator.__init__"],["ScoreHistoryRepository.__init__","StrategicSilence.__init__"],["ConversationThreadRepository.__init__","Phase3Portal.__init__"],["analyze_neediness","_call_neediness_llm"],["ScoreHistoryRepository.__init__","ConversationsE2ETest.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SessionDetector.__init__"],["ConversationsE2ETest.get_verification_instructions","ConversationsE2ETest.step1_navigate_command"],["MessageHandler.handle","_needs_onboarding"],["DailySummaryRepository.__init__","DailySummaryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceService.__init__"],["GameStateStage.__init__","OnboardingHandler.__init__"],["EvidenceCollector.save_report","JourneyReport.generate_report"],["DailySummaryRepository.__init__","PromptBuilderStage.__init__"],["TouchpointStage.__init__","TestUserMetricsRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","PsychologyMapper.__init__"],["JobExecutionRepository.__init__","BackstoryGeneratorService.__init__"],["PiiSafeFormatter.__init__","Phase4GameState.__init__"],["TestUserListEndpoint.app","mock_admin_auth"],["ScoreHistoryRepository.__init__","SummaryStage.__init__"],["validate_prompt","get_token_validator"],["ScoreHistoryRepository.__init__","EngagementStateRepository.__init__"],["UserNotFoundError.__init__","InboundCallHandler.__init__"],["SocialCircle.to_dict","UserSocialCircle.to_dict"],["TestNikitaThoughtRepository.test_create_missing_him_thought_72h","TestNikitaThoughtRepository.mock_create_thought"],["GeneratedPromptRepository.__init__","FactExtractor.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","DatabaseRateLimiter.__init__"],["DynamicVariablesBuilder.build_from_user","ServerToolHandler._compute_nikita_energy"],["DashboardPage.__init__","TranscriptManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ExtractionStage.__init__"],["MemoryFactRepository.__init__","ProfileCollector.__init__"],["LoginPage.__init__","MessageHandler.__init__"],["TouchpointStore.delete","TouchpointStore.delete"],["BackstoryRepository.__init__","TokenCounter.__init__"],["MockStage.__init__","BaseRepository.__init__"],["TestUserListEndpoint.app","TestUserDetailEndpoint.mock_admin_auth"],["HandoffManager.execute_handoff","ConflictGenerator.generate"],["EmotionalStage.__init__","VoiceSessionManager.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceCallVerifier.__init__"],["MissingVariableError.__init__","BackstoryRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","Phase4GameState.__init__"],["MissingVariableError.__init__","StrategicSilence.__init__"],["main","run_migration"],["LifeSimStage.__init__","OnboardingStateRepository.__init__"],["FakeStage.__init__","VoiceOnboardingFlow.__init__"],["JobExecutionRepository.__init__","NarrativeArcRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ConflictStore.__init__"],["GameStateStage.__init__","ElevenLabsConversationsClient.__init__"],["ConversationRepository.__init__","ConflictGenerator.__init__"],["GeneratedPromptRepository.__init__","DeliveryResult.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","SocialCircleGenerator.__init__"],["VoiceService._load_context","_compute_nikita_mood"],["ConflictStage.__init__","TestDailySummaryRepositoryExtras.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConflictDetector.__init__"],["ServerToolHandler._get_context","_compute_nikita_mood"],["VicePreferenceRepository.__init__","ScoreHistoryRepository.__init__"],["MockStage.__init__","BackstoryGeneratorService.__init__"],["GeneratedPromptRepository.__init__","SkipDecision.__init__"],["ExtractionStage.__init__","GmailMCPClient.__init__"],["ProfileRepository.__init__","FactExtractor.__init__"],["SummaryStage.__init__","DashboardPage.__init__"],["ReadyPromptRepository.__init__","NarrativeArcSystem.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","InboundCallHandler.__init__"],["PromptBuilderStage._generate_prompt","_enforce_token_budget"],["MissingVariableError.__init__","SummaryStage.__init__"],["ScoreHistoryRepository.__init__","HistoryLoader.__init__"],["ConflictStore.get_conflict_summary","get_user_conflicts"],["test_critical_stage_failure_fast_abort","DecayCalculator.__init__"],["MissingVariableError.__init__","EngagementStateRepository.__init__"],["TestUserMemoryEndpoint.app","TestUserListEndpointAuditLogging.mock_get_session"],["TestHaikuEnrichment.test_fallback_when_enrichment_fails","_make_context"],["UserNotFoundError.__init__","MockReadyPromptRepo.__init__"],["SummaryStage.__init__","SocialCircleRepository.__init__"],["JobExecutionRepository.__init__","EscalationManager.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","Phase1Registration.__init__"],["LifeSimStage.__init__","TestDailySummaryRepositoryContextEngineering.__init__"],["TestPipelineStatusEndpoint.app","TestVoiceConversationList.mock_admin_auth"],["_get_encoder","TokenEstimator.encoder"],["ScoreHistoryRepository.__init__","Phase3Portal.__init__"],["FakeStage.__init__","ScoringService.__init__"],["test_critical_stage_failure_fast_abort","TTSConfigService.__init__"],["ConversationRepository.__init__","LifeSimStage.__init__"],["BackstoryRepository.__init__","ServerToolHandler.__init__"],["VicePreferenceRepository.__init__","ProfileRepository.__init__"],["StateStore.get_state","_row_to_state"],["EngagementStateRepository.__init__","ConflictDetector.__init__"],["ProfileRepository.__init__","DeliveryResult.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","TextPatternProcessor.__init__"],["SummaryStage.__init__","NarrativeArcManager.__init__"],["InMemoryCache.get","UserRepository.get"],["test_critical_stage_failure_fast_abort","OTPVerificationHandler.__init__"],["ProfileRepository.__init__","SkipDecision.__init__"],["LoginPage.__init__","LoginPage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_clamps_to_zero","RateLimiter.__init__"],["MemoryFactRepository.__init__","TriggerDetector.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","EngagementStateMachine.__init__"],["EngagementStateRepository.__init__","Phase1Registration.__init__"],["MessageHandler._score_and_check_boss","_send_boss_opening"],["BreakupManager.check_and_process","trigger_breakup"],["TouchpointStage.__init__","StrategicSilence.__init__"],["DailySummaryRepository.__init__","_ProfileFromAnswers.__init__"],["SummaryStage.__init__","ConflictStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MockReadyPromptRepo.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ResponseTimer.__init__"],["MissingVariableError.__init__","HistoryLoader.__init__"],["MockStage.__init__","EscalationManager.__init__"],["SummaryStage.__init__","InMemoryCache.__init__"],["RecoveryManager.apply_recovery","RecoveryManager.can_recover"],["UserMetricsRepository.__init__","MockStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ExtractionStage.__init__"],["NikitaThoughtRepository.__init__","MessageHandler.__init__"],["BaseRepository.update","_ChapterBehaviorsProxy.get"],["MissingVariableError.__init__","Phase3Portal.__init__"],["_ChapterBehaviorsProxy.get","PackageStore.get"],["UserNotFoundError.__init__","TouchpointEngine.__init__"],["VoiceService.initiate_call","VoiceService._load_user"],["RateLimiter.check","RateLimiter._seconds_until_midnight"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConflictGenerator.__init__"],["FakeStage.__init__","FullJourneyOrchestrator.__init__"],["GeneratedPromptRepository.__init__","SessionDetector.__init__"],["LoginPage.__init__","VoiceCallVerifier.__init__"],["TouchpointStage.__init__","SummaryStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","PortalLoginE2ETest.__init__"],["TouchpointStage.__init__","EngagementStateRepository.__init__"],["NarrativeArcSystem.update_arc","UserNarrativeArc.advance_stage"],["EmotionalStage.__init__","JourneyReport.__init__"],["DashboardPage.__init__","MetaInstructionEngine.__init__"],["LoginPage.__init__","ConflictStore.__init__"],["LifeSimStage.__init__","StateStore.__init__"],["DailySummaryRepository.__init__","StateComputer.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","ProfileCollector.__init__"],["OptimalFrequencyCalculator.get_bounds","get_tolerance_band"],["MessageHandler.handle","OnboardingHandler.handle"],["FakeStage.__init__","VicePreferenceRepository.__init__"],["DashboardPage.__init__","BaseStage.__init__"],["handle_webhook","verify_elevenlabs_signature"],["SummaryStage.__init__","ScheduledEventRepository.__init__"],["DashboardPage.__init__","TokenEstimator.__init__"],["EngagementStateRepository.__init__","ExtractionStage.__init__"],["JobExecutionRepository.__init__","ScoreHistoryRepository.__init__"],["UserRepository.__init__","OnboardingHandler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","TelegramWebhookSimulator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","ConversationThreadRepository.__init__"],["UserMetricsRepository.__init__","HandoffManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","ConversationsPage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","LifeSimStage.__init__"],["TestPipelineContext.test_extraction_fields","_make_ctx"],["session","session_maker"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","UserMetricsRepository.__init__"],["test_critical_stage_failure_fast_abort","BreakupManager.__init__"],["ViceScorer.get_top_vices","get_profile"],["ProfileRepository.__init__","SessionDetector.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TouchpointEngine.__init__"],["UserNotFoundError.__init__","MemoryFactRepository.__init__"],["ConversationThreadRepository.__init__","ScoreCalculator.__init__"],["ConversationThreadRepository.__init__","ConflictStore.__init__"],["ReadyPromptRepository.__init__","ConversationRepository.__init__"],["UserMetricsRepository.__init__","SupabaseMemory.__init__"],["UserNotFoundError.__init__","TriggerDetector.__init__"],["HandoffManager.execute_handoff","generate_and_store_social_circle"],["ConversationsPage.build_verification_sequence","js_get_all_conversations_data"],["GameStateStage.__init__","ScoringService.__init__"],["FakeStage.__init__","TestUserMetricsRepository.__init__"],["count_tokens","get_token_validator"],["BaseRepository.delete_by_id","UserRepository.get"],["BaseRepository.update","TestEmptyPipelineE2E.session"],["SummaryStage.__init__","MemoryUpdateStage.__init__"],["JobExecutionRepository.__init__","ProfileRepository.__init__"],["test_critical_stage_failure_fast_abort","MetaNikitaConfig.__init__"],["NikitaThoughtRepository.__init__","LoginPage.__init__"],["SummaryStage.__init__","ReadyPromptRepository.__init__"],["VoiceEventScheduler.schedule_follow_up","_create_event"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","StageError.__init__"],["ResponseDelivery.queue","_send_now"],["EngagementStateRepository.__init__","ConversationThreadRepository.__init__"],["StageError.__init__","SocialCircleGenerator.__init__"],["ExtractionStage.__init__","ConflictDetector.__init__"],["ConflictGenerator.generate","_check_should_skip"],["MemoryUpdateStage.__init__","ConflictGenerator.__init__"],["ScoreCalculator.apply_multiplier","ScoreCalculator.adjust"],["ConversationsPage.__init__","DatabaseRateLimiter.__init__"],["MockStage.__init__","ScoreHistoryRepository.__init__"],["ConflictStage.__init__","TouchpointStage.__init__"],["UserRepository.__init__","ElevenLabsConversationsClient.__init__"],["OnboardingServerToolHandler.complete_onboarding","OnboardingServerToolHandler._get_or_create_profile"],["LoginPage.__init__","ResponseTimer.__init__"],["UserMetricsRepository.__init__","TestVicePreferenceRepositoryExtras.__init__"],["RateLimiter.__init__","PackageStore.get"],["BackstoryRepository.__init__","TelegramAuth.__init__"],["TestConversationThreadRepository.test_bulk_resolve_threads_resolves_found","mock_resolve_thread"],["ClinginessDetector.detect","_response_time_signal"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","DecayCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TriggerDetector.__init__"],["ExtractionStage.__init__","Phase1Registration.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","DashboardE2ETest.__init__"],["ConflictStage.__init__","EvidenceCollector.__init__"],["main","call_backend"],["UserNotFoundError.__init__","TranscriptManager.__init__"],["NikitaThoughtRepository.__init__","VoiceCallVerifier.__init__"],["TestUserScoresEndpoint.app","TestTextStats.mock_admin_auth"],["ServerToolHandler.handle","_score_turn"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","VenueResearchService.__init__"],["TestAuditLogsEndpoint.app","TestThoughtsList.mock_admin_auth"],["SupabaseMemory.add_fact","add_fact"],["EngagementStateRepository.__init__","StageError.__init__"],["TestNikitaThoughtRepository.test_create_missing_him_thought_24h","mock_create_thought"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","TTSConfigService.__init__"],["DailySummaryRepository.__init__","TouchpointScheduler.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","PromptLoader.__init__"],["MockStage.__init__","ProfileRepository.__init__"],["MemoryUpdateStage.__init__","LifeSimStage.__init__"],["EngagementStateRepository.__init__","MockReadyPromptRepo.__init__"],["ConversationsPage.__init__","InboundCallHandler.__init__"],["GameStateStage.__init__","VicePreferenceRepository.__init__"],["SupabaseMemory.add_relationship_episode","add_fact"],["UserRepository.update_last_interaction","UserRepository.get"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","OTPVerificationHandler.__init__"],["EngagementStateMachine.on_chapter_change","EngagementStateMachine._reset_counters"],["BackstoryGeneratorService.generate_scenarios","BossJudgment._call_llm"],["ElevenLabsConversationsClient.get_latest_conversation","ElevenLabsConversationsClient.list_conversations"],["TestUIUX.test_error_page_has_instructions","navigate_and_get_content"],["EngagementStateRepository.__init__","DashboardE2ETest.__init__"],["ConflictStage.__init__","VoiceAgentConfig.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","EmojiProcessor.__init__"],["PromptBuilderStage.__init__","NarrativeArcRepository.__init__"],["ScoreHistoryRepository.__init__","ScoreCalculator.__init__"],["TouchpointEngine.evaluate_and_schedule_for_user","_compute_delivery_time"],["test_critical_stage_failure_fast_abort","GmailMCPClient.__init__"],["UserNotFoundError.__init__","TokenValidator.__init__"],["ExtractionStage.__init__","ExtractionStage.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TranscriptManager.__init__"],["MemoryFactRepository.__init__","MetaInstructionEngine.__init__"],["TestWebhookHandler.test_post_call_transcription_stored","create_webhook_signature"],["MemoryFactRepository.__init__","BaseStage.__init__"],["ReadyPromptRepository.__init__","VoiceCallScorer.__init__"],["GameStateStage.__init__","TestUserMetricsRepository.__init__"],["LifeSimStage.__init__","InstructionSelector.__init__"],["MemoryFactRepository.__init__","TokenEstimator.__init__"],["LoginPage.build_login_sequence","js_enter_email"],["DailySummaryRepository.__init__","EmotionalStage.__init__"],["FakeStage.__init__","BackstoryRepository.__init__"],["FakeStage.__init__","StrategicSilence.__init__"],["DynamicVariablesBuilder.build_from_context","_get_day_of_week"],["MockStage.__init__","EventGenerator.__init__"],["ScoreHistoryRepository.__init__","NikitaThoughtRepository.__init__"],["EngagementStateRepository.__init__","TouchpointEngine.__init__"],["GeneratedPromptRepository.__init__","TelegramWebhookSimulator.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","DashboardPage.__init__"],["NikitaThoughtRepository.__init__","ResponseTimer.__init__"],["ExtractionStage.__init__","ConversationThreadRepository.__init__"],["MissingVariableError.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","MemoryFactRepository.__init__"],["FakeStage.__init__","SummaryStage.__init__"],["TestPromptBuilderStage.test_graceful_failure_on_storage_error","_make_context"],["TestUserListEndpointAuditLogging.app","TestUserListEndpoint.mock_get_session"],["FakeStage.__init__","EngagementStateRepository.__init__"],["NikitaThoughtRepository.bulk_create_thoughts","NikitaThoughtRepository.create_thought"],["ScoreHistoryRepository.__init__","ResponseDelivery.__init__"],["ConflictStage.__init__","OnboardingServerToolHandler.__init__"],["TestDecayCalculatorCalculateDecay.test_calculate_decay_correct_amount_ch1_10h_overdue","create_mock_user"],["UserMetricsRepository.update_metrics","EngagementStateRepository.get_by_user_id"],["TestVoiceHandoffIntegration.test_execute_handoff_with_voice_callback_passes_user_name","TestVoiceHandoffIntegration.capture_callback"],["PortalLoginE2ETest.get_complete_flow_instructions","step2_wait_for_success_js"],["ConversationsPage.__init__","ProfileCollector.__init__"],["DashboardPage.__init__","VoiceSessionManager.__init__"],["TestConversationListEndpoint.app","TestElevenLabsDetail.mock_admin_auth"],["ConversationRepository.__init__","FakeStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DashboardPage.__init__"],["MissingVariableError.__init__","NikitaThoughtRepository.__init__"],["ProfileRepository.__init__","TelegramWebhookSimulator.__init__"],["ExtractionStage.__init__","StageError.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","MessageSplitter.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","MessageHandler.__init__"],["EngagementStateRepository.__init__","MemoryFactRepository.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","SocialCircleRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","MetaNikitaConfig.__init__"],["MockReadyPromptRepo.clear","clear"],["ScoreHistoryRepository.__init__","EntityManager.__init__"],["ExtractionStage.__init__","MockReadyPromptRepo.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","ConflictStage.__init__"],["TestSystemOverviewEndpoint.app","TestVoiceConversationDetail.mock_admin_auth"],["DailySummaryRepository.__init__","__init__"],["UserRepository.__init__","JourneyReport.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","BasePage.__init__"],["StateComputer._compute_base_state","StateComputer._compute_base_state"],["FakeStage.__init__","HistoryLoader.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","InMemoryCache.__init__"],["MissingVariableError.__init__","ResponseDelivery.__init__"],["GeneratedPromptRepository.__init__","VenueResearchService.__init__"],["JourneyContext.fail","JourneyContext.transition_to"],["ExtractionStage.__init__","DashboardE2ETest.__init__"],["rich_context","make_context"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","NarrativeArcManager.__init__"],["GeneratedPromptRepository.__init__","PromptLoader.__init__"],["FakeStage.__init__","Phase3Portal.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","DecayProcessor.__init__"],["BaseRepository.update","WebhookTestData.create"],["mock_user","test_game_state"],["mock_embeddings","test_memory_embedding"],["TestNonCriticalFailureE2E.test_life_sim_failure_continues","make_pipeline"],["VoiceOnboardingFlow.process_ready_response","VoiceOnboardingFlow.is_confirmation"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","MetaInstructionEngine.__init__"],["GameStateStage.__init__","StrategicSilence.__init__"],["TestVoiceIntegrationFlow.test_concurrent_reads_safe","_make_server_handler"],["NarrativeArcManager.maybe_create_arc","NarrativeArcManager.create_arc"],["EmotionalStage.__init__","ConflictGenerator.__init__"],["CalibrationCalculator.compute","_frequency_component"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MoodCalculator.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","BaseStage.__init__"],["ReadyPromptRepository.__init__","GameStateStage.__init__"],["PiiSafeFormatter.__init__","MessageSplitter.__init__"],["GeneratedPromptRepository.__init__","EmojiProcessor.__init__"],["ServerToolHandler._get_context","InboundCallHandler._try_load_ready_prompt"],["EngagementStateRepository.__init__","TranscriptManager.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","TokenEstimator.__init__"],["MissingVariableError.__init__","EntityManager.__init__"],["ConversationsPage.__init__","TriggerDetector.__init__"],["PromptBuilderStage.__init__","SupabaseHelper.__init__"],["PortalLoginE2ETest.get_complete_flow_instructions","PortalLoginE2ETest.step3_build_gmail_query"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_max_5","TokenValidator.__init__"],["TestAuditLogsEndpoint.app","TestSystemOverviewEndpoint.mock_admin_auth"],["test_critical_stage_failure_fast_abort","ConflictDetector.__init__"],["ProfileRepository.__init__","VenueResearchService.__init__"],["BasePage.navigate_command","BasePage.url"],["ConversationThreadRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["GameStateStage.__init__","SummaryStage.__init__"],["ScoreHistoryRepository.__init__","ViceAnalyzer.__init__"],["TouchpointStage.__init__","NikitaThoughtRepository.__init__"],["ExtractionStage.__init__","TouchpointEngine.__init__"],["PromptBuilderStage.__init__","LifeSimulator.__init__"],["ProfileRepository.__init__","PromptLoader.__init__"],["ConflictStage.__init__","PsychologyMapper.__init__"],["GameStateStage.__init__","EngagementStateRepository.__init__"],["TestErrorLogEndpoint.app","TestTextConversationList.mock_admin_auth"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","LoginPage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","GmailMCPClient.__init__"],["MessageSplitter.split","_find_split_points"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","MessageSplitter.__init__"],["TelegramWebhookSimulator.send_command","_build_command_update"],["BackstoryRepository.__init__","FactExtractor.__init__"],["test_critical_stage_failure_fast_abort","Phase1Registration.__init__"],["ElevenLabsConversationsClient.get_agent_config","_headers"],["ConversationRepository.__init__","TelegramLinkRepository.__init__"],["PiiSafeFormatter.__init__","VenueCacheRepository.__init__"],["EmotionalStage.__init__","ConversationsPage.__init__"],["LifeSimStage.__init__","GmailHelper.__init__"],["EmotionalStage.__init__","LifeSimStage.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ScheduledEventRepository.__init__"],["LifeSimStage.__init__","JobExecutionRepository.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","VoiceOnboardingFlow.__init__"],["ProfileRepository.__init__","EmojiProcessor.__init__"],["TouchpointStage.__init__","ResponseDelivery.__init__"],["TestSystemOverviewEndpoint.app","mock_get_session"],["EngagementStateRepository.__init__","TokenValidator.__init__"],["VoiceService.initiate_call","VoiceService._load_context"],["TestOTPFlowSteps.test_step5_verification_parsing","OTPTestContext.create"],["TestSessionPersistence.test_ac_fr005_003_no_cross_user_contamination","VoiceOnboardingFlow.handle_message"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","EvidenceCollector.__init__"],["MemoryFactRepository.__init__","TextPatternProcessor.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","VoiceCallVerifier.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","VenueCacheRepository.__init__"],["StageError.__init__","DashboardPage.__init__"],["BackstoryRepository.__init__","DeliveryResult.__init__"],["TestPipelineOrchestratorHappyPath.test_all_stages_called_in_order","TestPipelineOrchestratorHappyPath.execute"],["VicePreferenceRepository.__init__","TokenCounter.__init__"],["ExtractionStage.__init__","MemoryFactRepository.__init__"],["MemoryFactRepository.__init__","RateLimiter.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","PipelineOrchestrator.__init__"],["ConversationsPage.__init__","InMemoryCache.__init__"],["TouchpointStage.__init__","FakeStage.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ConflictStore.__init__"],["UserMetricsRepository.__init__","DatabaseRateLimiter.__init__"],["MissingVariableError.__init__","ViceAnalyzer.__init__"],["TestUserListEndpoint.app","TestTextStats.mock_admin_auth"],["BackstoryRepository.__init__","SkipDecision.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","MemoryUpdateStage.__init__"],["ReadyPromptRepository.__init__","ScoreAnalyzer.__init__"],["PreferenceConfigurator.get_behavioral_config","get_pacing_config"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","MetaInstructionEngine.__init__"],["TestVicePreferenceRepositoryExtras.test_update_engagement_applies_delta","ReadyPromptRepository.__init__"],["TouchpointStage.__init__","EntityManager.__init__"],["test_critical_stage_failure_fast_abort","ExtractionStage.__init__"],["GeneratedPromptRepository.__init__","StateStore.__init__"],["BackstoryRepository.__init__","AuditLog.__init__"],["TestUserMetricsRepository.test_update_metrics_applies_deltas","BaseStage.__init__"],["SummaryStage.__init__","GeneratedPromptRepository.__init__"],["ScoreHistoryRepository.__init__","ConversationConfigBuilder.__init__"],["PromptBuilderStage.__init__","Phase4GameState.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","VoiceAgentConfig.__init__"],["GeneratedPromptRepository.__init__","SocialCircleRepository.__init__"],["TestAuditLogsEndpoint.app","TestUserScoresEndpoint.mock_admin_auth"],["StageError.__init__","NarrativeArcManager.__init__"],["ScoreHistoryRepository.__init__","TestDailySummaryRepositoryExtras.__init__"],["UserMetricsRepository.__init__","InboundCallHandler.__init__"],["StageError.__init__","ConflictStage.__init__"],["validate_prompt","TokenValidator.validate"],["ReadyPromptRepository.__init__","TokenBudgetManager.__init__"],["MockAgentHelper.patch_generate_response","mock_generate"],["LifeSimStage.__init__","ResolutionManager.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_partial_update","TelegramLinkRepository.__init__"],["VicePreferenceRepository.__init__","ServerToolHandler.__init__"],["StageError.__init__","InMemoryCache.__init__"],["GeneratedPromptRepository.__init__","DecayProcessor.__init__"],["InboundCallHandler._get_conversation_config_override","VoiceAgentConfig._get_first_message"],["ScoreAnalyzer.analyze","BossJudgment._call_llm"],["TestEventStore.mock_session_factory","ViceService.__aexit__"],["ProfileRepository.__init__","StateStore.__init__"],["test_critical_stage_failure_fast_abort","ConversationThreadRepository.__init__"],["NeglectDetector._frequency_signal","UserMetricsRepository._clamp"],["AuditLog.__init__","SupabaseHelper.__init__"],["TestConflictStage.test_conflict_low_score_triggers","_make_context"],["BaseStage.execute","ok"],["VoiceOnboardingFlow.initiate_onboarding_call","VoiceOnboardingFlow._call_elevenlabs"],["UserRepository.complete_onboarding","TouchpointStore.get"],["InboundCallHandler.handle_incoming_call","VoiceSessionManager.create_session"],["DailySummaryRepository.__init__","EventStore.__init__"],["TestDailySummaryRepositoryExtras.test_update_summary_updates_fields","ResponseTimer.__init__"],["MissingVariableError.__init__","ConversationConfigBuilder.__init__"],["AuditLog.__init__","LifeSimulator.__init__"],["GeneratedPromptRepository.__init__","MoodCalculator.__init__"],["UserNotFoundError.__init__","VoiceSessionManager.__init__"],["TestNikitaThoughtRepository.test_expire_missing_him_thoughts_marks_used","mock_get_active"],["TouchpointStage.__init__","ViceAnalyzer.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_positive_delta","PipelineOrchestrator.__init__"],["TouchpointScheduler.evaluate_event_trigger","get_config"],["ConversationRepository.__init__","MockMappings.__init__"],["ConversationRepository.__init__","PunctuationProcessor.__init__"],["BaseRepository.update","TouchpointStore.get"],["VicePreferenceRepository.__init__","PendingRegistrationRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","OnboardingServerToolHandler.__init__"],["analyze_distraction","UserMetricsRepository._clamp"],["StageError.__init__","ScheduledEventRepository.__init__"],["mock_extraction","test_extraction"],["ReadyPromptRepository.__init__","MockResult.__init__"],["BackstoryGeneratorService.generate_scenarios","_build_scenario_prompt"],["ExtractionStage.__init__","TokenValidator.__init__"],["TestErrorLogEndpoint.app","TestUserListEndpointAuditLogging.mock_admin_auth"],["ConversationRepository.__init__","DailySummaryRepository.__init__"],["ProfileRepository.__init__","DecayProcessor.__init__"],["ConversationRepository.__init__","PromptBuilderStage.__init__"],["create_telegram_router","auth_confirm"],["FakeStage.__init__","ScoreCalculator.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","ConflictDetector.__init__"],["test_critical_stage_failure_fast_abort","MockReadyPromptRepo.__init__"],["TestConversationPromptsEndpoint.app","TestSystemOverviewEndpoint.mock_get_session"],["VoiceEventScheduler.schedule_follow_up","VoiceEventScheduler._create_event"],["NeglectDetector.detect","ClinginessDetector._response_time_signal"],["ConversationThreadRepository.__init__","TouchpointStage.__init__"],["ConversationsPage.__init__","MetaInstructionEngine.__init__"],["ProfileRepository.__init__","MoodCalculator.__init__"],["ConversationThreadRepository.get_threads_for_prompt","get_open_threads"],["SocialCircleGenerator.generate_social_circle","SocialCircleGenerator._apply_tech_hub_adaptations"],["test_critical_stage_failure_fast_abort","DashboardE2ETest.__init__"],["TestUserMetricsRepository.test_update_metrics_clamps_to_bounds","VoiceSessionManager.__init__"],["ConversationsPage.__init__","BaseStage.__init__"],["ConversationThreadRepository.__init__","EvidenceCollector.__init__"],["StageError.__init__","MemoryUpdateStage.__init__"],["TestVicePreferenceRepository.test_update_intensity_applies_negative_delta","Phase1Registration.__init__"],["MemoryUpdateStage.__init__","TelegramLinkRepository.__init__"],["TestDailySummaryRepositoryContextEngineering.test_update_summary_context_fields","ExperimentLoader.__init__"],["ConversationsPage.__init__","TokenEstimator.__init__"],["UserMetricsRepository.__init__","ProfileCollector.__init__"],["LifeSimStage.__init__","OTPFlowE2ETest.__init__"],["FakeStage.__init__","NikitaThoughtRepository.__init__"],["TestTimeoutFallback.test_timeout_fallback_includes_cache_friendly","timeout_function"],["ReadyPromptRepository.__init__","RegistrationHandler.__init__"],["UserRepository.update_game_status","_ChapterBehaviorsProxy.get"],["AuditLog.__init__","Phase4GameState.__init__"],["TestVicePreferenceRepository.test_update_intensity_clamps_to_min_1","EngagementStateMachine.__init__"],["TouchpointStage.__init__","ConversationConfigBuilder.__init__"],["TestErrorLogEndpoint.app","TestErrorLogEndpoint.mock_get_session"],["MockStage.__init__","TokenCounter.__init__"],["UserRepository.__init__","ConflictGenerator.__init__"],["ReadyPromptRepository.__init__","PreferenceConfigurator.__init__"],["GeneratedPromptRepository.__init__","ReadyPromptRepository.__init__"],["GeneratedPromptRepository.__init__","InstructionSelector.__init__"],["ConversationThreadRepository.__init__","VoiceAgentConfig.__init__"],["FakeStage.__init__","ResponseDelivery.__init__"],["TestBossEncountersEndpoint.app","TestConversationPromptsEndpoint.mock_get_session"],["OnboardingHandler.handle","OnboardingHandler._handle_skip"],["JobExecutionRepository.__init__","ServerToolHandler.__init__"],["test_critical_stage_failure_fast_abort","TouchpointEngine.__init__"],["ConversationConfigBuilder.build_config","DynamicVariablesBuilder.build_from_user"]],"deps":{"nikita/agents/text/history.py":["logging","typing","uuid","pydantic_ai.messages","nikita.context.utils.token_counter"],"nikita/agents/text/token_budget.py":["logging","dataclasses","typing","nikita.context.utils.token_counter"],"nikita/agents/voice/validation.py":["nikita.agents.voice.validation","logging","typing","nikita.config.settings","nikita.config.settings","httpx","httpx"],"nikita/api/dependencies/audit.py":["logging","typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.audit_log"],"nikita/api/dependencies/error_logging.py":["logging","traceback","datetime","typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.error_log","sqlalchemy","sqlalchemy","datetime","sqlalchemy"],"nikita/api/dependencies/logging.py":["nikita.api.dependencies.logging","logging","re","typing"],"nikita/db/models/audit_log.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/error_log.py":["datetime","enum","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/narrative_arc.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/social_circle.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/telegram_link.py":["secrets","string","datetime","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","uuid","nikita.db.models.base","nikita.db.models.base","nikita.db.models.base"],"nikita/db/repositories/narrative_arc_repository.py":["logging","datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.narrative_arc","nikita.life_simulation.arcs","random"],"nikita/db/repositories/social_circle_repository.py":["logging","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.social_circle","nikita.life_simulation.social_generator"],"nikita/db/repositories/telegram_link_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.telegram_link"],"nikita/life_simulation/arcs.py":["logging","random","dataclasses","datetime","enum","typing","uuid"],"nikita/life_simulation/psychology_mapper.py":["logging","dataclasses","enum","typing"],"nikita/life_simulation/social_generator.py":["logging","dataclasses","typing","uuid"],"scripts/configure_nikita_tools.py":["asyncio","os","sys","httpx"],"tests/agents/text/test_history.py":["pytest","uuid","pydantic_ai.messages","nikita.agents.text.history","nikita.context.utils.token_counter"],"tests/agents/text/test_history_errors.py":["pytest","uuid","unittest.mock","logging","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","pydantic_ai.messages","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history","nikita.agents.text.history"],"tests/agents/text/test_llm_timeout.py":["asyncio","os","unittest.mock","uuid","pytest","nikita.agents.text.agent","nikita.agents.text.agent","logging","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_token_budget.py":["pytest","dataclasses","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","logging","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget","nikita.agents.text.token_budget"],"tests/agents/voice/test_context_block.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.agents.voice.context","nikita.agents.voice.models","nikita.db.models.user","nikita.agents.voice.models","types","types"],"tests/agents/voice/test_dynamic_vars_expanded.py":["pytest","datetime","unittest.mock","uuid","nikita.agents.voice.models","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context"],"tests/agents/voice/test_logging.py":["logging","pytest","unittest.mock","uuid","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice.inbound","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.api.routes","nikita.api.routes","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice","nikita.agents.voice"],"tests/agents/voice/test_outbound_prompt.py":["unittest.mock","uuid","pytest","nikita.agents.voice.service"],"tests/agents/voice/test_tool_descriptions.py":["pytest","nikita.agents.voice.server_tools"],"tests/api/dependencies/conftest.py":["os","collections.abc","uuid","pytest","pytest_asyncio","sqlalchemy.ext.asyncio","dotenv"],"tests/api/dependencies/test_audit.py":["datetime","unittest.mock","uuid","pytest","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.api.dependencies.audit","nikita.db.models.audit_log","nikita.db.models.audit_log","nikita.db.models.audit_log"],"tests/api/dependencies/test_error_logging.py":["datetime","unittest.mock","uuid","pytest","nikita.db.models.error_log","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging","nikita.api.dependencies.error_logging"],"tests/api/dependencies/test_logging.py":["logging","uuid","pytest","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging","nikita.api.dependencies.logging"],"tests/api/routes/test_admin_monitoring.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","asyncio","nikita.api.routes.admin","nikita.db.database","decimal","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","nikita.api.routes.admin","nikita.db.database","decimal","decimal","nikita.api.routes.admin","nikita.db.database"],"tests/api/routes/test_admin_processing_stats.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin","nikita.api.schemas.admin","nikita.db.database","nikita.db.models.job_execution"],"tests/api/routes/test_portal_deletion.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.portal","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user"],"tests/api/routes/test_portal_settings.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.portal","nikita.api.schemas.portal","nikita.api.schemas.portal"],"tests/api/routes/test_summary_llm.py":["unittest.mock","pytest","nikita.api.routes.tasks","nikita.api.routes.tasks","nikita.api.routes.tasks","nikita.api.routes.tasks","asyncio","nikita.api.routes.tasks","nikita.api.routes.tasks","nikita.api.routes.tasks"],"tests/api/routes/test_telegram_linking.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.portal","nikita.db.models.telegram_link","nikita.db.models.telegram_link","nikita.db.models.telegram_link","nikita.db.repositories.telegram_link_repository","nikita.db.repositories.telegram_link_repository","nikita.db.repositories.telegram_link_repository"],"tests/api/schemas/test_monitoring.py":["datetime","uuid","pytest","pydantic","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas.monitoring","nikita.api.schemas","pydantic","nikita.api.schemas.monitoring"],"tests/context/utils/test_token_estimator.py":["pytest","nikita.context.utils.token_counter","time"],"tests/db/integration/test_profile_integration.py":["datetime","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.profile","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository"],"tests/db/models/test_generated_prompt.py":["datetime","uuid","pytest","nikita.db.models.generated_prompt"],"tests/db/repositories/test_generated_prompt_repository.py":["pytest","decimal","unittest.mock","uuid","nikita.db.models.generated_prompt","nikita.db.repositories.generated_prompt_repository"],"tests/db/test_conversation_stuck.py":["datetime","unittest.mock","uuid","pytest","nikita.db.models.conversation","nikita.db.repositories.conversation_repository","nikita.api.routes.tasks","nikita.api.routes.tasks"],"tests/life_simulation/test_arcs.py":["random","datetime","uuid","pytest","nikita.life_simulation.arcs"],"tests/life_simulation/test_psychology_mapper.py":["pytest","nikita.life_simulation.psychology_mapper"],"tests/life_simulation/test_social_generator.py":["uuid","pytest","nikita.life_simulation.social_generator"],"tests/onboarding/test_handoff_social_circle.py":["datetime","unittest.mock","uuid","pytest","nikita.onboarding.handoff","nikita.onboarding.models","logging","nikita.onboarding.handoff","nikita.onboarding.handoff","logging","nikita.onboarding.handoff","nikita.onboarding.handoff"],"tests/onboarding/test_pipeline_bootstrap.py":["unittest.mock","uuid","pytest","nikita.onboarding.handoff"],"tests/pipeline/test_cache_sync.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.pipeline.models","nikita.pipeline.stages.prompt_builder"],"tests/pipeline/test_feature_flags.py":["os","unittest.mock","uuid","pytest","nikita.config.settings","nikita.config.settings","nikita.config.settings","nikita.config.settings"],"tests/pipeline_fixes/test_issue_026_decimal_float.py":["pytest","decimal","uuid","nikita.emotional_state.computer"],"tests/pipeline_fixes/test_issue_027_text_pattern_attribute.py":["pytest","nikita.text_patterns.models"],"tests/pipeline_fixes/test_issue_028_calibration_result.py":["pytest","decimal","pydantic","nikita.engine.engagement.models","nikita.engine.engagement.calculator"],"tests/touchpoints/test_emotional_integration.py":["os","pytest","datetime","unittest.mock","uuid","nikita.emotional_state.models","nikita.touchpoints.engine","nikita.touchpoints.models","nikita.touchpoints.models"],"nikita/agents/text/__init__.py":["logging","time","typing","uuid","pydantic_ai","nikita.agents.text.deps","nikita.agents.text.agent","nikita.config.settings","nikita.db.models.user","nikita.memory.supabase_memory","nikita.memory","nikita.db.database","nikita.db.repositories.user_repository"],"nikita/agents/text/agent.py":["asyncio","logging","time","functools","typing","pydantic_ai","nikita.agents.text.deps","nikita.engine.constants","nikita.prompts.nikita_persona","uuid","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.memory.supabase_memory","nikita.agents.text.tools","logging","nikita.db.database","nikita.db.repositories.ready_prompt_repository","logging","nikita.config.settings","nikita.db.database","nikita.agents.text.history","pydantic_ai.messages"],"nikita/agents/text/deps.py":["dataclasses","typing","uuid","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.db.models.user","nikita.memory.supabase_memory"],"nikita/agents/text/facts.py":["dataclasses","typing"],"nikita/agents/text/handler.py":["logging","dataclasses","datetime","typing","uuid","sqlalchemy.ext.asyncio","nikita.agents.text.facts","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text","nikita.agents.text.agent","nikita.text_patterns.processor"],"nikita/agents/text/skip.py":["random","typing"],"nikita/agents/text/timing.py":["logging","random","typing","nikita.config.settings"],"nikita/agents/text/tools.py":["typing","pydantic_ai","nikita.agents.text.deps","warnings"],"nikita/agents/voice/__init__.py":["logging","typing","nikita.agents.voice.models","nikita.agents.voice.deps","nikita.agents.voice.service","nikita.agents.voice.client","nikita.agents.voice.context","nikita.agents.voice.scoring","nikita.agents.voice.tts_config","nikita.agents.voice.context","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.agents.voice.client","nikita.agents.voice.server_tools","nikita.agents.voice.tts_config","nikita.agents.voice.context"],"nikita/agents/voice/availability.py":["logging","random","typing","nikita.db.models.user"],"nikita/agents/voice/config.py":["logging","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user"],"nikita/agents/voice/context.py":["logging","datetime","typing","uuid","nikita.agents.voice.models","nikita.agents.voice.tts_config","nikita.config.settings","nikita.db.models.user","nikita.agents.voice.config","typing"],"nikita/agents/voice/deps.py":["logging","dataclasses","datetime","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user","nikita.memory.supabase_memory"],"nikita/agents/voice/elevenlabs_client.py":["logging","dataclasses","datetime","enum","typing","httpx","nikita.agents.voice.models","nikita.config.settings"],"nikita/agents/voice/inbound.py":["logging","datetime","typing","uuid","nikita.db.models.user","hashlib","hmac","time","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","nikita.agents.voice.availability","nikita.agents.voice.context","nikita.agents.voice.tts_config","nikita.config.settings","nikita.db.database","nikita.db.repositories.ready_prompt_repository","nikita.agents.voice.config","nikita.config.settings","nikita.agents.voice.tts_config"],"nikita/agents/voice/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/agents/voice/scheduling.py":["logging","random","datetime","typing","uuid","nikita.db.models.scheduled_event","nikita.db.models.user","nikita.config.settings","nikita.db.database","nikita.db.repositories.scheduled_event_repository","nikita.agents.voice.service","nikita.platforms.telegram.bot","nikita.db.database","nikita.db.repositories.scheduled_event_repository"],"nikita/agents/voice/scoring.py":["logging","dataclasses","decimal","typing","uuid","nikita.engine.scoring.analyzer","nikita.engine.scoring.models","nikita.db.database","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository"],"nikita/agents/voice/server_tools.py":["asyncio","hashlib","hmac","logging","time","datetime","functools","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","datetime","nikita.memory","nikita.db.repositories.thread_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.profile_repository","nikita.prompts.voice_persona","nikita.engine.constants","nikita.config.settings","nikita.db.repositories.ready_prompt_repository","nikita.life_simulation","nikita.emotional_state","nikita.conflicts","nikita.memory","nikita.db.database","nikita.db.repositories.thread_repository","nikita.engine.scoring.analyzer","nikita.engine.scoring.models","nikita.db.database","nikita.db.repositories.user_repository","nikita.memory","nikita.config.settings"],"nikita/agents/voice/service.py":["hashlib","hmac","logging","secrets","time","datetime","functools","typing","uuid","nikita.agents.voice.models","nikita.config.settings","nikita.db.models.user","nikita.memory.supabase_memory","nikita.config.settings","nikita.db.database","nikita.db.repositories.ready_prompt_repository","nikita.db.database","nikita.db.models.user","sqlalchemy","sqlalchemy.orm","nikita.memory","nikita.agents.voice.config","nikita.config.settings","nikita.memory","nikita.memory","nikita.onboarding","httpx","decimal","nikita.agents.voice.scoring","nikita.db.database","nikita.db.repositories.user_repository","nikita.engine.scoring.models","nikita.config.settings"],"nikita/agents/voice/transcript.py":["logging","datetime","typing","uuid","nikita.agents.voice.elevenlabs_client","nikita.agents.voice.models","sqlalchemy.ext.asyncio","pydantic","pydantic_ai","nikita.memory"],"nikita/agents/voice/tts_config.py":["logging","typing","nikita.agents.voice.models"],"nikita/api/dependencies/auth.py":["uuid","jwt","fastapi","fastapi.security","nikita.config.settings"],"nikita/api/main.py":["logging","sys","time","contextlib","typing","fastapi","fastapi.middleware.cors","fastapi.responses","starlette.middleware.base","nikita.config.settings","sqlalchemy","nikita.db.database","nikita.agents.voice.validation","nikita.platforms.telegram.bot","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.routes","nikita.api.dependencies.error_logging","nikita.db.database","nikita.db.models.error_log","sqlalchemy","nikita.db.database","uvicorn"],"nikita/api/routes/admin.py":["datetime","typing","uuid","fastapi","sqlalchemy","sqlalchemy.ext.asyncio","nikita.api.schemas.admin","nikita.db.models.job_execution","nikita.api.schemas.portal","nikita.api.dependencies.auth","nikita.db.database","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","asyncio","nikita.memory","nikita.db.models.game","nikita.db.models.generated_prompt","datetime","datetime","datetime","datetime","nikita.db.models.error_log","nikita.db.models.game","datetime","nikita.db.models.audit_log","nikita.pipeline.orchestrator"],"nikita/api/routes/admin_debug.py":["datetime","typing","uuid","fastapi","sqlalchemy","sqlalchemy.ext.asyncio","nikita.api.dependencies.auth","nikita.api.schemas.admin_debug","nikita.db.database","nikita.db.models.engagement","nikita.db.models.job_execution","nikita.db.models.conversation","nikita.db.models.user","nikita.db.repositories.engagement_repository","nikita.db.repositories.job_execution_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.engine.constants","nikita.memory","nikita.db.repositories.generated_prompt_repository","nikita.db.repositories.generated_prompt_repository","nikita.db.repositories.user_repository","sqlalchemy.orm","sqlalchemy.orm","nikita.agents.voice.elevenlabs_client","nikita.config.settings","nikita.agents.voice.elevenlabs_client","sqlalchemy.orm","sqlalchemy.orm","nikita.db.models.context","nikita.db.models.context","nikita.db.models.context"],"nikita/api/routes/onboarding.py":["hashlib","hmac","logging","time","typing","uuid","fastapi","pydantic","sqlalchemy.ext.asyncio","nikita.config.elevenlabs","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","nikita.onboarding","nikita.onboarding.meta_nikita","json","nikita.agents.voice.service","nikita.onboarding.meta_nikita"],"nikita/api/routes/portal.py":["datetime","decimal","typing","uuid","fastapi","sqlalchemy.ext.asyncio","nikita.api.dependencies.auth","nikita.api.schemas.portal","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.telegram_link_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.engine.constants"],"nikita/api/routes/tasks.py":["logging","decimal","fastapi","nikita.config.settings","nikita.db.database","nikita.db.dependencies","nikita.db.models.job_execution","nikita.db.repositories.job_execution_repository","asyncio","pydantic_ai","pydantic_ai.models.anthropic","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository","nikita.engine.decay.processor","nikita.db.models.scheduled_event","nikita.db.repositories.scheduled_event_repository","nikita.platforms.telegram.bot","nikita.agents.voice.service","nikita.db.repositories.user_repository","datetime","datetime","sqlalchemy","nikita.db.models.context","nikita.db.repositories.conversation_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.pending_registration_repository","nikita.context.session_detector","nikita.pipeline.orchestrator","nikita.db.repositories.conversation_repository","nikita.touchpoints","nikita.db.repositories.conversation_repository","nikita.touchpoints.engine","nikita.db.repositories.conversation_repository"],"nikita/api/routes/telegram.py":["typing","hmac","html","fastapi","fastapi.responses","pydantic","logging","uuid","nikita.config.settings","nikita.agents.text.handler","nikita.db.database","nikita.db.dependencies","nikita.db.models.profile","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.user_repository","nikita.db.repositories.profile_repository","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot","nikita.platforms.telegram.commands","nikita.platforms.telegram.delivery","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.rate_limiter","nikita.platforms.telegram.registration_handler","nikita.platforms.telegram.otp_handler","nikita.services.venue_research","nikita.services.backstory_generator","nikita.services.persona_adaptation","jwt"],"nikita/api/routes/voice.py":["hashlib","hmac","logging","time","decimal","typing","uuid","fastapi","pydantic","nikita.agents.voice.availability","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.config.settings","nikita.db.database","nikita.db.repositories.user_repository","httpx","datetime","uuid","nikita.db.database","nikita.db.models.conversation","nikita.db.repositories.user_repository","nikita.agents.voice.scoring","nikita.engine.scoring.models","nikita.pipeline.orchestrator","json","nikita.agents.voice.inbound"],"nikita/api/schemas/admin.py":["datetime","decimal","uuid","pydantic"],"nikita/api/schemas/admin_debug.py":["datetime","uuid","pydantic"],"nikita/api/schemas/conversation.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/game.py":["datetime","decimal","typing","uuid","pydantic"],"nikita/api/schemas/monitoring.py":["datetime","typing","uuid","pydantic"],"nikita/api/schemas/portal.py":["datetime","uuid","pydantic"],"nikita/api/schemas/user.py":["datetime","decimal","uuid","pydantic"],"nikita/behavioral/detector.py":["logging","datetime","nikita.behavioral.models","uuid"],"nikita/behavioral/engine.py":["logging","datetime","typing","uuid","nikita.behavioral.detector","nikita.behavioral.models","nikita.behavioral.selector"],"nikita/behavioral/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/behavioral/selector.py":["logging","pathlib","typing","yaml","nikita.behavioral.models"],"nikita/config/elevenlabs.py":["functools","pydantic","pydantic_settings"],"nikita/config/experiments.py":["nikita.config.experiments","__future__","os","copy","pathlib","typing","yaml"],"nikita/config/loader.py":["datetime","decimal","functools","pathlib","typing","yaml","nikita.config.schemas"],"nikita/config/prompt_loader.py":["nikita.config.prompt_loader","__future__","re","functools","pathlib","typing"],"nikita/config/schemas.py":["pydantic"],"nikita/config/settings.py":["functools","typing","uuid","pydantic","pydantic_settings"],"nikita/conflicts/breakup.py":["datetime","enum","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store","nikita.conflicts.models","random","random"],"nikita/conflicts/detector.py":["datetime","enum","typing","pydantic","pydantic_ai","nikita.config.settings","nikita.conflicts.models","nikita.conflicts.store","uuid"],"nikita/conflicts/escalation.py":["random","datetime","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/generator.py":["datetime","typing","pydantic","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/models.py":["datetime","enum","typing","pydantic"],"nikita/conflicts/resolution.py":["datetime","enum","typing","pydantic","pydantic_ai","nikita.config.settings","nikita.conflicts.models","nikita.conflicts.store"],"nikita/conflicts/store.py":["uuid","datetime","typing","sqlalchemy","sqlalchemy.ext.asyncio","nikita.conflicts.models"],"nikita/context/logging.py":["logging","typing","uuid","structlog","structlog.typing"],"nikita/context/package.py":["datetime","typing","uuid","pydantic"],"nikita/context/pipeline_context.py":["dataclasses","datetime","typing","uuid"],"nikita/context/session_detector.py":["logging","uuid","sqlalchemy.ext.asyncio","nikita.db.repositories.conversation_repository"],"nikita/context/store.py":["logging","datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.context.package","nikita.db.models.context_package"],"nikita/context/utils/token_counter.py":["logging","functools","tiktoken"],"nikita/context/validation.py":["logging","dataclasses","tiktoken"],"nikita/db/database.py":["collections.abc","functools","sqlalchemy.ext.asyncio","sqlalchemy.pool","supabase","nikita.config.settings"],"nikita/db/dependencies.py":["collections.abc","typing","fastapi","sqlalchemy.ext.asyncio","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"nikita/db/migrations/env.py":["asyncio","logging.config","alembic","sqlalchemy","sqlalchemy.engine","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.game","nikita.db.models.user"],"nikita/db/migrations/versions/20251128_0001_initial_schema.py":["collections.abc","sqlalchemy","alembic","sqlalchemy.dialects"],"nikita/db/migrations/versions/20251128_0002_rls_policies.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0003_fix_message_embeddings.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/migrations/versions/20251128_0004_rls_performance.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0005_consolidate_policies.py":["collections.abc","alembic"],"nikita/db/migrations/versions/20251128_0006_extensions_pending_reg.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/migrations/versions/20251205_0007_rate_limits_table.py":["collections.abc","alembic","sqlalchemy"],"nikita/db/migrations/versions/20260202_0008_schema_sync.py":["collections.abc","sqlalchemy","alembic","sqlalchemy.dialects"],"nikita/db/migrations/versions/20260206_0009_unified_pipeline_tables.py":["alembic"],"nikita/db/models/base.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm"],"nikita/db/models/context.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user","nikita.db.models.base"],"nikita/db/models/context_package.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/conversation.py":["datetime","decimal","typing","uuid","pgvector.sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.context","nikita.db.models.generated_prompt","nikita.db.models.scheduled_event","nikita.db.models.user"],"nikita/db/models/engagement.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/game.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/generated_prompt.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/job_execution.py":["datetime","enum","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/memory_fact.py":["typing","uuid","pgvector.sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/pending_registration.py":["datetime","datetime","sqlalchemy","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.base"],"nikita/db/models/profile.py":["datetime","datetime","enum","typing","uuid","sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/rate_limit.py":["datetime","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base"],"nikita/db/models/ready_prompt.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/scheduled_event.py":["datetime","enum","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.conversation","nikita.db.models.user"],"nikita/db/models/scheduled_touchpoint.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.user"],"nikita/db/models/user.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.dialects.postgresql","sqlalchemy.orm","nikita.db.models.base","nikita.db.models.context","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.game","nikita.db.models.generated_prompt","nikita.db.models.narrative_arc","nikita.db.models.profile","nikita.db.models.scheduled_event","nikita.db.models.scheduled_touchpoint","nikita.db.models.memory_fact","nikita.db.models.ready_prompt","nikita.db.models.social_circle"],"nikita/db/repositories/base.py":["typing","uuid","sqlalchemy.ext.asyncio","nikita.db.models.base"],"nikita/db/repositories/conversation_repository.py":["logging","datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.base","nikita.db.database","sqlalchemy","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy"],"nikita/db/repositories/engagement_repository.py":["uuid","sqlalchemy","sqlalchemy.ext.asyncio","sqlalchemy.orm","nikita.db.models.engagement","nikita.db.repositories.base"],"nikita/db/repositories/generated_prompt_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.generated_prompt","nikita.db.repositories.base"],"nikita/db/repositories/job_execution_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.job_execution","nikita.db.repositories.base"],"nikita/db/repositories/memory_fact_repository.py":["typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.memory_fact","nikita.db.repositories.base"],"nikita/db/repositories/metrics_repository.py":["decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/pending_registration_repository.py":["datetime","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.pending_registration"],"nikita/db/repositories/profile_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.profile","nikita.db.repositories.base"],"nikita/db/repositories/ready_prompt_repository.py":["typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.ready_prompt","nikita.db.repositories.base"],"nikita/db/repositories/scheduled_event_repository.py":["datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.base","nikita.db.models.scheduled_event"],"nikita/db/repositories/score_history_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/summary_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.base"],"nikita/db/repositories/thought_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.base"],"nikita/db/repositories/thread_repository.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.base"],"nikita/db/repositories/user_repository.py":["datetime","decimal","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","sqlalchemy.orm","nikita.db.models.engagement","nikita.db.models.game","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/repositories/vice_repository.py":["datetime","decimal","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.base"],"nikita/db/transactions.py":["asyncio","functools","logging","collections.abc","enum","typing","sqlalchemy.exc","sqlalchemy.ext.asyncio"],"nikita/emotional_state/computer.py":["logging","datetime","enum","typing","uuid","pydantic","nikita.emotional_state.models"],"nikita/emotional_state/conflict.py":["logging","datetime","typing","nikita.emotional_state.models"],"nikita/emotional_state/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/emotional_state/recovery.py":["logging","datetime","enum","typing","pydantic","nikita.emotional_state.models"],"nikita/emotional_state/store.py":["json","logging","collections.abc","datetime","typing","uuid","sqlalchemy","nikita.db.database","nikita.emotional_state.models"],"nikita/engine/chapters/boss.py":["decimal","typing","uuid","nikita.config.enums","nikita.engine.constants","nikita.engine.chapters.prompts","nikita.db.repositories.user_repository"],"nikita/engine/chapters/judgment.py":["enum","typing","pydantic","logging","pydantic_ai"],"nikita/engine/chapters/prompts.py":["typing"],"nikita/engine/constants.py":["nikita.engine.constants","nikita.config","__future__","warnings","datetime","decimal","pathlib","typing","nikita.config.enums"],"nikita/engine/decay/calculator.py":["datetime","decimal","typing","nikita.engine.constants","nikita.engine.decay.models","uuid"],"nikita/engine/decay/models.py":["datetime","decimal","uuid","pydantic"],"nikita/engine/decay/processor.py":["datetime","decimal","typing","sqlalchemy.ext.asyncio","nikita.engine.decay.calculator","nikita.engine.decay.models","nikita.db.repositories.score_history_repository","nikita.db.repositories.user_repository"],"nikita/engine/engagement/calculator.py":["decimal","nikita.config.enums","nikita.engine.engagement.models"],"nikita/engine/engagement/detection.py":["logging","decimal","typing","pydantic","pydantic_ai","nikita.engine.engagement.models"],"nikita/engine/engagement/models.py":["decimal","typing","pydantic","nikita.config.enums"],"nikita/engine/engagement/recovery.py":["dataclasses","datetime","nikita.config.enums"],"nikita/engine/engagement/state_machine.py":["decimal","nikita.config.enums","nikita.engine.engagement.models"],"nikita/engine/scoring/analyzer.py":["logging","decimal","pydantic_ai","nikita.engine.constants","nikita.engine.scoring.models"],"nikita/engine/scoring/calculator.py":["dataclasses","decimal","nikita.config.enums","nikita.engine.constants","nikita.engine.scoring.models"],"nikita/engine/scoring/models.py":["decimal","typing","pydantic"],"nikita/engine/scoring/service.py":["logging","decimal","typing","uuid","nikita.config.enums","nikita.engine.scoring.analyzer","nikita.engine.scoring.calculator","nikita.engine.scoring.models","sqlalchemy.ext.asyncio","nikita.db.repositories.score_history_repository"],"nikita/engine/vice/analyzer.py":["datetime","decimal","uuid","pydantic","pydantic_ai","nikita.config.enums","nikita.config.settings","nikita.engine.vice.models"],"nikita/engine/vice/boundaries.py":["decimal"],"nikita/engine/vice/injector.py":["decimal","nikita.engine.vice.models"],"nikita/engine/vice/models.py":["datetime","decimal","typing","uuid","pydantic","nikita.config.enums"],"nikita/engine/vice/scorer.py":["datetime","decimal","typing","uuid","nikita.config.enums","nikita.engine.vice.models","nikita.db.repositories.vice_repository","nikita.db.database","nikita.db.repositories.vice_repository"],"nikita/engine/vice/service.py":["logging","decimal","typing","uuid","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.boundaries","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.scorer","nikita.engine.vice.models"],"nikita/life_simulation/__init__.py":["nikita.life_simulation","nikita.life_simulation","nikita.life_simulation","nikita.life_simulation","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.store","nikita.life_simulation.store","nikita.life_simulation.entity_manager","nikita.life_simulation.entity_manager","nikita.life_simulation.event_generator","nikita.life_simulation.event_generator","nikita.life_simulation.narrative_manager","nikita.life_simulation.narrative_manager","nikita.life_simulation.simulator","nikita.life_simulation.simulator","nikita.life_simulation.social_generator","nikita.life_simulation.social_generator","nikita.life_simulation.social_generator","nikita.life_simulation.social_generator","nikita.life_simulation.social_generator","nikita.life_simulation.arcs","nikita.life_simulation.arcs","nikita.life_simulation.arcs","nikita.life_simulation.arcs","nikita.life_simulation.arcs","nikita.life_simulation.psychology_mapper","nikita.life_simulation.psychology_mapper","nikita.life_simulation.psychology_mapper","nikita.life_simulation.psychology_mapper","nikita.life_simulation.psychology_mapper","nikita.life_simulation.psychology_mapper"],"nikita/life_simulation/entity_manager.py":["logging","functools","pathlib","typing","uuid","yaml","nikita.life_simulation.models","nikita.life_simulation.store"],"nikita/life_simulation/event_generator.py":["json","logging","datetime","typing","uuid","pydantic","nikita.life_simulation.models","nikita.life_simulation.entity_manager","pydantic_ai"],"nikita/life_simulation/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/life_simulation/mood_calculator.py":["logging","dataclasses","nikita.life_simulation.models"],"nikita/life_simulation/narrative_manager.py":["logging","random","datetime","typing","uuid","pydantic","nikita.life_simulation.models","nikita.life_simulation.store"],"nikita/life_simulation/simulator.py":["logging","datetime","typing","uuid","nikita.life_simulation.entity_manager","nikita.life_simulation.event_generator","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.narrative_manager","nikita.life_simulation.store"],"nikita/life_simulation/store.py":["logging","collections.abc","datetime","typing","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.database","nikita.life_simulation.models","json","json","json","json"],"nikita/memory/supabase_memory.py":["asyncio","logging","datetime","typing","uuid","openai","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.db.repositories.memory_fact_repository","nikita.db.database"],"nikita/onboarding/handoff.py":["logging","random","dataclasses","datetime","typing","uuid","nikita.onboarding.models","nikita.db.database","nikita.db.repositories.social_circle_repository","nikita.life_simulation.social_generator","nikita.db.database","nikita.db.repositories.user_repository","nikita.db.database","nikita.db.repositories.user_repository","nikita.config.settings","nikita.db.database","nikita.db.repositories.conversation_repository","nikita.pipeline.orchestrator","nikita.platforms.telegram.bot","asyncio","nikita.agents.voice.service"],"nikita/onboarding/meta_nikita.py":["logging","dataclasses","typing","uuid"],"nikita/onboarding/models.py":["datetime","enum","typing","pydantic"],"nikita/onboarding/preference_config.py":["logging","dataclasses","typing","uuid","nikita.onboarding.models"],"nikita/onboarding/profile_collector.py":["logging","re","dataclasses","enum","typing","uuid","nikita.onboarding.models"],"nikita/onboarding/server_tools.py":["logging","typing","uuid","pydantic","sqlalchemy.ext.asyncio","nikita.db.database","nikita.db.repositories.user_repository","nikita.onboarding.models","nikita.onboarding.handoff"],"nikita/onboarding/voice_flow.py":["logging","re","dataclasses","typing","uuid","nikita.onboarding.meta_nikita","nikita.onboarding.models"],"nikita/pipeline/models.py":["__future__","dataclasses","datetime","decimal","typing","uuid"],"nikita/pipeline/orchestrator.py":["__future__","time","datetime","typing","uuid","logging","sqlalchemy.ext.asyncio","nikita.pipeline.stages.base","nikita.pipeline.models","importlib"],"nikita/pipeline/stages/base.py":["__future__","asyncio","time","abc","dataclasses","typing","logging","nikita.pipeline.models"],"nikita/pipeline/stages/conflict.py":["__future__","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio"],"nikita/pipeline/stages/emotional.py":["__future__","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio","nikita.emotional_state.computer"],"nikita/pipeline/stages/extraction.py":["__future__","typing","structlog","pydantic","pydantic_ai","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio"],"nikita/pipeline/stages/game_state.py":["__future__","decimal","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio"],"nikita/pipeline/stages/life_sim.py":["__future__","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio","nikita.life_simulation"],"nikita/pipeline/stages/memory_update.py":["__future__","typing","uuid","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio","nikita.config.settings","nikita.memory.supabase_memory"],"nikita/pipeline/stages/prompt_builder.py":["__future__","time","typing","logging","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio","nikita.pipeline.templates","nikita.context.utils.token_counter","pydantic_ai","pydantic_ai.models.anthropic","nikita.config.settings","nikita.context.utils.token_counter","nikita.db.repositories.ready_prompt_repository","datetime","nikita.db.repositories.user_repository"],"nikita/pipeline/stages/summary.py":["__future__","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio"],"nikita/pipeline/stages/touchpoint.py":["__future__","typing","structlog","nikita.pipeline.stages.base","nikita.pipeline.models","sqlalchemy.ext.asyncio","nikita.touchpoints.engine"],"nikita/pipeline/templates/__init__.py":["os","functools","jinja2"],"nikita/platforms/telegram/auth.py":["logging","re","typing","urllib.parse","uuid","supabase","supabase_auth.errors","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.user_repository","nikita.config.settings","nikita.config.settings"],"nikita/platforms/telegram/bot.py":["html","httpx","nikita.config.settings"],"nikita/platforms/telegram/commands.py":["logging","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot"],"nikita/platforms/telegram/delivery.py":["asyncio","uuid","nikita.platforms.telegram.bot"],"nikita/platforms/telegram/message_handler.py":["logging","datetime","decimal","typing","uuid","nikita.config.settings","nikita.agents.text.handler","nikita.config.enums","nikita.db.models.conversation","nikita.db.models.engagement","nikita.db.models.engagement","nikita.db.repositories.conversation_repository","nikita.db.repositories.engagement_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.prompts","nikita.engine.engagement.recovery","nikita.engine.engagement.state_machine","nikita.engine.scoring.models","nikita.engine.scoring.service","nikita.platforms.telegram.bot","nikita.platforms.telegram.delivery","nikita.platforms.telegram.models","nikita.platforms.telegram.rate_limiter","nikita.platforms.telegram.onboarding.handler","nikita.text_patterns","nikita.engine.chapters.prompts","asyncio","asyncio","nikita.engine.constants","nikita.engine.engagement.models","nikita.engine.engagement.calculator","nikita.db.models.engagement"],"nikita/platforms/telegram/models.py":["pydantic"],"nikita/platforms/telegram/onboarding/handler.py":["logging","typing","uuid","nikita.db.models.profile","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository","nikita.platforms.telegram.bot","nikita.services.backstory_generator","nikita.services.persona_adaptation","nikita.services.venue_research","asyncio"],"nikita/platforms/telegram/otp_handler.py":["logging","typing","nikita.config.settings","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot","nikita.db.repositories.pending_registration_repository","nikita.db.repositories.profile_repository","nikita.db.repositories.user_repository","nikita.platforms.telegram.onboarding.handler"],"nikita/platforms/telegram/rate_limiter.py":["dataclasses","datetime","typing","uuid","asyncio","time","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.rate_limit","nikita.db.models.rate_limit","nikita.db.models.rate_limit"],"nikita/platforms/telegram/registration_handler.py":["logging","re","nikita.platforms.telegram.auth","nikita.platforms.telegram.bot"],"nikita/services/backstory_generator.py":["json","logging","dataclasses","typing","pydantic_ai","nikita.config.settings","nikita.services.venue_research","nikita.db.models.profile"],"nikita/services/persona_adaptation.py":["typing"],"nikita/services/venue_research.py":["logging","dataclasses","datetime","typing","nikita.db.repositories.profile_repository","nikita.config.settings","firecrawl"],"nikita/text_patterns/emoji_processor.py":["random","re","typing","nikita.text_patterns.models"],"nikita/text_patterns/length_adjuster.py":["re","typing","nikita.text_patterns.models"],"nikita/text_patterns/message_splitter.py":["random","re","typing","nikita.text_patterns.models"],"nikita/text_patterns/models.py":["enum","typing","pydantic"],"nikita/text_patterns/processor.py":["re","typing","yaml","nikita.text_patterns.emoji_processor","nikita.text_patterns.length_adjuster","nikita.text_patterns.message_splitter","nikita.text_patterns.punctuation","nikita.text_patterns.models"],"nikita/text_patterns/punctuation.py":["random","re","typing","nikita.text_patterns.models"],"nikita/touchpoints/engine.py":["logging","datetime","typing","uuid","nikita.emotional_state.models","nikita.emotional_state.store","nikita.touchpoints.generator","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.silence","nikita.touchpoints.store","sqlalchemy.ext.asyncio","nikita.platforms.telegram.bot","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository"],"nikita/touchpoints/generator.py":["pathlib","typing","uuid","pydantic_ai","nikita.config.settings","nikita.touchpoints.models","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository"],"nikita/touchpoints/models.py":["datetime","enum","typing","uuid","pydantic"],"nikita/touchpoints/scheduler.py":["random","datetime","typing","uuid","nikita.touchpoints.models","zoneinfo"],"nikita/touchpoints/silence.py":["random","dataclasses","enum","typing"],"nikita/touchpoints/store.py":["datetime","uuid","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.scheduled_touchpoint","nikita.touchpoints.models","uuid","sqlalchemy"],"scripts/configure_meta_nikita_tools.py":["asyncio","json","os","sys","httpx"],"scripts/migrate_neo4j_to_supabase.py":["argparse","asyncio","json","logging","sys","datetime","pathlib","uuid","dotenv","nikita.config.settings","nikita.memory.supabase_memory","nikita.memory.graphiti_client","nikita.db.database"],"scripts/verify-voice-call.py":["argparse","asyncio","json","os","sys","dataclasses","datetime","pathlib","typing","nikita.db.database","sqlalchemy","datetime","sqlalchemy","sqlalchemy","sqlalchemy","sqlalchemy","nikita.memory.graphiti_client","nikita.agents.voice.elevenlabs_client","nikita.config.settings"],"tests/agents/text/test_agent.py":["os","pytest","unittest.mock","nikita.agents.text","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.deps","nikita.agents.text.agent","nikita.prompts.nikita_persona","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","inspect","nikita.agents.text.agent","nikita.agents.text.agent","inspect","nikita.agents.text.agent","nikita.agents.text.agent","pydantic_ai","nikita.agents.text.agent"],"tests/agents/text/test_chapter_behavior.py":["pytest","unittest.mock","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.engine.constants","nikita.agents.text.agent","re","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_deps.py":["pytest","dataclasses","unittest.mock","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps","nikita.agents.text.deps"],"tests/agents/text/test_deps_session.py":["pytest","unittest.mock","uuid","nikita.agents.text.deps"],"tests/agents/text/test_factory.py":["pytest","uuid","unittest.mock","nikita.agents.text","nikita.agents.text","inspect","nikita.agents.text","inspect","nikita.agents.text","nikita.agents.text.deps","nikita.agents.text","nikita.agents.text","nikita.agents.text"],"tests/agents/text/test_facts.py":["pytest","unittest.mock","nikita.agents.text","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","inspect","nikita.agents.text.facts","inspect","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts","nikita.agents.text.facts"],"tests/agents/text/test_handler.py":["pytest","datetime","uuid","unittest.mock","dataclasses","nikita.agents.text","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","inspect","nikita.agents.text.handler","inspect","nikita.agents.text.handler","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.skip","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler"],"tests/agents/text/test_handler_facts.py":["pytest","datetime","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.facts"],"tests/agents/text/test_handler_skip.py":["pytest","datetime","uuid","unittest.mock","logging","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.timing","nikita.agents.text.facts","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip"],"tests/agents/text/test_init.py":["pytest","unittest.mock","uuid","nikita.agents.text","nikita.agents.text","nikita.agents.text"],"tests/agents/text/test_nikita_persona.py":["pytest","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona","nikita.prompts.nikita_persona"],"tests/agents/text/test_ready_prompt_integration.py":["logging","pytest","unittest.mock","uuid","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_ready_prompt_loading.py":["asyncio","time","pytest","types","unittest.mock","uuid","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.config.settings","nikita.config.settings","nikita.config.settings"],"tests/agents/text/test_session_propagation.py":["pytest","unittest.mock","uuid","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/agents/text/test_skip.py":["pytest","statistics","nikita.agents.text","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","inspect","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip","nikita.agents.text.skip"],"tests/agents/text/test_timing.py":["pytest","statistics","unittest.mock","nikita.agents.text","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing","nikita.agents.text.timing"],"tests/agents/text/test_tools.py":["os","pytest","datetime","unittest.mock","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text","nikita.agents.text.tools","nikita.agents.text.agent","nikita.agents.text.tools","inspect","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools","nikita.agents.text.tools"],"tests/agents/text/test_type_checking.py":["pytest","pydantic_ai.messages"],"tests/agents/voice/conftest.py":["datetime","typing","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.elevenlabs_client"],"tests/agents/voice/test_availability.py":["decimal","unittest.mock","uuid","pytest","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","nikita.agents.voice.availability","unittest.mock","nikita.agents.voice.availability","unittest.mock"],"tests/agents/voice/test_call_lifecycle_e2e.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.scoring","nikita.agents.voice.server_tools","nikita.agents.voice.service","nikita.engine.scoring.models","hashlib","hmac","time","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.service"],"tests/agents/voice/test_config.py":["unittest.mock","uuid","pytest","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config","nikita.agents.voice.config"],"tests/agents/voice/test_dynamic_vars.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","unittest.mock","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context","nikita.agents.voice.context"],"tests/agents/voice/test_inbound.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","time","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio","nikita.agents.voice.inbound","asyncio"],"tests/agents/voice/test_personality_consistency.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.models"],"tests/agents/voice/test_prompt_persona_correctness.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.config","nikita.agents.voice.context","nikita.agents.voice.models"],"tests/agents/voice/test_ready_prompt_loading.py":["time","pytest","types","unittest.mock","uuid","nikita.agents.voice.server_tools","nikita.agents.voice.inbound","asyncio"],"tests/agents/voice/test_scheduling.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.config","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio","nikita.agents.voice.scheduling","asyncio"],"tests/agents/voice/test_scoring.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.scoring.models","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring","nikita.agents.voice.scoring"],"tests/agents/voice/test_scoring_pipeline_e2e.py":["decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.scoring","nikita.engine.scoring.models"],"tests/agents/voice/test_server_tools.py":["unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","datetime","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","hashlib","hmac","time","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","hashlib","hmac","nikita.agents.voice.server_tools","time","asyncio","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.server_tools","asyncio","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools","nikita.agents.voice.server_tools"],"tests/agents/voice/test_service.py":["datetime","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service","nikita.agents.voice.service"],"tests/agents/voice/test_transcript.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.agents.voice.models","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript","unittest.mock","nikita.agents.voice.transcript","nikita.agents.voice.transcript","nikita.agents.voice.transcript"],"tests/agents/voice/test_tts_config.py":["pytest","nikita.agents.voice.models","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config","nikita.agents.voice.tts_config"],"tests/agents/voice/test_voice_post_processing.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.db.models.conversation","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","nikita.db.repositories.conversation_repository","inspect"],"tests/api/dependencies/test_auth_admin.py":["pytest","unittest.mock","uuid","jwt","fastapi","fastapi.security","nikita.api.dependencies.auth","time"],"tests/api/routes/test_admin_debug.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug","nikita.api.dependencies.auth"],"tests/api/routes/test_admin_pipeline_health.py":["pytest","datetime","unittest.mock","uuid","nikita.api.schemas.admin"],"tests/api/routes/test_admin_text.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug"],"tests/api/routes/test_admin_voice.py":["datetime","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.admin_debug"],"tests/api/routes/test_onboarding.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.onboarding"],"tests/api/routes/test_tasks.py":["pytest","unittest.mock","fastapi","fastapi.testclient","nikita.api.routes.tasks"],"tests/api/routes/test_telegram.py":["pytest","unittest.mock","fastapi","fastapi.testclient","httpx","nikita.platforms.telegram.bot","nikita.platforms.telegram.commands","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.otp_handler","nikita.api.routes.telegram","nikita.db.dependencies","nikita.api.routes.telegram"],"tests/api/routes/test_telegram_auth_confirm.py":["pytest","datetime","unittest.mock","uuid","fastapi","fastapi.testclient","nikita.api.routes.telegram","nikita.platforms.telegram.bot","nikita.api.routes.telegram","nikita.platforms.telegram.bot","nikita.api.routes.telegram","nikita.platforms.telegram.bot"],"tests/api/routes/test_voice.py":["unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.voice","nikita.agents.voice.models","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time","hashlib","hmac","json","time"],"tests/api/routes/test_voice_webhook.py":["hashlib","hmac","time","unittest.mock","uuid","pytest","fastapi","fastapi.testclient","nikita.api.routes.voice"],"tests/api/schemas/test_admin_debug_schemas.py":["datetime","uuid","pytest","nikita.api.schemas.admin_debug"],"tests/behavioral/test_detection.py":["datetime","pytest","nikita.behavioral.detector","nikita.behavioral.models"],"tests/behavioral/test_engine.py":["datetime","unittest.mock","pytest","nikita.behavioral.detector","nikita.behavioral.engine","nikita.behavioral.models","nikita.behavioral.selector"],"tests/behavioral/test_integration.py":["datetime","unittest.mock","uuid","pytest","nikita.behavioral"],"tests/behavioral/test_models.py":["datetime","uuid","pytest","yaml","nikita.behavioral.models"],"tests/behavioral/test_selection.py":["pytest","nikita.behavioral.models","nikita.behavioral.selector"],"tests/config/test_enums.py":["pytest","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums"],"tests/config/test_experiments.py":["os","tempfile","pytest","pathlib","unittest.mock","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments","nikita.config.experiments"],"tests/config/test_loader.py":["pytest","pathlib","decimal","datetime","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","time","nikita.config.loader","time","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config","nikita.config.loader","os"],"tests/config/test_prompt_loader.py":["os","time","tempfile","pytest","pathlib","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader","nikita.config.prompt_loader"],"tests/config/test_schemas.py":["pytest","pydantic","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas","nikita.config.schemas"],"tests/conflicts/test_breakup.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.breakup","nikita.conflicts.store","nikita.conflicts.breakup"],"tests/conflicts/test_detection.py":["pytest","datetime","unittest.mock","nikita.conflicts.detector","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_escalation.py":["pytest","datetime","unittest.mock","nikita.conflicts.escalation","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_generation.py":["pytest","datetime","nikita.conflicts.generator","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_infrastructure.py":["pytest","datetime","pydantic","nikita.conflicts","nikita.conflicts.store","nikita","nikita.conflicts.models","nikita.conflicts.store"],"tests/conflicts/test_integration.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.store","nikita.conflicts.detector","nikita.conflicts.generator","nikita.conflicts.escalation","nikita.conflicts.resolution","nikita.conflicts.breakup"],"tests/conflicts/test_resolution.py":["pytest","datetime","unittest.mock","nikita.conflicts.models","nikita.conflicts.resolution","nikita.conflicts.store","nikita.conflicts.resolution","nikita.conflicts.resolution"],"tests/conftest.py":["pytest","nikita.db.database","nikita.config.settings","nikita.platforms.telegram.rate_limiter"],"tests/context/test_package.py":["json","datetime","uuid","pytest","nikita.context.package"],"tests/context/test_session_detector.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector","nikita.context.session_detector"],"tests/context/test_store.py":["time","datetime","unittest.mock","uuid","pytest","nikita.context.package","nikita.context.store"],"tests/context/test_token_validator.py":["pytest","nikita.context.validation"],"tests/db/integration/conftest.py":["logging","os","socket","time","urllib.parse","dotenv","collections.abc","uuid","pytest","pytest_asyncio","sqlalchemy.ext.asyncio","sqlalchemy.pool","random"],"tests/db/integration/test_fulltext_search.py":["uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.user_repository"],"tests/db/integration/test_migrations.py":["pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","pathlib","pathlib"],"tests/db/integration/test_repositories_integration.py":["datetime","decimal","uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.models.game","nikita.db.models.user","nikita.db.repositories.conversation_repository","nikita.db.repositories.metrics_repository","nikita.db.repositories.score_history_repository","nikita.db.repositories.summary_repository","nikita.db.repositories.user_repository","nikita.db.repositories.vice_repository"],"tests/db/integration/test_rls_pipeline_tables.py":["pytest","sqlalchemy","sqlalchemy.ext.asyncio"],"tests/db/integration/test_rls_policies.py":["uuid","pytest","pytest_asyncio","sqlalchemy","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.user_repository"],"tests/db/models/test_job_execution.py":["pytest","datetime","uuid","nikita.db.models.job_execution"],"tests/db/models/test_memory_fact.py":["uuid","pytest","nikita.db.models.memory_fact"],"tests/db/models/test_profile.py":["datetime","decimal","enum","uuid","pytest","sqlalchemy","sqlalchemy.dialects.postgresql","sqlalchemy.ext.asyncio","nikita.db.models.profile","nikita.db.models.base","sqlalchemy","nikita.db.models.base"],"tests/db/models/test_ready_prompt.py":["uuid","pytest","nikita.db.models.ready_prompt"],"tests/db/repositories/test_base.py":["unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.base","sqlalchemy","sqlalchemy.dialects.postgresql","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base"],"tests/db/repositories/test_conversation_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.conversation","nikita.db.repositories.conversation_repository"],"tests/db/repositories/test_job_execution_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.job_execution","nikita.db.repositories.job_execution_repository"],"tests/db/repositories/test_memory_fact_repository.py":["pytest","unittest.mock","uuid","nikita.db.models.memory_fact","nikita.db.repositories.memory_fact_repository"],"tests/db/repositories/test_metrics_repository.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.metrics_repository"],"tests/db/repositories/test_pending_registration_repository.py":["pytest","datetime","unittest.mock","nikita.db.models.pending_registration","nikita.db.repositories.pending_registration_repository"],"tests/db/repositories/test_profile_repository.py":["pytest","nikita.db.repositories.profile_repository","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base","nikita.db.repositories.base"],"tests/db/repositories/test_ready_prompt_repository.py":["pytest","unittest.mock","uuid","nikita.db.models.ready_prompt","nikita.db.repositories.ready_prompt_repository"],"tests/db/repositories/test_score_history_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.score_history_repository"],"tests/db/repositories/test_summary_repository.py":["datetime","decimal","typing","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.game","nikita.db.repositories.summary_repository"],"tests/db/repositories/test_thought_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository","nikita.db.repositories.thought_repository"],"tests/db/repositories/test_thread_repository.py":["datetime","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.context","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository","nikita.db.repositories.thread_repository"],"tests/db/repositories/test_user_repository.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.game","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","datetime","nikita.db.repositories.user_repository","nikita.db.models.user","datetime","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.models.engagement"],"tests/db/repositories/test_user_repository_boss.py":["decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository","nikita.db.models.user","nikita.db.repositories.user_repository"],"tests/db/repositories/test_vice_repository.py":["datetime","decimal","unittest.mock","uuid","pytest","sqlalchemy.ext.asyncio","nikita.db.models.user","nikita.db.repositories.vice_repository"],"tests/e2e/conftest.py":["asyncio","os","pytest","typing","tests.e2e.helpers.telegram_helper","tests.e2e.helpers.mock_agent_helper","playwright.async_api"],"tests/e2e/full_journey/evidence_collector.py":["json","os","dataclasses","datetime","pathlib","typing"],"tests/e2e/full_journey/orchestrator.py":["os","time","dataclasses","enum","typing"],"tests/e2e/full_journey/phases/phase1_registration.py":["typing","dataclasses"],"tests/e2e/full_journey/phases/phase2_conversation.py":["typing","dataclasses","asyncio"],"tests/e2e/full_journey/phases/phase3_portal.py":["typing","dataclasses"],"tests/e2e/full_journey/phases/phase4_game_state.py":["typing","dataclasses"],"tests/e2e/full_journey/test_full_journey.py":["os","time","typing","pytest"],"tests/e2e/helpers/gmail_helper.py":["asyncio","base64","os","re","time","typing","urllib.parse"],"tests/e2e/helpers/mock_agent_helper.py":["os","contextlib","dataclasses","typing","unittest.mock","asyncio","uuid"],"tests/e2e/helpers/otp_email_parser.py":["re","typing","dataclasses","datetime","base64","base64"],"tests/e2e/helpers/supabase_helper.py":["os","uuid","dataclasses","datetime","typing","random"],"tests/e2e/helpers/telegram_helper.py":["os","time","dataclasses","typing","httpx","random"],"tests/e2e/manual_journey_test.py":["asyncio","json","os","sys","datetime","typing","httpx","tests.e2e.helpers.telegram_helper"],"tests/e2e/portal/conftest.py":["os","pytest"],"tests/e2e/portal/page_objects/base_page.py":["os","typing","dataclasses"],"tests/e2e/portal/page_objects/conversations_page.py":["dataclasses","typing"],"tests/e2e/portal/page_objects/dashboard_page.py":["dataclasses","typing"],"tests/e2e/portal/page_objects/login_page.py":["dataclasses","typing"],"tests/e2e/portal/test_conversations.py":["os","dataclasses","typing","pytest"],"tests/e2e/portal/test_dashboard.py":["os","dataclasses","typing","pytest"],"tests/e2e/portal/test_login_flow.py":["os","time","dataclasses","typing","pytest"],"tests/e2e/test_auth_flow.py":["asyncio","base64","json","os","pytest","uuid","typing","urllib.parse"],"tests/e2e/test_message_flow.py":["pytest","tests.e2e.helpers.telegram_helper","tests.db.integration.conftest"],"tests/e2e/test_otp_flow.py":["pytest","tests.e2e.helpers.telegram_helper","tests.db.integration.conftest"],"tests/e2e/test_otp_gmail_e2e.py":["asyncio","os","time","dataclasses","datetime","typing","pytest"],"tests/emotional_state/test_computation.py":["datetime","uuid","pytest","nikita.emotional_state.computer","nikita.emotional_state.models","datetime"],"tests/emotional_state/test_conflict.py":["datetime","uuid","pytest","nikita.emotional_state.conflict","nikita.emotional_state.models"],"tests/emotional_state/test_models.py":["datetime","uuid","pytest","pydantic","nikita.emotional_state.models"],"tests/emotional_state/test_recovery.py":["datetime","uuid","pytest","nikita.emotional_state.models","nikita.emotional_state.recovery"],"tests/emotional_state/test_store.py":["json","collections.abc","contextlib","datetime","typing","unittest.mock","uuid","pytest","nikita.emotional_state.models","nikita.emotional_state.store"],"tests/engine/chapters/test_advancement.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","asyncio","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_agent_integration.py":["pytest","uuid","unittest.mock","decimal","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.agents.text.handler","nikita.agents.text.handler","datetime","nikita.agents.text.handler","nikita.agents.text.skip"],"tests/engine/chapters/test_boss.py":["inspect","decimal","uuid","pytest","nikita.engine.chapters","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","unittest.mock"],"tests/engine/chapters/test_failure.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","asyncio","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_game_over.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/chapters/test_initiation.py":["decimal","unittest.mock","uuid","pytest","nikita.engine.chapters.boss","inspect","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.prompts","nikita.engine.chapters.boss"],"tests/engine/chapters/test_judgment.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","asyncio","nikita.engine.chapters.judgment","inspect","nikita.engine.chapters.judgment","inspect","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment","nikita.engine.chapters.judgment"],"tests/engine/chapters/test_prompts.py":["pytest","nikita.engine.chapters","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts","nikita.engine.chapters.prompts"],"tests/engine/chapters/test_threshold.py":["decimal","uuid","pytest","nikita.engine.constants","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss"],"tests/engine/decay/test_calculator.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.engine.constants","nikita.engine.decay.calculator","nikita.engine.decay.models"],"tests/engine/decay/test_models.py":["datetime","decimal","uuid","pytest","pydantic","nikita.engine.decay.models"],"tests/engine/decay/test_processor.py":["datetime","decimal","unittest.mock","uuid","pytest","nikita.engine.decay.models","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor","nikita.engine.decay.processor"],"tests/engine/engagement/test_calculator.py":["decimal","pytest","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.models","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator","nikita.config.enums","nikita.engine.engagement.calculator"],"tests/engine/engagement/test_detection.py":["datetime","decimal","unittest.mock","pytest","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.models","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.models","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","inspect","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection","nikita.engine.engagement.detection"],"tests/engine/engagement/test_integration.py":["datetime","decimal","pytest","nikita.config.enums","nikita.engine.engagement"],"tests/engine/engagement/test_models.py":["decimal","pytest","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.config.enums","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement","nikita.engine.engagement.models","nikita.config.enums","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models","nikita.engine.engagement.models"],"tests/engine/engagement/test_recovery.py":["datetime","decimal","uuid","pytest","nikita.config.enums","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery","nikita.engine.engagement.recovery"],"tests/engine/engagement/test_state_machine.py":["decimal","uuid","pytest","nikita.config.enums","nikita.engine.engagement.models","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine","nikita.engine.engagement.state_machine"],"tests/engine/scoring/test_analyzer.py":["decimal","unittest.mock","pytest","nikita.engine.scoring.analyzer","nikita.engine.scoring.models"],"tests/engine/scoring/test_calculator.py":["decimal","unittest.mock","pytest","nikita.config.enums","nikita.engine.scoring.calculator","nikita.engine.scoring.models"],"tests/engine/scoring/test_models.py":["decimal","pytest","pydantic","nikita.engine.scoring.models"],"tests/engine/scoring/test_service.py":["decimal","unittest.mock","uuid","pytest","nikita.config.enums","nikita.engine.scoring.models","nikita.engine.scoring.service"],"tests/engine/vice/test_analyzer.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.config.enums","nikita.engine.vice.analyzer","nikita.engine.vice.analyzer"],"tests/engine/vice/test_boundaries.py":["pytest","decimal","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.boundaries","nikita.engine.vice.injector","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.boundaries"],"tests/engine/vice/test_injector.py":["pytest","datetime","decimal","uuid","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.injector","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.config.enums","nikita.engine.vice.injector"],"tests/engine/vice/test_models.py":["pytest","datetime","decimal","uuid","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","pydantic","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models","nikita.engine.vice.models"],"tests/engine/vice/test_scorer.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.models","nikita.engine.vice.scorer","nikita.config.enums","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer","nikita.engine.vice.scorer"],"tests/engine/vice/test_service.py":["pytest","datetime","decimal","unittest.mock","uuid","nikita.engine.vice.service","nikita.engine.vice.models","nikita.engine.vice.service","nikita.engine.vice.models","nikita.config.enums","nikita.engine.vice.service","nikita.engine.vice.models","nikita.engine.vice.service","nikita.engine.vice.service","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid","nikita.engine.vice.service","nikita.engine.vice.models","datetime","uuid"],"tests/integration/test_boss_flow.py":["pytest","uuid","unittest.mock","decimal","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.boss","nikita.engine.chapters.judgment","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.agents.text.skip","nikita.agents.text.handler","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.chapters.boss","nikita.engine.constants","nikita.engine.chapters.boss","nikita.engine.constants"],"tests/integration/test_vice_flow.py":["pytest","uuid","decimal","datetime","nikita.engine.vice.models","nikita.engine.vice.injector","nikita.engine.vice.boundaries","nikita.engine.vice.models"],"tests/life_simulation/test_entity_manager.py":["unittest.mock","uuid","pytest","nikita.life_simulation.entity_manager","nikita.life_simulation.models","nikita.life_simulation.entity_manager"],"tests/life_simulation/test_event_generator.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.event_generator","nikita.life_simulation.models","nikita.life_simulation.models","nikita.life_simulation.event_generator"],"tests/life_simulation/test_models.py":["datetime","uuid","pytest","pydantic","nikita.life_simulation.models"],"tests/life_simulation/test_mood_calculator.py":["datetime","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.mood_calculator"],"tests/life_simulation/test_narrative_manager.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.narrative_manager","nikita.life_simulation.narrative_manager"],"tests/life_simulation/test_quality.py":["collections","datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.narrative_manager","nikita.life_simulation.simulator","nikita.life_simulation.entity_manager"],"tests/life_simulation/test_simulator.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.mood_calculator","nikita.life_simulation.simulator","nikita.life_simulation.simulator"],"tests/life_simulation/test_store.py":["datetime","unittest.mock","uuid","pytest","nikita.life_simulation.models","nikita.life_simulation.store","nikita.life_simulation.store"],"tests/memory/test_supabase_memory.py":["datetime","unittest.mock","uuid","pytest","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory","nikita.memory.supabase_memory"],"tests/onboarding/test_e2e.py":["asyncio","datetime","unittest.mock","uuid","pytest","nikita.onboarding.handoff","nikita.onboarding.models","nikita.onboarding.preference_config","nikita.onboarding.profile_collector","nikita.onboarding.server_tools","nikita.onboarding.voice_flow"],"tests/onboarding/test_handoff.py":["datetime","unittest.mock","uuid","pytest","nikita.onboarding.handoff","nikita.onboarding.models"],"tests/onboarding/test_infrastructure.py":["datetime","pytest","pydantic","nikita.onboarding","nikita.onboarding.models","nikita.onboarding","nikita.onboarding","nikita.onboarding"],"tests/onboarding/test_meta_nikita.py":["typing","uuid","pytest","nikita.onboarding.meta_nikita"],"tests/onboarding/test_preferences.py":["uuid","pytest","nikita.onboarding.models","nikita.onboarding.preference_config"],"tests/onboarding/test_profile_collection.py":["uuid","pytest","nikita.onboarding.models","nikita.onboarding.profile_collector"],"tests/onboarding/test_server_tools.py":["datetime","typing","unittest.mock","uuid","pytest","nikita.onboarding.models","nikita.onboarding.server_tools"],"tests/onboarding/test_telegram_flow.py":["unittest.mock","uuid","pytest","nikita.onboarding.models","nikita.onboarding.voice_flow"],"tests/pipeline/conftest.py":["__future__","datetime","decimal","types","unittest.mock","uuid","pytest","nikita.pipeline.models","tests.pipeline.mocks"],"tests/pipeline/mocks.py":["__future__","types","typing","uuid","hashlib"],"tests/pipeline/test_e2e_unified.py":["__future__","asyncio","datetime","decimal","unittest.mock","uuid","pytest","nikita.pipeline.models","nikita.pipeline.orchestrator","nikita.pipeline.stages.base"],"tests/pipeline/test_health_endpoint.py":["__future__","datetime","unittest.mock","uuid","pytest","nikita.api.schemas.admin","nikita.pipeline.orchestrator"],"tests/pipeline/test_integration.py":["pytest","unittest.mock","uuid","nikita.pipeline.models","nikita.pipeline.orchestrator","nikita.pipeline.stages.base"],"tests/pipeline/test_integration_full.py":["asyncio","pytest","datetime","decimal","unittest.mock","uuid","nikita.pipeline.orchestrator","nikita.pipeline.models","nikita.pipeline.stages.base"],"tests/pipeline/test_models.py":["datetime","decimal","uuid","pytest","nikita.pipeline.models","nikita.pipeline.stages.base","nikita.pipeline.stages.base","nikita.pipeline.stages.base"],"tests/pipeline/test_orchestrator.py":["__future__","asyncio","datetime","decimal","unittest.mock","uuid","pytest","nikita.pipeline.stages.base","nikita.pipeline.models","nikita.pipeline.orchestrator"],"tests/pipeline/test_performance.py":["asyncio","time","decimal","unittest.mock","uuid","pytest","nikita.pipeline.models","nikita.pipeline.stages.base","nikita.pipeline.orchestrator","jinja2","jinja2"],"tests/pipeline/test_prompt_builder.py":["decimal","datetime","uuid","unittest.mock","pytest","nikita.pipeline.models","nikita.pipeline.stages.prompt_builder"],"tests/pipeline/test_stages.py":["__future__","datetime","decimal","types","unittest.mock","uuid","pytest","nikita.pipeline.stages.base","nikita.pipeline.models","nikita.pipeline.stages.extraction","nikita.pipeline.stages.extraction","nikita.pipeline.stages.extraction","nikita.pipeline.stages.extraction","nikita.pipeline.stages.extraction","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.memory_update","nikita.pipeline.stages.life_sim","nikita.pipeline.stages.life_sim","nikita.pipeline.stages.life_sim","nikita.pipeline.stages.emotional","nikita.pipeline.stages.emotional","nikita.pipeline.stages.emotional","nikita.pipeline.stages.emotional","nikita.pipeline.stages.game_state","nikita.pipeline.stages.game_state","nikita.pipeline.stages.game_state","nikita.pipeline.stages.game_state","nikita.pipeline.stages.conflict","nikita.pipeline.stages.conflict","nikita.pipeline.stages.conflict","nikita.pipeline.stages.conflict","nikita.pipeline.stages.conflict","nikita.pipeline.stages.touchpoint","nikita.pipeline.stages.touchpoint","nikita.pipeline.stages.touchpoint","nikita.pipeline.stages.touchpoint","nikita.pipeline.stages.summary","nikita.pipeline.stages.summary","nikita.pipeline.stages.summary","nikita.pipeline.stages.prompt_builder","nikita.pipeline.stages.prompt_builder"],"tests/pipeline/test_template_rendering.py":["pytest","nikita.pipeline.templates","nikita.context.utils.token_counter","time","nikita.context.utils.token_counter","nikita.context.utils.token_counter"],"tests/pipeline/test_triggers.py":["datetime","unittest.mock","uuid","pytest","nikita.pipeline.models","nikita.pipeline.orchestrator","nikita.pipeline.orchestrator","nikita.config.settings","nikita.config.settings","nikita.pipeline.orchestrator"],"tests/pipeline/test_unified_pipeline_health.py":["datetime","pytest","nikita.api.schemas.admin","nikita.pipeline.orchestrator"],"tests/pipeline_fixes/test_session_chain.py":["pytest","unittest.mock","uuid","nikita.agents.text.handler","nikita.agents.text.deps","nikita.agents.text.agent","nikita.agents.text.agent"],"tests/platforms/telegram/test_auth.py":["pytest","unittest.mock","nikita.platforms.telegram.auth","nikita.db.models.user","uuid"],"tests/platforms/telegram/test_bot.py":["pytest","unittest.mock","nikita.platforms.telegram.bot","httpx"],"tests/platforms/telegram/test_commands.py":["pytest","unittest.mock","nikita.platforms.telegram.commands","nikita.db.models.user","decimal","uuid"],"tests/platforms/telegram/test_delivery.py":["pytest","unittest.mock","uuid","nikita.platforms.telegram.delivery"],"tests/platforms/telegram/test_errors.py":["pytest","unittest.mock","uuid","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models"],"tests/platforms/telegram/test_message_handler.py":["pytest","decimal","unittest.mock","uuid","datetime","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.models","nikita.platforms.telegram.rate_limiter","nikita.agents.text.handler","nikita.config.enums","nikita.db.models.user","nikita.engine.scoring.calculator","nikita.engine.scoring.models"],"tests/platforms/telegram/test_message_handler_refresh.py":["pytest","unittest.mock","uuid","nikita.platforms.telegram.message_handler"],"tests/platforms/telegram/test_onboarding_handler.py":["unittest.mock","uuid","pytest","nikita.db.models.profile","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler","nikita.platforms.telegram.onboarding.handler"],"tests/platforms/telegram/test_otp_handler.py":["pytest","unittest.mock","nikita.platforms.telegram.otp_handler"],"tests/platforms/telegram/test_rate_limiter.py":["pytest","datetime","uuid","unittest.mock","nikita.platforms.telegram.rate_limiter"],"tests/platforms/telegram/test_registration_handler.py":["pytest","unittest.mock","nikita.platforms.telegram.registration_handler"],"tests/platforms/telegram/test_session_integration.py":["pytest","datetime","uuid","unittest.mock","nikita.platforms.telegram.message_handler","nikita.platforms.telegram.delivery","nikita.platforms.telegram.models","unittest.mock","decimal","nikita.agents.text.handler","decimal","nikita.agents.text.handler","nikita.agents.text.handler","decimal","nikita.agents.text.handler"],"tests/services/test_backstory_generator.py":["unittest.mock","pytest","nikita.services.venue_research","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator","nikita.services.backstory_generator"],"tests/services/test_persona_adaptation.py":["pytest","nikita.services.persona_adaptation"],"tests/services/test_venue_research.py":["datetime","unittest.mock","pytest","nikita.db.models.profile","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","nikita.services.venue_research","logging","nikita.services.venue_research"],"tests/smoke/test_deployment.py":["os","httpx","pytest","asyncio"],"tests/text_patterns/test_emoji.py":["pytest","random","nikita.text_patterns.emoji_processor","nikita.text_patterns.models"],"tests/text_patterns/test_infrastructure.py":["pytest","pathlib","yaml","nikita.text_patterns.models","nikita.text_patterns"],"tests/text_patterns/test_integration.py":["pytest","unittest.mock","nikita.text_patterns.processor","nikita.text_patterns.models"],"tests/text_patterns/test_length.py":["pytest","nikita.text_patterns.length_adjuster","nikita.text_patterns.models"],"tests/text_patterns/test_punctuation.py":["pytest","random","nikita.text_patterns.punctuation","nikita.text_patterns.models"],"tests/text_patterns/test_splitting.py":["pytest","nikita.text_patterns.message_splitter","nikita.text_patterns.models"],"tests/touchpoints/test_delivery.py":["datetime","unittest.mock","uuid","pytest","nikita.touchpoints.engine","nikita.touchpoints.models","nikita.touchpoints.silence","nikita.touchpoints.engine","nikita.touchpoints"],"tests/touchpoints/test_e2e.py":["pytest","datetime","unittest.mock","uuid","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.silence","nikita.touchpoints.engine","nikita.touchpoints.models"],"tests/touchpoints/test_generation.py":["pathlib","unittest.mock","uuid","pytest","nikita.touchpoints.generator","nikita.touchpoints.models","nikita.touchpoints.generator","nikita.touchpoints.generator","nikita.touchpoints.generator","nikita.touchpoints"],"tests/touchpoints/test_infrastructure.py":["datetime","unittest.mock","uuid","pytest","nikita.touchpoints.models","nikita","nikita.touchpoints","nikita.touchpoints","nikita.touchpoints","nikita.touchpoints.store","nikita.touchpoints.models","nikita.touchpoints.store","nikita.db.models.scheduled_touchpoint"],"tests/touchpoints/test_scheduling.py":["random","datetime","unittest.mock","uuid","pytest","nikita.touchpoints.models","nikita.touchpoints.scheduler","nikita.touchpoints.scheduler"],"tests/touchpoints/test_silence.py":["pytest","nikita.touchpoints.silence","nikita.touchpoints.silence"]},"dir_purposes":{"docs-to-process/.archive/2026-01-19-continuity-memory-prd":"Test files and test utilities","docs-to-process/.archive":"Test files and test utilities","docs-to-process":"Project documentation","docs-to-process/.archive/nikita-ideas-concepts":"Data models and schemas","docs":"Project documentation","docs/ideas":"Test files and test utilities","docs/knowledge-transfer":"Test files and test utilities","nikita/agents/voice":"Data models and schemas","nikita/api":"API endpoints and route handlers","nikita/db/models":"Data models and database schemas","nikita/life_simulation":"Data models and schemas","scripts":"Build and utility scripts","specs/030-text-continuity":"Test files and test utilities","specs":"Test specifications","specs/031-post-processing-unification":"Test files and test utilities","specs/032-voice-agent-optimization":"Test files and test utilities","specs/033-unified-phone-number":"Test files and test utilities","specs/035-context-surfacing-fixes":"Test files and test utilities","specs/036-humanization-fixes":"Test files and test utilities","specs/037-pipeline-refactor":"Test files and test utilities","specs/038-conversation-continuity":"Test files and test utilities","specs/039-unified-context-engine":"Test files and test utilities","specs/040-context-engine-enhancements":"Test files and test utilities","specs/041-gap-remediation":"Test files and test utilities","tests/agents/text":"Test files and test utilities","tests":"Test files and test utilities","tests/agents/voice":"Test files and test utilities","tests/api/dependencies":"Test files and test utilities","tests/api/routes":"Test files and test utilities","tests/api/schemas":"Test files and test utilities","tests/context/utils":"Shared utility functions and helpers","tests/context":"Test files and test utilities","tests/db/integration":"Test files and test utilities","tests/db":"Test files and test utilities","tests/db/models":"Data models and database schemas","tests/db/repositories":"Test files and test utilities","tests/life_simulation":"Test files and test utilities","tests/onboarding":"Test files and test utilities","tests/pipeline":"Test files and test utilities","tests/pipeline_fixes":"Test files and test utilities","tests/touchpoints":"Test files and test utilities","nikita/api/middleware":"Middleware functions and handlers","nikita/behavioral":"Data models and schemas","nikita/config":"Configuration files and settings","nikita/conflicts":"Data models and schemas","nikita/context/utils":"Shared utility functions and helpers","nikita/db/migrations":"Database migration files","nikita/emotional_state":"Data models and schemas","nikita/engine/decay":"Data models and schemas","nikita/engine/engagement":"Data models and schemas","nikita/engine/scoring":"Data models and schemas","nikita/engine/vice":"Data models and schemas","nikita/onboarding":"Data models and schemas","nikita/pipeline":"Data models and schemas","nikita/platforms/telegram":"Data models and schemas","nikita/services":"Business logic and external service integrations","nikita/text_patterns":"Data models and schemas","nikita/touchpoints":"Data models and schemas","specs/001-nikita-text-agent":"Test files and test utilities","specs/002-telegram-integration":"Test files and test utilities","specs/003-scoring-engine":"Test files and test utilities","specs/004-chapter-boss-system":"Test files and test utilities","specs/005-decay-system":"Test files and test utilities","specs/006-vice-personalization":"Test files and test utilities","specs/007-voice-agent":"Test files and test utilities","specs/008-player-portal":"Test files and test utilities","specs/009-database-infrastructure":"Test files and test utilities","specs/010-api-infrastructure":"API endpoints and route handlers","specs/011-background-tasks":"Test files and test utilities","specs/012-context-engineering":"Test files and test utilities","specs/013-configuration-system":"Configuration files and settings","specs/014-engagement-model":"Test files and test utilities","specs/015-onboarding-fix":"Test files and test utilities","specs/016-admin-debug-portal":"Test files and test utilities","specs/017-enhanced-onboarding":"Test files and test utilities","specs/018-admin-prompt-viewing":"Test files and test utilities","specs/019-admin-voice-monitoring":"Test files and test utilities","specs/020-admin-text-monitoring":"Test files and test utilities","specs/021-hierarchical-prompt-composition":"Test files and test utilities","specs/022-life-simulation-engine":"Test files and test utilities","specs/023-emotional-state-engine":"Test files and test utilities","specs/024-behavioral-meta-instructions":"Test files and test utilities","specs/025-proactive-touchpoint-system":"Test files and test utilities","specs/026-text-behavioral-patterns":"Test files and test utilities","specs/027-conflict-generation-system":"Test files and test utilities","specs/028-voice-onboarding":"Test files and test utilities","specs/029-context-comprehensive":"Test files and test utilities","specs/034-admin-user-monitoring":"Test files and test utilities","specs/042-unified-pipeline":"Test files and test utilities","specs/043-integration-wiring":"Test files and test utilities","specs/044-portal-respec":"Test specifications","tests/behavioral":"Test files and test utilities","tests/config":"Configuration files and settings","tests/conflicts":"Test files and test utilities","tests/e2e":"Test files and test utilities","tests/e2e/full_journey":"Test files and test utilities","tests/e2e/helpers":"Helper functions and utilities","tests/e2e/portal":"Test files and test utilities","tests/emotional_state":"Test files and test utilities","tests/engine/chapters":"Test files and test utilities","tests/engine/decay":"Test files and test utilities","tests/engine/engagement":"Test files and test utilities","tests/engine/scoring":"Test files and test utilities","tests/engine/vice":"Test files and test utilities","tests/integration":"Test files and test utilities","tests/memory":"Test files and test utilities","tests/platforms/telegram":"Test files and test utilities","tests/services":"Business logic and external service integrations","tests/smoke":"Test files and test utilities","tests/text_patterns":"Test files and test utilities"},"staleness":1769870446.90271}